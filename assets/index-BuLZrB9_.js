var SK=Object.defineProperty;var IK=(e,t,n)=>t in e?SK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var F=(e,t,n)=>(IK(e,typeof t!="symbol"?t+"":t,n),n);function xK(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in e)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(e,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var Ra=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gL={exports:{}},B6={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CK=Symbol.for("react.transitional.element"),AK=Symbol.for("react.fragment");function mL(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var s in t)s!=="key"&&(n[s]=t[s])}else n=t;return t=n.ref,{$$typeof:CK,type:e,key:i,ref:t!==void 0?t:null,props:n}}B6.Fragment=AK;B6.jsx=mL;B6.jsxs=mL;gL.exports=B6;var vv=gL.exports;const ge=vv.Fragment,g=vv.jsx,P=vv.jsxs;var pL={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv=Symbol.for("react.transitional.element"),MK=Symbol.for("react.portal"),RK=Symbol.for("react.fragment"),kK=Symbol.for("react.strict_mode"),DK=Symbol.for("react.profiler"),LK=Symbol.for("react.consumer"),NK=Symbol.for("react.context"),OK=Symbol.for("react.forward_ref"),PK=Symbol.for("react.suspense"),FK=Symbol.for("react.memo"),UL=Symbol.for("react.lazy"),GS=Symbol.iterator;function BK(e){return e===null||typeof e!="object"?null:(e=GS&&e[GS]||e["@@iterator"],typeof e=="function"?e:null)}var bL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yL=Object.assign,EL={};function tg(e,t,n){this.props=e,this.context=t,this.refs=EL,this.updater=n||bL}tg.prototype.isReactComponent={};tg.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};tg.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vL(){}vL.prototype=tg.prototype;function _v(e,t,n){this.props=e,this.context=t,this.refs=EL,this.updater=n||bL}var Tv=_v.prototype=new vL;Tv.constructor=_v;yL(Tv,tg.prototype);Tv.isPureReactComponent=!0;var XS=Array.isArray,hn={H:null,A:null,T:null,S:null},wL=Object.prototype.hasOwnProperty;function Sv(e,t,n,i,s,r){return n=r.ref,{$$typeof:wv,type:e,key:t,ref:n!==void 0?n:null,props:r}}function zK(e,t){return Sv(e.type,t,void 0,void 0,void 0,e.props)}function Iv(e){return typeof e=="object"&&e!==null&&e.$$typeof===wv}function HK(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var jS=/\/+/g;function Ky(e,t){return typeof e=="object"&&e!==null&&e.key!=null?HK(""+e.key):t.toString(36)}function YS(){}function VK(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(YS,YS):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function uf(e,t,n,i,s){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(r){case"bigint":case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case wv:case MK:o=!0;break;case UL:return o=e._init,uf(o(e._payload),t,n,i,s)}}if(o)return s=s(e),o=i===""?"."+Ky(e,0):i,XS(s)?(n="",o!=null&&(n=o.replace(jS,"$&/")+"/"),uf(s,t,n,"",function(c){return c})):s!=null&&(Iv(s)&&(s=zK(s,n+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(jS,"$&/")+"/")+o)),t.push(s)),1;o=0;var a=i===""?".":i+":";if(XS(e))for(var l=0;l<e.length;l++)i=e[l],r=a+Ky(i,l),o+=uf(i,t,n,r,s);else if(l=BK(e),typeof l=="function")for(e=l.call(e),l=0;!(i=e.next()).done;)i=i.value,r=a+Ky(i,l++),o+=uf(i,t,n,r,s);else if(r==="object"){if(typeof e.then=="function")return uf(VK(e),t,n,i,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return o}function Fp(e,t,n){if(e==null)return e;var i=[],s=0;return uf(e,i,"","",function(r){return t.call(n,r,s++)}),i}function $K(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var WS=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function GK(){}We.Children={map:Fp,forEach:function(e,t,n){Fp(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Fp(e,function(){t++}),t},toArray:function(e){return Fp(e,function(t){return t})||[]},only:function(e){if(!Iv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};We.Component=tg;We.Fragment=RK;We.Profiler=DK;We.PureComponent=_v;We.StrictMode=kK;We.Suspense=PK;We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=hn;We.act=function(){throw Error("act(...) is not supported in production builds of React.")};We.cache=function(e){return function(){return e.apply(null,arguments)}};We.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=yL({},e.props),s=e.key,r=void 0;if(t!=null)for(o in t.ref!==void 0&&(r=void 0),t.key!==void 0&&(s=""+t.key),t)!wL.call(t,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&t.ref===void 0||(i[o]=t[o]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}return Sv(e.type,s,void 0,void 0,r,i)};We.createContext=function(e){return e={$$typeof:NK,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:LK,_context:e},e};We.createElement=function(e,t,n){var i,s={},r=null;if(t!=null)for(i in t.key!==void 0&&(r=""+t.key),t)wL.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=t[i]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];s.children=a}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)s[i]===void 0&&(s[i]=o[i]);return Sv(e,r,void 0,void 0,null,s)};We.createRef=function(){return{current:null}};We.forwardRef=function(e){return{$$typeof:OK,render:e}};We.isValidElement=Iv;We.lazy=function(e){return{$$typeof:UL,_payload:{_status:-1,_result:e},_init:$K}};We.memo=function(e,t){return{$$typeof:FK,type:e,compare:t===void 0?null:t}};We.startTransition=function(e){var t=hn.T,n={};hn.T=n;try{var i=e(),s=hn.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(GK,WS)}catch(r){WS(r)}finally{hn.T=t}};We.unstable_useCacheRefresh=function(){return hn.H.useCacheRefresh()};We.use=function(e){return hn.H.use(e)};We.useActionState=function(e,t,n){return hn.H.useActionState(e,t,n)};We.useCallback=function(e,t){return hn.H.useCallback(e,t)};We.useContext=function(e){return hn.H.useContext(e)};We.useDebugValue=function(){};We.useDeferredValue=function(e,t){return hn.H.useDeferredValue(e,t)};We.useEffect=function(e,t){return hn.H.useEffect(e,t)};We.useId=function(){return hn.H.useId()};We.useImperativeHandle=function(e,t,n){return hn.H.useImperativeHandle(e,t,n)};We.useInsertionEffect=function(e,t){return hn.H.useInsertionEffect(e,t)};We.useLayoutEffect=function(e,t){return hn.H.useLayoutEffect(e,t)};We.useMemo=function(e,t){return hn.H.useMemo(e,t)};We.useOptimistic=function(e,t){return hn.H.useOptimistic(e,t)};We.useReducer=function(e,t,n){return hn.H.useReducer(e,t,n)};We.useRef=function(e){return hn.H.useRef(e)};We.useState=function(e){return hn.H.useState(e)};We.useSyncExternalStore=function(e,t,n){return hn.H.useSyncExternalStore(e,t,n)};We.useTransition=function(){return hn.H.useTransition()};We.version="19.0.0";pL.exports=We;var L=pL.exports;const ae=hl(L),XK=xK({__proto__:null,default:ae},[L]);var _L={exports:{}},z6={},TL={exports:{}},SL={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,V){var X=H.length;H.push(V);e:for(;0<X;){var j=X-1>>>1,q=H[j];if(0<s(q,V))H[j]=V,H[X]=q,X=j;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var V=H[0],X=H.pop();if(X!==V){H[0]=X;e:for(var j=0,q=H.length,fe=q>>>1;j<fe;){var ie=2*(j+1)-1,Ue=H[ie],Ve=ie+1,$e=H[Ve];if(0>s(Ue,X))Ve<q&&0>s($e,Ue)?(H[j]=$e,H[Ve]=X,j=Ve):(H[j]=Ue,H[ie]=X,j=ie);else if(Ve<q&&0>s($e,X))H[j]=$e,H[Ve]=X,j=Ve;else break e}}return V}function s(H,V){var X=H.sortIndex-V.sortIndex;return X!==0?X:H.id-V.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,m=!1,p=!1,U=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function v(H){for(var V=n(c);V!==null;){if(V.callback===null)i(c);else if(V.startTime<=H)i(c),V.sortIndex=V.expirationTime,t(l,V);else break;V=n(c)}}function w(H){if(p=!1,v(H),!m)if(n(l)!==null)m=!0,$();else{var V=n(c);V!==null&&G(w,V.startTime-H)}}var I=!1,M=-1,T=5,_=-1;function x(){return!(e.unstable_now()-_<T)}function C(){if(I){var H=e.unstable_now();_=H;var V=!0;try{e:{m=!1,p&&(p=!1,y(M),M=-1),h=!0;var X=f;try{t:{for(v(H),d=n(l);d!==null&&!(d.expirationTime>H&&x());){var j=d.callback;if(typeof j=="function"){d.callback=null,f=d.priorityLevel;var q=j(d.expirationTime<=H);if(H=e.unstable_now(),typeof q=="function"){d.callback=q,v(H),V=!0;break t}d===n(l)&&i(l),v(H)}else i(l);d=n(l)}if(d!==null)V=!0;else{var fe=n(c);fe!==null&&G(w,fe.startTime-H),V=!1}}break e}finally{d=null,f=X,h=!1}V=void 0}}finally{V?R():I=!1}}}var R;if(typeof E=="function")R=function(){E(C)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,D=N.port2;N.port1.onmessage=C,R=function(){D.postMessage(null)}}else R=function(){U(C,0)};function $(){I||(I=!0,R())}function G(H,V){M=U(function(){H(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,$())},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(H){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var X=f;f=V;try{return H()}finally{f=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,V){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var X=f;f=H;try{return V()}finally{f=X}},e.unstable_scheduleCallback=function(H,V,X){var j=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?j+X:j):X=j,H){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=X+q,H={id:u++,callback:V,priorityLevel:H,startTime:X,expirationTime:q,sortIndex:-1},X>j?(H.sortIndex=X,t(c,H),n(l)===null&&H===n(c)&&(p?(y(M),M=-1):p=!0,G(w,X-j))):(H.sortIndex=q,t(l,H),m||h||(m=!0,$())),H},e.unstable_shouldYield=x,e.unstable_wrapCallback=function(H){var V=f;return function(){var X=f;f=V;try{return H.apply(this,arguments)}finally{f=X}}}})(SL);TL.exports=SL;var jK=TL.exports,IL={exports:{}},ss={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YK=L;function xL(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function vl(){}var Qi={d:{f:vl,r:function(){throw Error(xL(522))},D:vl,C:vl,L:vl,m:vl,X:vl,S:vl,M:vl},p:0,findDOMNode:null},WK=Symbol.for("react.portal");function KK(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:WK,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var z1=YK.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function H6(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}ss.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Qi;ss.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(xL(299));return KK(e,t,null,n)};ss.flushSync=function(e){var t=z1.T,n=Qi.p;try{if(z1.T=null,Qi.p=2,e)return e()}finally{z1.T=t,Qi.p=n,Qi.d.f()}};ss.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Qi.d.C(e,t))};ss.prefetchDNS=function(e){typeof e=="string"&&Qi.d.D(e)};ss.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=H6(n,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,r=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Qi.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&Qi.d.X(e,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};ss.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=H6(t.as,t.crossOrigin);Qi.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Qi.d.M(e)};ss.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=H6(n,t.crossOrigin);Qi.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};ss.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=H6(t.as,t.crossOrigin);Qi.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Qi.d.m(e)};ss.requestFormReset=function(e){Qi.d.r(e)};ss.unstable_batchedUpdates=function(e,t){return e(t)};ss.useFormState=function(e,t,n){return z1.H.useFormState(e,t,n)};ss.useFormStatus=function(){return z1.H.useHostTransitionStatus()};ss.version="19.0.0";function CL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CL)}catch(e){console.error(e)}}CL(),IL.exports=ss;var Ln=IL.exports;const ZK=hl(Ln);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ii=jK,AL=L,qK=Ln;function te(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ML(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var QK=Symbol.for("react.element"),Bp=Symbol.for("react.transitional.element"),g1=Symbol.for("react.portal"),_f=Symbol.for("react.fragment"),RL=Symbol.for("react.strict_mode"),g7=Symbol.for("react.profiler"),JK=Symbol.for("react.provider"),kL=Symbol.for("react.consumer"),ka=Symbol.for("react.context"),xv=Symbol.for("react.forward_ref"),m7=Symbol.for("react.suspense"),p7=Symbol.for("react.suspense_list"),Cv=Symbol.for("react.memo"),Nl=Symbol.for("react.lazy"),DL=Symbol.for("react.offscreen"),eZ=Symbol.for("react.memo_cache_sentinel"),KS=Symbol.iterator;function Fg(e){return e===null||typeof e!="object"?null:(e=KS&&e[KS]||e["@@iterator"],typeof e=="function"?e:null)}var tZ=Symbol.for("react.client.reference");function U7(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===tZ?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _f:return"Fragment";case g1:return"Portal";case g7:return"Profiler";case RL:return"StrictMode";case m7:return"Suspense";case p7:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ka:return(e.displayName||"Context")+".Provider";case kL:return(e._context.displayName||"Context")+".Consumer";case xv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Cv:return t=e.displayName||null,t!==null?t:U7(e.type)||"Memo";case Nl:t=e._payload,e=e._init;try{return U7(e(t))}catch{}}return null}var je=AL.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nn=Object.assign,Zy,ZS;function m1(e){if(Zy===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Zy=t&&t[1]||"",ZS=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zy+e+ZS}var qy=!1;function Qy(e,t){if(!e||qy)return"";qy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(h){var f=h}Reflect.construct(e,[],d)}else{try{d.call()}catch(h){f=h}e.call(d.prototype)}}else{try{throw Error()}catch(h){f=h}(d=e())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(h){if(h&&f&&typeof h.stack=="string")return[h.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),o=r[0],a=r[1];if(o&&a){var l=o.split(`
`),c=a.split(`
`);for(s=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(i===l.length||s===c.length)for(i=l.length-1,s=c.length-1;1<=i&&0<=s&&l[i]!==c[s];)s--;for(;1<=i&&0<=s;i--,s--)if(l[i]!==c[s]){if(i!==1||s!==1)do if(i--,s--,0>s||l[i]!==c[s]){var u=`
`+l[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=s);break}}}finally{qy=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?m1(n):""}function nZ(e){switch(e.tag){case 26:case 27:case 5:return m1(e.type);case 16:return m1("Lazy");case 13:return m1("Suspense");case 19:return m1("SuspenseList");case 0:case 15:return e=Qy(e.type,!1),e;case 11:return e=Qy(e.type.render,!1),e;case 1:return e=Qy(e.type,!0),e;default:return""}}function qS(e){try{var t="";do t+=nZ(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function ng(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function LL(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function QS(e){if(ng(e)!==e)throw Error(te(188))}function iZ(e){var t=e.alternate;if(!t){if(t=ng(e),t===null)throw Error(te(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return QS(s),e;if(r===i)return QS(s),t;r=r.sibling}throw Error(te(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o)throw Error(te(189))}}if(n.alternate!==i)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?e:t}function NL(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=NL(e),t!==null)return t;e=e.sibling}return null}var p1=Array.isArray,tn=qK.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pu={pending:!1,data:null,method:null,action:null},b7=[],Tf=-1;function na(e){return{current:e}}function gi(e){0>Tf||(e.current=b7[Tf],b7[Tf]=null,Tf--)}function cn(e,t){Tf++,b7[Tf]=e.current,e.current=t}var Fo=na(null),S0=na(null),sc=na(null),D2=na(null);function L2(e,t){switch(cn(sc,t),cn(S0,e),cn(Fo,null),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?JI(t):0;break;default:if(e=e===8?t.parentNode:t,t=e.tagName,e=e.namespaceURI)e=JI(e),t=YO(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}gi(Fo),cn(Fo,t)}function hh(){gi(Fo),gi(S0),gi(sc)}function y7(e){e.memoizedState!==null&&cn(D2,e);var t=Fo.current,n=YO(t,e.type);t!==n&&(cn(S0,e),cn(Fo,n))}function N2(e){S0.current===e&&(gi(Fo),gi(S0)),D2.current===e&&(gi(D2),O0._currentValue=Pu)}var E7=Object.prototype.hasOwnProperty,Av=ii.unstable_scheduleCallback,Jy=ii.unstable_cancelCallback,sZ=ii.unstable_shouldYield,rZ=ii.unstable_requestPaint,Bo=ii.unstable_now,oZ=ii.unstable_getCurrentPriorityLevel,OL=ii.unstable_ImmediatePriority,PL=ii.unstable_UserBlockingPriority,O2=ii.unstable_NormalPriority,aZ=ii.unstable_LowPriority,FL=ii.unstable_IdlePriority,lZ=ii.log,cZ=ii.unstable_setDisableYieldValue,Lm=null,zs=null;function uZ(e){if(zs&&typeof zs.onCommitFiberRoot=="function")try{zs.onCommitFiberRoot(Lm,e,void 0,(e.current.flags&128)===128)}catch{}}function Kl(e){if(typeof lZ=="function"&&cZ(e),zs&&typeof zs.setStrictMode=="function")try{zs.setStrictMode(Lm,e)}catch{}}var Hs=Math.clz32?Math.clz32:hZ,dZ=Math.log,fZ=Math.LN2;function hZ(e){return e>>>=0,e===0?32:31-(dZ(e)/fZ|0)|0}var zp=128,Hp=4194304;function du(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function V6(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,s=e.suspendedLanes,r=e.pingedLanes,o=e.warmLanes;e=e.finishedLanes!==0;var a=n&134217727;return a!==0?(n=a&~s,n!==0?i=du(n):(r&=a,r!==0?i=du(r):e||(o=a&~o,o!==0&&(i=du(o))))):(a=n&~s,a!==0?i=du(a):r!==0?i=du(r):e||(o=n&~o,o!==0&&(i=du(o)))),i===0?0:t!==0&&t!==i&&!(t&s)&&(s=i&-i,o=t&-t,s>=o||s===32&&(o&4194176)!==0)?t:i}function Nm(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function gZ(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BL(){var e=zp;return zp<<=1,!(zp&4194176)&&(zp=128),e}function zL(){var e=Hp;return Hp<<=1,!(Hp&62914560)&&(Hp=4194304),e}function e8(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Om(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function mZ(e,t,n,i,s,r){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Hs(n),d=1<<u;a[u]=0,l[u]=-1;var f=c[u];if(f!==null)for(c[u]=null,u=0;u<f.length;u++){var h=f[u];h!==null&&(h.lane&=-536870913)}n&=~d}i!==0&&HL(e,i,0),r!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=r&~(o&~t))}function HL(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Hs(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194218}function VL(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Hs(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}function $L(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function GL(){var e=tn.p;return e!==0?e:(e=window.event,e===void 0?32:iP(e.type))}function pZ(e,t){var n=tn.p;try{return tn.p=e,t()}finally{tn.p=n}}var Yc=Math.random().toString(36).slice(2),zi="__reactFiber$"+Yc,Es="__reactProps$"+Yc,ig="__reactContainer$"+Yc,v7="__reactEvents$"+Yc,UZ="__reactListeners$"+Yc,bZ="__reactHandles$"+Yc,JS="__reactResources$"+Yc,I0="__reactMarker$"+Yc;function Mv(e){delete e[zi],delete e[Es],delete e[v7],delete e[UZ],delete e[bZ]}function Tu(e){var t=e[zi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ig]||n[zi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=tx(e);e!==null;){if(n=e[zi])return n;e=tx(e)}return t}e=n,n=e.parentNode}return null}function sg(e){if(e=e[zi]||e[ig]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function U1(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(te(33))}function Xf(e){var t=e[JS];return t||(t=e[JS]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ui(e){e[I0]=!0}var XL=new Set,jL={};function xd(e,t){gh(e,t),gh(e+"Capture",t)}function gh(e,t){for(jL[e]=t,e=0;e<t.length;e++)XL.add(t[e])}var Wa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yZ=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),eI={},tI={};function EZ(e){return E7.call(tI,e)?!0:E7.call(eI,e)?!1:yZ.test(e)?tI[e]=!0:(eI[e]=!0,!1)}function VU(e,t,n){if(EZ(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Vp(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function ca(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function ir(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function YL(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function vZ(e){var t=YL(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function P2(e){e._valueTracker||(e._valueTracker=vZ(e))}function WL(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=YL(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function F2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var wZ=/[\n"\\]/g;function or(e){return e.replace(wZ,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function w7(e,t,n,i,s,r,o,a){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ir(t)):e.value!==""+ir(t)&&(e.value=""+ir(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?_7(e,o,ir(t)):n!=null?_7(e,o,ir(n)):i!=null&&e.removeAttribute("value"),s==null&&r!=null&&(e.defaultChecked=!!r),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.name=""+ir(a):e.removeAttribute("name")}function KL(e,t,n,i,s,r,o,a){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||t!=null))return;n=n!=null?""+ir(n):"",t=t!=null?""+ir(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=a?e.checked:!!i,e.defaultChecked=!!i,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o)}function _7(e,t,n){t==="number"&&F2(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function jf(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ir(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ZL(e,t,n){if(t!=null&&(t=""+ir(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+ir(n):""}function qL(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(te(92));if(p1(i)){if(1<i.length)throw Error(te(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=ir(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function mh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var _Z=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nI(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||_Z.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function QL(e,t,n){if(t!=null&&typeof t!="object")throw Error(te(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var s in t)i=t[s],t.hasOwnProperty(s)&&n[s]!==i&&nI(e,s,i)}else for(var r in t)t.hasOwnProperty(r)&&nI(e,r,t[r])}function Rv(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var TZ=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),SZ=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $U(e){return SZ.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var T7=null;function kv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Sf=null,Yf=null;function iI(e){var t=sg(e);if(t&&(e=t.stateNode)){var n=e[Es]||null;e:switch(e=t.stateNode,t.type){case"input":if(w7(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+or(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=i[Es]||null;if(!s)throw Error(te(90));w7(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&WL(i)}break e;case"textarea":ZL(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&jf(e,!!n.multiple,t,!1)}}}var t8=!1;function JL(e,t,n){if(t8)return e(t,n);t8=!0;try{var i=e(t);return i}finally{if(t8=!1,(Sf!==null||Yf!==null)&&(Q6(),Sf&&(t=Sf,e=Yf,Yf=Sf=null,iI(t),e)))for(t=0;t<e.length;t++)iI(e[t])}}function x0(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Es]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(te(231,t,typeof n));return n}var S7=!1;if(Wa)try{var Bg={};Object.defineProperty(Bg,"passive",{get:function(){S7=!0}}),window.addEventListener("test",Bg,Bg),window.removeEventListener("test",Bg,Bg)}catch{S7=!1}var Zl=null,Dv=null,GU=null;function eN(){if(GU)return GU;var e,t=Dv,n=t.length,i,s="value"in Zl?Zl.value:Zl.textContent,r=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(i=1;i<=o&&t[n-i]===s[r-i];i++);return GU=s.slice(e,1<i?1-i:void 0)}function XU(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $p(){return!0}function sI(){return!1}function _s(e){function t(n,i,s,r,o){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?$p:sI,this.isPropagationStopped=sI,this}return nn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$p)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$p)},persist:function(){},isPersistent:$p}),t}var Cd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$6=_s(Cd),Pm=nn({},Cd,{view:0,detail:0}),IZ=_s(Pm),n8,i8,zg,G6=nn({},Pm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zg&&(zg&&e.type==="mousemove"?(n8=e.screenX-zg.screenX,i8=e.screenY-zg.screenY):i8=n8=0,zg=e),n8)},movementY:function(e){return"movementY"in e?e.movementY:i8}}),rI=_s(G6),xZ=nn({},G6,{dataTransfer:0}),CZ=_s(xZ),AZ=nn({},Pm,{relatedTarget:0}),s8=_s(AZ),MZ=nn({},Cd,{animationName:0,elapsedTime:0,pseudoElement:0}),RZ=_s(MZ),kZ=nn({},Cd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),DZ=_s(kZ),LZ=nn({},Cd,{data:0}),oI=_s(LZ),NZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FZ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=PZ[e])?!!t[e]:!1}function Lv(){return FZ}var BZ=nn({},Pm,{key:function(e){if(e.key){var t=NZ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=XU(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?OZ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lv,charCode:function(e){return e.type==="keypress"?XU(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?XU(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zZ=_s(BZ),HZ=nn({},G6,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aI=_s(HZ),VZ=nn({},Pm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lv}),$Z=_s(VZ),GZ=nn({},Cd,{propertyName:0,elapsedTime:0,pseudoElement:0}),XZ=_s(GZ),jZ=nn({},G6,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),YZ=_s(jZ),WZ=nn({},Cd,{newState:0,oldState:0}),KZ=_s(WZ),ZZ=[9,13,27,32],Nv=Wa&&"CompositionEvent"in window,H1=null;Wa&&"documentMode"in document&&(H1=document.documentMode);var qZ=Wa&&"TextEvent"in window&&!H1,tN=Wa&&(!Nv||H1&&8<H1&&11>=H1),lI=" ",cI=!1;function nN(e,t){switch(e){case"keyup":return ZZ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iN(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var If=!1;function QZ(e,t){switch(e){case"compositionend":return iN(t);case"keypress":return t.which!==32?null:(cI=!0,lI);case"textInput":return e=t.data,e===lI&&cI?null:e;default:return null}}function JZ(e,t){if(If)return e==="compositionend"||!Nv&&nN(e,t)?(e=eN(),GU=Dv=Zl=null,If=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tN&&t.locale!=="ko"?null:t.data;default:return null}}var eq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eq[e.type]:t==="textarea"}function sN(e,t,n,i){Sf?Yf?Yf.push(i):Yf=[i]:Sf=i,t=eb(t,"onChange"),0<t.length&&(n=new $6("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var V1=null,C0=null;function tq(e){GO(e,0)}function X6(e){var t=U1(e);if(WL(t))return e}function dI(e,t){if(e==="change")return t}var rN=!1;if(Wa){var r8;if(Wa){var o8="oninput"in document;if(!o8){var fI=document.createElement("div");fI.setAttribute("oninput","return;"),o8=typeof fI.oninput=="function"}r8=o8}else r8=!1;rN=r8&&(!document.documentMode||9<document.documentMode)}function hI(){V1&&(V1.detachEvent("onpropertychange",oN),C0=V1=null)}function oN(e){if(e.propertyName==="value"&&X6(C0)){var t=[];sN(t,C0,e,kv(e)),JL(tq,t)}}function nq(e,t,n){e==="focusin"?(hI(),V1=t,C0=n,V1.attachEvent("onpropertychange",oN)):e==="focusout"&&hI()}function iq(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return X6(C0)}function sq(e,t){if(e==="click")return X6(t)}function rq(e,t){if(e==="input"||e==="change")return X6(t)}function oq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xs=typeof Object.is=="function"?Object.is:oq;function A0(e,t){if(Xs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!E7.call(t,s)||!Xs(e[s],t[s]))return!1}return!0}function gI(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mI(e,t){var n=gI(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gI(n)}}function aN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?aN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lN(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=F2(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=F2(e.document)}return t}function Ov(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function aq(e,t){var n=lN(t);t=e.focusedElem;var i=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&aN(t.ownerDocument.documentElement,t)){if(i!==null&&Ov(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=mI(t,r);var o=mI(t,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var lq=Wa&&"documentMode"in document&&11>=document.documentMode,xf=null,I7=null,$1=null,x7=!1;function pI(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;x7||xf==null||xf!==F2(i)||(i=xf,"selectionStart"in i&&Ov(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),$1&&A0($1,i)||($1=i,i=eb(I7,"onSelect"),0<i.length&&(t=new $6("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=xf)))}function ou(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cf={animationend:ou("Animation","AnimationEnd"),animationiteration:ou("Animation","AnimationIteration"),animationstart:ou("Animation","AnimationStart"),transitionrun:ou("Transition","TransitionRun"),transitionstart:ou("Transition","TransitionStart"),transitioncancel:ou("Transition","TransitionCancel"),transitionend:ou("Transition","TransitionEnd")},a8={},cN={};Wa&&(cN=document.createElement("div").style,"AnimationEvent"in window||(delete Cf.animationend.animation,delete Cf.animationiteration.animation,delete Cf.animationstart.animation),"TransitionEvent"in window||delete Cf.transitionend.transition);function Ad(e){if(a8[e])return a8[e];if(!Cf[e])return e;var t=Cf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in cN)return a8[e]=t[n];return e}var uN=Ad("animationend"),dN=Ad("animationiteration"),fN=Ad("animationstart"),cq=Ad("transitionrun"),uq=Ad("transitionstart"),dq=Ad("transitioncancel"),hN=Ad("transitionend"),gN=new Map,UI="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function go(e,t){gN.set(e,t),xd(t,[e])}var er=[],Af=0,Pv=0;function j6(){for(var e=Af,t=Pv=Af=0;t<e;){var n=er[t];er[t++]=null;var i=er[t];er[t++]=null;var s=er[t];er[t++]=null;var r=er[t];if(er[t++]=null,i!==null&&s!==null){var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}r!==0&&mN(n,s,r)}}function Y6(e,t,n,i){er[Af++]=e,er[Af++]=t,er[Af++]=n,er[Af++]=i,Pv|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Fv(e,t,n,i){return Y6(e,t,n,i),B2(e)}function _c(e,t){return Y6(e,null,null,t),B2(e)}function mN(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=e.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(s=!0)),e=r,r=r.return;s&&t!==null&&e.tag===3&&(r=e.stateNode,s=31-Hs(n),r=r.hiddenUpdates,e=r[s],e===null?r[s]=[t]:e.push(t),t.lane=n|536870912)}function B2(e){if(50<t0)throw t0=0,K7=null,Error(te(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Mf={},bI=new WeakMap;function ar(e,t){if(typeof e=="object"&&e!==null){var n=bI.get(e);return n!==void 0?n:(t={value:e,source:t,stack:qS(t)},bI.set(e,t),t)}return{value:e,source:t,stack:qS(t)}}var Rf=[],kf=0,z2=null,H2=0,sr=[],rr=0,Fu=null,Da=1,La="";function fu(e,t){Rf[kf++]=H2,Rf[kf++]=z2,z2=e,H2=t}function pN(e,t,n){sr[rr++]=Da,sr[rr++]=La,sr[rr++]=Fu,Fu=e;var i=Da;e=La;var s=32-Hs(i)-1;i&=~(1<<s),n+=1;var r=32-Hs(t)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Da=1<<32-Hs(t)+s|n<<s|i,La=r+e}else Da=1<<r|n<<s|i,La=e}function Bv(e){e.return!==null&&(fu(e,1),pN(e,1,0))}function zv(e){for(;e===z2;)z2=Rf[--kf],Rf[kf]=null,H2=Rf[--kf],Rf[kf]=null;for(;e===Fu;)Fu=sr[--rr],sr[rr]=null,La=sr[--rr],sr[rr]=null,Da=sr[--rr],sr[rr]=null}var Zi=null,_i=null,It=!1,Vr=null,Ao=!1,C7=Error(te(519));function qu(e){var t=Error(te(418,""));throw M0(ar(t,e)),C7}function yI(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[zi]=e,t[Es]=i,n){case"dialog":rt("cancel",t),rt("close",t);break;case"iframe":case"object":case"embed":rt("load",t);break;case"video":case"audio":for(n=0;n<D0.length;n++)rt(D0[n],t);break;case"source":rt("error",t);break;case"img":case"image":case"link":rt("error",t),rt("load",t);break;case"details":rt("toggle",t);break;case"input":rt("invalid",t),KL(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),P2(t);break;case"select":rt("invalid",t);break;case"textarea":rt("invalid",t),qL(t,i.value,i.defaultValue,i.children),P2(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||jO(t.textContent,n)?(i.popover!=null&&(rt("beforetoggle",t),rt("toggle",t)),i.onScroll!=null&&rt("scroll",t),i.onScrollEnd!=null&&rt("scrollend",t),i.onClick!=null&&(t.onclick=e5),t=!0):t=!1,t||qu(e)}function EI(e){for(Zi=e.return;Zi;)switch(Zi.tag){case 3:case 27:Ao=!0;return;case 5:case 13:Ao=!1;return;default:Zi=Zi.return}}function Hg(e){if(e!==Zi)return!1;if(!It)return EI(e),It=!0,!1;var t=!1,n;if((n=e.tag!==3&&e.tag!==27)&&((n=e.tag===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||n3(e.type,e.memoizedProps)),n=!n),n&&(t=!0),t&&_i&&qu(e),EI(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){_i=Qr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}_i=null}}else _i=Zi?Qr(e.stateNode.nextSibling):null;return!0}function Fm(){_i=Zi=null,It=!1}function M0(e){Vr===null?Vr=[e]:Vr.push(e)}var G1=Error(te(460)),UN=Error(te(474)),A7={then:function(){}};function vI(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Gp(){}function bN(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Gp,Gp),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===G1?Error(te(483)):e;default:if(typeof t.status=="string")t.then(Gp,Gp);else{if(e=Kt,e!==null&&100<e.shellSuspendCounter)throw Error(te(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=i}},function(i){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===G1?Error(te(483)):e}throw X1=t,G1}}var X1=null;function wI(){if(X1===null)throw Error(te(459));var e=X1;return X1=null,e}var Wf=null,R0=0;function Xp(e){var t=R0;return R0+=1,Wf===null&&(Wf=[]),bN(Wf,e,t)}function Vg(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function jp(e,t){throw t.$$typeof===QK?Error(te(525)):(e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function _I(e){var t=e._init;return t(e._payload)}function yN(e){function t(y,E){if(e){var v=y.deletions;v===null?(y.deletions=[E],y.flags|=16):v.push(E)}}function n(y,E){if(!e)return null;for(;E!==null;)t(y,E),E=E.sibling;return null}function i(y){for(var E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function s(y,E){return y=ac(y,E),y.index=0,y.sibling=null,y}function r(y,E,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<E?(y.flags|=33554434,E):v):(y.flags|=33554434,E)):(y.flags|=1048576,E)}function o(y){return e&&y.alternate===null&&(y.flags|=33554434),y}function a(y,E,v,w){return E===null||E.tag!==6?(E=y8(v,y.mode,w),E.return=y,E):(E=s(E,v),E.return=y,E)}function l(y,E,v,w){var I=v.type;return I===_f?u(y,E,v.props.children,w,v.key):E!==null&&(E.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Nl&&_I(I)===E.type)?(E=s(E,v.props),Vg(E,v),E.return=y,E):(E=ZU(v.type,v.key,v.props,null,y.mode,w),Vg(E,v),E.return=y,E)}function c(y,E,v,w){return E===null||E.tag!==4||E.stateNode.containerInfo!==v.containerInfo||E.stateNode.implementation!==v.implementation?(E=E8(v,y.mode,w),E.return=y,E):(E=s(E,v.children||[]),E.return=y,E)}function u(y,E,v,w,I){return E===null||E.tag!==7?(E=zu(v,y.mode,w,I),E.return=y,E):(E=s(E,v),E.return=y,E)}function d(y,E,v){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=y8(""+E,y.mode,v),E.return=y,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Bp:return v=ZU(E.type,E.key,E.props,null,y.mode,v),Vg(v,E),v.return=y,v;case g1:return E=E8(E,y.mode,v),E.return=y,E;case Nl:var w=E._init;return E=w(E._payload),d(y,E,v)}if(p1(E)||Fg(E))return E=zu(E,y.mode,v,null),E.return=y,E;if(typeof E.then=="function")return d(y,Xp(E),v);if(E.$$typeof===ka)return d(y,Yp(y,E),v);jp(y,E)}return null}function f(y,E,v,w){var I=E!==null?E.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return I!==null?null:a(y,E,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Bp:return v.key===I?l(y,E,v,w):null;case g1:return v.key===I?c(y,E,v,w):null;case Nl:return I=v._init,v=I(v._payload),f(y,E,v,w)}if(p1(v)||Fg(v))return I!==null?null:u(y,E,v,w,null);if(typeof v.then=="function")return f(y,E,Xp(v),w);if(v.$$typeof===ka)return f(y,E,Yp(y,v),w);jp(y,v)}return null}function h(y,E,v,w,I){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return y=y.get(v)||null,a(E,y,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Bp:return y=y.get(w.key===null?v:w.key)||null,l(E,y,w,I);case g1:return y=y.get(w.key===null?v:w.key)||null,c(E,y,w,I);case Nl:var M=w._init;return w=M(w._payload),h(y,E,v,w,I)}if(p1(w)||Fg(w))return y=y.get(v)||null,u(E,y,w,I,null);if(typeof w.then=="function")return h(y,E,v,Xp(w),I);if(w.$$typeof===ka)return h(y,E,v,Yp(E,w),I);jp(E,w)}return null}function m(y,E,v,w){for(var I=null,M=null,T=E,_=E=0,x=null;T!==null&&_<v.length;_++){T.index>_?(x=T,T=null):x=T.sibling;var C=f(y,T,v[_],w);if(C===null){T===null&&(T=x);break}e&&T&&C.alternate===null&&t(y,T),E=r(C,E,_),M===null?I=C:M.sibling=C,M=C,T=x}if(_===v.length)return n(y,T),It&&fu(y,_),I;if(T===null){for(;_<v.length;_++)T=d(y,v[_],w),T!==null&&(E=r(T,E,_),M===null?I=T:M.sibling=T,M=T);return It&&fu(y,_),I}for(T=i(T);_<v.length;_++)x=h(T,y,_,v[_],w),x!==null&&(e&&x.alternate!==null&&T.delete(x.key===null?_:x.key),E=r(x,E,_),M===null?I=x:M.sibling=x,M=x);return e&&T.forEach(function(R){return t(y,R)}),It&&fu(y,_),I}function p(y,E,v,w){if(v==null)throw Error(te(151));for(var I=null,M=null,T=E,_=E=0,x=null,C=v.next();T!==null&&!C.done;_++,C=v.next()){T.index>_?(x=T,T=null):x=T.sibling;var R=f(y,T,C.value,w);if(R===null){T===null&&(T=x);break}e&&T&&R.alternate===null&&t(y,T),E=r(R,E,_),M===null?I=R:M.sibling=R,M=R,T=x}if(C.done)return n(y,T),It&&fu(y,_),I;if(T===null){for(;!C.done;_++,C=v.next())C=d(y,C.value,w),C!==null&&(E=r(C,E,_),M===null?I=C:M.sibling=C,M=C);return It&&fu(y,_),I}for(T=i(T);!C.done;_++,C=v.next())C=h(T,y,_,C.value,w),C!==null&&(e&&C.alternate!==null&&T.delete(C.key===null?_:C.key),E=r(C,E,_),M===null?I=C:M.sibling=C,M=C);return e&&T.forEach(function(N){return t(y,N)}),It&&fu(y,_),I}function U(y,E,v,w){if(typeof v=="object"&&v!==null&&v.type===_f&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Bp:e:{for(var I=v.key;E!==null;){if(E.key===I){if(I=v.type,I===_f){if(E.tag===7){n(y,E.sibling),w=s(E,v.props.children),w.return=y,y=w;break e}}else if(E.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Nl&&_I(I)===E.type){n(y,E.sibling),w=s(E,v.props),Vg(w,v),w.return=y,y=w;break e}n(y,E);break}else t(y,E);E=E.sibling}v.type===_f?(w=zu(v.props.children,y.mode,w,v.key),w.return=y,y=w):(w=ZU(v.type,v.key,v.props,null,y.mode,w),Vg(w,v),w.return=y,y=w)}return o(y);case g1:e:{for(I=v.key;E!==null;){if(E.key===I)if(E.tag===4&&E.stateNode.containerInfo===v.containerInfo&&E.stateNode.implementation===v.implementation){n(y,E.sibling),w=s(E,v.children||[]),w.return=y,y=w;break e}else{n(y,E);break}else t(y,E);E=E.sibling}w=E8(v,y.mode,w),w.return=y,y=w}return o(y);case Nl:return I=v._init,v=I(v._payload),U(y,E,v,w)}if(p1(v))return m(y,E,v,w);if(Fg(v)){if(I=Fg(v),typeof I!="function")throw Error(te(150));return v=I.call(v),p(y,E,v,w)}if(typeof v.then=="function")return U(y,E,Xp(v),w);if(v.$$typeof===ka)return U(y,E,Yp(y,v),w);jp(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,E!==null&&E.tag===6?(n(y,E.sibling),w=s(E,v),w.return=y,y=w):(n(y,E),w=y8(v,y.mode,w),w.return=y,y=w),o(y)):n(y,E)}return function(y,E,v,w){try{R0=0;var I=U(y,E,v,w);return Wf=null,I}catch(T){if(T===G1)throw T;var M=dr(29,T,null,y.mode);return M.lanes=w,M.return=y,M}finally{}}}var Qu=yN(!0),EN=yN(!1),ph=na(null),V2=na(0);function TI(e,t){e=qa,cn(V2,e),cn(ph,t),qa=e|t.baseLanes}function M7(){cn(V2,qa),cn(ph,ph.current)}function Hv(){qa=V2.current,gi(ph),gi(V2)}var Tr=na(null),zo=null;function Vl(e){var t=e.alternate;cn(Qn,Qn.current&1),cn(Tr,e),zo===null&&(t===null||ph.current!==null||t.memoizedState!==null)&&(zo=e)}function vN(e){if(e.tag===22){if(cn(Qn,Qn.current),cn(Tr,e),zo===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(zo=e)}}else $l()}function $l(){cn(Qn,Qn.current),cn(Tr,Tr.current)}function Na(e){gi(Tr),zo===e&&(zo=null),gi(Qn)}var Qn=na(0);function $2(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fq=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},hq=ii.unstable_scheduleCallback,gq=ii.unstable_NormalPriority,qn={$$typeof:ka,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vv(){return{controller:new fq,data:new Map,refCount:0}}function Bm(e){e.refCount--,e.refCount===0&&hq(gq,function(){e.controller.abort()})}var j1=null,R7=0,Uh=0,Kf=null;function mq(e,t){if(j1===null){var n=j1=[];R7=0,Uh=d9(),Kf={status:"pending",value:void 0,then:function(i){n.push(i)}}}return R7++,t.then(SI,SI),t}function SI(){if(--R7===0&&j1!==null){Kf!==null&&(Kf.status="fulfilled");var e=j1;j1=null,Uh=0,Kf=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function pq(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var s=0;s<n.length;s++)(0,n[s])(t)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var II=je.S;je.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&mq(e,t),II!==null&&II(e,t)};var Bu=na(null);function $v(){var e=Bu.current;return e!==null?e:Kt.pooledCache}function jU(e,t){t===null?cn(Bu,Bu.current):cn(Bu,t.pool)}function wN(){var e=$v();return e===null?null:{parent:qn._currentValue,pool:e}}var Tc=0,Ke=null,Ot=null,Nn=null,G2=!1,Zf=!1,Ju=!1,X2=0,k0=0,qf=null,Uq=0;function _n(){throw Error(te(321))}function Gv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xs(e[n],t[n]))return!1;return!0}function Xv(e,t,n,i,s,r){return Tc=r,Ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,je.H=e===null||e.memoizedState===null?Md:Wc,Ju=!1,r=n(i,s),Ju=!1,Zf&&(r=TN(t,n,i,s)),_N(e),r}function _N(e){je.H=$o;var t=Ot!==null&&Ot.next!==null;if(Tc=0,Nn=Ot=Ke=null,G2=!1,k0=0,qf=null,t)throw Error(te(300));e===null||fi||(e=e.dependencies,e!==null&&W2(e)&&(fi=!0))}function TN(e,t,n,i){Ke=e;var s=0;do{if(Zf&&(qf=null),k0=0,Zf=!1,25<=s)throw Error(te(301));if(s+=1,Nn=Ot=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}je.H=Rd,r=t(n,i)}while(Zf);return r}function bq(){var e=je.H,t=e.useState()[0];return t=typeof t.then=="function"?zm(t):t,e=e.useState()[0],(Ot!==null?Ot.memoizedState:null)!==e&&(Ke.flags|=1024),t}function jv(){var e=X2!==0;return X2=0,e}function Yv(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Wv(e){if(G2){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}G2=!1}Tc=0,Nn=Ot=Ke=null,Zf=!1,k0=X2=0,qf=null}function ds(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?Ke.memoizedState=Nn=e:Nn=Nn.next=e,Nn}function Hn(){if(Ot===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=Ot.next;var t=Nn===null?Ke.memoizedState:Nn.next;if(t!==null)Nn=t,Ot=e;else{if(e===null)throw Ke.alternate===null?Error(te(467)):Error(te(310));Ot=e,e={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Nn===null?Ke.memoizedState=Nn=e:Nn=Nn.next=e}return Nn}var W6;W6=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function zm(e){var t=k0;return k0+=1,qf===null&&(qf=[]),e=bN(qf,e,t),t=Ke,(Nn===null?t.memoizedState:Nn.next)===null&&(t=t.alternate,je.H=t===null||t.memoizedState===null?Md:Wc),e}function K6(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return zm(e);if(e.$$typeof===ka)return Hi(e)}throw Error(te(438,String(e)))}function Kv(e){var t=null,n=Ke.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=Ke.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=W6(),Ke.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=eZ;return t.index++,n}function Ka(e,t){return typeof t=="function"?t(e):t}function YU(e){var t=Hn();return Zv(t,Ot,e)}function Zv(e,t,n){var i=e.queue;if(i===null)throw Error(te(311));i.lastRenderedReducer=n;var s=e.baseQueue,r=i.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}t.baseQueue=s=r,i.pending=null}if(r=e.baseState,s===null)e.memoizedState=r;else{t=s.next;var a=o=null,l=null,c=t,u=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(ht&d)===d:(Tc&d)===d){var f=c.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===Uh&&(u=!0);else if((Tc&f)===f){c=c.next,f===Uh&&(u=!0);continue}else d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=d,o=r):l=l.next=d,Ke.lanes|=f,Ic|=f;d=c.action,Ju&&n(r,d),r=c.hasEagerState?c.eagerState:n(r,d)}else f={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=f,o=r):l=l.next=f,Ke.lanes|=d,Ic|=d;c=c.next}while(c!==null&&c!==t);if(l===null?o=r:l.next=a,!Xs(r,e.memoizedState)&&(fi=!0,u&&(n=Kf,n!==null)))throw n;e.memoizedState=r,e.baseState=o,e.baseQueue=l,i.lastRenderedState=r}return s===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function l8(e){var t=Hn(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,r=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do r=e(r,o.action),o=o.next;while(o!==s);Xs(r,t.memoizedState)||(fi=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function SN(e,t,n){var i=Ke,s=Hn(),r=It;if(r){if(n===void 0)throw Error(te(407));n=n()}else n=t();var o=!Xs((Ot||s).memoizedState,n);if(o&&(s.memoizedState=n,fi=!0),s=s.queue,qv(CN.bind(null,i,s,e),[e]),s.getSnapshot!==t||o||Nn!==null&&Nn.memoizedState.tag&1){if(i.flags|=2048,bh(9,xN.bind(null,i,s,n,t),{destroy:void 0},null),Kt===null)throw Error(te(349));r||Tc&60||IN(i,t,n)}return n}function IN(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ke.updateQueue,t===null?(t=W6(),Ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function xN(e,t,n,i){t.value=n,t.getSnapshot=i,AN(t)&&MN(e)}function CN(e,t,n){return n(function(){AN(t)&&MN(e)})}function AN(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xs(e,n)}catch{return!0}}function MN(e){var t=_c(e,2);t!==null&&ts(t,e,2)}function k7(e){var t=ds();if(typeof e=="function"){var n=e;if(e=n(),Ju){Kl(!0);try{n()}finally{Kl(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:e},t}function RN(e,t,n,i){return e.baseState=n,Zv(e,Ot,typeof i=="function"?i:Ka)}function yq(e,t,n,i,s){if(q6(e))throw Error(te(485));if(e=t.action,e!==null){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){r.listeners.push(o)}};je.T!==null?n(!0):r.isTransition=!1,i(r),n=t.pending,n===null?(r.next=t.pending=r,kN(t,r)):(r.next=n.next,t.pending=n.next=r)}}function kN(e,t){var n=t.action,i=t.payload,s=e.state;if(t.isTransition){var r=je.T,o={};je.T=o;try{var a=n(s,i),l=je.S;l!==null&&l(o,a),xI(e,t,a)}catch(c){D7(e,t,c)}finally{je.T=r}}else try{r=n(s,i),xI(e,t,r)}catch(c){D7(e,t,c)}}function xI(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){CI(e,t,i)},function(i){return D7(e,t,i)}):CI(e,t,n)}function CI(e,t,n){t.status="fulfilled",t.value=n,DN(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,kN(e,n)))}function D7(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,DN(t),t=t.next;while(t!==i)}e.action=null}function DN(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function LN(e,t){return t}function NN(e,t){if(It){var n=Kt.formState;if(n!==null){e:{var i=Ke;if(It){if(_i){t:{for(var s=_i,r=Ao;s.nodeType!==8;){if(!r){s=null;break t}if(s=Qr(s.nextSibling),s===null){s=null;break t}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){_i=Qr(s.nextSibling),i=s.data==="F!";break e}}qu(i)}i=!1}i&&(t=n[0])}}return n=ds(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:LN,lastRenderedState:t},n.queue=i,n=QN.bind(null,Ke,i),i.dispatch=n,i=k7(!1),r=t9.bind(null,Ke,!1,i.queue),i=ds(),s={state:t,dispatch:null,action:e,pending:null},i.queue=s,n=yq.bind(null,Ke,s,r,n),s.dispatch=n,i.memoizedState=e,[t,n,!1]}function ON(e){var t=Hn();return PN(t,Ot,e)}function PN(e,t,n){t=Zv(e,t,LN)[0],e=YU(Ka)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?zm(t):t;var i=Hn(),s=i.queue,r=s.dispatch;return n!==i.memoizedState&&(Ke.flags|=2048,bh(9,Eq.bind(null,s,n),{destroy:void 0},null)),[t,r,e]}function Eq(e,t){e.action=t}function FN(e){var t=Hn(),n=Ot;if(n!==null)return PN(t,n,e);Hn(),t=t.memoizedState,n=Hn();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function bh(e,t,n,i){return e={tag:e,create:t,inst:n,deps:i,next:null},t=Ke.updateQueue,t===null&&(t=W6(),Ke.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function BN(){return Hn().memoizedState}function WU(e,t,n,i){var s=ds();Ke.flags|=e,s.memoizedState=bh(1|t,n,{destroy:void 0},i===void 0?null:i)}function Z6(e,t,n,i){var s=Hn();i=i===void 0?null:i;var r=s.memoizedState.inst;Ot!==null&&i!==null&&Gv(i,Ot.memoizedState.deps)?s.memoizedState=bh(t,n,r,i):(Ke.flags|=e,s.memoizedState=bh(1|t,n,r,i))}function AI(e,t){WU(8390656,8,e,t)}function qv(e,t){Z6(2048,8,e,t)}function zN(e,t){return Z6(4,2,e,t)}function HN(e,t){return Z6(4,4,e,t)}function VN(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $N(e,t,n){n=n!=null?n.concat([e]):null,Z6(4,4,VN.bind(null,t,e),n)}function Qv(){}function GN(e,t){var n=Hn();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Gv(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function XN(e,t){var n=Hn();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Gv(t,i[1]))return i[0];if(i=e(),Ju){Kl(!0);try{e()}finally{Kl(!1)}}return n.memoizedState=[i,t],i}function Jv(e,t,n){return n===void 0||Tc&1073741824?e.memoizedState=t:(e.memoizedState=n,e=DO(),Ke.lanes|=e,Ic|=e,n)}function jN(e,t,n,i){return Xs(n,t)?n:ph.current!==null?(e=Jv(e,n,i),Xs(e,t)||(fi=!0),e):Tc&42?(e=DO(),Ke.lanes|=e,Ic|=e,t):(fi=!0,e.memoizedState=n)}function YN(e,t,n,i,s){var r=tn.p;tn.p=r!==0&&8>r?r:8;var o=je.T,a={};je.T=a,t9(e,!1,t,n);try{var l=s(),c=je.S;if(c!==null&&c(a,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=pq(l,i);Y1(e,t,u,Vs(e))}else Y1(e,t,i,Vs(e))}catch(d){Y1(e,t,{then:function(){},status:"rejected",reason:d},Vs())}finally{tn.p=r,je.T=o}}function vq(){}function L7(e,t,n,i){if(e.tag!==5)throw Error(te(476));var s=WN(e).queue;YN(e,s,t,Pu,n===null?vq:function(){return KN(e),n(i)})}function WN(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Pu,baseState:Pu,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:Pu},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function KN(e){var t=WN(e).next.queue;Y1(e,t,{},Vs())}function e9(){return Hi(O0)}function ZN(){return Hn().memoizedState}function qN(){return Hn().memoizedState}function wq(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Vs();e=rc(n);var i=oc(t,e,n);i!==null&&(ts(i,t,n),K1(i,t,n)),t={cache:Vv()},e.payload=t;return}t=t.return}}function _q(e,t,n){var i=Vs();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},q6(e)?JN(t,n):(n=Fv(e,t,n,i),n!==null&&(ts(n,e,i),eO(n,t,i)))}function QN(e,t,n){var i=Vs();Y1(e,t,n,i)}function Y1(e,t,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(q6(e))JN(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,Xs(a,o))return Y6(e,t,s,0),Kt===null&&j6(),!1}catch{}finally{}if(n=Fv(e,t,s,i),n!==null)return ts(n,e,i),eO(n,t,i),!0}return!1}function t9(e,t,n,i){if(i={lane:2,revertLane:d9(),action:i,hasEagerState:!1,eagerState:null,next:null},q6(e)){if(t)throw Error(te(479))}else t=Fv(e,n,i,2),t!==null&&ts(t,e,2)}function q6(e){var t=e.alternate;return e===Ke||t!==null&&t===Ke}function JN(e,t){Zf=G2=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eO(e,t,n){if(n&4194176){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,VL(e,n)}}var $o={readContext:Hi,use:K6,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n};$o.useCacheRefresh=_n;$o.useMemoCache=_n;$o.useHostTransitionStatus=_n;$o.useFormState=_n;$o.useActionState=_n;$o.useOptimistic=_n;var Md={readContext:Hi,use:K6,useCallback:function(e,t){return ds().memoizedState=[e,t===void 0?null:t],e},useContext:Hi,useEffect:AI,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,WU(4194308,4,VN.bind(null,t,e),n)},useLayoutEffect:function(e,t){return WU(4194308,4,e,t)},useInsertionEffect:function(e,t){WU(4,2,e,t)},useMemo:function(e,t){var n=ds();t=t===void 0?null:t;var i=e();if(Ju){Kl(!0);try{e()}finally{Kl(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=ds();if(n!==void 0){var s=n(t);if(Ju){Kl(!0);try{n(t)}finally{Kl(!1)}}}else s=t;return i.memoizedState=i.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},i.queue=e,e=e.dispatch=_q.bind(null,Ke,e),[i.memoizedState,e]},useRef:function(e){var t=ds();return e={current:e},t.memoizedState=e},useState:function(e){e=k7(e);var t=e.queue,n=QN.bind(null,Ke,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Qv,useDeferredValue:function(e,t){var n=ds();return Jv(n,e,t)},useTransition:function(){var e=k7(!1);return e=YN.bind(null,Ke,e.queue,!0,!1),ds().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Ke,s=ds();if(It){if(n===void 0)throw Error(te(407));n=n()}else{if(n=t(),Kt===null)throw Error(te(349));ht&60||IN(i,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,AI(CN.bind(null,i,r,e),[e]),i.flags|=2048,bh(9,xN.bind(null,i,r,n,t),{destroy:void 0},null),n},useId:function(){var e=ds(),t=Kt.identifierPrefix;if(It){var n=La,i=Da;n=(i&~(1<<32-Hs(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=X2++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Uq++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return ds().memoizedState=wq.bind(null,Ke)}};Md.useMemoCache=Kv;Md.useHostTransitionStatus=e9;Md.useFormState=NN;Md.useActionState=NN;Md.useOptimistic=function(e){var t=ds();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=t9.bind(null,Ke,!0,n),n.dispatch=t,[e,t]};var Wc={readContext:Hi,use:K6,useCallback:GN,useContext:Hi,useEffect:qv,useImperativeHandle:$N,useInsertionEffect:zN,useLayoutEffect:HN,useMemo:XN,useReducer:YU,useRef:BN,useState:function(){return YU(Ka)},useDebugValue:Qv,useDeferredValue:function(e,t){var n=Hn();return jN(n,Ot.memoizedState,e,t)},useTransition:function(){var e=YU(Ka)[0],t=Hn().memoizedState;return[typeof e=="boolean"?e:zm(e),t]},useSyncExternalStore:SN,useId:ZN};Wc.useCacheRefresh=qN;Wc.useMemoCache=Kv;Wc.useHostTransitionStatus=e9;Wc.useFormState=ON;Wc.useActionState=ON;Wc.useOptimistic=function(e,t){var n=Hn();return RN(n,Ot,e,t)};var Rd={readContext:Hi,use:K6,useCallback:GN,useContext:Hi,useEffect:qv,useImperativeHandle:$N,useInsertionEffect:zN,useLayoutEffect:HN,useMemo:XN,useReducer:l8,useRef:BN,useState:function(){return l8(Ka)},useDebugValue:Qv,useDeferredValue:function(e,t){var n=Hn();return Ot===null?Jv(n,e,t):jN(n,Ot.memoizedState,e,t)},useTransition:function(){var e=l8(Ka)[0],t=Hn().memoizedState;return[typeof e=="boolean"?e:zm(e),t]},useSyncExternalStore:SN,useId:ZN};Rd.useCacheRefresh=qN;Rd.useMemoCache=Kv;Rd.useHostTransitionStatus=e9;Rd.useFormState=FN;Rd.useActionState=FN;Rd.useOptimistic=function(e,t){var n=Hn();return Ot!==null?RN(n,Ot,e,t):(n.baseState=e,[e,n.queue.dispatch])};function c8(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:nn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var N7={isMounted:function(e){return(e=e._reactInternals)?ng(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Vs(),s=rc(i);s.payload=t,n!=null&&(s.callback=n),t=oc(e,s,i),t!==null&&(ts(t,e,i),K1(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Vs(),s=rc(i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=oc(e,s,i),t!==null&&(ts(t,e,i),K1(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Vs(),i=rc(n);i.tag=2,t!=null&&(i.callback=t),t=oc(e,i,n),t!==null&&(ts(t,e,n),K1(t,e,n))}};function MI(e,t,n,i,s,r,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,o):t.prototype&&t.prototype.isPureReactComponent?!A0(n,i)||!A0(s,r):!0}function RI(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&N7.enqueueReplaceState(t,t.state,null)}function ed(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=nn({},n));for(var s in e)n[s]===void 0&&(n[s]=e[s])}return n}var j2=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function tO(e){j2(e)}function nO(e){console.error(e)}function iO(e){j2(e)}function Y2(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function kI(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function O7(e,t,n){return n=rc(n),n.tag=3,n.payload={element:null},n.callback=function(){Y2(e,t)},n}function sO(e){return e=rc(e),e.tag=3,e}function rO(e,t,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;e.payload=function(){return s(r)},e.callback=function(){kI(t,n,i)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){kI(t,n,i),typeof s!="function"&&(lc===null?lc=new Set([this]):lc.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function Tq(e,t,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Hm(t,n,s,!0),n=Tr.current,n!==null){switch(n.tag){case 13:return zo===null?q7():n.alternate===null&&wn===0&&(wn=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===A7?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),w8(e,i,s)),!1;case 22:return n.flags|=65536,i===A7?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),w8(e,i,s)),!1}throw Error(te(435,n.tag))}return w8(e,i,s),q7(),!1}if(It)return t=Tr.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,i!==C7&&(e=Error(te(422),{cause:i}),M0(ar(e,n)))):(i!==C7&&(t=Error(te(423),{cause:i}),M0(ar(t,n))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,i=ar(i,n),s=O7(e.stateNode,i,s),m8(e,s),wn!==4&&(wn=2)),!1;var r=Error(te(520),{cause:i});if(r=ar(r,n),J1===null?J1=[r]:J1.push(r),wn!==4&&(wn=2),t===null)return!0;i=ar(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,e=O7(n.stateNode,i,e),m8(n,e),!1;case 1:if(t=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(lc===null||!lc.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=sO(s),rO(s,e,n,i),m8(n,s),!1}n=n.return}while(n!==null);return!1}var oO=Error(te(461)),fi=!1;function Ei(e,t,n,i){t.child=e===null?EN(t,null,n,i):Qu(t,e.child,n,i)}function DI(e,t,n,i,s){n=n.render;var r=t.ref;if("ref"in i){var o={};for(var a in i)a!=="ref"&&(o[a]=i[a])}else o=i;return td(t),i=Xv(e,t,n,o,r,s),a=jv(),e!==null&&!fi?(Yv(e,t,s),Za(e,t,s)):(It&&a&&Bv(t),t.flags|=1,Ei(e,t,i,s),t.child)}function LI(e,t,n,i,s){if(e===null){var r=n.type;return typeof r=="function"&&!o9(r)&&r.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=r,aO(e,t,r,i,s)):(e=ZU(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!n9(e,s)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:A0,n(o,i)&&e.ref===t.ref)return Za(e,t,s)}return t.flags|=1,e=ac(r,i),e.ref=t.ref,e.return=t,t.child=e}function aO(e,t,n,i,s){if(e!==null){var r=e.memoizedProps;if(A0(r,i)&&e.ref===t.ref)if(fi=!1,t.pendingProps=i=r,n9(e,s))e.flags&131072&&(fi=!0);else return t.lanes=e.lanes,Za(e,t,s)}return P7(e,t,n,i,s)}function lO(e,t,n){var i=t.pendingProps,s=i.children,r=(t.stateNode._pendingVisibility&2)!==0,o=e!==null?e.memoizedState:null;if(W1(e,t),i.mode==="hidden"||r){if(t.flags&128){if(i=o!==null?o.baseLanes|n:n,e!==null){for(s=t.child=e.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;t.childLanes=r&~i}else t.childLanes=0,t.child=null;return NI(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&jU(t,o!==null?o.cachePool:null),o!==null?TI(t,o):M7(),vN(t);else return t.lanes=t.childLanes=536870912,NI(e,t,o!==null?o.baseLanes|n:n,n)}else o!==null?(jU(t,o.cachePool),TI(t,o),$l(),t.memoizedState=null):(e!==null&&jU(t,null),M7(),$l());return Ei(e,t,s,n),t.child}function NI(e,t,n,i){var s=$v();return s=s===null?null:{parent:qn._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&jU(t,null),M7(),vN(t),e!==null&&Hm(e,t,i,!0),null}function W1(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof n!="function"&&typeof n!="object")throw Error(te(284));(e===null||e.ref!==n)&&(t.flags|=2097664)}}function P7(e,t,n,i,s){return td(t),n=Xv(e,t,n,i,void 0,s),i=jv(),e!==null&&!fi?(Yv(e,t,s),Za(e,t,s)):(It&&i&&Bv(t),t.flags|=1,Ei(e,t,n,s),t.child)}function OI(e,t,n,i,s,r){return td(t),t.updateQueue=null,n=TN(t,i,n,s),_N(e),i=jv(),e!==null&&!fi?(Yv(e,t,r),Za(e,t,r)):(It&&i&&Bv(t),t.flags|=1,Ei(e,t,n,r),t.child)}function PI(e,t,n,i,s){if(td(t),t.stateNode===null){var r=Mf,o=n.contextType;typeof o=="object"&&o!==null&&(r=Hi(o)),r=new n(i,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=N7,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=i,r.state=t.memoizedState,r.refs={},i9(t),o=n.contextType,r.context=typeof o=="object"&&o!==null?Hi(o):Mf,r.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(c8(t,n,o,i),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(o=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),o!==r.state&&N7.enqueueReplaceState(r,r.state,null),q1(t,i,r,s),Z1(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){r=t.stateNode;var a=t.memoizedProps,l=ed(n,a);r.props=l;var c=r.context,u=n.contextType;o=Mf,typeof u=="object"&&u!==null&&(o=Hi(u));var d=n.getDerivedStateFromProps;u=typeof d=="function"||typeof r.getSnapshotBeforeUpdate=="function",a=t.pendingProps!==a,u||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a||c!==o)&&RI(t,r,i,o),Ol=!1;var f=t.memoizedState;r.state=f,q1(t,i,r,s),Z1(),c=t.memoizedState,a||f!==c||Ol?(typeof d=="function"&&(c8(t,n,d,i),c=t.memoizedState),(l=Ol||MI(t,n,l,i,f,c,o))?(u||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),r.props=i,r.state=c,r.context=o,i=l):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,$7(e,t),o=t.memoizedProps,u=ed(n,o),r.props=u,d=t.pendingProps,f=r.context,c=n.contextType,l=Mf,typeof c=="object"&&c!==null&&(l=Hi(c)),a=n.getDerivedStateFromProps,(c=typeof a=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o!==d||f!==l)&&RI(t,r,i,l),Ol=!1,f=t.memoizedState,r.state=f,q1(t,i,r,s),Z1();var h=t.memoizedState;o!==d||f!==h||Ol||e!==null&&e.dependencies!==null&&W2(e.dependencies)?(typeof a=="function"&&(c8(t,n,a,i),h=t.memoizedState),(u=Ol||MI(t,n,u,i,f,h,l)||e!==null&&e.dependencies!==null&&W2(e.dependencies))?(c||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,h,l),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,h,l)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=h),r.props=i,r.state=h,r.context=l,i=u):(typeof r.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,W1(e,t),i=(t.flags&128)!==0,r||i?(r=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&i?(t.child=Qu(t,e.child,null,s),t.child=Qu(t,null,n,s)):Ei(e,t,n,s),t.memoizedState=r.state,e=t.child):e=Za(e,t,s),e}function FI(e,t,n,i){return Fm(),t.flags|=256,Ei(e,t,n,i),t.child}var u8={dehydrated:null,treeContext:null,retryLane:0};function d8(e){return{baseLanes:e,cachePool:wN()}}function f8(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=fr),e}function cO(e,t,n){var i=t.pendingProps,s=!1,r=(t.flags&128)!==0,o;if((o=r)||(o=e!==null&&e.memoizedState===null?!1:(Qn.current&2)!==0),o&&(s=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(It){if(s?Vl(t):$l(),It){var a=_i,l;if(l=a){e:{for(l=a,a=Ao;l.nodeType!==8;){if(!a){a=null;break e}if(l=Qr(l.nextSibling),l===null){a=null;break e}}a=l}a!==null?(t.memoizedState={dehydrated:a,treeContext:Fu!==null?{id:Da,overflow:La}:null,retryLane:536870912},l=dr(18,null,null,0),l.stateNode=a,l.return=t,t.child=l,Zi=t,_i=null,l=!0):l=!1}l||qu(t)}if(a=t.memoizedState,a!==null&&(a=a.dehydrated,a!==null))return a.data==="$!"?t.lanes=16:t.lanes=536870912,null;Na(t)}return a=i.children,i=i.fallback,s?($l(),s=t.mode,a=B7({mode:"hidden",children:a},s),i=zu(i,s,n,null),a.return=t,i.return=t,a.sibling=i,t.child=a,s=t.child,s.memoizedState=d8(n),s.childLanes=f8(e,o,n),t.memoizedState=u8,i):(Vl(t),F7(t,a))}if(l=e.memoizedState,l!==null&&(a=l.dehydrated,a!==null)){if(r)t.flags&256?(Vl(t),t.flags&=-257,t=h8(e,t,n)):t.memoizedState!==null?($l(),t.child=e.child,t.flags|=128,t=null):($l(),s=i.fallback,a=t.mode,i=B7({mode:"visible",children:i.children},a),s=zu(s,a,n,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,Qu(t,e.child,null,n),i=t.child,i.memoizedState=d8(n),i.childLanes=f8(e,o,n),t.memoizedState=u8,t=s);else if(Vl(t),a.data==="$!"){if(o=a.nextSibling&&a.nextSibling.dataset,o)var c=o.dgst;o=c,i=Error(te(419)),i.stack="",i.digest=o,M0({value:i,source:null,stack:null}),t=h8(e,t,n)}else if(fi||Hm(e,t,n,!1),o=(n&e.childLanes)!==0,fi||o){if(o=Kt,o!==null){if(i=n&-n,i&42)i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(i=i&(o.suspendedLanes|n)?0:i,i!==0&&i!==l.retryLane)throw l.retryLane=i,_c(e,i),ts(o,e,i),oO}a.data==="$?"||q7(),t=h8(e,t,n)}else a.data==="$?"?(t.flags|=128,t.child=e.child,t=Bq.bind(null,e),a._reactRetry=t,t=null):(e=l.treeContext,_i=Qr(a.nextSibling),Zi=t,It=!0,Vr=null,Ao=!1,e!==null&&(sr[rr++]=Da,sr[rr++]=La,sr[rr++]=Fu,Da=e.id,La=e.overflow,Fu=t),t=F7(t,i.children),t.flags|=4096);return t}return s?($l(),s=i.fallback,a=t.mode,l=e.child,c=l.sibling,i=ac(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&31457280,c!==null?s=ac(c,s):(s=zu(s,a,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,a=e.child.memoizedState,a===null?a=d8(n):(l=a.cachePool,l!==null?(c=qn._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=wN(),a={baseLanes:a.baseLanes|n,cachePool:l}),s.memoizedState=a,s.childLanes=f8(e,o,n),t.memoizedState=u8,i):(Vl(t),n=e.child,e=n.sibling,n=ac(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function F7(e,t){return t=B7({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function B7(e,t){return RO(e,t,0,null)}function h8(e,t,n){return Qu(t,e.child,null,n),e=F7(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function BI(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),H7(e.return,t,n)}function g8(e,t,n,i,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function uO(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(Ei(e,t,i.children,n),i=Qn.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&BI(e,n,t);else if(e.tag===19)BI(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(cn(Qn,i),s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&$2(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),g8(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&$2(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}g8(t,!0,n,null,r);break;case"together":g8(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Za(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ic|=t.lanes,!(n&t.childLanes))if(e!==null){if(Hm(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,n=ac(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ac(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function n9(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&W2(e)))}function Sq(e,t,n){switch(t.tag){case 3:L2(t,t.stateNode.containerInfo),Gl(t,qn,e.memoizedState.cache),Fm();break;case 27:case 5:y7(t);break;case 4:L2(t,t.stateNode.containerInfo);break;case 10:Gl(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Vl(t),t.flags|=128,null):n&t.child.childLanes?cO(e,t,n):(Vl(t),e=Za(e,t,n),e!==null?e.sibling:null);Vl(t);break;case 19:var s=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Hm(e,t,n,!1),i=(n&t.childLanes)!==0),s){if(i)return uO(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),cn(Qn,Qn.current),i)break;return null;case 22:case 23:return t.lanes=0,lO(e,t,n);case 24:Gl(t,qn,e.memoizedState.cache)}return Za(e,t,n)}function dO(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)fi=!0;else{if(!n9(e,n)&&!(t.flags&128))return fi=!1,Sq(e,t,n);fi=!!(e.flags&131072)}else fi=!1,It&&t.flags&1048576&&pN(t,H2,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,s=i._init;if(i=s(i._payload),t.type=i,typeof i=="function")o9(i)?(e=ed(i,e),t.tag=1,t=PI(null,t,i,e,n)):(t.tag=0,t=P7(null,t,i,e,n));else{if(i!=null){if(s=i.$$typeof,s===xv){t.tag=11,t=DI(null,t,i,e,n);break e}else if(s===Cv){t.tag=14,t=LI(null,t,i,e,n);break e}}throw t=U7(i)||i,Error(te(306,t,""))}}return t;case 0:return P7(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,s=ed(i,t.pendingProps),PI(e,t,i,s,n);case 3:e:{if(L2(t,t.stateNode.containerInfo),e===null)throw Error(te(387));var r=t.pendingProps;s=t.memoizedState,i=s.element,$7(e,t),q1(t,r,null,n);var o=t.memoizedState;if(r=o.cache,Gl(t,qn,r),r!==s.cache&&V7(t,[qn],n,!0),Z1(),r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=FI(e,t,r,n);break e}else if(r!==i){i=ar(Error(te(424)),t),M0(i),t=FI(e,t,r,n);break e}else for(_i=Qr(t.stateNode.containerInfo.firstChild),Zi=t,It=!0,Vr=null,Ao=!0,n=EN(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fm(),r===i){t=Za(e,t,n);break e}Ei(e,t,r,n)}t=t.child}return t;case 26:return W1(e,t),e===null?(n=ix(t.type,null,t.pendingProps,null))?t.memoizedState=n:It||(n=t.type,e=t.pendingProps,i=tb(sc.current).createElement(n),i[zi]=t,i[Es]=e,Ti(i,n,e),ui(i),t.stateNode=i):t.memoizedState=ix(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return y7(t),e===null&&It&&(i=t.stateNode=KO(t.type,t.pendingProps,sc.current),Zi=t,Ao=!0,_i=Qr(i.firstChild)),i=t.pendingProps.children,e!==null||It?Ei(e,t,i,n):t.child=Qu(t,null,i,n),W1(e,t),t.child;case 5:return e===null&&It&&((s=i=_i)&&(i=tQ(i,t.type,t.pendingProps,Ao),i!==null?(t.stateNode=i,Zi=t,_i=Qr(i.firstChild),Ao=!1,s=!0):s=!1),s||qu(t)),y7(t),s=t.type,r=t.pendingProps,o=e!==null?e.memoizedProps:null,i=r.children,n3(s,r)?i=null:o!==null&&n3(s,o)&&(t.flags|=32),t.memoizedState!==null&&(s=Xv(e,t,bq,null,null,n),O0._currentValue=s),W1(e,t),Ei(e,t,i,n),t.child;case 6:return e===null&&It&&((e=n=_i)&&(n=nQ(n,t.pendingProps,Ao),n!==null?(t.stateNode=n,Zi=t,_i=null,e=!0):e=!1),e||qu(t)),null;case 13:return cO(e,t,n);case 4:return L2(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Qu(t,null,i,n):Ei(e,t,i,n),t.child;case 11:return DI(e,t,t.type,t.pendingProps,n);case 7:return Ei(e,t,t.pendingProps,n),t.child;case 8:return Ei(e,t,t.pendingProps.children,n),t.child;case 12:return Ei(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Gl(t,t.type,i.value),Ei(e,t,i.children,n),t.child;case 9:return s=t.type._context,i=t.pendingProps.children,td(t),s=Hi(s),i=i(s),t.flags|=1,Ei(e,t,i,n),t.child;case 14:return LI(e,t,t.type,t.pendingProps,n);case 15:return aO(e,t,t.type,t.pendingProps,n);case 19:return uO(e,t,n);case 22:return lO(e,t,n);case 24:return td(t),i=Hi(qn),e===null?(s=$v(),s===null&&(s=Kt,r=Vv(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),t.memoizedState={parent:i,cache:s},i9(t),Gl(t,qn,s)):(e.lanes&n&&($7(e,t),q1(t,null,null,n),Z1()),s=e.memoizedState,r=t.memoizedState,s.parent!==i?(s={parent:i,cache:i},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Gl(t,qn,i)):(i=r.cache,Gl(t,qn,i),i!==s.cache&&V7(t,[qn],n,!0))),Ei(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(te(156,t.tag))}var z7=na(null),kd=null,Oa=null;function Gl(e,t,n){cn(z7,t._currentValue),t._currentValue=n}function Ba(e){e._currentValue=z7.current,gi(z7)}function H7(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function V7(e,t,n,i){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var r=s.dependencies;if(r!==null){var o=s.child;r=r.firstContext;e:for(;r!==null;){var a=r;r=s;for(var l=0;l<t.length;l++)if(a.context===t[l]){r.lanes|=n,a=r.alternate,a!==null&&(a.lanes|=n),H7(r.return,n,e),i||(o=null);break e}r=a.next}}else if(s.tag===18){if(o=s.return,o===null)throw Error(te(341));o.lanes|=n,r=o.alternate,r!==null&&(r.lanes|=n),H7(o,n,e),o=null}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}}function Hm(e,t,n,i){e=null;for(var s=t,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var o=s.alternate;if(o===null)throw Error(te(387));if(o=o.memoizedProps,o!==null){var a=s.type;Xs(s.pendingProps.value,o.value)||(e!==null?e.push(a):e=[a])}}else if(s===D2.current){if(o=s.alternate,o===null)throw Error(te(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(O0):e=[O0])}s=s.return}e!==null&&V7(t,e,n,i),t.flags|=262144}function W2(e){for(e=e.firstContext;e!==null;){if(!Xs(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function td(e){kd=e,Oa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Hi(e){return fO(kd,e)}function Yp(e,t){return kd===null&&td(e),fO(e,t)}function fO(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Oa===null){if(e===null)throw Error(te(308));Oa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Oa=Oa.next=t;return n}var Ol=!1;function i9(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $7(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function rc(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oc(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,gn&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,t=B2(e),mN(e,null,n),t}return Y6(e,i,t,n),B2(e)}function K1(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194176)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,VL(e,n)}}function m8(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?s=r=t:r=r.next=t}else s=r=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var G7=!1;function Z1(){if(G7){var e=Kf;if(e!==null)throw e}}function q1(e,t,n,i){G7=!1;var s=e.updateQueue;Ol=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(r!==null){var d=s.baseState;o=0,u=c=l=null,a=r;do{var f=a.lane&-536870913,h=f!==a.lane;if(h?(ht&f)===f:(i&f)===f){f!==0&&f===Uh&&(G7=!0),u!==null&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,p=a;f=t;var U=n;switch(p.tag){case 1:if(m=p.payload,typeof m=="function"){d=m.call(U,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,f=typeof m=="function"?m.call(U,d,f):m,f==null)break e;d=nn({},d,f);break e;case 2:Ol=!0}}f=a.callback,f!==null&&(e.flags|=64,h&&(e.flags|=8192),h=s.callbacks,h===null?s.callbacks=[f]:h.push(f))}else h={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,r===null&&(s.shared.lanes=0),Ic|=o,e.lanes=o,e.memoizedState=d}}function hO(e,t){if(typeof e!="function")throw Error(te(191,e));e.call(t)}function gO(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)hO(n[e],t)}function Vm(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&e)===e){i=void 0;var r=n.create,o=n.inst;i=r(),o.destroy=i}n=n.next}while(n!==s)}}catch(a){Vt(t,t.return,a)}}function Sc(e,t,n){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&e)===e){var o=i.inst,a=o.destroy;if(a!==void 0){o.destroy=void 0,s=t;var l=n;try{a()}catch(c){Vt(s,l,c)}}}i=i.next}while(i!==r)}}catch(c){Vt(t,t.return,c)}}function mO(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{gO(t,n)}catch(i){Vt(e,e.return,i)}}}function pO(e,t,n){n.props=ed(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Vt(e,t,i)}}function Su(e,t){try{var n=e.ref;if(n!==null){var i=e.stateNode;switch(e.tag){case 26:case 27:case 5:var s=i;break;default:s=i}typeof n=="function"?e.refCleanup=n(s):n.current=s}}catch(r){Vt(e,t,r)}}function Ls(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){Vt(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){Vt(e,t,s)}else n.current=null}function UO(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){Vt(e,e.return,s)}}function zI(e,t,n){try{var i=e.stateNode;Zq(i,e.type,n,t),i[Es]=t}catch(s){Vt(e,e.return,s)}}function bO(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function p8(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bO(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function X7(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=e5));else if(i!==4&&i!==27&&(e=e.child,e!==null))for(X7(e,t,n),e=e.sibling;e!==null;)X7(e,t,n),e=e.sibling}function K2(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&i!==27&&(e=e.child,e!==null))for(K2(e,t,n),e=e.sibling;e!==null;)K2(e,t,n),e=e.sibling}var Ta=!1,vn=!1,U8=!1,HI=typeof WeakSet=="function"?WeakSet:Set,ci=null,VI=!1;function Iq(e,t){if(e=e.containerInfo,e3=rb,e=lN(e),Ov(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var h;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==r||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++c===s&&(a=o),f===r&&++u===i&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(t3={focusedElem:e,selectionRange:n},rb=!1,ci=t;ci!==null;)if(t=ci,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ci=e;else for(;ci!==null;){switch(t=ci,r=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&r!==null){e=void 0,n=t,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var m=ed(n.type,s,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(m,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(p){Vt(n,n.return,p)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)i3(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":i3(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(te(163))}if(e=t.sibling,e!==null){e.return=t.return,ci=e;break}ci=t.return}return m=VI,VI=!1,m}function yO(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:da(e,n),i&4&&Vm(5,n);break;case 1:if(da(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Vt(n,n.return,a)}else{var s=ed(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Vt(n,n.return,a)}}i&64&&mO(n),i&512&&Su(n,n.return);break;case 3:if(da(e,n),i&64&&(i=n.updateQueue,i!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{gO(i,e)}catch(a){Vt(n,n.return,a)}}break;case 26:da(e,n),i&512&&Su(n,n.return);break;case 27:case 5:da(e,n),t===null&&i&4&&UO(n),i&512&&Su(n,n.return);break;case 12:da(e,n);break;case 13:da(e,n),i&4&&wO(e,n);break;case 22:if(s=n.memoizedState!==null||Ta,!s){t=t!==null&&t.memoizedState!==null||vn;var r=Ta,o=vn;Ta=s,(vn=t)&&!o?Ml(e,n,(n.subtreeFlags&8772)!==0):da(e,n),Ta=r,vn=o}i&512&&(n.memoizedProps.mode==="manual"?Su(n,n.return):Ls(n,n.return));break;default:da(e,n)}}function EO(e){var t=e.alternate;t!==null&&(e.alternate=null,EO(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Mv(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var kn=null,As=!1;function ua(e,t,n){for(n=n.child;n!==null;)vO(e,t,n),n=n.sibling}function vO(e,t,n){if(zs&&typeof zs.onCommitFiberUnmount=="function")try{zs.onCommitFiberUnmount(Lm,n)}catch{}switch(n.tag){case 26:vn||Ls(n,t),ua(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:vn||Ls(n,t);var i=kn,s=As;for(kn=n.stateNode,ua(e,t,n),n=n.stateNode,t=n.attributes;t.length;)n.removeAttributeNode(t[0]);Mv(n),kn=i,As=s;break;case 5:vn||Ls(n,t);case 6:s=kn;var r=As;if(kn=null,ua(e,t,n),kn=s,As=r,kn!==null)if(As)try{e=kn,i=n.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)}catch(o){Vt(n,t,o)}else try{kn.removeChild(n.stateNode)}catch(o){Vt(n,t,o)}break;case 18:kn!==null&&(As?(t=kn,n=n.stateNode,t.nodeType===8?A8(t.parentNode,n):t.nodeType===1&&A8(t,n),B0(t)):A8(kn,n.stateNode));break;case 4:i=kn,s=As,kn=n.stateNode.containerInfo,As=!0,ua(e,t,n),kn=i,As=s;break;case 0:case 11:case 14:case 15:vn||Sc(2,n,t),vn||Sc(4,n,t),ua(e,t,n);break;case 1:vn||(Ls(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&pO(n,t,i)),ua(e,t,n);break;case 21:ua(e,t,n);break;case 22:vn||Ls(n,t),vn=(i=vn)||n.memoizedState!==null,ua(e,t,n),vn=i;break;default:ua(e,t,n)}}function wO(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{B0(e)}catch(n){Vt(t,t.return,n)}}function xq(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new HI),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new HI),t;default:throw Error(te(435,e.tag))}}function b8(e,t){var n=xq(e);t.forEach(function(i){var s=zq.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}function Ks(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 27:case 5:kn=a.stateNode,As=!1;break e;case 3:kn=a.stateNode.containerInfo,As=!0;break e;case 4:kn=a.stateNode.containerInfo,As=!0;break e}a=a.return}if(kn===null)throw Error(te(160));vO(r,o,s),kn=null,As=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)_O(t,e),t=t.sibling}var Br=null;function _O(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ks(t,e),Zs(e),i&4&&(Sc(3,e,e.return),Vm(3,e),Sc(5,e,e.return));break;case 1:Ks(t,e),Zs(e),i&512&&(vn||n===null||Ls(n,n.return)),i&64&&Ta&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=Br;if(Ks(t,e),Zs(e),i&512&&(vn||n===null||Ls(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[I0]||r[zi]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),Ti(r,i,n),r[zi]=e,ui(r),i=r;break e;case"link":var o=rx("link","href",s).get(i+(n.href||""));if(o){for(var a=0;a<o.length;a++)if(r=o[a],r.getAttribute("href")===(n.href==null?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(a,1);break t}}r=s.createElement(i),Ti(r,i,n),s.head.appendChild(r);break;case"meta":if(o=rx("meta","content",s).get(i+(n.content||""))){for(a=0;a<o.length;a++)if(r=o[a],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(a,1);break t}}r=s.createElement(i),Ti(r,i,n),s.head.appendChild(r);break;default:throw Error(te(468,i))}r[zi]=e,ui(r),i=r}e.stateNode=i}else ox(s,e.type,e.stateNode);else e.stateNode=sx(s,i,e.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?ox(s,e.type,e.stateNode):sx(s,i,e.memoizedProps)):i===null&&e.stateNode!==null&&zI(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(i&4&&e.alternate===null){s=e.stateNode,r=e.memoizedProps;try{for(var l=s.firstChild;l;){var c=l.nextSibling,u=l.nodeName;l[I0]||u==="HEAD"||u==="BODY"||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&l.rel.toLowerCase()==="stylesheet"||s.removeChild(l),l=c}for(var d=e.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Ti(s,d,r),s[zi]=e,s[Es]=r}catch(m){Vt(e,e.return,m)}}case 5:if(Ks(t,e),Zs(e),i&512&&(vn||n===null||Ls(n,n.return)),e.flags&32){s=e.stateNode;try{mh(s,"")}catch(m){Vt(e,e.return,m)}}i&4&&e.stateNode!=null&&(s=e.memoizedProps,zI(e,s,n!==null?n.memoizedProps:s)),i&1024&&(U8=!0);break;case 6:if(Ks(t,e),Zs(e),i&4){if(e.stateNode===null)throw Error(te(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(m){Vt(e,e.return,m)}}break;case 3:if(QU=null,s=Br,Br=nb(t.containerInfo),Ks(t,e),Br=s,Zs(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{B0(t.containerInfo)}catch(m){Vt(e,e.return,m)}U8&&(U8=!1,TO(e));break;case 4:i=Br,Br=nb(e.stateNode.containerInfo),Ks(t,e),Zs(e),Br=i;break;case 12:Ks(t,e),Zs(e);break;case 13:Ks(t,e),Zs(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(c9=Bo()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,b8(e,i)));break;case 22:if(i&512&&(vn||n===null||Ls(n,n.return)),l=e.memoizedState!==null,c=n!==null&&n.memoizedState!==null,u=Ta,d=vn,Ta=u||l,vn=d||c,Ks(t,e),vn=d,Ta=u,Zs(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,i&8192&&(t._visibility=l?t._visibility&-2:t._visibility|1,l&&(t=Ta||vn,n===null||c||t||df(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))e:for(n=null,t=e;;){if(t.tag===5||t.tag===26||t.tag===27){if(n===null){c=n=t;try{if(s=c.stateNode,l)r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{o=c.stateNode,a=c.memoizedProps.style;var h=a!=null&&a.hasOwnProperty("display")?a.display:null;o.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(m){Vt(c,c.return,m)}}}else if(t.tag===6){if(n===null){c=t;try{c.stateNode.nodeValue=l?"":c.memoizedProps}catch(m){Vt(c,c.return,m)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,b8(e,n))));break;case 19:Ks(t,e),Zs(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,b8(e,i)));break;case 21:break;default:Ks(t,e),Zs(e)}}function Zs(e){var t=e.flags;if(t&2){try{if(e.tag!==27){e:{for(var n=e.return;n!==null;){if(bO(n)){var i=n;break e}n=n.return}throw Error(te(160))}switch(i.tag){case 27:var s=i.stateNode,r=p8(e);K2(e,r,s);break;case 5:var o=i.stateNode;i.flags&32&&(mh(o,""),i.flags&=-33);var a=p8(e);K2(e,a,o);break;case 3:case 4:var l=i.stateNode.containerInfo,c=p8(e);X7(e,c,l);break;default:throw Error(te(161))}}}catch(u){Vt(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function TO(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;TO(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function da(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)yO(e,t.alternate,t),t=t.sibling}function df(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Sc(4,t,t.return),df(t);break;case 1:Ls(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&pO(t,t.return,n),df(t);break;case 26:case 27:case 5:Ls(t,t.return),df(t);break;case 22:Ls(t,t.return),t.memoizedState===null&&df(t);break;default:df(t)}e=e.sibling}}function Ml(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,s=e,r=t,o=r.flags;switch(r.tag){case 0:case 11:case 15:Ml(s,r,n),Vm(4,r);break;case 1:if(Ml(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(c){Vt(i,i.return,c)}if(i=r,s=i.updateQueue,s!==null){var a=i.stateNode;try{var l=s.shared.hiddenCallbacks;if(l!==null)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)hO(l[s],a)}catch(c){Vt(i,i.return,c)}}n&&o&64&&mO(r),Su(r,r.return);break;case 26:case 27:case 5:Ml(s,r,n),n&&i===null&&o&4&&UO(r),Su(r,r.return);break;case 12:Ml(s,r,n);break;case 13:Ml(s,r,n),n&&o&4&&wO(s,r);break;case 22:r.memoizedState===null&&Ml(s,r,n),Su(r,r.return);break;default:Ml(s,r,n)}t=t.sibling}}function s9(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Bm(n))}function r9(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Bm(e))}function wl(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)SO(e,t,n,i),t=t.sibling}function SO(e,t,n,i){var s=t.flags;switch(t.tag){case 0:case 11:case 15:wl(e,t,n,i),s&2048&&Vm(9,t);break;case 3:wl(e,t,n,i),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Bm(e)));break;case 12:if(s&2048){wl(e,t,n,i),e=t.stateNode;try{var r=t.memoizedProps,o=r.id,a=r.onPostCommit;typeof a=="function"&&a(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Vt(t,t.return,l)}}else wl(e,t,n,i);break;case 23:break;case 22:r=t.stateNode,t.memoizedState!==null?r._visibility&4?wl(e,t,n,i):Q1(e,t):r._visibility&4?wl(e,t,n,i):(r._visibility|=4,ff(e,t,n,i,(t.subtreeFlags&10256)!==0)),s&2048&&s9(t.alternate,t);break;case 24:wl(e,t,n,i),s&2048&&r9(t.alternate,t);break;default:wl(e,t,n,i)}}function ff(e,t,n,i,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var r=e,o=t,a=n,l=i,c=o.flags;switch(o.tag){case 0:case 11:case 15:ff(r,o,a,l,s),Vm(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState!==null?u._visibility&4?ff(r,o,a,l,s):Q1(r,o):(u._visibility|=4,ff(r,o,a,l,s)),s&&c&2048&&s9(o.alternate,o);break;case 24:ff(r,o,a,l,s),s&&c&2048&&r9(o.alternate,o);break;default:ff(r,o,a,l,s)}t=t.sibling}}function Q1(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,s=i.flags;switch(i.tag){case 22:Q1(n,i),s&2048&&s9(i.alternate,i);break;case 24:Q1(n,i),s&2048&&r9(i.alternate,i);break;default:Q1(n,i)}t=t.sibling}}var b1=8192;function Zd(e){if(e.subtreeFlags&b1)for(e=e.child;e!==null;)IO(e),e=e.sibling}function IO(e){switch(e.tag){case 26:Zd(e),e.flags&b1&&e.memoizedState!==null&&mQ(Br,e.memoizedState,e.memoizedProps);break;case 5:Zd(e);break;case 3:case 4:var t=Br;Br=nb(e.stateNode.containerInfo),Zd(e),Br=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=b1,b1=16777216,Zd(e),b1=t):Zd(e));break;default:Zd(e)}}function xO(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function $g(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ci=i,AO(i,e)}xO(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)CO(e),e=e.sibling}function CO(e){switch(e.tag){case 0:case 11:case 15:$g(e),e.flags&2048&&Sc(9,e,e.return);break;case 3:$g(e);break;case 12:$g(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,KU(e)):$g(e);break;default:$g(e)}}function KU(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ci=i,AO(i,e)}xO(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Sc(8,t,t.return),KU(t);break;case 22:n=t.stateNode,n._visibility&4&&(n._visibility&=-5,KU(t));break;default:KU(t)}e=e.sibling}}function AO(e,t){for(;ci!==null;){var n=ci;switch(n.tag){case 0:case 11:case 15:Sc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Bm(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ci=i;else e:for(n=e;ci!==null;){i=ci;var s=i.sibling,r=i.return;if(EO(i),i===n){ci=null;break e}if(s!==null){s.return=r,ci=s;break e}ci=r}}}function Cq(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(e,t,n,i){return new Cq(e,t,n,i)}function o9(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ac(e,t){var n=e.alternate;return n===null?(n=dr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&31457280,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function MO(e,t){e.flags&=31457282;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ZU(e,t,n,i,s,r){var o=0;if(i=e,typeof e=="function")o9(e)&&(o=1);else if(typeof e=="string")o=hQ(e,n,Fo.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case _f:return zu(n.children,s,r,t);case RL:o=8,s|=24;break;case g7:return e=dr(12,n,t,s|2),e.elementType=g7,e.lanes=r,e;case m7:return e=dr(13,n,t,s),e.elementType=m7,e.lanes=r,e;case p7:return e=dr(19,n,t,s),e.elementType=p7,e.lanes=r,e;case DL:return RO(n,s,r,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case JK:case ka:o=10;break e;case kL:o=9;break e;case xv:o=11;break e;case Cv:o=14;break e;case Nl:o=16,i=null;break e}o=29,n=Error(te(130,e===null?"null":typeof e,"")),i=null}return t=dr(o,n,t,s),t.elementType=e,t.type=i,t.lanes=r,t}function zu(e,t,n,i){return e=dr(7,e,i,t),e.lanes=n,e}function RO(e,t,n,i){e=dr(22,e,i,t),e.elementType=DL,e.lanes=n;var s={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var r=s._current;if(r===null)throw Error(te(456));if(!(s._pendingVisibility&2)){var o=_c(r,2);o!==null&&(s._pendingVisibility|=2,ts(o,r,2))}},attach:function(){var r=s._current;if(r===null)throw Error(te(456));if(s._pendingVisibility&2){var o=_c(r,2);o!==null&&(s._pendingVisibility&=-3,ts(o,r,2))}}};return e.stateNode=s,e}function y8(e,t,n){return e=dr(6,e,null,t),e.lanes=n,e}function E8(e,t,n){return t=dr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function fa(e){e.flags|=4}function $I(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!QO(t)){if(t=Tr.current,t!==null&&((ht&4194176)===ht?zo!==null:(ht&62914560)!==ht&&!(ht&536870912)||t!==zo))throw X1=A7,UN;e.flags|=8192}}function Wp(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?zL():536870912,e.lanes|=t,yh|=t)}function Gg(e,t){if(!It)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function dn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&31457280,i|=s.flags&31457280,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Aq(e,t,n){var i=t.pendingProps;switch(zv(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(t),null;case 1:return dn(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Ba(qn),hh(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Hg(t)?fa(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vr!==null&&(Z7(Vr),Vr=null))),dn(t),null;case 26:return n=t.memoizedState,e===null?(fa(t),n!==null?(dn(t),$I(t,n)):(dn(t),t.flags&=-16777217)):n?n!==e.memoizedState?(fa(t),dn(t),$I(t,n)):(dn(t),t.flags&=-16777217):(e.memoizedProps!==i&&fa(t),dn(t),t.flags&=-16777217),null;case 27:N2(t),n=sc.current;var s=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&fa(t);else{if(!i){if(t.stateNode===null)throw Error(te(166));return dn(t),null}e=Fo.current,Hg(t)?yI(t):(e=KO(s,i,n),t.stateNode=e,fa(t))}return dn(t),null;case 5:if(N2(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&fa(t);else{if(!i){if(t.stateNode===null)throw Error(te(166));return dn(t),null}if(e=Fo.current,Hg(t))yI(t);else{switch(s=tb(sc.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?s.createElement(n,{is:i.is}):s.createElement(n)}}e[zi]=t,e[Es]=i;e:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(Ti(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&fa(t)}}return dn(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&fa(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(te(166));if(e=sc.current,Hg(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,s=Zi,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}e[zi]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||jO(e.nodeValue,n)),e||qu(t)}else e=tb(e).createTextNode(i),e[zi]=t,t.stateNode=e}return dn(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=Hg(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(te(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(te(317));s[zi]=t}else Fm(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dn(t),s=!1}else Vr!==null&&(Z7(Vr),Vr=null),s=!0;if(!s)return t.flags&256?(Na(t),t):(Na(t),null)}if(Na(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Wp(t,t.updateQueue),dn(t),null;case 4:return hh(),e===null&&f9(t.stateNode.containerInfo),dn(t),null;case 10:return Ba(t.type),dn(t),null;case 19:if(gi(Qn),s=t.memoizedState,s===null)return dn(t),null;if(i=(t.flags&128)!==0,r=s.rendering,r===null)if(i)Gg(s,!1);else{if(wn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(r=$2(e),r!==null){for(t.flags|=128,Gg(s,!1),e=r.updateQueue,t.updateQueue=e,Wp(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)MO(n,e),n=n.sibling;return cn(Qn,Qn.current&1|2),t.child}e=e.sibling}s.tail!==null&&Bo()>Z2&&(t.flags|=128,i=!0,Gg(s,!1),t.lanes=4194304)}else{if(!i)if(e=$2(r),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Wp(t,e),Gg(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!It)return dn(t),null}else 2*Bo()-s.renderingStartTime>Z2&&n!==536870912&&(t.flags|=128,i=!0,Gg(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(e=s.last,e!==null?e.sibling=r:t.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Bo(),t.sibling=null,e=Qn.current,cn(Qn,i?e&1|2:e&1),t):(dn(t),null);case 22:case 23:return Na(t),Hv(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(dn(t),t.subtreeFlags&6&&(t.flags|=8192)):dn(t),n=t.updateQueue,n!==null&&Wp(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&gi(Bu),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ba(qn),dn(t),null;case 25:return null}throw Error(te(156,t.tag))}function Mq(e,t){switch(zv(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ba(qn),hh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return N2(t),null;case 13:if(Na(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));Fm()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gi(Qn),null;case 4:return hh(),null;case 10:return Ba(t.type),null;case 22:case 23:return Na(t),Hv(),e!==null&&gi(Bu),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ba(qn),null;case 25:return null;default:return null}}function kO(e,t){switch(zv(t),t.tag){case 3:Ba(qn),hh();break;case 26:case 27:case 5:N2(t);break;case 4:hh();break;case 13:Na(t);break;case 19:gi(Qn);break;case 10:Ba(t.type);break;case 22:case 23:Na(t),Hv(),e!==null&&gi(Bu);break;case 24:Ba(qn)}}var Rq={getCacheForType:function(e){var t=Hi(qn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},kq=typeof WeakMap=="function"?WeakMap:Map,gn=0,Kt=null,qe=null,ht=0,Wt=0,Ms=null,Sa=!1,rg=!1,a9=!1,qa=0,wn=0,Ic=0,Hu=0,l9=0,fr=0,yh=0,J1=null,Mo=null,j7=!1,c9=0,Z2=1/0,q2=null,lc=null,Kp=!1,bu=null,e0=0,Y7=0,W7=null,t0=0,K7=null;function Vs(){if(gn&2&&ht!==0)return ht&-ht;if(je.T!==null){var e=Uh;return e!==0?e:d9()}return GL()}function DO(){fr===0&&(fr=!(ht&536870912)||It?BL():536870912);var e=Tr.current;return e!==null&&(e.flags|=32),fr}function ts(e,t,n){(e===Kt&&Wt===2||e.cancelPendingCommit!==null)&&(Eh(e,0),Ia(e,ht,fr,!1)),Om(e,n),(!(gn&2)||e!==Kt)&&(e===Kt&&(!(gn&2)&&(Hu|=n),wn===4&&Ia(e,ht,fr,!1)),ia(e))}function LO(e,t,n){if(gn&6)throw Error(te(327));var i=!n&&(t&60)===0&&(t&e.expiredLanes)===0||Nm(e,t),s=i?Nq(e,t):v8(e,t,!0),r=i;do{if(s===0){rg&&!i&&Ia(e,t,0,!1);break}else if(s===6)Ia(e,t,0,!Sa);else{if(n=e.current.alternate,r&&!Dq(n)){s=v8(e,t,!1),r=!1;continue}if(s===2){if(r=t,e.errorRecoveryDisabledLanes&r)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var a=e;s=J1;var l=a.current.memoizedState.isDehydrated;if(l&&(Eh(a,o).flags|=256),o=v8(a,o,!1),o!==2){if(a9&&!l){a.errorRecoveryDisabledLanes|=r,Hu|=r,s=4;break e}r=Mo,Mo=s,r!==null&&Z7(r)}s=o}if(r=!1,s!==2)continue}}if(s===1){Eh(e,0),Ia(e,t,0,!0);break}e:{switch(i=e,s){case 0:case 1:throw Error(te(345));case 4:if((t&4194176)===t){Ia(i,t,fr,!Sa);break e}break;case 2:Mo=null;break;case 3:case 5:break;default:throw Error(te(329))}if(i.finishedWork=n,i.finishedLanes=t,(t&62914560)===t&&(r=c9+300-Bo(),10<r)){if(Ia(i,t,fr,!Sa),V6(i,0)!==0)break e;i.timeoutHandle=WO(GI.bind(null,i,n,Mo,q2,j7,t,fr,Hu,yh,Sa,2,-0,0),r);break e}GI(i,n,Mo,q2,j7,t,fr,Hu,yh,Sa,0,-0,0)}}break}while(!0);ia(e)}function Z7(e){Mo===null?Mo=e:Mo.push.apply(Mo,e)}function GI(e,t,n,i,s,r,o,a,l,c,u,d,f){var h=t.subtreeFlags;if((h&8192||(h&16785408)===16785408)&&(N0={stylesheets:null,count:0,unsuspend:gQ},IO(t),t=pQ(),t!==null)){e.cancelPendingCommit=t(jI.bind(null,e,n,i,s,o,a,l,1,d,f)),Ia(e,r,o,!c);return}jI(e,n,i,s,o,a,l,u,d,f)}function Dq(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!Xs(r(),s))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ia(e,t,n,i){t&=~l9,t&=~Hu,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var s=t;0<s;){var r=31-Hs(s),o=1<<r;i[r]=-1,s&=~o}n!==0&&HL(e,n,t)}function Q6(){return gn&6?!0:($m(0),!1)}function u9(){if(qe!==null){if(Wt===0)var e=qe.return;else e=qe,Oa=kd=null,Wv(e),Wf=null,R0=0,e=qe;for(;e!==null;)kO(e.alternate,e),e=e.return;qe=null}}function Eh(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Qq(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),u9(),Kt=e,qe=n=ac(e.current,null),ht=t,Wt=0,Ms=null,Sa=!1,rg=Nm(e,t),a9=!1,yh=fr=l9=Hu=Ic=wn=0,Mo=J1=null,j7=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var s=31-Hs(i),r=1<<s;t|=e[s],i&=~r}return qa=t,j6(),n}function NO(e,t){Ke=null,je.H=$o,t===G1?(t=wI(),Wt=3):t===UN?(t=wI(),Wt=4):Wt=t===oO?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ms=t,qe===null&&(wn=1,Y2(e,ar(t,e.current)))}function OO(){var e=je.H;return je.H=$o,e===null?$o:e}function PO(){var e=je.A;return je.A=Rq,e}function q7(){wn=4,Sa||(ht&4194176)!==ht&&Tr.current!==null||(rg=!0),!(Ic&134217727)&&!(Hu&134217727)||Kt===null||Ia(Kt,ht,fr,!1)}function v8(e,t,n){var i=gn;gn|=2;var s=OO(),r=PO();(Kt!==e||ht!==t)&&(q2=null,Eh(e,t)),t=!1;var o=wn;e:do try{if(Wt!==0&&qe!==null){var a=qe,l=Ms;switch(Wt){case 8:u9(),o=6;break e;case 3:case 2:case 6:Tr.current===null&&(t=!0);var c=Wt;if(Wt=0,Ms=null,Df(e,a,l,c),n&&rg){o=0;break e}break;default:c=Wt,Wt=0,Ms=null,Df(e,a,l,c)}}Lq(),o=wn;break}catch(u){NO(e,u)}while(!0);return t&&e.shellSuspendCounter++,Oa=kd=null,gn=i,je.H=s,je.A=r,qe===null&&(Kt=null,ht=0,j6()),o}function Lq(){for(;qe!==null;)FO(qe)}function Nq(e,t){var n=gn;gn|=2;var i=OO(),s=PO();Kt!==e||ht!==t?(q2=null,Z2=Bo()+500,Eh(e,t)):rg=Nm(e,t);e:do try{if(Wt!==0&&qe!==null){t=qe;var r=Ms;t:switch(Wt){case 1:Wt=0,Ms=null,Df(e,t,r,1);break;case 2:if(vI(r)){Wt=0,Ms=null,XI(t);break}t=function(){Wt===2&&Kt===e&&(Wt=7),ia(e)},r.then(t,t);break e;case 3:Wt=7;break e;case 4:Wt=5;break e;case 7:vI(r)?(Wt=0,Ms=null,XI(t)):(Wt=0,Ms=null,Df(e,t,r,7));break;case 5:var o=null;switch(qe.tag){case 26:o=qe.memoizedState;case 5:case 27:var a=qe;if(!o||QO(o)){Wt=0,Ms=null;var l=a.sibling;if(l!==null)qe=l;else{var c=a.return;c!==null?(qe=c,J6(c)):qe=null}break t}}Wt=0,Ms=null,Df(e,t,r,5);break;case 6:Wt=0,Ms=null,Df(e,t,r,6);break;case 8:u9(),wn=6;break e;default:throw Error(te(462))}}Oq();break}catch(u){NO(e,u)}while(!0);return Oa=kd=null,je.H=i,je.A=s,gn=n,qe!==null?0:(Kt=null,ht=0,j6(),wn)}function Oq(){for(;qe!==null&&!sZ();)FO(qe)}function FO(e){var t=dO(e.alternate,e,qa);e.memoizedProps=e.pendingProps,t===null?J6(e):qe=t}function XI(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=OI(n,t,t.pendingProps,t.type,void 0,ht);break;case 11:t=OI(n,t,t.pendingProps,t.type.render,t.ref,ht);break;case 5:Wv(t);default:kO(n,t),t=qe=MO(t,qa),t=dO(n,t,qa)}e.memoizedProps=e.pendingProps,t===null?J6(e):qe=t}function Df(e,t,n,i){Oa=kd=null,Wv(t),Wf=null,R0=0;var s=t.return;try{if(Tq(e,s,t,n,ht)){wn=1,Y2(e,ar(n,e.current)),qe=null;return}}catch(r){if(s!==null)throw qe=s,r;wn=1,Y2(e,ar(n,e.current)),qe=null;return}t.flags&32768?(It||i===1?e=!0:rg||ht&536870912?e=!1:(Sa=e=!0,(i===2||i===3||i===6)&&(i=Tr.current,i!==null&&i.tag===13&&(i.flags|=16384))),BO(t,e)):J6(t)}function J6(e){var t=e;do{if(t.flags&32768){BO(t,Sa);return}e=t.return;var n=Aq(t.alternate,t,qa);if(n!==null){qe=n;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);wn===0&&(wn=5)}function BO(e,t){do{var n=Mq(e.alternate,e);if(n!==null){n.flags&=32767,qe=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){qe=e;return}qe=e=n}while(e!==null);wn=6,qe=null}function jI(e,t,n,i,s,r,o,a,l,c){var u=je.T,d=tn.p;try{tn.p=2,je.T=null,Pq(e,t,n,i,d,s,r,o,a,l,c)}finally{je.T=u,tn.p=d}}function Pq(e,t,n,i,s,r,o,a){do Qf();while(bu!==null);if(gn&6)throw Error(te(327));var l=e.finishedWork;if(i=e.finishedLanes,l===null)return null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var c=l.lanes|l.childLanes;if(c|=Pv,mZ(e,i,c,r,o,a),e===Kt&&(qe=Kt=null,ht=0),!(l.subtreeFlags&10256)&&!(l.flags&10256)||Kp||(Kp=!0,Y7=c,W7=n,Hq(O2,function(){return Qf(),null})),n=(l.flags&15990)!==0,l.subtreeFlags&15990||n?(n=je.T,je.T=null,r=tn.p,tn.p=2,o=gn,gn|=4,Iq(e,l),_O(l,e),aq(t3,e.containerInfo),rb=!!e3,t3=e3=null,e.current=l,yO(e,l.alternate,l),rZ(),gn=o,tn.p=r,je.T=n):e.current=l,Kp?(Kp=!1,bu=e,e0=i):zO(e,c),c=e.pendingLanes,c===0&&(lc=null),uZ(l.stateNode),ia(e),t!==null)for(s=e.onRecoverableError,l=0;l<t.length;l++)c=t[l],s(c.value,{componentStack:c.stack});return e0&3&&Qf(),c=e.pendingLanes,i&4194218&&c&42?e===K7?t0++:(t0=0,K7=e):t0=0,$m(0),null}function zO(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Bm(t)))}function Qf(){if(bu!==null){var e=bu,t=Y7;Y7=0;var n=$L(e0),i=je.T,s=tn.p;try{if(tn.p=32>n?32:n,je.T=null,bu===null)var r=!1;else{n=W7,W7=null;var o=bu,a=e0;if(bu=null,e0=0,gn&6)throw Error(te(331));var l=gn;if(gn|=4,CO(o.current),SO(o,o.current,a,n),gn=l,$m(0,!1),zs&&typeof zs.onPostCommitFiberRoot=="function")try{zs.onPostCommitFiberRoot(Lm,o)}catch{}r=!0}return r}finally{tn.p=s,je.T=i,zO(e,t)}}return!1}function YI(e,t,n){t=ar(n,t),t=O7(e.stateNode,t,2),e=oc(e,t,2),e!==null&&(Om(e,2),ia(e))}function Vt(e,t,n){if(e.tag===3)YI(e,e,n);else for(;t!==null;){if(t.tag===3){YI(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(lc===null||!lc.has(i))){e=ar(n,e),n=sO(2),i=oc(t,n,2),i!==null&&(rO(n,i,t,e),Om(i,2),ia(i));break}}t=t.return}}function w8(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new kq;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(a9=!0,s.add(n),e=Fq.bind(null,e,t,n),t.then(e,e))}function Fq(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Kt===e&&(ht&n)===n&&(wn===4||wn===3&&(ht&62914560)===ht&&300>Bo()-c9?!(gn&2)&&Eh(e,0):l9|=n,yh===ht&&(yh=0)),ia(e)}function HO(e,t){t===0&&(t=zL()),e=_c(e,t),e!==null&&(Om(e,t),ia(e))}function Bq(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),HO(e,n)}function zq(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(te(314))}i!==null&&i.delete(t),HO(e,n)}function Hq(e,t){return Av(e,t)}var Q2=null,hf=null,Q7=!1,J2=!1,_8=!1,Vu=0;function ia(e){e!==hf&&e.next===null&&(hf===null?Q2=hf=e:hf=hf.next=e),J2=!0,Q7||(Q7=!0,$q(Vq))}function $m(e,t){if(!_8&&J2){_8=!0;do for(var n=!1,i=Q2;i!==null;){if(e!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var o=i.suspendedLanes,a=i.pingedLanes;r=(1<<31-Hs(42|e)+1)-1,r&=s&~(o&~a),r=r&201326677?r&201326677|1:r?r|2:0}r!==0&&(n=!0,WI(i,r))}else r=ht,r=V6(i,i===Kt?r:0),!(r&3)||Nm(i,r)||(n=!0,WI(i,r));i=i.next}while(n);_8=!1}}function Vq(){J2=Q7=!1;var e=0;Vu!==0&&(qq()&&(e=Vu),Vu=0);for(var t=Bo(),n=null,i=Q2;i!==null;){var s=i.next,r=VO(i,t);r===0?(i.next=null,n===null?Q2=s:n.next=s,s===null&&(hf=n)):(n=i,(e!==0||r&3)&&(J2=!0)),i=s}$m(e)}function VO(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var o=31-Hs(r),a=1<<o,l=s[o];l===-1?(!(a&n)||a&i)&&(s[o]=gZ(a,t)):l<=t&&(e.expiredLanes|=a),r&=~a}if(t=Kt,n=ht,n=V6(e,e===t?n:0),i=e.callbackNode,n===0||e===t&&Wt===2||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Jy(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Nm(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Jy(i),$L(n)){case 2:case 8:n=PL;break;case 32:n=O2;break;case 268435456:n=FL;break;default:n=O2}return i=$O.bind(null,e),n=Av(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Jy(i),e.callbackPriority=2,e.callbackNode=null,2}function $O(e,t){var n=e.callbackNode;if(Qf()&&e.callbackNode!==n)return null;var i=ht;return i=V6(e,e===Kt?i:0),i===0?null:(LO(e,i,t),VO(e,Bo()),e.callbackNode!=null&&e.callbackNode===n?$O.bind(null,e):null)}function WI(e,t){if(Qf())return null;LO(e,t,!0)}function $q(e){Jq(function(){gn&6?Av(OL,e):e()})}function d9(){return Vu===0&&(Vu=BL()),Vu}function KI(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:$U(""+e)}function ZI(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Gq(e,t,n,i,s){if(t==="submit"&&n&&n.stateNode===s){var r=KI((s[Es]||null).action),o=i.submitter;o&&(t=(t=o[Es]||null)?KI(t.formAction):o.getAttribute("formAction"),t!==null&&(r=t,o=null));var a=new $6("action","action",null,i,s);e.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Vu!==0){var l=o?ZI(s,o):new FormData(s);L7(n,{pending:!0,data:l,method:s.method,action:r},null,l)}}else typeof r=="function"&&(a.preventDefault(),l=o?ZI(s,o):new FormData(s),L7(n,{pending:!0,data:l,method:s.method,action:r},r,l))},currentTarget:s}]})}}for(var T8=0;T8<UI.length;T8++){var S8=UI[T8],Xq=S8.toLowerCase(),jq=S8[0].toUpperCase()+S8.slice(1);go(Xq,"on"+jq)}go(uN,"onAnimationEnd");go(dN,"onAnimationIteration");go(fN,"onAnimationStart");go("dblclick","onDoubleClick");go("focusin","onFocus");go("focusout","onBlur");go(cq,"onTransitionRun");go(uq,"onTransitionStart");go(dq,"onTransitionCancel");go(hN,"onTransitionEnd");gh("onMouseEnter",["mouseout","mouseover"]);gh("onMouseLeave",["mouseout","mouseover"]);gh("onPointerEnter",["pointerout","pointerover"]);gh("onPointerLeave",["pointerout","pointerover"]);xd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xd("onBeforeInput",["compositionend","keypress","textInput","paste"]);xd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var D0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(D0));function GO(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;e:{var r=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;r=a,s.currentTarget=c;try{r(s)}catch(u){j2(u)}s.currentTarget=null,r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;r=a,s.currentTarget=c;try{r(s)}catch(u){j2(u)}s.currentTarget=null,r=l}}}}function rt(e,t){var n=t[v7];n===void 0&&(n=t[v7]=new Set);var i=e+"__bubble";n.has(i)||(XO(t,e,2,!1),n.add(i))}function I8(e,t,n){var i=0;t&&(i|=4),XO(n,e,i,t)}var Zp="_reactListening"+Math.random().toString(36).slice(2);function f9(e){if(!e[Zp]){e[Zp]=!0,XL.forEach(function(n){n!=="selectionchange"&&(Yq.has(n)||I8(n,!1,e),I8(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Zp]||(t[Zp]=!0,I8("selectionchange",!1,t))}}function XO(e,t,n,i){switch(iP(t)){case 2:var s=yQ;break;case 8:s=EQ;break;default:s=p9}n=s.bind(null,t,n,e),s=void 0,!S7||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function x8(e,t,n,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Tu(a),o===null)return;if(l=o.tag,l===5||l===6||l===26||l===27){i=r=o;continue e}a=a.parentNode}}i=i.return}JL(function(){var c=r,u=kv(n),d=[];e:{var f=gN.get(e);if(f!==void 0){var h=$6,m=e;switch(e){case"keypress":if(XU(n)===0)break e;case"keydown":case"keyup":h=zZ;break;case"focusin":m="focus",h=s8;break;case"focusout":m="blur",h=s8;break;case"beforeblur":case"afterblur":h=s8;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=rI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=CZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=$Z;break;case uN:case dN:case fN:h=RZ;break;case hN:h=XZ;break;case"scroll":case"scrollend":h=IZ;break;case"wheel":h=YZ;break;case"copy":case"cut":case"paste":h=DZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=aI;break;case"toggle":case"beforetoggle":h=KZ}var p=(t&4)!==0,U=!p&&(e==="scroll"||e==="scrollend"),y=p?f!==null?f+"Capture":null:f;p=[];for(var E=c,v;E!==null;){var w=E;if(v=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||v===null||y===null||(w=x0(E,y),w!=null&&p.push(L0(E,w,v))),U)break;E=E.return}0<p.length&&(f=new h(f,m,null,n,u),d.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==T7&&(m=n.relatedTarget||n.fromElement)&&(Tu(m)||m[ig]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?Tu(m):null,m!==null&&(U=ng(m),p=m.tag,m!==U||p!==5&&p!==27&&p!==6)&&(m=null)):(h=null,m=c),h!==m)){if(p=rI,w="onMouseLeave",y="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(p=aI,w="onPointerLeave",y="onPointerEnter",E="pointer"),U=h==null?f:U1(h),v=m==null?f:U1(m),f=new p(w,E+"leave",h,n,u),f.target=U,f.relatedTarget=v,w=null,Tu(u)===c&&(p=new p(y,E+"enter",m,n,u),p.target=v,p.relatedTarget=U,w=p),U=w,h&&m)t:{for(p=h,y=m,E=0,v=p;v;v=qd(v))E++;for(v=0,w=y;w;w=qd(w))v++;for(;0<E-v;)p=qd(p),E--;for(;0<v-E;)y=qd(y),v--;for(;E--;){if(p===y||y!==null&&p===y.alternate)break t;p=qd(p),y=qd(y)}p=null}else p=null;h!==null&&qI(d,f,h,p,!1),m!==null&&U!==null&&qI(d,U,m,p,!0)}}e:{if(f=c?U1(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var I=dI;else if(uI(f))if(rN)I=rq;else{I=iq;var M=nq}else h=f.nodeName,!h||h.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?c&&Rv(c.elementType)&&(I=dI):I=sq;if(I&&(I=I(e,c))){sN(d,I,n,u);break e}M&&M(e,f,c),e==="focusout"&&c&&f.type==="number"&&c.memoizedProps.value!=null&&_7(f,"number",f.value)}switch(M=c?U1(c):window,e){case"focusin":(uI(M)||M.contentEditable==="true")&&(xf=M,I7=c,$1=null);break;case"focusout":$1=I7=xf=null;break;case"mousedown":x7=!0;break;case"contextmenu":case"mouseup":case"dragend":x7=!1,pI(d,n,u);break;case"selectionchange":if(lq)break;case"keydown":case"keyup":pI(d,n,u)}var T;if(Nv)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else If?nN(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(tN&&n.locale!=="ko"&&(If||_!=="onCompositionStart"?_==="onCompositionEnd"&&If&&(T=eN()):(Zl=u,Dv="value"in Zl?Zl.value:Zl.textContent,If=!0)),M=eb(c,_),0<M.length&&(_=new oI(_,e,null,n,u),d.push({event:_,listeners:M}),T?_.data=T:(T=iN(n),T!==null&&(_.data=T)))),(T=qZ?QZ(e,n):JZ(e,n))&&(_=eb(c,"onBeforeInput"),0<_.length&&(M=new oI("onBeforeInput","beforeinput",null,n,u),d.push({event:M,listeners:_}),M.data=T)),Gq(d,e,c,n,u)}GO(d,t)})}function L0(e,t,n){return{instance:e,listener:t,currentTarget:n}}function eb(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,r=s.stateNode;s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=x0(e,n),s!=null&&i.unshift(L0(e,s,r)),s=x0(e,t),s!=null&&i.push(L0(e,s,r))),e=e.return}return i}function qd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function qI(e,t,n,i,s){for(var r=t._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,l!==null&&l===i)break;a!==5&&a!==26&&a!==27||c===null||(l=c,s?(c=x0(n,r),c!=null&&o.unshift(L0(n,c,l))):s||(c=x0(n,r),c!=null&&o.push(L0(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Wq=/\r\n?/g,Kq=/\u0000|\uFFFD/g;function QI(e){return(typeof e=="string"?e:""+e).replace(Wq,`
`).replace(Kq,"")}function jO(e,t){return t=QI(t),QI(e)===t}function e5(){}function Nt(e,t,n,i,s,r){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||mh(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&mh(e,""+i);break;case"className":Vp(e,"class",i);break;case"tabIndex":Vp(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Vp(e,n,i);break;case"style":QL(e,i,r);break;case"data":if(t!=="object"){Vp(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=$U(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(t!=="input"&&Nt(e,t,"name",s.name,s,null),Nt(e,t,"formEncType",s.formEncType,s,null),Nt(e,t,"formMethod",s.formMethod,s,null),Nt(e,t,"formTarget",s.formTarget,s,null)):(Nt(e,t,"encType",s.encType,s,null),Nt(e,t,"method",s.method,s,null),Nt(e,t,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=$U(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=e5);break;case"onScroll":i!=null&&rt("scroll",e);break;case"onScrollEnd":i!=null&&rt("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(te(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(te(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=$U(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":rt("beforetoggle",e),rt("toggle",e),VU(e,"popover",i);break;case"xlinkActuate":ca(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ca(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ca(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ca(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ca(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ca(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ca(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ca(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ca(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":VU(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=TZ.get(n)||n,VU(e,n,i))}}function J7(e,t,n,i,s,r){switch(n){case"style":QL(e,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(te(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(te(60));e.innerHTML=n}}break;case"children":typeof i=="string"?mh(e,i):(typeof i=="number"||typeof i=="bigint")&&mh(e,""+i);break;case"onScroll":i!=null&&rt("scroll",e);break;case"onScrollEnd":i!=null&&rt("scrollend",e);break;case"onClick":i!=null&&(e.onclick=e5);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jL.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),r=e[Es]||null,r=r!=null?r[n]:null,typeof r=="function"&&e.removeEventListener(t,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,s);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):VU(e,n,i)}}}function Ti(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",e),rt("load",e);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(o!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(te(137,t));default:Nt(e,t,r,o,n,null)}}s&&Nt(e,t,"srcSet",n.srcSet,n,null),i&&Nt(e,t,"src",n.src,n,null);return;case"input":rt("invalid",e);var a=r=o=s=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var u=n[i];if(u!=null)switch(i){case"name":s=u;break;case"type":o=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":r=u;break;case"defaultValue":a=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(te(137,t));break;default:Nt(e,t,i,u,n,null)}}KL(e,r,a,l,c,o,s,!1),P2(e);return;case"select":rt("invalid",e),i=o=r=null;for(s in n)if(n.hasOwnProperty(s)&&(a=n[s],a!=null))switch(s){case"value":r=a;break;case"defaultValue":o=a;break;case"multiple":i=a;default:Nt(e,t,s,a,n,null)}t=r,n=o,e.multiple=!!i,t!=null?jf(e,!!i,t,!1):n!=null&&jf(e,!!i,n,!0);return;case"textarea":rt("invalid",e),r=s=i=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":i=a;break;case"defaultValue":s=a;break;case"children":r=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(te(91));break;default:Nt(e,t,o,a,n,null)}qL(e,i,s,r),P2(e);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Nt(e,t,l,i,n,null)}return;case"dialog":rt("cancel",e),rt("close",e);break;case"iframe":case"object":rt("load",e);break;case"video":case"audio":for(i=0;i<D0.length;i++)rt(D0[i],e);break;case"image":rt("error",e),rt("load",e);break;case"details":rt("toggle",e);break;case"embed":case"source":case"link":rt("error",e),rt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(te(137,t));default:Nt(e,t,c,i,n,null)}return;default:if(Rv(t)){for(u in n)n.hasOwnProperty(u)&&(i=n[u],i!==void 0&&J7(e,t,u,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&Nt(e,t,a,i,n,null))}function Zq(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,o=null,a=null,l=null,c=null,u=null;for(h in n){var d=n[h];if(n.hasOwnProperty(h)&&d!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":l=d;default:i.hasOwnProperty(h)||Nt(e,t,h,null,i,d)}}for(var f in i){var h=i[f];if(d=n[f],i.hasOwnProperty(f)&&(h!=null||d!=null))switch(f){case"type":r=h;break;case"name":s=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":o=h;break;case"defaultValue":a=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(te(137,t));break;default:h!==d&&Nt(e,t,f,h,i,d)}}w7(e,o,a,l,c,u,r,s);return;case"select":h=o=a=f=null;for(r in n)if(l=n[r],n.hasOwnProperty(r)&&l!=null)switch(r){case"value":break;case"multiple":h=l;default:i.hasOwnProperty(r)||Nt(e,t,r,null,i,l)}for(s in i)if(r=i[s],l=n[s],i.hasOwnProperty(s)&&(r!=null||l!=null))switch(s){case"value":f=r;break;case"defaultValue":a=r;break;case"multiple":o=r;default:r!==l&&Nt(e,t,s,r,i,l)}t=a,n=o,i=h,f!=null?jf(e,!!n,f,!1):!!i!=!!n&&(t!=null?jf(e,!!n,t,!0):jf(e,!!n,n?[]:"",!1));return;case"textarea":h=f=null;for(a in n)if(s=n[a],n.hasOwnProperty(a)&&s!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:Nt(e,t,a,null,i,s)}for(o in i)if(s=i[o],r=n[o],i.hasOwnProperty(o)&&(s!=null||r!=null))switch(o){case"value":f=s;break;case"defaultValue":h=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(te(91));break;default:s!==r&&Nt(e,t,o,s,i,r)}ZL(e,f,h);return;case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&f!=null&&!i.hasOwnProperty(m))switch(m){case"selected":e.selected=!1;break;default:Nt(e,t,m,null,i,f)}for(l in i)if(f=i[l],h=n[l],i.hasOwnProperty(l)&&f!==h&&(f!=null||h!=null))switch(l){case"selected":e.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Nt(e,t,l,f,i,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var p in n)f=n[p],n.hasOwnProperty(p)&&f!=null&&!i.hasOwnProperty(p)&&Nt(e,t,p,null,i,f);for(c in i)if(f=i[c],h=n[c],i.hasOwnProperty(c)&&f!==h&&(f!=null||h!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(te(137,t));break;default:Nt(e,t,c,f,i,h)}return;default:if(Rv(t)){for(var U in n)f=n[U],n.hasOwnProperty(U)&&f!==void 0&&!i.hasOwnProperty(U)&&J7(e,t,U,void 0,i,f);for(u in i)f=i[u],h=n[u],!i.hasOwnProperty(u)||f===h||f===void 0&&h===void 0||J7(e,t,u,f,i,h);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&f!=null&&!i.hasOwnProperty(y)&&Nt(e,t,y,null,i,f);for(d in i)f=i[d],h=n[d],!i.hasOwnProperty(d)||f===h||f==null&&h==null||Nt(e,t,d,f,i,h)}var e3=null,t3=null;function tb(e){return e.nodeType===9?e:e.ownerDocument}function JI(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function YO(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function n3(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var C8=null;function qq(){var e=window.event;return e&&e.type==="popstate"?e===C8?!1:(C8=e,!0):(C8=null,!1)}var WO=typeof setTimeout=="function"?setTimeout:void 0,Qq=typeof clearTimeout=="function"?clearTimeout:void 0,ex=typeof Promise=="function"?Promise:void 0,Jq=typeof queueMicrotask=="function"?queueMicrotask:typeof ex<"u"?function(e){return ex.resolve(null).then(e).catch(eQ)}:WO;function eQ(e){setTimeout(function(){throw e})}function A8(e,t){var n=t,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){e.removeChild(s),B0(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);B0(t)}function i3(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":i3(n),Mv(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function tQ(e,t,n,i){for(;e.nodeType===1;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[I0])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(s.href==null?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=Qr(e.nextSibling),e===null)break}return null}function nQ(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Qr(e.nextSibling),e===null))return null;return e}function Qr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}function tx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function KO(e,t,n){switch(t=tb(n),e){case"html":if(e=t.documentElement,!e)throw Error(te(452));return e;case"head":if(e=t.head,!e)throw Error(te(453));return e;case"body":if(e=t.body,!e)throw Error(te(454));return e;default:throw Error(te(451))}}var Sr=new Map,nx=new Set;function nb(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var gl=tn.d;tn.d={f:iQ,r:sQ,D:rQ,C:oQ,L:aQ,m:lQ,X:uQ,S:cQ,M:dQ};function iQ(){var e=gl.f(),t=Q6();return e||t}function sQ(e){var t=sg(e);t!==null&&t.tag===5&&t.type==="form"?KN(t):gl.r(e)}var og=typeof document>"u"?null:document;function ZO(e,t,n){var i=og;if(i&&typeof t=="string"&&t){var s=or(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),nx.has(s)||(nx.add(s),e={rel:e,crossOrigin:n,href:t},i.querySelector(s)===null&&(t=i.createElement("link"),Ti(t,"link",e),ui(t),i.head.appendChild(t)))}}function rQ(e){gl.D(e),ZO("dns-prefetch",e,null)}function oQ(e,t){gl.C(e,t),ZO("preconnect",e,t)}function aQ(e,t,n){gl.L(e,t,n);var i=og;if(i&&e&&t){var s='link[rel="preload"][as="'+or(t)+'"]';t==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+or(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+or(n.imageSizes)+'"]')):s+='[href="'+or(e)+'"]';var r=s;switch(t){case"style":r=vh(e);break;case"script":r=ag(e)}Sr.has(r)||(e=nn({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Sr.set(r,e),i.querySelector(s)!==null||t==="style"&&i.querySelector(Gm(r))||t==="script"&&i.querySelector(Xm(r))||(t=i.createElement("link"),Ti(t,"link",e),ui(t),i.head.appendChild(t)))}}function lQ(e,t){gl.m(e,t);var n=og;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+or(i)+'"][href="'+or(e)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=ag(e)}if(!Sr.has(r)&&(e=nn({rel:"modulepreload",href:e},t),Sr.set(r,e),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Xm(r)))return}i=n.createElement("link"),Ti(i,"link",e),ui(i),n.head.appendChild(i)}}}function cQ(e,t,n){gl.S(e,t,n);var i=og;if(i&&e){var s=Xf(i).hoistableStyles,r=vh(e);t=t||"default";var o=s.get(r);if(!o){var a={loading:0,preload:null};if(o=i.querySelector(Gm(r)))a.loading=5;else{e=nn({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Sr.get(r))&&h9(e,n);var l=o=i.createElement("link");ui(l),Ti(l,"link",e),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,qU(o,t,i)}o={type:"stylesheet",instance:o,count:1,state:a},s.set(r,o)}}}function uQ(e,t){gl.X(e,t);var n=og;if(n&&e){var i=Xf(n).hoistableScripts,s=ag(e),r=i.get(s);r||(r=n.querySelector(Xm(s)),r||(e=nn({src:e,async:!0},t),(t=Sr.get(s))&&g9(e,t),r=n.createElement("script"),ui(r),Ti(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function dQ(e,t){gl.M(e,t);var n=og;if(n&&e){var i=Xf(n).hoistableScripts,s=ag(e),r=i.get(s);r||(r=n.querySelector(Xm(s)),r||(e=nn({src:e,async:!0,type:"module"},t),(t=Sr.get(s))&&g9(e,t),r=n.createElement("script"),ui(r),Ti(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function ix(e,t,n,i){var s=(s=sc.current)?nb(s):null;if(!s)throw Error(te(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=vh(n.href),n=Xf(s).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=vh(n.href);var r=Xf(s).hoistableStyles,o=r.get(e);if(o||(s=s.ownerDocument||s,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,o),(r=s.querySelector(Gm(e)))&&!r._p&&(o.instance=r,o.state.loading=5),Sr.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sr.set(e,n),r||fQ(s,e,n,o.state))),t&&i===null)throw Error(te(528,""));return o}if(t&&i!==null)throw Error(te(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ag(n),n=Xf(s).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(te(444,e))}}function vh(e){return'href="'+or(e)+'"'}function Gm(e){return'link[rel="stylesheet"]['+e+"]"}function qO(e){return nn({},e,{"data-precedence":e.precedence,precedence:null})}function fQ(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Ti(t,"link",n),ui(t),e.head.appendChild(t))}function ag(e){return'[src="'+or(e)+'"]'}function Xm(e){return"script[async]"+e}function sx(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+or(n.href)+'"]');if(i)return t.instance=i,ui(i),i;var s=nn({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),ui(i),Ti(i,"style",s),qU(i,n.precedence,e),t.instance=i;case"stylesheet":s=vh(n.href);var r=e.querySelector(Gm(s));if(r)return t.state.loading|=4,t.instance=r,ui(r),r;i=qO(n),(s=Sr.get(s))&&h9(i,s),r=(e.ownerDocument||e).createElement("link"),ui(r);var o=r;return o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),Ti(r,"link",i),t.state.loading|=4,qU(r,n.precedence,e),t.instance=r;case"script":return r=ag(n.src),(s=e.querySelector(Xm(r)))?(t.instance=s,ui(s),s):(i=n,(s=Sr.get(r))&&(i=nn({},n),g9(i,s)),e=e.ownerDocument||e,s=e.createElement("script"),ui(s),Ti(s,"link",i),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(te(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,qU(i,n.precedence,e));return t.instance}function qU(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,o=0;o<i.length;o++){var a=i[o];if(a.dataset.precedence===t)r=a;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function h9(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function g9(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var QU=null;function rx(e,t,n){if(QU===null){var i=new Map,s=QU=new Map;s.set(n,i)}else s=QU,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var r=n[s];if(!(r[I0]||r[zi]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var o=r.getAttribute(t)||"";o=e+o;var a=i.get(o);a?a.push(r):i.set(o,[r])}}return i}function ox(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function hQ(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function QO(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var N0=null;function gQ(){}function mQ(e,t,n){if(N0===null)throw Error(te(475));var i=N0;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var s=vh(n.href),r=e.querySelector(Gm(s));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=ib.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=r,ui(r);return}r=e.ownerDocument||e,n=qO(n),(s=Sr.get(s))&&h9(n,s),r=r.createElement("link"),ui(r);var o=r;o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),Ti(r,"link",n),t.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=ib.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function pQ(){if(N0===null)throw Error(te(475));var e=N0;return e.stylesheets&&e.count===0&&s3(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&s3(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function ib(){if(this.count--,this.count===0){if(this.stylesheets)s3(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var sb=null;function s3(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,sb=new Map,t.forEach(UQ,e),sb=null,ib.call(e))}function UQ(e,t){if(!(t.state.loading&4)){var n=sb.get(e);if(n)var i=n.get(null);else{n=new Map,sb.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var o=s[r];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),i=o)}i&&n.set(null,i)}s=t.instance,o=s.getAttribute("data-precedence"),r=n.get(o)||i,r===i&&n.set(null,s),n.set(o,s),this.count++,i=ib.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var O0={$$typeof:ka,Provider:null,Consumer:null,_currentValue:Pu,_currentValue2:Pu,_threadCount:0};function bQ(e,t,n,i,s,r,o,a){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=e8(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=e8(0),this.hiddenUpdates=e8(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function JO(e,t,n,i,s,r,o,a,l,c,u,d){return e=new bQ(e,t,n,o,a,l,c,d),t=1,r===!0&&(t|=24),r=dr(3,null,null,t),e.current=r,r.stateNode=e,t=Vv(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:t},i9(r),e}function eP(e){return e?(e=Mf,e):Mf}function tP(e,t,n,i,s,r){s=eP(s),i.context===null?i.context=s:i.pendingContext=s,i=rc(t),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=oc(e,i,t),n!==null&&(ts(n,e,t),K1(n,e,t))}function ax(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function m9(e,t){ax(e,t),(e=e.alternate)&&ax(e,t)}function nP(e){if(e.tag===13){var t=_c(e,67108864);t!==null&&ts(t,e,67108864),m9(e,67108864)}}var rb=!0;function yQ(e,t,n,i){var s=je.T;je.T=null;var r=tn.p;try{tn.p=2,p9(e,t,n,i)}finally{tn.p=r,je.T=s}}function EQ(e,t,n,i){var s=je.T;je.T=null;var r=tn.p;try{tn.p=8,p9(e,t,n,i)}finally{tn.p=r,je.T=s}}function p9(e,t,n,i){if(rb){var s=r3(i);if(s===null)x8(e,t,i,ob,n),lx(e,i);else if(wQ(s,e,t,n,i))i.stopPropagation();else if(lx(e,i),t&4&&-1<vQ.indexOf(e)){for(;s!==null;){var r=sg(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var o=du(r.pendingLanes);if(o!==0){var a=r;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-Hs(o);a.entanglements[1]|=l,o&=~l}ia(r),!(gn&6)&&(Z2=Bo()+500,$m(0))}}break;case 13:a=_c(r,2),a!==null&&ts(a,r,2),Q6(),m9(r,2)}if(r=r3(i),r===null&&x8(e,t,i,ob,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else x8(e,t,i,null,n)}}function r3(e){return e=kv(e),U9(e)}var ob=null;function U9(e){if(ob=null,e=Tu(e),e!==null){var t=ng(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=LL(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ob=e,null}function iP(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oZ()){case OL:return 2;case PL:return 8;case O2:case aZ:return 32;case FL:return 268435456;default:return 32}default:return 32}}var o3=!1,cc=null,uc=null,dc=null,P0=new Map,F0=new Map,Xl=[],vQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lx(e,t){switch(e){case"focusin":case"focusout":cc=null;break;case"dragenter":case"dragleave":uc=null;break;case"mouseover":case"mouseout":dc=null;break;case"pointerover":case"pointerout":P0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":F0.delete(t.pointerId)}}function Xg(e,t,n,i,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=sg(t),t!==null&&nP(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function wQ(e,t,n,i,s){switch(t){case"focusin":return cc=Xg(cc,e,t,n,i,s),!0;case"dragenter":return uc=Xg(uc,e,t,n,i,s),!0;case"mouseover":return dc=Xg(dc,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return P0.set(r,Xg(P0.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,F0.set(r,Xg(F0.get(r)||null,e,t,n,i,s)),!0}return!1}function sP(e){var t=Tu(e.target);if(t!==null){var n=ng(t);if(n!==null){if(t=n.tag,t===13){if(t=LL(n),t!==null){e.blockedOn=t,pZ(e.priority,function(){if(n.tag===13){var i=Vs(),s=_c(n,i);s!==null&&ts(s,n,i),m9(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function JU(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=r3(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);T7=i,n.target.dispatchEvent(i),T7=null}else return t=sg(n),t!==null&&nP(t),e.blockedOn=n,!1;t.shift()}return!0}function cx(e,t,n){JU(e)&&n.delete(t)}function _Q(){o3=!1,cc!==null&&JU(cc)&&(cc=null),uc!==null&&JU(uc)&&(uc=null),dc!==null&&JU(dc)&&(dc=null),P0.forEach(cx),F0.forEach(cx)}function qp(e,t){e.blockedOn===t&&(e.blockedOn=null,o3||(o3=!0,ii.unstable_scheduleCallback(ii.unstable_NormalPriority,_Q)))}var Qp=null;function ux(e){Qp!==e&&(Qp=e,ii.unstable_scheduleCallback(ii.unstable_NormalPriority,function(){Qp===e&&(Qp=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],s=e[t+2];if(typeof i!="function"){if(U9(i||n)===null)continue;break}var r=sg(n);r!==null&&(e.splice(t,3),t-=3,L7(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function B0(e){function t(l){return qp(l,e)}cc!==null&&qp(cc,e),uc!==null&&qp(uc,e),dc!==null&&qp(dc,e),P0.forEach(t),F0.forEach(t);for(var n=0;n<Xl.length;n++){var i=Xl[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Xl.length&&(n=Xl[0],n.blockedOn===null);)sP(n),n.blockedOn===null&&Xl.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],o=s[Es]||null;if(typeof r=="function")o||ux(n);else if(o){var a=null;if(r&&r.hasAttribute("formAction")){if(s=r,o=r[Es]||null)a=o.formAction;else if(U9(s)!==null)continue}else a=o.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),ux(n)}}}function b9(e){this._internalRoot=e}t5.prototype.render=b9.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));var n=t.current,i=Vs();tP(n,i,e,t,null,null)};t5.prototype.unmount=b9.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;e.tag===0&&Qf(),tP(e.current,2,null,e,null,null),Q6(),t[ig]=null}};function t5(e){this._internalRoot=e}t5.prototype.unstable_scheduleHydration=function(e){if(e){var t=GL();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xl.length&&t!==0&&t<Xl[n].priority;n++);Xl.splice(n,0,e),n===0&&sP(e)}};var dx=AL.version;if(dx!=="19.0.0")throw Error(te(527,dx,"19.0.0"));tn.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=iZ(t),e=e!==null?NL(e):null,e=e===null?null:e.stateNode,e};var TQ={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:je,findFiberByHostInstance:Tu,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jp.isDisabled&&Jp.supportsFiber)try{Lm=Jp.inject(TQ),zs=Jp}catch{}}z6.createRoot=function(e,t){if(!ML(e))throw Error(te(299));var n=!1,i="",s=tO,r=nO,o=iO,a=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(a=t.unstable_transitionCallbacks)),t=JO(e,1,!1,null,null,n,i,s,r,o,a,null),e[ig]=t.current,f9(e.nodeType===8?e.parentNode:e),new b9(t)};z6.hydrateRoot=function(e,t,n){if(!ML(e))throw Error(te(299));var i=!1,s="",r=tO,o=nO,a=iO,l=null,c=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(c=n.formState)),t=JO(e,1,!0,t,n??null,i,s,r,o,a,l,c),t.context=eP(null),n=t.current,i=Vs(),s=rc(i),s.callback=null,oc(n,s,i),t.current.lanes=i,Om(t,i),ia(t),e[ig]=t.current,f9(e),new t5(t)};z6.version="19.0.0";function rP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rP)}catch(e){console.error(e)}}rP(),_L.exports=z6;var SQ=_L.exports;const IQ="modulepreload",xQ=function(e){return"/"+e},fx={},be=function(t,n,i){let s=Promise.resolve();return n&&n.length>0&&(document.getElementsByTagName("link"),s=Promise.all(n.map(r=>{if(r=xQ(r),r in fx)return;fx[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":IQ,o||(l.as="script",l.crossOrigin=""),l.href=r,document.head.appendChild(l),o)return new Promise((c,u)=>{l.addEventListener("load",c),l.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${r}`)))})}))),s.then(()=>t()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})};function CQ(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:s,onRegisteredSW:r,onRegisterError:o}=e;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await be(()=>import("./workbox-window.prod.es5-B9K5rw8f.js"),__vite__mapDeps([])).then(({Workbox:d})=>new d("/sw.js",{scope:"/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i==null||i()}),a.register({immediate:t}).then(d=>{r?r("/sw.js",d):s==null||s(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}const Dt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Ft=globalThis,Dd=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,$u="9.0.1";function n5(){return i5(Ft),Ft}function i5(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||$u,t[$u]=t[$u]||{}}function s5(e,t,n=Ft){const i=n.__SENTRY__=n.__SENTRY__||{},s=i[$u]=i[$u]||{};return s[e]||(s[e]=t())}const AQ="Sentry Logger ",ab=["debug","info","warn","error","log","assert","trace"],lb={};function lg(e){if(!("console"in Ft))return e();const t=Ft.console,n={},i=Object.keys(lb);i.forEach(s=>{const r=lb[s];n[s]=t[s],t[s]=r});try{return e()}finally{i.forEach(s=>{t[s]=n[s]})}}function MQ(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Dd?ab.forEach(n=>{t[n]=(...i)=>{e&&lg(()=>{Ft.console[n](`${AQ}[${n}]:`,...i)})}}):ab.forEach(n=>{t[n]=()=>{}}),t}const Be=s5("logger",MQ),oP=50,nd="?",hx=/\(error: (.*)\)/,gx=/captureMessage|captureException/;function aP(...e){const t=e.sort((n,i)=>n[0]-i[0]).map(n=>n[1]);return(n,i=0,s=0)=>{const r=[],o=n.split(`
`);for(let a=i;a<o.length;a++){const l=o[a];if(l.length>1024)continue;const c=hx.test(l)?l.replace(hx,"$1"):l;if(!c.match(/\S*Error: /)){for(const u of t){const d=u(c);if(d){r.push(d);break}}if(r.length>=oP+s)break}}return kQ(r.slice(s))}}function RQ(e){return Array.isArray(e)?aP(...e):e}function kQ(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(eU(t).function||"")&&t.pop(),t.reverse(),gx.test(eU(t).function||"")&&(t.pop(),gx.test(eU(t).function||"")&&t.pop()),t.slice(0,oP).map(n=>({...n,filename:n.filename||eU(t).filename,function:n.function||nd}))}function eU(e){return e[e.length-1]||{}}const M8="<anonymous>";function xc(e){try{return!e||typeof e!="function"?M8:e.name||M8}catch{return M8}}function mx(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(i=>{i.stacktrace.frames&&n.push(...i.stacktrace.frames)}),n}catch{return}}}const e2={},px={};function Ld(e,t){e2[e]=e2[e]||[],e2[e].push(t)}function Nd(e,t){if(!px[e]){px[e]=!0;try{t()}catch(n){Dd&&Be.error(`Error while instrumenting ${e}`,n)}}}function Jr(e,t){const n=e&&e2[e];if(n)for(const i of n)try{i(t)}catch(s){Dd&&Be.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${xc(i)}
Error:`,s)}}let R8=null;function DQ(e){const t="error";Ld(t,e),Nd(t,LQ)}function LQ(){R8=Ft.onerror,Ft.onerror=function(e,t,n,i,s){return Jr("error",{column:i,error:s,line:n,msg:e,url:t}),R8?R8.apply(this,arguments):!1},Ft.onerror.__SENTRY_INSTRUMENTED__=!0}let k8=null;function NQ(e){const t="unhandledrejection";Ld(t,e),Nd(t,OQ)}function OQ(){k8=Ft.onunhandledrejection,Ft.onunhandledrejection=function(e){return Jr("unhandledrejection",e),k8?k8.apply(this,arguments):!0},Ft.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const lP=Object.prototype.toString;function y9(e){switch(lP.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return id(e,Error)}}function cg(e,t){return lP.call(e)===`[object ${t}]`}function cP(e){return cg(e,"ErrorEvent")}function Ux(e){return cg(e,"DOMError")}function PQ(e){return cg(e,"DOMException")}function za(e){return cg(e,"String")}function E9(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function v9(e){return e===null||E9(e)||typeof e!="object"&&typeof e!="function"}function wh(e){return cg(e,"Object")}function r5(e){return typeof Event<"u"&&id(e,Event)}function FQ(e){return typeof Element<"u"&&id(e,Element)}function BQ(e){return cg(e,"RegExp")}function o5(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function zQ(e){return wh(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function id(e,t){try{return e instanceof t}catch{return!1}}function uP(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}const w9=Ft,HQ=80;function dP(e,t={}){if(!e)return"<unknown>";try{let n=e;const i=5,s=[];let r=0,o=0;const a=" > ",l=a.length;let c;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||HQ;for(;n&&r++<i&&(c=VQ(n,u),!(c==="html"||r>1&&o+s.length*l+c.length>=d));)s.push(c),o+=c.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function VQ(e,t){const n=e,i=[];if(!(n!=null&&n.tagName))return"";if(w9.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}i.push(n.tagName.toLowerCase());const s=t!=null&&t.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(s!=null&&s.length)s.forEach(o=>{i.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&i.push(`#${n.id}`);const o=n.className;if(o&&za(o)){const a=o.split(/\s+/);for(const l of a)i.push(`.${l}`)}}const r=["aria-label","type","name","title","alt"];for(const o of r){const a=n.getAttribute(o);a&&i.push(`[${o}="${a}"]`)}return i.join("")}function _9(){try{return w9.document.location.href}catch{return""}}function $Q(e){if(!w9.HTMLElement)return null;let t=e;const n=5;for(let i=0;i<n;i++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Jf(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function cb(e,t){if(!Array.isArray(e))return"";const n=[];for(let i=0;i<e.length;i++){const s=e[i];try{uP(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function GQ(e,t,n=!1){return za(e)?BQ(t)?t.test(e):za(t)?n?e===t:e.includes(t):!1:!1}function a5(e,t=[],n=!1){return t.some(i=>GQ(e,i,n))}function Os(e,t,n){if(!(t in e))return;const i=e[t],s=n(i);typeof s=="function"&&fP(s,i);try{e[t]=s}catch{Dd&&Be.log(`Failed to replace method "${t}" in object`,e)}}function sd(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{Dd&&Be.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function fP(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,sd(e,"__sentry_original__",t)}catch{}}function T9(e){return e.__sentry_original__}function hP(e){if(y9(e))return{message:e.message,name:e.name,stack:e.stack,...yx(e)};if(r5(e)){const t={type:e.type,target:bx(e.target),currentTarget:bx(e.currentTarget),...yx(e)};return typeof CustomEvent<"u"&&id(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function bx(e){try{return FQ(e)?dP(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function yx(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function XQ(e,t=40){const n=Object.keys(hP(e));n.sort();const i=n[0];if(!i)return"[object has no keys]";if(i.length>=t)return Jf(i,t);for(let s=n.length;s>0;s--){const r=n.slice(0,s).join(", ");if(!(r.length>t))return s===n.length?r:Jf(r,t)}return""}function Ps(e){return a3(e,new Map)}function a3(e,t){if(jQ(e)){const n=t.get(e);if(n!==void 0)return n;const i={};t.set(e,i);for(const s of Object.getOwnPropertyNames(e))typeof e[s]<"u"&&(i[s]=a3(e[s],t));return i}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const i=[];return t.set(e,i),e.forEach(s=>{i.push(a3(s,t))}),i}return e}function jQ(e){if(!wh(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const gP=1e3;function jm(){return Date.now()/gP}function YQ(){const{performance:e}=Ft;if(!(e!=null&&e.now))return jm;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/gP}const Ha=YQ();function Ur(){const e=Ft,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t!=null&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t!=null&&t.getRandomValues&&(n=()=>{const i=new Uint8Array(1);return t.getRandomValues(i),i[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,i=>(i^(n()&15)>>i/4).toString(16))}function mP(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0]}function Pl(e){const{message:t,event_id:n}=e;if(t)return t;const i=mP(e);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||n||"<unknown>":n||"<unknown>"}function l3(e,t,n){const i=e.exception=e.exception||{},s=i.values=i.values||[],r=s[0]=s[0]||{};r.value||(r.value=t||""),r.type||(r.type="Error")}function rd(e,t){const n=mP(e);if(!n)return;const i={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...i,...s,...t},t&&"data"in t){const r={...s==null?void 0:s.data,...t.data};n.mechanism.data=r}}function Ex(e){if(WQ(e))return!0;try{sd(e,"__sentry_captured__",!0)}catch{}return!1}function WQ(e){try{return e.__sentry_captured__}catch{}}var Ua;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const i=2;e[e.REJECTED=i]="REJECTED"})(Ua||(Ua={}));function od(e){return new Cc(t=>{t(e)})}function ub(e){return new Cc((t,n)=>{n(e)})}class Cc{constructor(t){this._state=Ua.PENDING,this._handlers=[],this._runExecutor(t)}then(t,n){return new Cc((i,s)=>{this._handlers.push([!1,r=>{if(!t)i(r);else try{i(t(r))}catch(o){s(o)}},r=>{if(!n)s(r);else try{i(n(r))}catch(o){s(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new Cc((n,i)=>{let s,r;return this.then(o=>{r=!1,s=o,t&&t()},o=>{r=!0,s=o,t&&t()}).then(()=>{if(r){i(s);return}n(s)})})}_executeHandlers(){if(this._state===Ua.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Ua.RESOLVED&&n[1](this._value),this._state===Ua.REJECTED&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(r,o)=>{if(this._state===Ua.PENDING){if(o5(o)){o.then(i,s);return}this._state=r,this._value=o,this._executeHandlers()}},i=r=>{n(Ua.RESOLVED,r)},s=r=>{n(Ua.REJECTED,r)};try{t(i,s)}catch(r){s(r)}}}function KQ(e){const t=Ha(),n={sid:Ur(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>qQ(n)};return e&&_h(n,e),n}function _h(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Ha(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Ur()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function ZQ(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),_h(e,n)}function qQ(e){return Ps({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}function vx(){return Ur()}function pP(){return Ur().substring(16)}function Ym(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const i={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=Ym(i[s],t[s],n-1));return i}const c3="_sentrySpan";function wx(e,t){t?sd(e,c3,t):delete e[c3]}function _x(e){return e[c3]}const QQ=100;class Go{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:vx(),sampleRand:Math.random()}}clone(){const t=new Go;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,wx(t,_x(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&_h(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,i=n instanceof Go?n.getScopeData():wh(n)?t:void 0,{tags:s,extra:r,user:o,contexts:a,level:l,fingerprint:c=[],propagationContext:u}=i||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...r},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),l&&(this._level=l),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,wx(this,void 0),this._attachments=[],this.setPropagationContext({traceId:vx(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){var r;const i=typeof n=="number"?n:QQ;if(i<=0)return this;const s={timestamp:jm(),...t};return this._breadcrumbs.push(s),this._breadcrumbs.length>i&&(this._breadcrumbs=this._breadcrumbs.slice(-i),(r=this._client)==null||r.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:_x(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Ym(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const i=(n==null?void 0:n.event_id)||Ur();if(!this._client)return Be.warn("No client configured on scope - will not capture exception!"),i;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:i},this),i}captureMessage(t,n,i){const s=(i==null?void 0:i.event_id)||Ur();if(!this._client)return Be.warn("No client configured on scope - will not capture message!"),s;const r=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:r,...i,event_id:s},this),s}captureEvent(t,n){const i=(n==null?void 0:n.event_id)||Ur();return this._client?(this._client.captureEvent(t,{...n,event_id:i},this),i):(Be.warn("No client configured on scope - will not capture event!"),i)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function JQ(){return s5("defaultCurrentScope",()=>new Go)}function eJ(){return s5("defaultIsolationScope",()=>new Go)}class tJ{constructor(t,n){let i;t?i=t:i=new Go;let s;n?s=n:s=new Go,this._stack=[{scope:i}],this._isolationScope=s}withScope(t){const n=this._pushScope();let i;try{i=t(n)}catch(s){throw this._popScope(),s}return o5(i)?i.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),i)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Th(){const e=n5(),t=i5(e);return t.stack=t.stack||new tJ(JQ(),eJ())}function nJ(e){return Th().withScope(e)}function iJ(e,t){const n=Th();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Tx(e){return Th().withScope(()=>e(Th().getIsolationScope()))}function sJ(){return{withIsolationScope:Tx,withScope:nJ,withSetScope:iJ,withSetIsolationScope:(e,t)=>Tx(t),getCurrentScope:()=>Th().getScope(),getIsolationScope:()=>Th().getIsolationScope()}}function S9(e){const t=i5(e);return t.acs?t.acs:sJ()}function ml(){const e=n5();return S9(e).getCurrentScope()}function Wm(){const e=n5();return S9(e).getIsolationScope()}function rJ(){return s5("globalScope",()=>new Go)}function I9(...e){const t=n5(),n=S9(t);if(e.length===2){const[i,s]=e;return i?n.withSetScope(i,s):n.withScope(s)}return n.withScope(e[0])}function Gi(){return ml().getClient()}function oJ(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:i,propagationSpanId:s}=t;return Ps({trace_id:n,span_id:s||pP(),parent_span_id:i})}const aJ="sentry.source",lJ="sentry.sample_rate",cJ="sentry.op",uJ="sentry.origin",UP="sentry.profile_id",bP="sentry.exclusive_time",dJ=0,fJ=1,hJ="_sentryScope",gJ="_sentryIsolationScope";function yP(e){return{scope:e[hJ],isolationScope:e[gJ]}}function mJ(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const pJ="sentry-",UJ=/^sentry-/;function bJ(e){const t=yJ(e);if(!t)return;const n=Object.entries(t).reduce((i,[s,r])=>{if(s.match(UJ)){const o=s.slice(pJ.length);i[o]=r}return i},{});if(Object.keys(n).length>0)return n}function yJ(e){if(!(!e||!za(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const i=Sx(n);return Object.entries(i).forEach(([s,r])=>{t[s]=r}),t},{}):Sx(e)}function Sx(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,i])=>(n&&i&&(t[n]=i),t),{})}const EJ=1;let Ix=!1;function vJ(e){const{spanId:t,traceId:n,isRemote:i}=e.spanContext(),s=i?t:x9(e).parent_span_id,r=yP(e).scope,o=i?(r==null?void 0:r.getPropagationContext().propagationSpanId)||pP():t;return Ps({parent_span_id:s,span_id:o,trace_id:n})}function xx(e){return typeof e=="number"?Cx(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Cx(e.getTime()):Ha()}function Cx(e){return e>9999999999?e/1e3:e}function x9(e){if(_J(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(wJ(e)){const{attributes:i,startTime:s,name:r,endTime:o,parentSpanId:a,status:l}=e;return Ps({span_id:t,trace_id:n,data:i,description:r,parent_span_id:a,start_timestamp:xx(s),timestamp:xx(o)||void 0,status:SJ(l),op:i[cJ],origin:i[uJ]})}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function wJ(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function _J(e){return typeof e.getSpanJSON=="function"}function TJ(e){const{traceFlags:t}=e.spanContext();return t===EJ}function SJ(e){if(!(!e||e.code===dJ))return e.code===fJ?"ok":e.message||"unknown_error"}const IJ="_sentryRootSpan";function EP(e){return e[IJ]||e}function Ax(){Ix||(lg(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),Ix=!0)}function xJ(e){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||((n=Gi())==null?void 0:n.getOptions());return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const C9="production",CJ="_frozenDsc";function vP(e,t){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},s=Ps({environment:n.environment||C9,release:n.release,public_key:i,trace_id:e});return t.emit("createDsc",s),s}function AJ(e,t){const n=t.getPropagationContext();return n.dsc||vP(n.traceId,e)}function MJ(e){var m;const t=Gi();if(!t)return{};const n=EP(e),i=x9(n),s=i.data,r=n.spanContext().traceState,o=(r==null?void 0:r.get("sentry.sample_rate"))??s[lJ];function a(p){return(typeof o=="number"||typeof o=="string")&&(p.sample_rate=`${o}`),p}const l=n[CJ];if(l)return a(l);const c=r==null?void 0:r.get("sentry.dsc"),u=c&&bJ(c);if(u)return a(u);const d=vP(e.spanContext().traceId,t),f=s[aJ],h=i.description;return f!=="url"&&h&&(d.transaction=h),xJ()&&(d.sampled=String(TJ(n)),d.sample_rand=(r==null?void 0:r.get("sentry.sample_rand"))??((m=yP(n).scope)==null?void 0:m.getPropagationContext().sampleRand.toString())),a(d),t.emit("createDsc",d,n),d}const RJ=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function kJ(e){return e==="http"||e==="https"}function A9(e,t=!1){const{host:n,path:i,pass:s,port:r,projectId:o,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&s?`:${s}`:""}@${n}${r?`:${r}`:""}/${i&&`${i}/`}${o}`}function DJ(e){const t=RJ.exec(e);if(!t){lg(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,i,s="",r="",o="",a=""]=t.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const d=c.match(/^\d+/);d&&(c=d[0])}return wP({host:r,pass:s,path:l,projectId:c,port:o,protocol:n,publicKey:i})}function wP(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function LJ(e){if(!Dd)return!0;const{port:t,projectId:n,protocol:i}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(Be.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?kJ(i)?t&&isNaN(parseInt(t,10))?(Be.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(Be.error(`Invalid Sentry Dsn: Invalid protocol ${i}`),!1):(Be.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function NJ(e){const t=typeof e=="string"?DJ(e):wP(e);if(!(!t||!LJ(t)))return t}function ba(e,t=100,n=1/0){try{return u3("",e,t,n)}catch(i){return{ERROR:`**non-serializable** (${i})`}}}function _P(e,t=3,n=100*1024){const i=ba(e,t);return BJ(i)>n?_P(e,t-1,n):i}function u3(e,t,n=1/0,i=1/0,s=zJ()){const[r,o]=s;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=OJ(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const l=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(l===0)return a.replace("object ","");if(r(t))return"[Circular ~]";const c=t;if(c&&typeof c.toJSON=="function")try{const h=c.toJSON();return u3("",h,l-1,i,s)}catch{}const u=Array.isArray(t)?[]:{};let d=0;const f=hP(t);for(const h in f){if(!Object.prototype.hasOwnProperty.call(f,h))continue;if(d>=i){u[h]="[MaxProperties ~]";break}const m=f[h];u[h]=u3(h,m,l-1,i,s),d++}return o(t),u}function OJ(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(uP(t))return"[VueViewModel]";if(zQ(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${xc(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=PJ(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function PJ(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function FJ(e){return~-encodeURI(e).split(/%..|./).length}function BJ(e){return FJ(JSON.stringify(e))}function zJ(){const e=new WeakSet;function t(i){return e.has(i)?!0:(e.add(i),!1)}function n(i){e.delete(i)}return[t,n]}function l5(e,t=[]){return[e,t]}function HJ(e,t){const[n,i]=e;return[n,[...i,t]]}function Mx(e,t){const n=e[1];for(const i of n){const s=i[0].type;if(t(i,s))return!0}return!1}function d3(e){const t=i5(Ft);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function VJ(e){const[t,n]=e;let i=JSON.stringify(t);function s(r){typeof i=="string"?i=typeof r=="string"?i+r:[d3(i),r]:i.push(typeof r=="string"?d3(r):r)}for(const r of n){const[o,a]=r;if(s(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)s(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(ba(a))}s(l)}}return typeof i=="string"?i:$J(i)}function $J(e){const t=e.reduce((s,r)=>s+r.length,0),n=new Uint8Array(t);let i=0;for(const s of e)n.set(s,i),i+=s.length;return n}function GJ(e){const t=typeof e.data=="string"?d3(e.data):e.data;return[Ps({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const XJ={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security"};function Rx(e){return XJ[e]}function TP(e){if(!(e!=null&&e.sdk))return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function jJ(e,t,n,i){var r;const s=(r=e.sdkProcessingMetadata)==null?void 0:r.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&i&&{dsn:A9(i)},...s&&{trace:Ps({...s})}}}function YJ(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function WJ(e,t,n,i){const s=TP(n),r={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!i&&t&&{dsn:A9(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return l5(r,[o])}function KJ(e,t,n,i){const s=TP(n),r=e.type&&e.type!=="replay_event"?e.type:"event";YJ(e,n==null?void 0:n.sdk);const o=jJ(e,s,i,t);return delete e.sdkProcessingMetadata,l5(o,[[{type:r},e]])}function f3(e,t,n,i=0){return new Cc((s,r)=>{const o=e[i];if(t===null||typeof o!="function")s(t);else{const a=o({...t},n);Dt&&o.id&&a===null&&Be.log(`Event processor "${o.id}" dropped event`),o5(a)?a.then(l=>f3(e,l,n,i+1).then(s)).then(null,r):f3(e,a,n,i+1).then(s).then(null,r)}})}let tU,kx,nU;function ZJ(e){const t=Ft._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return nU&&n.length===kx||(kx=n.length,nU=n.reduce((i,s)=>{tU||(tU={});const r=tU[s];if(r)i[r[0]]=r[1];else{const o=e(s);for(let a=o.length-1;a>=0;a--){const l=o[a],c=l==null?void 0:l.filename,u=t[s];if(c&&u){i[c]=u,tU[s]=[c,u];break}}}return i},{})),nU}function qJ(e,t){const{fingerprint:n,span:i,breadcrumbs:s,sdkProcessingMetadata:r}=t;QJ(e,t),i&&tee(e,i),nee(e,n),JJ(e,s),eee(e,r)}function Dx(e,t){const{extra:n,tags:i,user:s,contexts:r,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:f,transactionName:h,span:m}=t;iU(e,"extra",n),iU(e,"tags",i),iU(e,"user",s),iU(e,"contexts",r),e.sdkProcessingMetadata=Ym(e.sdkProcessingMetadata,a,2),o&&(e.level=o),h&&(e.transactionName=h),m&&(e.span=m),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...f}}function iU(e,t,n){e[t]=Ym(e[t],n,1)}function QJ(e,t){const{extra:n,tags:i,user:s,contexts:r,level:o,transactionName:a}=t,l=Ps(n);Object.keys(l).length&&(e.extra={...l,...e.extra});const c=Ps(i);Object.keys(c).length&&(e.tags={...c,...e.tags});const u=Ps(s);Object.keys(u).length&&(e.user={...u,...e.user});const d=Ps(r);Object.keys(d).length&&(e.contexts={...d,...e.contexts}),o&&(e.level=o),a&&e.type!=="transaction"&&(e.transaction=a)}function JJ(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function eee(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function tee(e,t){e.contexts={trace:vJ(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:MJ(t),...e.sdkProcessingMetadata};const n=EP(t),i=x9(n).description;i&&!e.transaction&&e.type==="transaction"&&(e.transaction=i)}function nee(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function iee(e,t,n,i,s,r){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,l={...t,event_id:t.event_id||n.event_id||Ur(),timestamp:t.timestamp||jm()},c=n.integrations||e.integrations.map(U=>U.name);see(l,e),aee(l,c),s&&s.emit("applyFrameMetadata",t),t.type===void 0&&ree(l,e.stackParser);const u=cee(i,n.captureContext);n.mechanism&&rd(l,n.mechanism);const d=s?s.getEventProcessors():[],f=rJ().getScopeData();if(r){const U=r.getScopeData();Dx(f,U)}if(u){const U=u.getScopeData();Dx(f,U)}const h=[...n.attachments||[],...f.attachments];h.length&&(n.attachments=h),qJ(l,f);const m=[...d,...f.eventProcessors];return f3(m,l,n).then(U=>(U&&oee(U),typeof o=="number"&&o>0?lee(U,o,a):U))}function see(e,t){var l,c;const{environment:n,release:i,dist:s,maxValueLength:r=250}=t;e.environment=e.environment||n||C9,!e.release&&i&&(e.release=i),!e.dist&&s&&(e.dist=s),e.message&&(e.message=Jf(e.message,r));const o=(c=(l=e.exception)==null?void 0:l.values)==null?void 0:c[0];o!=null&&o.value&&(o.value=Jf(o.value,r));const a=e.request;a!=null&&a.url&&(a.url=Jf(a.url,r))}function ree(e,t){var i,s;const n=ZJ(t);(s=(i=e.exception)==null?void 0:i.values)==null||s.forEach(r=>{var o,a;(a=(o=r.stacktrace)==null?void 0:o.frames)==null||a.forEach(l=>{l.filename&&(l.debug_id=n[l.filename])})})}function oee(e){var i,s;const t={};if((s=(i=e.exception)==null?void 0:i.values)==null||s.forEach(r=>{var o,a;(a=(o=r.stacktrace)==null?void 0:o.frames)==null||a.forEach(l=>{l.debug_id&&(l.abs_path?t[l.abs_path]=l.debug_id:l.filename&&(t[l.filename]=l.debug_id),delete l.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([r,o])=>{n.push({type:"sourcemap",code_file:r,debug_id:o})})}function aee(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function lee(e,t,n){var s,r;if(!e)return null;const i={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:ba(o.data,t,n)}}))},...e.user&&{user:ba(e.user,t,n)},...e.contexts&&{contexts:ba(e.contexts,t,n)},...e.extra&&{extra:ba(e.extra,t,n)}};return(s=e.contexts)!=null&&s.trace&&i.contexts&&(i.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(i.contexts.trace.data=ba(e.contexts.trace.data,t,n))),e.spans&&(i.spans=e.spans.map(o=>({...o,...o.data&&{data:ba(o.data,t,n)}}))),(r=e.contexts)!=null&&r.flags&&i.contexts&&(i.contexts.flags=ba(e.contexts.flags,3,n)),i}function cee(e,t){if(!t)return e;const n=e?e.clone():new Go;return n.update(t),n}function uee(e){if(e)return dee(e)?{captureContext:e}:hee(e)?{captureContext:e}:e}function dee(e){return e instanceof Go||typeof e=="function"}const fee=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function hee(e){return Object.keys(e).some(t=>fee.includes(t))}function M9(e,t){return ml().captureException(e,uee(t))}function Lx(e,t){const n=typeof t=="string"?t:void 0,i=typeof t!="string"?{captureContext:t}:void 0;return ml().captureMessage(e,n,i)}function SP(e,t){return ml().captureEvent(e,t)}function Nx(e){const t=Wm(),n=ml(),{userAgent:i}=Ft.navigator||{},s=KQ({user:n.getUser()||t.getUser(),...i&&{userAgent:i},...e}),r=t.getSession();return(r==null?void 0:r.status)==="ok"&&_h(r,{status:"exited"}),IP(),t.setSession(s),s}function IP(){const e=Wm(),n=ml().getSession()||e.getSession();n&&ZQ(n),xP(),e.setSession()}function xP(){const e=Wm(),t=Gi(),n=e.getSession();n&&t&&t.captureSession(n)}function Ox(e=!1){if(e){IP();return}xP()}const gee="7";function mee(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function pee(e){return`${mee(e)}${e.projectId}/envelope/`}function Uee(e,t){const n={sentry_version:gee};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function bee(e,t,n){return t||`${pee(e)}?${Uee(e,n)}`}const Px=[];function yee(e){const t={};return e.forEach(n=>{const{name:i}=n,s=t[i];s&&!s.isDefaultInstance&&n.isDefaultInstance||(t[i]=n)}),Object.values(t)}function Eee(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(s=>{s.isDefaultInstance=!0});let i;if(Array.isArray(n))i=[...t,...n];else if(typeof n=="function"){const s=n(t);i=Array.isArray(s)?s:[s]}else i=t;return yee(i)}function vee(e,t){const n={};return t.forEach(i=>{i&&CP(e,i,n)}),n}function Fx(e,t){for(const n of t)n!=null&&n.afterAllSetup&&n.afterAllSetup(e)}function CP(e,t,n){if(n[t.name]){Dt&&Be.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,Px.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),Px.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const i=t.preprocessEvent.bind(t);e.on("preprocessEvent",(s,r)=>i(s,r,e))}if(typeof t.processEvent=="function"){const i=t.processEvent.bind(t),s=Object.assign((r,o)=>i(r,o,e),{id:t.name});e.addEventProcessor(s)}Dt&&Be.log(`Integration installed: ${t.name}`)}function wee(e,t,n){const i=[{type:"client_report"},{timestamp:jm(),discarded_events:e}];return l5(t?{dsn:t}:{},[i])}class $r extends Error{constructor(t,n="warn"){super(t),this.message=t,this.logLevel=n}}function AP(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n!=null&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function _ee(e){var l;const{trace_id:t,parent_span_id:n,span_id:i,status:s,origin:r,data:o,op:a}=((l=e.contexts)==null?void 0:l.trace)??{};return Ps({data:o??{},description:e.transaction,op:a,parent_span_id:n,span_id:i??"",start_timestamp:e.start_timestamp??0,status:s,timestamp:e.timestamp,trace_id:t??"",origin:r,profile_id:o==null?void 0:o[UP],exclusive_time:o==null?void 0:o[bP],measurements:e.measurements,is_segment:!0})}function Tee(e){const t={type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[UP]:e.profile_id},...e.exclusive_time&&{[bP]:e.exclusive_time}}}},measurements:e.measurements};return Ps(t)}const Bx="Not capturing exception because it's already been captured.",zx="Discarded session because of missing or non-string release";class See{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=NJ(t.dsn):Dt&&Be.warn("No DSN provided, client will not send events."),this._dsn){const n=bee(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,i){const s=Ur();if(Ex(t))return Dt&&Be.log(Bx),s;const r={event_id:s,...n};return this._process(this.eventFromException(t,r).then(o=>this._captureEvent(o,r,i))),r.event_id}captureMessage(t,n,i,s){const r={event_id:Ur(),...i},o=E9(t)?t:String(t),a=v9(t)?this.eventFromMessage(o,n,r):this.eventFromException(t,r);return this._process(a.then(l=>this._captureEvent(l,r,s))),r.event_id}captureEvent(t,n,i){const s=Ur();if(n!=null&&n.originalException&&Ex(n.originalException))return Dt&&Be.log(Bx),s;const r={event_id:s,...n},o=t.sdkProcessingMetadata||{},a=o.capturedSpanScope,l=o.capturedSpanIsolationScope;return this._process(this._captureEvent(t,r,a||i,l)),r.event_id}captureSession(t){this.sendSession(t),_h(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(i=>n.flush(t).then(s=>i&&s))):od(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];CP(this,t,this._integrations),n||Fx(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let i=KJ(t,this._dsn,this._options._metadata,this._options.tunnel);for(const r of n.attachments||[])i=HJ(i,GJ(r));const s=this.sendEnvelope(i);s&&s.then(r=>this.emit("afterSendEvent",t,r),null)}sendSession(t){const{release:n,environment:i=C9}=this._options;if("aggregates"in t){const r=t.attrs||{};if(!r.release&&!n){Dt&&Be.warn(zx);return}r.release=r.release||n,r.environment=r.environment||i,t.attrs=r}else{if(!t.release&&!n){Dt&&Be.warn(zx);return}t.release=t.release||n,t.environment=t.environment||i}this.emit("beforeSendSession",t);const s=WJ(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(t,n,i=1){if(this._options.sendClientReports){const s=`${t}:${n}`;Dt&&Be.log(`Recording outcome: "${s}"${i>1?` (${i} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+i}}on(t,n){const i=this._hooks[t]=this._hooks[t]||[];return i.push(n),()=>{const s=i.indexOf(n);s>-1&&i.splice(s,1)}}emit(t,...n){const i=this._hooks[t];i&&i.forEach(s=>s(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(Dt&&Be.error("Error while sending envelope:",n),n)):(Dt&&Be.error("Transport disabled"),od({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=vee(this,t),Fx(this,t)}_updateSessionFromEvent(t,n){var l;let i=n.level==="fatal",s=!1;const r=(l=n.exception)==null?void 0:l.values;if(r){s=!0;for(const c of r){const u=c.mechanism;if((u==null?void 0:u.handled)===!1){i=!0;break}}}const o=t.status==="ok";(o&&t.errors===0||o&&i)&&(_h(t,{...i&&{status:"crashed"},errors:t.errors||Number(s||i)}),this.captureSession(t))}_isClientDoneProcessing(t){return new Cc(n=>{let i=0;const s=1,r=setInterval(()=>{this._numProcessing==0?(clearInterval(r),n(!0)):(i+=s,t&&i>=t&&(clearInterval(r),n(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,i,s){const r=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&(o!=null&&o.length)&&(n.integrations=o),this.emit("preprocessEvent",t,n),t.type||s.setLastEventId(t.event_id||n.event_id),iee(r,t,n,i,this,s).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:oJ(i),...a.contexts};const l=AJ(this,i);return a.sdkProcessingMetadata={dynamicSamplingContext:l,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},i=ml(),s=Wm()){return Dt&&h3(t)&&Be.log(`Captured error event \`${AP(t)[0]||"<unknown>"}\``),this._processEvent(t,n,i,s).then(r=>r.event_id,r=>{Dt&&(r instanceof $r&&r.logLevel==="log"?Be.log(r.message):Be.warn(r))})}_processEvent(t,n,i,s){const r=this.getOptions(),{sampleRate:o}=r,a=MP(t),l=h3(t),c=t.type||"error",u=`before send for type \`${c}\``,d=typeof o>"u"?void 0:mJ(o);if(l&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error"),ub(new $r(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const f=c==="replay_event"?"replay":c;return this._prepareEvent(t,n,i,s).then(h=>{if(h===null)throw this.recordDroppedEvent("event_processor",f),new $r("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return h;const p=xee(this,r,h,n);return Iee(p,u)}).then(h=>{var U;if(h===null){if(this.recordDroppedEvent("before_send",f),a){const E=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",E)}throw new $r(`${u} returned \`null\`, will not send event.`,"log")}const m=i.getSession()||s.getSession();if(l&&m&&this._updateSessionFromEvent(m,h),a){const y=((U=h.sdkProcessingMetadata)==null?void 0:U.spanCountBeforeProcessing)||0,E=h.spans?h.spans.length:0,v=y-E;v>0&&this.recordDroppedEvent("before_send","span",v)}const p=h.transaction_info;if(a&&p&&h.transaction!==t.transaction){const y="custom";h.transaction_info={...p,source:y}}return this.sendEvent(h,n),h}).then(null,h=>{throw h instanceof $r?h:(this.captureException(h,{data:{__sentry__:!0},originalException:h}),new $r(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${h}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,i])=>{const[s,r]=n.split(":");return{reason:s,category:r,quantity:i}})}_flushOutcomes(){Dt&&Be.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){Dt&&Be.log("No outcomes to send");return}if(!this._dsn){Dt&&Be.log("No dsn provided, will not send outcomes");return}Dt&&Be.log("Sending outcomes:",t);const n=wee(t,this._options.tunnel&&A9(this._dsn));this.sendEnvelope(n)}}function Iee(e,t){const n=`${t} must return \`null\` or a valid event.`;if(o5(e))return e.then(i=>{if(!wh(i)&&i!==null)throw new $r(n);return i},i=>{throw new $r(`${t} rejected with ${i}`)});if(!wh(e)&&e!==null)throw new $r(n);return e}function xee(e,t,n,i){const{beforeSend:s,beforeSendTransaction:r,beforeSendSpan:o}=t;let a=n;if(h3(a)&&s)return s(a,i);if(MP(a)){if(o){const l=o(_ee(a));if(l?a=Ym(n,Tee(l)):Ax(),a.spans){const c=[];for(const u of a.spans){const d=o(u);d?c.push(d):(Ax(),c.push(u))}a.spans=c}}if(r){if(a.spans){const l=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:l}}return r(a,i)}}return a}function h3(e){return e.type===void 0}function MP(e){return e.type==="transaction"}function Cee(e,t){t.debug===!0&&(Dt?Be.enable():lg(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),ml().update(t.initialScope);const i=new e(t);return Aee(i),i.init(),i}function Aee(e){ml().setClient(e)}function Mee(e){const t=[];function n(){return e===void 0||t.length<e}function i(o){return t.splice(t.indexOf(o),1)[0]||Promise.resolve(void 0)}function s(o){if(!n())return ub(new $r("Not adding Promise because buffer limit was reached."));const a=o();return t.indexOf(a)===-1&&t.push(a),a.then(()=>i(a)).then(null,()=>i(a).then(null,()=>{})),a}function r(o){return new Cc((a,l)=>{let c=t.length;if(!c)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);t.forEach(d=>{od(d).then(()=>{--c||(clearTimeout(u),a(!0))},l)})})}return{$:t,add:s,drain:r}}const Ree=60*1e3;function kee(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const i=Date.parse(`${e}`);return isNaN(i)?Ree:i-t}function Dee(e,t){return e[t]||e.all||0}function Lee(e,t,n=Date.now()){return Dee(e,t)>n}function Nee(e,{statusCode:t,headers:n},i=Date.now()){const s={...e},r=n==null?void 0:n["x-sentry-rate-limits"],o=n==null?void 0:n["retry-after"];if(r)for(const a of r.trim().split(",")){const[l,c,,,u]=a.split(":",5),d=parseInt(l,10),f=(isNaN(d)?60:d)*1e3;if(!c)s.all=i+f;else for(const h of c.split(";"))h==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(s[h]=i+f):s[h]=i+f}else o?s.all=i+kee(o,i):t===429&&(s.all=i+60*1e3);return s}const Oee=64;function Pee(e,t,n=Mee(e.bufferSize||Oee)){let i={};const s=o=>n.drain(o);function r(o){const a=[];if(Mx(o,(d,f)=>{const h=Rx(f);Lee(i,h)?e.recordDroppedEvent("ratelimit_backoff",h):a.push(d)}),a.length===0)return od({});const l=l5(o[0],a),c=d=>{Mx(l,(f,h)=>{e.recordDroppedEvent(d,Rx(h))})},u=()=>t({body:VJ(l)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&Dt&&Be.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),i=Nee(i,d),d),d=>{throw c("network_error"),d});return n.add(u).then(d=>d,d=>{if(d instanceof $r)return Dt&&Be.error("Skipped sending event because buffer is full."),c("queue_overflow"),od({});throw d})}return{send:r,flush:s}}function Fee(e){var t;((t=e.user)==null?void 0:t.ip_address)===void 0&&(e.user={...e.user,ip_address:"{{auto}}"})}function Bee(e){var t;"aggregates"in e?((t=e.attrs)==null?void 0:t.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function zee(e,t,n=[t],i="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map(r=>({name:`${i}:@sentry/${r}`,version:$u})),version:$u}),e._metadata=s}const Hee=100;function ad(e,t){const n=Gi(),i=Wm();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:r=Hee}=n.getOptions();if(r<=0)return;const a={timestamp:jm(),...e},l=s?lg(()=>s(a,t)):a;l!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",l,t),i.addBreadcrumb(l,r))}let Hx;const Vee="FunctionToString",Vx=new WeakMap,$ee=()=>({name:Vee,setupOnce(){Hx=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=T9(this),n=Vx.has(Gi())&&t!==void 0?t:this;return Hx.apply(n,e)}}catch{}},setup(e){Vx.set(e,!0)}}),Gee=$ee,Xee=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],jee="InboundFilters",Yee=(e={})=>({name:jee,processEvent(t,n,i){const s=i.getOptions(),r=Kee(e,s);return Zee(t,r)?null:t}}),Wee=Yee;function Kee(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Xee],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function Zee(e,t){return t.ignoreInternal&&tte(e)?(Dt&&Be.warn(`Event dropped due to being internal Sentry Error.
Event: ${Pl(e)}`),!0):qee(e,t.ignoreErrors)?(Dt&&Be.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Pl(e)}`),!0):ite(e)?(Dt&&Be.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Pl(e)}`),!0):Qee(e,t.ignoreTransactions)?(Dt&&Be.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Pl(e)}`),!0):Jee(e,t.denyUrls)?(Dt&&Be.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Pl(e)}.
Url: ${db(e)}`),!0):ete(e,t.allowUrls)?!1:(Dt&&Be.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Pl(e)}.
Url: ${db(e)}`),!0)}function qee(e,t){return e.type||!t||!t.length?!1:AP(e).some(n=>a5(n,t))}function Qee(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?a5(n,t):!1}function Jee(e,t){if(!(t!=null&&t.length))return!1;const n=db(e);return n?a5(n,t):!1}function ete(e,t){if(!(t!=null&&t.length))return!0;const n=db(e);return n?a5(n,t):!0}function tte(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function nte(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function db(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?nte(t):null}catch{return Dt&&Be.error(`Cannot extract url for event ${Pl(e)}`),null}}function ite(e){var t,n;return e.type||!((n=(t=e.exception)==null?void 0:t.values)!=null&&n.length)?!1:!e.message&&!e.exception.values.some(i=>i.stacktrace||i.type&&i.type!=="Error"||i.value)}function ste(e,t,n=250,i,s,r,o){var l;if(!((l=r.exception)!=null&&l.values)||!o||!id(o.originalException,Error))return;const a=r.exception.values.length>0?r.exception.values[r.exception.values.length-1]:void 0;a&&(r.exception.values=rte(g3(e,t,s,o.originalException,i,r.exception.values,a,0),n))}function g3(e,t,n,i,s,r,o,a){if(r.length>=n+1)return r;let l=[...r];if(id(i[s],Error)){$x(o,a);const c=e(t,i[s]),u=l.length;Gx(c,s,u,a),l=g3(e,t,n,i[s],s,[c,...l],c,u)}return Array.isArray(i.errors)&&i.errors.forEach((c,u)=>{if(id(c,Error)){$x(o,a);const d=e(t,c),f=l.length;Gx(d,`errors[${u}]`,f,a),l=g3(e,t,n,c,s,[d,...l],d,f)}}),l}function $x(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function Gx(e,t,n,i){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:i}}function rte(e,t){return e.map(n=>(n.value&&(n.value=Jf(n.value,t)),n))}function RP(e){const t="console";Ld(t,e),Nd(t,ote)}function ote(){"console"in Ft&&ab.forEach(function(e){e in Ft.console&&Os(Ft.console,e,function(t){return lb[e]=t,function(...n){Jr("console",{args:n,level:e});const s=lb[e];s==null||s.apply(Ft.console,n)}})})}function kP(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const ate="CaptureConsole",lte=(e={})=>{const t=e.levels||ab,n=e.handled??!0;return{name:ate,setup(i){"console"in Ft&&RP(({args:s,level:r})=>{Gi()!==i||!t.includes(r)||ute(s,r,n)})}}},cte=lte;function ute(e,t,n){const i={level:kP(t),extra:{arguments:e}};I9(s=>{if(s.addEventProcessor(a=>(a.logger="console",rd(a,{handled:n,type:"console"}),a)),t==="assert"){if(!e[0]){const a=`Assertion failed: ${cb(e.slice(1)," ")||"console.assert"}`;s.setExtra("arguments",e.slice(1)),Lx(a,i)}return}const r=e.find(a=>a instanceof Error);if(r){M9(r,i);return}const o=cb(e," ");Lx(o,i)})}const dte="Dedupe",fte=()=>{let e;return{name:dte,processEvent(t){if(t.type)return t;try{if(gte(t,e))return Dt&&Be.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},hte=fte;function gte(e,t){return t?!!(mte(e,t)||pte(e,t)):!1}function mte(e,t){const n=e.message,i=t.message;return!(!n&&!i||n&&!i||!n&&i||n!==i||!LP(e,t)||!DP(e,t))}function pte(e,t){const n=Xx(t),i=Xx(e);return!(!n||!i||n.type!==i.type||n.value!==i.value||!LP(e,t)||!DP(e,t))}function DP(e,t){let n=mx(e),i=mx(t);if(!n&&!i)return!0;if(n&&!i||!n&&i||(n=n,i=i,i.length!==n.length))return!1;for(let s=0;s<i.length;s++){const r=i[s],o=n[s];if(r.filename!==o.filename||r.lineno!==o.lineno||r.colno!==o.colno||r.function!==o.function)return!1}return!0}function LP(e,t){let n=e.fingerprint,i=t.fingerprint;if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;n=n,i=i;try{return n.join("")===i.join("")}catch{return!1}}function Xx(e){var t;return((t=e.exception)==null?void 0:t.values)&&e.exception.values[0]}function D8(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",i=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:i,relative:t[5]+n+i}}function NP(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const fb=Ft;function Ute(){return"history"in fb}function OP(){if(!("fetch"in fb))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function m3(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function bte(){var n;if(typeof EdgeRuntime=="string")return!0;if(!OP())return!1;if(m3(fb.fetch))return!0;let e=!1;const t=fb.document;if(t&&typeof t.createElement=="function")try{const i=t.createElement("iframe");i.hidden=!0,t.head.appendChild(i),(n=i.contentWindow)!=null&&n.fetch&&(e=m3(i.contentWindow.fetch)),t.head.removeChild(i)}catch(i){Dd&&Be.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",i)}return e}function yte(e,t){const n="fetch";Ld(n,e),Nd(n,()=>Ete(void 0,t))}function Ete(e,t=!1){t&&!bte()||Os(Ft,"fetch",function(n){return function(...i){const s=new Error,{method:r,url:o}=vte(i),a={args:i,fetchData:{method:r,url:o},startTimestamp:Ha()*1e3,virtualError:s};return Jr("fetch",{...a}),n.apply(Ft,i).then(async l=>(Jr("fetch",{...a,endTimestamp:Ha()*1e3,response:l}),l),l=>{throw Jr("fetch",{...a,endTimestamp:Ha()*1e3,error:l}),y9(l)&&l.stack===void 0&&(l.stack=s.stack,sd(l,"framesToPop",1)),l})}})}function p3(e,t){return!!e&&typeof e=="object"&&!!e[t]}function jx(e){return typeof e=="string"?e:e?p3(e,"url")?e.url:e.toString?e.toString():"":""}function vte(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,i]=e;return{url:jx(n),method:p3(i,"method")?String(i.method).toUpperCase():"GET"}}const t=e[0];return{url:jx(t),method:p3(t,"method")?String(t.method).toUpperCase():"GET"}}function wte(){return"npm"}const xn=Ft;let U3=0;function PP(){return U3>0}function _te(){U3++,setTimeout(()=>{U3--})}function Sh(e,t={}){function n(s){return typeof s=="function"}if(!n(e))return e;try{const s=e.__sentry_wrapped__;if(s)return typeof s=="function"?s:e;if(T9(e))return e}catch{return e}const i=function(...s){try{const r=s.map(o=>Sh(o,t));return e.apply(this,r)}catch(r){throw _te(),I9(o=>{o.addEventProcessor(a=>(t.mechanism&&(l3(a,void 0),rd(a,t.mechanism)),a.extra={...a.extra,arguments:s},a)),M9(r)}),r}};try{for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s])}catch{}fP(i,e),sd(e,"__sentry_wrapped__",i);try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get(){return e.name}})}catch{}return i}function R9(e,t){const n=k9(e,t),i={type:Cte(t),value:Ate(t)};return n.length&&(i.stacktrace={frames:n}),i.type===void 0&&i.value===""&&(i.value="Unrecoverable error caught"),i}function Tte(e,t,n,i){const s=Gi(),r=s==null?void 0:s.getOptions().normalizeDepth,o=Lte(t),a={__serialized__:_P(t,r)};if(o)return{exception:{values:[R9(e,o)]},extra:a};const l={exception:{values:[{type:r5(t)?t.constructor.name:i?"UnhandledRejection":"Error",value:kte(t,{isUnhandledRejection:i})}]},extra:a};if(n){const c=k9(e,n);c.length&&(l.exception.values[0].stacktrace={frames:c})}return l}function L8(e,t){return{exception:{values:[R9(e,t)]}}}function k9(e,t){const n=t.stacktrace||t.stack||"",i=Ite(t),s=xte(t);try{return e(n,i,s)}catch{}return[]}const Ste=/Minified React error #\d+;/i;function Ite(e){return e&&Ste.test(e.message)?1:0}function xte(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function FP(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function Cte(e){const t=e==null?void 0:e.name;return!t&&FP(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function Ate(e){const t=e==null?void 0:e.message;return FP(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function Mte(e,t,n,i){const s=(n==null?void 0:n.syntheticException)||void 0,r=D9(e,t,s,i);return rd(r),r.level="error",n!=null&&n.event_id&&(r.event_id=n.event_id),od(r)}function Rte(e,t,n="info",i,s){const r=(i==null?void 0:i.syntheticException)||void 0,o=b3(e,t,r,s);return o.level=n,i!=null&&i.event_id&&(o.event_id=i.event_id),od(o)}function D9(e,t,n,i,s){let r;if(cP(t)&&t.error)return L8(e,t.error);if(Ux(t)||PQ(t)){const o=t;if("stack"in t)r=L8(e,t);else{const a=o.name||(Ux(o)?"DOMError":"DOMException"),l=o.message?`${a}: ${o.message}`:a;r=b3(e,l,n,i),l3(r,l)}return"code"in o&&(r.tags={...r.tags,"DOMException.code":`${o.code}`}),r}return y9(t)?L8(e,t):wh(t)||r5(t)?(r=Tte(e,t,n,s),rd(r,{synthetic:!0}),r):(r=b3(e,t,n,i),l3(r,`${t}`),rd(r,{synthetic:!0}),r)}function b3(e,t,n,i){const s={};if(i&&n){const r=k9(e,n);r.length&&(s.exception={values:[{value:t,stacktrace:{frames:r}}]}),rd(s,{synthetic:!0})}if(E9(t)){const{__sentry_template_string__:r,__sentry_template_values__:o}=t;return s.logentry={message:r,params:o},s}return s.message=t,s}function kte(e,{isUnhandledRejection:t}){const n=XQ(e),i=t?"promise rejection":"exception";return cP(e)?`Event \`ErrorEvent\` captured as ${i} with message \`${e.message}\``:r5(e)?`Event \`${Dte(e)}\` (type=${e.type}) captured as ${i}`:`Object captured as ${i} with keys: ${n}`}function Dte(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Lte(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}class Nte extends See{constructor(t){const n={parentSpanIsAlwaysRootSpan:!0,...t},i=xn.SENTRY_SDK_SOURCE||wte();zee(n,"browser",["browser"],i),super(n),n.sendClientReports&&xn.document&&xn.document.addEventListener("visibilitychange",()=>{xn.document.visibilityState==="hidden"&&this._flushOutcomes()}),this._options.sendDefaultPii&&(this.on("postprocessEvent",Fee),this.on("beforeSendSession",Bee))}eventFromException(t,n){return Mte(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",i){return Rte(this._options.stackParser,t,n,i,this._options.attachStacktrace)}_prepareEvent(t,n,i,s){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,i,s)}}const Ote=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ms=Ft,Pte=1e3;let Yx,y3,E3;function Fte(e){const t="dom";Ld(t,e),Nd(t,Bte)}function Bte(){if(!ms.document)return;const e=Jr.bind(null,"dom"),t=Wx(e,!0);ms.document.addEventListener("click",t,!1),ms.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{var r,o;const s=(r=ms[n])==null?void 0:r.prototype;(o=s==null?void 0:s.hasOwnProperty)!=null&&o.call(s,"addEventListener")&&(Os(s,"addEventListener",function(a){return function(l,c,u){if(l==="click"||l=="keypress")try{const d=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=d[l]=d[l]||{refCount:0};if(!f.handler){const h=Wx(e);f.handler=h,a.call(this,l,h,u)}f.refCount++}catch{}return a.call(this,l,c,u)}}),Os(s,"removeEventListener",function(a){return function(l,c,u){if(l==="click"||l=="keypress")try{const d=this.__sentry_instrumentation_handlers__||{},f=d[l];f&&(f.refCount--,f.refCount<=0&&(a.call(this,l,f.handler,u),f.handler=void 0,delete d[l]),Object.keys(d).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,l,c,u)}}))})}function zte(e){if(e.type!==y3)return!1;try{if(!e.target||e.target._sentryId!==E3)return!1}catch{}return!0}function Hte(e,t){return e!=="keypress"?!1:t!=null&&t.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function Wx(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const i=Vte(n);if(Hte(n.type,i))return;sd(n,"_sentryCaptured",!0),i&&!i._sentryId&&sd(i,"_sentryId",Ur());const s=n.type==="keypress"?"input":n.type;zte(n)||(e({event:n,name:s,global:t}),y3=n.type,E3=i?i._sentryId:void 0),clearTimeout(Yx),Yx=ms.setTimeout(()=>{E3=void 0,y3=void 0},Pte)}}function Vte(e){try{return e.target}catch{return null}}let sU;function BP(e){const t="history";Ld(t,e),Nd(t,$te)}function $te(){if(ms.addEventListener("popstate",()=>{const t=ms.location.href,n=sU;if(sU=t,n===t)return;Jr("history",{from:n,to:t})}),!Ute())return;function e(t){return function(...n){const i=n.length>2?n[2]:void 0;if(i){const s=sU,r=String(i);if(sU=r,s===r)return;Jr("history",{from:s,to:r})}return t.apply(this,n)}}Os(ms.history,"pushState",e),Os(ms.history,"replaceState",e)}const t2={};function Gte(e){const t=t2[e];if(t)return t;let n=ms[e];if(m3(n))return t2[e]=n.bind(ms);const i=ms.document;if(i&&typeof i.createElement=="function")try{const s=i.createElement("iframe");s.hidden=!0,i.head.appendChild(s);const r=s.contentWindow;r!=null&&r[e]&&(n=r[e]),i.head.removeChild(s)}catch(s){Ote&&Be.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,s)}return n&&(t2[e]=n.bind(ms))}function Kx(e){t2[e]=void 0}const y1="__sentry_xhr_v3__";function Xte(e){const t="xhr";Ld(t,e),Nd(t,jte)}function jte(){if(!ms.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,i){const s=new Error,r=Ha()*1e3,o=za(i[0])?i[0].toUpperCase():void 0,a=Yte(i[1]);if(!o||!a)return t.apply(n,i);n[y1]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const l=()=>{const c=n[y1];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}const u={endTimestamp:Ha()*1e3,startTimestamp:r,xhr:n,virtualError:s};Jr("xhr",u)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(c,u,d){return l(),c.apply(u,d)}}):n.addEventListener("readystatechange",l),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,u,d){const[f,h]=d,m=u[y1];return m&&za(f)&&za(h)&&(m.request_headers[f.toLowerCase()]=h),c.apply(u,d)}}),t.apply(n,i)}}),e.send=new Proxy(e.send,{apply(t,n,i){const s=n[y1];if(!s)return t.apply(n,i);i[0]!==void 0&&(s.body=i[0]);const r={startTimestamp:Ha()*1e3,xhr:n};return Jr("xhr",r),t.apply(n,i)}})}function Yte(e){if(za(e))return e;try{return e.toString()}catch{}}function Wte(e,t=Gte("fetch")){let n=0,i=0;function s(r){const o=r.body.length;n+=o,i++;const a={body:r.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&i<15,...e.fetchOptions};if(!t)return Kx("fetch"),ub("No fetch implementation available");try{return t(e.url,a).then(l=>(n-=o,i--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return Kx("fetch"),n-=o,i--,ub(l)}}return Pee(e,s)}const Kte=30,Zte=50;function v3(e,t,n,i){const s={filename:e,function:t==="<anonymous>"?nd:t,in_app:!0};return n!==void 0&&(s.lineno=n),i!==void 0&&(s.colno=i),s}const qte=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Qte=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Jte=/\((\S*)(?::(\d+))(?::(\d+))\)/,ene=e=>{const t=qte.exec(e);if(t){const[,i,s,r]=t;return v3(i,nd,+s,+r)}const n=Qte.exec(e);if(n){if(n[2]&&n[2].indexOf("eval")===0){const o=Jte.exec(n[2]);o&&(n[2]=o[1],n[3]=o[2],n[4]=o[3])}const[s,r]=zP(n[1]||nd,n[2]);return v3(r,s,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},tne=[Kte,ene],nne=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ine=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,sne=e=>{const t=nne.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const r=ine.exec(t[3]);r&&(t[1]=t[1]||"eval",t[3]=r[1],t[4]=r[2],t[5]="")}let i=t[3],s=t[1]||nd;return[s,i]=zP(s,i),v3(i,s,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},rne=[Zte,sne],one=[tne,rne],ane=aP(...one),zP=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,i=e.indexOf("safari-web-extension")!==-1;return n||i?[e.indexOf("@")!==-1?e.split("@")[0]:nd,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},z0=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,rU=1024,lne="Breadcrumbs",cne=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:lne,setup(n){t.console&&RP(hne(n)),t.dom&&Fte(fne(n,t.dom)),t.xhr&&Xte(gne(n)),t.fetch&&yte(mne(n)),t.history&&BP(pne(n)),t.sentry&&n.on("beforeSendEvent",dne(n))}}},une=cne;function dne(e){return function(n){Gi()===e&&ad({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Pl(n)},{event:n})}}function fne(e,t){return function(i){if(Gi()!==e)return;let s,r,o=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>rU&&(z0&&Be.warn(`\`dom.maxStringLength\` cannot exceed ${rU}, but a value of ${a} was configured. Sentry will use ${rU} instead.`),a=rU),typeof o=="string"&&(o=[o]);try{const c=i.event,u=Une(c)?c.target:c;s=dP(u,{keyAttrs:o,maxStringLength:a}),r=$Q(u)}catch{s="<unknown>"}if(s.length===0)return;const l={category:`ui.${i.name}`,message:s};r&&(l.data={"ui.component_name":r}),ad(l,{event:i.event,name:i.name,global:i.global})}}function hne(e){return function(n){if(Gi()!==e)return;const i={category:"console",data:{arguments:n.args,logger:"console"},level:kP(n.level),message:cb(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)i.message=`Assertion failed: ${cb(n.args.slice(1)," ")||"console.assert"}`,i.data.arguments=n.args.slice(1);else return;ad(i,{input:n.args,level:n.level})}}function gne(e){return function(n){if(Gi()!==e)return;const{startTimestamp:i,endTimestamp:s}=n,r=n.xhr[y1];if(!i||!s||!r)return;const{method:o,url:a,status_code:l,body:c}=r,u={method:o,url:a,status_code:l},d={xhr:n.xhr,input:c,startTimestamp:i,endTimestamp:s},f=NP(l);ad({category:"xhr",data:u,type:"http",level:f},d)}}function mne(e){return function(n){if(Gi()!==e)return;const{startTimestamp:i,endTimestamp:s}=n;if(!s||n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST")return;const r={method:n.fetchData.method,url:n.fetchData.url};if(n.error){const o={data:n.error,input:n.args,startTimestamp:i,endTimestamp:s};ad({category:"fetch",data:r,level:"error",type:"http"},o)}else{const o=n.response;r.request_body_size=n.fetchData.request_body_size,r.response_body_size=n.fetchData.response_body_size,r.status_code=o==null?void 0:o.status;const a={input:n.args,response:o,startTimestamp:i,endTimestamp:s},l=NP(r.status_code);ad({category:"fetch",data:r,type:"http",level:l},a)}}}function pne(e){return function(n){if(Gi()!==e)return;let i=n.from,s=n.to;const r=D8(xn.location.href);let o=i?D8(i):void 0;const a=D8(s);o!=null&&o.path||(o=r),r.protocol===a.protocol&&r.host===a.host&&(s=a.relative),r.protocol===o.protocol&&r.host===o.host&&(i=o.relative),ad({category:"navigation",data:{from:i,to:s}})}}function Une(e){return!!e&&!!e.target}const bne=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],yne="BrowserApiErrors",Ene=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:yne,setupOnce(){t.setTimeout&&Os(xn,"setTimeout",Zx),t.setInterval&&Os(xn,"setInterval",Zx),t.requestAnimationFrame&&Os(xn,"requestAnimationFrame",wne),t.XMLHttpRequest&&"XMLHttpRequest"in xn&&Os(XMLHttpRequest.prototype,"send",_ne);const n=t.eventTarget;n&&(Array.isArray(n)?n:bne).forEach(Tne)}}},vne=Ene;function Zx(e){return function(...t){const n=t[0];return t[0]=Sh(n,{mechanism:{data:{function:xc(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function wne(e){return function(t){return e.apply(this,[Sh(t,{mechanism:{data:{function:"requestAnimationFrame",handler:xc(e)},handled:!1,type:"instrument"}})])}}function _ne(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&Os(n,s,function(r){const o={mechanism:{data:{function:s,handler:xc(r)},handled:!1,type:"instrument"}},a=T9(r);return a&&(o.mechanism.data.handler=xc(a)),Sh(r,o)})}),e.apply(this,t)}}function Tne(e){var i,s;const n=(i=xn[e])==null?void 0:i.prototype;(s=n==null?void 0:n.hasOwnProperty)!=null&&s.call(n,"addEventListener")&&(Os(n,"addEventListener",function(r){return function(o,a,l){try{Sne(a)&&(a.handleEvent=Sh(a.handleEvent,{mechanism:{data:{function:"handleEvent",handler:xc(a),target:e},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[o,Sh(a,{mechanism:{data:{function:"addEventListener",handler:xc(a),target:e},handled:!1,type:"instrument"}}),l])}}),Os(n,"removeEventListener",function(r){return function(o,a,l){try{const c=a.__sentry_wrapped__;c&&r.call(this,o,c,l)}catch{}return r.call(this,o,a,l)}}))}function Sne(e){return typeof e.handleEvent=="function"}const Ine=()=>({name:"BrowserSession",setupOnce(){if(typeof xn.document>"u"){z0&&Be.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Nx({ignoreDuration:!0}),Ox(),BP(({from:e,to:t})=>{e!==void 0&&e!==t&&(Nx({ignoreDuration:!0}),Ox())})}}),xne="GlobalHandlers",Cne=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:xne,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(Mne(n),qx("onerror")),t.onunhandledrejection&&(Rne(n),qx("onunhandledrejection"))}}},Ane=Cne;function Mne(e){DQ(t=>{const{stackParser:n,attachStacktrace:i}=HP();if(Gi()!==e||PP())return;const{msg:s,url:r,line:o,column:a,error:l}=t,c=Lne(D9(n,l||s,void 0,i,!1),r,o,a);c.level="error",SP(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}function Rne(e){NQ(t=>{const{stackParser:n,attachStacktrace:i}=HP();if(Gi()!==e||PP())return;const s=kne(t),r=v9(s)?Dne(s):D9(n,s,void 0,i,!0);r.level="error",SP(r,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function kne(e){if(v9(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function Dne(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function Lne(e,t,n,i){const s=e.exception=e.exception||{},r=s.values=s.values||[],o=r[0]=r[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=i,u=n,d=za(t)&&t.length>0?t:_9();return l.length===0&&l.push({colno:c,filename:d,function:nd,in_app:!0,lineno:u}),e}function qx(e){z0&&Be.log(`Global Handler attached: ${e}`)}function HP(){const e=Gi();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}const Nne=()=>({name:"HttpContext",preprocessEvent(e){var o,a;if(!xn.navigator&&!xn.location&&!xn.document)return;const t=((o=e.request)==null?void 0:o.url)||_9(),{referrer:n}=xn.document||{},{userAgent:i}=xn.navigator||{},s={...(a=e.request)==null?void 0:a.headers,...n&&{Referer:n},...i&&{"User-Agent":i}},r={...e.request,...t&&{url:t},headers:s};e.request=r}}),One="cause",Pne=5,Fne="LinkedErrors",Bne=(e={})=>{const t=e.limit||Pne,n=e.key||One;return{name:Fne,preprocessEvent(i,s,r){const o=r.getOptions();ste(R9,o.stackParser,o.maxValueLength,n,t,i,s)}}},zne=Bne;function Hne(e){return[Wee(),Gee(),vne(),une(),Ane(),zne(),hte(),Nne(),Ine()]}function Vne(e={}){var n;return{...{defaultIntegrations:Hne(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(n=xn.SENTRY_RELEASE)==null?void 0:n.id,sendClientReports:!0},...$ne(e)}}function $ne(e){const t={};for(const n of Object.getOwnPropertyNames(e)){const i=n;e[i]!==void 0&&(t[i]=e[i])}return t}function Gne(){var l;const e=typeof xn.window<"u"&&xn;if(!e)return!1;const t=e.chrome?"chrome":"browser",n=e[t],i=(l=n==null?void 0:n.runtime)==null?void 0:l.id,s=_9()||"",r=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],o=!!i&&xn===xn.top&&r.some(c=>s.startsWith(`${c}//`)),a=typeof e.nw<"u";return!!i&&!o&&!a}function Xne(e={}){const t=Vne(e);if(!t.skipBrowserExtensionCheck&&Gne()){z0&&lg(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}z0&&!OP()&&Be.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.");const n={...t,stackParser:RQ(t.stackParser||ane),integrations:Eee(t),transport:t.transport||Wte};return Cee(Nte,n)}function jne(){const e=Error.prepareStackTrace;try{let t=[];return Error.prepareStackTrace=(n,i)=>{const s=i.slice(1);return t=s,s},new Error().stack,t}finally{Error.prepareStackTrace=e}}var VP={};const $P={"excalidraw.com":"production","staging.excalidraw.com":"staging","vercel.app":"staging"},Yne=VP.VITE_APP_DISABLE_SENTRY==="true",N8=!Yne&&Object.keys($P).find(e=>window.location.hostname.indexOf(e)>=0);Xne({dsn:N8?"https://7bfc596a5bf945eda6b660d3015a5460@sentry.io/5179260":void 0,environment:N8?$P[N8]:void 0,release:VP.VITE_APP_GIT_SHA,ignoreErrors:["undefined is not an object (evaluating 'window.__pad.performLoop')","InvalidStateError: Failed to execute 'transaction' on 'IDBDatabase': The database connection is closing.",/(Failed to fetch|(fetch|loading) dynamically imported module)/i,/QuotaExceededError: (The quota has been exceeded|.*setItem.*Storage)/i,"Internal error opening backing store for indexedDB.open"],integrations:[cte({levels:["error"]})],beforeSend(e){var t;return(t=e.request)!=null&&t.url&&(e.request.url=e.request.url.replace(/#.*$/,"")),e.exception||(e.exception={values:[{type:"ConsoleError",value:e.message??"Unknown error",stacktrace:{frames:jne().slice(1).filter(n=>{var i;return n.getFileName()&&!((i=n.getFileName())!=null&&i.includes("@sentry_browser.js"))}).map(n=>{var i;return{filename:n.getFileName()??void 0,function:n.getFunctionName()??void 0,in_app:!(((i=n.getFileName())==null?void 0:i.includes("node_modules"))??!1),lineno:n.getLineNumber()??void 0,colno:n.getColumnNumber()??void 0}})},mechanism:{type:"instrument",handled:!0,data:{function:"console.error",handler:"Sentry.beforeSend"}}}]}),e}});class Wne{constructor(t){F(this,"content",[]);this.scoreFunction=t}sinkDown(t){const n=this.content[t];for(;t>0;){const i=(t+1>>1)-1,s=this.content[i];if(this.scoreFunction(n)<this.scoreFunction(s))this.content[i]=n,this.content[t]=s,t=i;else break}}bubbleUp(t){const n=this.content.length,i=this.content[t],s=this.scoreFunction(i);for(;;){const r=t+1<<1,o=r-1;let a=null,l=0;if(o<n){const c=this.content[o];l=this.scoreFunction(c),l<s&&(a=o)}if(r<n){const c=this.content[r];this.scoreFunction(c)<(a===null?s:l)&&(a=r)}if(a!==null)this.content[t]=this.content[a],this.content[a]=i,t=a;else break}}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){if(this.content.length===0)return null;const t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t}remove(t){if(this.content.length===0)return;const n=this.content.indexOf(t),i=this.content.pop();n<this.content.length&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}}const Kne="#ffffff",Zne="#000000",qne=["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],Qne=["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],Jne=["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],eie=["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],tie=["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],nie=["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],iie=["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],sie=["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],rie=["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],oie=["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],aie=["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],lie=["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],cie=["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"],hi={white:Kne,black:Zne,gray:qne,red:Qne,pink:Jne,grape:eie,violet:tie,indigo:nie,blue:iie,cyan:sie,teal:rie,green:oie,lime:aie,yellow:lie,orange:cie},GP=240,uie=(e,t)=>t.reduce((n,i)=>(i in e&&(n[i]=e[i]),n),{}),die=5,gf=5,fie=4,E1=4,v1=1,kr=[0,2,4,6,8],Dr=(e,t)=>t.map(n=>hi[e][n]),ze={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:Dr("gray",kr),red:Dr("red",kr),pink:Dr("pink",kr),grape:Dr("grape",kr),violet:Dr("violet",kr),blue:Dr("blue",kr),cyan:Dr("cyan",kr),teal:Dr("teal",kr),green:Dr("green",kr),yellow:Dr("yellow",kr),orange:Dr("orange",kr),bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},XP=uie(ze,["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"]),jP=[ze.black,ze.red[E1],ze.green[E1],ze.blue[E1],ze.yellow[E1]],YP=[ze.transparent,ze.red[v1],ze.green[v1],ze.blue[v1],ze.yellow[v1]],WP=[ze.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],hie={transparent:ze.transparent,white:ze.white,gray:ze.gray,black:ze.black,bronze:ze.bronze,...XP},gie={transparent:ze.transparent,white:ze.white,gray:ze.gray,black:ze.black,bronze:ze.bronze,...XP},mie=e=>[ze.cyan[e],ze.blue[e],ze.violet[e],ze.grape[e],ze.pink[e],ze.green[e],ze.teal[e],ze.yellow[e],ze.orange[e],ze.red[e]],pie=(e,t,n)=>`#${((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}`,Xo=/Mac|iPod|iPhone|iPad/.test(navigator.platform),KP=/^Win/.test(navigator.platform),Uie=/\b(android)\b/i.test(navigator.userAgent),H0=typeof window<"u"&&"netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,bie=navigator.userAgent.indexOf("Chrome")!==-1,yie=!bie&&navigator.userAgent.indexOf("Safari")!==-1,ZP=/iPad|iPhone/.test(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,Eie=()=>{var e,t;return((t=(e=navigator.brave)==null?void 0:e.isBrave)==null?void 0:t.name)==="isBrave"},w3=typeof window<"u"&&"ResizeObserver"in window,Va="Excalidraw",vie=36,hu=10,n2=8,wie=5,Qx=1,_ie=30,Ac=Math.PI/12,Tie="red",wt={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},Rl={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1,ERASER:5},gu={enabled:"all",disabled:"none",inheritFromUI:"var(--ui-pointerEvents)"};var ee=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.EXCALIDRAW_LINK="excalidraw-link",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(ee||{});const oU={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},Sie={DEVELOPMENT:"development"},Mc={SHAPE_ACTIONS_MENU:"App-menu__left",ZOOM_ACTIONS:"zoom-actions",SEARCH_MENU_INPUT_WRAPPER:"layer-ui__search-inputWrapper",CONVERT_ELEMENT_TYPE_POPUP:"ConvertElementTypePopup"},Lf="Xiaolai",V0="Segoe UI Emoji",lt={Virgil:1,Helvetica:2,Cascadia:3,Excalifont:5,Nunito:6,"Lilita One":7,"Comic Shanns":8,"Liberation Sans":9,Assistant:10},Nf={[Lf]:100,[V0]:1e3},qP=e=>{switch(e){case lt.Excalifont:return[Lf,V0];default:return[V0]}},Me={LIGHT:"light",DARK:"dark"},Pt={strokeColor:"#bbb",strokeWidth:2,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8,nameOffsetY:3,nameColorLightTheme:"#999999",nameColorDarkTheme:"#7a7a7a",nameFontSize:14,nameLineHeight:1.25},L9=1,pl=20,Kc=lt.Excalifont,Km="left",hb="top",QP="{version}",ld=2,gb=2*ld,Iie=1e-5,xie=2*gb-Iie,aU="#ffffff",Cie="#1e1e1e",Aie="#a2f1a6",mb=20,JP=5,Ih={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},ye={text:"text/plain",html:"text/html",json:"application/json",excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json","excalidraw.svg":"image/svg+xml","excalidraw.png":"image/png",binary:"application/octet-stream",...Ih},Mie=[ye.text,ye.html,...Object.values(Ih)],O8={png:"png",svg:"svg",clipboard:"clipboard"},br={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib",excalidrawClipboardWithAPI:"excalidraw-api/clipboard"},N9=()=>window.EXCALIDRAW_EXPORT_SOURCE||window.location.origin,Rie=500,kie=300,Die=500,Lie=1e4,Nie=3e4,Oie=100,c5=.1,O9=.1,P9=30,Pie=300,Jx=6e4,eC=3e3,F9="invert(93%) hue-rotate(180deg)",_3={addLibrary:"addLibrary"},T3={addLibrary:"addLibrary"},tC={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0}},Fie=730,Bie=1e3,zie=500,Hie=1229,jg=2,B9=[1,2,3],ug=10,Vie=1440,nC=4*1024*1024,st="http://www.w3.org/2000/svg",$ie=`<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`,eF=128,u5={excalidraw:2,excalidrawLibrary:2},Fn=5,Gie=.7,Xie=11,Fs={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},$0={LEFT:"left",CENTER:"center",RIGHT:"right"},jie=20,P8=.25,Yie=32,mn={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},tF={artist:1,cartoonist:2},F8={thin:1,bold:2,extraBold:4},fn={strokeColor:ze.black,backgroundColor:ze.transparent,fillStyle:"solid",strokeWidth:2,strokeStyle:"solid",roughness:tF.artist,opacity:100,locked:!1},pb="library",Gu="search",yr={name:"default",defaultTab:pb},nF=new Set(["iframe","embeddable","image"]),Zn={selection:"selection",rectangle:"rectangle",diamond:"diamond",ellipse:"ellipse",text:"text",image:"image",eraser:"eraser",frame:"frame",magicframe:"magicframe",laser:"laser"},n0={MERMAID_TO_EXCALIDRAW:"mermaid-to-excalidraw",PUBLISH_LIBRARY:"publish-library-data"},iF="Untitled",Of={generalStats:1,elementProperties:2},tr=1,ai={sharp:"sharp",round:"round",elbow:"elbow"},sF=.3,Ub="element";var Iu=(e=>(e.ACTIVE="active",e.AWAY="away",e.IDLE="idle",e))(Iu||{});const xh={[lt.Excalifont]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25}},[lt.Nunito]:{metrics:{unitsPerEm:1e3,ascender:1011,descender:-353,lineHeight:1.25}},[lt["Lilita One"]]:{metrics:{unitsPerEm:1e3,ascender:923,descender:-220,lineHeight:1.15}},[lt["Comic Shanns"]]:{metrics:{unitsPerEm:1e3,ascender:750,descender:-250,lineHeight:1.25}},[lt.Virgil]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},deprecated:!0},[lt.Helvetica]:{metrics:{unitsPerEm:2048,ascender:1577,descender:-471,lineHeight:1.15},deprecated:!0,local:!0},[lt.Cascadia]:{metrics:{unitsPerEm:2048,ascender:1900,descender:-480,lineHeight:1.2},deprecated:!0},[lt["Liberation Sans"]]:{metrics:{unitsPerEm:2048,ascender:1854,descender:-434,lineHeight:1.15},private:!0},[lt.Assistant]:{metrics:{unitsPerEm:2048,ascender:1021,descender:-287,lineHeight:1.25},private:!0},[Nf.Xiaolai]:{metrics:{unitsPerEm:1e3,ascender:880,descender:-144,lineHeight:1.25},fallback:!0},[Nf["Segoe UI Emoji"]]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},local:!0,fallback:!0}},yu={LATIN:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD",LATIN_EXT:"U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF",CYRILIC_EXT:"U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F",CYRILIC:"U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116",VIETNAMESE:"U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB"},z9="local:",rF=(e,t,n)=>{var c;const{unitsPerEm:i,ascender:s,descender:r}=((c=xh[e])==null?void 0:c.metrics)||xh[lt.Excalifont].metrics,o=t/i,a=(n-o*s+o*r)/2;return o*s+a},Rc=e=>{var n;const{lineHeight:t}=((n=xh[e])==null?void 0:n.metrics)||xh[lt.Excalifont].metrics;return t};class Wie{constructor(){F(this,"jobs",[]);F(this,"running",!1)}tick(){if(this.running)return;const t=this.jobs.shift();t?(this.running=!0,t.promise.resolve(Dc(t.jobFactory,...t.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(t,...n){const i=f5();return this.jobs.push({jobFactory:t,promise:i,args:n}),this.tick(),i}}const et={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",THREE:"Digit3",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",Y:"KeyY",R:"KeyR",S:"KeyS"},z={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:Xo?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SLASH:"/",A:"a",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},Kie=new Map([[z.Z,et.Z],[z.Y,et.Y]]),Zie=e=>/^[a-z]$/.test(e.toLowerCase()),S3=(e,t)=>{if(t===e.key.toLowerCase())return!0;const n=Kie.get(t);return!!(n&&!Zie(e.key)&&e.code===n)},w1=e=>e===z.ARROW_LEFT||e===z.ARROW_RIGHT||e===z.ARROW_DOWN||e===z.ARROW_UP,iC=e=>e.altKey,Yg=e=>e.shiftKey,i0=e=>e.shiftKey,kc=1e-4,Xe=(e,t,n)=>Math.min(Math.max(e,t),n),$a=(e,t,n="round")=>{const i=Math.pow(10,t);return Math[n]((e+Number.EPSILON)*i)/i},qie=(e,t,n="round")=>{const i=1/t;return Math[n](e*i)/i},lU=(e,t)=>(e+t)/2,s0=e=>typeof e=="number"&&Number.isFinite(e),sC=(e,t,n=kc)=>Math.abs(e-t)<n,bb=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e;function Xu(e){return e*Math.PI/180}function d5(e){return e*180/Math.PI}function Qie(e){return Math.abs(Math.sin(2*e))<kc}function On(e,t,n=0,i=0){return[e-n,t-i]}function re(e,t=[0,0]){return On(e[0]-t[0],e[1]-t[1])}function Ut(e,t){return e[0]*t[1]-t[0]*e[1]}function rC(e,t){return e[0]*t[0]+e[1]*t[1]}function ql(e,t){return[e[0]+t[0],e[1]+t[1]]}function yb(e,t){return[e[0]-t[0],e[1]-t[1]]}function At(e,t){return On(e[0]*t,e[1]*t)}function Jie(e){return e[0]*e[0]+e[1]*e[1]}function ese(e){return Math.sqrt(Jie(e))}const Bn=e=>{const t=ese(e);return t===0?On(0,0):On(e[0]/t,e[1]/t)},oF=e=>On(e[1],-e[0]);function S(e,t){return[e,t]}function H9(e){return e.length===2?S(e[0],e[1]):void 0}function Re(e,t=S(0,0)){return S(t[0]+e[0],t[1]+e[1])}function xu(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&!isNaN(e[0])&&typeof e[1]=="number"&&!isNaN(e[1])}function Ir(e,t){const n=Math.abs;return n(e[0]-t[0])<kc&&n(e[1]-t[1])<kc}function Z([e,t],[n,i],s){return S((e-n)*Math.cos(s)-(t-i)*Math.sin(s)+n,(e-n)*Math.sin(s)+(t-i)*Math.cos(s)+i)}function Eb(e,t=[0,0]){return S(e[0]+t[0],e[1]+t[1])}function G0(e,t){return S((e[0]+t[0])/2,(e[1]+t[1])/2)}function Je(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function xa(e,t){const n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}const _1=(e,t,n)=>Eb(t,At(re(e,t),n)),aF=(e,t,n)=>t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1]);function I3(e,t){return[e,t]}function tse(e,t){const n=e[1][1]-e[0][1],i=e[0][0]-e[1][0],s=t[1][1]-t[0][1],r=t[0][0]-t[1][0],o=n*r-s*i;if(o!==0){const a=n*e[0][0]+i*e[0][1],l=s*t[0][0]+r*t[0][1];return S((a*r-l*i)/o,(n*l-s*a)/o)}return null}function we(e,t){return[e,t]}const nse=e=>Array.isArray(e)&&e.length===2&&xu(e[0])&&xu(e[0]),cd=(e,t,n=kc)=>{const i=V9(e,t);return i===0?!0:i<n},V9=(e,t)=>{const[n,i]=e,[[s,r],[o,a]]=t,l=n-s,c=i-r,u=o-s,d=a-r,f=l*u+c*d,h=u*u+d*d;let m=-1;h!==0&&(m=f/h);let p,U;m<0?(p=s,U=r):m>1?(p=o,U=a):(p=s+m*u,U=r+m*d);const y=n-p,E=i-U;return Math.sqrt(y*y+E*E)};function ud(e,t,n){const i=tse(I3(e[0],e[1]),I3(t[0],t[1]));return!i||!cd(i,t,n)||!cd(i,e,n)?null:i}function x3(e,t){return[e,t]}function ise(e,t){return[we(e[0],S(e[1][0],e[0][1])),we(S(e[1][0],e[0][1]),e[1]),we(e[1],S(e[0][0],e[1][1])),we(S(e[0][0],e[1][1]),e[0])].map(n=>ud(t,n)).filter(n=>!!n)}function Lo(e,t,n,i){return[e,t,n,i]}function oC(e,t,n,i=1e-6){return[(e(t+i,n)-e(t-i,n))/(2*i),(e(t,n+i)-e(t,n-i))/(2*i)]}function sse(e,t,n,i=.001,s=10){let r=1/0,o=0;for(;r>=i;){if(o>=s)return null;const a=e(t,n),l=[oC((p,U)=>e(p,U)[0],t,n),oC((p,U)=>e(p,U)[1],t,n)],c=[[-a[0]],[-a[1]]],u=l[0][0]*l[1][1]-l[0][1]*l[1][0];if(u===0)return null;const d=[[l[1][1]/u,-l[0][1]/u],[-l[1][0]/u,l[0][0]/u]],f=[[d[0][0]*c[0][0]+d[0][1]*c[1][0]],[d[1][0]*c[0][0]+d[1][1]*c[1][0]]];t=t+f[0][0],n=n+f[1][0];const[h,m]=e(t,n);r=Math.max(Math.abs(h),Math.abs(m)),o+=1}return[t,n]}const eh=(e,t)=>S((1-t)**3*e[0][0]+3*(1-t)**2*t*e[1][0]+3*(1-t)*t**2*e[2][0]+t**3*e[3][0],(1-t)**3*e[0][1]+3*(1-t)**2*t*e[1][1]+3*(1-t)*t**2*e[2][1]+t**3*e[3][1]);function lF(e,t){const n=lse(e);if(ise(x3(S(n[0],n[1]),S(n[2],n[3])),t).length===0)return[];const i=a=>S(t[0][0]+a*(t[1][0]-t[0][0]),t[0][1]+a*(t[1][1]-t[0][1])),s=[[.5,0],[.2,0],[.8,0]],r=([a,l])=>{const c=sse((f,h)=>{const m=eh(e,f),p=i(h);return[m[0]-p[0],m[1]-p[1]]},a,l);if(!c)return null;const[u,d]=c;return u<0||u>1||d<0||d>1?null:eh(e,u)};let o=r(s[0]);return o?[o]:(o=r(s[1]),o?[o]:(o=r(s[2]),o?[o]:[]))}function rse(e,t,n=.001){const i=(c,u,d,f=n)=>{let h=c,m=u,p;for(;m-h>f;)p=(m+h)/2,d(p-f)<d(p+f)?m=p:h=p;return p};let r=0;for(let c=1/0,u=0;u<30;u++){const d=Je(t,eh(e,u/30));d<c&&(c=d,r=u)}const o=Math.max((r-1)/30,0),a=Math.min((r+1)/30,1),l=i(o,a,c=>Je(t,eh(e,c)));return l?eh(e,l):null}function cF(e,t){const n=rse(e,t);return n?Je(t,n):0}function ose(e){return Array.isArray(e)&&e.length===4&&xu(e[0])&&xu(e[1])&&xu(e[2])&&xu(e[3])}function ase([e,t,n,i],s){return On(-3*(1-s)*(1-s)*e[0]+3*(1-s)*(1-s)*t[0]-6*s*(1-s)*t[0]-3*s*s*n[0]+6*s*(1-s)*n[0]+3*s*s*i[0],-3*(1-s)*(1-s)*e[1]+3*(1-s)*(1-s)*t[1]-6*s*(1-s)*t[1]-3*s*s*n[1]+6*s*(1-s)*n[1]+3*s*s*i[1])}function lse(e){const[t,n,i,s]=e,r=[t[0],n[0],i[0],s[0]],o=[t[1],n[1],i[1],s[1]];return[Math.min(...r),Math.min(...o),Math.max(...r),Math.max(...o)]}function aC(...e){return uF(e)}function X0(e){return uF(e)}const lC=(e,t)=>{const n=e[0],i=e[1];let s=!1;for(let r=0,o=t.length-1;r<t.length;o=r++){const a=t[r][0],l=t[r][1],c=t[o][0],u=t[o][1];(l>i&&u<=i||l<=i&&u>i)&&n<(c-a)*(i-l)/(u-l)+a&&(s=!s)}return s},cse=(e,t)=>{const[n,i]=e;let s=0;for(let r=0;r<t.length;r++){const o=(r+1)%t.length,[a,l]=t[r],[c,u]=t[o];l<=i?u>i&&(c-a)*(i-l)-(n-a)*(u-l)>0&&s++:u<=i&&(c-a)*(i-l)-(n-a)*(u-l)<0&&s--}return s!==0},use=(e,t,n=kc)=>{let i=!1;for(let s=0,r=t.length-1;s<r;s++)if(cd(e,we(t[s],t[s+1]),n)){i=!0;break}return i};function uF(e){return dse(e)?e:[...e,e[0]]}function dse(e){return Ir(e[0],e[e.length-1])}function Ni(e,t){return Yo([e,t])}const vb=([e,t],[n,i])=>e<=n?t>=n:e>=n?i>=e:!1,wb=([e,t],[n,i])=>{const s=Math.max(e,n),r=Math.min(t,i);return s<=r?Yo([s,r]):null},cU=(e,[t,n])=>e>=t&&e<=n;function B8([e,t,n],i){const s=(u,d,f)=>(u[0]-f[0])*(d[1]-f[1])-(d[0]-f[0])*(u[1]-f[1]),r=s(i,e,t),o=s(i,t,n),a=s(i,n,e),l=r<0||o<0||a<0,c=r>0||o>0||a>0;return!(l&&c)}const Ch=e=>{const t=e.map(i=>i[0]),n=e.map(i=>i[1]);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}},_b=(e,t,n,i)=>{const s=n.map(h=>h[e]),r=Math.max(...s),o=Math.min(...s),a=r-o,l=a===0?1:t/a;let c=1/0;const u=n.map(h=>{const m=h[e]*l,p=[...h];return p[e]=m,m<c&&(c=m),p});if(!i||u.length===2)return u;const d=o-c;return u.map(h=>h.map((m,p)=>p===e?m+d:m))},Mn=(e,t,n)=>n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t];var dF={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Ra,function(){var n=function(){this._listeners={}};n.prototype.addEventListener=function(c,u){this._listeners[c]=this._listeners[c]||[],this._listeners[c].indexOf(u)<0&&this._listeners[c].push(u)},n.prototype.removeEventListener=function(c,u){if(this._listeners[c]){var d=this._listeners[c].indexOf(u);d>=0&&this._listeners[c].splice(d,1)}},n.prototype.dispatchEvent=function(c){if(this._listeners[c.type]&&this._listeners[c.type].length)for(var u=this._listeners[c.type].slice(),d=0,f=u.length;d<f;++d)u[d].call(this,c)};var i=function(c){return typeof c.constructor=="function"&&c.constructor.name==="GeneratorFunction"},s=function(c){return{next:function(){var u=c();return u?{value:u}:{done:!0}}}},r=function(c){var u=!1;return{next:function(){return u?{done:!0}:(u=!0,{value:c})}}},o=function(c,u){var d=typeof c;if(d==="object"){if(typeof c.next=="function")return c;if(typeof c.then=="function")return r(c)}return d==="function"?i(c)?c():s(c):r(u.resolve(c))},a=function(c,u,d){this.target=c,this.type=u,this.data=d},l=function(c,u,d){if(n.call(this),typeof u!="number"||Math.floor(u)!==u||u<1)throw new Error("Invalid concurrency");this._concurrency=u,this._options=d||{},this._options.promise=this._options.promise||Promise,this._iterator=o(c,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return l.prototype=new n,l.prototype.constructor=l,l.prototype.concurrency=function(c){return typeof c<"u"&&(this._concurrency=c,this.active()&&this._proceed()),this._concurrency},l.prototype.size=function(){return this._size},l.prototype.active=function(){return!!this._promise},l.prototype.promise=function(){return this._promise},l.prototype.start=function(){var c=this,u=this._options.promise;return this._promise=new u(function(d,f){c._callbacks={reject:f,resolve:d},c._proceed()}),this._promise},l.prototype._fireEvent=function(c,u){this.dispatchEvent(new a(this,c,u))},l.prototype._settle=function(c){c?this._callbacks.reject(c):this._callbacks.resolve(),this._promise=null,this._callbacks=null},l.prototype._onPooledPromiseFulfilled=function(c,u){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:c,result:u}),this._proceed())},l.prototype._onPooledPromiseRejected=function(c,u){this._size--,this.active()&&(this._fireEvent("rejected",{promise:c,error:u}),this._settle(u||new Error("Unknown error")))},l.prototype._trackPromise=function(c){var u=this;c.then(function(d){u._onPooledPromiseFulfilled(c,d)},function(d){u._onPooledPromiseRejected(c,d)}).catch(function(d){u._settle(new Error("Promise processing failed: "+d))})},l.prototype._proceed=function(){if(!this._done){for(var c={done:!1};this._size<this._concurrency&&!(c=this._iterator.next()).done;)this._size++,this._trackPromise(c.value);this._done=c===null||!!c.done}this._done&&this._size===0&&this._settle()},l.PromisePoolEvent=a,l.PromisePool=l,l})})(dF);var fse=dF.exports;const hse=hl(fse);class cC{constructor(t,n){F(this,"pool");F(this,"entries",{});this.pool=new hse(t,n)}all(){const t=n=>{if(n.data.result){const[i,s]=n.data.result;this.entries[i]=s}};return this.pool.addEventListener("fulfilled",t),this.pool.start().then(()=>(setTimeout(()=>{this.pool.removeEventListener("fulfilled",t)}),Object.values(this.entries)))}}let fF=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function gse(){return Math.floor(Math.random()*2**31)}class hF{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const uC=()=>{const e=new Date,t=e.getFullYear(),n=`${e.getMonth()+1}`.padStart(2,"0"),i=`${e.getDate()}`.padStart(2,"0"),s=`${e.getHours()}`.padStart(2,"0"),r=`${e.getMinutes()}`.padStart(2,"0");return`${t}-${n}-${i}-${s}${r}`},r0=e=>e.charAt(0).toUpperCase()+e.slice(1),mse=e=>e instanceof HTMLElement&&e.className.includes("ToolIcon"),C3=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement,pse=e=>C3(e)||e instanceof Element&&!!e.closest("label, button"),Eu=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&(e.type==="text"||e.type==="number"||e.type==="password"),Zm=({fontFamily:e})=>{for(const[t,n]of Object.entries(lt))if(n===e)return`${t}${qP(n).map(i=>`, ${i}`).join("")}`;return V0},gt=({fontSize:e,fontFamily:t})=>`${e}px ${Zm({fontFamily:t})}`,Qa=(e,t)=>{let n=0,i=null;const s=(...r)=>{i=r,clearTimeout(n),n=window.setTimeout(()=>{i=null,e(...r)},t)};return s.flush=()=>{if(clearTimeout(n),i){const r=i;i=null,e(...r)}},s.cancel=()=>{i=null,clearTimeout(n)},s},dg=(e,t)=>{let n=null,i=null,s=null;const r=a=>{n=window.requestAnimationFrame(()=>{n=null,e(...a),i=null,s&&(i=s,s=null,r(i))})},o=(...a)=>{i=a,n===null?r(i):t!=null&&t.trailing&&(s=a)};return o.flush=()=>{n!==null&&(cancelAnimationFrame(n),n=null),i&&(e(...s||i),i=s=null)},o.cancel=()=>{i=s=null,n!==null&&(cancelAnimationFrame(n),n=null)},o},Ja=e=>1-Math.pow(1-e,4),dC=(e,t,n)=>(t-e)*Ja(n)+e,Use=({fromValues:e,toValues:t,onStep:n,duration:i=250,interpolateValue:s,onStart:r,onEnd:o,onCancel:a})=>{let l=!1,c=0,u;function d(f){if(l)return;u===void 0&&(u=f,r==null||r());const h=Math.min(f-u,i),m=Ja(h/i),p={};if(Object.keys(e).forEach(U=>{const y=U,E=(t[y]-e[y])*m+e[y];p[y]=E}),n(p),h<i){const U=h/i,y={};Object.keys(e).forEach(E=>{const v=E,w=e[v],I=t[v];let M;M=s?s(w,I,U,v):dC(w,I,U),M==null&&(M=dC(w,I,U)),y[v]=M}),n(y),c=window.requestAnimationFrame(d)}else n(t),o==null||o()}return c=window.requestAnimationFrame(d),()=>{a==null||a(),l=!0,window.cancelAnimationFrame(c)}},bse=(e,t)=>{if(!e.length||t<1)return[];let n=0,i=0;const s=Array(Math.ceil(e.length/t));for(;n<e.length;)s[i++]=e.slice(n,n+=t);return s},Pi=(e,t)=>Math.abs(e-t),en=(e,t)=>t.type==="custom"?{...e.activeTool,type:"custom",customType:t.customType,locked:t.locked??e.activeTool.locked}:{...e.activeTool,lastActiveTool:t.lastActiveToolBeforeEraser===void 0?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null,locked:t.locked??e.activeTool.locked,fromSelection:t.fromSelection??!1},Q=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),Xo?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),kt=({clientX:e,clientY:t},{zoom:n,offsetLeft:i,offsetTop:s,scrollX:r,scrollY:o})=>{const a=(e-i)/n.value-r,l=(t-s)/n.value-o;return{x:a,y:l}},hr=({sceneX:e,sceneY:t},{zoom:n,offsetLeft:i,offsetTop:s,scrollX:r,scrollY:o})=>{const a=(e+r)*n.value+i,l=(t+o)*n.value+s;return{x:a,y:l}},uU=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),yse="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿",Ese="֑-߿יִ-﷽ﹰ-ﻼ",vse=new RegExp(`^[^${yse}]*[${Ese}]`),gF=e=>vse.test(e),Wr=e=>{const[t,n]=e;return{x:t,y:n}},mF=e=>{if((e==null?void 0:e.name)==="AbortError"){console.warn(e);return}throw e},pF=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let i=n-1;for(;++i<e.length;)if(t(e[i],i,e))return i;return-1},vu=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let i=n+1;for(;--i>-1;)if(t(e[i],i,e))return i;return-1},wse=(e,t)=>{for(let n=0;n<e.length;n++){const i=t(e[n],n);if(i!=null)return i}},Kr=e=>{const t=e.length===5&&e.substr(4,1)==="0",n=e.length===9&&e.substr(7,2)==="00";return t||n||e===ze.transparent},z8=e=>e.fillStyle!=="solid"||Kr(e.backgroundColor),f5=()=>{let e,t;const n=new Promise((i,s)=>{e=i,t=s});return n.resolve=e,n.reject=t,n},fC=(e,t)=>{const n=[{value:1,symbol:"b"},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"}],i=/\.0+$|(\.[0-9]*[1-9])0+$/;let s;for(s=n.length-1;s>0&&!(e>=n[s].value);s--);return(e/n[s].value).toFixed(t).replace(i,"$1")+n[s].symbol},A3=()=>{var e;return((e=document.querySelector('meta[name="version"]'))==null?void 0:e.content)||QP},_se=e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;const{overflowY:n}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&(n==="auto"||n==="scroll"||n==="overlay"))return t;t=t.parentElement}return document},Tse=e=>{let t=e.parentElement;for(;t;){if(t.tabIndex>-1){t.focus();return}t=t.parentElement}},$9=e=>{e.preventDefault(),e.returnValue=""},UF=e=>Array.from(e).map(t=>`0${t.toString(16)}`.slice(-2)).join(""),fg=()=>Date.now(),_e=e=>e instanceof Map?e:e.reduce((t,n)=>(t.set(typeof n=="string"?n:n.id,n),t),new Map),Sse=e=>e.reduce((t,n,i)=>(t.set(n.id,[n,i]),t),new Map),ha=(e,t)=>e.reduce((n,i)=>(n[t?t(i):String(i)]=i,n),{}),Ise=e=>e.reduce((t,n,i)=>{const s={...n,prev:null,next:null};if(i!==0){const r=t[i-1];if(s.prev=r,r.next=s,i===e.length-1){const o=t[0];s.next=o,o.prev=s}}return t.push(s),t},[]),Fl=e=>Array.isArray(e)?e:e.values(),xse=e=>Array.isArray(e)?e:Array.from(Fl(e)),G9=()=>Sie.DEVELOPMENT==="development",Cse=()=>typeof process<"u"&&!0,bF=(e,t)=>new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0}),i2=(e,t)=>{let n=!1;for(const i in t){const s=t[i];if(typeof s<"u"){if(e[i]===s&&(typeof s!="object"||s===null))continue;n=!0}}return n?{...e,...t}:e},qm=()=>{try{return window.self===window.top?"top":"iframe"}catch{return"iframe"}},Ase=()=>qm()==="iframe",Qm=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,M3=e=>{const t=e==null?void 0:e.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter(n=>n.tabIndex>-1&&!n.disabled):[]},hC=(e,t)=>Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t,Ji=(e,t,n,i=!1)=>{const s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return i&&console.warn("%cisShallowEqual: objects don't have same properties ->","color: #8B4000",e,t),!1;if(n&&Array.isArray(n)){for(const o of n)if(!(e[o]===t[o]||hC(e[o],t[o])))return i&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),!1;return!0}return s.every(o=>{const a=n==null?void 0:n[o],l=a?a(e[o],t[o]):e[o]===t[o]||hC(e[o],t[o]);return!l&&i&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),l})},h5=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(s){if(e==null||e(s),!n||!(s!=null&&s.defaultPrevented))return t==null?void 0:t(s)},jo=(e,t,n)=>{if(!t)return e;if(n)return console.error(t),e;throw new Error(t)};function ti(e,t){if(!e)throw new Error(t)}const Mse=e=>{let t,n;const i=function(s){const r=Object.entries(s);if(t){let a=!0;for(const[l,c]of r)if(t.get(l)!==c){a=!1;break}if(a)return n}const o=e(s);return t=new Map(r),n=o,o};return i.clear=()=>{t=void 0,n=void 0},i},yF=(e,t)=>e instanceof Set||e instanceof Map?e.has(t):"includes"in e?e.includes(t):e.hasOwnProperty(t),Ga=e=>JSON.parse(JSON.stringify(e)),Wg=(e,t)=>Ji(e,t)?e:t;function rn(e,t,n,i){var s;return e?((s=e==null?void 0:e.addEventListener)==null||s.call(e,t,n,i),()=>{var r;(r=e==null?void 0:e.removeEventListener)==null||r.call(e,t,n,i)}):()=>{}}function Rse(e,t=!0){const n=e.length;if(n<4)return"";let i=e[0],s=e[1];const r=e[2];let o=`M${i[0].toFixed(2)},${i[1].toFixed(2)} Q${s[0].toFixed(2)},${s[1].toFixed(2)} ${lU(s[0],r[0]).toFixed(2)},${lU(s[1],r[1]).toFixed(2)} T`;for(let a=2,l=n-1;a<l;a++)i=e[a],s=e[a+1],o+=`${lU(i[0],s[0]).toFixed(2)},${lU(i[1],s[1]).toFixed(2)} `;return t&&(o+="Z"),o}const EF=e=>e.replace(/\r?\n|\r/g,`
`),Yo=e=>e,Dc=async(e,...t)=>new Promise(n=>{n(e(...t))}),kse=(...e)=>Math.max(...e.map(t=>t?1:0))>0,Dse=e=>{try{return JSON.parse(e)}catch{return null}},s2=e=>e.replace(/"/g,"&quot;"),H8=e=>Array.isArray(e)?e:[e],Xn=(e,t=0,n=0)=>{const{x:i,y:s,width:r,height:o}=e,a=i+r/2+t,l=s+o/2+n;return S(a,l)},Lse=e=>Array.isArray(e),vF=e=>Lse(e)?e.length:e instanceof Map||e instanceof Set?e.size:Object.keys(e).length,wF=(e,t)=>{if(vF(e)===0)return null;const n=t||(s=>s);let i=null;for(const s of e){const r=n(s);if((i===null||i===r)&&r!=null)i=r;else return null}return i};let Nse=new hF(Date.now());const Wo=()=>Math.floor(Nse.next()*2**31),vs=()=>fF();var X9={};Object.defineProperty(X9,"__esModule",{value:!0});var _F=X9.sanitizeUrl=void 0,Ose=/^([^\w]*)(javascript|data|vbscript)/im,Pse=/&#(\w+)(^\w|;)?/g,Fse=/&(newline|tab);/gi,Bse=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,zse=/^.+(:|&colon;)/gim,Hse=[".","/"];function Vse(e){return Hse.indexOf(e[0])>-1}function $se(e){return e.replace(Pse,function(t,n){return String.fromCharCode(n)})}function Gse(e){var t=$se(e||"").replace(Fse,"").replace(Bse,"").trim();if(!t)return"about:blank";if(Vse(t))return t;var n=t.match(zse);if(!n)return t;var i=n[0];return Ose.test(i)?"about:blank":t}_F=X9.sanitizeUrl=Gse;const $s=e=>(e=e.trim(),e&&_F(s2(e))),TF=e=>!!(e!=null&&e.includes(location.origin)||e!=null&&e.startsWith("/")),j9=e=>{if(e=$s(e),e.startsWith("/"))return`${location.origin}${e}`;try{new URL(e)}catch{return"about:blank"}return e};class zr{constructor(){F(this,"subscribers",[])}on(...t){const n=t.flat().filter(i=>typeof i=="function");return this.subscribers.push(...n),()=>this.off(n)}once(...t){const n=t.flat().filter(s=>typeof s=="function");n.push(()=>i());const i=this.on(...n);return i}off(...t){const n=t.flat();this.subscribers=this.subscribers.filter(i=>!n.includes(i))}trigger(...t){for(const n of this.subscribers)n(...t);return this}clear(){this.subscribers=[]}}function SF(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=SF(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function pe(){for(var e=0,t,n,i="";e<arguments.length;)(t=arguments[e++])&&(n=SF(t))&&(i&&(i+=" "),i+=n);return i}var IF="Expected a function",gC=NaN,Xse="[object Symbol]",jse=/^\s+|\s+$/g,Yse=/^[-+]0x[0-9a-f]+$/i,Wse=/^0b[01]+$/i,Kse=/^0o[0-7]+$/i,Zse=parseInt,qse=typeof Ra=="object"&&Ra&&Ra.Object===Object&&Ra,Qse=typeof self=="object"&&self&&self.Object===Object&&self,Jse=qse||Qse||Function("return this")(),ere=Object.prototype,tre=ere.toString,nre=Math.max,ire=Math.min,V8=function(){return Jse.Date.now()};function sre(e,t,n){var i,s,r,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(IF);t=mC(t)||0,Tb(n)&&(u=!!n.leading,d="maxWait"in n,r=d?nre(mC(n.maxWait)||0,t):r,f="trailing"in n?!!n.trailing:f);function h(M){var T=i,_=s;return i=s=void 0,c=M,o=e.apply(_,T),o}function m(M){return c=M,a=setTimeout(y,t),u?h(M):o}function p(M){var T=M-l,_=M-c,x=t-T;return d?ire(x,r-_):x}function U(M){var T=M-l,_=M-c;return l===void 0||T>=t||T<0||d&&_>=r}function y(){var M=V8();if(U(M))return E(M);a=setTimeout(y,p(M))}function E(M){return a=void 0,f&&i?h(M):(i=s=void 0,o)}function v(){a!==void 0&&clearTimeout(a),c=0,i=l=s=a=void 0}function w(){return a===void 0?o:E(V8())}function I(){var M=V8(),T=U(M);if(i=arguments,s=this,l=M,T){if(a===void 0)return m(l);if(d)return a=setTimeout(y,t),h(l)}return a===void 0&&(a=setTimeout(y,t)),o}return I.cancel=v,I.flush=w,I}function rre(e,t,n){var i=!0,s=!0;if(typeof e!="function")throw new TypeError(IF);return Tb(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),sre(e,t,{leading:i,maxWait:t,trailing:s})}function Tb(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function ore(e){return!!e&&typeof e=="object"}function are(e){return typeof e=="symbol"||ore(e)&&tre.call(e)==Xse}function mC(e){if(typeof e=="number")return e;if(are(e))return gC;if(Tb(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Tb(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(jse,"");var n=Wse.test(e);return n||Kse.test(e)?Zse(e.slice(2),n?2:8):Yse.test(e)?gC:+e}var lre=rre;const No=hl(lre);function R3(e,t,n){if(e&&e.length){const[i,s]=t,r=Math.PI/180*n,o=Math.cos(r),a=Math.sin(r);for(const l of e){const[c,u]=l;l[0]=(c-i)*o-(u-s)*a+i,l[1]=(c-i)*a+(u-s)*o+s}}}function cre(e,t,n){const i=[];e.forEach(s=>i.push(...s)),R3(i,t,n)}function ure(e,t){return e[0]===t[0]&&e[1]===t[1]}function dre(e,t,n,i=1){const s=n,r=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,a=[0,0];if(s)for(const c of o)R3(c,a,s);const l=fre(o,r,i);if(s){for(const c of o)R3(c,a,-s);cre(l,a,-s)}return l}function fre(e,t,n){const i=[];for(const c of e){const u=[...c];ure(u[0],u[u.length-1])||u.push([u[0][0],u[0][1]]),u.length>2&&i.push(u)}const s=[];t=Math.max(t,.1);const r=[];for(const c of i)for(let u=0;u<c.length-1;u++){const d=c[u],f=c[u+1];if(d[1]!==f[1]){const h=Math.min(d[1],f[1]);r.push({ymin:h,ymax:Math.max(d[1],f[1]),x:h===d[1]?d[0]:f[0],islope:(f[0]-d[0])/(f[1]-d[1])})}}if(r.sort((c,u)=>c.ymin<u.ymin?-1:c.ymin>u.ymin?1:c.x<u.x?-1:c.x>u.x?1:c.ymax===u.ymax?0:(c.ymax-u.ymax)/Math.abs(c.ymax-u.ymax)),!r.length)return s;let o=[],a=r[0].ymin,l=0;for(;o.length||r.length;){if(r.length){let c=-1;for(let d=0;d<r.length&&!(r[d].ymin>a);d++)c=d;r.splice(0,c+1).forEach(d=>{o.push({s:a,edge:d})})}if(o=o.filter(c=>!(c.edge.ymax<=a)),o.sort((c,u)=>c.edge.x===u.edge.x?0:(c.edge.x-u.edge.x)/Math.abs(c.edge.x-u.edge.x)),(n!==1||l%t===0)&&o.length>1)for(let c=0;c<o.length;c=c+2){const u=c+1;if(u>=o.length)break;const d=o[c].edge,f=o[u].edge;s.push([[Math.round(d.x),a],[Math.round(f.x),a]])}a+=n,o.forEach(c=>{c.edge.x=c.edge.x+n*c.edge.islope}),l++}return s}function Jm(e,t){var n;const i=t.hachureAngle+90;let s=t.hachureGap;s<0&&(s=t.strokeWidth*4),s=Math.max(s,.1);let r=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(r=s),dre(e,s,i,r||1)}class Y9{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const i=Jm(t,n);return{type:"fillSketch",ops:this.renderLines(i,n)}}renderLines(t,n){const i=[];for(const s of t)i.push(...this.helper.doubleLineOps(s[0][0],s[0][1],s[1][0],s[1][1],n));return i}}function g5(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class hre extends Y9{fillPolygons(t,n){let i=n.hachureGap;i<0&&(i=n.strokeWidth*4),i=Math.max(i,.1);const s=Object.assign({},n,{hachureGap:i}),r=Jm(t,s),o=Math.PI/180*n.hachureAngle,a=[],l=i*.5*Math.cos(o),c=i*.5*Math.sin(o);for(const[d,f]of r)g5([d,f])&&a.push([[d[0]-l,d[1]+c],[...f]],[[d[0]+l,d[1]-c],[...f]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class gre extends Y9{fillPolygons(t,n){const i=this._fillPolygons(t,n),s=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),r=this._fillPolygons(t,s);return i.ops=i.ops.concat(r.ops),i}}class mre{constructor(t){this.helper=t}fillPolygons(t,n){n=Object.assign({},n,{hachureAngle:0});const i=Jm(t,n);return this.dotsOnLines(i,n)}dotsOnLines(t,n){const i=[];let s=n.hachureGap;s<0&&(s=n.strokeWidth*4),s=Math.max(s,.1);let r=n.fillWeight;r<0&&(r=n.strokeWidth/2);const o=s/4;for(const a of t){const l=g5(a),c=l/s,u=Math.ceil(c)-1,d=l-u*s,f=(a[0][0]+a[1][0])/2-s/4,h=Math.min(a[0][1],a[1][1]);for(let m=0;m<u;m++){const p=h+d+m*s,U=f-o+Math.random()*2*o,y=p-o+Math.random()*2*o,E=this.helper.ellipse(U,y,r,r,n);i.push(...E.ops)}}return{type:"fillSketch",ops:i}}}class pre{constructor(t){this.helper=t}fillPolygons(t,n){const i=Jm(t,n);return{type:"fillSketch",ops:this.dashedLine(i,n)}}dashedLine(t,n){const i=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,s=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,r=[];return t.forEach(o=>{const a=g5(o),l=Math.floor(a/(i+s)),c=(a+s-l*(i+s))/2;let u=o[0],d=o[1];u[0]>d[0]&&(u=o[1],d=o[0]);const f=Math.atan((d[1]-u[1])/(d[0]-u[0]));for(let h=0;h<l;h++){const m=h*(i+s),p=m+i,U=[u[0]+m*Math.cos(f)+c*Math.cos(f),u[1]+m*Math.sin(f)+c*Math.sin(f)],y=[u[0]+p*Math.cos(f)+c*Math.cos(f),u[1]+p*Math.sin(f)+c*Math.sin(f)];r.push(...this.helper.doubleLineOps(U[0],U[1],y[0],y[1],n))}}),r}}class Ure{constructor(t){this.helper=t}fillPolygons(t,n){const i=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,s=n.zigzagOffset<0?i:n.zigzagOffset;n=Object.assign({},n,{hachureGap:i+s});const r=Jm(t,n);return{type:"fillSketch",ops:this.zigzagLines(r,s,n)}}zigzagLines(t,n,i){const s=[];return t.forEach(r=>{const o=g5(r),a=Math.round(o/(2*n));let l=r[0],c=r[1];l[0]>c[0]&&(l=r[1],c=r[0]);const u=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let d=0;d<a;d++){const f=d*2*n,h=(d+1)*2*n,m=Math.sqrt(2*Math.pow(n,2)),p=[l[0]+f*Math.cos(u),l[1]+f*Math.sin(u)],U=[l[0]+h*Math.cos(u),l[1]+h*Math.sin(u)],y=[p[0]+m*Math.cos(u+Math.PI/4),p[1]+m*Math.sin(u+Math.PI/4)];s.push(...this.helper.doubleLineOps(p[0],p[1],y[0],y[1],i),...this.helper.doubleLineOps(y[0],y[1],U[0],U[1],i))}}),s}}const ls={};function bre(e,t){let n=e.fillStyle||"hachure";if(!ls[n])switch(n){case"zigzag":ls[n]||(ls[n]=new hre(t));break;case"cross-hatch":ls[n]||(ls[n]=new gre(t));break;case"dots":ls[n]||(ls[n]=new mre(t));break;case"dashed":ls[n]||(ls[n]=new pre(t));break;case"zigzag-line":ls[n]||(ls[n]=new Ure(t));break;case"hachure":default:n="hachure",ls[n]||(ls[n]=new Y9(t));break}return ls[n]}const yre=0,k3=1,xF=2,dU={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Ere(e){const t=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:yre,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:k3,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return t[t.length]={type:xF,text:""},t}function $8(e,t){return e.type===t}function W9(e){const t=[],n=Ere(e);let i="BOD",s=0,r=n[s];for(;!$8(r,xF);){let o=0;const a=[];if(i==="BOD")if(r.text==="M"||r.text==="m")s++,o=dU[r.text],i=r.text;else return W9("M0,0"+e);else $8(r,k3)?o=dU[i]:(s++,o=dU[r.text],i=r.text);if(s+o<n.length){for(let l=s;l<s+o;l++){const c=n[l];if($8(c,k3))a[a.length]=+c.text;else throw new Error("Param not a number: "+i+","+c.text)}if(typeof dU[i]=="number"){const l={key:i,data:a};t.push(l),s+=o,r=n[s],i==="M"&&(i="L"),i==="m"&&(i="l")}else throw new Error("Bad segment: "+i)}else throw new Error("Path data ended short")}return t}function CF(e){let t=0,n=0,i=0,s=0;const r=[];for(const{key:o,data:a}of e)switch(o){case"M":r.push({key:"M",data:[...a]}),[t,n]=a,[i,s]=a;break;case"m":t+=a[0],n+=a[1],r.push({key:"M",data:[t,n]}),i=t,s=n;break;case"L":r.push({key:"L",data:[...a]}),[t,n]=a;break;case"l":t+=a[0],n+=a[1],r.push({key:"L",data:[t,n]});break;case"C":r.push({key:"C",data:[...a]}),t=a[4],n=a[5];break;case"c":{const l=a.map((c,u)=>u%2?c+n:c+t);r.push({key:"C",data:l}),t=l[4],n=l[5];break}case"Q":r.push({key:"Q",data:[...a]}),t=a[2],n=a[3];break;case"q":{const l=a.map((c,u)=>u%2?c+n:c+t);r.push({key:"Q",data:l}),t=l[2],n=l[3];break}case"A":r.push({key:"A",data:[...a]}),t=a[5],n=a[6];break;case"a":t+=a[5],n+=a[6],r.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,n]});break;case"H":r.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],r.push({key:"H",data:[t]});break;case"V":r.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],r.push({key:"V",data:[n]});break;case"S":r.push({key:"S",data:[...a]}),t=a[2],n=a[3];break;case"s":{const l=a.map((c,u)=>u%2?c+n:c+t);r.push({key:"S",data:l}),t=l[2],n=l[3];break}case"T":r.push({key:"T",data:[...a]}),t=a[0],n=a[1];break;case"t":t+=a[0],n+=a[1],r.push({key:"T",data:[t,n]});break;case"Z":case"z":r.push({key:"Z",data:[]}),t=i,n=s;break}return r}function AF(e){const t=[];let n="",i=0,s=0,r=0,o=0,a=0,l=0;for(const{key:c,data:u}of e){switch(c){case"M":t.push({key:"M",data:[...u]}),[i,s]=u,[r,o]=u;break;case"C":t.push({key:"C",data:[...u]}),i=u[4],s=u[5],a=u[2],l=u[3];break;case"L":t.push({key:"L",data:[...u]}),[i,s]=u;break;case"H":i=u[0],t.push({key:"L",data:[i,s]});break;case"V":s=u[0],t.push({key:"L",data:[i,s]});break;case"S":{let d=0,f=0;n==="C"||n==="S"?(d=i+(i-a),f=s+(s-l)):(d=i,f=s),t.push({key:"C",data:[d,f,...u]}),a=u[0],l=u[1],i=u[2],s=u[3];break}case"T":{const[d,f]=u;let h=0,m=0;n==="Q"||n==="T"?(h=i+(i-a),m=s+(s-l)):(h=i,m=s);const p=i+2*(h-i)/3,U=s+2*(m-s)/3,y=d+2*(h-d)/3,E=f+2*(m-f)/3;t.push({key:"C",data:[p,U,y,E,d,f]}),a=h,l=m,i=d,s=f;break}case"Q":{const[d,f,h,m]=u,p=i+2*(d-i)/3,U=s+2*(f-s)/3,y=h+2*(d-h)/3,E=m+2*(f-m)/3;t.push({key:"C",data:[p,U,y,E,h,m]}),a=d,l=f,i=h,s=m;break}case"A":{const d=Math.abs(u[0]),f=Math.abs(u[1]),h=u[2],m=u[3],p=u[4],U=u[5],y=u[6];d===0||f===0?(t.push({key:"C",data:[i,s,U,y,U,y]}),i=U,s=y):(i!==U||s!==y)&&(MF(i,s,U,y,d,f,h,m,p).forEach(function(v){t.push({key:"C",data:v})}),i=U,s=y);break}case"Z":t.push({key:"Z",data:[]}),i=r,s=o;break}n=c}return t}function vre(e){return Math.PI*e/180}function Kg(e,t,n){const i=e*Math.cos(n)-t*Math.sin(n),s=e*Math.sin(n)+t*Math.cos(n);return[i,s]}function MF(e,t,n,i,s,r,o,a,l,c){const u=vre(o);let d=[],f=0,h=0,m=0,p=0;if(c)[f,h,m,p]=c;else{[e,t]=Kg(e,t,-u),[n,i]=Kg(n,i,-u);const N=(e-n)/2,D=(t-i)/2;let $=N*N/(s*s)+D*D/(r*r);$>1&&($=Math.sqrt($),s=$*s,r=$*r);const G=a===l?-1:1,H=s*s,V=r*r,X=H*V-H*D*D-V*N*N,j=H*D*D+V*N*N,q=G*Math.sqrt(Math.abs(X/j));m=q*s*D/r+(e+n)/2,p=q*-r*N/s+(t+i)/2,f=Math.asin(parseFloat(((t-p)/r).toFixed(9))),h=Math.asin(parseFloat(((i-p)/r).toFixed(9))),e<m&&(f=Math.PI-f),n<m&&(h=Math.PI-h),f<0&&(f=Math.PI*2+f),h<0&&(h=Math.PI*2+h),l&&f>h&&(f=f-Math.PI*2),!l&&h>f&&(h=h-Math.PI*2)}let U=h-f;if(Math.abs(U)>Math.PI*120/180){const N=h,D=n,$=i;l&&h>f?h=f+Math.PI*120/180*1:h=f+Math.PI*120/180*-1,n=m+s*Math.cos(h),i=p+r*Math.sin(h),d=MF(n,i,D,$,s,r,o,0,l,[h,N,m,p])}U=h-f;const y=Math.cos(f),E=Math.sin(f),v=Math.cos(h),w=Math.sin(h),I=Math.tan(U/4),M=4/3*s*I,T=4/3*r*I,_=[e,t],x=[e+M*E,t-T*y],C=[n+M*w,i-T*v],R=[n,i];if(x[0]=2*_[0]-x[0],x[1]=2*_[1]-x[1],c)return[x,C,R].concat(d);{d=[x,C,R].concat(d);const N=[];for(let D=0;D<d.length;D+=3){const $=Kg(d[D][0],d[D][1],u),G=Kg(d[D+1][0],d[D+1][1],u),H=Kg(d[D+2][0],d[D+2][1],u);N.push([$[0],$[1],G[0],G[1],H[0],H[1]])}return N}}const wre={randOffset:xre,randOffsetWithRange:Cre,ellipse:Sre,doubleLineOps:Are};function RF(e,t,n,i,s){return{type:"path",ops:el(e,t,n,i,s)}}function r2(e,t,n){const i=(e||[]).length;if(i>2){const s=[];for(let r=0;r<i-1;r++)s.push(...el(e[r][0],e[r][1],e[r+1][0],e[r+1][1],n));return t&&s.push(...el(e[i-1][0],e[i-1][1],e[0][0],e[0][1],n)),{type:"path",ops:s}}else if(i===2)return RF(e[0][0],e[0][1],e[1][0],e[1][1],n);return{type:"path",ops:[]}}function _re(e,t){return r2(e,!0,t)}function Tre(e,t,n,i,s){const r=[[e,t],[e+n,t],[e+n,t+i],[e,t+i]];return _re(r,s)}function pC(e,t){let n=EC(e,1*(1+t.roughness*.2),t);if(!t.disableMultiStroke){const i=EC(e,1.5*(1+t.roughness*.22),Mre(t));n=n.concat(i)}return{type:"path",ops:n}}function Sre(e,t,n,i,s){const r=kF(n,i,s);return D3(e,t,s,r).opset}function kF(e,t,n){const i=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),s=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*i)),r=Math.PI*2/s;let o=Math.abs(e/2),a=Math.abs(t/2);const l=1-n.curveFitting;return o+=Le(o*l,n),a+=Le(a*l,n),{increment:r,rx:o,ry:a}}function D3(e,t,n,i){const[s,r]=vC(i.increment,e,t,i.rx,i.ry,1,i.increment*Sb(.1,Sb(.4,1,n),n),n);let o=Ib(s,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=vC(i.increment,e,t,i.rx,i.ry,1.5,0,n),l=Ib(a,null,n);o=o.concat(l)}return{estimatedPoints:r,opset:{type:"path",ops:o}}}function UC(e,t,n,i,s,r,o,a,l){const c=e,u=t;let d=Math.abs(n/2),f=Math.abs(i/2);d+=Le(d*.01,l),f+=Le(f*.01,l);let h=s,m=r;for(;h<0;)h+=Math.PI*2,m+=Math.PI*2;m-h>Math.PI*2&&(h=0,m=Math.PI*2);const p=Math.PI*2/l.curveStepCount,U=Math.min(p/2,(m-h)/2),y=wC(U,c,u,d,f,h,m,1,l);if(!l.disableMultiStroke){const E=wC(U,c,u,d,f,h,m,1.5,l);y.push(...E)}return o&&(a?y.push(...el(c,u,c+d*Math.cos(h),u+f*Math.sin(h),l),...el(c,u,c+d*Math.cos(m),u+f*Math.sin(m),l)):y.push({op:"lineTo",data:[c,u]},{op:"lineTo",data:[c+d*Math.cos(h),u+f*Math.sin(h)]})),{type:"path",ops:y}}function bC(e,t){const n=AF(CF(W9(e))),i=[];let s=[0,0],r=[0,0];for(const{key:o,data:a}of n)switch(o){case"M":{r=[a[0],a[1]],s=[a[0],a[1]];break}case"L":i.push(...el(r[0],r[1],a[0],a[1],t)),r=[a[0],a[1]];break;case"C":{const[l,c,u,d,f,h]=a;i.push(...Rre(l,c,u,d,f,h,r,t)),r=[f,h];break}case"Z":i.push(...el(r[0],r[1],s[0],s[1],t)),r=[s[0],s[1]];break}return{type:"path",ops:i}}function G8(e,t){const n=[];for(const i of e)if(i.length){const s=t.maxRandomnessOffset||0,r=i.length;if(r>2){n.push({op:"move",data:[i[0][0]+Le(s,t),i[0][1]+Le(s,t)]});for(let o=1;o<r;o++)n.push({op:"lineTo",data:[i[o][0]+Le(s,t),i[o][1]+Le(s,t)]})}}return{type:"fillPath",ops:n}}function mf(e,t){return bre(t,wre).fillPolygons(e,t)}function Ire(e,t,n,i,s,r,o){const a=e,l=t;let c=Math.abs(n/2),u=Math.abs(i/2);c+=Le(c*.01,o),u+=Le(u*.01,o);let d=s,f=r;for(;d<0;)d+=Math.PI*2,f+=Math.PI*2;f-d>Math.PI*2&&(d=0,f=Math.PI*2);const h=(f-d)/o.curveStepCount,m=[];for(let p=d;p<=f;p=p+h)m.push([a+c*Math.cos(p),l+u*Math.sin(p)]);return m.push([a+c*Math.cos(f),l+u*Math.sin(f)]),m.push([a,l]),mf([m],o)}function xre(e,t){return Le(e,t)}function Cre(e,t,n){return Sb(e,t,n)}function Are(e,t,n,i,s){return el(e,t,n,i,s,!0)}function Mre(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function DF(e){return e.randomizer||(e.randomizer=new hF(e.seed||0)),e.randomizer.next()}function Sb(e,t,n,i=1){return n.roughness*i*(DF(n)*(t-e)+e)}function Le(e,t,n=1){return Sb(-e,e,t,n)}function el(e,t,n,i,s,r=!1){const o=r?s.disableMultiStrokeFill:s.disableMultiStroke,a=yC(e,t,n,i,s,!0,!1);if(o)return a;const l=yC(e,t,n,i,s,!0,!0);return a.concat(l)}function yC(e,t,n,i,s,r,o){const a=Math.pow(e-n,2)+Math.pow(t-i,2),l=Math.sqrt(a);let c=1;l<200?c=1:l>500?c=.4:c=-.0016668*l+1.233334;let u=s.maxRandomnessOffset||0;u*u*100>a&&(u=l/10);const d=u/2,f=.2+DF(s)*.2;let h=s.bowing*s.maxRandomnessOffset*(i-t)/200,m=s.bowing*s.maxRandomnessOffset*(e-n)/200;h=Le(h,s,c),m=Le(m,s,c);const p=[],U=()=>Le(d,s,c),y=()=>Le(u,s,c),E=s.preserveVertices;return o?p.push({op:"move",data:[e+(E?0:U()),t+(E?0:U())]}):p.push({op:"move",data:[e+(E?0:Le(u,s,c)),t+(E?0:Le(u,s,c))]}),o?p.push({op:"bcurveTo",data:[h+e+(n-e)*f+U(),m+t+(i-t)*f+U(),h+e+2*(n-e)*f+U(),m+t+2*(i-t)*f+U(),n+(E?0:U()),i+(E?0:U())]}):p.push({op:"bcurveTo",data:[h+e+(n-e)*f+y(),m+t+(i-t)*f+y(),h+e+2*(n-e)*f+y(),m+t+2*(i-t)*f+y(),n+(E?0:y()),i+(E?0:y())]}),p}function EC(e,t,n){const i=[];i.push([e[0][0]+Le(t,n),e[0][1]+Le(t,n)]),i.push([e[0][0]+Le(t,n),e[0][1]+Le(t,n)]);for(let s=1;s<e.length;s++)i.push([e[s][0]+Le(t,n),e[s][1]+Le(t,n)]),s===e.length-1&&i.push([e[s][0]+Le(t,n),e[s][1]+Le(t,n)]);return Ib(i,null,n)}function Ib(e,t,n){const i=e.length,s=[];if(i>3){const r=[],o=1-n.curveTightness;s.push({op:"move",data:[e[1][0],e[1][1]]});for(let a=1;a+2<i;a++){const l=e[a];r[0]=[l[0],l[1]],r[1]=[l[0]+(o*e[a+1][0]-o*e[a-1][0])/6,l[1]+(o*e[a+1][1]-o*e[a-1][1])/6],r[2]=[e[a+1][0]+(o*e[a][0]-o*e[a+2][0])/6,e[a+1][1]+(o*e[a][1]-o*e[a+2][1])/6],r[3]=[e[a+1][0],e[a+1][1]],s.push({op:"bcurveTo",data:[r[1][0],r[1][1],r[2][0],r[2][1],r[3][0],r[3][1]]})}}else i===3?(s.push({op:"move",data:[e[1][0],e[1][1]]}),s.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):i===2&&s.push(...el(e[0][0],e[0][1],e[1][0],e[1][1],n));return s}function vC(e,t,n,i,s,r,o,a){const l=a.roughness===0,c=[],u=[];if(l){e=e/4,u.push([t+i*Math.cos(-e),n+s*Math.sin(-e)]);for(let d=0;d<=Math.PI*2;d=d+e){const f=[t+i*Math.cos(d),n+s*Math.sin(d)];c.push(f),u.push(f)}u.push([t+i*Math.cos(0),n+s*Math.sin(0)]),u.push([t+i*Math.cos(e),n+s*Math.sin(e)])}else{const d=Le(.5,a)-Math.PI/2;u.push([Le(r,a)+t+.9*i*Math.cos(d-e),Le(r,a)+n+.9*s*Math.sin(d-e)]);const f=Math.PI*2+d-.01;for(let h=d;h<f;h=h+e){const m=[Le(r,a)+t+i*Math.cos(h),Le(r,a)+n+s*Math.sin(h)];c.push(m),u.push(m)}u.push([Le(r,a)+t+i*Math.cos(d+Math.PI*2+o*.5),Le(r,a)+n+s*Math.sin(d+Math.PI*2+o*.5)]),u.push([Le(r,a)+t+.98*i*Math.cos(d+o),Le(r,a)+n+.98*s*Math.sin(d+o)]),u.push([Le(r,a)+t+.9*i*Math.cos(d+o*.5),Le(r,a)+n+.9*s*Math.sin(d+o*.5)])}return[u,c]}function wC(e,t,n,i,s,r,o,a,l){const c=r+Le(.1,l),u=[];u.push([Le(a,l)+t+.9*i*Math.cos(c-e),Le(a,l)+n+.9*s*Math.sin(c-e)]);for(let d=c;d<=o;d=d+e)u.push([Le(a,l)+t+i*Math.cos(d),Le(a,l)+n+s*Math.sin(d)]);return u.push([t+i*Math.cos(o),n+s*Math.sin(o)]),u.push([t+i*Math.cos(o),n+s*Math.sin(o)]),Ib(u,null,l)}function Rre(e,t,n,i,s,r,o,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let u=[0,0];const d=a.disableMultiStroke?1:2,f=a.preserveVertices;for(let h=0;h<d;h++)h===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(f?0:Le(c[0],a)),o[1]+(f?0:Le(c[0],a))]}),u=f?[s,r]:[s+Le(c[h],a),r+Le(c[h],a)],l.push({op:"bcurveTo",data:[e+Le(c[h],a),t+Le(c[h],a),n+Le(c[h],a),i+Le(c[h],a),u[0],u[1]]});return l}function Zg(e){return[...e]}function kre(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const i=[];if(n===3)i.push(Zg(e[0]),Zg(e[1]),Zg(e[2]),Zg(e[2]));else{const s=[];s.push(e[0],e[0]);for(let a=1;a<e.length;a++)s.push(e[a]),a===e.length-1&&s.push(e[a]);const r=[],o=1-t;i.push(Zg(s[0]));for(let a=1;a+2<s.length;a++){const l=s[a];r[0]=[l[0],l[1]],r[1]=[l[0]+(o*s[a+1][0]-o*s[a-1][0])/6,l[1]+(o*s[a+1][1]-o*s[a-1][1])/6],r[2]=[s[a+1][0]+(o*s[a][0]-o*s[a+2][0])/6,s[a+1][1]+(o*s[a][1]-o*s[a+2][1])/6],r[3]=[s[a+1][0],s[a+1][1]],i.push(r[1],r[2],r[3])}}return i}function Dre(e,t){return Math.sqrt(o2(e,t))}function o2(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Lre(e,t,n){const i=o2(t,n);if(i===0)return o2(e,t);let s=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i;return s=Math.max(0,Math.min(1,s)),o2(e,mu(t,n,s))}function mu(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function Nre(e,t){const n=e[t+0],i=e[t+1],s=e[t+2],r=e[t+3];let o=3*i[0]-2*n[0]-r[0];o*=o;let a=3*i[1]-2*n[1]-r[1];a*=a;let l=3*s[0]-2*r[0]-n[0];l*=l;let c=3*s[1]-2*r[1]-n[1];return c*=c,o<l&&(o=l),a<c&&(a=c),o+a}function L3(e,t,n,i){const s=i||[];if(Nre(e,t)<n){const r=e[t+0];s.length?Dre(s[s.length-1],r)>1&&s.push(r):s.push(r),s.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],c=e[t+3],u=mu(o,a,.5),d=mu(a,l,.5),f=mu(l,c,.5),h=mu(u,d,.5),m=mu(d,f,.5),p=mu(h,m,.5);L3([o,u,h,p],0,n,s),L3([p,m,f,c],0,n,s)}return s}function LF(e,t){return xb(e,0,e.length,t)}function xb(e,t,n,i,s){const r=s||[],o=e[t],a=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=Lre(e[u],o,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>i?(xb(e,t,c+1,i,r),xb(e,c,n,i,r)):(r.length||r.push(o),r.push(a)),r}function ep(e,t=.15,n){const i=[],s=(e.length-1)/3;for(let r=0;r<s;r++){const o=r*3;L3(e,o,t,i)}return n&&n>0?xb(i,0,i.length,n):i}function Ore(e,t,n){const i=W9(e),s=AF(CF(i)),r=[];let o=[],a=[0,0],l=[];const c=()=>{l.length>=4&&o.push(...ep(l,t)),l=[]},u=()=>{c(),o.length&&(r.push(o),o=[])};for(const{key:f,data:h}of s)switch(f){case"M":u(),a=[h[0],h[1]],o.push(a);break;case"L":c(),o.push([h[0],h[1]]);break;case"C":if(!l.length){const m=o.length?o[o.length-1]:a;l.push([m[0],m[1]])}l.push([h[0],h[1]]),l.push([h[2],h[3]]),l.push([h[4],h[5]]);break;case"Z":c(),o.push([a[0],a[1]]);break}if(u(),!n)return r;const d=[];for(const f of r){const h=LF(f,n);h.length&&d.push(h)}return d}const Cs="none";class j0{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return gse()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,i){return{shape:t,sets:n||[],options:i||this.defaultOptions}}line(t,n,i,s,r){const o=this._o(r);return this._d("line",[RF(t,n,i,s,o)],o)}rectangle(t,n,i,s,r){const o=this._o(r),a=[],l=Tre(t,n,i,s,o);if(o.fill){const c=[[t,n],[t+i,n],[t+i,n+s],[t,n+s]];o.fillStyle==="solid"?a.push(G8([c],o)):a.push(mf([c],o))}return o.stroke!==Cs&&a.push(l),this._d("rectangle",a,o)}ellipse(t,n,i,s,r){const o=this._o(r),a=[],l=kF(i,s,o),c=D3(t,n,o,l);if(o.fill)if(o.fillStyle==="solid"){const u=D3(t,n,o,l).opset;u.type="fillPath",a.push(u)}else a.push(mf([c.estimatedPoints],o));return o.stroke!==Cs&&a.push(c.opset),this._d("ellipse",a,o)}circle(t,n,i,s){const r=this.ellipse(t,n,i,i,s);return r.shape="circle",r}linearPath(t,n){const i=this._o(n);return this._d("linearPath",[r2(t,!1,i)],i)}arc(t,n,i,s,r,o,a=!1,l){const c=this._o(l),u=[],d=UC(t,n,i,s,r,o,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const f=Object.assign({},c);f.disableMultiStroke=!0;const h=UC(t,n,i,s,r,o,!0,!1,f);h.type="fillPath",u.push(h)}else u.push(Ire(t,n,i,s,r,o,c));return c.stroke!==Cs&&u.push(d),this._d("arc",u,c)}curve(t,n){const i=this._o(n),s=[],r=pC(t,i);if(i.fill&&i.fill!==Cs&&t.length>=3)if(i.fillStyle==="solid"){const o=pC(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));s.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=kre(t),a=ep(o,10,(1+i.roughness)/2);s.push(mf([a],i))}return i.stroke!==Cs&&s.push(r),this._d("curve",s,i)}polygon(t,n){const i=this._o(n),s=[],r=r2(t,!0,i);return i.fill&&(i.fillStyle==="solid"?s.push(G8([t],i)):s.push(mf([t],i))),i.stroke!==Cs&&s.push(r),this._d("polygon",s,i)}path(t,n){const i=this._o(n),s=[];if(!t)return this._d("path",s,i);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const r=i.fill&&i.fill!=="transparent"&&i.fill!==Cs,o=i.stroke!==Cs,a=!!(i.simplification&&i.simplification<1),l=a?4-4*(i.simplification||1):(1+i.roughness)/2,c=Ore(t,1,l),u=bC(t,i);if(r)if(i.fillStyle==="solid")if(c.length===1){const d=bC(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));s.push({type:"fillPath",ops:this._mergedShape(d.ops)})}else s.push(G8(c,i));else s.push(mf(c,i));return o&&(a?c.forEach(d=>{s.push(r2(d,!1,i))}):s.push(u)),this._d("path",s,i)}opsToPath(t,n){let i="";for(const s of t.ops){const r=typeof n=="number"&&n>=0?s.data.map(o=>+o.toFixed(n)):s.data;switch(s.op){case"move":i+=`M${r[0]} ${r[1]} `;break;case"bcurveTo":i+=`C${r[0]} ${r[1]}, ${r[2]} ${r[3]}, ${r[4]} ${r[5]} `;break;case"lineTo":i+=`L${r[0]} ${r[1]} `;break}}return i.trim()}toPaths(t){const n=t.sets||[],i=t.options||this.defaultOptions,s=[];for(const r of n){let o=null;switch(r.type){case"path":o={d:this.opsToPath(r),stroke:i.stroke,strokeWidth:i.strokeWidth,fill:Cs};break;case"fillPath":o={d:this.opsToPath(r),stroke:Cs,strokeWidth:0,fill:i.fill||Cs};break;case"fillSketch":o=this.fillSketch(r,i);break}o&&s.push(o)}return s}fillSketch(t,n){let i=n.fillWeight;return i<0&&(i=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||Cs,strokeWidth:i,fill:Cs}}_mergedShape(t){return t.filter((n,i)=>i===0?!0:n.op!=="move")}}class Pre{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new j0(n)}draw(t){const n=t.sets||[],i=t.options||this.getDefaultOptions(),s=this.ctx,r=t.options.fixedDecimalPlaceDigits;for(const o of n)switch(o.type){case"path":s.save(),s.strokeStyle=i.stroke==="none"?"transparent":i.stroke,s.lineWidth=i.strokeWidth,i.strokeLineDash&&s.setLineDash(i.strokeLineDash),i.strokeLineDashOffset&&(s.lineDashOffset=i.strokeLineDashOffset),this._drawToContext(s,o,r),s.restore();break;case"fillPath":{s.save(),s.fillStyle=i.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(s,o,r,a),s.restore();break}case"fillSketch":this.fillSketch(s,o,i);break}}fillSketch(t,n,i){let s=i.fillWeight;s<0&&(s=i.strokeWidth/2),t.save(),i.fillLineDash&&t.setLineDash(i.fillLineDash),i.fillLineDashOffset&&(t.lineDashOffset=i.fillLineDashOffset),t.strokeStyle=i.fill||"",t.lineWidth=s,this._drawToContext(t,n,i.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,i,s="nonzero"){t.beginPath();for(const r of n.ops){const o=typeof i=="number"&&i>=0?r.data.map(a=>+a.toFixed(i)):r.data;switch(r.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1]);break}}n.type==="fillPath"?t.fill(s):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,i,s,r){const o=this.gen.line(t,n,i,s,r);return this.draw(o),o}rectangle(t,n,i,s,r){const o=this.gen.rectangle(t,n,i,s,r);return this.draw(o),o}ellipse(t,n,i,s,r){const o=this.gen.ellipse(t,n,i,s,r);return this.draw(o),o}circle(t,n,i,s){const r=this.gen.circle(t,n,i,s);return this.draw(r),r}linearPath(t,n){const i=this.gen.linearPath(t,n);return this.draw(i),i}polygon(t,n){const i=this.gen.polygon(t,n);return this.draw(i),i}arc(t,n,i,s,r,o,a=!1,l){const c=this.gen.arc(t,n,i,s,r,o,a,l);return this.draw(c),c}curve(t,n){const i=this.gen.curve(t,n);return this.draw(i),i}path(t,n){const i=this.gen.path(t,n);return this.draw(i),i}}const fU="http://www.w3.org/2000/svg";class Fre{constructor(t,n){this.svg=t,this.gen=new j0(n)}draw(t){const n=t.sets||[],i=t.options||this.getDefaultOptions(),s=this.svg.ownerDocument||window.document,r=s.createElementNS(fU,"g"),o=t.options.fixedDecimalPlaceDigits;for(const a of n){let l=null;switch(a.type){case"path":{l=s.createElementNS(fU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",i.stroke),l.setAttribute("stroke-width",i.strokeWidth+""),l.setAttribute("fill","none"),i.strokeLineDash&&l.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${i.strokeLineDashOffset}`);break}case"fillPath":{l=s.createElementNS(fU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",i.fill||""),(t.shape==="curve"||t.shape==="polygon")&&l.setAttribute("fill-rule","evenodd");break}case"fillSketch":{l=this.fillSketch(s,a,i);break}}l&&r.appendChild(l)}return r}fillSketch(t,n,i){let s=i.fillWeight;s<0&&(s=i.strokeWidth/2);const r=t.createElementNS(fU,"path");return r.setAttribute("d",this.opsToPath(n,i.fixedDecimalPlaceDigits)),r.setAttribute("stroke",i.fill||""),r.setAttribute("stroke-width",s+""),r.setAttribute("fill","none"),i.fillLineDash&&r.setAttribute("stroke-dasharray",i.fillLineDash.join(" ").trim()),i.fillLineDashOffset&&r.setAttribute("stroke-dashoffset",`${i.fillLineDashOffset}`),r}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,i,s,r){const o=this.gen.line(t,n,i,s,r);return this.draw(o)}rectangle(t,n,i,s,r){const o=this.gen.rectangle(t,n,i,s,r);return this.draw(o)}ellipse(t,n,i,s,r){const o=this.gen.ellipse(t,n,i,s,r);return this.draw(o)}circle(t,n,i,s){const r=this.gen.circle(t,n,i,s);return this.draw(r)}linearPath(t,n){const i=this.gen.linearPath(t,n);return this.draw(i)}polygon(t,n){const i=this.gen.polygon(t,n);return this.draw(i)}arc(t,n,i,s,r,o,a=!1,l){const c=this.gen.arc(t,n,i,s,r,o,a,l);return this.draw(c)}curve(t,n){const i=this.gen.curve(t,n);return this.draw(i)}path(t,n){const i=this.gen.path(t,n);return this.draw(i)}}const Zc={canvas(e,t){return new Pre(e,t)},svg(e,t){return new Fre(e,t)},generator(e){return new j0(e)},newSeed(){return j0.newSeed()}};let NF=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const In=e=>!!e&&e.type==="image"&&!!e.fileId,ft=e=>!!e&&e.type==="image",fs=e=>!!e&&e.type==="embeddable",Bl=e=>!!e&&e.type==="iframe",lr=e=>!!e&&(e.type==="iframe"||e.type==="embeddable"),ue=e=>e!=null&&e.type==="text",OF=e=>e!=null&&e.type==="frame",a2=e=>e!=null&&e.type==="magicframe",Te=e=>e!=null&&(e.type==="frame"||e.type==="magicframe"),io=e=>e!=null&&Bre(e.type),Bre=e=>e==="freedraw",Ae=e=>e!=null&&K9(e.type),xe=e=>e!=null&&e.type==="arrow",he=e=>xe(e)&&e.elbowed,zre=e=>xe(e)&&!e.elbowed&&!e.roundness,Hre=e=>xe(e)&&!e.elbowed&&e.roundness!==null,K9=e=>e==="arrow"||e==="line",Ca=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&PF(e.type),PF=e=>e==="arrow",so=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),Vre=e=>e!=null&&(e.type==="rectangle"||e.type==="diamond"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),ju=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||xe(e)),FF=e=>{const t=e==null?void 0:e.type;if(!t)return!1;switch(t){case"text":case"diamond":case"rectangle":case"iframe":case"embeddable":case"ellipse":case"arrow":case"freedraw":case"line":case"frame":case"magicframe":case"image":case"selection":return!0;default:return jo(t,null),!1}},m5=e=>e.type==="rectangle"||e.type==="ellipse"||e.type==="diamond",ns=e=>{var t;return ju(e)&&!!((t=e.boundElements)!=null&&t.some(({type:n})=>n==="text"))},Xt=e=>e!==null&&"containerId"in e&&e.containerId!==null&&ue(e),BF=e=>!!e.startBinding||!!e.endBinding,Od=e=>e==="rectangle"||e==="embeddable"||e==="iframe"||e==="image",zF=e=>e==="line"||e==="arrow"||e==="diamond",$re=(e,t)=>!!((e===mn.ADAPTIVE_RADIUS||e===mn.LEGACY)&&Od(t.type)||e===mn.PROPORTIONAL_RADIUS&&zF(t.type)),Gre=e=>zF(e.type)?{type:mn.PROPORTIONAL_RADIUS}:Od(e.type)?{type:mn.ADAPTIVE_RADIUS}:null,Cb=e=>Object.hasOwn(e,"fixedPoint")&&e.fixedPoint!=null,th=e=>zre(e)?"sharpArrow":Hre(e)?"curvedArrow":he(e)?"elbowArrow":"line";function HF(e,t,n){return{center:e,halfWidth:t,halfHeight:n}}const Xre=(e,t)=>{const{halfWidth:n,halfHeight:i,center:s}=t,r=n,o=i,a=ql(re(e),At(re(s),-1)),l=Math.abs(a[0]),c=Math.abs(a[1]);let u=.707,d=.707;for(let m=0;m<3;m++){const p=r*u,U=o*d,y=(r*r-o*o)*u**3/r,E=(o*o-r*r)*d**3/o,v=p-y,w=U-E,I=l-y,M=c-E,T=Math.hypot(w,v),_=Math.hypot(M,I);u=Math.min(1,Math.max(0,(I*T/_+y)/r)),d=Math.min(1,Math.max(0,(M*T/_+E)/o));const x=Math.hypot(d,u);u/=x,d/=x}const[f,h]=[r*u*Math.sign(a[0]),o*d*Math.sign(a[1])];return Je(Re(a),S(f,h))};function jre({center:e,halfWidth:t,halfHeight:n},[i,s]){const[r,o]=e,a=i[0]-r,l=i[1]-o,c=s[0]-r,u=s[1]-o,d=Math.pow(c-a,2)/Math.pow(t,2)+Math.pow(u-l,2)/Math.pow(n,2),f=2*(a*(c-a)/Math.pow(t,2)+l*(u-l)/Math.pow(n,2)),h=Math.pow(a,2)/Math.pow(t,2)+Math.pow(l,2)/Math.pow(n,2)-1,m=(-f+Math.sqrt(Math.pow(f,2)-4*d*h))/(2*d),p=(-f-Math.sqrt(Math.pow(f,2)-4*d*h))/(2*d),U=[S(a+m*(c-a)+r,l+m*(u-l)+o),S(a+p*(c-a)+r,l+p*(u-l)+o)].filter(y=>!isNaN(y[0])&&!isNaN(y[1]));return U.length===2&&Ir(U[0],U[1])?[U[0]]:U}function Z9(e,t=0){const n=es(Math.min(e.width,e.height),e);if(n<=0){const f=x3(S(e.x-t,e.y-t),S(e.x+e.width+t,e.y+e.height+t)),h=we(S(f[0][0]+n,f[0][1]),S(f[1][0]-n,f[0][1])),m=we(S(f[1][0],f[0][1]+n),S(f[1][0],f[1][1]-n)),p=we(S(f[0][0]+n,f[1][1]),S(f[1][0]-n,f[1][1])),U=we(S(f[0][0],f[1][1]-n),S(f[0][0],f[0][1]+n));return[[h,m,p,U],[]]}const i=Xn(e),s=x3(S(e.x,e.y),S(e.x+e.width,e.y+e.height)),r=we(S(s[0][0]+n,s[0][1]),S(s[1][0]-n,s[0][1])),o=we(S(s[1][0],s[0][1]+n),S(s[1][0],s[1][1]-n)),a=we(S(s[0][0]+n,s[1][1]),S(s[1][0]-n,s[1][1])),l=we(S(s[0][0],s[1][1]-n),S(s[0][0],s[0][1]+n)),c=[At(Bn(re(S(s[0][0]-t,s[0][1]-t),i)),t),At(Bn(re(S(s[1][0]+t,s[0][1]-t),i)),t),At(Bn(re(S(s[1][0]+t,s[1][1]+t),i)),t),At(Bn(re(S(s[0][0]-t,s[1][1]+t),i)),t)],u=[Lo(Re(c[0],l[1]),Re(c[0],S(l[1][0]+2/3*(s[0][0]-l[1][0]),l[1][1]+2/3*(s[0][1]-l[1][1]))),Re(c[0],S(r[0][0]+2/3*(s[0][0]-r[0][0]),r[0][1]+2/3*(s[0][1]-r[0][1]))),Re(c[0],r[0])),Lo(Re(c[1],r[1]),Re(c[1],S(r[1][0]+2/3*(s[1][0]-r[1][0]),r[1][1]+2/3*(s[0][1]-r[1][1]))),Re(c[1],S(o[0][0]+2/3*(s[1][0]-o[0][0]),o[0][1]+2/3*(s[0][1]-o[0][1]))),Re(c[1],o[0])),Lo(Re(c[2],o[1]),Re(c[2],S(o[1][0]+2/3*(s[1][0]-o[1][0]),o[1][1]+2/3*(s[1][1]-o[1][1]))),Re(c[2],S(a[1][0]+2/3*(s[1][0]-a[1][0]),a[1][1]+2/3*(s[1][1]-a[1][1]))),Re(c[2],a[1])),Lo(Re(c[3],a[0]),Re(c[3],S(a[0][0]+2/3*(s[0][0]-a[0][0]),a[0][1]+2/3*(s[1][1]-a[0][1]))),Re(c[3],S(l[0][0]+2/3*(s[0][0]-l[0][0]),l[0][1]+2/3*(s[1][1]-l[0][1]))),Re(c[3],l[0]))];return[[we(u[0][3],u[1][0]),we(u[1][3],u[2][0]),we(u[2][3],u[3][0]),we(u[3][3],u[0][0])],u]}function q9(e,t=0){var w;const[n,i,s,r,o,a,l,c]=zb(e),u=es(Math.abs(n-l),e),d=es(Math.abs(r-i),e);if(((w=e.roundness)==null?void 0:w.type)==null){const[I,M,T,_]=[S(e.x+n,e.y+i-t),S(e.x+s+t,e.y+r),S(e.x+o,e.y+a+t),S(e.x+l-t,e.y+c)],x=we(S(I[0]+u,I[1]+d),S(M[0]-u,M[1]-d)),C=we(S(M[0]-u,M[1]+d),S(T[0]+u,T[1]-d)),R=we(S(T[0]-u,T[1]-d),S(_[0]+u,_[1]+d)),N=we(S(_[0]+u,_[1]-d),S(I[0]-u,I[1]+d));return[[x,C,R,N],[]]}const f=Xn(e),[h,m,p,U]=[S(e.x+n,e.y+i),S(e.x+s,e.y+r),S(e.x+o,e.y+a),S(e.x+l,e.y+c)],y=[At(Bn(re(m,f)),t),At(Bn(re(p,f)),t),At(Bn(re(U,f)),t),At(Bn(re(h,f)),t)],E=[Lo(Re(y[0],S(m[0]-u,m[1]-d)),Re(y[0],m),Re(y[0],m),Re(y[0],S(m[0]-u,m[1]+d))),Lo(Re(y[1],S(p[0]+u,p[1]-d)),Re(y[1],p),Re(y[1],p),Re(y[1],S(p[0]-u,p[1]-d))),Lo(Re(y[2],S(U[0]+u,U[1]+d)),Re(y[2],U),Re(y[2],U),Re(y[2],S(U[0]+u,U[1]-d))),Lo(Re(y[3],S(h[0]-u,h[1]+d)),Re(y[3],h),Re(y[3],h),Re(y[3],S(h[0]+u,h[1]+d)))];return[[we(E[0][3],E[1][0]),we(E[1][3],E[2][0]),we(E[2][3],E[3][0]),we(E[3][3],E[0][0])],E]}const Ab=e=>{if(e.type==="arrow")return!1;const t=!Kr(e.backgroundColor)||ns(e)||lr(e)||ue(e);return e.type==="line"||e.type==="freedraw"?t&&nl(e.points):t||ft(e)},pf=({x:e,y:t,element:n,shape:i,threshold:s=10,frameNameBound:r=null})=>{let o=Ab(n)&&q0(S(e,t),i)||n4(S(e,t),i,s);return!o&&r&&(o=q0(S(e,t),{type:"polygon",data:uz(r).data})),o},Q9=(e,t,n,i,s=0)=>{let[r,o,a,l]=ro(n,i);return r-=s,o-=s,a+=s,l+=s,aF(S(r,o),S(e,t),S(a,l))},Yre=(e,t)=>!pf(e)&&!VF(e.x,e.y,xB(e.element,t))&&Q9(e.x,e.y,e.element,t),VF=(e,t,n)=>!!n&&q0(S(e,t),n),N3=(e,t,n=0)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return Wre(e,t,n);case"diamond":return Kre(e,t,n);case"ellipse":return Zre(e,t,n);default:throw new Error(`Unimplemented element type '${e.type}'`)}},Wre=(e,t,n=0)=>{const i=Xn(e),s=Z(t[0],i,-e.angle),r=Z(t[1],i,-e.angle),[o,a]=Z9(e,n);return o.map(l=>ud(we(s,r),l)).filter(l=>l!=null).map(l=>Z(l,i,e.angle)).concat(a.flatMap(l=>lF(l,we(s,r))).filter(l=>l!=null).map(l=>Z(l,i,e.angle))).filter((l,c,u)=>u.findIndex(d=>Ir(l,d))===c)},Kre=(e,t,n=0)=>{const i=Xn(e),s=Z(t[0],i,-e.angle),r=Z(t[1],i,-e.angle),[o,a]=q9(e,n);return o.map(l=>ud(we(s,r),l)).filter(l=>l!=null).map(l=>Z(l,i,e.angle)).concat(a.flatMap(l=>lF(l,we(s,r))).filter(l=>l!=null).map(l=>Z(l,i,e.angle))).filter((l,c,u)=>u.findIndex(d=>Ir(l,d))===c)},Zre=(e,t,n=0)=>{const i=Xn(e),s=Z(t[0],i,-e.angle),r=Z(t[1],i,-e.angle);return jre(HF(i,e.width/2+n,e.height/2+n),I3(s,r)).map(o=>Z(o,i,e.angle))},p5=(e,t)=>{switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return qre(e,t);case"diamond":return Qre(e,t);case"ellipse":return Jre(e,t)}},qre=(e,t)=>{const n=Xn(e),i=Z(t,n,-e.angle),[s,r]=Z9(e);return Math.min(...s.map(o=>V9(i,o)),...r.map(o=>cF(o,i)).filter(o=>o!==null))},Qre=(e,t)=>{const n=Xn(e),i=Z(t,n,-e.angle),[s,r]=q9(e);return Math.min(...s.map(o=>V9(i,o)),...r.map(o=>cF(o,i)).filter(o=>o!==null))},Jre=(e,t)=>{const n=Xn(e);return Xre(Z(t,n,-e.angle),HF(n,e.width/2,e.height/2))},Pn=[1,0],qi=[0,1],cr=[-1,0],jr=[0,-1],Ah=e=>{const[t,n]=e,i=Math.abs(t),s=Math.abs(n);return t>s?Pn:t<=-s?cr:n>i?qi:jr},Rs=(e,t)=>Ah(re(e,t)),Aa=(e,t)=>Oo(Rs(e,t)),zn=(e,t)=>e[0]===t[0]&&e[1]===t[1],Oo=e=>zn(e,Pn)||zn(e,cr),eoe=(e,t,n)=>{const i=Ew(t);ti(e.width>0&&e.height>0,"Diamond element has no width or height"),ti(!Ir(i,n),"The point is too close to the element mid point to determine heading");const s=.95,r=Re(At(re(Z(S(e.x+e.width/2,e.y),i,e.angle),i),s),i),o=Re(At(re(Z(S(e.x+e.width,e.y+e.height/2),i,e.angle),i),s),i),a=Re(At(re(Z(S(e.x+e.width/2,e.y+e.height),i,e.angle),i),s),i),l=Re(At(re(Z(S(e.x,e.y+e.height/2),i,e.angle),i),s),i);if(Ut(re(n,r),re(r,o))<=0&&Ut(re(n,r),re(r,l))>0)return Rs(r,i);if(Ut(re(n,o),re(o,a))<=0&&Ut(re(n,o),re(o,r))>0)return Rs(o,i);if(Ut(re(n,a),re(a,l))<=0&&Ut(re(n,a),re(a,o))>0)return Rs(a,i);if(Ut(re(n,l),re(l,r))<=0&&Ut(re(n,l),re(l,a))>0)return Rs(l,i);if(Ut(re(n,i),re(r,i))<=0&&Ut(re(n,i),re(o,i))>0){const u=e.width>e.height?r:o;return Rs(u,i)}else if(Ut(re(n,i),re(o,i))<=0&&Ut(re(n,i),re(a,i))>0){const u=e.width>e.height?a:o;return Rs(u,i)}else if(Ut(re(n,i),re(a,i))<=0&&Ut(re(n,i),re(l,i))>0){const u=e.width>e.height?a:l;return Rs(u,i)}const c=e.width>e.height?r:l;return Rs(c,i)},J9=(e,t,n)=>{const s=Ew(t);if(e.type==="diamond")return eoe(e,t,n);const r=_1(S(t[0],t[1]),s,2),o=_1(S(t[2],t[1]),s,2),a=_1(S(t[0],t[3]),s,2),l=_1(S(t[2],t[3]),s,2);return B8([r,o,s],n)?jr:B8([o,l,s],n)?Pn:B8([l,a,s],n)?qi:cr},$F=e=>[e[0]===0?0:e[0]>0?-1:1,e[1]===0?0:e[1]>0?-1:1];function _C(e,t,n,i=s=>s){return e*i(.5-t*(.5-n))}function toe(e){return[-e[0],-e[1]]}function Fr(e,t){return[e[0]+t[0],e[1]+t[1]]}function Js(e,t){return[e[0]-t[0],e[1]-t[1]]}function Nr(e,t){return[e[0]*t,e[1]*t]}function noe(e,t){return[e[0]/t,e[1]/t]}function qg(e){return[e[1],-e[0]]}function TC(e,t){return e[0]*t[0]+e[1]*t[1]}function ioe(e,t){return e[0]===t[0]&&e[1]===t[1]}function soe(e){return Math.hypot(e[0],e[1])}function roe(e){return e[0]*e[0]+e[1]*e[1]}function SC(e,t){return roe(Js(e,t))}function GF(e){return noe(e,soe(e))}function ooe(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function Qg(e,t,n){let i=Math.sin(n),s=Math.cos(n),r=e[0]-t[0],o=e[1]-t[1],a=r*s-o*i,l=r*i+o*s;return[a+t[0],l+t[1]]}function O3(e,t,n){return Fr(e,Nr(Js(t,e),n))}function IC(e,t,n){return Fr(e,Nr(t,n))}var{min:Qd,PI:aoe}=Math,xC=.275,Jg=aoe+1e-4;function loe(e,t={}){let{size:n=16,smoothing:i=.5,thinning:s=.5,simulatePressure:r=!0,easing:o=V=>V,start:a={},end:l={},last:c=!1}=t,{cap:u=!0,easing:d=V=>V*(2-V)}=a,{cap:f=!0,easing:h=V=>--V*V*V+1}=l;if(e.length===0||n<=0)return[];let m=e[e.length-1].runningLength,p=a.taper===!1?0:a.taper===!0?Math.max(n,m):a.taper,U=l.taper===!1?0:l.taper===!0?Math.max(n,m):l.taper,y=Math.pow(n*i,2),E=[],v=[],w=e.slice(0,10).reduce((V,X)=>{let j=X.pressure;if(r){let q=Qd(1,X.distance/n),fe=Qd(1,1-q);j=Qd(1,V+(fe-V)*(q*xC))}return(V+j)/2},e[0].pressure),I=_C(n,s,e[e.length-1].pressure,o),M,T=e[0].vector,_=e[0].point,x=_,C=_,R=x,N=!1;for(let V=0;V<e.length;V++){let{pressure:X}=e[V],{point:j,vector:q,distance:fe,runningLength:ie}=e[V];if(V<e.length-1&&m-ie<3)continue;if(s){if(r){let Ce=Qd(1,fe/n),Ge=Qd(1,1-Ce);X=Qd(1,w+(Ge-w)*(Ce*xC))}I=_C(n,s,X,o)}else I=n/2;M===void 0&&(M=I);let Ue=ie<p?d(ie/p):1,Ve=m-ie<U?h((m-ie)/U):1;I=Math.max(.01,I*Math.min(Ue,Ve));let $e=(V<e.length-1?e[V+1]:e[V]).vector,nt=V<e.length-1?TC(q,$e):1,zt=TC(q,T)<0&&!N,Mt=nt!==null&&nt<0;if(zt||Mt){let Ce=Nr(qg(T),I);for(let Ge=1/13,Qt=0;Qt<=1;Qt+=Ge)C=Qg(Js(j,Ce),j,Jg*Qt),E.push(C),R=Qg(Fr(j,Ce),j,Jg*-Qt),v.push(R);_=C,x=R,Mt&&(N=!0);continue}if(N=!1,V===e.length-1){let Ce=Nr(qg(q),I);E.push(Js(j,Ce)),v.push(Fr(j,Ce));continue}let qt=Nr(qg(O3($e,q,nt)),I);C=Js(j,qt),(V<=1||SC(_,C)>y)&&(E.push(C),_=C),R=Fr(j,qt),(V<=1||SC(x,R)>y)&&(v.push(R),x=R),w=X,T=q}let D=e[0].point.slice(0,2),$=e.length>1?e[e.length-1].point.slice(0,2):Fr(e[0].point,[1,1]),G=[],H=[];if(e.length===1){if(!(p||U)||c){let V=IC(D,GF(qg(Js(D,$))),-(M||I)),X=[];for(let j=1/13,q=j;q<=1;q+=j)X.push(Qg(V,D,Jg*2*q));return X}}else{if(!(p||U&&e.length===1))if(u)for(let X=1/13,j=X;j<=1;j+=X){let q=Qg(v[0],D,Jg*j);G.push(q)}else{let X=Js(E[0],v[0]),j=Nr(X,.5),q=Nr(X,.51);G.push(Js(D,j),Js(D,q),Fr(D,q),Fr(D,j))}let V=qg(toe(e[e.length-1].vector));if(U||p&&e.length===1)H.push($);else if(f){let X=IC($,V,I);for(let j=1/29,q=j;q<1;q+=j)H.push(Qg(X,$,Jg*3*q))}else H.push(Fr($,Nr(V,I)),Fr($,Nr(V,I*.99)),Js($,Nr(V,I*.99)),Js($,Nr(V,I)))}return E.concat(H,v.reverse(),G)}function coe(e,t={}){var n;let{streamline:i=.5,size:s=16,last:r=!1}=t;if(e.length===0)return[];let o=.15+(1-i)*.85,a=Array.isArray(e[0])?e:e.map(({x:h,y:m,pressure:p=.5})=>[h,m,p]);if(a.length===2){let h=a[1];a=a.slice(0,-1);for(let m=1;m<5;m++)a.push(O3(a[0],h,m/4))}a.length===1&&(a=[...a,[...Fr(a[0],[1,1]),...a[0].slice(2)]]);let l=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,u=0,d=l[0],f=a.length-1;for(let h=1;h<a.length;h++){let m=r&&h===f?a[h].slice(0,2):O3(d.point,a[h],o);if(ioe(d.point,m))continue;let p=ooe(m,d.point);if(u+=p,h<f&&!c){if(u<s)continue;c=!0}d={point:m,pressure:a[h][2]>=0?a[h][2]:.5,vector:GF(Js(d.point,m)),distance:p,runningLength:u},l.push(d)}return l[0].vector=((n=l[1])==null?void 0:n.vector)||[0,0],l}function uoe(e,t={}){return loe(coe(e,t),t)}const ri=10,doe=(e,t,n,i,s,r,o)=>{var C,R;const{width:a,height:l}=tl(e),c=n/a,u=i/l,d=(((C=e.crop)==null?void 0:C.x)??0)/c,f=(((R=e.crop)==null?void 0:R.y)??0)/u,h=Z(S(s,r),Xn(e),-e.angle);s=h[0],r=h[1];let m=e.width,p=e.height,U=e.crop??{x:0,y:0,width:n,height:i,naturalWidth:n,naturalHeight:i};const y=U.height,E=U.width,v=e.scale[0]===-1,w=e.scale[1]===-1;let I=r-e.y,M=s-e.x;t.includes("n")&&(p=Xe(e.height-I,ri,w?l-f:e.height+f)),t.includes("s")&&(I=r-e.y-e.height,p=Xe(e.height+I,ri,w?e.height+f:l-f)),t.includes("e")&&(M=s-e.x-e.width,m=Xe(e.width+M,ri,v?e.width+d:a-d)),t.includes("w")&&(m=Xe(e.width-M,ri,v?a-d:e.width+d));const T=N=>{N.height=p*u,N.width=m*c};T(U);const _=(N,D)=>{T(D),N.includes("n")&&(w||(D.y+=y-D.height)),N.includes("s")&&w&&(D.y+=y-D.height),N.includes("e")&&v&&(D.x+=E-D.width),N.includes("w")&&(v||(D.x+=E-D.width))};switch(t){case"n":{if(o){const N=d+e.width/2,D=a-d-e.width/2,$=Math.min(N,D)*2;m=Xe(p*o,ri,$),p=m/o}_(t,U),o&&(U.x+=(E-U.width)/2);break}case"s":{if(o){const N=d+e.width/2,D=a-d-e.width/2,$=Math.min(N,D)*2;m=Xe(p*o,ri,$),p=m/o}_(t,U),o&&(U.x+=(E-U.width)/2);break}case"w":{if(o){const N=f+e.height/2,D=l-f-e.height/2,$=Math.min(N,D)*2;p=Xe(m/o,ri,$),m=p*o}_(t,U),o&&(U.y+=(y-U.height)/2);break}case"e":{if(o){const N=f+e.height/2,D=l-f-e.height/2,$=Math.min(N,D)*2;p=Xe(m/o,ri,$),m=p*o}_(t,U),o&&(U.y+=(y-U.height)/2);break}case"ne":{if(o)if(M>-I){const N=w?l-f:f+e.height;p=Xe(m/o,ri,N),m=p*o}else{const N=v?d+e.width:a-d;m=Xe(p*o,ri,N),p=m/o}_(t,U);break}case"nw":{if(o)if(M<I){const N=w?l-f:f+e.height;p=Xe(m/o,ri,N),m=p*o}else{const N=v?a-d:d+e.width;m=Xe(p*o,ri,N),p=m/o}_(t,U);break}case"se":{if(o)if(M>I){const N=w?f+e.height:l-f;p=Xe(m/o,ri,N),m=p*o}else{const N=v?d+e.width:a-d;m=Xe(p*o,ri,N),p=m/o}_(t,U);break}case"sw":{if(o)if(-M>I){const N=w?f+e.height:l-f;p=Xe(m/o,ri,N),m=p*o}else{const N=v?a-d:d+e.width;m=Xe(p*o,ri,N),p=m/o}_(t,U);break}}const x=foe(e,t,m,p,!!o);return sC(U.width,U.naturalWidth)&&sC(U.height,U.naturalHeight)&&(U=null),{x:x[0],y:x[1],width:m,height:p,crop:U}},foe=(e,t,n,i,s)=>{const[r,o,a,l]=fc(e,e.width,e.height,!0),c=S(r,o),u=S(a,l),d=G0(c,u),[f,h,m,p]=fc(e,n,i,!0),U=m-f,y=p-h;let E=[...c];if(["n","w","nw"].includes(t)&&(E=[u[0]-Math.abs(U),u[1]-Math.abs(y)]),t==="ne"){const _=[c[0],u[1]];E=[_[0],_[1]-Math.abs(y)]}if(t==="sw"){const _=[u[0],c[1]];E=[_[0]-Math.abs(U),_[1]]}s&&(["s","n"].includes(t)&&(E[0]=d[0]-U/2),["e","w"].includes(t)&&(E[1]=d[1]-y/2));const v=e.angle,w=Z(E,d,v),I=[E[0]+Math.abs(U)/2,E[1]+Math.abs(y)/2],M=Z(I,d,v);E=Z(w,M,-v);const T=[...E];return T[0]+=e.x-f,T[1]+=e.y-h,T},hoe=(e,t)=>{if(e.crop){const{width:n,height:i}=tl(e),[s,r,o,a,l,c]=Ne(e,t),u=re(Z(S(s,r),S(l,c),e.angle)),d=re(Z(S(o,r),S(l,c),e.angle)),f=Bn(yb(d,u)),h=re(Z(S(s,a),S(l,c),e.angle)),m=yb(h,u),p=Bn(m),{cropX:U,cropY:y}=goe(e.crop,e.scale),E=ql(ql(u,At(f,-U*n/e.crop.naturalWidth)),At(p,-y*i/e.crop.naturalHeight)),v=Re(ql(ql(E,At(f,n/2)),At(p,i/2))),w=Z(Re(E),v,-e.angle);return{...e,x:w[0],y:w[1],width:n,height:i,crop:null}}return e},tl=e=>{if(e.crop){const t=e.width/(e.crop.width/e.crop.naturalWidth),n=e.height/(e.crop.height/e.crop.naturalHeight);return{width:t,height:n}}return{width:e.width,height:e.height}},goe=(e,t)=>{let n=e.x,i=e.y;const s=t[0]===-1,r=t[1]===-1;return s&&(n=e.naturalWidth-Math.abs(n)-e.width),r&&(i=e.naturalHeight-Math.abs(i)-e.height),{cropX:n,cropY:i}},moe=(e,t=!1)=>{const n=e.crop;if(!n)return null;const i=e.scale[0]===-1,s=e.scale[1]===-1;let r=n.x,o=n.y;if(i&&(r=n.naturalWidth-n.width-n.x),s&&(o=n.naturalHeight-n.height-n.y),t)return{x:r,y:o};const{width:a,height:l}=tl(e);return{x:r/(n.naturalWidth/a),y:o/(n.naturalHeight/l)}},Mh={},Mb=(e,t)=>{const n=Mh[e]||(Mh[e]={height:t});return n.height=t,n},XF=e=>{Mh[e]&&delete Mh[e]},poe=e=>{var t;return((t=Mh[e])==null?void 0:t.height)??null},Vn=(e,t,n)=>{const i=e.split(`
`).map(a=>a||" ").join(`
`),s=parseFloat(t),r=Eoe(i,s,n);return{width:nw(i,t),height:r}},jF="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(),YF=(e,t)=>{const n=voe(e);return n===0?Vn(jF.split("").join(`
`),e,t).width+Fn*2:n+Fn*2},ew=(e,t)=>Vn("",e,t).width+Fn*2,Uoe=()=>nw(jF,gt({fontSize:pl,fontFamily:Kc}))>0,Rh=e=>EF(e).replace(/\t/g,"        "),tw=e=>Rh(e).split(`
`),boe=e=>{const t=tw(e.text).length;return e.height/t/e.fontSize},tp=(e,t)=>e*t,WF=(e,t)=>tp(e,t)+Fn*2;let X8;class yoe{constructor(){F(this,"canvas");this.canvas=document.createElement("canvas")}getLineWidth(t,n){const i=this.canvas.getContext("2d");return i.font=n,i.measureText(t).width}}const dd=(e,t)=>(X8||(X8=new yoe),X8.getLineWidth(e,t)),nw=(e,t)=>{const n=tw(e);let i=0;return n.forEach(s=>{i=Math.max(i,dd(s,t))}),i},Eoe=(e,t,n)=>{const i=tw(e).length;return tp(t,n)*i},np=(()=>{const e={};return{calculate:(s,r)=>{const o=s.charCodeAt(0);if(e[r]||(e[r]=[]),!e[r][o]){const a=dd(s,r);e[r][o]=a}return e[r][o]},getCache:s=>e[s],clearCache:s=>{e[s]=[]}}})(),voe=e=>{const t=np.getCache(e);if(!t)return 0;const n=t.filter(i=>i!==void 0);return Math.max(...n)};let j8,hU,Y8;const woe=e=>(j8||(j8=_t.class(...Object.values(ya))),j8.test(e)),_oe=()=>{if(!hU)try{hU=Soe()}catch{hU=Toe()}return hU},iw=()=>(Y8||(Y8=Ioe()),Y8),qs={WHITESPACE:/\s/u,HYPHEN:/-/u,OPENING:/<\(\[\{/u,CLOSING:/>\)\]\}.,:;!\?…\//u},ya={CHAR:new RegExp("\\p{Script=Han}\\p{Script=Hiragana}\\p{Script=Katakana}\\p{Script=Hangul}｀＇＾〃〰〆＃＆＊＋－ー／＼＝｜￤〒￢￣","u"),OPENING:/（［｛〈《｟｢「『【〖〔〘〚＜〝/u,CLOSING:/）］｝〉》｠｣」』】〗〕〙〛＞。．，、〟‥？！：；・〜〞/u,CURRENCY:/￥￦￡￠＄/u},au={FLAG:new RegExp("\\p{RI}\\p{RI}","u"),JOINER:new RegExp("(?:\\p{Emoji_Modifier}|\\uFE0F\\u20E3?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?","u"),ZWJ:/\u200D/u,ANY:/[\p{Emoji}]/u,MOST:/[\p{Extended_Pictographic}\p{Emoji_Presentation}]/u},Toe=()=>_t.or(iw(),En.On(qs.HYPHEN,qs.WHITESPACE,ya.CHAR)),Soe=()=>_t.or(iw(),En.Before(qs.WHITESPACE).Build(),En.After(qs.WHITESPACE,qs.HYPHEN).Build(),En.Before(ya.CHAR,ya.CURRENCY).NotPrecededBy(qs.OPENING,ya.OPENING).Build(),En.After(ya.CHAR).NotFollowedBy(qs.HYPHEN,qs.CLOSING,ya.CLOSING).Build(),En.BeforeMany(ya.OPENING).NotPrecededBy(qs.OPENING).Build(),En.AfterMany(ya.CLOSING).NotFollowedBy(qs.CLOSING).Build(),En.AfterMany(qs.CLOSING).FollowedBy(qs.OPENING).Build()),Ioe=()=>_t.group(_t.or(au.FLAG,_t.and(au.MOST,au.JOINER,_t.build(`(?:${au.ZWJ.source}(?:${au.FLAG.source}|${au.ANY.source}${au.JOINER.source}))*`)))),_t={build:e=>new RegExp(e,"u"),join:(...e)=>e.map(t=>t.source).join(""),and:(...e)=>_t.build(_t.join(...e)),or:(...e)=>_t.build(e.map(t=>t.source).join("|")),group:(...e)=>_t.build(`(${_t.join(...e)})`),class:(...e)=>_t.build(`[${_t.join(...e)}]`)},En={On:(...e)=>{const t=_t.join(...e);return _t.build(`([${t}])`)},Before:(...e)=>{const t=_t.join(...e),n=()=>_t.build(`(?=[${t}])`);return En.Chain(n)},After:(...e)=>{const t=_t.join(...e),n=()=>_t.build(`(?<=[${t}])`);return En.Chain(n)},BeforeMany:(...e)=>{const t=_t.join(...e),n=()=>_t.build(`(?<![${t}])(?=[${t}])`);return En.Chain(n)},AfterMany:(...e)=>{const t=_t.join(...e),n=()=>_t.build(`(?<=[${t}])(?![${t}])`);return En.Chain(n)},NotBefore:(...e)=>{const t=_t.join(...e),n=()=>_t.build(`(?![${t}])`);return En.Chain(n)},NotAfter:(...e)=>{const t=_t.join(...e),n=()=>_t.build(`(?<![${t}])`);return En.Chain(n)},Chain:e=>({Build:e,PreceededBy:(...t)=>{const n=e(),i=En.After(...t).Build(),s=()=>_t.and(i,n);return En.Chain(s)},FollowedBy:(...t)=>{const n=e(),i=En.Before(...t).Build(),s=()=>_t.and(n,i);return En.Chain(s)},NotPrecededBy:(...t)=>{const n=e(),i=En.NotAfter(...t).Build(),s=()=>_t.and(i,n);return En.Chain(s)},NotFollowedBy:(...t)=>{const n=e(),i=En.NotBefore(...t).Build(),s=()=>_t.and(n,i);return En.Chain(s)}})},xoe=e=>{const t=_oe();return e.normalize("NFC").split(t).filter(Boolean)},qc=(e,t,n)=>{if(!Number.isFinite(n)||n<0)return e;const i=[],s=e.split(`
`);for(const r of s){if(dd(r,t)<=n){i.push(r);continue}const a=Coe(r,t,n);i.push(...a)}return i.join(`
`)},Coe=(e,t,n)=>{const i=[],r=xoe(e)[Symbol.iterator]();let o="",a=0,l=r.next();for(;!l.done;){const c=l.value,u=o+c,d=Roe(c)?a+np.calculate(c,t):dd(u,t);if(/\s/.test(c)||d<=n){o=u,a=d,l=r.next();continue}if(o)i.push(o.trimEnd()),o="",a=0;else{const f=Aoe(c,t,n),h=f[f.length-1]??"",m=f.slice(0,-1);i.push(...m),o=h,a=dd(h,t),l=r.next()}}if(o){const c=Moe(o,t,n);i.push(c)}return i},Aoe=(e,t,n)=>{if(iw().test(e))return[e];koe(e);const i=[],s=Array.from(e);let r="",o=0;for(const a of s){const l=np.calculate(a,t),c=o+l;if(c<=n){r=r+a,o=c;continue}r&&i.push(r),r=a,o=l}return r&&i.push(r),i},Moe=(e,t,n)=>{if(!(dd(e,t)>n))return e;let[,s,r]=e.match(/^(.+?)(\s+)$/)??[e,e.trimEnd(),""],o=dd(s,t);for(const a of Array.from(r)){const l=np.calculate(a,t),c=o+l;if(c>n)break;s=s+a,o=c}return s},Roe=e=>e.codePointAt(0)!==void 0&&e.codePointAt(1)===void 0,koe=e=>{if(/\s/.test(e))throw new Error("Word should not contain any whitespaces!")},$i=(e,t,n)=>{const i=n.getNonDeletedElementsMap();let s;ti(!t||!xe(t)||e.angle===0,"text element angle must be 0 if bound to arrow container");const r={x:e.x,y:e.y,text:e.text,width:e.width,height:e.height,angle:t?xe(t)?0:t.angle:e.angle};r.text=e.text,(t||!e.autoResize)&&(s=t?Zo(t,e):e.width,r.text=qc(e.originalText,gt(e),s));const o=Vn(r.text,gt(e),e.lineHeight);if(e.autoResize&&(r.width=o.width),r.height=o.height,t){const a=sp(t,e),l=Zo(t,e);if(!xe(t)&&o.height>a){const f=fd(o.height,t.type);n.mutateElement(t,{height:f}),Mb(t.id,f)}if(o.width>l){const f=fd(o.width,t.type);n.mutateElement(t,{width:f})}const c={...e,...r},{x:u,y:d}=U5(t,c,i);r.x=u,r.y=d}n.mutateElement(e,r)},ip=(e,t,n,i=!1)=>{const s=t.getNonDeletedElementsMap();if(!Ko(e))return;XF(e.id);const o=Oe(e,s);if(o&&o.text){if(!e)return;let a=o.text,l=o.height,c=o.width;const u=Zo(e,o),d=sp(e,o);let f=e.height;if(i||n!=="n"&&n!=="s"){a&&(a=qc(o.originalText,gt(o),u));const h=Vn(a,gt(o),o.lineHeight);l=h.height,c=h.width}if(l>d){f=fd(l,e.type);const h=f-e.height,m=!xe(e)&&(n==="ne"||n==="nw"||n==="n")?e.y-h:e.y;t.mutateElement(e,{height:f,y:m})}t.mutateElement(o,{text:a,width:c,height:l}),xe(e)||t.mutateElement(o,U5(e,o,s))}},U5=(e,t,n)=>{if(xe(e))return le.getBoundTextElementPosition(e,t,n);const i=Doe(e),s=sp(e,t),r=Zo(e,t);let o,a;return t.verticalAlign===Fs.TOP?a=i.y:t.verticalAlign===Fs.BOTTOM?a=i.y+(s-t.height):a=i.y+(s/2-t.height/2),t.textAlign===$0.LEFT?o=i.x:t.textAlign===$0.RIGHT?o=i.x+(r-t.width):o=i.x+(r/2-t.width/2),{x:o,y:a}},Ko=e=>{var t,n,i;return(t=e==null?void 0:e.boundElements)!=null&&t.length&&((i=(n=e==null?void 0:e.boundElements)==null?void 0:n.find(s=>s.type==="text"))==null?void 0:i.id)||null},Oe=(e,t)=>{if(!e)return null;const n=Ko(e);return n&&t.get(n)||null},$n=(e,t)=>e&&e.containerId&&t.get(e.containerId)||null,W8=(e,t,n)=>{if(!xe(e))return{x:e.x+e.width/2,y:e.y+e.height/2};const i=le.getPointsGlobalCoordinates(e,n);if(i.length%2===1){const o=Math.floor(e.points.length/2),a=le.getPointGlobalCoordinates(e,e.points[o],n);return{x:a[0],y:a[1]}}const s=e.points.length/2-1;let r=le.getEditorMidPoints(e,n,t)[s];return r||(r=le.getSegmentMidPoint(e,i[s],i[s+1],s+1,n)),{x:r[0],y:r[1]}},Doe=e=>{let t=Fn,n=Fn;return e.type==="ellipse"&&(t+=e.width/2*(1-Math.sqrt(2)/2),n+=e.height/2*(1-Math.sqrt(2)/2)),e.type==="diamond"&&(t+=e.width/4,n+=e.height/4),{x:e.x+t,y:e.y+n}},Loe=(e,t)=>xe(t)?0:t?t.angle:e.angle,Noe=(e,t)=>e.some(n=>{if(Xt(n)){const i=$n(n,t);return!xe(i)}return!1}),Ooe=(e,t)=>e.some(n=>{if(Xt(n)){const i=$n(n,t);return!xe(i)}return ue(n)}),Poe=new Set(["rectangle","ellipse","diamond","arrow"]),Foe=e=>Poe.has(e.type),fd=(e,t)=>{e=Math.ceil(e);const n=Fn*2;return t==="ellipse"?Math.round((e+n)/Math.sqrt(2)*2):t==="arrow"?e+n*8:t==="diamond"?2*(e+n):e+n},Zo=(e,t)=>{const{width:n}=e;if(xe(e)){const i=((t==null?void 0:t.fontSize)??pl)*Xie;return Math.max(Gie*n,i)}return e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-Fn*2:e.type==="diamond"?Math.round(n/2)-Fn*2:n-Fn*2},sp=(e,t)=>{const{height:n}=e;return xe(e)?n-Fn*8*2<=0?t.height:n:e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-Fn*2:e.type==="diamond"?Math.round(n/2)-Fn*2:n-Fn*2},KF=(e,t=`

`)=>e.reduce((i,s)=>(ue(s)&&i.push(s.text),i),[]).join(t);function CC(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function Boe(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}const zoe=1e-6;function AC(e,t){const n=re(e[1],e[0]),i=re(t,e[0]),s=Ut(n,i);return Math.abs(s)<zoe}function K8(e,t){const n=re(e[1],e[0]),i=re(t,e[0]);return Ut(n,i)<0}function MC(e,t){return AC(e,t[0])||AC(e,t[1])||(K8(e,t[0])?!K8(e,t[1]):K8(e,t[1]))}function Hoe(e,t){return Boe(CC(e),CC(t))&&MC(e,t)&&MC(t,e)}const Voe=e=>e.type==="diamond"?[S(e.width/2,0),S(e.width,e.height/2),S(e.width/2,e.height),S(0,e.height/2)]:[S(0,0),S(0+e.width,0),S(0+e.width,e.height),S(0,e.height)],$oe=e=>Ae(e)||io(e)?e.points:Voe(e),RC=e=>{const t=e.reduce((n,[i,s])=>(n.minY=Math.min(n.minY,s),n.minX=Math.min(n.minX,i),n.maxX=Math.max(n.maxX,i),n.maxY=Math.max(n.maxY,s),n),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,cx:0,cy:0});return t.cx=(t.maxX+t.minX)/2,t.cy=(t.maxY+t.minY)/2,t},Goe=e=>{const t=$oe(e),{cx:n,cy:i}=RC(t),s=S(n,i),r=t.map(u=>Z(u,s,e.angle)),{minX:o,minY:a,maxX:l,maxY:c}=RC(r);return[o+e.x,a+e.y,l+e.x,c+e.y]},Xoe=(e,t)=>{const n=Goe(e);return(cU(n[0],Ni(t[0],t[2]))||cU(t[0],Ni(n[0],n[2])))&&(cU(n[1],Ni(t[1],t[3]))||cU(t[1],Ni(n[1],n[3])))},joe=({elements:e,bounds:t,type:n,errorMargin:i=0})=>{var o;FF(t)&&(t=ro(t,_e(e)));const s=[t[0]-i,t[1]-i,t[2]+i,t[3]+i],r=new Set;for(const a of e){if(r.has(a.id))continue;if(Xoe(a,s)){if(r.add(a.id),a.boundElements)for(const c of a.boundElements)r.add(c.id);ue(a)&&a.containerId&&r.add(a.containerId),xe(a)&&(a.startBinding&&r.add(a.startBinding.elementId),a.endBinding&&r.add((o=a.endBinding)==null?void 0:o.elementId))}}return e.filter(a=>r.has(a.id))},ZF=(e,t,n)=>{const i=n.reduce((s,r)=>(r.groupIds.includes(e)&&(s[r.id]=!0),s),{});return Object.keys(i).length<2?t.selectedGroupIds[e]||t.editingGroupId===e?{selectedElementIds:t.selectedElementIds,selectedGroupIds:{...t.selectedGroupIds,[e]:!1},editingGroupId:null}:t:{editingGroupId:t.editingGroupId,selectedGroupIds:{...t.selectedGroupIds,[e]:!0},selectedElementIds:{...t.selectedElementIds,...i}}},Li=function(){let e=null,t=null,n=null;const i=(r,o,a,l)=>{if(n!==void 0&&o===t&&r===e&&a.editingGroupId===(n==null?void 0:n.editingGroupId))return n;const c={};for(const f of r){let h=f.groupIds;if(a.editingGroupId){const m=h.indexOf(a.editingGroupId);m>-1&&(h=h.slice(0,m))}if(h.length>0){const m=h[h.length-1];c[m]=!0}}const u={},d=o.reduce((f,h)=>{if(h.isDeleted)return f;const m=h.groupIds.find(p=>c[p]);return m&&(f[h.id]=!0,Array.isArray(u[m])?u[m].push(h.id):u[m]=[h.id]),f},{});for(const f of Object.keys(u))u[f].length<2&&c[f]&&(c[f]=!1);return t=o,e=r,n={editingGroupId:a.editingGroupId,selectedGroupIds:c,selectedElementIds:it({...a.selectedElementIds,...d},l)},n},s=(r,o,a,l)=>{const c=l?l.scene.getSelectedElements({selectedElementIds:r.selectedElementIds,elements:o}):He(o,r);return c.length?i(c,o,r,a):{selectedGroupIds:{},editingGroupId:null,selectedElementIds:it(r.selectedElementIds,a)}};return s.clearCache=()=>{t=null,e=null,n=null},s}(),qF=(e,t)=>QF(e,t)!=null,QF=(e,t)=>t.groupIds.filter(n=>n!==e.editingGroupId).find(n=>e.selectedGroupIds[n]),Yu=e=>Object.entries(e.selectedGroupIds).filter(([t,n])=>n).map(([t,n])=>t),JF=(e,t)=>{let n={...t,selectedGroupIds:{}};for(const i of e){let s=i.groupIds;if(t.editingGroupId){const r=s.indexOf(t.editingGroupId);r>-1&&(s=s.slice(0,r))}if(s.length>0){const r=s[s.length-1];n={...n,...ZF(r,n,e)}}}return n.selectedGroupIds},Yoe=(e,t)=>({...e,editingGroupId:t.groupIds.length?t.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:{[t.id]:!0}}),Y0=(e,t)=>e.groupIds.includes(t),$t=(e,t)=>{const n=[];for(const i of e.values())Y0(i,t)&&n.push(i);return n},Woe=(e,t)=>e.groupIds.find(n=>t[n]),Koe=(e,t,n)=>{const i=[...e],s=n?i.indexOf(n):-1,r=s>-1?s:i.length;return i.splice(r,0,t),i},Zoe=(e,t)=>e.filter(n=>!t[n]),b5=(e,t)=>{const n=new Map;return e.forEach(i=>{const s=i.groupIds.length===0?i.id:i.groupIds[i.groupIds.length-1],r=n.get(s)||[],o=Oe(i,t);o&&r.push(o),n.set(s,[...r,i])}),Array.from(n.values())},qoe=e=>{const t=new Set;for(const[,n]of e)if(!n.isDeleted)for(const i of n.groupIds??[])t.add(i);return t},eB=e=>{const t=e.flatMap(s=>s.groupIds),n=new Map;let i=0;for(const s of t)n.set(s,(n.get(s)??0)+1),n.get(s)>i&&(i=n.get(s));return i===e.length},kh=e=>e.groupIds.length>0,Qoe=(e,t,n)=>{const i=[...e],s=t?e.indexOf(t):-1,r=s>-1?s:e.length;for(let o=0;o<r;o++)i[o]=n(i[o]);return i},sw=e=>{const t=new Set;return e.forEach(n=>{Te(n)&&t.add(n.id)}),e.filter(n=>!(n.frameId&&t.has(n.frameId)))},rw=(e,t,n,i=!0)=>{const[s,r,o,a]=Ne(t,n);let l=e.filter(c=>{let[u,d,f,h]=ro(c,n);const m=bs(c,n);if(m){const[p,U,y,E]=ro(m,n);u=Math.max(p,u),d=Math.max(U,d),f=Math.min(y,f),h=Math.min(E,h)}return c.locked===!1&&c.type!=="selection"&&!Xt(c)&&s<=u&&r<=d&&o>=f&&a>=h});return l=i?sw(l):l,l=l.filter(c=>{const u=bs(c,n);return u?Lc(c,u,n):!0}),l},tB=(e,t,n,i)=>{const s=new Set(t.map(r=>r.id));return e.filter(r=>{const o=Hb(r,n.width,n.height,n,i);return!s.has(r.id)&&o})},Gn=function(){let e=null,t=null,n=null;const i=(s,r)=>(n!=null&&s===e&&r.selectedElementIds===t||(n=s.some(o=>r.selectedElementIds[o.id]),e=s,t=r.selectedElementIds),n);return i.clearCache=()=>{e=null,t=null,n=null},i}(),He=(e,t,n)=>{const i=new Set,s=[];for(const r of e.values()){if(t.selectedElementIds[r.id]){s.push(r),i.add(r.id);continue}if(n!=null&&n.includeBoundTextElement&&Xt(r)&&t.selectedElementIds[r==null?void 0:r.containerId]){s.push(r),i.add(r.id);continue}}if(n!=null&&n.includeElementsInFrames){const r=[];return s.forEach(o=>{Te(o)&&xr(e,o.id).forEach(a=>!i.has(a.id)&&r.push(a)),r.push(o)}),r}return s},nB=(e,t)=>t.editingTextElement?[t.editingTextElement]:t.newElement?[t.newElement]:He(e,t,{includeBoundTextElement:!0}),it=(e,t)=>Ji(t.selectedElementIds,e)?t.selectedElementIds:e,Joe=(e,t)=>{var i;const n=e.filter(Ae);if(n.length===1){const s=n[0],r=((i=s.boundElements)==null?void 0:i.map(a=>a.id))??[];if(e.every(a=>a.id===s.id||r.includes(a.id)))return new le(s,_e(t))}return null},iB=(e,t,n)=>({selectedLinearElement:Joe(e,t),...Li({editingGroupId:n.editingGroupId,selectedElementIds:sw(e).reduce((i,s)=>(Xt(s)||(i[s.id]=!0),i),{})},t,n,null)}),eae=(e,t,n)=>{const i=_e(e);for(const s of t)if(s.frameId){const r=n.get(s.id),o=n.get(s.frameId),a=r&&i.get(r);a&&pi(a,i,{frameId:o??null})}};function ow(e,t,n){const i=Bb(t,n),s=Bb(e,n);return i.some(o=>s.some(a=>Hoe(o,a)))}const sB=(e,t,n)=>E5(rw(e,t,n,!1)).filter(i=>!Te(i)&&!i.frameId||i.frameId===t.id),aw=(e,t,n)=>rw([t],e,n).some(i=>i.id===t.id),rp=(e,t,n)=>{const[i,s,r,o]=Ne(t,n),[a,l,c,u]=xt(e);return i<=a&&s<=l&&r>=c&&o>=u},Lc=(e,t,n)=>rp([e],t,n)||ow(e,t,n)||aw(e,t,n),kC=(e,t,n)=>{const[i,s,r,o]=Ne(t,n);return aF(S(i,s),S(e.x,e.y),S(r,o))},tae=e=>{const t=new Map;for(const n of e){const i=Te(n)?n.id:n.frameId;i&&!t.has(i)&&t.set(i,xr(e,i))}return t},xr=(e,t)=>{const n=[];for(const i of e.values())i.frameId===t&&n.push(i);return n},lw=e=>e.filter(t=>Te(t)),cw=e=>{const t=_e(lw(e));return e.filter(n=>t.has(n.id)||!n.frameId||!t.has(n.frameId))},l2=(e,t,n,i)=>{const s=xr(e,t.id),r=new Set(s),o=new Set([...sB(e,t,i),...s.filter(f=>aw(f,t,i))]),a=s.filter(f=>!o.has(f)),l=new Set(Array.from(o).flatMap(f=>f.groupIds));for(const f of a)if(!ow(f,t,i))f.groupIds.length===0&&r.delete(f);else if(f.groupIds.length>0)for(const h of f.groupIds)l.add(h);for(const f of a)if(f.groupIds.length>0){let h=!0;for(const m of f.groupIds)l.has(m)&&(h=!1);h&&r.delete(f)}const c=Array.from(o).filter(f=>f.groupIds.length===0);for(const f of c)r.add(f);const u=Array.from(o).filter(f=>f.groupIds.length>0),d=JF(u,n);for(const[f,h]of Object.entries(d))if(h){const m=$t(e,f);if(rp(m,t,i))for(const p of m)r.add(p)}return[...r].filter(f=>!(ue(f)&&f.containerId))},nae=(e,t,n)=>iae(E5(e,sB(e,t,n)),t,n),iae=(e,t,n)=>{const i=[],s=new Map;for(const r of e){let o=!1;if(r.groupIds.length>0){if(r.groupIds.some(a=>s.get(a)))o=!0;else{const a=new Set(r.groupIds.flatMap(l=>$t(n,l)));o=!rp(Array.from(a),t,n)}r.groupIds.forEach(a=>{s.set(a,o)})}o||i.push(r)}return i},bs=(e,t)=>e.frameId&&t.get(e.frameId)||null,sae=(e,t)=>{const n=new Set,i=_e(e);e=E5(e);for(const o of e)Te(o)&&o.id!==t.id&&n.add(o.id);const s=new Set,r=[];for(const o of e)if(!(Te(o)||o.frameId&&n.has(o.frameId)))if(o.groupIds.length){const a=o.groupIds.at(-1);if(!s.has(a)){s.add(a);const l=$t(e,a);if(l.some(c=>Lc(c,t,i)))for(const c of l)r.push(c)}}else Lc(o,t,i)&&r.push(o);return r},o0=(e,t,n,i)=>{const s=_e(e),r=new Map;for(const c of e.values())c.frameId===n.id&&r.set(c.id,!0);const o=new Set(t.map(c=>c.id)),a=[],l=new Set;for(const c of t)Te(c)&&c.id!==n.id&&l.add(c.id);for(const c of E5(e,t)){if(Te(c)||c.frameId&&l.has(c.frameId)||c.frameId&&i.selectedElementIds[c.id]&&i.selectedElementIds[c.frameId])continue;r.has(c.id)||a.push(c);const u=Oe(c,s);u&&!o.has(u.id)&&!r.has(u.id)&&a.push(u)}for(const c of a)pi(c,s,{frameId:n.id});return e},y5=(e,t)=>{const n=new Map,i=new Map;for(const s of e)if(s.frameId){n.set(s.id,s);const r=i.get(s.frameId)||[];r.push(s);const o=Oe(s,t);o&&(n.set(o.id,o),r.push(o)),i.set(s.frameId,r)}for(const[,s]of n)pi(s,t,{frameId:null})},rB=(e,t)=>{const n=xr(e,t.id);return y5(n,_e(e)),e},oB=(e,t,n,i)=>o0(rB(e,n),t,n,i.state).slice(),Dh=(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,elements:e}),s=new Set(i);if(t.editingGroupId)for(const a of i)a.groupIds.length===0?s.add(a):a.groupIds.flatMap(l=>$t(e,l)).forEach(l=>s.add(l));const r=new Set,o=_e(e);return s.forEach(a=>{a.frameId&&!Te(a)&&!Rb(a,o,t)&&r.add(a)}),r.size>0&&y5(r,o),e},E5=(e,t)=>{const n=new Set,i=t||e;for(const o of i.values()){const a=o.groupIds[o.groupIds.length-1];a&&n.add(a)}const s=new Set;for(const o of n)$t(e,o).some(a=>Te(a))&&s.add(o);const r=[];for(const o of i.values())s.has(o.groupIds[o.groupIds.length-1])||r.push(o);return r},P3=(e,t,n)=>{const i=ue(e)&&$n(e,t)||e;return i.frameId&&n.selectedElementIds[i.id]&&n.selectedElementIds[i.frameId]?bs(i,t):n.selectedElementIds[i.id]&&n.selectedElementsAreBeingDragged?n.frameToHighlight:bs(i,t)},Rb=(e,t,n,i)=>{var l;const s=(i==null?void 0:i.targetFrame)??P3(e,t,n);if(!s)return!1;const r=ue(e)&&$n(e,t)||e,o=c=>{i!=null&&i.checkedGroups&&r.groupIds.forEach(u=>{var d;(d=i.checkedGroups)==null||d.set(u,c)})};if(!n.selectedElementIds[r.id]||!n.selectedElementsAreBeingDragged||n.selectedElementIds[r.id]&&n.selectedElementIds[s.id])return!0;if(r.groupIds.length===0)return Lc(r,s,t);for(const c of r.groupIds)if((l=i==null?void 0:i.checkedGroups)!=null&&l.has(c))return i.checkedGroups.get(c);const a=new Set(r.groupIds.filter(c=>i!=null&&i.checkedGroups?!i.checkedGroups.has(c):!0).flatMap(c=>$t(t,c)));if(n.editingGroupId&&n.selectedElementsAreBeingDragged){const c=new Set(He(t,n));if(n.frameToHighlight!==null)return!0;c.forEach(d=>{a.delete(d)})}for(const c of a)if(Te(c))return o(!1),!1;for(const c of a)if(Lc(c,s,t))return o(!0),!0;return!1},DC=(e,t,n,i,s)=>{if(!n.frameRendering||!n.frameRendering.clip)return!1;const r=ow(e,t,i)||aw(e,t,i);if(r){for(const o of e.groupIds)s==null||s.set(o,!0);return!0}if(!r&&e.groupIds.length>0&&!rp([e],t,i)){let o=!1;if(n.selectedElementsAreBeingDragged)o=Rb(e,i,n,{targetFrame:t,checkedGroups:s});else{o=e.frameId===t.id;for(const a of e.groupIds)s==null||s.set(a,o)}for(const a of e.groupIds)s==null||s.set(a,o);return o}return!1},rae="Frame",oae="AI Frame",uw=e=>OF(e)?rae:oae,aB=e=>e.name===null?uw(e):e.name,dw=(e,t)=>joe({elements:e,bounds:t,type:"overlap"}).filter(n=>!n.frameId||n.frameId===t.id),lB=e=>{const t=_e(e);return e.length>1&&e.some(n=>n.frameId&&t.has(n.frameId))},cB="invert(100%) hue-rotate(180deg) saturate(1.25)",uB=(e,t)=>In(e)&&!t.imageCache.has(e.fileId),dB=(e,t,n)=>{var i;return n.theme===Me.DARK&&In(e)&&!uB(e,t)&&((i=t.imageCache.get(e.fileId))==null?void 0:i.mimeType)!==ye.svg},v5=e=>{switch(e.type){case"freedraw":return e.strokeWidth*12;case"text":return e.fontSize/2;default:return 20}},fB=(e,t,n,i,s=1)=>{let r=((t==null?void 0:t.opacity)??100)*e.opacity/1e4*s;return(n.has(e.id)||i&&i.some(o=>o.id===e.id)||t&&n.has(t.id))&&(r*=jie/100),r},aae=(e,t,n)=>{const r=v5(e),[o,a,l,c]=Ne(e,t),u=Ae(e)||io(e)?Pi(o,l):e.width,d=Ae(e)||io(e)?Pi(a,c):e.height;let f=u*window.devicePixelRatio+r*2,h=d*window.devicePixelRatio+r*2,m=n.value;return(f*m>32767||h*m>32767)&&(m=Math.min(32767/f,32767/h)),f*h*m*m>16777216&&(m=Math.sqrt(16777216/(f*h))),f=Math.floor(f*m),h=Math.floor(h*m),{width:f,height:h,scale:m}},hB=(e,t,n,i,s)=>{var y,E;const r=document.createElement("canvas"),o=r.getContext("2d"),a=v5(e),{width:l,height:c,scale:u}=aae(e,t,n);if(!l||!c)return null;r.width=l,r.height=c;let d=-100,f=0;if(Ae(e)||io(e)){const[v,w]=Ne(e,t);d=e.x>v?Pi(e.x,v)*window.devicePixelRatio*u:0,f=e.y>w?Pi(e.y,w)*window.devicePixelRatio*u:0,o.translate(d,f)}o.save(),o.translate(a*u,a*u),o.scale(window.devicePixelRatio*u,window.devicePixelRatio*u);const h=Zc.canvas(r);dB(e,i,s)&&(o.filter=cB),c2(e,h,o,i),o.restore();const m=Oe(e,t),p=document.createElement("canvas"),U=p.getContext("2d");if(xe(e)&&m){const[v,w,I,M]=Ne(e,t),T=Math.max(Pi(v,I),Pi(w,M));p.width=T*window.devicePixelRatio*u+a*u*10,p.height=T*window.devicePixelRatio*u+a*u*10,U.translate(p.width/2,p.height/2),U.rotate(e.angle),U.drawImage(r,-r.width/2,-r.height/2,r.width,r.height);const[,,,,_,x]=Ne(m,t);U.rotate(-e.angle);const C=(p.width-r.width)/2,R=(p.height-r.height)/2,N=p.width/2-(_-v)*window.devicePixelRatio*u-C-a*u,D=p.height/2-(x-w)*window.devicePixelRatio*u-R-a*u;U.translate(-N,-D),U.clearRect(-(m.width/2+Fn)*window.devicePixelRatio*u,-(m.height/2+Fn)*window.devicePixelRatio*u,(m.width+Fn*2)*window.devicePixelRatio*u,(m.height+Fn*2)*window.devicePixelRatio*u)}return{element:e,canvas:r,theme:s.theme,scale:u,zoomValue:n.value,canvasOffsetX:d,canvasOffsetY:f,boundTextElementVersion:((y=Oe(e,t))==null?void 0:y.version)||null,containingFrameOpacity:((E=bs(e,t))==null?void 0:E.opacity)||100,boundTextCanvas:p,angle:e.angle,imageCrop:ft(e)?e.crop:null}},gB=typeof document<"u"?document.createElement("img"):{src:""};gB.src=`data:${ye.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;const mB=typeof document<"u"?document.createElement("img"):{src:""};mB.src=`data:${ye.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;const lae=(e,t)=>{t.fillStyle="#E7E7E7",t.fillRect(0,0,e.width,e.height);const n=Math.min(e.width,e.height),i=Math.min(n,Math.min(n*.4,100));t.drawImage(e.status==="error"?mB:gB,e.width/2-i/2,e.height/2-i/2,i,i)},c2=(e,t,n,i,s)=>{var r;switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":{n.lineJoin="round",n.lineCap="round",t.draw(Gt.get(e));break}case"arrow":case"line":{n.lineJoin="round",n.lineCap="round",Gt.get(e).forEach(o=>{t.draw(o)});break}case"freedraw":{n.save(),n.fillStyle=e.strokeColor;const o=dae(e),a=Gt.get(e);a&&t.draw(a),n.fillStyle=e.strokeColor,n.fill(o),n.restore();break}case"image":{const o=In(e)?(r=i.imageCache.get(e.fileId))==null?void 0:r.image:void 0;if(o!=null&&!(o instanceof Promise)){e.roundness&&n.roundRect&&(n.beginPath(),n.roundRect(0,0,e.width,e.height,es(Math.min(e.width,e.height),e)),n.clip());const{x:a,y:l,width:c,height:u}=e.crop?e.crop:{x:0,y:0,width:o.naturalWidth,height:o.naturalHeight};n.drawImage(o,a,l,c,u,0,0,e.width,e.height)}else lae(e,n);break}default:if(ue(e)){const o=gF(e.text),a=o&&!n.canvas.isConnected;a&&document.body.appendChild(n.canvas),n.canvas.setAttribute("dir",o?"rtl":"ltr"),n.save(),n.font=gt(e),n.fillStyle=e.strokeColor,n.textAlign=e.textAlign;const l=e.text.replace(/\r\n?/g,`
`).split(`
`),c=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,u=tp(e.fontSize,e.lineHeight),d=rF(e.fontFamily,e.fontSize,u);for(let f=0;f<l.length;f++)n.fillText(l[f],c,f*u+d);n.restore(),a&&n.canvas.remove()}else throw new Error(`Unimplemented type ${e.type}`)}},F3=new WeakMap,LC=(e,t,n,i)=>{var d;const s=n?i.zoom:{value:1},r=F3.get(e),o=r&&r.zoomValue!==s.value&&!(i!=null&&i.shouldCacheIgnoreZoom),a=Oe(e,t),l=(a==null?void 0:a.version)||null,c=ft(e)?e.crop:null,u=((d=bs(e,t))==null?void 0:d.opacity)||100;if(!r||o||r.theme!==i.theme||r.boundTextElementVersion!==l||r.imageCrop!==c||r.containingFrameOpacity!==u||xe(e)&&a&&e.angle!==r.angle){const f=hB(e,t,s,n,i);return f?(F3.set(e,f),f):null}return r},Z8=(e,t,n,i,s)=>{const r=e.element,o=v5(r),a=e.scale,[l,c,u,d]=Ne(r,s),f=((l+u)/2+i.scrollX)*window.devicePixelRatio,h=((c+d)/2+i.scrollY)*window.devicePixelRatio;t.save(),t.scale(1/window.devicePixelRatio,1/window.devicePixelRatio);const m=Oe(r,s);if(xe(r)&&m){const p=(e.boundTextCanvas.width-e.canvas.width)/2,U=(e.boundTextCanvas.height-e.canvas.height)/2;t.translate(f,h),t.drawImage(e.boundTextCanvas,-(u-l)/2*window.devicePixelRatio-p/a-o,-(d-c)/2*window.devicePixelRatio-U/a-o,e.boundTextCanvas.width/a,e.boundTextCanvas.height/a)}else t.translate(f,h),t.rotate(r.angle),"scale"in e.element&&!uB(r,n)&&t.scale(e.element.scale[0],e.element.scale[1]),t.translate(-f,-h),t.drawImage(e.canvas,(l+i.scrollX)*window.devicePixelRatio-o*e.scale/e.scale,(c+i.scrollY)*window.devicePixelRatio-o*e.scale/e.scale,e.canvas.width/e.scale,e.canvas.height/e.scale);t.restore()},cae=(e,t,n,i)=>{t.save(),t.translate(e.x+n.scrollX,e.y+n.scrollY),t.fillStyle="rgba(0, 0, 200, 0.04)";const s=.5/n.zoom.value;t.fillRect(s,s,e.width,e.height),t.lineWidth=1/n.zoom.value,t.strokeStyle=i,t.strokeRect(s,s,e.width,e.height),t.restore()},pu=(e,t,n,i,s,r,o)=>{var l;const a=((l=o.openDialog)==null?void 0:l.name)==="elementLinkSelector"&&!o.selectedElementIds[e.id]&&!o.hoveredElementIds[e.id];switch(s.globalAlpha=fB(e,bs(e,t),r.elementsPendingErasure,r.pendingFlowchartNodes,a?sF:1),e.type){case"magicframe":case"frame":{o.frameRendering.enabled&&o.frameRendering.outline&&(s.save(),s.translate(e.x+o.scrollX,e.y+o.scrollY),s.fillStyle="rgba(0, 0, 200, 0.04)",s.lineWidth=Pt.strokeWidth/o.zoom.value,s.strokeStyle=Pt.strokeColor,a2(e)&&(s.strokeStyle=o.theme===Me.LIGHT?"#7affd7":"#1d8264"),s.roundRect?(s.beginPath(),s.roundRect(0,0,e.width,e.height,Pt.radius/o.zoom.value),s.stroke(),s.closePath()):s.strokeRect(0,0,e.width,e.height),s.restore());break}case"freedraw":{if(Gt.generateElementShape(e,null),r.isExporting){const[c,u,d,f]=Ne(e,t),h=(c+d)/2+o.scrollX,m=(u+f)/2+o.scrollY,p=(d-c)/2-(e.x-c),U=(f-u)/2-(e.y-u);s.save(),s.translate(h,m),s.rotate(e.angle),s.translate(-p,-U),c2(e,i,s,r),s.restore()}else{const c=LC(e,n,r,o);if(!c)return;Z8(c,s,r,o,n)}break}case"rectangle":case"diamond":case"ellipse":case"line":case"arrow":case"image":case"text":case"iframe":case"embeddable":{if(Gt.generateElementShape(e,r),r.isExporting){const[c,u,d,f]=Ne(e,t),h=(c+d)/2+o.scrollX,m=(u+f)/2+o.scrollY;let p=(d-c)/2-(e.x-c),U=(f-u)/2-(e.y-u);if(ue(e)){const E=$n(e,t);if(xe(E)){const v=le.getBoundTextElementPosition(E,e,t);p=(d-c)/2-(v.x-c),U=(f-u)/2-(v.y-u)}}s.save(),s.translate(h,m),dB(e,r,o)&&(s.filter="none");const y=Oe(e,t);if(xe(e)&&y){const E=document.createElement("canvas"),v=E.getContext("2d"),w=Math.max(Pi(c,d),Pi(u,f)),I=v5(e);E.width=w*o.exportScale+I*10*o.exportScale,E.height=w*o.exportScale+I*10*o.exportScale,v.translate(E.width/2,E.height/2),v.scale(o.exportScale,o.exportScale),p=e.width/2-(e.x-c),U=e.height/2-(e.y-u),v.rotate(e.angle);const M=Zc.canvas(E);v.translate(-p,-U),c2(e,M,v,r),v.translate(p,U),v.rotate(-e.angle);const[,,,,T,_]=Ne(y,t),x=(c+d)/2-T,C=(u+f)/2-_;v.translate(-x,-C),v.clearRect(-y.width/2,-y.height/2,y.width,y.height),s.scale(1/o.exportScale,1/o.exportScale),s.drawImage(E,-E.width/2,-E.height/2,E.width,E.height)}else s.rotate(e.angle),e.type==="image"&&s.scale(e.scale[0],e.scale[1]),s.translate(-p,-U),c2(e,i,s,r);s.restore()}else{const c=LC(e,n,r,o);if(!c)return;const u=s.imageSmoothingEnabled;if(!(o!=null&&o.shouldCacheIgnoreZoom)&&(!e.angle||Qie(e.angle))&&(s.imageSmoothingEnabled=!1),e.id===o.croppingElementId&&ft(c.element)&&c.element.crop!==null){s.save(),s.globalAlpha=.1;const d=hB(hoe(c.element,t),n,o.zoom,r,o);d&&Z8(d,s,r,o,n),s.restore()}Z8(c,s,r,o,n),s.imageSmoothingEnabled=u}break}default:throw new Error(`Unimplemented type ${e.type}`)}s.globalAlpha=1},pB=new WeakMap([]);function uae(e){const t=UB(e),n=new Path2D(t);return pB.set(e,n),n}function dae(e){return pB.get(e)}function UB(e){const t=e.simulatePressure?e.points:e.points.length?e.points.map(([i,s],r)=>[i,s,e.pressures[r]]):[[0,0,.5]],n={simulatePressure:e.simulatePressure,size:e.strokeWidth*4.25,thinning:.6,smoothing:.5,streamline:.5,easing:i=>Math.sin(i*Math.PI/2),last:!!e.lastCommittedPoint};return hae(uoe(t,n))}function NC(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}const fae=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;function hae(e){if(!e.length)return"";const t=e.length-1;return e.reduce((n,i,s,r)=>(s===t?n.push(i,NC(i,r[0]),"L",r[0],"Z"):n.push(i,NC(i,r[s+1])),n),["M",e[0],"Q"]).join(" ").replace(fae,"$1")}const Di=class Di{};F(Di,"rg",new j0),F(Di,"cache",new WeakMap),F(Di,"get",t=>Di.cache.get(t)),F(Di,"set",(t,n)=>Di.cache.set(t,n)),F(Di,"delete",t=>Di.cache.delete(t)),F(Di,"destroy",()=>{Di.cache=new WeakMap}),F(Di,"generateElementShape",(t,n)=>{const i=n!=null&&n.isExporting?void 0:Di.get(t);if(i!==void 0)return i;F3.delete(t);const s=ele(t,Di.rg,n||{isExporting:!1,canvasBackgroundColor:ze.white,embedsValidationStatus:null});return Di.cache.set(t,s),s});let Gt=Di;const fw=1,Tn=40,gae=(e,t)=>{const n=e.fixedSegments?e.fixedSegments.slice():null;if(n){const i=[];e.points.map(o=>S(e.x+o[0],e.y+o[1])).forEach((o,a,l)=>{if(a<2)return i.push(o);const c=Rs(o,l[a-1]),u=Rs(l[a-1],l[a-2]);if(zn(c,u)){const d=(n==null?void 0:n.findIndex(h=>h.index===a-1))??-1,f=(n==null?void 0:n.findIndex(h=>h.index===a))??-1;f!==-1&&(n[f].start=S(l[a-2][0]-e.x,l[a-2][1]-e.y)),d!==-1&&n.splice(d,1),i.splice(-1,1),n.forEach(h=>{h.index>a-1&&(h.index-=1)})}return i.push(o)});const s=[];i.forEach((o,a,l)=>{if(a<3)return s.push(o);if(Je(l[a-2],l[a-1])<fw){const c=(n==null?void 0:n.findIndex(f=>f.index===a-2))??-1,u=(n==null?void 0:n.findIndex(f=>f.index===a-1))??-1;u!==-1&&n.splice(u,1),c!==-1&&n.splice(c,1),s.splice(-2,2),n.forEach(f=>{f.index>a-2&&(f.index-=2)});const d=Aa(o,l[a-1]);return s.push(S(d?o[0]:l[a-2][0],d?l[a-2][1]:o[1]))}s.push(o)});const r=n.filter(o=>o.index!==1&&o.index!==s.length-1);return r.length===0?Xa(mw(pw(gw(e,hw(e,t,s.map(o=>S(o[0]-e.x,o[1]-e.y))))??[])),r,null,null):(ti(Uw(s),"Invalid elbow points with fixed segments"),Xa(s,r,e.startIsSpecial,e.endIsSpecial))}return{x:e.x,y:e.y,points:e.points,fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}},mae=(e,t,n)=>{var x,C;const i=t.map(R=>R.index),r=(((x=e.fixedSegments)==null?void 0:x.map(R=>R.index))??[]).findIndex(R=>!i.includes(R));if(r===-1||!((C=e.fixedSegments)!=null&&C[r]))return{points:e.points};const o=e.fixedSegments[r].index,a=e.fixedSegments[r-1],l=e.fixedSegments[r+1],c=e.x+(a?a.end[0]:0),u=e.y+(a?a.end[1]:0),d=a?null:e.startBinding,f=l?null:e.endBinding,{startHeading:h,endHeading:m,startGlobalPoint:p,endGlobalPoint:U,hoveredStartElement:y,hoveredEndElement:E,...v}=hw({x:c,y:u,startBinding:d,endBinding:f,startArrowhead:null,endArrowhead:null,points:e.points},n,[S(0,0),S(e.x+((l==null?void 0:l.start[0])??e.points[e.points.length-1][0])-c,e.y+((l==null?void 0:l.start[1])??e.points[e.points.length-1][1])-u)],{isDragging:!1}),{points:w}=Xa(mw(pw(gw(e,{startHeading:h,endHeading:m,startGlobalPoint:p,endGlobalPoint:U,hoveredEndElement:E,...v})??[])),t,null,null),I=[];if(a)for(let R=0;R<a.index;R++)I.push(S(e.x+e.points[R][0],e.y+e.points[R][1]));if(w.forEach(R=>{I.push(S(e.x+(a?a.end[0]:0)+R[0],e.y+(a?a.end[1]:0)+R[1]))}),l)for(let R=l.index;R<e.points.length;R++)I.push(S(e.x+e.points[R][0],e.y+e.points[R][1]));const M=((l==null?void 0:l.index)??e.points.length)-((a==null?void 0:a.index)??0)-1,T=t.map(R=>R.index>o?{...R,index:R.index-M+(w.length-1)}:R),_=I.flatMap((R,N)=>{const D=I[N-1],$=I[N+1];if(D&&$){const G=Rs(R,D),H=Rs($,R);if(zn(G,H))return T.forEach(V=>{V.index>N&&(V.index-=1)}),[];if(zn(G,$F(H)))return T.forEach(V=>{V.index>N&&(V.index+=1)}),[R,R]}return[R]});return Xa(_,T,!1,!1)},pae=(e,t,n,i,s,r)=>{var I,M;const o=t.map((T,_)=>e.fixedSegments==null||e.fixedSegments[_]===void 0||e.fixedSegments[_].index!==T.index||(T.start[0]!==e.fixedSegments[_].start[0]&&T.end[0]!==e.fixedSegments[_].end[0])!=(T.start[1]!==e.fixedSegments[_].start[1]&&T.end[1]!==e.fixedSegments[_].end[1])?_:null).filter(T=>T!==null).shift();if(o==null)return{points:e.points};const a=((I=e.fixedSegments)==null?void 0:I.findIndex(T=>T.index===1))??-1,l=((M=e.fixedSegments)==null?void 0:M.findIndex(T=>T.index===e.points.length-1))??-1,c=Je(t[o].start,t[o].end),u=c<Tn+5;if(a===-1&&t[o].index===1&&s){const T=Oo(n),x=(T?zn(n,Pn):zn(n,qi))?u?c/2:Tn:u?-c/2:-40;t[o].start=S(t[o].start[0]+(T?x:0),t[o].start[1]+(T?0:x))}if(l===-1&&t[o].index===e.points.length-1&&r){const T=Oo(i),x=(T?zn(i,Pn):zn(i,qi))?u?c/2:Tn:u?-c/2:-40;t[o].end=S(t[o].end[0]+(T?x:0),t[o].end[1]+(T?0:x))}const d=t.map(T=>({...T,start:S(e.x+T.start[0],e.y+T.start[1]),end:S(e.x+T.end[0],e.y+T.end[1])})),f=e.points.map((T,_)=>S(e.x+T[0],e.y+T[1])),h=d[o].index-1,m=d[o].index,p=d[o].start,U=d[o].end,y=f[h-1]&&!Ir(f[h],f[h-1])?Aa(f[h-1],f[h]):void 0,E=f[m+1]&&!Ir(f[m],f[m+1])?Aa(f[m+1],f[m]):void 0;if(y!==void 0){const T=y?1:0;f[h-1][T]=p[T]}if(f[h]=p,f[m]=U,E!==void 0){const T=E?1:0;f[m+1][T]=U[T]}const v=d.findIndex(T=>T.index===h);if(v!==-1){const T=Aa(d[v].end,d[v].start)?1:0;d[v].start[T]=p[T],d[v].end=p}const w=d.findIndex(T=>T.index===m+1);if(w!==-1){const T=Aa(d[w].end,d[w].start)?1:0;d[w].end[T]=U[T],d[w].start=U}if(a===-1&&h===0){const T=s?Oo(n):Aa(f[1],f[0]);f.unshift(S(T?p[0]:e.x+e.points[0][0],T?e.y+e.points[0][1]:p[1])),s&&f.unshift(S(e.x+e.points[0][0],e.y+e.points[0][1]));for(const _ of d)_.index+=s?2:1}if(l===-1&&m===e.points.length-1){const T=Oo(i);f.push(S(T?U[0]:e.x+e.points[e.points.length-1][0],T?e.y+e.points[e.points.length-1][1]:U[1])),r&&f.push(S(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]))}return Xa(f,d.map(T=>({...T,start:S(T.start[0]-e.x,T.start[1]-e.y),end:S(T.end[0]-e.x,T.end[1]-e.y)})),!1,!1)},Uae=(e,t,n,i,s,r,o,a,l)=>{let c=e.startIsSpecial??null,u=e.endIsSpecial??null;const d=t.map((U,y)=>y===0||y===t.length-1?S(e.x+U[0],e.y+U[1]):S(e.x+e.points[y][0],e.y+e.points[y][1])),f=n.map(U=>({...U,start:S(e.x+(U.start[0]-t[0][0]),e.y+(U.start[1]-t[0][1])),end:S(e.x+(U.end[0]-t[0][0]),e.y+(U.end[1]-t[0][1]))})),h=[],m=2+(c?1:0),p=2+(u?1:0);for(;h.length+m<d.length-p;)h.push(d[h.length+m]);{const U=d[c?2:1],y=d[c?3:2],E=Oo(i),v=Oo(Ah(re(U,y)));if(a&&E===v){const w=E?zn(i,Pn):zn(i,qi);if(h.unshift(S(v?r[0]+(w?Tn:-40):y[0],v?y[1]:r[1]+(w?Tn:-40))),h.unshift(S(E?r[0]+(w?Tn:-40):r[0],E?r[1]:r[1]+(w?Tn:-40))),!c){c=!0;for(const I of f)I.index>1&&(I.index+=1)}}else if(h.unshift(S(v?r[0]:U[0],v?U[1]:r[1])),c){c=!1;for(const w of f)w.index>1&&(w.index-=1)}h.unshift(r)}{const U=d[d.length-(u?3:2)],y=d[d.length-(u?4:3)],E=Oo(s),v=Aa(y,U);if(l&&E===v){const w=E?zn(s,Pn):zn(s,qi);h.push(S(v?o[0]+(w?Tn:-40):y[0],v?y[1]:o[1]+(w?Tn:-40))),h.push(S(E?o[0]+(w?Tn:-40):o[0],E?o[1]:o[1]+(w?Tn:-40))),u||(u=!0)}else h.push(S(v?o[0]:U[0],v?U[1]:o[1])),u&&(u=!1)}return h.push(o),Xa(h,f.map(({index:U})=>({index:U,start:h[U-1],end:h[U]})).map(U=>({...U,start:S(U.start[0]-r[0],U.start[1]-r[1]),end:S(U.end[0]-r[0],U.end[1]-r[1])})),c,u)},us=1e6,hg=(e,t,n,i)=>{var I,M,T,_,x,C,R,N,D,$,G,H,V,X,j,q,fe,ie,Ue,Ve,$e,nt,zt,Mt,qt;if(e.points.length<2)return{points:n.points??e.points};(e.x<-1e6||e.x>us||e.y<-1e6||e.y>us||e.x+(((T=(M=n==null?void 0:n.points)==null?void 0:M[((I=n==null?void 0:n.points)==null?void 0:I.length)-1])==null?void 0:T[0])??0)<-1e6||e.x+(((C=(x=n==null?void 0:n.points)==null?void 0:x[((_=n==null?void 0:n.points)==null?void 0:_.length)-1])==null?void 0:C[0])??0)>us||e.y+(((D=(N=n==null?void 0:n.points)==null?void 0:N[((R=n==null?void 0:n.points)==null?void 0:R.length)-1])==null?void 0:D[1])??0)<-1e6||e.y+(((H=(G=n==null?void 0:n.points)==null?void 0:G[(($=n==null?void 0:n.points)==null?void 0:$.length)-1])==null?void 0:H[1])??0)>us||e.x+(((j=(X=e==null?void 0:e.points)==null?void 0:X[((V=e==null?void 0:e.points)==null?void 0:V.length)-1])==null?void 0:j[0])??0)<-1e6||e.x+(((ie=(fe=e==null?void 0:e.points)==null?void 0:fe[((q=e==null?void 0:e.points)==null?void 0:q.length)-1])==null?void 0:ie[0])??0)>us||e.y+((($e=(Ve=e==null?void 0:e.points)==null?void 0:Ve[((Ue=e==null?void 0:e.points)==null?void 0:Ue.length)-1])==null?void 0:$e[1])??0)<-1e6||e.y+(((Mt=(zt=e==null?void 0:e.points)==null?void 0:zt[((nt=e==null?void 0:e.points)==null?void 0:nt.length)-1])==null?void 0:Mt[1])??0)>us)&&console.error("Elbow arrow (or update) is outside reasonable bounds (> 1e6)",{arrow:e,updates:n}),e.x=Xe(e.x,-1e6,us),e.y=Xe(e.y,-1e6,us),n.points&&(n.points=n.points.map(([Ce,Ge])=>S(Xe(Ce,-1e6,us),Xe(Ge,-1e6,us))));const s=n.fixedSegments??e.fixedSegments??[],r=n.points?n.points&&n.points.length===2?e.points.map((Ce,Ge)=>Ge===0?n.points[0]:Ge===e.points.length-1?n.points[1]:Ce):n.points.slice():e.points.slice(),{startBinding:o,endBinding:a,...l}=n,c=typeof o<"u"?o:e.startBinding,u=typeof a<"u"?a:e.endBinding,d=c&&kb(c.elementId,t),f=u&&kb(u.elementId,t),h=Uw(r);if(c&&!d&&h||u&&!f&&h||t.size===0&&h||Object.keys(l).length===0&&((d==null?void 0:d.id)!==(c==null?void 0:c.elementId)||(f==null?void 0:f.id)!==(u==null?void 0:u.elementId)))return Xa(r.map(Ce=>S(e.x+Ce[0],e.y+Ce[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial);const{startHeading:m,endHeading:p,startGlobalPoint:U,endGlobalPoint:y,hoveredStartElement:E,hoveredEndElement:v,...w}=hw({x:e.x,y:e.y,startBinding:c,endBinding:u,startArrowhead:e.startArrowhead,endArrowhead:e.endArrowhead,points:e.points},t,r,i);return t.size===0&&h?Xa(r.map(Ce=>S(e.x+Ce[0],e.y+Ce[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial):!n.points&&!n.fixedSegments&&!n.startBinding&&!n.endBinding?gae(e,t):n.startBinding===e.startBinding&&n.endBinding===e.endBinding&&(n.points??[]).every((Ce,Ge)=>Ir(Ce,e.points[Ge]??S(1/0,1/0)))&&h?{}:s.length===0?Xa(mw(pw(gw(e,{startHeading:m,endHeading:p,startGlobalPoint:U,endGlobalPoint:y,hoveredEndElement:v,...w})??[])),s,null,null):(((qt=e.fixedSegments)==null?void 0:qt.length)??0)>s.length?mae(e,s,t):n.points?n.points&&n.fixedSegments?n:Uae(e,r,s,m,p,U,y,E,v):pae(e,s,m,p,E,v)},hw=(e,t,n,i)=>{var I,M;const s=Eb(n[0],On(e.x,e.y)),r=Eb(n[n.length-1],On(e.x,e.y));let o=null,a=null;if(i!=null&&i.isDragging){const T=Array.from(t.values());o=BC(s,t,T,i==null?void 0:i.zoom)||null,a=BC(r,t,T,i==null?void 0:i.zoom)||null}else o=e.startBinding&&kb(e.startBinding.elementId,t)||null,a=e.endBinding&&kb(e.endBinding.elementId,t)||null;const l=PC({...e,type:"arrow",elbowed:!0,points:n},"start",(I=e.startBinding)==null?void 0:I.fixedPoint,s,o,i==null?void 0:i.isDragging),c=PC({...e,type:"arrow",elbowed:!0,points:n},"end",(M=e.endBinding)==null?void 0:M.fixedPoint,r,a,i==null?void 0:i.isDragging),u=FC(l,c,o,s),d=FC(c,l,a,r),f=[l[0]-2,l[1]-2,l[0]+2,l[1]+2],h=[c[0]-2,c[1]-2,c[0]+2,c[1]+2],m=o?Co(o,_l(u,e.startArrowhead?Rt*6:Rt*2,1)):f,p=a?Co(a,_l(d,e.endArrowhead?Rt*6:Rt*2,1)):h,U=Lh(l,a?Co(a,_l(d,Tn,Tn)):h)||Lh(c,o?Co(o,_l(u,Tn,Tn)):f),y=bB(U?[f,h]:[m,p]),E=Eae(U?f:m,U?h:p,y,U?_l(u,!o&&!a?0:Tn,0):_l(u,!o&&!a?0:Tn-(e.startArrowhead?Rt*6:Rt*2),Tn),U?_l(d,!o&&!a?0:Tn,0):_l(d,!o&&!a?0:Tn-(e.endArrowhead?Rt*6:Rt*2),Tn),U,o&&Co(o),a&&Co(a)),v=OC(E[0],u,l),w=OC(E[1],d,c);return{dynamicAABBs:E,startDonglePosition:v,startGlobalPoint:l,startHeading:u,endDonglePosition:w,endGlobalPoint:c,endHeading:d,commonBounds:y,hoveredStartElement:o,hoveredEndElement:a,boundsOverlap:U,startElementBounds:m,endElementBounds:p}},gw=(e,t)=>{const{dynamicAABBs:n,startDonglePosition:i,startGlobalPoint:s,startHeading:r,endDonglePosition:o,endGlobalPoint:a,endHeading:l,commonBounds:c,hoveredEndElement:u}=t,d=vae(n,i||s,r,o||a,l,c),f=i&&gU(i,d),h=o&&gU(o,d),m=gU(a,d);m&&u&&(m.closed=!0);const p=gU(s,d);p&&e.startBinding&&(p.closed=!0);const U=f&&h&&(Lh(f.pos,n[1])||Lh(h.pos,n[0])),y=bae(f||p,h||m,d,r||Pn,l||Pn,U?[]:n);if(y){const E=y.map(v=>[v.pos[0],v.pos[1]]);return f&&E.unshift(s),h&&E.push(a),E}return null},_l=(e,t,n)=>{switch(e){case jr:return[t,n,n,n];case Pn:return[n,t,n,n];case qi:return[n,n,t,n]}return[n,n,n,t]},bae=(e,t,n,i,s,r)=>{const o=q8(e.pos,t.pos),a=new Wne(l=>l.f);for(a.push(e);a.size()>0;){const l=a.pop();if(!l||l.closed)continue;if(l===t)return yae(e,l);l.closed=!0;const c=_ae(l.addr,n);for(let u=0;u<4;u++){const d=c[u];if(!d||d.closed)continue;const f=_1(d.pos,l.pos,.5);if(kse(...r.map(w=>Lh(f,w))))continue;const h=Tae(u),m=l.parent?Ah(re(l.pos,l.parent.pos)):i,p=$F(m);if(zn(p,h)||zC(e.addr,d.addr)&&zn(h,i)||zC(t.addr,d.addr)&&zn(h,s))continue;const y=m!==h,E=l.g+q8(d.pos,l.pos)+(y?Math.pow(o,3):0),v=d.visited;if(!v||E<d.g){const w=wae(d,t,h,s);d.visited=!0,d.parent=l,d.h=q8(t.pos,d.pos)+w*Math.pow(o,2),d.g=E,d.f=d.g+d.h,v?a.rescoreElement(d):a.push(d)}}}return null},yae=(e,t)=>{let n=t;const i=[];for(;n.parent;)i.unshift(n),n=n.parent;return i.unshift(e),i},q8=(e,t)=>Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1]),Eae=(e,t,n,i,s,r,o,a)=>{const l=o??e,c=a??t,[u,d,f,h]=i??[0,0,0,0],[m,p,U,y]=s??[0,0,0,0],E=[e[0]>t[2]?e[1]>t[3]||e[3]<t[1]?Math.min((l[0]+c[2])/2,e[0]-h):(l[0]+c[2])/2:e[0]>t[0]?e[0]-h:n[0]-h,e[1]>t[3]?e[0]>t[2]||e[2]<t[0]?Math.min((l[1]+c[3])/2,e[1]-u):(l[1]+c[3])/2:e[1]>t[1]?e[1]-u:n[1]-u,e[2]<t[0]?e[1]>t[3]||e[3]<t[1]?Math.max((l[2]+c[0])/2,e[2]+d):(l[2]+c[0])/2:e[2]<t[2]?e[2]+d:n[2]+d,e[3]<t[1]?e[0]>t[2]||e[2]<t[0]?Math.max((l[3]+c[1])/2,e[3]+f):(l[3]+c[1])/2:e[3]<t[3]?e[3]+f:n[3]+f],v=[t[0]>e[2]?t[1]>e[3]||t[3]<e[1]?Math.min((c[0]+l[2])/2,t[0]-y):(c[0]+l[2])/2:t[0]>e[0]?t[0]-y:n[0]-y,t[1]>e[3]?t[0]>e[2]||t[2]<e[0]?Math.min((c[1]+l[3])/2,t[1]-m):(c[1]+l[3])/2:t[1]>e[1]?t[1]-m:n[1]-m,t[2]<e[0]?t[1]>e[3]||t[3]<e[1]?Math.max((c[2]+l[0])/2,t[2]+p):(c[2]+l[0])/2:t[2]<e[2]?t[2]+p:n[2]+p,t[3]<e[1]?t[0]>e[2]||t[2]<e[0]?Math.max((c[3]+l[1])/2,t[3]+U):(c[3]+l[1])/2:t[3]<e[3]?t[3]+U:n[3]+U],w=bB([E,v]);if(!r&&E[2]-E[0]+v[2]-v[0]>w[2]-w[0]+1e-11&&E[3]-E[1]+v[3]-v[1]>w[3]-w[1]+1e-11){const[I,M]=[(v[0]+v[2])/2,(v[1]+v[3])/2];if(t[0]>e[2]&&e[1]>t[3]){const T=E[2]+(v[0]-E[2])/2,_=v[3]+(E[1]-v[3])/2;return Ut(On(e[2]-I,e[1]-M),On(e[0]-I,e[3]-M))>0?[[E[0],E[1],T,E[3]],[T,v[1],v[2],v[3]]]:[[E[0],_,E[2],E[3]],[v[0],v[1],v[2],_]]}else if(e[2]<t[0]&&e[3]<t[1]){const T=E[2]+(v[0]-E[2])/2,_=E[3]+(v[1]-E[3])/2;return Ut(On(e[0]-I,e[1]-M),On(e[2]-I,e[3]-M))>0?[[E[0],E[1],E[2],_],[v[0],_,v[2],v[3]]]:[[E[0],E[1],T,E[3]],[T,v[1],v[2],v[3]]]}else if(e[0]>t[2]&&e[3]<t[1]){const T=v[2]+(E[0]-v[2])/2,_=E[3]+(v[1]-E[3])/2;return Ut(On(e[2]-I,e[1]-M),On(e[0]-I,e[3]-M))>0?[[T,E[1],E[2],E[3]],[v[0],v[1],T,v[3]]]:[[E[0],E[1],E[2],_],[v[0],_,v[2],v[3]]]}else if(e[0]>t[2]&&e[1]>t[3]){const T=v[2]+(E[0]-v[2])/2,_=v[3]+(E[1]-v[3])/2;return Ut(On(e[0]-I,e[1]-M),On(e[2]-I,e[3]-M))>0?[[T,E[1],E[2],E[3]],[v[0],v[1],T,v[3]]]:[[E[0],_,E[2],E[3]],[v[0],v[1],v[2],_]]}}return[E,v]},vae=(e,t,n,i,s,r)=>{const o=new Set,a=new Set;n===cr||n===Pn?a.add(t[1]):o.add(t[0]),s===cr||s===Pn?a.add(i[1]):o.add(i[0]),e.forEach(u=>{o.add(u[0]),o.add(u[2]),a.add(u[1]),a.add(u[3])}),o.add(r[0]),o.add(r[2]),a.add(r[1]),a.add(r[3]);const l=Array.from(a).sort((u,d)=>u-d),c=Array.from(o).sort((u,d)=>u-d);return{row:l.length,col:c.length,data:l.flatMap((u,d)=>c.map((f,h)=>({f:0,g:0,h:0,closed:!1,visited:!1,parent:null,addr:[h,d],pos:[f,u]})))}},OC=(e,t,n)=>{switch(t){case jr:return S(n[0],e[1]);case Pn:return S(e[2],n[1]);case qi:return S(n[0],e[3])}return S(e[0],n[1])},wae=(e,t,n,i)=>{if(i===Pn)switch(n){case Pn:return e.pos[0]>=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2;case jr:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case qi:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case cr:return e.pos[1]===t.pos[1]?4:2}else if(i===cr)switch(n){case Pn:return e.pos[1]===t.pos[1]?4:2;case jr:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case qi:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case cr:return e.pos[0]<=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2}else if(i===jr)switch(n){case Pn:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case jr:return e.pos[1]>=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case qi:return e.pos[0]===t.pos[0]?4:2;case cr:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3}else if(i===qi)switch(n){case Pn:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case jr:return e.pos[0]===t.pos[0]?4:2;case qi:return e.pos[1]<=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case cr:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3}return 0},_ae=([e,t],n)=>[T1([e,t-1],n),T1([e+1,t],n),T1([e,t+1],n),T1([e-1,t],n)],T1=([e,t],n)=>e<0||e>=n.col||t<0||t>=n.row?null:n.data[t*n.col+e]??null,gU=(e,t)=>{for(let n=0;n<t.col;n++)for(let i=0;i<t.row;i++){const s=T1([n,i],t);if(s&&e[0]===s.pos[0]&&e[1]===s.pos[1])return s}return null},bB=e=>[Math.min(...e.map(t=>t[0])),Math.min(...e.map(t=>t[1])),Math.max(...e.map(t=>t[2])),Math.max(...e.map(t=>t[3]))],kb=(e,t)=>{const n=t.get(e);return n&&so(n)?n:null},Xa=(e,t,n,i)=>{const s=e[0][0],r=e[0][1];let o=e.map(a=>Eb(a,At(re(e[0]),-1)));return(s<-1e6||s>us||r<-1e6||r>us||s+o[o.length-1][0]<-1e6||r+o[o.length-1][0]>us||s+o[o.length-1][1]<-1e6||r+o[o.length-1][1]>us)&&console.error("Elbow arrow normalization is outside reasonable bounds (> 1e6)",{x:s,y:r,points:o,...Ch(o)}),o=o.map(([a,l])=>S(Xe(a,-1e6,1e6),Xe(l,-1e6,1e6))),{points:o,x:Xe(s,-1e6,1e6),y:Xe(r,-1e6,1e6),fixedSegments:((t==null?void 0:t.length)??0)>0?t:null,...Ch(o),startIsSpecial:n,endIsSpecial:i}},mw=e=>{if(e.length>1){let t=Math.abs(e[0][1]-e[1][1])<Math.abs(e[0][0]-e[1][0]);return e.filter((n,i)=>{if(i===0||i===e.length-1)return!0;const s=e[i+1],r=Math.abs(n[1]-s[1])<Math.abs(n[0]-s[0]);return t===r?(t=r,!1):(t=r,!0)})}return e},pw=e=>e.length>=4?e.filter((t,n)=>{if(n===0||n===e.length-1)return!0;const i=e[n-1];return Je(i,t)>fw}):e,Tae=e=>{switch(e){case 0:return jr;case 1:return Pn;case 2:return qi}return cr},PC=(e,t,n,i,s,r)=>{if(r){if(s){const o=K0(e,s,t);return zae(s,o)}return i}if(s){const o=z3(n||[0,0],s);return Math.abs(p5(s,o)-Rt)>.01?K0(e,s,t):o}return i},FC=(e,t,n,i)=>Pae(e,t,n,n&&Co(n,Array(4).fill(p5(n,e))),i),BC=(e,t,n,i)=>Zr(Wr(e),n,t,i,!0,!0),zC=(e,t)=>e[0]===t[0]&&e[1]===t[1],Uw=(e,t=fw)=>e.slice(1).map((n,i)=>Math.abs(n[0]-e[i][0])<t||Math.abs(n[1]-e[i][1])<t).every(Boolean),pi=(e,t,n,i)=>{let s=!1;const{points:r,fixedSegments:o,startBinding:a,endBinding:l,fileId:c}=n;he(e)&&(Object.keys(n).length===0||typeof r<"u"||typeof o<"u"||typeof a<"u"||typeof l<"u")?n={...n,angle:0,...hg({...e,x:n.x||e.x,y:n.y||e.y},t,n,i)}:typeof r<"u"&&(n={...Ch(r),...n});for(const u in n){const d=n[u];if(typeof d<"u"){if(e[u]===d&&(typeof d!="object"||d===null||u==="groupIds"||u==="scale"))continue;if(u==="scale"){const f=e[u],h=d;if(f[0]===h[0]&&f[1]===h[1])continue}else if(u==="points"){const f=e[u],h=d;if(f.length===h.length){let m=!1,p=f.length;for(;--p;){const U=f[p],y=h[p];if(U[0]!==y[0]||U[1]!==y[1]){m=!0;break}}if(!m)continue}}e[u]=d,s=!0}}return s&&((typeof n.height<"u"||typeof n.width<"u"||typeof c<"u"||typeof r<"u")&&Gt.delete(e),e.version++,e.versionNonce=Wo(),e.updated=fg()),e},Ie=(e,t,n=!1)=>{let i=!1;for(const s in t){const r=t[s];if(typeof r<"u"){if(e[s]===r&&(typeof r!="object"||r===null))continue;i=!0}}return!i&&!n?e:{...e,...t,updated:fg(),version:e.version+1,versionNonce:Wo()}},Ma=(e,t)=>(e.version=(t??e.version)+1,e.versionNonce=Wo(),e.updated=fg(),e),Sae=e=>!e[z.CTRL_OR_CMD],Cu=e=>e.isBindingEnabled,Rt=5,yB=10,EB=4,Iae=(e,t)=>{const n=[];return t.forEach(i=>{const s=e.getNonDeletedElement(i);s!=null&&n.push(s)}),n},w5=(e,t,n,i)=>{const s=new Set,r=new Set;HC(e,t,n,"start",s,r,i),HC(e,n,t,"end",s,r,i);const o=Array.from(r).filter(a=>!s.has(a));Iae(i,o).forEach(a=>{var l;i.mutateElement(a,{boundElements:(l=a.boundElements)==null?void 0:l.filter(c=>c.type!=="arrow"||c.id!==e.id)})})},HC=(e,t,n,i,s,r,o)=>{if(t!=="keep"){if(t===null){const a=Rae(e,i,o);a!=null&&r.add(a);return}TB(e)?(n==null||(n==="keep"?!wB(e,t,i):i==="start"||n.id!==t.id))&&(gr(e,t,i,o),s.add(t.id)):(gr(e,t,i,o),s.add(t.id))}},xae=(e,t,n,i)=>{var o,a;const s=SB(e,t,n),r=t==="start"?(o=e.startBinding)==null?void 0:o.elementId:(a=e.endBinding)==null?void 0:a.elementId;if(r){const l=n.get(r);if(so(l)&&u2(l,s,n,i))return l}return null},vB=(e,t,n)=>["start","end"].map(i=>xae(e,i,t,n)),Cae=(e,t,n,i,s,r)=>{const a=e.points.length-1,l=n.findIndex(f=>f===0)>-1,c=n.findIndex(f=>f===a)>-1,u=l?t?Nb(e,"start",i,s,r):null:"keep",d=c?t?Nb(e,"end",i,s,r):null:"keep";return[u,d]},Aae=(e,t,n,i,s)=>{if(he(e))return["keep","keep"];const[r,o]=vB(e,t,s),a=r&&i?Nb(e,"start",t,n,s):null,l=o&&i?Nb(e,"end",t,n,s):null;return[a,l]},Db=(e,t,n,i,s)=>{e.forEach(r=>{const[o,a]=n!=null&&n.length?Cae(r,t,n??[],i.getNonDeletedElementsMap(),i.getNonDeletedElements(),s):Aae(r,i.getNonDeletedElementsMap(),i.getNonDeletedElements(),t,s);w5(r,o,a,i)})},Q8=(e,t,n)=>e.length>50?[]:e.filter(Ae).flatMap(i=>vB(i,t,n)).filter(i=>i!==null).filter(i=>e.filter(s=>s.id===(i==null?void 0:i.id)).length===0),B3=(e,t,n,i)=>{const s=i.getNonDeletedElements(),r=i.getNonDeletedElementsMap();t.startBoundElement!=null&&gr(e,t.startBoundElement,"start",i);const o=Zr(n,s,r,t.zoom,he(e),he(e));o!==null&&(wB(e,o,"end")||gr(e,o,"end",i))},Mae=(e,t)=>{let n=e.gap;const i=hd(t,t.width,t.height);return n>i&&(n=yB+EB),{...e,gap:n}},gr=(e,t,n,i)=>{if(!xe(e))return;let s={elementId:t.id,...Mae(Lae(e,t,n,i.getNonDeletedElementsMap()),t)};he(e)&&(s={...s,...Lb(e,t,n)}),i.mutateElement(e,{[n==="start"?"startBinding":"endBinding"]:s}),_e(t.boundElements||[]).has(e.id)||i.mutateElement(t,{boundElements:(t.boundElements||[]).concat({id:e.id,type:"arrow"})})},wB=(e,t,n)=>{const i=e[n==="start"?"endBinding":"startBinding"];return _B(e,i==null?void 0:i.elementId,t)},_B=(e,t,n)=>t===n.id&&TB(e),TB=e=>e.points.length<3,Rae=(e,t,n)=>{const i=t==="start"?"startBinding":"endBinding",s=e[i];return s==null?null:(n.mutateElement(e,{[i]:null}),s.elementId)},Zr=(e,t,n,i,s,r)=>{if(r){let a=!1;const l=Dae(t,u=>so(u,!1)&&u2(u,e,n,i,(s||!z8(u))&&!Te(u))).filter(u=>a?!1:(z8(u)||(a=!0),!0));if(!l||l.length===0)return null;if(l.length===1)return l[0];const c=l.filter(u=>u2(u,e,n,i,!1));return c.length===1?c[0]:l.sort((u,d)=>d.width**2+d.height**2-(u.width**2+u.height**2)).pop()}return kae(t,a=>so(a,!1)&&u2(a,e,n,i,(s||!z8(a))&&!Te(a)))},kae=(e,t)=>{let n=null;for(let i=e.length-1;i>=0;--i){const s=e[i];if(!s.isDeleted&&t(s)){n=s;break}}return n},Dae=(e,t)=>{const n=[];for(let i=e.length-1;i>=0;--i){const s=e[i];s.isDeleted||t(s)&&n.push(s)}return n},Lae=(e,t,n,i)=>{const s=n==="start"?-1:1,r=s===-1?0:e.points.length-1,o=r-s,a=le.getPointAtIndexGlobalCoordinates(e,r,i),l=le.getPointAtIndexGlobalCoordinates(e,o,i);return{focus:$ae(t,l,a),gap:Math.max(1,p5(t,a))}},ys=(e,t,n)=>{if(!so(e))return;const{newSize:i,simultaneouslyUpdated:s}=n??{},r=Oae(s);let o=t.getNonDeletedElementsMap();n!=null&&n.changedElements&&(o=new Map(o),n.changedElements.forEach(a=>{o.set(a.id,a)})),Ob(o,e,a=>{var p,U;if(!Ae(a)||a.isDeleted||!Nae(a,e))return;const l=a.startBinding?o.get(a.startBinding.elementId):null,c=a.endBinding?o.get(a.endBinding.elementId):null;let u=null,d=null;l&&c&&(u=ro(l,o),d=ro(c,o));const f={startBinding:VC(e,a.startBinding,i),endBinding:VC(e,a.endBinding,i)};if(r.has(a.id)){t.mutateElement(a,f);return}const h=Pb(o,a,(y,E)=>{var v,w;if(y&&so(y)&&(E==="startBinding"||E==="endBinding")&&(e.id===((v=a[E])==null?void 0:v.elementId)||e.id===((w=a[E==="startBinding"?"endBinding":"startBinding"])==null?void 0:w.elementId)&&!dle(u,d))){const I=Hae(a,E,f[E],y,o);if(I)return[E==="startBinding"?0:a.points.length-1,{point:I}]}return null}).filter(y=>y!==null);le.movePoints(a,t,new Map(h),{...e.id===((p=a.startBinding)==null?void 0:p.elementId)?{startBinding:f.startBinding}:{},...e.id===((U=a.endBinding)==null?void 0:U.elementId)?{endBinding:f.endBinding}:{}});const m=Oe(a,o);m&&!m.isDeleted&&ip(a,t,!1)})},W0=(e,t,n)=>{Ae(e)?Db([e],!0,[],t,n==null?void 0:n.zoom):ys(e,t,{...n,changedElements:new Map([[e.id,e]])})},Nae=(e,t)=>{var n,i;return((n=e.startBinding)==null?void 0:n.elementId)===t.id||((i=e.endBinding)==null?void 0:i.elementId)===t.id},Oae=e=>new Set((e||[]).map(t=>t.id)),Pae=(e,t,n,i,s,r)=>{const o=Ah(re(t,e));return!n||!i?o:Fae(s,n,r)?J9(n,i,e):Ah(re(e,Xn(n)))},Fae=(e,t,n)=>{const i=p5(t,e),s=hd(t,t.width,t.height,n);return i>s?null:i},K0=(e,t,n)=>{ti(e.points.length>1,"Arrow should have at least 2 points");const i=Co(t),s=e.points[n==="start"?0:e.points.length-1],r=S(e.x+s[0],e.y+s[1]),o=Vre(t)?Bae(t,r):r,a=he(e),l=Ew(i),c=n==="start"?1:e.points.length-2,u=Z(S(e.x+e.points[c][0],e.y+e.points[c][1]),l,e.angle??0);let d=null;if(a){const f=Oo(J9(t,i,r)),h=S(f?l[0]:o[0],f?o[1]:l[1]);d=N3(t,we(h,Re(At(Bn(re(o,h)),Math.max(t.width,t.height)*2),h)))[0]}else d=N3(t,we(u,Re(At(Bn(re(o,u)),Je(o,u)+Math.max(t.width,t.height)*2),u)),Rt).sort((f,h)=>xa(f,u)-xa(h,u))[0];if(!d||xa(o,d)<kc)return o;if(a){const f=xa(o,l)-xa(d,l)>0?Rt:-5;return Re(At(Bn(re(o,d)),f),d)}return o},Bae=(e,t)=>{const n=Xn(e),i=Z(t,n,-e.angle);return i[0]<e.x&&i[1]<e.y?i[1]-e.y>-5?Z(S(e.x-Rt,e.y),n,e.angle):Z(S(e.x,e.y-Rt),n,e.angle):i[0]<e.x&&i[1]>e.y+e.height?i[0]-e.x>-5?Z(S(e.x,e.y+e.height+Rt),n,e.angle):Z(S(e.x-Rt,e.y+e.height),n,e.angle):i[0]>e.x+e.width&&i[1]>e.y+e.height?i[0]-e.x<e.width+Rt?Z(S(e.x+e.width,e.y+e.height+Rt),n,e.angle):Z(S(e.x+e.width+Rt,e.y+e.height),n,e.angle):i[0]>e.x+e.width&&i[1]<e.y?i[0]-e.x<e.width+Rt?Z(S(e.x+e.width,e.y-Rt),n,e.angle):Z(S(e.x+e.width+Rt,e.y),n,e.angle):t},zae=(e,t,n=.05)=>{const{x:i,y:s,width:r,height:o,angle:a}=e,l=Xn(e,-.1,-.1),c=Z(t,l,-a),u=Xe(n*o,5,80),d=Xe(n*r,5,80);if(c[0]<=i+r/2&&c[1]>l[1]-u&&c[1]<l[1]+u)return Z(S(i-Rt,l[1]),l,a);if(c[1]<=s+o/2&&c[0]>l[0]-d&&c[0]<l[0]+d)return Z(S(l[0],s-Rt),l,a);if(c[0]>=i+r/2&&c[1]>l[1]-u&&c[1]<l[1]+u)return Z(S(i+r+Rt,l[1]),l,a);if(c[1]>=s+o/2&&c[0]>l[0]-d&&c[0]<l[0]+d)return Z(S(l[0],s+o+Rt),l,a);if(e.type==="diamond"){const f=Rt-1,h=S(i+r/4-f,s+o/4-f),m=S(i+3*r/4+f,s+o/4-f),p=S(i+r/4-f,s+3*o/4+f),U=S(i+3*r/4+f,s+3*o/4+f);if(Je(h,c)<Math.max(d,u))return Z(h,l,a);if(Je(m,c)<Math.max(d,u))return Z(m,l,a);if(Je(p,c)<Math.max(d,u))return Z(p,l,a);if(Je(U,c)<Math.max(d,u))return Z(U,l,a)}return t},Hae=(e,t,n,i,s)=>{if(n==null||n.elementId!==i.id&&e.points.length>2)return null;const r=t==="startBinding"?-1:1,o=r===-1?0:e.points.length-1;if(he(e)&&Cb(n)){const d=_5(n.fixedPoint)??Lb(e,i,t==="startBinding"?"start":"end").fixedPoint,f=Xn(i),h=S(i.x+d[0]*i.width,i.y+d[1]*i.height),m=Z(h,f,i.angle);return le.pointFromAbsoluteCoords(e,m,s)}const a=o-r,l=le.getPointAtIndexGlobalCoordinates(e,a,s),c=Gae(i,n.focus,l);let u;if(n.gap===0)u=c;else{const d=le.getPointAtIndexGlobalCoordinates(e,o,s),f=Xn(i),h=Je(l,d)+Je(l,f)+Math.max(i.width,i.height)*2,m=[...N3(i,we(l,Re(At(Bn(re(c,l)),h),l)),n.gap).sort((p,U)=>xa(p,l)-xa(U,l)),Re(At(Bn(re(c,l)),Je(l,d)),l)];m.length>1?u=m[0]:m.length===1?u=c:u=d}return le.pointFromAbsoluteCoords(e,u,s)},Lb=(e,t,n)=>{const i=[t.x,t.y,t.x+t.width,t.y+t.height],s=K0(e,t,n),r=S(i[0]+(i[2]-i[0])/2,i[1]+(i[3]-i[1])/2),o=Z(s,r,-t.angle);return{fixedPoint:_5([(o[0]-t.x)/t.width,(o[1]-t.y)/t.height])}},VC=(e,t,n)=>{if(t==null||n==null)return t;const{width:i,height:s}=n,{width:r,height:o}=e,a=Math.max(1,Math.min(hd(e,i,s),t.gap*(i<s?i/r:s/o)));return{...t,gap:a}},Nb=(e,t,n,i,s)=>Zr(SB(e,t,n),i,n,s,he(e),he(e)),SB=(e,t,n)=>{const i=t==="start"?0:-1;return Wr(le.getPointAtIndexGlobalCoordinates(e,i,n))},Vae=(e,t,n)=>{for(const i of e){if("boundElements"in i&&i.boundElements&&Object.assign(i,{boundElements:i.boundElements.reduce((s,r)=>{const o=t.get(r.id);return o&&s.push({...r,id:o}),s},[])}),"containerId"in i&&i.containerId&&Object.assign(i,{containerId:t.get(i.containerId)??null}),"endBinding"in i&&i.endBinding){const s=t.get(i.endBinding.elementId);Object.assign(i,{endBinding:s?{...i.endBinding,elementId:s}:null})}if("startBinding"in i&&i.startBinding){const s=t.get(i.startBinding.elementId);Object.assign(i,{startBinding:s?{...i.startBinding,elementId:s}:null})}he(i)&&Object.assign(i,hg(i,n,{points:[i.points[0],i.points[i.points.length-1]]}))}},IB=(e,t)=>{const n=_e(e);for(const i of t)Pf.unbindAffected(n,i,(s,r)=>pi(s,n,r)),Ff.unbindAffected(n,i,(s,r)=>pi(s,n,r))},a0=(e,t,n=[])=>{if(!e)return null;const i=e.filter(s=>!t.has(s.id));return i.push(...n.map(s=>({id:s.id,type:s.type}))),i},u2=(e,{x:t,y:n},i,s,r)=>{const o=hd(e,e.width,e.height,s),a=Gr(e,i);return n4(S(t,n),a,o)||r===!0&&Lh(S(t,n),Co(e))},hd=(e,t,n,i)=>{const s=i!=null&&i.value&&i.value<1?i.value:1,o=(e.type==="diamond"?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*o,32),yB/s+EB)},$ae=(e,t,n)=>{const i=Xn(e);if(Ir(t,n))return 0;const s=Z(t,i,-e.angle),r=Z(n,i,-e.angle),o=Math.sign(Ut(re(r,t),re(r,i)))*-1,a=we(r,Re(At(Bn(re(r,s)),Math.max(e.width*2,e.height*2)),r)),l=e.type==="diamond"?[we(S(e.x+e.width/2,e.y),S(e.x+e.width/2,e.y+e.height)),we(S(e.x,e.y+e.height/2),S(e.x+e.width,e.y+e.height/2))]:[we(S(e.x,e.y),S(e.x+e.width,e.y+e.height)),we(S(e.x+e.width,e.y),S(e.x,e.y+e.height))],c=e.type==="diamond"?[we(S(e.x+e.width/2,e.y-e.height),S(e.x+e.width/2,e.y+e.height*2)),we(S(e.x-e.width,e.y+e.height/2),S(e.x+e.width*2,e.y+e.height/2))]:[we(S(e.x-e.width,e.y-e.height),S(e.x+e.width*2,e.y+e.height*2)),we(S(e.x+e.width*2,e.y-e.height),S(e.x-e.width,e.y+e.height*2))];return[ud(a,c[0]),ud(a,c[1])].filter(f=>f!==null).sort((f,h)=>xa(f,n)-xa(h,n)).map((f,h)=>o*Je(i,f)/(e.type==="diamond"?Je(l[h][0],l[h][1])/2:Math.sqrt(e.width**2+e.height**2)/2)).sort((f,h)=>Math.abs(f)-Math.abs(h))[0]??0},Gae=(e,t,n)=>{const i=Xn(e);if(t===0)return i;const s=(e.type==="diamond"?[S(e.x,e.y+e.height/2),S(e.x+e.width/2,e.y),S(e.x+e.width,e.y+e.height/2),S(e.x+e.width/2,e.y+e.height)]:[S(e.x,e.y),S(e.x+e.width,e.y),S(e.x+e.width,e.y+e.height),S(e.x,e.y+e.height)]).map(a=>Re(At(re(a,i),Math.abs(t)),i)).map(a=>Z(a,i,e.angle)),r=[Ut(re(n,s[0]),re(s[1],s[0]))>0&&(t>0?Ut(re(n,s[1]),re(s[2],s[1]))<0:Ut(re(n,s[3]),re(s[0],s[3]))<0),Ut(re(n,s[1]),re(s[2],s[1]))>0&&(t>0?Ut(re(n,s[2]),re(s[3],s[2]))<0:Ut(re(n,s[0]),re(s[1],s[0]))<0),Ut(re(n,s[2]),re(s[3],s[2]))>0&&(t>0?Ut(re(n,s[3]),re(s[0],s[3]))<0:Ut(re(n,s[1]),re(s[2],s[1]))<0),Ut(re(n,s[3]),re(s[0],s[3]))>0&&(t>0?Ut(re(n,s[0]),re(s[1],s[0]))<0:Ut(re(n,s[2]),re(s[3],s[2]))<0)];return r[0]?t>0?s[1]:s[0]:r[1]?t>0?s[2]:s[1]:r[2]?t>0?s[3]:s[2]:t>0?s[0]:s[3]},Xae=new Set(["boundElements","frameId","containerId","startBinding","endBinding"]),Ob=(e,t,n)=>{var i;so(t)&&(((i=t.boundElements)==null?void 0:i.slice())??[]).forEach(({id:r})=>{n(e.get(r),"boundElements",r)})},Pb=(e,t,n)=>{const i=[];if(t.frameId){const s=t.frameId;i.push(n(e.get(s),"frameId",s))}if(Xt(t)){const s=t.containerId;i.push(n(e.get(s),"containerId",s))}if(xe(t)){if(t.startBinding){const s=t.startBinding.elementId;i.push(n(e.get(s),"startBinding",s))}if(t.endBinding){const s=t.endBinding.elementId;i.push(n(e.get(s),"endBinding",s))}}return i};class Pf{static unbindAffected(t,n,i){n&&Pb(t,n,s=>{!s||s.isDeleted||Ob(t,s,(r,o,a)=>{a===n.id&&i(s,{boundElements:a0(s.boundElements,new Set([a]))})})})}}F(Pf,"rebindAffected",(t,n,i)=>{!n||n.isDeleted||Pb(t,n,(s,r)=>{var o,a;if(!s||s.isDeleted){i(n,{[r]:null});return}r!=="frameId"&&((o=s.boundElements)!=null&&o.find(l=>l.id===n.id)||(xe(n)&&i(s,{boundElements:a0(s.boundElements,new Set,new Array(n))}),ue(n)&&((a=s.boundElements)!=null&&a.find(l=>l.type==="text")?i(n,{[r]:null}):i(s,{boundElements:a0(s.boundElements,new Set,new Array(n))}))))})});class Ff{static unbindAffected(t,n,i){n&&Ob(t,n,s=>{!s||s.isDeleted||Pb(t,s,(r,o,a)=>{a===n.id&&i(s,{[o]:null})})})}}F(Ff,"rebindAffected",(t,n,i)=>{!n||n.isDeleted||Ob(t,n,(s,r,o)=>{var a,l;if(!s||s.isDeleted){i(n,{boundElements:a0(n.boundElements,new Set([o]))});return}ue(s)&&(((l=(((a=n.boundElements)==null?void 0:a.slice())??[]).reverse().find(u=>u.type==="text"))==null?void 0:l.id)===s.id?s.containerId!==n.id&&i(s,{containerId:n.id}):(s.containerId!==null&&i(s,{containerId:null}),i(n,{boundElements:a0(n.boundElements,new Set([s.id]))})))})});const z3=(e,t)=>{const[n,i]=_5(e);return Z(S(t.x+t.width*n,t.y+t.height*i),Xn(t),t.angle)},jae=(e,t)=>{const n=e.startBinding&&t.get(e.startBinding.elementId),i=e.endBinding&&t.get(e.endBinding.elementId),s=n&&e.startBinding?z3(e.startBinding.fixedPoint,n):S(e.x+e.points[0][0],e.y+e.points[0][1]),r=i&&e.endBinding?z3(e.endBinding.fixedPoint,i):S(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]);return[s,r]},Yae=(e,t)=>{const[n,i]=jae(e,t);return[le.pointFromAbsoluteCoords(e,n,t),le.pointFromAbsoluteCoords(e,i,t)]},_5=e=>e&&(Math.abs(e[0]-.5)<1e-4||Math.abs(e[1]-.5)<1e-4)?e.map(t=>Math.abs(t-.5)<1e-4?.5001:t):e,ga={version:null,points:[],zoom:null},Ee=class Ee{constructor(t,n){F(this,"elementId");F(this,"selectedPointsIndices");F(this,"pointerDownState");F(this,"isDragging");F(this,"lastUncommittedPoint");F(this,"pointerOffset");F(this,"startBindingElement");F(this,"endBindingElement");F(this,"hoverPointIndex");F(this,"segmentMidPointHoveredCoords");F(this,"elbowed");this.elementId=t.id,Ir(t.points[0],S(0,0))||(console.error("Linear element is not normalized",Error().stack),Ee.normalizePoints(t,n)),this.selectedPointsIndices=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep",this.pointerDownState={prevSelectedPointsIndices:null,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:null,segmentMidpoint:{value:null,index:null,added:!1}},this.hoverPointIndex=-1,this.segmentMidPointHoveredCoords=null,this.elbowed=he(t)&&t.elbowed}static getElement(t,n){const i=n.get(t);return i||null}static handleBoxSelection(t,n,i,s){if(!n.editingLinearElement||!n.selectionElement)return!1;const{editingLinearElement:r}=n,{selectedPointsIndices:o,elementId:a}=r,l=Ee.getElement(a,s);if(!l)return!1;const[c,u,d,f]=Ne(n.selectionElement,s),m=Ee.getPointsGlobalCoordinates(l,s).reduce((p,U,y)=>((U[0]>=c&&U[0]<=d&&U[1]>=u&&U[1]<=f||t.shiftKey&&(o!=null&&o.includes(y)))&&p.push(y),p),[]).filter(p=>!(he(l)&&p!==0&&p!==l.points.length-1));i({editingLinearElement:{...r,selectedPointsIndices:m.length?m:null}})}static handlePointDragging(t,n,i,s,r,o,a){var m,p;if(!o)return null;const{elementId:l}=o,c=a.getNonDeletedElementsMap(),u=Ee.getElement(l,c);if(!u||he(u)&&!o.pointerDownState.lastClickedIsEndPoint&&o.pointerDownState.lastClickedPoint!==0)return null;const d=he(u)?[(m=o.selectedPointsIndices)!=null&&m.includes(0)?0:void 0,(p=o.selectedPointsIndices)!=null&&p.find(U=>U>0)?u.points.length-1:void 0].filter(U=>U!==void 0):o.selectedPointsIndices,f=he(u)?o.pointerDownState.lastClickedPoint>0?u.points.length-1:0:o.pointerDownState.lastClickedPoint,h=u.points[f];if(d&&h){if(i0(t)&&d.length===1&&u.points.length>1){const y=d[0],E=u.points[y===0?1:y-1],[v,w]=Ee._getShiftLockedDelta(u,c,E,S(i,s),t[z.CTRL_OR_CMD]?null:n.getEffectiveGridSize());Ee.movePoints(u,a,new Map([[y,{point:S(v+E[0],w+E[1]),isDragging:y===f}]]))}else{const y=Ee.createPointAt(u,c,i-o.pointerOffset.x,s-o.pointerOffset.y,t[z.CTRL_OR_CMD]?null:n.getEffectiveGridSize()),E=y[0]-h[0],v=y[1]-h[1];Ee.movePoints(u,a,new Map(d.map(w=>{const I=w===f?Ee.createPointAt(u,c,i-o.pointerOffset.x,s-o.pointerOffset.y,t[z.CTRL_OR_CMD]?null:n.getEffectiveGridSize()):S(u.points[w][0]+E,u.points[w][1]+v);return[w,{point:I,isDragging:w===f}]})))}if(Oe(u,c)&&ip(u,a,!1),Ca(u,!1)){const y=[];d[0]===0&&y.push(Wr(Ee.getPointGlobalCoordinates(u,u.points[0],c)));const v=d[d.length-1];v===u.points.length-1&&y.push(Wr(Ee.getPointGlobalCoordinates(u,u.points[v],c))),y.length&&r(u,y)}return{...o,selectedPointsIndices:d,segmentMidPointHoveredCoords:f!==0&&f!==u.points.length-1?this.getPointGlobalCoordinates(u,h,c):null,hoverPointIndex:f===0||f===u.points.length-1?f:-1,isDragging:!0}}return null}static handlePointerUp(t,n,i,s){var h;const r=s.getNonDeletedElementsMap(),o=s.getNonDeletedElements(),{elementId:a,selectedPointsIndices:l,isDragging:c,pointerDownState:u}=n,d=Ee.getElement(a,r);if(!d)return n;const f={};if(c&&l){for(const m of l)if(m===0||m===d.points.length-1){nl(d.points,i.zoom.value)&&Ee.movePoints(d,s,new Map([[m,{point:m===0?d.points[d.points.length-1]:d.points[0]}]]));const p=Cu(i)?Zr(Wr(Ee.getPointAtIndexGlobalCoordinates(d,m,r)),o,r,i.zoom,he(d),he(d)):null;f[m===0?"startBindingElement":"endBindingElement"]=p}}return{...n,...f,selectedPointsIndices:c||t.shiftKey?!c&&t.shiftKey&&((h=u.prevSelectedPointsIndices)!=null&&h.includes(u.lastClickedPoint))?l&&l.filter(m=>m!==u.lastClickedPoint):l:l!=null&&l.includes(u.lastClickedPoint)?[u.lastClickedPoint]:l,isDragging:!1,pointerOffset:{x:0,y:0}}}static isSegmentTooShort(t,n,i,s,r){if(he(t))return s>=0&&s<t.points.length?Je(n,i)*r.value<Ee.POINT_HANDLE_SIZE/2:!1;let o=Je(n,i);return t.points.length>2&&t.roundness&&(o=Zae(t,i)),o*r.value<Ee.POINT_HANDLE_SIZE*4}static getSegmentMidPoint(t,n,i,s,r){let o=G0(n,i);if(t.points.length>2&&t.roundness){const a=CB(t,t.points[s]);if(a){const l=qae(t,t.points[s],.5);o=Ee.getPointGlobalCoordinates(t,AB(a[0],a[1],a[2],a[3],l),r)}}return o}static getSegmentMidPointIndex(t,n,i,s){const r=Ee.getElement(t.elementId,s);if(!r)return-1;const o=Ee.getEditorMidPoints(r,s,n);let a=0;for(;a<o.length;){if(Ee.arePointsEqual(i,o[a]))return a+1;a++}return-1}static handlePointerDown(t,n,i,s,r,o){var _;const a=n.state,l=o.getNonDeletedElementsMap(),c=o.getNonDeletedElements(),u={didAddPoint:!1,hitElement:null,linearElementEditor:null};if(!r)return u;const{elementId:d}=r,f=Ee.getElement(d,l);if(!f)return u;const h=Ee.getSegmentMidpointHitCoords(r,s,a,l);let m=null;if(h)m=Ee.getSegmentMidPointIndex(r,a,h,l);else if(t.altKey&&a.editingLinearElement)return r.lastUncommittedPoint==null&&(o.mutateElement(f,{points:[...f.points,Ee.createPointAt(f,l,s.x,s.y,t[z.CTRL_OR_CMD]?null:n.getEffectiveGridSize())]}),u.didAddPoint=!0),i.scheduleCapture(),u.linearElementEditor={...r,pointerDownState:{prevSelectedPointsIndices:r.selectedPointsIndices,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:{x:s.x,y:s.y},segmentMidpoint:{value:h,index:m,added:!1}},selectedPointsIndices:[f.points.length-1],lastUncommittedPoint:null,endBindingElement:Zr(s,c,l,n.state.zoom,r.elbowed)},u.didAddPoint=!0,u;const p=Ee.getPointIndexUnderCursor(f,l,a.zoom,s.x,s.y);if(p>=0||h)u.hitElement=f;else{const{startBindingElement:x,endBindingElement:C}=r;Cu(a)&&Ca(f)&&w5(f,x,C,o)}const[U,y,E,v]=Ne(f,l),w=(U+E)/2,I=(y+v)/2,M=p>-1&&Z(S(f.x+f.points[p][0],f.y+f.points[p][1]),S(w,I),f.angle),T=p>-1||t.shiftKey?t.shiftKey||(_=r.selectedPointsIndices)!=null&&_.includes(p)?Wae([...r.selectedPointsIndices||[],p]):[p]:null;return u.linearElementEditor={...r,pointerDownState:{prevSelectedPointsIndices:r.selectedPointsIndices,lastClickedPoint:p,lastClickedIsEndPoint:p===f.points.length-1,origin:{x:s.x,y:s.y},segmentMidpoint:{value:h,index:m,added:!1}},selectedPointsIndices:T,pointerOffset:M?{x:s.x-M[0],y:s.y-M[1]}:{x:0,y:0}},u}static arePointsEqual(t,n){return!t&&!n?!0:!t||!n?!1:Ir(t,n)}static handlePointerMove(t,n,i,s){const r=s.state;if(!r.editingLinearElement)return null;const{elementId:o,lastUncommittedPoint:a}=r.editingLinearElement,l=s.scene.getNonDeletedElementsMap(),c=Ee.getElement(o,l);if(!c)return r.editingLinearElement;const{points:u}=c,d=u[u.length-1];if(!t.altKey)return d===a&&Ee.deletePoints(c,s.scene,[u.length-1]),{...r.editingLinearElement,lastUncommittedPoint:null};let f;if(i0(t)&&u.length>=2){const h=u[u.length-2],[m,p]=Ee._getShiftLockedDelta(c,l,h,S(n,i),t[z.CTRL_OR_CMD]?null:s.getEffectiveGridSize());f=S(m+h[0],p+h[1])}else f=Ee.createPointAt(c,l,n-r.editingLinearElement.pointerOffset.x,i-r.editingLinearElement.pointerOffset.y,t[z.CTRL_OR_CMD]||he(c)?null:s.getEffectiveGridSize());return d===a?Ee.movePoints(c,s.scene,new Map([[c.points.length-1,{point:f}]])):Ee.addPoints(c,s.scene,[{point:f}]),{...r.editingLinearElement,lastUncommittedPoint:c.points[c.points.length-1]}}static getPointGlobalCoordinates(t,n,i){const[s,r,o,a]=Ne(t,i),l=(s+o)/2,c=(r+a)/2,{x:u,y:d}=t;return Z(S(u+n[0],d+n[1]),S(l,c),t.angle)}static getPointsGlobalCoordinates(t,n){const[i,s,r,o]=Ne(t,n),a=(i+r)/2,l=(s+o)/2;return t.points.map(c=>{const{x:u,y:d}=t;return Z(S(u+c[0],d+c[1]),S(a,l),t.angle)})}static getPointAtIndexGlobalCoordinates(t,n,i){const s=n<0?t.points.length+n:n,[r,o,a,l]=Ne(t,i),c=(r+a)/2,u=(o+l)/2,d=t.points[s],{x:f,y:h}=t;return Z(d?S(f+d[0],h+d[1]):S(f,h),S(c,u),t.angle)}static pointFromAbsoluteCoords(t,n,i){if(he(t))return S(n[0]-t.x,n[1]-t.y);const[s,r,o,a]=Ne(t,i),l=(s+o)/2,c=(r+a)/2,[u,d]=Z(S(n[0],n[1]),S(l,c),-t.angle);return S(u-t.x,d-t.y)}static getPointIndexUnderCursor(t,n,i,s,r){const o=Ee.getPointsGlobalCoordinates(t,n);let a=o.length;for(;--a>-1;){const l=o[a];if(Je(S(s,r),S(l[0],l[1]))*i.value<Ee.POINT_HANDLE_SIZE+1)return a}return-1}static createPointAt(t,n,i,s,r){const o=Mn(i,s,r),[a,l,c,u]=Ne(t,n),d=(a+c)/2,f=(l+u)/2,[h,m]=Z(S(o[0],o[1]),S(d,f),-t.angle);return S(h-t.x,m-t.y)}static getNormalizedPoints(t){const{points:n}=t,i=n[0][0],s=n[0][1];return{points:n.map(r=>S(r[0]-i,r[1]-s)),x:t.x+i,y:t.y+s}}static normalizePoints(t,n){pi(t,n,Ee.getNormalizedPoints(t))}static duplicateSelectedPoints(t,n){ti(t.editingLinearElement,"Not currently editing a linear element");const i=n.getNonDeletedElementsMap(),{selectedPointsIndices:s,elementId:r}=t.editingLinearElement,o=Ee.getElement(r,i);ti(o,"The linear element does not exist in the provided Scene"),ti(s!=null,"There are no selected points to duplicate");const{points:a}=o,l=[];let c=!1,u=-1;const d=a.reduce((f,h,m)=>{if(++u,f.push(h),s.includes(m)){const U=a[m+1];U||(c=!0),f.push(U?S((h[0]+U[0])/2,(h[1]+U[1])/2):S(h[0],h[1])),l.push(u+1),++u}return f},[]);if(n.mutateElement(o,{points:d}),c){const f=o.points[o.points.length-1];Ee.movePoints(o,n,new Map([[o.points.length-1,{point:S(f[0]+30,f[1]+30)}]]))}return{...t,editingLinearElement:{...t.editingLinearElement,selectedPointsIndices:l}}}static deletePoints(t,n,i){let s=0,r=0;if(i.includes(0)){const l=t.points.find((c,u)=>!i.includes(u));l&&(s=l[0],r=l[1])}const a=t.points.reduce((l,c,u)=>(i.includes(u)||l.push(l.length?S(c[0]-s,c[1]-r):S(0,0)),l),[]);Ee._updatePoints(t,n,a,s,r)}static addPoints(t,n,i){const o=[...t.points,...i.map(a=>a.point)];Ee._updatePoints(t,n,o,0,0)}static movePoints(t,n,i,s){var d,f,h;const{points:r}=t,[o,a]=((d=i.get(0))==null?void 0:d.point)??S(0,0),[l,c]=S(o-r[0][0],a-r[0][1]),u=he(t)?[((f=i.get(0))==null?void 0:f.point)??r[0],((h=i.get(r.length-1))==null?void 0:h.point)??r[r.length-1]]:r.map((m,p)=>{var y;const U=((y=i.get(p))==null?void 0:y.point)??m;return S(U[0]-l,U[1]-c)});Ee._updatePoints(t,n,u,l,c,s,{isDragging:Array.from(i.values()).some(m=>m.isDragging)})}static shouldAddMidpoint(t,n,i,s){const r=Ee.getElement(t.elementId,s);if(r&&he(r)||!r)return!1;const{segmentMidpoint:o}=t.pointerDownState;if(o.added||o.value===null||o.index===null||t.pointerDownState.origin===null)return!1;const a=t.pointerDownState.origin,l=Je(S(a.x,a.y),S(n.x,n.y));return!(!i.editingLinearElement&&l<hu/i.zoom.value)}static addMidpoint(t,n,i,s,r){const o=r.getNonDeletedElementsMap(),a=Ee.getElement(t.elementId,o);if(!a)return;const{segmentMidpoint:l}=t.pointerDownState,c={pointerDownState:t.pointerDownState,selectedPointsIndices:t.selectedPointsIndices},u=Ee.createPointAt(a,o,n.x,n.y,s&&!he(a)?i.getEffectiveGridSize():null),d=[...a.points.slice(0,l.index),u,...a.points.slice(l.index)];return r.mutateElement(a,{points:d}),c.pointerDownState={...t.pointerDownState,segmentMidpoint:{...t.pointerDownState.segmentMidpoint,added:!0},lastClickedPoint:l.index},c.selectedPointsIndices=[l.index],c}static _updatePoints(t,n,i,s,r,o,a){if(he(t)){const l={};(o==null?void 0:o.startBinding)!==void 0&&(l.startBinding=o.startBinding!==null&&Cb(o.startBinding)?o.startBinding:null),(o==null?void 0:o.endBinding)!==void 0&&(l.endBinding=o.endBinding!==null&&Cb(o.endBinding)?o.endBinding:null),l.points=Array.from(i),n.mutateElement(t,l,{informMutation:!0,isDragging:(a==null?void 0:a.isDragging)??!1})}else{const l=JC(t,i),c=JC(t,t.points),u=(l[0]+l[2])/2,d=(l[1]+l[3])/2,f=(c[0]+c[2])/2,h=(c[1]+c[3])/2,m=f-u,p=h-d,U=Z(S(s,r),S(m,p),t.angle);n.mutateElement(t,{...o,points:i,x:t.x+U[0],y:t.y+U[1]})}}static _getShiftLockedDelta(t,n,i,s,r){const o=Ee.getPointGlobalCoordinates(t,i,n);if(he(t))return[s[0]-o[0],s[1]-o[1]];const[a,l]=Mn(s[0],s[1],r),{width:c,height:u}=G3(o[0],o[1],a,l);return Z(S(c,u),S(0,0),-t.angle)}static moveFixedSegment(t,n,i,s,r){const o=r.getNonDeletedElementsMap(),a=Ee.getElement(t.elementId,o);if(!a||!he(a))return t;if(n&&n>0&&n<a.points.length){const l=Oo(Ah(re(a.points[n],a.points[n-1]))),c=(a.fixedSegments??[]).reduce((h,m)=>(h[m.index]=m,h),{});c[n]={index:n,start:S(l?a.points[n-1][0]:i-a.x,l?s-a.y:a.points[n-1][1]),end:S(l?a.points[n][0]:i-a.x,l?s-a.y:a.points[n][1])};const u=Object.values(c).sort((h,m)=>h.index-m.index),d=u.map(h=>h.index).reduce((h,m)=>m<n?h+1:h,0);r.mutateElement(a,{fixedSegments:u});const f=S(a.x+(a.fixedSegments[d].start[0]+a.fixedSegments[d].end[0])/2,a.y+(a.fixedSegments[d].start[1]+a.fixedSegments[d].end[1])/2);return{...t,segmentMidPointHoveredCoords:f,pointerDownState:{...t.pointerDownState,segmentMidpoint:{added:!1,index:a.fixedSegments[d].index,value:f}}}}return t}static deleteFixedSegment(t,n,i){var s;n.mutateElement(t,{fixedSegments:(s=t.fixedSegments)==null?void 0:s.filter(r=>r.index!==i)})}};F(Ee,"POINT_HANDLE_SIZE",10),F(Ee,"getEditorMidPoints",(t,n,i)=>{const s=Oe(t,n);return!he(t)&&!i.editingLinearElement&&t.points.length>2&&!s?[]:(ga.version===t.version&&ga.zoom===i.zoom.value||Ee.updateEditorMidPointsCache(t,n,i),ga.points)}),F(Ee,"updateEditorMidPointsCache",(t,n,i)=>{const s=Ee.getPointsGlobalCoordinates(t,n);let r=0;const o=[];for(;r<s.length-1;){if(Ee.isSegmentTooShort(t,t.points[r],t.points[r+1],r,i.zoom)){o.push(null),r++;continue}const a=Ee.getSegmentMidPoint(t,s[r],s[r+1],r+1,n);o.push(a),r++}ga.points=o,ga.version=t.version,ga.zoom=i.zoom.value}),F(Ee,"getSegmentMidpointHitCoords",(t,n,i,s)=>{const{elementId:r}=t,o=Ee.getElement(r,s);if(!o)return null;const a=Ee.getPointIndexUnderCursor(o,s,i.zoom,n.x,n.y);if(!he(o)&&a>=0||Ee.getPointsGlobalCoordinates(o,s).length>=3&&!i.editingLinearElement&&!he(o))return null;const c=(Ee.POINT_HANDLE_SIZE+1)/i.zoom.value,u=t.segmentMidPointHoveredCoords;if(u&&Je(S(u[0],u[1]),S(n.x,n.y))<=c)return u;let d=0;const f=Ee.getEditorMidPoints(o,s,i);for(;d<f.length;){if(f[d]!==null&&Je(f[d],S(n.x,n.y))<=c)return f[d];d++}return null}),F(Ee,"getBoundTextElementPosition",(t,n,i)=>{const s=Ee.getPointsGlobalCoordinates(t,i);s.length<2&&pi(n,i,{isDeleted:!0});let r=0,o=0;if(t.points.length%2===1){const a=Math.floor(t.points.length/2),l=Ee.getPointGlobalCoordinates(t,t.points[a],i);r=l[0]-n.width/2,o=l[1]-n.height/2}else{const a=t.points.length/2-1;let l=ga.points[a];t.points.length===2&&(l=G0(s[0],s[1])),(!l||ga.version!==t.version)&&(l=Ee.getSegmentMidPoint(t,s[a],s[a+1],a+1,i)),r=l[0]-n.width/2,o=l[1]-n.height/2}return{x:r,y:o}}),F(Ee,"getMinMaxXYWithBoundText",(t,n,i,s)=>{let[r,o,a,l]=i;const c=(r+a)/2,u=(o+l)/2,{x:d,y:f}=Ee.getBoundTextElementPosition(t,s,n),h=d+s.width,m=f+s.height,p=S(c,u),U=Z(S(r,o),p,t.angle),y=Z(S(a,o),p,t.angle),E=Z(S(d,f),p,-t.angle),v=Z(S(h,f),p,-t.angle),w=Z(S(d,m),p,-t.angle),I=Z(S(h,m),p,-t.angle);return U[0]<y[0]&&U[1]>=y[1]?(r=Math.min(r,w[0]),a=Math.max(a,Math.max(v[0],I[0])),o=Math.min(o,E[1]),l=Math.max(l,I[1])):U[0]>=y[0]&&U[1]>y[1]?(r=Math.min(r,I[0]),a=Math.max(a,Math.max(E[0],v[0])),o=Math.min(o,w[1]),l=Math.max(l,v[1])):U[0]>=y[0]?(r=Math.min(r,v[0]),a=Math.max(a,w[0]),o=Math.min(o,I[1]),l=Math.max(l,E[1])):U[1]<=y[1]&&(r=Math.min(r,Math.min(v[0],E[0])),a=Math.max(a,I[0]),o=Math.min(o,v[1]),l=Math.max(l,w[1])),[r,o,a,l,c,u]}),F(Ee,"getElementAbsoluteCoords",(t,n,i=!1)=>{let s,r,o,a,l;if(t.points.length<2||!Gt.get(t)){const{minX:f,minY:h,maxX:m,maxY:p}=t.points.reduce((U,[y,E])=>(U.minY=Math.min(U.minY,E),U.minX=Math.min(U.minX,y),U.maxX=Math.max(U.maxX,y),U.maxY=Math.max(U.maxY,E),U),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});r=f+t.x,o=h+t.y,a=m+t.x,l=p+t.y}else{const f=Gt.generateElementShape(t,null),h=Qc(f[0]),[m,p,U,y]=T5(h);r=m+t.x,o=p+t.y,a=U+t.x,l=y+t.y}const c=(r+a)/2,u=(o+l)/2;if(s=[r,o,a,l,c,u],!i)return s;const d=Oe(t,n);return d&&(s=Ee.getMinMaxXYWithBoundText(t,n,[r,o,a,l],d)),s});let le=Ee;const Wae=e=>{let t=[...new Set(e.filter(n=>n!==null&&n!==-1))];return t=t.sort((n,i)=>n-i),t.length?t:null},Gr=(e,t)=>{var n;switch(e.type){case"rectangle":case"diamond":case"frame":case"magicframe":case"embeddable":case"image":case"iframe":case"text":case"selection":return uz(e);case"arrow":case"line":{const i=((n=Gt.get(e))==null?void 0:n[0])??Gt.generateElementShape(e,null)[0],[,,,,s,r]=Ne(e,t);return Ab(e)?xce(e,i,S(e.x,e.y),e.angle,S(s,r)):Tce(i,S(e.x,e.y),e.angle,S(s,r))}case"ellipse":return _ce(e);case"freedraw":{const[,,,,i,s]=Ne(e,t);return Ice(e,S(i,s),Ab(e))}}},xB=(e,t)=>{const n=Oe(e,t);return n?e.type==="arrow"?Gr({...n,...le.getBoundTextElementPosition(e,n,t)},t):Gr(n,t):null},CB=(e,t)=>{const n=Gt.generateElementShape(e,null);if(!n)return null;const i=Qc(n[0]);let s=S(0,0),r=0,o=1/0,a=null;for(;r<i.length;){const{op:l,data:c}=i[r];if(l==="move"&&(ti(xu(c),"The returned ops is not compatible with a point"),s=c),l==="bcurveTo"){const u=s,d=S(c[0],c[1]),f=S(c[2],c[3]),h=S(c[4],c[5]),m=Je(h,t);m<o&&(o=m,a=[u,d,f,h]),s=h}r++}return a},AB=(e,t,n,i,s)=>{const r=(l,c)=>Math.pow(1-l,3)*i[c]+3*l*Math.pow(1-l,2)*n[c]+3*Math.pow(l,2)*(1-l)*t[c]+e[c]*Math.pow(l,3),o=r(s,0),a=r(s,1);return S(o,a)},Kae=(e,t)=>{const n=CB(e,t);if(!n)return[];const i=[];let s=1;for(;s>0;){const r=AB(n[0],n[1],n[2],n[3],s);i.push(S(r[0],r[1])),s-=.05}return i.length&&Ir(i.at(-1),t)&&i.push(S(t[0],t[1])),i},MB=(e,t)=>{const n=[];n[0]=0;const i=Kae(e,t);let s=0,r=0;for(;s<i.length-1;){const o=Je(i[s],i[s+1]);r+=o,n.push(r),s++}return n},Zae=(e,t)=>MB(e,t).at(-1),qae=(e,t,n)=>{const i=MB(e,t),s=i.length-1,r=i.at(-1),o=n*r;let a=0,l=s,c=0;for(;a<l;)c=Math.floor(a+(l-a)/2),i[c]<o?a=c+1:l=c;return i[c]>o&&c--,i[c]===o?c/s:1-(c+(o-i[c])/(i[c+1]-i[c]))/s},Co=(e,t)=>{const n={minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height,midX:e.x+e.width/2,midY:e.y+e.height/2},i=Xn(e),[s,r]=Z(S(n.minX,n.minY),i,e.angle),[o,a]=Z(S(n.maxX,n.minY),i,e.angle),[l,c]=Z(S(n.maxX,n.maxY),i,e.angle),[u,d]=Z(S(n.minX,n.maxY),i,e.angle),f=[Math.min(s,o,l,u),Math.min(r,a,c,d),Math.max(s,o,l,u),Math.max(r,a,c,d)];if(t){const[h,m,p,U]=t;return[f[0]-U,f[1]-h,f[2]+m,f[3]+p]}return f},Lh=(e,t)=>e[0]>t[0]&&e[0]<t[2]&&e[1]>t[1]&&e[1]<t[3],es=(e,t)=>{var n,i,s,r;if(((n=t.roundness)==null?void 0:n.type)===mn.PROPORTIONAL_RADIUS||((i=t.roundness)==null?void 0:i.type)===mn.LEGACY)return e*P8;if(((s=t.roundness)==null?void 0:s.type)===mn.ADAPTIVE_RADIUS){const o=((r=t.roundness)==null?void 0:r.value)??Yie,a=o/P8;return e<=a?e*P8:o}return 0},nl=(e,t=1)=>{if(e.length>=3){const[n,i]=[e[0],e[e.length-1]];return Je(n,i)<=n2/t}return!1},Nh=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="line"||e==="freedraw",H3=e=>e!=="image"&&e!=="frame"&&e!=="magicframe",$C=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="freedraw"||e==="arrow"||e==="line",GC=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="arrow"||e==="line",V3=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="line"||e==="diamond"||e==="image",XC=e=>e==="arrow",Fb=e=>e==="arrow",Qae=e=>[8,8+e],RB=e=>[1.5,6+e];function Jae(e){const t=e.roughness,n=Math.max(e.width,e.height),i=Math.min(e.width,e.height);return i>=20&&n>=50||i>=15&&e.roundness&&V3(e.type)||Ae(e)&&n>=50?t:Math.min(t/(n<10?3:2),2.5)}const ks=(e,t=!1)=>{const n={seed:e.seed,strokeLineDash:e.strokeStyle==="dashed"?Qae(e.strokeWidth):e.strokeStyle==="dotted"?RB(e.strokeWidth):void 0,disableMultiStroke:e.strokeStyle!=="solid",strokeWidth:e.strokeStyle!=="solid"?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:e.strokeWidth*4,roughness:Jae(e),stroke:e.strokeColor,preserveVertices:t||e.roughness<tF.cartoonist};switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":return n.fillStyle=e.fillStyle,n.fill=Kr(e.backgroundColor)?void 0:e.backgroundColor,e.type==="ellipse"&&(n.curveFitting=1),n;case"line":case"freedraw":return nl(e.points)&&(n.fillStyle=e.fillStyle,n.fill=e.backgroundColor==="transparent"?void 0:e.backgroundColor),n;case"arrow":return n;default:throw new Error(`Unimplemented type ${e.type}`)}},jC=(e,t,n)=>lr(e)&&(t||fs(e)&&(n==null?void 0:n.get(e.id))!==!0)&&Kr(e.backgroundColor)&&Kr(e.strokeColor)?{...e,roughness:0,backgroundColor:"#d3d3d3",fillStyle:"solid"}:Bl(e)?{...e,strokeColor:Kr(e.strokeColor)?"#000000":e.strokeColor,backgroundColor:Kr(e.backgroundColor)?"#f4f4f6":e.backgroundColor}:e,YC=(e,t,n,i,s,r,o)=>{const a=QC(e,t,n,i);if(a===null)return[];const l=(c,u)=>{if(c===null)return[];const[,,d,f,h,m]=c;return[s.line(d,f,h,m,u)]};switch(i){case"dot":case"circle":case"circle_outline":{const[c,u,d]=a;return delete r.strokeLineDash,[s.circle(c,u,d,{...r,fill:i==="circle_outline"?o:e.strokeColor,fillStyle:"solid",stroke:e.strokeColor,roughness:Math.min(.5,r.roughness||0)})]}case"triangle":case"triangle_outline":{const[c,u,d,f,h,m]=a;return delete r.strokeLineDash,[s.polygon([[c,u],[d,f],[h,m],[c,u]],{...r,fill:i==="triangle_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,r.roughness||0)})]}case"diamond":case"diamond_outline":{const[c,u,d,f,h,m,p,U]=a;return delete r.strokeLineDash,[s.polygon([[c,u],[d,f],[h,m],[p,U],[c,u]],{...r,fill:i==="diamond_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,r.roughness||0)})]}case"crowfoot_one":return l(a,r);case"bar":case"arrow":case"crowfoot_many":case"crowfoot_one_or_many":default:{const[c,u,d,f,h,m]=a;if(e.strokeStyle==="dotted"){const p=RB(e.strokeWidth-1);r.strokeLineDash=[p[0],p[1]-1]}else delete r.strokeLineDash;return r.roughness=Math.min(1,r.roughness||0),[s.line(d,f,c,u,r),s.line(h,m,c,u,r),...i==="crowfoot_one_or_many"?l(QC(e,t,n,"crowfoot_one"),r):[]]}}},ele=(e,t,{isExporting:n,canvasBackgroundColor:i,embedsValidationStatus:s})=>{switch(e.type){case"rectangle":case"iframe":case"embeddable":{let r;if(e.roundness){const o=e.width,a=e.height,l=es(Math.min(o,a),e);r=t.path(`M ${l} 0 L ${o-l} 0 Q ${o} 0, ${o} ${l} L ${o} ${a-l} Q ${o} ${a}, ${o-l} ${a} L ${l} ${a} Q 0 ${a}, 0 ${a-l} L 0 ${l} Q 0 0, ${l} 0`,ks(jC(e,n,s),!0))}else r=t.rectangle(0,0,e.width,e.height,ks(jC(e,n,s),!1));return r}case"diamond":{let r;const[o,a,l,c,u,d,f,h]=zb(e);if(e.roundness){const m=es(Math.abs(o-f),e),p=es(Math.abs(c-a),e);r=t.path(`M ${o+m} ${a+p} L ${l-m} ${c-p}
            C ${l} ${c}, ${l} ${c}, ${l-m} ${c+p}
            L ${u+m} ${d-p}
            C ${u} ${d}, ${u} ${d}, ${u-m} ${d-p}
            L ${f+m} ${h+p}
            C ${f} ${h}, ${f} ${h}, ${f+m} ${h-p}
            L ${o-m} ${a+p}
            C ${o} ${a}, ${o} ${a}, ${o+m} ${a+p}`,ks(e,!0))}else r=t.polygon([[o,a],[l,c],[u,d],[f,h]],ks(e));return r}case"ellipse":return t.ellipse(e.width/2,e.height/2,e.width,e.height,ks(e));case"line":case"arrow":{let r;const o=ks(e),a=e.points.length?e.points:[S(0,0)];if(he(e)?a.every(l=>Math.abs(l[0])<=1e6&&Math.abs(l[1])<=1e6)?r=[t.path(tle(a,16),ks(e,!0))]:(console.error("Elbow arrow with extreme point positions detected. Arrow not rendered.",e.id,JSON.stringify(a)),r=[]):e.roundness?r=[t.curve(a,o)]:o.fill?r=[t.polygon(a,o)]:r=[t.linearPath(a,o)],e.type==="arrow"){const{startArrowhead:l=null,endArrowhead:c="arrow"}=e;if(l!==null){const u=YC(e,r,"start",l,t,o,i);r.push(...u)}if(c!==null){const u=YC(e,r,"end",c,t,o,i);r.push(...u)}}return r}case"freedraw":{let r;if(uae(e),nl(e.points)){const o=LF(e.points,.75);r=t.curve(o,{...ks(e),stroke:"none"})}else r=null;return r}case"frame":case"magicframe":case"text":case"image":return null;default:return jo(e,`generateElementShape(): Unimplemented type ${e==null?void 0:e.type}`),null}},tle=(e,t)=>{const n=[];for(let s=1;s<e.length-1;s+=1){const r=e[s-1],o=e[s+1],a=e[s],l=Aa(a,r),c=Aa(o,a),u=Math.min(t,Je(e[s],o)/2,Je(e[s],r)/2);l?r[0]<a[0]?n.push([e[s][0]-u,e[s][1]]):n.push([e[s][0]+u,e[s][1]]):r[1]<a[1]?n.push([e[s][0],e[s][1]-u]):n.push([e[s][0],e[s][1]+u]),n.push(e[s]),c?o[0]<a[0]?n.push([e[s][0]-u,e[s][1]]):n.push([e[s][0]+u,e[s][1]]):o[1]<a[1]?n.push([e[s][0],e[s][1]-u]):n.push([e[s][0],e[s][1]+u])}const i=[`M ${e[0][0]} ${e[0][1]}`];for(let s=0;s<n.length;s+=3)i.push(`L ${n[s][0]} ${n[s][1]}`),i.push(`Q ${n[s+1][0]} ${n[s+1][1]}, ${n[s+2][0]} ${n[s+2][1]}`);return i.push(`L ${e[e.length-1][0]} ${e[e.length-1][1]}`),i.join(" ")},$f=class $f{static getBounds(t,n){const i=$f.boundsCache.get(t);if(i!=null&&i.version&&i.version===t.version&&!Xt(t))return i.bounds;const s=$f.calculateBounds(t,n);return $f.boundsCache.set(t,{version:t.version,bounds:s}),s}static calculateBounds(t,n){let i;const[s,r,o,a,l,c]=Ne(t,n);if(io(t)){const[u,d,f,h]=bw(t.points.map(([m,p])=>Z(S(m,p),S(l-t.x,c-t.y),t.angle)));return[u+t.x,d+t.y,f+t.x,h+t.y]}else if(Ae(t))i=cle(t,l,c,n);else if(t.type==="diamond"){const[u,d]=Z(S(l,r),S(l,c),t.angle),[f,h]=Z(S(l,a),S(l,c),t.angle),[m,p]=Z(S(s,c),S(l,c),t.angle),[U,y]=Z(S(o,c),S(l,c),t.angle),E=Math.min(u,f,m,U),v=Math.min(d,h,p,y),w=Math.max(u,f,m,U),I=Math.max(d,h,p,y);i=[E,v,w,I]}else if(t.type==="ellipse"){const u=(o-s)/2,d=(a-r)/2,f=Math.cos(t.angle),h=Math.sin(t.angle),m=Math.hypot(u*f,d*h),p=Math.hypot(d*f,u*h);i=[l-m,c-p,l+m,c+p]}else{const[u,d]=Z(S(s,r),S(l,c),t.angle),[f,h]=Z(S(s,a),S(l,c),t.angle),[m,p]=Z(S(o,a),S(l,c),t.angle),[U,y]=Z(S(o,r),S(l,c),t.angle),E=Math.min(u,f,m,U),v=Math.min(d,h,p,y),w=Math.max(u,f,m,U),I=Math.max(d,h,p,y);i=[E,v,w,I]}return i}};F($f,"boundsCache",new WeakMap);let $3=$f;const Ne=(e,t,n=!1)=>{if(io(e))return rle(e);if(Ae(e))return le.getElementAbsoluteCoords(e,t,n);if(ue(e)){const i=t?$n(e,t):null;if(xe(i)){const{x:s,y:r}=le.getBoundTextElementPosition(i,e,t);return[s,r,s+e.width,r+e.height,s+e.width/2,r+e.height/2]}}return[e.x,e.y,e.x+e.width,e.y+e.height,e.x+e.width/2,e.y+e.height/2]},Bb=(e,t)=>{const n=Gr(e,t),[i,s,r,o,a,l]=Ne(e,t),c=S(a,l);if(n.type==="polycurve"){const y=n.data.map(w=>ep(w,10)).flat();let E=0;const v=[];for(;E<y.length-1;)v.push(we(S(y[E][0],y[E][1]),S(y[E+1][0],y[E+1][1]))),E++;return v}else{if(n.type==="polyline")return n.data;if(nle(e)){const[U,y]=Z9(e),E=y.map(w=>KC(w,c,e.angle)).flat();return[...WC(U,c,e.angle),...E]}else if(e.type==="diamond"){const[U,y]=q9(e),E=y.map(w=>KC(w,c,e.angle)).flat();return[...WC(U,c,e.angle),...E]}else if(n.type==="polygon"){if(ue(e)){const E=$n(e,t);if(E&&Ae(E))return[we(S(i,s),S(r,s)),we(S(r,s),S(r,o)),we(S(r,o),S(i,o)),we(S(i,o),S(i,s))]}const U=n.data,y=[];for(let E=0;E<U.length-1;E++)y.push(we(U[E],U[E+1]));return y}else if(n.type==="ellipse")return ile(e)}const[u,d,f,h,,,m,p]=[[i,s],[r,s],[i,o],[r,o],[a,s],[a,o],[i,l],[r,l]].map(U=>Z(U,c,e.angle));return[we(u,d),we(f,h),we(u,f),we(d,h),we(u,p),we(f,p),we(d,m),we(h,m)]},nle=e=>e!=null&&(e.type==="rectangle"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),WC=(e,t,n)=>e.map(i=>we(Z(i[0],t,n),Z(i[1],t,n))),KC=(e,t,n)=>{const i=ep(e,10);let s=0;const r=[];for(;s<i.length-1;)r.push(we(Z(S(i[s][0],i[s][1]),t,n),Z(S(i[s+1][0],i[s+1][1]),t,n))),s++;return r},ile=e=>{const t=S(e.x+e.width/2,e.y+e.height/2),n=e.width/2,i=e.height/2,s=[],r=[],o=90,a=Math.PI*2/o;for(let l=0;l<o;l++){const c=l*a,u=t[0]+n*Math.cos(c),d=t[1]+i*Math.sin(c);r.push(Z(S(u,d),t,e.angle))}for(let l=0;l<r.length-1;l++)s.push(we(r[l],r[l+1]));return s.push(we(r[r.length-1],r[0])),s},zb=e=>{const t=Math.floor(e.width/2)+1,n=0,i=e.width,s=Math.floor(e.height/2)+1,r=t,o=e.height;return[t,n,i,s,r,o,0,s]},ZC=(e,t,n,i,s)=>{const r=1-e;return Math.pow(r,3)*t+3*Math.pow(r,2)*e*n+3*r*Math.pow(e,2)*i+Math.pow(e,3)*s},qC=(e,t,n,i)=>{const s=t-e,r=n-t,o=i-n,a=3*s-6*r+3*o,l=6*r-6*s,c=3*s,u=l*l-4*a*c;if(!(u>=0))return!1;let f=null,h=null,m=1/0,p=1/0;return a===0?m=p=-c/l:(m=(-l+Math.sqrt(u))/(2*a),p=(-l-Math.sqrt(u))/(2*a)),m>=0&&m<=1&&(f=ZC(m,e,t,n,i)),p>=0&&p<=1&&(h=ZC(p,e,t,n,i)),[f,h]},sle=(e,t,n,i)=>{const s=qC(e[0],t[0],n[0],i[0]),r=qC(e[1],t[1],n[1],i[1]);let o=Math.min(e[0],i[0]),a=Math.max(e[0],i[0]);if(s){const u=s.filter(d=>d!==null);o=Math.min(o,...u),a=Math.max(a,...u)}let l=Math.min(e[1],i[1]),c=Math.max(e[1],i[1]);if(r){const u=r.filter(d=>d!==null);l=Math.min(l,...u),c=Math.max(c,...u)}return[o,l,a,c]},T5=(e,t)=>{let n=S(0,0);const{minX:i,minY:s,maxX:r,maxY:o}=e.reduce((a,{op:l,data:c})=>{if(l==="move"){const u=H9(c);ti(u!=null,"Op data is not a point"),n=u}else if(l==="bcurveTo"){const u=S(c[0],c[1]),d=S(c[2],c[3]),f=S(c[4],c[5]),h=t?t(u):u,m=t?t(d):d,p=t?t(f):f,U=t?t(n):n;n=f;const[y,E,v,w]=sle(U,h,m,p);a.minX=Math.min(a.minX,y),a.minY=Math.min(a.minY,E),a.maxX=Math.max(a.maxX,v),a.maxY=Math.max(a.maxY,w)}return a},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[i,s,r,o]},bw=e=>{let t=1/0,n=1/0,i=-1/0,s=-1/0;for(const[r,o]of e)t=Math.min(t,r),n=Math.min(n,o),i=Math.max(i,r),s=Math.max(s,o);return[t,n,i,s]},rle=e=>{const[t,n,i,s]=bw(e.points),r=t+e.x,o=n+e.y,a=i+e.x,l=s+e.y;return[r,o,a,l,(r+a)/2,(o+l)/2]},ole=e=>{switch(e){case"arrow":return 25;case"diamond":case"diamond_outline":return 12;case"crowfoot_many":case"crowfoot_one":case"crowfoot_one_or_many":return 20;default:return 15}},ale=e=>{switch(e){case"bar":return 90;case"arrow":return 20;default:return 25}},QC=(e,t,n,i)=>{if(t.length<1)return null;const s=Qc(t[0]);if(s.length<1)return null;const r=n==="start"?1:s.length-1,o=s[r].data;ti(o.length===6,"Op data length is not 6");const a=S(o[4],o[5]),l=S(o[2],o[3]),c=S(o[0],o[1]),u=s[r-1];let d=S(0,0);if(u.op==="move"){const G=H9(u.data);ti(G!=null,"Op data is not a point"),d=G}else u.op==="bcurveTo"&&(d=S(u.data[4],u.data[5]));const f=(G,H)=>Math.pow(1-G,3)*a[H]+3*G*Math.pow(1-G,2)*l[H]+3*Math.pow(G,2)*(1-G)*c[H]+d[H]*Math.pow(G,3),[h,m]=n==="start"?d:a,[p,U]=[f(.3,0),f(.3,1)],y=Math.hypot(h-p,m-U),E=(h-p)/y,v=(m-U)/y,w=ole(i);let I=0;{const[G,H]=n==="end"?e.points[e.points.length-1]:e.points[0],[V,X]=e.points.length>1?n==="end"?e.points[e.points.length-2]:e.points[1]:[0,0];I=Math.hypot(G-V,H-X)}const T=Math.min(w,I*(i==="diamond"||i==="diamond_outline"?.25:.5)),_=h-E*T,x=m-v*T;if(i==="dot"||i==="circle"||i==="circle_outline"){const G=Math.hypot(x-m,_-h)+e.strokeWidth-2;return[h,m,G]}const C=ale(i);if(i==="crowfoot_many"||i==="crowfoot_one_or_many"){const[G,H]=Z(S(h,m),S(_,x),Xu(-C)),[V,X]=Z(S(h,m),S(_,x),Xu(C));return[_,x,G,H,V,X]}const[R,N]=Z(S(_,x),S(h,m),-C*Math.PI/180),[D,$]=Z(S(_,x),S(h,m),Xu(C));if(i==="diamond"||i==="diamond_outline"){let G,H;if(n==="start"){const[V,X]=e.points.length>1?e.points[1]:[0,0];[G,H]=Z(S(h+T*2,m),S(h,m),Math.atan2(X-m,V-h))}else{const[V,X]=e.points.length>1?e.points[e.points.length-2]:[0,0];[G,H]=Z(S(h-T*2,m),S(h,m),Math.atan2(m-X,h-V))}return[h,m,R,N,G,H,D,$]}return[h,m,R,N,D,$]},lle=e=>{const t=Zc.generator(),n=ks(e),i=e.roundness?"curve":n.fill?"polygon":"linearPath";return t[i](e.points,n)},cle=(e,t,n,i)=>{var d;const s=Oe(e,i);if(e.points.length<2){const[f,h]=e.points[0],[m,p]=Z(S(e.x+f,e.y+h),S(t,n),e.angle);let U=[m,p,m,p];if(s){const y=le.getMinMaxXYWithBoundText(e,i,[m,p,m,p],s);U=[y[0],y[1],y[2],y[3]]}return U}const o=((d=Gt.get(e))==null?void 0:d[0])??lle(e),a=Qc(o),c=T5(a,([f,h])=>Z(S(e.x+f,e.y+h),S(t,n),e.angle));let u=[c[0],c[1],c[2],c[3]];if(s){const f=le.getMinMaxXYWithBoundText(e,i,u,s);u=[f[0],f[1],f[2],f[3]]}return u},ro=(e,t)=>$3.getBounds(e,t),xt=(e,t)=>{if(!vF(e))return[0,0,0,0];let n=1/0,i=-1/0,s=1/0,r=-1/0;const o=t||_e(e);return e.forEach(a=>{const[l,c,u,d]=ro(a,o);n=Math.min(n,l),s=Math.min(s,c),i=Math.max(i,u),r=Math.max(r,d)}),[n,s,i,r]},yw=(e,t)=>{const[n,i,s,r]=xt(e);return[n+t.x,i+t.y,s+t.x,r+t.y]},fc=(e,t,n,i)=>{if(!(Ae(e)||io(e)))return[e.x,e.y,e.x+t,e.y+n];const s=_b(0,t,_b(1,n,e.points,i),i);let r;if(io(e))r=bw(s);else{const u=Zc.generator(),d=e.roundness?u.curve(s,ks(e)):u.linearPath(s,ks(e)),f=Qc(d);r=T5(f)}const[o,a,l,c]=r;return[o+e.x,a+e.y,l+e.x,c+e.y]},JC=(e,t)=>{const n=Zc.generator(),i=e.roundness==null?n.linearPath(t,ks(e)):n.curve(t,ks(e)),s=Qc(i),[r,o,a,l]=T5(s);return[r+e.x,o+e.y,a+e.x,l+e.y]},ule=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,i=e[0];const s=_e(e);return e.forEach(r=>{const[o,a,l,c]=ro(r,s),u=Je(S((o+l)/2,(a+c)/2),S(t.x,t.y));u<n&&(n=u,i=r)}),ro(i,s)},Er=e=>{const[t,n,i,s]=xt(e);return{minX:t,minY:n,maxX:i,maxY:s,width:i-t,height:s-n,midX:(t+i)/2,midY:(n+s)/2}},kB=({scrollX:e,scrollY:t,width:n,height:i,zoom:s})=>[-e,-t,-e+n/s.value,-t+i/s.value],Ew=e=>S(e[0]+(e[2]-e[0])/2,e[1]+(e[3]-e[1])/2),dle=(e,t)=>{if(e==null||t==null)return!1;const[n,i,s,r]=e,[o,a,l,c]=t;return n<l&&s>o&&i<c&&r>a},gd=e=>Ae(e)||io(e)?e.points.length<2:e.width===0&&e.height===0,Hb=(e,t,n,i,s)=>{const[r,o,a,l]=ro(e,s),c=kt({clientX:i.offsetLeft,clientY:i.offsetTop},i),u=kt({clientX:i.offsetLeft+t,clientY:i.offsetTop+n},i);return c.x<=a&&c.y<=l&&u.x>=r&&u.y>=o},d2=(e,t,n,i,s,r)=>{const[o,a,l,c]=xt(e,s),u=kt({clientX:i.offsetLeft+((r==null?void 0:r.left)||0),clientY:i.offsetTop+((r==null?void 0:r.top)||0)},i),d=kt({clientX:i.offsetLeft+t-((r==null?void 0:r.right)||0),clientY:i.offsetTop+n-((r==null?void 0:r.bottom)||0)},i);return o>=u.x&&a>=u.y&&l<=d.x&&c<=d.y},eA=(e,t,n)=>{const i=Math.abs(t),s=Math.abs(n);if(e==="line"||e==="arrow"||e==="freedraw"){const r=Math.round(Math.atan(s/i)/Ac)*Ac;r===0?n=0:r===Math.PI/2?t=0:n=i*Math.tan(r)*Math.sign(n)||n}else e!=="selection"&&(n=i*Math.sign(n));return{width:t,height:n}},G3=(e,t,n,i)=>{let s=n-e,r=i-t;const o=Math.round(Math.atan(r/s)/Ac)*Ac;if(o===0)r=0;else if(o===Math.PI/2)s=0;else{const a=Math.tan(o),l=-1,c=t-a*e,u=-1/a,d=-1,f=i-u*n,h=(l*f-d*c)/(a*d-u*l),m=(c*u-f*a)/(a*d-u*l);s=h-e,r=m-t}return{width:s,height:r}},DB=e=>{const t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){const n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){const n=Math.abs(e.height);t.height=n,t.y=e.y-n}return t},fle=(e,t,n)=>{const i=n.getNonDeletedElementsMap(),s=b5(e,i),r=Er(e);return s.flatMap(o=>{const a=hle(o,r,t);return o.map(l=>{const c=n.mutateElement(l,{x:l.x+a.x,y:l.y+a.y});return ys(l,n,{simultaneouslyUpdated:o}),c})})},hle=(e,t,{axis:n,position:i})=>{const s=Er(e),[r,o]=n==="x"?["minX","maxX"]:["minY","maxY"],a={x:0,y:0};return i==="start"?{...a,[n]:t[r]-s[r]}:i==="end"?{...a,[n]:t[o]-s[o]}:{...a,[n]:(t[r]+t[o])/2-(s[r]+s[o])/2}},gle=e=>{const t=e.slice(),n=new Set,i=r=>{var c,u,d;const o=(u=(c=r[0])==null?void 0:c.groupIds)==null?void 0:u.join(""),a=[r[0]],l=[];for(const f of r.slice(1))((d=f.groupIds)==null?void 0:d.join(""))===o?a.push(f):l.push(f);return l.length?[...a,...i(l)]:a},s=new Map;return t.forEach((r,o)=>{var a;if(!s.has(r.id))if((a=r.groupIds)!=null&&a.length){const l=r.groupIds[r.groupIds.length-1],c=t.slice(o).filter(u=>{var f;const d=(f=u==null?void 0:u.groupIds)==null?void 0:f.some(h=>h===l);return d&&s.set(u.id,!0),d});for(const u of i(c))n.add(u)}else n.add(r)}),n.size!==e.length?(console.error("normalizeGroupElementOrder: lost some elements... bailing!"),e):[...n]},mle=e=>{const t=Sse(e),n=e.slice(),i=new Set;return n.forEach((s,r)=>{var o,a;if(s)if((o=s.boundElements)!=null&&o.length)i.add(s),n[r]=null,s.boundElements.forEach(l=>{const c=t.get(l.id);c&&l.type==="text"&&(i.add(c[0]),n[c[1]]=null)});else if(s.type==="text"&&s.containerId){const l=t.get(s.containerId);(a=l==null?void 0:l[0].boundElements)!=null&&a.find(c=>c.id===s.id)||(i.add(s),n[r]=null)}else i.add(s),n[r]=null}),i.size!==e.length?(console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),e):[...i]},ple=e=>mle(gle(e)),Ule=(e,t,n,i)=>{const s=Nc(n);return s.id=vs(),s.updated=fg(),i&&(s.seed=Wo(),Ma(s)),s.groupIds=Qoe(s.groupIds,e,r=>(t.has(r)||t.set(r,vs()),t.get(r))),s},Vb=e=>{let{elements:t}=e;const n="appState"in e?e.appState:{editingGroupId:null,selectedGroupIds:{}},i=new Map,s=new Map,r=[],o=[],a=new Map,l=new Map,c=new Map,u=_e(t),d=e.type==="in-place"?e.idsOfElementsToDuplicate:new Map(t.map(U=>[U.id,U]));if(e.type==="in-place")for(const U of Object.keys(e.appState.selectedGroupIds))t.filter(y=>{var E;return(E=y.groupIds)==null?void 0:E.includes(U)}).forEach(y=>d.set(y.id,y));t=ple(t);const f=t.slice(),h=U=>{const E=H8(U).reduce((v,w)=>{if(i.has(w.id))return v;i.set(w.id,!0);const I=Ule(n.editingGroupId,s,w,e.randomizeSeed);return i.set(I.id,!0),c.set(I.id,I),a.set(w.id,I.id),l.set(I.id,w),o.push(w),r.push(I),v.push(I),v},[]);return Array.isArray(U)?E:E[0]||null},m=(U,y)=>{if(y){if(U>f.length-1){f.push(...H8(y));return}f.splice(U+1,0,...H8(y))}},p=new Set(t.filter(U=>d.has(U.id)&&Te(U)).map(U=>U.id));for(const U of t){if(i.has(U.id)||!d.has(U.id))continue;const y=QF(n,U);if(y){const E=$t(t,y).flatMap(w=>Te(w)?[...xr(t,w.id),w]:[w]),v=vu(f,w=>{var I;return(I=w.groupIds)==null?void 0:I.includes(y)});m(v,h(E));continue}if(!(U.frameId&&p.has(U.frameId))){if(Te(U)){const E=U.id,v=xr(t,E),w=vu(f,I=>I.frameId===E||I.id===E);m(w,h([...v,U]));continue}if(ns(U)){const E=Oe(U,u),v=vu(f,w=>w.id===U.id||"containerId"in w&&w.containerId===U.id);E?m(v,h([U,E])):m(v,h(U));continue}if(Xt(U)){const E=$n(U,u),v=vu(f,w=>w.id===U.id||w.id===(E==null?void 0:E.id));E?m(v,h([E,U])):m(v,h(U));continue}m(vu(f,E=>E.id===U.id),h(U))}}if(Vae(r,a,c),eae(f,o,a),e.overrides)for(const U of r){const y=l.get(U.id);y&&Object.assign(U,e.overrides({duplicateElement:U,origElement:y,origIdToDuplicateId:a}))}return{duplicatedElements:r,duplicateElementsMap:c,elementsWithDuplicates:f,origIdToDuplicateId:a}},X3=(e,t=0)=>{if(e==null||typeof e!="object")return e;if(Object.prototype.toString.call(e)==="[object Object]"){const i=typeof e.constructor=="function"?Object.create(Object.getPrototypeOf(e)):{};for(const s in e)if(e.hasOwnProperty(s)){if(t===0&&(s==="shape"||s==="canvas"))continue;i[s]=X3(e[s],t+1)}return i}if(Array.isArray(e)){let i=e.length;const s=new Array(i);for(;i--;)s[i]=X3(e[i],t+1);return s}return e},Nc=e=>X3(e),K={IMMEDIATELY:"IMMEDIATELY",NEVER:"NEVER",EVENTUALLY:"EVENTUALLY"};class ble{constructor(t){F(this,"onDurableIncrementEmitter",new zr);F(this,"onStoreIncrementEmitter",new zr);F(this,"scheduledMacroActions",new Set);F(this,"scheduledMicroActions",[]);F(this,"_snapshot",Pa.empty());this.app=t}get snapshot(){return this._snapshot}set snapshot(t){this._snapshot=t}scheduleAction(t){this.scheduledMacroActions.add(t),this.satisfiesScheduledActionsInvariant()}scheduleCapture(){this.scheduleAction(K.IMMEDIATELY)}scheduleMicroAction(t){const{action:n}=t;let i;if("change"in t)i=t.change;else{const r=Pa.create(this.app.scene.getElementsMapIncludingDeleted(),this.app.state),o=r.maybeClone(n,t.elements,t.appState);i=nh.create(r,o)}const s="delta"in t?t.delta:void 0;this.scheduledMicroActions.push(()=>this.processAction({action:n,change:i,delta:s}))}commit(t,n){this.flushMicroActions();try{const i=this.getScheduledMacroAction();this.processAction({action:i,elements:t,appState:n})}finally{this.satisfiesScheduledActionsInvariant(),this.scheduledMacroActions=new Set}}clear(){this.snapshot=Pa.empty(),this.scheduledMacroActions=new Set}emitDurableIncrement(t,n=void 0,i=void 0){const s=this.snapshot;let r,o;if(n?r=n:r=nh.create(s,t),i)o=i;else{const a=t.metadata.didElementsChange?Oh.calculate(s.elements,t.elements):Oh.empty(),l=t.metadata.didAppStateChange?Dn.calculate(s.appState,t.appState):Dn.empty();o=vw.create(a,l)}if(!o.isEmpty()){const a=new yle(r,o);this.onDurableIncrementEmitter.trigger(a),this.onStoreIncrementEmitter.trigger(a)}}emitEphemeralIncrement(t,n=void 0){let i;if(n)i=n;else{const r=this.snapshot;i=nh.create(r,t)}const s=new Ele(i);this.onStoreIncrementEmitter.trigger(s)}applyChangeToSnapshot(t){const n=this.snapshot,i=this.snapshot.applyChange(t);return n===i?null:i}maybeCloneSnapshot(t,n,i){if(!n&&!i)return null;const s=this.snapshot,r=this.snapshot.maybeClone(t,n,i);return s===r?null:r}flushMicroActions(){for(const t of this.scheduledMicroActions)try{t()}catch(n){console.error("Failed to execute scheduled micro action",n)}this.scheduledMicroActions=[]}processAction(t){const{action:n}=t;if(n===K.EVENTUALLY&&!this.onStoreIncrementEmitter.subscribers.length)return;let i;if("change"in t?i=this.applyChangeToSnapshot(t.change):i=this.maybeCloneSnapshot(n,t.elements,t.appState),!i)return;const s="change"in t?t.change:void 0,r="delta"in t?t.delta:void 0;try{switch(n){case K.IMMEDIATELY:this.emitDurableIncrement(i,s,r);break;case K.NEVER:case K.EVENTUALLY:this.emitEphemeralIncrement(i,s);break;default:jo(n,"Unknown store action")}}finally{switch(n){case K.IMMEDIATELY:case K.NEVER:this.snapshot=i;break}}}getScheduledMacroAction(){let t;return this.scheduledMacroActions.has(K.IMMEDIATELY)?t=K.IMMEDIATELY:this.scheduledMacroActions.has(K.NEVER)?t=K.NEVER:t=K.EVENTUALLY,t}satisfiesScheduledActionsInvariant(){if(!(this.scheduledMacroActions.size>=0&&this.scheduledMacroActions.size<=Object.keys(K).length)){const t=`There can be at most three store actions scheduled at the same time, but there are "${this.scheduledMacroActions.size}".`;throw console.error(t,this.scheduledMacroActions.values()),new Error(t)}}}class nh{constructor(t,n){this.elements=t,this.appState=n}static create(t,n){const i=n.getChangedElements(t),s=n.getChangedAppState(t);return new nh(i,s)}}class LB{constructor(t,n){this.type=t,this.change=n}static isDurable(t){return t.type==="durable"}static isEphemeral(t){return t.type==="ephemeral"}}class yle extends LB{constructor(t,n){super("durable",t),this.change=t,this.delta=n}}class Ele extends LB{constructor(t){super("ephemeral",t),this.change=t}}class vw{constructor(t,n,i){this.id=t,this.elements=n,this.appState=i}static create(t,n,i={id:vs()}){return new this(i.id,t,n)}static restore(t){const{id:n,elements:i,appState:s}=t;return new this(n,Oh.restore(i),Dn.restore(s))}static load({id:t,elements:{added:n,removed:i,updated:s}}){const r=Oh.create(n,i,s,{shouldRedistribute:!1});return new this(t,r,Dn.empty())}static inverse(t){return this.create(t.elements.inverse(),t.appState.inverse())}static applyLatestChanges(t,n,i){return this.create(t.elements.applyLatestChanges(n,i),t.appState,{id:t.id})}static applyTo(t,n,i,s=Pa.empty()){const[r,o]=t.elements.applyTo(n,s.elements),[a,l]=t.appState.applyTo(i,r);return[r,a,o||l]}isEmpty(){return this.elements.isEmpty()&&this.appState.isEmpty()}}class Pa{constructor(t,n,i={didElementsChange:!1,didAppStateChange:!1,isEmpty:!1}){F(this,"_lastChangedElementsHash",0);F(this,"_lastChangedAppStateHash",0);this.elements=t,this.appState=n,this.metadata=i}static create(t,n,i={didElementsChange:!1,didAppStateChange:!1}){return new Pa(t,tA(n)?n:$b(n),i)}static empty(){return new Pa(new Map,vle(),{didElementsChange:!1,didAppStateChange:!1,isEmpty:!0})}getChangedElements(t){const n={};for(const i of Fl(t.elements))this.elements.get(i.id)||(n[i.id]=Ie(i,{isDeleted:!0}));for(const i of Fl(this.elements))t.elements.get(i.id)!==i&&(n[i.id]=i);return n}getChangedAppState(t){return bt.getRightDifferences(t.appState,this.appState).reduce((n,i)=>Object.assign(n,{[i]:this.appState[i]}),{})}isEmpty(){return this.metadata.isEmpty}applyChange(t){const n=new Map(this.elements);for(const[s,r]of Object.entries(t.elements))n.set(s,r);const i=Object.assign({},this.appState,t.appState);return Pa.create(n,i,{didElementsChange:Object.keys(t.elements).length>0,didAppStateChange:Object.keys(t.appState).length>0})}maybeClone(t,n,i){const s={shouldCompareHashes:!1};t===K.EVENTUALLY&&(s.shouldCompareHashes=!0);const r=this.maybeCreateElementsSnapshot(n,s),o=this.maybeCreateAppStateSnapshot(i,s);let a=!1,l=!1;return this.elements!==r&&(a=!0),this.appState!==o&&(l=!0),!a&&!l?this:new Pa(r,o,{didElementsChange:a,didAppStateChange:l})}maybeCreateAppStateSnapshot(t,n={shouldCompareHashes:!1}){if(!t)return this.appState;const i=tA(t)?t:$b(t);return this.detectChangedAppState(i,n)?i:this.appState}maybeCreateElementsSnapshot(t,n={shouldCompareHashes:!1}){if(!t)return this.elements;const i=this.detectChangedElements(t,n);return i!=null&&i.size?this.createElementsSnapshot(i):this.elements}detectChangedAppState(t,n={shouldCompareHashes:!1}){if(this.appState===t)return;const i=bt.isRightDifferent(this.appState,t);if(!i)return;const s=Mw(JSON.stringify(t));if(!(n.shouldCompareHashes&&this._lastChangedAppStateHash===s))return this._lastChangedAppStateHash=s,i}detectChangedElements(t,n={shouldCompareHashes:!1}){if(this.elements===t)return;const i=new Map;for(const r of Fl(this.elements))t.get(r.id)||i.set(r.id,Ie(r,{isDeleted:!0}));for(const r of Fl(t)){const o=this.elements.get(r.id);(!o||o.version<r.version)&&i.set(r.id,r)}if(!i.size)return;const s=az(i);if(!(n.shouldCompareHashes&&this._lastChangedElementsHash===s))return this._lastChangedElementsHash=s,i}createElementsSnapshot(t){const n=new Map;for(const i of Fl(this.elements))n.set(i.id,i);for(const i of Fl(t))n.set(i.id,Nc(i));return n}}const NB="__observedAppState",vle=()=>({name:null,editingGroupId:null,viewBackgroundColor:ze.white,selectedElementIds:{},selectedGroupIds:{},editingLinearElementId:null,selectedLinearElementId:null,croppingElementId:null}),$b=e=>{var n,i;const t={name:e.name,editingGroupId:e.editingGroupId,viewBackgroundColor:e.viewBackgroundColor,selectedElementIds:e.selectedElementIds,selectedGroupIds:e.selectedGroupIds,editingLinearElementId:((n=e.editingLinearElement)==null?void 0:n.elementId)||null,selectedLinearElementId:((i=e.selectedLinearElement)==null?void 0:i.elementId)||null,croppingElementId:e.croppingElementId};return Reflect.defineProperty(t,NB,{value:!0,enumerable:!1}),t},tA=e=>!!Reflect.get(e,NB),OB="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Bf(e,t,n){const i=n[0];if(t!=null&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===i||t&&t.slice(-1)===i)throw new Error("trailing zero");if(t){let o=0;for(;(e[o]||i)===t[o];)o++;if(o>0)return t.slice(0,o)+Bf(e.slice(o),t.slice(o),n)}const s=e?n.indexOf(e[0]):0,r=t!=null?n.indexOf(t[0]):n.length;if(r-s>1){const o=Math.round(.5*(s+r));return n[o]}else return t&&t.length>1?t.slice(0,1):n[s]+Bf(e.slice(1),null,n)}function PB(e){if(e.length!==FB(e[0]))throw new Error("invalid integer part of order key: "+e)}function FB(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-97+2;if(e>="A"&&e<="Z")return 90-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function S1(e){const t=FB(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function nA(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);const n=S1(e);if(e.slice(n.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function iA(e,t){PB(e);const[n,...i]=e.split("");let s=!0;for(let r=i.length-1;s&&r>=0;r--){const o=t.indexOf(i[r])+1;o===t.length?i[r]=t[0]:(i[r]=t[o],s=!1)}if(s){if(n==="Z")return"a"+t[0];if(n==="z")return null;const r=String.fromCharCode(n.charCodeAt(0)+1);return r>"a"?i.push(t[0]):i.pop(),r+i.join("")}else return n+i.join("")}function wle(e,t){PB(e);const[n,...i]=e.split("");let s=!0;for(let r=i.length-1;s&&r>=0;r--){const o=t.indexOf(i[r])-1;o===-1?i[r]=t.slice(-1):(i[r]=t[o],s=!1)}if(s){if(n==="a")return"Z"+t.slice(-1);if(n==="A")return null;const r=String.fromCharCode(n.charCodeAt(0)-1);return r<"Z"?i.push(t.slice(-1)):i.pop(),r+i.join("")}else return n+i.join("")}function Jd(e,t,n=OB){if(e!=null&&nA(e,n),t!=null&&nA(t,n),e!=null&&t!=null&&e>=t)throw new Error(e+" >= "+t);if(e==null){if(t==null)return"a"+n[0];const l=S1(t),c=t.slice(l.length);if(l==="A"+n[0].repeat(26))return l+Bf("",c,n);if(l<t)return l;const u=wle(l,n);if(u==null)throw new Error("cannot decrement any more");return u}if(t==null){const l=S1(e),c=e.slice(l.length),u=iA(l,n);return u??l+Bf(c,null,n)}const i=S1(e),s=e.slice(i.length),r=S1(t),o=t.slice(r.length);if(i===r)return i+Bf(s,o,n);const a=iA(i,n);if(a==null)throw new Error("cannot increment any more");return a<t?a:i+Bf(s,null,n)}function j3(e,t,n,i=OB){if(n===0)return[];if(n===1)return[Jd(e,t,i)];if(t==null){let o=Jd(e,t,i);const a=[o];for(let l=0;l<n-1;l++)o=Jd(o,t,i),a.push(o);return a}if(e==null){let o=Jd(e,t,i);const a=[o];for(let l=0;l<n-1;l++)o=Jd(e,o,i),a.push(o);return a.reverse(),a}const s=Math.floor(n/2),r=Jd(e,t,i);return[...j3(e,r,s,i),r,...j3(r,t,n-s-1,i)]}class _le extends Error{constructor(){super(...arguments);F(this,"code","ELEMENT_HAS_INVALID_INDEX")}}const ww=(e,{shouldThrow:t=!1,includeBoundTextValidation:n=!1,ignoreLogs:i,reconciliationContext:s})=>{const r=[],o=l=>`${l==null?void 0:l.index}:${l==null?void 0:l.id}:${l==null?void 0:l.type}:${l==null?void 0:l.isDeleted}:${l==null?void 0:l.version}:${l==null?void 0:l.versionNonce}`,a=e.map(l=>l.index);for(const[l,c]of a.entries()){const u=a[l-1],d=a[l+1];if(Y3(c,u,d)||r.push(`Fractional indices invariant has been compromised: "${o(e[l-1])}", "${o(e[l])}", "${o(e[l+1])}"`),n&&ns(e[l])){const f=e[l],h=Oe(f,_e(e));h&&h.index<=f.index&&r.push(`Fractional indices invariant for bound elements has been compromised: "${o(h)}", "${o(f)}"`)}}if(r.length){const l=new _le,c=[];if(s&&(c.push("Additional reconciliation context:"),c.push(s.localElements.map(u=>o(u))),c.push(s.remoteElements.map(u=>o(u)))),i||console.error(r.join(`

`),l.stack,e.map(u=>o(u)),...c),t)throw l}},_w=e=>e.sort((t,n)=>sA(t)&&sA(n)?t.index<n.index?-1:t.index>n.index?1:t.id<n.id?-1:1:1),oo=(e,t)=>{try{const n=_e(e),i=Tle(e,t),s=BB(e,i),r=e.map(o=>s.has(o)?{...o,...s.get(o)}:o);ww(r,{includeBoundTextValidation:!1,shouldThrow:!0,ignoreLogs:!0});for(const[o,a]of s)pi(o,n,a)}catch{qo(e)}return e},qo=e=>{const t=_e(e),n=Sle(e),i=BB(e,n);for(const[s,r]of i)pi(s,t,r);return e},Tle=(e,t)=>{const n=[];let i=0;for(;i<e.length;)if(t.has(e[i].id)){const s=[i-1,i];for(;++i<e.length&&t.has(e[i].id);)s.push(i);s.push(i),n.push(s)}else i++;return n},Sle=e=>{const t=[];let n,i,s=-1,r=0;const o=c=>{var f;const u=e[s]?e[s].index:void 0,d=(f=e[c-1])==null?void 0:f.index;return!u&&d||u&&d&&d>u?[d,c-1]:[u,s]},a=c=>{var f;const u=e[r]?e[r].index:void 0;if(u&&c<r)return[u,r];let d=r;for(;++d<e.length;){const h=(f=e[d])==null?void 0:f.index;if(!u&&h||u&&h&&h>u)return[h,d]}return[void 0,d]};let l=0;for(;l<e.length;){const c=e[l].index;if([n,s]=o(l),[i,r]=a(l),Y3(c,n,i))l++;else{const u=[s,l];for(;++l<e.length;){const d=e[l].index,[f,h]=o(l),[m,p]=a(l);if(Y3(d,f,m))break;[n,s]=[f,h],[i,r]=[m,p],u.push(l)}u.push(r),t.push(u)}}return t},Y3=(e,t,n)=>e?t&&n?t<e&&e<n:!t&&n?e<n:t&&!n?t<e:!!e:!1,BB=(e,t)=>{var i,s;const n=new Map;for(const r of t){const o=r.shift(),a=r.pop(),l=j3((i=e[o])==null?void 0:i.index,(s=e[a])==null?void 0:s.index,r.length);for(let c=0;c<r.length;c++){const u=e[r[c]];n.set(u,{index:l[c]})}}return n},sA=e=>!!e.index,rA=e=>{const t=new Map,n=[];for(const i of e)i.isDeleted||(n.push(i),t.set(i.id,i));return{elementsMap:t,elements:n}},Ile=No(e=>{ww(e,{shouldThrow:G9(),includeBoundTextValidation:!0})},1e3*60,{leading:!0,trailing:!1}),xle=e=>{const t=["includeBoundTextElement","includeElementsInFrames"];let n="";for(const i of t)n+=`${i}:${e[i]?"1":"0"}`;return n};class Gb{constructor(t=null){F(this,"callbacks",new Set);F(this,"nonDeletedElements",[]);F(this,"nonDeletedElementsMap",Yo(new Map));F(this,"elements",[]);F(this,"nonDeletedFramesLikes",[]);F(this,"frames",[]);F(this,"elementsMap",Yo(new Map));F(this,"selectedElementsCache",{selectedElementIds:null,elements:null,cache:new Map});F(this,"sceneNonce");F(this,"insertElement",t=>{const n=t.frameId?this.getElementIndex(t.frameId):this.elements.length;this.insertElementAtIndex(t,n)});F(this,"insertElements",t=>{var i;if(!t.length)return;const n=(i=t[0])!=null&&i.frameId?this.getElementIndex(t[0].frameId):this.elements.length;this.insertElementsAtIndex(t,n)});F(this,"getContainerElement",t=>t&&t.containerId&&this.getElement(t.containerId)||null);F(this,"getElementsFromId",t=>{const n=this.getNonDeletedElementsMap(),i=n.get(t);return i?[i]:$t(n,t)});t&&this.replaceAllElements(t)}getSceneNonce(){return this.sceneNonce}getNonDeletedElementsMap(){return this.nonDeletedElementsMap}getElementsIncludingDeleted(){return this.elements}getElementsMapIncludingDeleted(){return this.elementsMap}getNonDeletedElements(){return this.nonDeletedElements}getFramesIncludingDeleted(){return this.frames}getSelectedElements(t){const n=xle(t),i=(t==null?void 0:t.elements)||this.nonDeletedElements;if(this.selectedElementsCache.elements===i&&this.selectedElementsCache.selectedElementIds===t.selectedElementIds){const r=this.selectedElementsCache.cache.get(n);if(r)return r}else(t==null?void 0:t.elements)==null&&this.selectedElementsCache.cache.clear();const s=He(i,{selectedElementIds:t.selectedElementIds},t);return(t==null?void 0:t.elements)==null&&(this.selectedElementsCache.selectedElementIds=t.selectedElementIds,this.selectedElementsCache.elements=this.nonDeletedElements,this.selectedElementsCache.cache.set(n,s)),s}getNonDeletedFramesLikes(){return this.nonDeletedFramesLikes}getElement(t){return this.elementsMap.get(t)||null}getNonDeletedElement(t){const n=this.getElement(t);return n&&t4(n)?n:null}mapElements(t){let n=!1;const i=this.elements.map(s=>{const r=t(s);return r!==s&&(n=!0),r});return n&&this.replaceAllElements(i),n}replaceAllElements(t){const n=xse(t),i=[];Ile(n),this.elements=qo(n),this.elementsMap.clear(),this.elements.forEach(r=>{Te(r)&&i.push(r),this.elementsMap.set(r.id,r)});const s=rA(this.elements);this.nonDeletedElements=s.elements,this.nonDeletedElementsMap=s.elementsMap,this.frames=i,this.nonDeletedFramesLikes=rA(this.frames).elements,this.triggerUpdate()}triggerUpdate(){this.sceneNonce=Wo();for(const t of Array.from(this.callbacks))t()}onUpdate(t){if(this.callbacks.has(t))throw new Error;return this.callbacks.add(t),()=>{if(!this.callbacks.has(t))throw new Error;this.callbacks.delete(t)}}destroy(){this.elements=[],this.nonDeletedElements=[],this.nonDeletedFramesLikes=[],this.frames=[],this.elementsMap.clear(),this.selectedElementsCache.selectedElementIds=null,this.selectedElementsCache.elements=null,this.selectedElementsCache.cache.clear(),this.callbacks.clear()}insertElementAtIndex(t,n){if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");const i=[...this.elements.slice(0,n),t,...this.elements.slice(n)];oo(i,_e([t])),this.replaceAllElements(i)}insertElementsAtIndex(t,n){if(!t.length)return;if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");const i=[...this.elements.slice(0,n),...t,...this.elements.slice(n)];oo(i,_e(t)),this.replaceAllElements(i)}getElementIndex(t){return this.elements.findIndex(n=>n.id===t)}mutateElement(t,n,i={informMutation:!0,isDragging:!1}){const s=this.getNonDeletedElementsMap(),{version:r}=t,{version:o}=pi(t,s,n,i);return this.elementsMap.has(t.id)&&r!==o&&i.informMutation&&this.triggerUpdate(),t}}class bt{constructor(t,n){this.deleted=t,this.inserted=n}static create(t,n,i,s){const r=i&&s!=="inserted"?i(t):t,o=i&&s!=="deleted"?i(n):n;return new bt(r,o)}static calculate(t,n,i,s){if(t===n)return bt.empty();const r={},o={};for(const c of this.distinctKeysIterator("full",t,n))r[c]=t[c],o[c]=n[c];const[a,l]=s?s(r,o):[r,o];return bt.create(a,l,i)}static empty(){return new bt({},{})}static isEmpty(t){return!Object.keys(t.deleted).length&&!Object.keys(t.inserted).length}static mergeObjects(t,n,i){const s={...t};for(const r of Object.keys(i))delete s[r];return{...s,...n}}static mergeArrays(t,n,i,s){return Object.values(bt.mergeObjects(ha(t??[],s),ha(n??[],s),ha(i??[],s)))}static diffObjects(t,n,i,s){if(!(!t[i]&&!n[i])&&(typeof t[i]=="object"||typeof n[i]=="object")){const r=t[i]??{},o=n[i]??{},a=bt.getLeftDifferences(r,o).reduce((c,u)=>(c[u]=s(r[u]),c),{}),l=bt.getRightDifferences(r,o).reduce((c,u)=>(c[u]=s(o[u]),c),{});Object.keys(a).length||Object.keys(l).length?(Reflect.set(t,i,a),Reflect.set(n,i,l)):(Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i))}}static diffArrays(t,n,i,s){if(!(!t[i]&&!n[i])&&(Array.isArray(t[i])||Array.isArray(n[i]))){const r=Array.isArray(t[i])?t[i]:[],o=Array.isArray(n[i])?n[i]:[],a=ha(bt.getLeftDifferences(ha(r,s),ha(o,s))),l=ha(bt.getRightDifferences(ha(r,s),ha(o,s)));if(Object.keys(a).length||Object.keys(l).length){const c=r.filter(d=>a[s?s(d):String(d)]),u=o.filter(d=>l[s?s(d):String(d)]);Reflect.set(t,i,c),Reflect.set(n,i,u)}else Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i)}}static isLeftDifferent(t,n,i=!1){return!!this.distinctKeysIterator("left",t,n,i).next().value}static isRightDifferent(t,n,i=!1){return!!this.distinctKeysIterator("right",t,n,i).next().value}static getLeftDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("left",t,n,i)).sort()}static getRightDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("right",t,n,i)).sort()}static*distinctKeysIterator(t,n,i,s=!1){if(n===i)return;let r=[];t==="left"?r=Object.keys(n):t==="right"?r=Object.keys(i):t==="full"?r=Array.from(new Set([...Object.keys(n),...Object.keys(i)])):jo(t,`Unknown distinctKeysIterator's join param "${t}"`,!0);for(const o of r){const a=n[o],l=i[o];if(a!==l){if(!s&&typeof a=="object"&&typeof l=="object"&&a!==null&&l!==null&&Ji(a,l))continue;yield o}}}}class Dn{constructor(t){this.delta=t}static calculate(t,n){const i=bt.calculate(t,n,Dn.orderAppStateKeys,Dn.postProcess);return new Dn(i)}static restore(t){const{delta:n}=t;return new Dn(n)}static empty(){return new Dn(bt.create({},{}))}inverse(){const t=bt.create(this.delta.inserted,this.delta.deleted);return new Dn(t)}applyTo(t,n){try{const{selectedElementIds:i={},selectedGroupIds:s={}}=this.delta.deleted,{selectedElementIds:r={},selectedGroupIds:o={},selectedLinearElementId:a,editingLinearElementId:l,...c}=this.delta.inserted,u=bt.mergeObjects(t.selectedElementIds,r,i),d=bt.mergeObjects(t.selectedGroupIds,o,s),f=a&&n.has(a)?new le(n.get(a),n):null,h=l&&n.has(l)?new le(n.get(l),n):null,m={...t,...c,selectedElementIds:u,selectedGroupIds:d,selectedLinearElement:typeof a<"u"?f:t.selectedLinearElement,editingLinearElement:typeof l<"u"?h:t.editingLinearElement},p=this.filterInvisibleChanges(t,m,n);return[m,p]}catch(i){throw console.error("Couldn't apply appstate change",i),i}}isEmpty(){return bt.isEmpty(this.delta)}filterInvisibleChanges(t,n,i){const s=$b(t),r=$b(n),o=bt.isRightDifferent(Dn.stripElementsProps(s),Dn.stripElementsProps(r)),a=bt.isRightDifferent(Dn.stripStandaloneProps(s),Dn.stripStandaloneProps(r));if(!o&&!a)return!1;const l={value:o};if(a){const c=bt.getRightDifferences(Dn.stripStandaloneProps(s),Dn.stripStandaloneProps(r));let u=new Set;(c.includes("editingGroupId")||c.includes("selectedGroupIds"))&&(u=qoe(i));for(const d of c)switch(d){case"selectedElementIds":n[d]=Dn.filterSelectedElements(n[d],i,l);break;case"selectedGroupIds":n[d]=Dn.filterSelectedGroups(n[d],u,l);break;case"croppingElementId":{const p=n[d],U=p&&i.get(p);U&&!U.isDeleted?l.value=!0:n[d]=null;break}case"editingGroupId":const f=n[d];f?u.has(f)?l.value=!0:n[d]=null:l.value=!0;break;case"selectedLinearElementId":case"editingLinearElementId":const h=Dn.convertToAppStateKey(d),m=n[h];if(!m)l.value=!0;else{const p=i.get(m.elementId);p&&!p.isDeleted?l.value=!0:n[h]=null}break;default:jo(d,`Unknown ObservedElementsAppState's key "${d}"`,!0)}}return l.value}static convertToAppStateKey(t){switch(t){case"selectedLinearElementId":return"selectedLinearElement";case"editingLinearElementId":return"editingLinearElement"}}static filterSelectedElements(t,n,i){const s=Object.keys(t);if(!s.length)return i.value=!0,t;const r={...t};for(const o of s){const a=n.get(o);a&&!a.isDeleted?i.value=!0:delete r[o]}return r}static filterSelectedGroups(t,n,i){if(!Object.keys(t).length)return i.value=!0,t;const r={...t};for(const o of Object.keys(r))n.has(o)?i.value=!0:delete r[o];return r}static stripElementsProps(t){const{editingGroupId:n,selectedGroupIds:i,selectedElementIds:s,editingLinearElementId:r,selectedLinearElementId:o,croppingElementId:a,...l}=t;return l}static stripStandaloneProps(t){const{name:n,viewBackgroundColor:i,...s}=t;return s}static postProcess(t,n){try{bt.diffObjects(t,n,"selectedElementIds",i=>!0),bt.diffObjects(t,n,"selectedGroupIds",i=>i??!1)}catch(i){throw console.error("Couldn't postprocess appstate change deltas."),i}finally{return[t,n]}}static orderAppStateKeys(t){const n={};for(const i of Object.keys(t).sort())n[i]=t[i];return n}}const pt=class pt{constructor(t,n,i){this.added=t,this.removed=n,this.updated=i}static create(t,n,i,s={shouldRedistribute:!1}){let r;if(s.shouldRedistribute){const o={},a={},l={},c=[...Object.entries(t),...Object.entries(n),...Object.entries(i)];for(const[u,d]of c)this.satisfiesAddition(d)?o[u]=d:this.satisfiesRemoval(d)?a[u]=d:l[u]=d;r=new pt(o,a,l)}else r=new pt(t,n,i);return pt.validate(r,"added",this.satisfiesAddition),pt.validate(r,"removed",this.satisfiesRemoval),pt.validate(r,"updated",this.satisfiesUpdate),r}static restore(t){const{added:n,removed:i,updated:s}=t;return pt.create(n,i,s)}static validate(t,n,i){for(const[s,r]of Object.entries(t[n]))if(!i(r))throw console.error(`Broken invariant for "${n}" delta, element "${s}", delta:`,r),new Error(`ElementsDelta invariant broken for element "${s}".`)}static calculate(t,n){if(t===n)return pt.empty();const i={},s={},r={};for(const o of t.values())if(!n.get(o.id)){const l={...o,isDeleted:!1},c={isDeleted:!0},u=bt.create(l,c,pt.stripIrrelevantProps);s[o.id]=u}for(const o of n.values()){const a=t.get(o.id);if(!a){const l={isDeleted:!0},c={...o,isDeleted:!1},u=bt.create(l,c,pt.stripIrrelevantProps);i[o.id]=u;continue}if(a.versionNonce!==o.versionNonce){const l=bt.calculate(a,o,pt.stripIrrelevantProps,pt.postProcess);if(typeof a.isDeleted=="boolean"&&typeof o.isDeleted=="boolean"&&a.isDeleted!==o.isDeleted){a.isDeleted&&!o.isDeleted?i[o.id]=l:s[o.id]=l;continue}bt.isEmpty(l)||(r[o.id]=l)}}return pt.create(i,s,r)}static empty(){return pt.create({},{},{})}inverse(){const t=r=>{const o={};for(const[a,l]of Object.entries(r))o[a]=bt.create(l.inserted,l.deleted);return o},n=t(this.added),i=t(this.removed),s=t(this.updated);return pt.create(i,n,s)}isEmpty(){return Object.keys(this.added).length===0&&Object.keys(this.removed).length===0&&Object.keys(this.updated).length===0}applyLatestChanges(t,n){const i=l=>c=>{const u={};for(const d of Object.keys(c))switch(d){case"boundElements":u[d]=c[d];break;default:u[d]=l[d]}return u},s=l=>{const c={};for(const[u,d]of Object.entries(l)){const f=t.get(u);if(f){const h=bt.create(d.deleted,d.inserted,i(f),n);c[u]=h}else c[u]=d}return c},r=s(this.added),o=s(this.removed),a=s(this.updated);return pt.create(r,o,a,{shouldRedistribute:!0})}applyTo(t,n){let i=new Map(t),s;const r={containsVisibleDifference:!1,containsZindexDifference:!1};try{const o=pt.createApplier(i,n,r),a=o("added",this.added),l=o("removed",this.removed),c=o("updated",this.updated),u=this.resolveConflicts(t,i);s=new Map([...a,...l,...c,...u])}catch(o){throw console.error("Couldn't apply elements delta",o),o}try{i=pt.reorderElements(i,s,r);const o=new Gb(i);pt.redrawTextBoundingBoxes(o,s),pt.redrawBoundArrows(o,s)}catch(o){throw console.error("Couldn't mutate elements after applying elements change",o),o}finally{return[i,r.containsVisibleDifference]}}static applyDelta(t,n,i={containsVisibleDifference:!0,containsZindexDifference:!0}){var o,a;const{boundElements:s,...r}=n.inserted;if((o=n.deleted.boundElements)!=null&&o.length||(a=n.inserted.boundElements)!=null&&a.length){const l=bt.mergeArrays(t.boundElements,n.inserted.boundElements,n.deleted.boundElements,c=>c.id);Object.assign(r,{boundElements:l})}if(t.type==="image"){const l=n;(l.deleted.crop||l.inserted.crop)&&Object.assign(r,{crop:l.inserted.crop??null})}if(!i.containsVisibleDifference){const{index:l,...c}=r,u=pt.checkForVisibleDifference(t,c);i.containsVisibleDifference=u}return i.containsZindexDifference||(i.containsZindexDifference=n.deleted.index!==n.inserted.index),Ie(t,r)}static checkForVisibleDifference(t,n){return t.isDeleted&&n.isDeleted!==!1?!1:t.isDeleted&&n.isDeleted===!1||t.isDeleted===!1&&n.isDeleted?!0:bt.isRightDifferent(t,n)}resolveConflicts(t,n){const i=new Map,s=(c,u)=>{const d=n.get(c.id);if(!d)return;let f;t.get(c.id)===d?f=Ie(d,u):f=pi(d,n,u),i.set(f.id,f),n.set(f.id,f)};for(const c of Object.keys(this.removed))pt.unbindAffected(t,n,c,s);for(const c of Object.keys(this.added))pt.rebindAffected(t,n,c,s);for(const[c]of Array.from(Object.entries(this.updated)).filter(([u,d])=>Object.keys({...d.deleted,...d.inserted}).find(f=>Xae.has(f)))){const u=n.get(c);!u||u.isDeleted||pt.rebindAffected(t,n,c,s)}const r=new Map(Array.from(t).filter(([c])=>i.has(c))),{added:o,removed:a,updated:l}=pt.calculate(r,i);for(const[c,u]of Object.entries(o))this.added[c]=u;for(const[c,u]of Object.entries(a))this.removed[c]=u;for(const[c,u]of Object.entries(l))this.updated[c]=u;return i}static unbindAffected(t,n,i,s){const r=()=>t.get(i),o=()=>n.get(i);Pf.unbindAffected(n,r(),s),Pf.unbindAffected(n,o(),s),Ff.unbindAffected(n,r(),s),Ff.unbindAffected(n,o(),s)}static rebindAffected(t,n,i,s){const r=()=>t.get(i),o=()=>n.get(i);Pf.unbindAffected(n,r(),s),Pf.rebindAffected(n,o(),s),Ff.unbindAffected(n,r(),(a,l)=>{ue(a)&&s(a,l)}),Ff.rebindAffected(n,o(),s)}static redrawTextBoundingBoxes(t,n){const i=t.getNonDeletedElementsMap(),s=new Map;for(const r of n.values()){if(Xt(r)){const{containerId:o}=r,a=o?i.get(o):void 0;a&&s.set(a.id,{container:a,boundText:r})}if(ns(r)){const o=Ko(r),a=o?i.get(o):void 0;a&&s.set(r.id,{container:r,boundText:a})}}for(const{container:r,boundText:o}of s.values())r.isDeleted||o.isDeleted||$i(o,r,t)}static redrawBoundArrows(t,n){for(const i of n.values())!i.isDeleted&&so(i)&&ys(i,t,{changedElements:n})}static reorderElements(t,n,i){if(!i.containsZindexDifference)return t;const s=Array.from(t.values()),r=_w([...s]),o=bt.getRightDifferences(s,r,!0).reduce((a,l)=>{const c=s[Number(l)];return c&&n.has(c.id)&&a.set(c.id,c),a},new Map);return!i.containsVisibleDifference&&o.size&&(i.containsVisibleDifference=!0),_e(oo(r,o))}static postProcess(t,n){try{bt.diffArrays(t,n,"boundElements",i=>i.id)}catch(i){throw console.error("Couldn't postprocess elements delta."),i}finally{return[t,n]}}static stripIrrelevantProps(t){const{id:n,updated:i,version:s,versionNonce:r,...o}=t;return o}};F(pt,"satisfiesAddition",({deleted:t,inserted:n})=>t.isDeleted===!0&&!n.isDeleted),F(pt,"satisfiesRemoval",({deleted:t,inserted:n})=>!t.isDeleted&&n.isDeleted===!0),F(pt,"satisfiesUpdate",({deleted:t,inserted:n})=>!!t.isDeleted==!!n.isDeleted),F(pt,"createApplier",(t,n,i)=>(s,r)=>{const o=pt.createGetter(s,t,n,i);return Object.entries(r).reduce((a,[l,c])=>{const u=o(l,c.inserted);if(u){const d=pt.applyDelta(u,c,i);t.set(d.id,d),a.set(d.id,d)}return a},new Map)}),F(pt,"createGetter",(t,n,i,s)=>(r,o)=>{let a=n.get(r);return a||(a=i.get(r),a?(s.containsZindexDifference=!0,(o.isDeleted===!1||o.isDeleted!==!0&&a.isDeleted===!1)&&(s.containsVisibleDifference=!0)):a=Ie({id:r,version:1},{...o})),a});let Oh=pt;const Cle=(e,t,n)=>{const[i,s,r,o]=n.axis==="x"?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],a=Er(e),l=b5(e,t).map(f=>[f,Er(f)]).sort((f,h)=>f[1][s]-h[1][s]);let c=0;for(const f of l)c+=f[1][o];const u=(a[o]-c)/(l.length-1);if(u<0){const f=l.findIndex(U=>U[1][i]===a[i]),h=l.findIndex(U=>U[1][r]===a[r]),m=(l[h][1][s]-l[f][1][s])/(l.length-1);let p=l[f][1][s];return l.flatMap(([U,y],E)=>{const v={x:0,y:0};return E!==f&&E!==h&&(p+=m,v[n.axis]=p-y[s]),U.map(w=>Ie(w,{x:w.x+v.x,y:w.y+v.y}))})}let d=a[i];return l.flatMap(([f,h])=>{const m={x:0,y:0};return m[n.axis]=d-h[i],d+=u,d+=h[o],f.map(p=>Ie(p,{x:p.x+m.x,y:p.y+m.y}))})},Ale=(e,t,n,i,s,r)=>{if(t.length===1&&he(t[0])&&(t[0].startBinding||t[0].endBinding))return;const o=t.filter(d=>{if(he(d)&&d.startBinding&&d.endBinding){const f=t.find(m=>{var p;return m.id===((p=d.startBinding)==null?void 0:p.elementId)}),h=t.find(m=>{var p;return m.id===((p=d.endBinding)==null?void 0:p.elementId)});return f&&h}return!0}),a=new Set(o),l=o.filter(d=>Te(d)).map(d=>d.id);if(l.length>0)for(const d of i.getNonDeletedElements())d.frameId!==null&&l.includes(d.frameId)&&a.add(d);const c=[];for(const d of a){const f=e.originalElements.get(d.id);if(!f)return;c.push(f)}const u=Mle(xt(c),n,s,r);a.forEach(d=>{if(oA(e,d,i,u),!xe(d)){const f=Oe(d,i.getNonDeletedElementsMap());f&&oA(e,f,i,u),ys(d,i,{simultaneouslyUpdated:Array.from(a)})}})},Mle=(e,t,n,i)=>{const[s,r]=e;let o=s+t.x+n.x,a=r+t.y+n.y;if(n.x===0||n.y===0){const[l,c]=Mn(s+t.x,r+t.y,i);n.x===0&&(o=l),n.y===0&&(a=c)}return{x:o-s,y:a-r}},oA=(e,t,n,i)=>{const s=e.originalElements.get(t.id)??t,r=s.x+i.x,o=s.y+i.y;n.mutateElement(t,{x:r,y:o})},Rle=(e,t,n)=>{const[i,s]=xt(e);return[t-i,n-s]},aA=({newElement:e,elementType:t,originX:n,originY:i,x:s,y:r,width:o,height:a,shouldMaintainAspectRatio:l,shouldResizeFromCenter:c,zoom:u,scene:d,widthAspectRatio:f=null,originOffset:h=null,informMutation:m=!0})=>{l&&e.type!=="selection"&&(f?a=o/f:(Math.abs(r-i)>Math.abs(s-n)?{width:o,height:a}=eA(t,a,s<n?-o:o):{width:o,height:a}=eA(t,o,r<i?-a:a),a<0&&(a=-a)));let p=s<n?n-o:n,U=r<i?i-a:i;c&&(o+=o,a+=a,p=n-o/2,U=i-a/2);let y=null;if(ue(e)){a=e.height;const E=ew(gt({fontSize:e.fontSize,fontFamily:e.fontFamily}),e.lineHeight);o=Math.max(o,E),Math.abs(s-n)>vie/u&&(y={autoResize:!1}),U=i,c&&(p=n-o/2)}if(o!==0&&a!==0){let E=null;ft(e)&&(E={initialWidth:o,initialHeight:a}),d.mutateElement(e,{x:p+((h==null?void 0:h.x)??0),y:U+((h==null?void 0:h.y)??0),width:o,height:a,...y,...E},{informMutation:m,isDragging:!1})}},zB=(e,t)=>{const n=window.location.href;try{const i=new URL(n);return i.searchParams.set(Ub,e),$s(i.toString())}catch(i){console.error(i)}return $s(n)},HB=(e,t)=>{if(e.length>0&&Xb(e)){if(e.length===1)return{id:e[0].id,type:"element"};if(e.length>1){const n=Object.keys(t.selectedGroupIds)[0];return n?{id:n,type:"group"}:{id:e[0].groupIds[0],type:"group"}}}return null},Xb=e=>!!(e.length===1||e.length>1&&eB(e)),ih=e=>{try{const t=new URL(e);return t.searchParams.has(Ub)&&t.host===window.location.host}catch{return!1}},kle=e=>{try{const{searchParams:t}=new URL(e);if(t.has(Ub))return t.get(Ub)}catch{}return null},ao=(e,{x:t,y:n,strokeColor:i=fn.strokeColor,backgroundColor:s=fn.backgroundColor,fillStyle:r=fn.fillStyle,strokeWidth:o=fn.strokeWidth,strokeStyle:a=fn.strokeStyle,roughness:l=fn.roughness,opacity:c=fn.opacity,width:u=0,height:d=0,angle:f=0,groupIds:h=[],frameId:m=null,index:p=null,roundness:U=null,boundElements:y=null,link:E=null,locked:v=fn.locked,...w})=>((t<-1e6||t>1e6||n<-1e6||n>1e6||u<-1e6||u>1e6||d<-1e6||d>1e6)&&console.error("New element size or position is too large",{x:t,y:n,width:u,height:d,points:w.points}),{id:w.id||vs(),type:e,x:t,y:n,width:u,height:d,angle:f,strokeColor:i,backgroundColor:s,fillStyle:r,strokeWidth:o,strokeStyle:a,roughness:l,opacity:c,groupIds:h,frameId:m,index:p,roundness:U,seed:w.seed??Wo(),version:w.version||1,versionNonce:w.versionNonce??0,isDeleted:!1,boundElements:y,updated:fg(),link:E,locked:v,customData:w.customData}),lo=e=>ao(e.type,e),lA=e=>ao("embeddable",e),Dle=e=>({...ao("iframe",e)}),Tw=e=>Ie({...ao("frame",e),type:"frame",name:(e==null?void 0:e.name)||null},{}),W3=e=>Ie({...ao("magicframe",e),type:"magicframe",name:(e==null?void 0:e.name)||null},{}),VB=(e,t)=>({x:e.textAlign==="center"?t.width/2:e.textAlign==="right"?t.width:0,y:e.verticalAlign==="middle"?t.height/2:0}),js=e=>{const t=e.fontFamily||Kc,n=e.fontSize||pl,i=e.lineHeight||Rc(t),s=Rh(e.text),r=Vn(s,gt({fontFamily:t,fontSize:n}),i),o=e.textAlign||Km,a=e.verticalAlign||hb,l=VB({textAlign:o,verticalAlign:a},r),c={...ao("text",e),text:s,fontSize:n,fontFamily:t,textAlign:o,verticalAlign:a,x:e.x-l.x,y:e.y-l.y,width:r.width,height:r.height,containerId:e.containerId||null,originalText:e.originalText??s,autoResize:e.autoResize??!0,lineHeight:i};return Ie(c,{})},Lle=(e,t,n)=>{let{width:i,height:s}=Vn(n,gt(e),e.lineHeight);e.autoResize||(i=e.width);const{textAlign:r,verticalAlign:o}=e;let a,l;if(r==="center"&&o===Fs.MIDDLE&&!e.containerId&&e.autoResize){const c=Vn(e.text,gt(e),e.lineHeight),u=VB(e,{width:i-c.width,height:s-c.height});a=e.x-u.x,l=e.y-u.y}else{const[c,u,d,f]=Ne(e,t),[h,m,p,U]=fc(e,i,s,!1),y=(c-h)/2,E=(u-m)/2,v=(d-p)/2,w=(f-U)/2;[a,l]=Nle({s:!0,e:r==="center"||r==="left",w:r==="center"||r==="right"},e.x,e.y,e.angle,y,E,v,w)}return{width:i,height:s,x:Number.isFinite(a)?a:e.x,y:Number.isFinite(l)?l:e.y}},Nle=(e,t,n,i,s,r,o,a)=>{const l=Math.cos(i),c=Math.sin(i);return e.e&&e.w?t+=s+o:e.e?(t+=s*(1+l),n+=s*c,t+=o*(1-l),n+=o*-c):e.w&&(t+=s*(1-l),n+=s*-c,t+=o*(1+l),n+=o*c),e.n&&e.s?n+=r+a:e.n?(t+=r*c,n+=r*(1-l),t+=a*-c,n+=a*(1+l)):(t+=r*-c,n+=r*(1+l),t+=a*c,n+=a*(1-l)),[t,n]},$B=(e,t,n,i=e.text)=>{if(e.isDeleted)return;(t||!e.autoResize)&&(i=qc(i,gt(e),t?Zo(t,e):e.width));const s=Lle(e,n,i);return{text:i,...s}},Ole=e=>({...ao(e.type,e),points:e.points||[],pressures:e.pressures||[],simulatePressure:e.simulatePressure,lastCommittedPoint:null}),hc=e=>({...ao(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:null,endArrowhead:null}),sh=e=>e.elbowed?{...ao(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!0,fixedSegments:e.fixedSegments||[],startIsSpecial:!1,endIsSpecial:!1}:{...ao(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!1},GB=e=>({...ao("image",e),strokeColor:"transparent",status:e.status??"pending",fileId:e.fileId??null,scale:e.scale??[1,1],crop:e.crop??null}),Uo=new Map,Ple=/^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)(?:\?t=|&t=|\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\s]*$/,Fle=/^(?:http(?:s)?:\/\/)?(?:(?:w){3}\.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/,Ble=/^https:\/\/(?:www\.)?figma\.com/,cA=/^https:\/\/gist\.github\.com\/([\w_-]+)\/([\w_-]+)/,zle=/^<script[\s\S]*?\ssrc=["'](https:\/\/gist\.github\.com\/.*?)\.js["']/i,Hle=/^(?:https?:\/\/)?forms\.microsoft\.com\//,uA=/(?:https?:\/\/)?(?:(?:w){3}\.)?(?:twitter|x)\.com\/[^/]+\/status\/(\d+)/,Vle=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:twitter|x)\.com\/[^"']*)/i,$le=/^https:\/\/(?:www\.)?val\.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/,Gle=/^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i,dA=/giphy.com\/(?:clips|embed|gifs)\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/,fA=/^(?:http(?:s)?:\/\/)?(?:www\.)?reddit\.com\/r\/([a-zA-Z0-9_]+)\/comments\/([a-zA-Z0-9_]+)\/([a-zA-Z0-9_]+)\/?(?:\?[^#\s]*)?(?:#[^\s]*)?$/,Xle=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:www\.)?reddit\.com\/[^"']*)/i,K3=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","link.excalidraw.com","gist.github.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","val.town","giphy.com","reddit.com","forms.microsoft.com"]),hA=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","reddit.com","forms.microsoft.com"]),l0=e=>`<html><body>${e}</body></html>`,zf=e=>{if(!e)return null;if(Uo.has(e))return Uo.get(e);const t=e,n=hA.has(Z3(e,hA)||"");let i="generic",s={w:560,h:840};const r=e.match(Ple);if(r!=null&&r[2]){const c=r[3]?`&start=${r[3]}`:"",u=e.includes("shorts");switch(i="video",r[1]){case"embed/":case"watch?v=":case"shorts/":e=`https://www.youtube.com/embed/${r[2]}?enablejsapi=1${c}`;break;case"playlist?list=":case"embed/videoseries?list=":e=`https://www.youtube.com/embed/videoseries?list=${r[2]}&enablejsapi=1${c}`;break;default:e=`https://www.youtube.com/embed/${r[2]}?enablejsapi=1${c}`;break}return s=u?{w:315,h:560}:{w:560,h:315},Uo.set(t,{link:e,intrinsicSize:s,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:s,type:i,sandbox:{allowSameOrigin:n}}}const o=e.match(Fle);if(o!=null&&o[1]){const c=o==null?void 0:o[1],u=/^\d+$/.test(c)?void 0:new URIError("Invalid embed link format");return i="video",e=`https://player.vimeo.com/video/${c}?api=1`,s={w:560,h:315},Uo.set(t,{link:e,intrinsicSize:s,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:s,type:i,error:u,sandbox:{allowSameOrigin:n}}}if(e.match(Ble))return i="generic",e=`https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`,s={w:550,h:550},Uo.set(t,{link:e,intrinsicSize:s,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:s,type:i,sandbox:{allowSameOrigin:n}};const l=e.match($le);if(l)return e=l[1]==="embed"?l[0]:l[0].replace("/v","/embed"),Uo.set(t,{link:e,intrinsicSize:s,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:s,type:i,sandbox:{allowSameOrigin:n}};if(Hle.test(e)&&!e.includes("embed=true")&&(e+=e.includes("?")?"&embed=true":"?embed=true"),uA.test(e)){const c=e.match(uA)[1],u=s2(`https://twitter.com/x/status/${c}`),d={type:"document",srcdoc:f=>l0(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${f}"><a href="${u}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return Uo.set(t,d),d}if(fA.test(e)){const[,c,u,d]=e.match(fA),f=s2(`https://reddit.com/r/${c}/comments/${u}/${d}`),h={type:"document",srcdoc:m=>l0(`<blockquote class="reddit-embed-bq" data-embed-theme="${m}"><a href="${f}"></a><br></blockquote><script async="" src="https://embed.reddit.com/widgets.js" charset="UTF-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return Uo.set(t,h),h}if(cA.test(e)){const[,c,u]=e.match(cA),d=s2(`https://gist.github.com/${c}/${u}`),f={type:"document",srcdoc:()=>l0(`
          <script src="${d}.js"><\/script>
          <style type="text/css">
            * { margin: 0px; }
            table, .gist { height: 100%; }
            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
          </style>
        `),intrinsicSize:{w:550,h:720},sandbox:{allowSameOrigin:n}};return Uo.set(e,f),f}return Uo.set(e,{link:e,intrinsicSize:s,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:s,type:i,sandbox:{allowSameOrigin:n}}},XB=e=>{let t;Bl(e)?t="IFrame element":t=!e.link||(e==null?void 0:e.link)===""?"Empty Web-Embed":e.link;const n=Math.max(Math.min(e.width/2,e.width/t.length),e.width/30),i=lt.Helvetica,s=gt({fontSize:n,fontFamily:i});return js({x:e.x+e.width/2,y:e.y+e.height/2,strokeColor:e.strokeColor!=="transparent"?e.strokeColor:"black",backgroundColor:"transparent",fontFamily:i,fontSize:n,text:qc(t,s,e.width-20),textAlign:"center",verticalAlign:Fs.MIDDLE,angle:e.angle??0})},Z3=(e,t)=>{try{const{hostname:n}=new URL(e),i=n.replace(/^www\./,"");if(t instanceof Set){if(K3.has(i))return i;const r=i.replace(/^([^.]+)/,"*");return K3.has(r)?r:null}const s=t.replace(/^www\./,"");if(i===s)return s}catch{}return null},jle=e=>{const t=e.match(Vle);if(t&&t.length===2)return t[1];const n=e.match(Xle);if(n&&n.length===2)return n[1];const i=e.match(zle);if(i&&i.length===2)return i[1];if(dA.test(e))return`https://giphy.com/embed/${dA.exec(e)[1]}`;const s=e.match(Gle);return s&&s.length===2?s[1]:e},f2=(e,t)=>{if(!e)return!1;if(t!=null)if(typeof t=="function"){const n=t(e);if(typeof n=="boolean")return n}else{if(typeof t=="boolean")return t;if(t instanceof RegExp)return t.test(e);if(Array.isArray(t)){for(const n of t)if(n instanceof RegExp){if(e.match(n))return!0}else if(Z3(e,n))return!0;return!1}}return!!Z3(e,K3)},rh=100,Au=100,gA=e=>{switch(e){case z.ARROW_UP:return"up";case z.ARROW_DOWN:return"down";case z.ARROW_RIGHT:return"right";case z.ARROW_LEFT:return"left";default:return"right"}},jB=(e,t,n,i)=>{const s=[...n.values()].reduce((r,o)=>{var l;let a;if(he(o)&&(a=o[e==="predecessors"?"startBinding":"endBinding"])&&((l=o[e==="predecessors"?"endBinding":"startBinding"])==null?void 0:l.elementId)===t.id){const c=n.get(a.elementId);if(!c)return r;ti(so(c),"not an ExcalidrawBindableElement");const u=e==="predecessors"?o.points[o.points.length-1]:[0,0],d=J9(t,Co(t),[u[0]+o.x,u[1]+o.y]);r.push({relative:c,heading:d})}return r},[]);switch(i){case"up":return s.filter(r=>zn(r.heading,jr)).map(r=>r.relative);case"down":return s.filter(r=>zn(r.heading,qi)).map(r=>r.relative);case"right":return s.filter(r=>zn(r.heading,Pn)).map(r=>r.relative);case"left":return s.filter(r=>zn(r.heading,cr)).map(r=>r.relative)}},q3=(e,t,n)=>jB("successors",e,t,n),Q3=(e,t,n)=>jB("predecessors",e,t,n),Yle=(e,t,n)=>{const i=Au+e.width;if(n==="up"||n==="down"){const a=rh+e.height,l=e.x,c=e.x+e.width;if(t.every(u=>u.x+u.width<l||u.x>c))return{x:0,y:a*(n==="up"?-1:1)}}else if(n==="right"||n==="left"){const a=e.y,l=e.y+e.height;if(t.every(c=>c.y+c.height<a||c.y>l))return{x:(Au+e.width)*(n==="left"?-1:1),y:0}}if(n==="up"||n==="down"){const a=rh+e.height,l=(t.length===0,a),c=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*i:t.length/2*i*-1;return n==="up"?{x:c,y:l*-1}:{x:c,y:l}}const s=rh+e.height,r=(t.length===0,Au+e.width),o=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*s:t.length/2*s*-1;return n==="left"?{x:r*-1,y:o}:{x:r,y:o}},Wle=(e,t,n,i)=>{const s=i.getNonDeletedElementsMap(),r=q3(e,s,n),o=Q3(e,s,n),a=Yle(e,[...r,...o],n),l=lo({type:e.type,x:e.x+a.x,y:e.y+a.y,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});ti(m5(l),"not an ExcalidrawFlowchartNodeElement");const c=YB(e,l,n,t,i);return{nextNode:l,bindingArrow:c}},Kle=(e,t,n,i,s)=>{const r=[];for(let o=0;o<s;o++){let a,l;if(n==="left"||n==="right"){const d=rh*(s-1)+s*e.height,f=e.y+e.height/2-d/2;let h=Au+e.width;n==="left"&&(h*=-1),a=e.x+h;const m=(rh+e.height)*o;l=f+m}else{const d=Au*(s-1)+s*e.width,f=e.x+e.width/2-d/2;let h=rh+e.height;n==="up"&&(h*=-1),l=e.y+h;const m=(Au+e.width)*o;a=f+m}const c=lo({type:e.type,x:a,y:l,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});ti(m5(c),"not an ExcalidrawFlowchartNodeElement");const u=YB(e,c,n,t,i);r.push(c),r.push(u)}return r},YB=(e,t,n,i,s)=>{let r,o;switch(n){case"up":{r=e.x+e.width/2,o=e.y-6;break}case"down":{r=e.x+e.width/2,o=e.y+e.height+6;break}case"right":{r=e.x+e.width+6,o=e.y+e.height/2;break}case"left":{r=e.x-6,o=e.y+e.height/2;break}}let l,c;switch(n){case"up":{l=t.x+t.width/2-r,c=t.y+t.height-o+6;break}case"down":{l=t.x+t.width/2-r,c=t.y-o-6;break}case"right":{l=t.x-r-6,c=t.y-o+t.height/2;break}case"left":{l=t.x+t.width-r+6,c=t.y-o+t.height/2;break}}const u=sh({type:"arrow",x:r,y:o,startArrowhead:null,endArrowhead:i.currentItemEndArrowhead,strokeColor:e.strokeColor,strokeStyle:e.strokeStyle,strokeWidth:e.strokeWidth,opacity:e.opacity,roughness:e.roughness,points:[S(0,0),S(l,c)],elbowed:!0}),d=s.getNonDeletedElementsMap();gr(u,e,"start",s),gr(u,t,"end",s);const f=new Map;f.set(e.id,e),f.set(t.id,t),f.set(u.id,u),le.movePoints(u,s,new Map([[1,{point:u.points[1]}]]));const h=hg(u,Yo(new Map([...d.entries(),[e.id,e],[t.id,t],[u.id,u]])),{points:u.points});return{...u,...h}};class Zle{constructor(){F(this,"isExploring",!1);F(this,"sameLevelNodes",[]);F(this,"sameLevelIndex",0);F(this,"direction",null);F(this,"visitedNodes",new Set)}clear(){this.isExploring=!1,this.sameLevelNodes=[],this.sameLevelIndex=0,this.direction=null,this.visitedNodes.clear()}exploreByDirection(t,n,i){if(!so(t))return null;if(i!==this.direction&&this.clear(),this.visitedNodes.has(t.id)||this.visitedNodes.add(t.id),this.isExploring&&i===this.direction&&this.sameLevelNodes.length>1)return this.sameLevelIndex=(this.sameLevelIndex+1)%this.sameLevelNodes.length,this.sameLevelNodes[this.sameLevelIndex].id;const s=[...q3(t,n,i),...Q3(t,n,i)];if(s.length>0)return this.sameLevelIndex=0,this.isExploring=!0,this.sameLevelNodes=s,this.direction=i,this.visitedNodes.add(s[0].id),s[0].id;if(i===this.direction||!this.isExploring){this.isExploring||this.visitedNodes.add(t.id);const o=["up","right","down","left"].filter(a=>a!==i).map(a=>[...q3(t,n,a),...Q3(t,n,a)]).flat().filter(a=>!this.visitedNodes.has(a.id));for(const a of o)if(!this.visitedNodes.has(a.id))return this.visitedNodes.add(a.id),this.isExploring=!0,this.direction=i,a.id}return null}}class qle{constructor(){F(this,"isCreatingChart",!1);F(this,"numberOfNodes",0);F(this,"direction","right");F(this,"pendingNodes",null)}createNodes(t,n,i,s){const r=s.getNonDeletedElementsMap();if(i!==this.direction){const{nextNode:o,bindingArrow:a}=Wle(t,n,i,s);this.numberOfNodes=1,this.isCreatingChart=!0,this.direction=i,this.pendingNodes=[o,a]}else{this.numberOfNodes+=1;const o=Kle(t,n,i,s,this.numberOfNodes);this.isCreatingChart=!0,this.direction=i,this.pendingNodes=o}if(t.frameId){const o=r.get(t.frameId);ti(o&&OF(o),"not an ExcalidrawFrameElement"),o&&this.pendingNodes.every(a=>rp([a],o,r)||Lc(a,o,r))&&(this.pendingNodes=this.pendingNodes.map(a=>pi(a,r,{frameId:t.frameId})))}}clear(){this.isCreatingChart=!1,this.pendingNodes=null,this.direction=null,this.numberOfNodes=0}}const Qle=(e,t)=>{var n,i;for(const[,s]of t)if(s.type==="arrow"&&(((n=s.startBinding)==null?void 0:n.elementId)===e.id||((i=s.endBinding)==null?void 0:i.elementId)===e.id))return!0;return!1},WB=e=>new Promise((t,n)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=s=>{n(s)},i.src=e}),KB=async({fileIds:e,files:t,imageCache:n})=>{const i=new Map,s=new Map;return await Promise.all(e.reduce((r,o)=>{const a=t[o];return a&&!i.has(o)?(i.set(o,!0),r.concat((async()=>{try{if(a.mimeType===ye.binary)throw new Error("Only images can be added to ImageCache");const l=WB(a.dataURL),c={image:l,mimeType:a.mimeType};n.set(o,c);const u=await l;n.set(o,{...c,image:u})}catch{s.set(o,!0)}})())):r},[])),{imageCache:n,updatedFiles:i,erroredFiles:s}},ZB=e=>e.filter(t=>In(t)),Jle=e=>(e==null?void 0:e.nodeName.toLowerCase())==="svg",mA=e=>{const t=new DOMParser().parseFromString(e,ye.svg),n=t.querySelector("svg");if(t.querySelector("parsererror")||!Jle(n))throw new Error("Invalid SVG");{n.hasAttribute("xmlns")||n.setAttribute("xmlns",st);let s=n.getAttribute("width"),r=n.getAttribute("height");(s!=null&&s.includes("%")||s==="auto")&&(s=null),(r!=null&&r.includes("%")||r==="auto")&&(r=null);const o=n.getAttribute("viewBox");if(!s||!r){if(s=s||"50",r=r||"50",o){const a=o.match(/\d+ +\d+ +(\d+(?:\.\d+)?) +(\d+(?:\.\d+)?)/);a&&([,s,r]=a)}n.setAttribute("width",s),n.setAttribute("height",r)}return o||n.setAttribute("viewBox",`0 0 ${s} ${r}`),n.outerHTML}},ece=(e,t,n,i,s,r,o,a,l,c,u)=>{const d=i.getNonDeletedElementsMap();if(n.length===1){const[f]=n;if(t==="rotation")he(f)||(tce(f,i,a,l,s),ys(f,i));else{if(ue(f)&&t)return nce(e,f,i,t,r,a,l),ys(f,i),!0;if(t){const h=n[0].id,m=d.get(h),p=e.get(h);if(m&&p){const{nextWidth:U,nextHeight:y}=lce(m,p,t,a,l,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:r});Z0(U,y,m,p,e,i,t,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:r})}}}return!0}else if(n.length>1){if(t==="rotation")return ice(e,n,i,a,l,s,c,u),!0;if(t){const{nextWidth:f,nextHeight:h,flipByX:m,flipByY:p,originalBoundingBox:U}=cce(n,e,d,t,a,l,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:r});return qB(n,d,t,i,e,{shouldResizeFromCenter:r,shouldMaintainAspectRatio:o,flipByX:m,flipByY:p,nextWidth:f,nextHeight:h,originalBoundingBox:U}),!0}}return!1},tce=(e,t,n,i,s)=>{const[r,o,a,l]=Ne(e,t.getNonDeletedElementsMap()),c=(r+a)/2,u=(o+l)/2;let d;Te(e)?d=0:(d=5*Math.PI/2+Math.atan2(i-u,n-c),s&&(d=d+Ac/2,d=d-d%Ac),d=bb(d));const f=Ko(e);if(t.mutateElement(e,{angle:d}),f){const h=t.getElement(f);h&&!xe(e)&&t.mutateElement(h,{angle:d})}},Sw=(e,t,n,i)=>Ae(e)||io(e)?{points:_b(0,t,_b(1,n,e.points,i),i)}:{},Iw=(e,t,n)=>{let i=e.width;if(Xt(e)){const o=$n(e,t);o&&(i=Zo(o,e))}const r=e.fontSize*(n/i);return r<L9?null:{size:r}},nce=(e,t,n,i,s,r,o)=>{const a=n.getNonDeletedElementsMap(),[l,c,u,d,f,h]=Ne(t,a),[m,p]=Z(S(r,o),S(f,h),-t.angle);let U=0,y=0;i!=="e"&&i!=="w"&&(i.includes("e")&&(U=(m-l)/(u-l)),i.includes("w")&&(U=(u-m)/(u-l)),i.includes("n")&&(y=(d-p)/(d-c)),i.includes("s")&&(y=(p-c)/(d-c)));const E=Math.max(U,y);if(E>0){const v=t.width*E,w=t.height*E,I=Iw(t,a,v);if(I===null)return;const M=[l,c],T=[u,d],_=[f,h];let x=S(l,c);if(["n","w","nw"].includes(i)&&(x=S(T[0]-Math.abs(v),T[1]-Math.abs(w))),i==="ne"){const H=[M[0],T[1]];x=S(H[0],H[1]-Math.abs(w))}if(i==="sw"){const H=[T[0],M[1]];x=S(H[0]-Math.abs(v),H[1])}["s","n"].includes(i)&&(x[0]=_[0]-v/2),["e","w"].includes(i)&&(x[1]=_[1]-w/2),s&&(x[0]=_[0]-Math.abs(v)/2,x[1]=_[1]-Math.abs(w)/2);const C=t.angle,R=Z(x,S(f,h),C),N=S(x[0]+Math.abs(v)/2,x[1]+Math.abs(w)/2),D=Z(N,S(f,h),C);x=Z(R,D,-C);const[$,G]=x;n.mutateElement(t,{fontSize:I.size,width:v,height:w,x:$,y:G})}if(i==="e"||i==="w"){const v=e.get(t.id),[w,I,M,T]=fc(v,v.width,v.height,!0),_=S(w,I),x=S(M,T),C=G0(_,x),R=Z(S(r,o),C,-v.angle),[N,,D]=fc(t,t.width,t.height,!0),$=D-N,G=x[0]-_[0],H=ew(gt({fontSize:t.fontSize,fontFamily:t.fontFamily}),t.lineHeight);let V=G/$;i.includes("e")&&(V=(R[0]-_[0])/$),i.includes("w")&&(V=(x[0]-R[0])/$);const X=t.width*V<H?H:t.width*V,j=qc(t.originalText,gt(t),Math.abs(X)),q=Vn(j,gt(t),t.lineHeight),fe=q.height,[ie,Ue,Ve,$e]=fc(v,X,fe,!0),nt=Ve-ie,zt=$e-Ue;let Mt=[..._];["n","w","nw"].includes(i)&&(Mt=[x[0]-Math.abs(nt),_[1]]);const qt=v.angle,Ce=Z(Mt,C,qt),Ge=S(Mt[0]+Math.abs(nt)/2,Mt[1]+Math.abs(zt)/2),Qt=Z(Ge,C,qt);Mt=Z(Ce,Qt,-qt);const as={width:Math.abs(X),height:Math.abs(q.height),x:Mt[0],y:Mt[1],text:j,autoResize:!1};n.mutateElement(t,as)}},ice=(e,t,n,i,s,r,o,a)=>{var u;const l=n.getNonDeletedElementsMap();let c=5*Math.PI/2+Math.atan2(s-a,i-o);r&&(c+=Ac/2,c-=c%Ac);for(const d of t)if(!Te(d)){const[f,h,m,p]=Ne(d,l),U=(f+m)/2,y=(h+p)/2,E=((u=e.get(d.id))==null?void 0:u.angle)??d.angle,[v,w]=Z(S(U,y),S(o,a),c+E-d.angle),I=he(d)?{points:Yae(d,l)}:{x:d.x+(v-U),y:d.y+(w-y),angle:bb(c+E)};n.mutateElement(d,I),ys(d,n,{simultaneouslyUpdated:t});const M=Oe(d,l);M&&!xe(d)&&n.mutateElement(M,{x:M.x+(v-U),y:M.y+(w-y),angle:bb(c+E)})}n.triggerUpdate()},sce=(e,t,n,i,s)=>{const[r,o,a,l]=t.length===1?Ne(t[0],n):xt(t),c=(r+a)/2,u=(o+l)/2,d=t.length===1?t[0].angle:0;switch([i,s]=Z(S(i,s),S(c,u),-d),e){case"n":return Z(S(i-(r+a)/2,s-o),S(0,0),d);case"s":return Z(S(i-(r+a)/2,s-l),S(0,0),d);case"w":return Z(S(i-r,s-(o+l)/2),S(0,0),d);case"e":return Z(S(i-a,s-(o+l)/2),S(0,0),d);case"nw":return Z(S(i-r,s-o),S(0,0),d);case"ne":return Z(S(i-a,s-o),S(0,0),d);case"sw":return Z(S(i-r,s-l),S(0,0),d);case"se":return Z(S(i-a,s-l),S(0,0),d);default:return[0,0]}},rce=(e,t)=>{const[,[n,i]]=t.points;return e==="nw"&&(n<0||i<0)||e==="ne"&&n>=0||e==="sw"&&n<=0||e==="se"&&(n>0||i>0)?"end":"origin"},oce=(e,t,n)=>{if(n)return"center";if(t)switch(e){case"n":return"south-side";case"e":return"west-side";case"s":return"north-side";case"w":return"east-side";case"ne":return"bottom-left";case"nw":return"bottom-right";case"se":return"top-left";case"sw":return"top-right"}return["e","se","s"].includes(e)?"top-left":["n","nw","w"].includes(e)?"bottom-right":e==="ne"?"bottom-left":"top-right"},ace=(e,t,n,i,s,r,o,a,l)=>{const c=oce(o,a,l),[u,d]=e;switch(c){case"top-left":return{x:u+(t-i)/2+(i-t)/2*Math.cos(r)+(n-s)/2*Math.sin(r),y:d+(n-s)/2+(i-t)/2*Math.sin(r)+(s-n)/2*Math.cos(r)};case"top-right":return{x:u+(t-i)/2*(Math.cos(r)+1)+(n-s)/2*Math.sin(r),y:d+(n-s)/2+(t-i)/2*Math.sin(r)+(s-n)/2*Math.cos(r)};case"bottom-left":return{x:u+(t-i)/2*(1-Math.cos(r))+(s-n)/2*Math.sin(r),y:d+(n-s)/2*(Math.cos(r)+1)+(i-t)/2*Math.sin(r)};case"bottom-right":return{x:u+(t-i)/2*(Math.cos(r)+1)+(s-n)/2*Math.sin(r),y:d+(n-s)/2*(Math.cos(r)+1)+(t-i)/2*Math.sin(r)};case"center":return{x:u-(i-t)/2,y:d-(s-n)/2};case"east-side":return{x:u+(t-i)/2*(Math.cos(r)+1),y:d+(t-i)/2*Math.sin(r)+(n-s)/2};case"west-side":return{x:u+(t-i)/2*(1-Math.cos(r)),y:d+(i-t)/2*Math.sin(r)+(n-s)/2};case"north-side":return{x:u+(t-i)/2+(n-s)/2*Math.sin(r),y:d+(s-n)/2*(Math.cos(r)-1)};case"south-side":return{x:u+(t-i)/2+(s-n)/2*Math.sin(r),y:d+(n-s)/2*(Math.cos(r)+1)}}},Z0=(e,t,n,i,s,r,o,{shouldInformMutation:a=!0,shouldMaintainAspectRatio:l=!1,shouldResizeFromCenter:c=!1}={})=>{let u={};const d=r.getNonDeletedElementsMap(),f=Oe(n,d);if(f){const U=s.get(f.id);if(U&&(u={fontSize:U.fontSize}),l){const y={...n,width:e},E=Iw(f,d,Zo(y,f));if(E===null)return;u={fontSize:E.size}}else{const y=YF(gt(f),f.lineHeight),E=WF(f.fontSize,f.lineHeight);e=Math.max(e,y),t=Math.max(t,E)}}const h=Sw(i,e,t,!0);let m=S(i.x,i.y);if(Ae(i)){const[U,y]=ro(i,s);m=S(U,y)}const p=ace(m,i.width,i.height,e,t,i.angle,o,l,c);if(Ae(i)&&h.points){const U=i.x-m[0],y=i.y-m[1];p.x+=U,p.y+=y;const E=h.points[0][0],v=h.points[0][1];p.x+=E,p.y+=v,h.points=h.points.map(w=>S(w[0]-E,w[1]-v))}if(e<0&&(p.x=p.x+e),t<0&&(p.y=p.y+t),"scale"in n&&"scale"in i&&r.mutateElement(n,{scale:[(Math.sign(e)||i.scale[0])*i.scale[0],(Math.sign(t)||i.scale[1])*i.scale[1]]}),xe(n)&&f&&l){const U=e/n.width*f.fontSize;if(U<L9)return;u.fontSize=U}if(e!==0&&t!==0&&Number.isFinite(p.x)&&Number.isFinite(p.y)){const U={...p,width:Math.abs(e),height:Math.abs(t),...h};r.mutateElement(n,U,{informMutation:a,isDragging:!1}),f&&u!=null&&r.mutateElement(f,{fontSize:u.fontSize}),ip(n,r,o,l),ys(n,r,{newSize:{width:e,height:t}})}},lce=(e,t,n,i,s,{shouldMaintainAspectRatio:r=!1,shouldResizeFromCenter:o=!1}={})=>{const[a,l,c,u]=fc(t,t.width,t.height,!0),d=S(a,l),f=S(c,u),h=G0(d,f),m=Z(S(i,s),h,-t.angle),[p,U,y,E]=fc(e,e.width,e.height,!0),v=y-p,w=E-U,I=f[0]-d[0],M=f[1]-d[1];let T=I/v,_=M/w;n.includes("e")&&(T=(m[0]-d[0])/v),n.includes("s")&&(_=(m[1]-d[1])/w),n.includes("w")&&(T=(f[0]-m[0])/v),n.includes("n")&&(_=(f[1]-m[1])/w);let x=e.width*T,C=e.height*_;if(o&&(x=2*x-t.width,C=2*C-t.height),r){const R=Math.abs(x)/t.width,N=Math.abs(C)/t.height;if(n.length===1&&(C*=R,x*=N),n.length===2){const D=Math.max(R,N);x=t.width*D*Math.sign(x),C=t.height*D*Math.sign(C)}}return{nextWidth:x,nextHeight:C}},cce=(e,t,n,i,s,r,{shouldMaintainAspectRatio:o=!1,shouldResizeFromCenter:a=!1}={})=>{const l=e.map(D=>t.get(D.id)),c=l.reduce((D,$)=>{if(!Ae($))return D;const G=Ko($);if(!G)return D;const H=t.get(G)??null;return Xt(H)?[...D,{...H,...le.getBoundTextElementPosition($,H,n)}]:D},[]),u=Er(l.map(D=>D).concat(c)),{minX:d,minY:f,maxX:h,maxY:m,midX:p,midY:U}=u,y=h-d,E=m-f,v={ne:[d,m],se:[d,f],sw:[h,f],nw:[h,m],e:[d,f+E/2],w:[h,f+E/2],n:[d+y/2,m],s:[d+y/2,f]},[w,I]=a?[p,U]:v[i],M=a?2:1,T=Math.max(Math.abs(s-w)/y||0,Math.abs(r-I)/E||0)*M;let _=i.includes("e")||i.includes("w")?Math.abs(s-w)*M:y,x=i.includes("n")||i.includes("s")?Math.abs(r-I)*M:E;o&&(_=y*T*Math.sign(s-w),x=E*T*Math.sign(r-I));const C={ne:[s<w,r>I],se:[s<w,r<I],sw:[s>w,r<I],nw:[s>w,r>I],e:[s<w,!1],w:[s>w,!1],n:[!1,r>I],s:[!1,r<I]},[R,N]=C[i].map(D=>D);return{originalBoundingBox:u,nextWidth:_,nextHeight:x,flipByX:R,flipByY:N}},qB=(e,t,n,i,s,{shouldMaintainAspectRatio:r=!1,shouldResizeFromCenter:o=!1,flipByX:a=!1,flipByY:l=!1,nextHeight:c,nextWidth:u,originalBoundingBox:d}={})=>{if(u===void 0&&c===void 0&&a===void 0&&l===void 0||c===0||u===0)return;s||(s=t);const f=e.reduce((M,T)=>{const _=s.get(T.id);return _&&M.push({orig:_,latest:T}),M},[]);let h;if(d)h=d;else{const M=f.reduce((T,{orig:_})=>{if(!Ae(_))return T;const x=Ko(_);if(!x)return T;const C=s.get(x)??null;return Xt(C)?[...T,{...C,...le.getBoundTextElementPosition(_,C,t)}]:T},[]);h=Er(f.map(({orig:T})=>T).concat(M))}const{minX:m,minY:p,maxX:U,maxY:y,midX:E,midY:v}=h,w=U-m,I=y-p;if(u===void 0&&c===void 0&&(u=w,c=I),r&&(u===void 0?u=c*(w/I):c===void 0?c=u*(I/w):Math.abs(u/c-w/I)>.001&&(u=c*(w/I))),u&&c){let M=n.includes("e")||n.includes("w")?Math.abs(u)/w:1,T=n.includes("n")||n.includes("s")?Math.abs(c)/I:1,_;n.length===1?_=n.includes("e")||n.includes("w")?M:T:_=Math.max(Math.abs(u)/w||0,Math.abs(c)/I||0);const x={ne:[m,y],se:[m,p],sw:[U,p],nw:[U,y],e:[m,p+I/2],w:[U,p+I/2],n:[m+w/2,y],s:[m+w/2,p]},[C,R]=o?[E,v]:x[n],N=r||f.some(V=>V.latest.angle!==0||ue(V.latest)||kh(V.latest));N&&(M=_,T=_);const[D,$]=[a?-1:1,l?-1:1],G=[];for(const{orig:V,latest:X}of f){if(ue(V)&&Xt(V))continue;const j=V.width*M,q=V.height*T,fe=bb(V.angle*D*$),ie=Ae(V)||io(V),Ue=V.x-C,Ve=V.y-R,$e=a&&!ie?j:0,nt=l&&!ie?q:0,zt=C+D*(Ue*M+$e),Mt=R+$*(Ve*T+nt),qt=Sw(V,j*D,q*$,!1),Ce={x:zt,y:Mt,width:j,height:q,angle:fe,...qt};if(he(V)&&(V.startBinding&&(Ce.startBinding={...V.startBinding,fixedPoint:[a?-V.startBinding.fixedPoint[0]+1:V.startBinding.fixedPoint[0],l?-V.startBinding.fixedPoint[1]+1:V.startBinding.fixedPoint[1]]}),V.endBinding&&(Ce.endBinding={...V.endBinding,fixedPoint:[a?-V.endBinding.fixedPoint[0]+1:V.endBinding.fixedPoint[0],l?-V.endBinding.fixedPoint[1]+1:V.endBinding.fixedPoint[1]]}),V.fixedSegments&&qt.points&&(Ce.fixedSegments=V.fixedSegments.map(Qt=>({...Qt,start:qt.points[Qt.index-1],end:qt.points[Qt.index]})))),ft(V)&&(Ce.scale=[V.scale[0]*D,V.scale[1]*$]),ue(V)){const Qt=Iw(V,t,j);if(!Qt)return;Ce.fontSize=Qt.size}const Ge=s.get(Ko(V)??"");if(Ge)if(N){const Qt=Ge.fontSize*_;if(Qt<L9)return;Ce.boundTextFontSize=Qt}else Ce.boundTextFontSize=Ge.fontSize;G.push({element:X,update:Ce})}const H=G.map(({element:V})=>V);for(const{element:V,update:{boundTextFontSize:X,...j}}of G){const{width:q,height:fe,angle:ie}=j;i.mutateElement(V,j,{informMutation:!0,isDragging:!0}),ys(V,i,{simultaneouslyUpdated:H,newSize:{width:q,height:fe}});const Ue=Oe(V,t);Ue&&X&&(i.mutateElement(Ue,{fontSize:X,angle:Ae(V)?void 0:ie}),ip(V,i,n,!0))}i.triggerUpdate()}},pA={mouse:8,pen:16,touch:28},uce=16,QB={e:!0,s:!0,n:!0,w:!0},UA={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},J8={e:!0,s:!0,n:!0,w:!0},ma=(e,t,n,i,s,r,o)=>{const[a,l]=Z(S(e+n/2,t+i/2),S(s,r),o);return[a-n/2,l-i/2,n,i]},xw=e=>!(e.viewport.isMobile||e.isTouchScreen&&(Uie||ZP)),c0=e=>xw(e)?QB:{},Cw=([e,t,n,i,s,r],o,a,l,c={},u=4,d=ld)=>{const f=pA[l],h=f/a.value,m=f/a.value,p=f/a.value,U=f/a.value,y=n-e,E=i-t,v=u/a.value,w=(f-d*2)/(2*a.value),I={nw:c.nw?void 0:ma(e-v-p+w,t-v-U+w,h,m,s,r,o),ne:c.ne?void 0:ma(n+v-w,t-v-U+w,h,m,s,r,o),sw:c.sw?void 0:ma(e-v-p+w,i+v-w,h,m,s,r,o),se:c.se?void 0:ma(n+v-w,i+v-w,h,m,s,r,o),rotation:c.rotation?void 0:ma(e+y/2-h/2,t-v-U+w-uce/a.value,h,m,s,r,o)},M=5*pA.mouse/a.value;return Math.abs(y)>M&&(c.n||(I.n=ma(e+y/2-h/2,t-v-U+w,h,m,s,r,o)),c.s||(I.s=ma(e+y/2-h/2,i+v-w,h,m,s,r,o))),Math.abs(E)>M&&(c.w||(I.w=ma(e-v-p+w,t+E/2-m/2,h,m,s,r,o)),c.e||(I.e=ma(n+v-w,t+E/2-m/2,h,m,s,r,o))),I},JB=(e,t,n,i="mouse",s=QB)=>{if(e.locked||he(e))return{};if(e.type==="freedraw"||Ae(e)){if(e.points.length===2){const[,o]=e.points;o[0]===0||o[1]===0?s=J8:o[0]>0&&o[1]<0?s=UA:o[0]>0&&o[1]>0?s=J8:o[0]<0&&o[1]>0?s=UA:o[0]<0&&o[1]<0&&(s=J8)}}else Te(e)&&(s={...s,rotation:!0});const r=Ae(e)?ld+8:ft(e)?0:ld;return Cw(Ne(e,n,!0),e.angle,t,i,s,r,ft(e)?0:void 0)},ez=(e,t)=>{if(t.editingLinearElement)return!1;if(e.length>1)return!0;const n=e[0];return he(n)?!1:Ae(n)?n.points.length>2:!0},J3=(e,t,n)=>t>=e[0]&&t<=e[0]+e[2]&&n>=e[1]&&n<=e[1]+e[3],dce=(e,t,n,i,s,r,o,a)=>{if(!n.selectedElementIds[e.id])return!1;const{rotation:l,...c}=JB(e,r,t,o,c0(a));if(l&&J3(l,i,s))return"rotation";const u=Object.keys(c).filter(d=>{const f=c[d];return f?J3(f,i,s):!1});if(u.length>0)return u[0];if(xw(a)){const[d,f,h,m,p,U]=Ne(e,t);if(!(Ae(e)&&e.points.length<=2)){const y=ft(e)?0:gb/r.value,E=gb/r.value,v=tz(S(d-y,f-y),S(h+y,m+y),S(p,U),e.angle);for(const[w,I]of Object.entries(v))if(cd(S(i,s),I,E))return w}}return!1},bA=(e,t,n,i,s,r,o,a)=>e.reduce((l,c)=>{if(l)return l;const u=dce(c,o,t,n,i,s,r,a);return u?{element:c,transformHandleType:u}:null},null),yA=([e,t,n,i],s,r,o,a,l)=>{const c=Cw([e,t,n,i,(e+n)/2,(t+i)/2],0,o,a,c0(l)),u=Object.keys(c).find(d=>{const f=c[d];return f&&J3(f,s,r)});if(u)return u;if(xw(l)){const d=(e+n)/2,f=(t+i)/2,h=gb/o.value,m=tz(S(e-h,t-h),S(n+h,i+h),S(d,f),0);for(const[p,U]of Object.entries(m))if(cd(S(s,r),U,h))return p}return!1},eE=["ns","nesw","ew","nwse"],fce=(e,t)=>{const n=eE.indexOf(e);if(n>=0){const i=Math.round(t/(Math.PI/4));e=eE[(n+i)%eE.length]}return e},EA=e=>{const{element:t,transformHandleType:n}=e,i=t&&Math.sign(t.height)*Math.sign(t.width)===-1;let s=null;switch(n){case"n":case"s":s="ns";break;case"w":case"e":s="ew";break;case"nw":case"se":i?s="nesw":s="nwse";break;case"ne":case"sw":i?s="nwse":s="nesw";break;case"rotation":return"grab"}return s&&t&&(s=fce(s,t.angle)),s?`${s}-resize`:""},tz=([e,t],[n,i],s,r)=>{const o=Z(S(e,t),s,r),a=Z(S(n,t),s,r),l=Z(S(e,i),s,r),c=Z(S(n,i),s,r);return{n:[o,a],e:[a,c],s:[c,l],w:[l,o]}},Aw=(e,t)=>{var n;return!!(!e.viewModeEnabled&&((n=e.openDialog)==null?void 0:n.name)!=="elementLinkSelector"&&(e.activeTool.type!=="custom"&&(e.editingTextElement||e.activeTool.type!=="selection"&&e.activeTool.type!=="lasso"&&e.activeTool.type!=="eraser"&&e.activeTool.type!=="hand"&&e.activeTool.type!=="laser")||He(t,e).length))},e4=(e,t)=>e.frameId===t||e.id===t,nz=(e,t,n)=>{let i=[],s=[],r=null,o=-1;const a=_e(n||He(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0}));for(;++o<e.length;){const l=e[o];a.get(l.id)?(s.length&&(i=i.concat(s),s=[]),i.push(o),r=o+1):l.isDeleted&&r===o?(r=o+1,s.push(o)):s=[]}return i},hce=e=>{let t=0;return e.reduce((n,i,s)=>(s>0&&e[s-1]!==i-1&&(t=++t),(n[t]||(n[t]=[])).push(i),n),[])},vA=(e,t,n,i)=>{var s,r;if("containerId"in e&&e.containerId){const o=i.getElement(e.containerId);if(o)return n==="left"?Math.min(t.indexOf(o),t.indexOf(e)):Math.max(t.indexOf(o),t.indexOf(e))}else{const o=(r=(s=e.boundElements)==null?void 0:s.find(a=>a.type!=="arrow"))==null?void 0:r.id;if(o){const a=i.getElement(o);if(a)return n==="left"?Math.min(t.indexOf(a),t.indexOf(e)):Math.max(t.indexOf(a),t.indexOf(e))}}},gce=(e,t)=>{let n=-1,i=-1;return e.forEach((s,r)=>{e4(s,t)&&(n===-1&&(n=r),i=r)}),n===-1?[]:e.slice(n,i+1)},mce=(e,t,n,i,s,r)=>{const o=t[n],a=f=>f.isDeleted?!1:s?f.frameId===s:e.editingGroupId?f.groupIds.includes(e.editingGroupId):!0,l=i==="left"?vu(t,f=>a(f),Math.max(0,n-1)):pF(t,f=>a(f),n+1),c=t[l];if(!c)return-1;if(e.editingGroupId){if((o==null?void 0:o.groupIds.join(""))===(c==null?void 0:c.groupIds.join("")))return vA(c,t,i,r)??l;if(!(c!=null&&c.groupIds.includes(e.editingGroupId)))return-1}if(!s&&(c.frameId||Te(c))){const f=gce(t,c.frameId||c.id);return i==="left"?t.indexOf(f[0]):t.indexOf(f[f.length-1])}if(!c.groupIds.length)return vA(c,t,i,r)??l;const u=e.editingGroupId?c.groupIds[c.groupIds.indexOf(e.editingGroupId)-1]:c.groupIds[c.groupIds.length-1],d=$t(t,u);return d.length?i==="left"?t.indexOf(d[0]):t.indexOf(d[d.length-1]):l},iz=(e,t)=>t.reduce((n,i)=>{const s=e[i];return n.set(s.id,s),n},new Map),sz=(e,t,n,i)=>{const s=nz(e,t),r=iz(e,s);let o=hce(s);n==="right"&&(o=o.reverse());const a=new Set(s.filter(l=>Te(e[l])).map(l=>e[l].id));return o.forEach((l,c)=>{var v;const u=l[0],d=l[l.length-1],f=n==="left"?u:d,h=l.some(w=>{const I=e[w];return I.frameId&&a.has(I.frameId)})?null:(v=e[f])==null?void 0:v.frameId,m=mce(t,e,f,n,h,i);if(m===-1||f===m)return;const p=n==="left"?e.slice(0,m):e.slice(0,u),U=e.slice(u,d+1),y=n==="left"?e.slice(m,u):e.slice(d+1,m+1),E=n==="left"?e.slice(d+1):e.slice(m+1);e=n==="left"?[...p,...U,...y,...E]:[...p,...y,...U,...E]}),oo(e,r),e},rz=(e,t,n,i,s)=>{const r=nz(e,t,s),o=iz(e,r),a=[];let l,c;if(n==="left"){if(i)l=pF(e,m=>e4(m,i));else if(t.editingGroupId){const m=$t(e,t.editingGroupId);if(!m.length)return e;l=e.indexOf(m[0])}else l=0;c=r[r.length-1]}else{if(i)c=vu(e,m=>e4(m,i));else if(t.editingGroupId){const m=$t(e,t.editingGroupId);if(!m.length)return e;c=e.indexOf(m[m.length-1])}else c=e.length-1;l=r[0]}l===-1&&(l=0);for(let m=l;m<c+1;m++)r.includes(m)||a.push(e[m]);const u=Array.from(o.values()),d=e.slice(0,l),f=e.slice(c+1),h=n==="left"?[...d,...u,...a,...f]:[...d,...a,...u,...f];return oo(h,o),h};function oz(e,t,n,i){const s=_e(He(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),r={regularElements:[],frameChildren:new Map},o=new Set;for(const c of e)s.has(c.id)&&Te(c)&&o.add(c.id);for(const c of e)if(s.has(c.id))if(Te(c)||c.frameId&&o.has(c.frameId))r.regularElements.push(c);else if(!c.frameId)r.regularElements.push(c);else{const u=r.frameChildren.get(c.frameId)||[];u.push(c),r.frameChildren.set(c.frameId,u)}let a=e;const l=Array.from(r.frameChildren.entries());for(const[c,u]of l)a=i(e,t,n,c,u);return i(a,t,n,null,r.regularElements)}const pce=(e,t,n)=>sz(e,t,"left",n),Uce=(e,t,n)=>sz(e,t,"right",n),bce=(e,t)=>oz(e,t,"left",rz),yce=(e,t)=>oz(e,t,"right",rz),jl=e=>e.reduce((t,n)=>t+n.version,0),az=e=>{let t=5381;for(const n of Fl(e))t=(t<<5)+t+n.versionNonce;return t>>>0},Mw=e=>{let t=5381;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);t=(t<<5)+t+i}return t>>>0},Ece=e=>e.filter(t=>!t.isDeleted&&!gd(t)),Bt=e=>e.filter(t=>!t.isDeleted),t4=e=>!e.isDeleted,Rw=e=>Bt(e).map(t=>K9(t.type)?{...t,lastCommittedPoint:null}:t),vce=e=>Rw(e),lz=e=>Rw(e),cz=e=>Rw(e),uz=e=>{const{angle:t,width:n,height:i,x:s,y:r}=e,o=s+n/2,a=r+i/2,l=S(o,a);let c;return e.type==="diamond"?c=aC(Z(S(o,r),l,t),Z(S(s+n,a),l,t),Z(S(o,r+i),l,t),Z(S(s,a),l,t)):c=aC(Z(S(s,r),l,t),Z(S(s+n,r),l,t),Z(S(s+n,r+i),l,t),Z(S(s,r+i),l,t)),{type:"polygon",data:c}},wce=(e,t,n=10)=>{let[i,s,r,o,a,l]=Ne(e,t,!0);i-=n,r+=n,s-=n,o+=n;const c=S(a,l),u=Z(S(i,s),c,e.angle),d=Z(S(r,s),c,e.angle),f=Z(S(i,o),c,e.angle),h=Z(S(r,o),c,e.angle);return{type:"polygon",data:[u,d,h,f]}},_ce=e=>{const{width:t,height:n,angle:i,x:s,y:r}=e;return{type:"ellipse",data:{center:S(s+t/2,r+n/2),angle:i,halfWidth:t/2,halfHeight:n/2}}},Qc=e=>{if(!e)return[];for(const t of e.sets)if(t.type==="path")return t.ops;return e.sets[0].ops},Tce=(e,t=S(0,0),n,i)=>{const s=l=>Z(S(l[0]+t[0],l[1]+t[1]),i,n),r=Qc(e),o=[];let a=S(0,0);for(const l of r){if(l.op==="move"){const c=H9(l.data);ti(c!=null,"Ops data is not a point"),a=s(c)}if(l.op==="bcurveTo"){const c=s(S(l.data[0],l.data[1])),u=s(S(l.data[2],l.data[3])),d=s(S(l.data[4],l.data[5]));o.push(Lo(a,c,u,d)),a=d}}return{type:"polycurve",data:o}},Sce=e=>{let t=e[0];const n=[];for(let i=1;i<e.length;i++){const s=e[i];n.push(we(t,s)),t=s}return n},Ice=(e,t,n=!1)=>{const i=r=>Z(Re(ql(re(r),On(e.x,e.y))),t,e.angle),s=Sce(e.points.map(r=>i(r)));return n?{type:"polygon",data:X0(s.flat())}:{type:"polyline",data:s}},xce=(e,t,n=S(0,0),i,s)=>{const r=u=>Z(S(u[0]+n[0],u[1]+n[1]),s,i);if(e.roundness===null)return{type:"polygon",data:X0(e.points.map(u=>r(u)))};const o=Qc(t),a=[];let l=!1;for(const u of o)u.op==="move"?(l=!l,l&&a.push(S(u.data[0],u.data[1]))):u.op==="bcurveTo"?l&&(a.push(S(u.data[0],u.data[1])),a.push(S(u.data[2],u.data[3])),a.push(S(u.data[4],u.data[5]))):u.op==="lineTo"&&l&&a.push(S(u.data[0],u.data[1]));const c=ep(a,10,5).map(u=>r(u));return{type:"polygon",data:X0(c)}},Cce=(e,t)=>{const{angle:n,halfWidth:i,halfHeight:s,center:r}=t,o=i,a=s,l=ql(re(e),At(re(r),-1)),[c,u]=Z(Re(l),S(0,0),-n),d=Math.abs(c),f=Math.abs(u);let h=.707,m=.707;for(let y=0;y<3;y++){const E=o*h,v=a*m,w=(o*o-a*a)*h**3/o,I=(a*a-o*o)*m**3/a,M=E-w,T=v-I,_=d-w,x=f-I,C=Math.hypot(T,M),R=Math.hypot(x,_);h=Math.min(1,Math.max(0,(_*C/R+w)/o)),m=Math.min(1,Math.max(0,(x*C/R+I)/a));const N=Math.hypot(m,h);h/=N,m/=N}const[p,U]=[o*h*Math.sign(c),a*m*Math.sign(u)];return Je(S(c,u),S(p,U))},Ace=(e,t,n=kc)=>Cce(e,t)<=n,Mce=(e,t)=>{const{center:n,angle:i,halfWidth:s,halfHeight:r}=t,o=ql(re(e),At(re(n),-1)),[a,l]=Z(Re(o),S(0,0),-i);return a/s*(a/s)+l/r*(l/r)<=1},n4=(e,t,n=0)=>{switch(t.type){case"polygon":return use(e,t.data,n);case"ellipse":return Ace(e,t.data,n);case"line":return cd(e,t.data,n);case"polyline":return fz(e,t.data,n);case"curve":return dz(e,t.data,n);case"polycurve":return Rce(e,t.data,n);default:throw Error(`shape ${t} is not implemented`)}},q0=(e,t)=>{switch(t.type){case"polygon":return lC(e,t.data);case"line":return!1;case"curve":return!1;case"ellipse":return Mce(e,t.data);case"polyline":{const n=X0(t.data.flat());return lC(e,n)}case"polycurve":return!1;default:throw Error(`shape ${t} is not implemented`)}},Rce=(e,t,n)=>t.some(i=>dz(e,i,n)),kce=e=>{const[t,n,i,s]=e;return(r,o)=>Math.pow(1-r,3)*s[o]+3*r*Math.pow(1-r,2)*i[o]+3*Math.pow(r,2)*(1-r)*n[o]+t[o]*Math.pow(r,3)},Dce=(e,t=10)=>{const n=kce(e);let i=[n(0,0),n(0,1)];const s=[];let r=0;const o=1/t;for(let a=0;a<t;a++)if(r+=o,r<=1){const l=S(n(r,0),n(r,1));s.push(we(i,l)),i=l}return s},dz=(e,t,n)=>fz(e,Dce(t),n),fz=(e,t,n=1e-4)=>t.some(i=>cd(e,i,n)),Lce=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((i,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t)))})};var il={};let Nce=0;function Zt(e,t){const n=`atom${++Nce}`,i={toString(){return(il?"development":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?i.read=e:(i.init=e,i.read=Oce,i.write=Pce),i}function Oce(e){return e(this)}function Pce(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const wA=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,i4=e=>"init"in e,tE=e=>!!e.write,jb=new WeakMap,s4=e=>{var t;return r4(e)&&!((t=jb.get(e))!=null&&t[1])},Fce=(e,t)=>{const n=jb.get(e);if(n)n[1]=!0,n[0].forEach(i=>i(t));else if((il?"development":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},Bce=e=>{if(jb.has(e))return;const t=[new Set,!1];jb.set(e,t);const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=i=>{t[0].add(i)}},r4=e=>typeof(e==null?void 0:e.then)=="function",_A=e=>"v"in e||"e"in e,mU=e=>{if("e"in e)throw e.e;if((il?"development":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},hz=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},TA=(e,t,n,i,s)=>{var r;if((il?"development":void 0)!=="production"&&i===t)throw new Error("[Bug] atom cannot depend on itself");n.d.set(i,s.n),s4(n.v)&&hz(t,n.v,s),(r=s.m)==null||r.t.add(t),e&&zce(e,i,t)},e1=()=>({D:new Map,H:new Set,M:new Set,L:new Set}),u0=(e,t,n)=>{e[t].add(n)},SA=(e,t,n)=>{e.D.has(t)||(e.D.set(t,new Set),u0(e,"M",()=>{var i;(i=n.m)==null||i.l.forEach(s=>u0(e,"M",s))}))},zce=(e,t,n)=>{const i=e.D.get(t);i&&i.add(n)},Hce=(e,t)=>e.D.get(t),lu=e=>{let t,n=!1;const i=s=>{try{s()}catch(r){n||(t=r,n=!0)}};for(;e.H.size||e.M.size||e.L.size;)e.D.clear(),e.H.forEach(i),e.H.clear(),e.M.forEach(i),e.M.clear(),e.L.forEach(i),e.L.clear();if(n)throw t},gz=(...[e,t,n,i])=>{const s=(y,E,v)=>{const w="v"in E,I=E.v,M=s4(E.v)?E.v:null;if(r4(v)){Bce(v);for(const T of E.d.keys())hz(y,v,e(T));E.v=v}else E.v=v;delete E.e,delete E.x,(!w||!Object.is(I,E.v))&&(++E.n,M&&Fce(M,v))},r=(y,E)=>{var v;const w=e(E);if(_A(w)&&(w.m&&!w.x||Array.from(w.d).every(([C,R])=>r(y,C).n===R)))return w;w.d.clear();let I=!0;const M=C=>{if(wA(E,C)){const N=e(C);if(!_A(N))if(i4(C))s(C,N,C.init);else throw new Error("no atom init");return mU(N)}const R=r(y,C);try{return mU(R)}finally{if(I)TA(y,E,w,C,R);else{const N=e1();TA(N,E,w,C,R),d(N,E,w),lu(N)}}};let T,_;const x={get signal(){return T||(T=new AbortController),T.signal},get setSelf(){return(il?"development":void 0)!=="production"&&!tE(E)&&console.warn("setSelf function cannot be used with read-only atom"),!_&&tE(E)&&(_=(...C)=>{if((il?"development":void 0)!=="production"&&I&&console.warn("setSelf function cannot be called in sync"),!I)return u(E,...C)}),_}};try{const C=t(E,M,x);if(s(E,w,C),r4(C)){(v=C.onCancel)==null||v.call(C,()=>T==null?void 0:T.abort());const R=()=>{if(w.m){const N=e1();d(N,E,w),lu(N)}};C.then(R,R)}return w}catch(C){return delete w.v,w.e=C,delete w.x,++w.n,w}finally{I=!1}},o=y=>mU(r(void 0,y)),a=(y,E,v)=>{var w,I;const M=new Map;for(const T of((w=v.m)==null?void 0:w.t)||[]){const _=e(T);_.m&&M.set(T,_)}for(const T of v.p)M.set(T,e(T));return(I=Hce(y,E))==null||I.forEach(T=>{M.set(T,e(T))}),M},l=(y,E,v)=>{const w=[],I=new Set,M=new Set,T=[[E,v]];for(;T.length>0;){const[_,x]=T[T.length-1];if(M.has(_)){T.pop();continue}if(I.has(_)){w.push([_,x,x.n]),M.add(_),x.x=!0,T.pop();continue}I.add(_);for(const[C,R]of a(y,_,x))_!==C&&!I.has(C)&&T.push([C,R])}u0(y,"H",()=>{const _=new Set([E]);for(let x=w.length-1;x>=0;--x){const[C,R,N]=w[x];let D=!1;for(const $ of R.d.keys())if($!==C&&_.has($)){D=!0;break}D&&(r(y,C),d(y,C,R),N!==R.n&&(SA(y,C,R),_.add(C))),delete R.x}})},c=(y,E,...v)=>{let w=!0;const I=T=>mU(r(y,T)),M=(T,..._)=>{const x=e(T);try{if(wA(E,T)){if(!i4(T))throw new Error("atom not writable");const C=x.n,R=_[0];s(T,x,R),d(y,T,x),C!==x.n&&(SA(y,T,x),l(y,T,x));return}else return c(y,T,..._)}finally{w||lu(y)}};try{return n(E,I,M,...v)}finally{w=!1}},u=(y,...E)=>{const v=e1();try{return c(v,y,...E)}finally{lu(v)}},d=(y,E,v)=>{if(v.m&&!s4(v.v)){for(const w of v.d.keys())v.m.d.has(w)||(f(y,w,e(w)).t.add(E),v.m.d.add(w));for(const w of v.m.d||[])if(!v.d.has(w)){v.m.d.delete(w);const I=h(y,w,e(w));I==null||I.t.delete(E)}}},f=(y,E,v)=>{if(!v.m){r(y,E);for(const w of v.d.keys())f(y,w,e(w)).t.add(E);if(v.m={l:new Set,d:new Set(v.d.keys()),t:new Set},tE(E)){const w=v.m;let I;const M=(T,_)=>{let x=!0;I=(...C)=>{try{return c(T,E,...C)}finally{x||lu(T)}};try{return _()}finally{x=!1}};u0(y,"L",()=>{const T=M(y,()=>i(E,(..._)=>I(..._)));T&&(w.u=_=>M(_,T))})}}return v.m},h=(y,E,v)=>{if(v.m&&!v.m.l.size&&!Array.from(v.m.t).some(w=>{var I;return(I=e(w).m)==null?void 0:I.d.has(E)})){const w=v.m.u;w&&u0(y,"L",()=>w(y)),delete v.m;for(const I of v.d.keys()){const M=h(y,I,e(I));M==null||M.t.delete(E)}return}return v.m};return{get:o,set:u,sub:(y,E)=>{const v=e1(),w=e(y),M=f(v,y,w).l;return M.add(E),lu(v),()=>{M.delete(E);const T=e1();h(T,y,w),lu(T)}},unstable_derive:y=>gz(...y(e,t,n,i))}},Vce=e=>{const t=new WeakMap,n=new Set;let i,s=0;const r=e.unstable_derive((l,c,u,d)=>(i=l,[f=>{let h=t.get(f);if(!h){const m=l(f);h=new Proxy(m,{set(p,U,y){return U==="m"&&n.add(f),Reflect.set(p,U,y)},deleteProperty(p,U){return U==="m"&&n.delete(f),Reflect.deleteProperty(p,U)}}),t.set(f,h)}return h},c,(f,h,m,...p)=>s?m(f,...p):u(f,h,m,...p),d])),o=r.set;return Object.assign(r,{dev4_get_internal_weak_map:()=>({get:l=>{const c=i(l);if(c.n!==0)return c}}),dev4_get_mounted_atoms:()=>n,dev4_restore_atoms:l=>{o({read:()=>null,write:(u,d)=>{++s;try{for(const[f,h]of l)i4(f)&&d(f,h)}finally{--s}}})}})},op=()=>{const e=new WeakMap,n=gz(i=>{if((il?"development":void 0)!=="production"&&!i)throw new Error("Atom is undefined or null");let s=e.get(i);return s||(s={d:new Map,p:new Set,n:0},e.set(i,s)),s},(i,...s)=>i.read(...s),(i,...s)=>i.write(...s),(i,...s)=>{var r;return(r=i.onMount)==null?void 0:r.call(i,...s)});return(il?"development":void 0)!=="production"?Vce(n):n};let t1;const $ce=()=>(t1||(t1=op(),(il?"development":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=t1),globalThis.__JOTAI_DEFAULT_STORE__!==t1&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),t1);var mz={};const pz=L.createContext(void 0),S5=e=>{const t=L.useContext(pz);return(e==null?void 0:e.store)||t||$ce()},Gce=({children:e,store:t})=>{const n=L.useRef(void 0);return!t&&!n.current&&(n.current=op()),L.createElement(pz.Provider,{value:t||n.current},e)},o4=e=>typeof(e==null?void 0:e.then)=="function",Uz=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},Xce=ae.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(Uz(e),e)}),nE=new WeakMap,IA=e=>{let t=nE.get(e);return t||(t=new Promise((n,i)=>{let s=e;const r=l=>c=>{s===l&&n(c)},o=l=>c=>{s===l&&i(c)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(c=>{if((mz?"development":void 0)!=="production"&&c===l)throw new Error("[Bug] p is not updated even after cancelation");o4(c)?(nE.set(c,t),s=c,c.then(r(c),o(c)),a(c)):n(c)})};e.then(r(e),o(e)),a(e)}),nE.set(e,t)),t};function Q0(e,t){const n=S5(t),[[i,s,r],o]=L.useReducer(c=>{const u=n.get(e);return Object.is(c[0],u)&&c[1]===n&&c[2]===e?c:[u,n,e]},void 0,()=>[n.get(e),n,e]);let a=i;(s!==n||r!==e)&&(o(),a=n.get(e));const l=t==null?void 0:t.delay;if(L.useEffect(()=>{const c=n.sub(e,()=>{if(typeof l=="number"){const u=n.get(e);o4(u)&&Uz(IA(u)),setTimeout(o,l);return}o()});return o(),c},[n,e,l]),L.useDebugValue(a),o4(a)){const c=IA(a);return Xce(c)}return a}function kw(e,t){const n=S5(t);return L.useCallback((...s)=>{if((mz?"development":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...s)},[n,e])}function Ph(e,t){return[Q0(e,t),kw(e,t)]}const xA=new WeakMap;function jce(e,t){const n=S5(t),i=Yce(n);for(const[s,r]of e)(!i.has(s)||t!=null&&t.dangerouslyForceHydrate)&&(i.add(s),n.set(s,r))}const Yce=e=>{let t=xA.get(e);return t||(t=new WeakSet,xA.set(e,t)),t};function Hf(){return Hf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Hf.apply(this,arguments)}function bz(){const e=L.createContext(null);function t({store:o,initialValues:a=[],children:l}){const c=L.useRef(o);return c.current||(c.current=op()),jce(a,{store:c.current}),g(e.Provider,{value:c.current,children:l})}const n=o=>{const a=L.useContext(e);if(!a)throw new Error("Missing Provider from createIsolation");return S5(Hf({store:a},o))};return{Provider:t,useStore:n,useAtom:(o,a)=>{const l=n();return Ph(o,Hf({store:l},a))},useAtomValue:(o,a)=>{const l=n();return Q0(o,Hf({store:l},a))},useSetAtom:(o,a)=>{const l=n();return kw(o,Hf({store:l},a))}}}const{read:Axe,write:Mxe}=Zt(null);L.createContext({scope:void 0,baseStore:void 0});const yz=bz(),{useAtom:pn,useSetAtom:I5,useAtomValue:Ez,useStore:Rxe}=yz,Wce=yz.Provider,Ns=op(),vz={paste:"Paste",pasteAsPlaintext:"Paste as plaintext",pasteCharts:"Paste charts",selectAll:"Select all",multiSelect:"Add element to selection",moveCanvas:"Move canvas",cut:"Cut",copy:"Copy",copyAsPng:"Copy to clipboard as PNG",copyAsSvg:"Copy to clipboard as SVG",copyText:"Copy to clipboard as text",copySource:"Copy source to clipboard",convertToCode:"Convert to code",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",sendBackward:"Send backward",delete:"Delete",copyStyles:"Copy styles",pasteStyles:"Paste styles",stroke:"Stroke",changeStroke:"Change stroke color",background:"Background",changeBackground:"Change background color",fill:"Fill",strokeWidth:"Stroke width",strokeStyle:"Stroke style",strokeStyle_solid:"Solid",strokeStyle_dashed:"Dashed",strokeStyle_dotted:"Dotted",sloppiness:"Sloppiness",opacity:"Opacity",textAlign:"Text align",edges:"Edges",sharp:"Sharp",round:"Round",arrowheads:"Arrowheads",arrowhead_none:"None",arrowhead_arrow:"Arrow",arrowhead_bar:"Bar",arrowhead_circle:"Circle",arrowhead_circle_outline:"Circle (outline)",arrowhead_triangle:"Triangle",arrowhead_triangle_outline:"Triangle (outline)",arrowhead_diamond:"Diamond",arrowhead_diamond_outline:"Diamond (outline)",arrowhead_crowfoot_many:"Crow's foot (many)",arrowhead_crowfoot_one:"Crow's foot (one)",arrowhead_crowfoot_one_or_many:"Crow's foot (one or many)",more_options:"More options",arrowtypes:"Arrow type",arrowtype_sharp:"Sharp arrow",arrowtype_round:"Curved arrow",arrowtype_elbowed:"Elbow arrow",fontSize:"Font size",fontFamily:"Font family",addWatermark:'Add "Made with Excalidraw"',handDrawn:"Hand-drawn",normal:"Normal",code:"Code",small:"Small",medium:"Medium",large:"Large",veryLarge:"Very large",solid:"Solid",hachure:"Hachure",zigzag:"Zigzag",crossHatch:"Cross-hatch",thin:"Thin",bold:"Bold",left:"Left",center:"Center",right:"Right",extraBold:"Extra bold",architect:"Architect",artist:"Artist",cartoonist:"Cartoonist",fileTitle:"File name",colorPicker:"Color picker",canvasColors:"Used on canvas",canvasBackground:"Canvas background",drawingCanvas:"Drawing canvas",clearCanvas:"Clear canvas",layers:"Layers",actions:"Actions",language:"Language",liveCollaboration:"Live collaboration...",duplicateSelection:"Duplicate",untitled:"Untitled",name:"Name",yourName:"Your name",madeWithExcalidraw:"Made with Excalidraw",group:"Group selection",ungroup:"Ungroup selection",collaborators:"Collaborators",toggleGrid:"Toggle grid",addToLibrary:"Add to library",removeFromLibrary:"Remove from library",libraryLoadingMessage:"Loading library…",libraries:"Browse libraries",loadingScene:"Loading scene…",loadScene:"Load scene from file",align:"Align",alignTop:"Align top",alignBottom:"Align bottom",alignLeft:"Align left",alignRight:"Align right",centerVertically:"Center vertically",centerHorizontally:"Center horizontally",distributeHorizontally:"Distribute horizontally",distributeVertically:"Distribute vertically",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",viewMode:"View mode",share:"Share",showStroke:"Show stroke color picker",showBackground:"Show background color picker",showFonts:"Show font picker",toggleTheme:"Toggle light/dark theme",theme:"Theme",personalLib:"Personal Library",excalidrawLib:"Excalidraw Library",decreaseFontSize:"Decrease font size",increaseFontSize:"Increase font size",unbindText:"Unbind text",bindText:"Bind text to the container",createContainerFromText:"Wrap text in a container",link:{edit:"Edit link",editEmbed:"Edit embeddable link",create:"Add link",label:"Link",labelEmbed:"Link & embed",empty:"No link is set",hint:"Type or paste your link here",goToElement:"Go to target element"},lineEditor:{edit:"Edit line",editArrow:"Edit arrow"},elementLock:{lock:"Lock",unlock:"Unlock",lockAll:"Lock all",unlockAll:"Unlock all"},statusPublished:"Published",sidebarLock:"Keep sidebar open",selectAllElementsInFrame:"Select all elements in frame",removeAllElementsFromFrame:"Remove all elements from frame",eyeDropper:"Pick color from canvas",textToDiagram:"Text to diagram",prompt:"Prompt",followUs:"Follow us",discordChat:"Discord chat",zoomToFitViewport:"Zoom to fit in viewport",zoomToFitSelection:"Zoom to fit selection",zoomToFit:"Zoom to fit all elements",installPWA:"Install Excalidraw locally (PWA)",autoResize:"Enable text auto-resizing",imageCropping:"Image cropping",unCroppedDimension:"Uncropped dimension",copyElementLink:"Copy link to object",linkToElement:"Link to object",wrapSelectionInFrame:"Wrap selection in frame",tab:"Tab",shapeSwitch:"Switch shape"},wz={title:"Link to object",desc:"Click on a shape on canvas or paste a link.",notFound:"Linked object wasn't found on canvas."},_z={noItems:"No items added yet...",hint_emptyLibrary:"Select an item on canvas to add it here, or install a library from the public repository, below.",hint_emptyPrivateLibrary:"Select an item on canvas to add it here."},Tz={title:"Find on canvas",noMatch:"No matches found...",singleResult:"result",multipleResults:"results",placeholder:"Find text on canvas...",frames:"Frames",texts:"Texts"},Sz={clearReset:"Reset the canvas",exportJSON:"Export to file",exportImage:"Export image...",export:"Save to...",copyToClipboard:"Copy to clipboard",copyLink:"Copy link",save:"Save to current file",saveAs:"Save as",load:"Open",getShareableLink:"Get shareable link",close:"Close",selectLanguage:"Select language",scrollBackToContent:"Scroll back to content",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",menu:"Menu",done:"Done",edit:"Edit",undo:"Undo",redo:"Redo",resetLibrary:"Reset library",createNewRoom:"Create new room",fullScreen:"Full screen",darkMode:"Dark mode",lightMode:"Light mode",systemMode:"System mode",zenMode:"Zen mode",objectsSnapMode:"Snap to objects",exitZenMode:"Exit zen mode",cancel:"Cancel",clear:"Clear",remove:"Remove",embed:"Toggle embedding",publishLibrary:"Publish",submit:"Submit",confirm:"Confirm",embeddableInteractionButton:"Click to interact"},Iz={clearReset:"This will clear the whole canvas. Are you sure?",couldNotCreateShareableLink:"Couldn't create shareable link.",couldNotCreateShareableLinkTooBig:"Couldn't create shareable link: the scene is too big",couldNotLoadInvalidFile:"Couldn't load invalid file",importBackendFailed:"Importing from backend failed.",cannotExportEmptyCanvas:"Cannot export empty canvas.",couldNotCopyToClipboard:"Couldn't copy to clipboard.",decryptFailed:"Couldn't decrypt data.",uploadedSecurly:"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.",loadSceneOverridePrompt:"Loading external drawing will replace your existing content. Do you wish to continue?",collabStopOverridePrompt:`Stopping the session will overwrite your previous, locally stored drawing. Are you sure?

(If you want to keep your local drawing, simply close the browser tab instead.)`,errorAddingToLibrary:"Couldn't add item to the library",errorRemovingFromLibrary:"Couldn't remove item from the library",confirmAddLibrary:"This will add {{numShapes}} shape(s) to your library. Are you sure?",imageDoesNotContainScene:"This image does not seem to contain any scene data. Have you enabled scene embedding during export?",cannotRestoreFromImage:"Scene couldn't be restored from this image file",invalidSceneUrl:"Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.",resetLibrary:"This will clear your library. Are you sure?",removeItemsFromsLibrary:"Delete {{count}} item(s) from library?",invalidEncryptionKey:"Encryption key must be of 22 characters. Live collaboration is disabled.",collabOfflineWarning:`No internet connection available.
Your changes will not be saved!`},xz={unsupportedFileType:"Unsupported file type.",imageInsertError:"Couldn't insert image. Try again later...",fileTooBig:"File is too big. Maximum allowed size is {{maxSize}}.",svgImageInsertError:"Couldn't insert SVG image. The SVG markup looks invalid.",failedToFetchImage:"Failed to fetch image.",cannotResolveCollabServer:"Couldn't connect to the collab server. Please reload the page and try again.",importLibraryError:"Couldn't load library",saveLibraryError:"Couldn't save library to storage. Please save your library to a file locally to make sure you don't lose changes.",collabSaveFailed:"Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.",collabSaveFailed_sizeExceeded:"Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.",imageToolNotSupported:"Images are disabled.",brave_measure_text_error:{line1:"Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.",line2:"This could result in breaking the <bold>Text Elements</bold> in your drawings.",line3:"We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.",line4:"If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>"},libraryElementTypeError:{embeddable:"Embeddable elements cannot be added to the library.",iframe:"IFrame elements cannot be added to the library.",image:"Support for adding images to the library coming soon!"},asyncPasteFailedOnRead:"Couldn't paste (couldn't read from system clipboard).",asyncPasteFailedOnParse:"Couldn't paste.",copyToSystemClipboardFailed:"Couldn't copy to clipboard."},Cz={selection:"Selection",lasso:"Lasso selection",image:"Insert image",rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Draw",text:"Text",library:"Library",lock:"Keep selected tool active after drawing",penMode:"Pen mode - prevent touch",link:"Add / Update link for a selected shape",eraser:"Eraser",frame:"Frame tool",magicframe:"Wireframe to code",embeddable:"Web Embed",laser:"Laser pointer",hand:"Hand (panning tool)",extraTools:"More tools",mermaidToExcalidraw:"Mermaid to Excalidraw",convertElementType:"Toggle shape type"},Az={rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Freedraw",text:"Text",image:"Image",group:"Group",frame:"Frame",magicframe:"Wireframe to code",embeddable:"Web Embed",selection:"Selection",iframe:"IFrame"},Mz={canvasActions:"Canvas actions",selectedShapeActions:"Selected shape actions",shapes:"Shapes"},Rz={dismissSearch:"Escape to dismiss search",canvasPanning:"To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool",linearElement:"Click to start multiple points, drag for single line",arrowTool:"Click to start multiple points, drag for single line. Press {{arrowShortcut}} again to change arrow type.",freeDraw:"Click and drag, release when you're finished",text:"Tip: you can also add text by double-clicking anywhere with the selection tool",embeddable:"Click-drag to create a website embed",text_selected:"Double-click or press ENTER to edit text",text_editing:"Press Escape or CtrlOrCmd+ENTER to finish editing",linearElementMulti:"Click on last point or press Escape or Enter to finish",lockAngle:"You can constrain angle by holding SHIFT",resize:`You can constrain proportions by holding SHIFT while resizing,
hold ALT to resize from the center`,resizeImage:`You can resize freely by holding SHIFT,
hold ALT to resize from the center`,rotate:"You can constrain angles by holding SHIFT while rotating",lineEditor_info:"Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points",lineEditor_pointSelected:`Press Delete to remove point(s),
CtrlOrCmd+D to duplicate, or drag to move`,lineEditor_nothingSelected:`Select a point to edit (hold SHIFT to select multiple),
or hold Alt and click to add new points`,placeImage:"Click to place the image, or click and drag to set its size manually",publishLibrary:"Publish your own library",bindTextToElement:"Press enter to add text",createFlowchart:"Hold CtrlOrCmd and Arrow key to create a flowchart",deepBoxSelect:"Hold CtrlOrCmd to deep select, and to prevent dragging",eraserRevert:"Hold Alt to revert the elements marked for deletion",firefox_clipboard_write:'This feature can likely be enabled by setting the "dom.events.asyncClipboard.clipboardItem" flag to "true". To change the browser flags in Firefox, visit the "about:config" page.',disableSnapping:"Hold CtrlOrCmd to disable snapping",enterCropEditor:"Double click the image or press ENTER to crop the image",leaveCropEditor:"Click outside the image or press ENTER or ESCAPE to finish cropping"},kz={cannotShowPreview:"Cannot show preview",canvasTooBig:"The canvas may be too big.",canvasTooBigTip:"Tip: try moving the farthest elements a bit closer together."},Dz={headingMain:"Encountered an error. Try <button>reloading the page</button>.",clearCanvasMessage:"If reloading doesn't work, try <button>clearing the canvas</button>.",clearCanvasCaveat:" This will result in loss of work ",trackedToSentry:"The error with identifier {{eventId}} was tracked on our system.",openIssueMessage:"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.",sceneContent:"Scene content:"},Lz={or:"Or"},Nz={desc_intro:"Invite people to collaborate on your drawing.",desc_privacy:"Don't worry, the session is end-to-end encrypted, and fully private. Not even our server can see what you draw.",button_startSession:"Start session",button_stopSession:"Stop session",desc_inProgressIntro:"Live-collaboration session is now in progress.",desc_shareLink:"Share this link with anyone you want to collaborate with:",desc_exitSession:"Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.",shareTitle:"Join a live collaboration session on Excalidraw"},Oz={title:"Error"},Pz={disk_title:"Save to disk",disk_details:"Export the scene data to a file from which you can import later.",disk_button:"Save to file",link_title:"Shareable link",link_details:"Export as a read-only link.",link_button:"Export to Link",excalidrawplus_description:"Save the scene to your Excalidraw+ workspace.",excalidrawplus_button:"Export",excalidrawplus_exportError:"Couldn't export to Excalidraw+ at this moment..."},Fz={blog:"Read our blog",click:"click",deepSelect:"Deep select",deepBoxSelect:"Deep select within box, and prevent dragging",createFlowchart:"Create a flowchart from a generic element",navigateFlowchart:"Navigate a flowchart",curvedArrow:"Curved arrow",curvedLine:"Curved line",documentation:"Documentation",doubleClick:"double-click",drag:"drag",editor:"Editor",editLineArrowPoints:"Edit line/arrow points",editText:"Edit text / add label",github:"Found an issue? Submit",howto:"Follow our guides",or:"or",preventBinding:"Prevent arrow binding",tools:"Tools",shortcuts:"Keyboard shortcuts",textFinish:"Finish editing (text editor)",textNewLine:"Add new line (text editor)",title:"Help",view:"View",zoomToFit:"Zoom to fit all elements",zoomToSelection:"Zoom to selection",toggleElementLock:"Lock/unlock selection",movePageUpDown:"Move page up/down",movePageLeftRight:"Move page left/right",cropStart:"Crop image",cropFinish:"Finish image cropping"},Bz={title:"Clear canvas"},zz={title:"Publish library",itemName:"Item name",authorName:"Author name",githubUsername:"GitHub username",twitterUsername:"Twitter username",libraryName:"Library name",libraryDesc:"Library description",website:"Website",placeholder:{authorName:"Your name or username",libraryName:"Name of your library",libraryDesc:"Description of your library to help people understand its usage",githubHandle:"GitHub handle (optional), so you can edit the library once submitted for review",twitterHandle:"Twitter username (optional), so we know who to credit when promoting over Twitter",website:"Link to your personal website or elsewhere (optional)"},errors:{required:"Required",website:"Enter a valid URL"},noteDescription:"Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.",noteGuidelines:"The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.",noteLicense:"By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.",noteItems:"Each library item must have its own name so it's filterable. The following library items will be included:",atleastOneLibItem:"Please select at least one library item to get started",republishWarning:"Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission."},Hz={title:"Library submitted",content:"Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>"},Vz={resetLibrary:"Reset library",removeItemsFromLib:"Remove selected items from library"},$z={header:"Export image",label:{withBackground:"Background",onlySelected:"Only selected",darkMode:"Dark mode",embedScene:"Embed scene",scale:"Scale",padding:"Padding"},tooltip:{embedScene:`Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.
Will increase exported file size.`},title:{exportToPng:"Export to PNG",exportToSvg:"Export to SVG",copyPngToClipboard:"Copy PNG to clipboard"},button:{exportToPng:"PNG",exportToSvg:"SVG",copyPngToClipboard:"Copy to clipboard"}},Gz={tooltip:"Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.",link:"Blog post on end-to-end encryption in Excalidraw"},Xz={angle:"Angle",shapes:"Shapes",height:"Height",scene:"Scene",selected:"Selected",storage:"Storage",fullTitle:"Canvas & Shape properties",title:"Properties",generalStats:"General",elementProperties:"Shape properties",total:"Total",version:"Version",versionCopy:"Click to copy",versionNotAvailable:"Version not available",width:"Width"},jz={addedToLibrary:"Added to library",copyStyles:"Copied styles.",copyToClipboard:"Copied to clipboard.",copyToClipboardAsPng:`Copied {{exportSelection}} to clipboard as PNG
({{exportColorScheme}})`,copyToClipboardAsSvg:`Copied {{exportSelection}} to clipboard as SVG
({{exportColorScheme}})`,fileSaved:"File saved.",fileSavedToFilename:"Saved to {filename}",canvas:"canvas",selection:"selection",pasteAsSingleElement:`Use {{shortcut}} to paste as a single element,
or paste into an existing text editor`,unableToEmbed:"Embedding this url is currently not allowed. Raise an issue on GitHub to request the url whitelisted",unrecognizedLinkFormat:"The link you embedded does not match the expected format. Please try to paste the 'embed' string provided by the source site",elementLinkCopied:"Link copied to clipboard"},Yz={transparent:"Transparent",black:"Black",white:"White",red:"Red",pink:"Pink",grape:"Grape",violet:"Violet",gray:"Gray",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",yellow:"Yellow",orange:"Orange",bronze:"Bronze"},Wz={app:{center_heading:"All your data is saved locally in your browser.",center_heading_plus:"Did you want to go to the Excalidraw+ instead?",menuHint:"Export, preferences, languages, ..."},defaults:{menuHint:"Export, preferences, and more...",center_heading:"Diagrams. Made. Simple.",toolbarHint:"Pick a tool & Start drawing!",helpHint:"Shortcuts & help"}},Kz={color:"Color",mostUsedCustomColors:"Most used custom colors",colors:"Colors",shades:"Shades",hexCode:"Hex code",noShades:"No shades available for this color"},Zz={action:{exportToImage:{title:"Export as image",button:"Export as image",description:"Export the scene data as an image from which you can import later."},saveToDisk:{title:"Save to disk",button:"Save to disk",description:"Export the scene data to a file from which you can import later."},excalidrawPlus:{title:"Excalidraw+",button:"Export to Excalidraw+",description:"Save the scene to your Excalidraw+ workspace."}},modal:{loadFromFile:{title:"Load from file",button:"Load from file",description:"Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below."},shareableLink:{title:"Load from link",button:"Replace my content",description:"Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below."}}},qz={title:"Mermaid to Excalidraw",button:"Insert",description:"Currently only <flowchartLink>Flowchart</flowchartLink>,<sequenceLink> Sequence, </sequenceLink> and <classLink>Class </classLink>Diagrams are supported. The other types will be rendered as image in Excalidraw.",syntax:"Mermaid Syntax",preview:"Preview"},Qz={placeholder:"Quick search"},Jz={badge:{old:"old"},sceneFonts:"In this scene",availableFonts:"Available fonts",empty:"No fonts found"},eH={empty:"No users found",hint:{text:"Click on user to follow",followStatus:"You're currently following this user",inCall:"User is in a voice call",micMuted:"User's microphone is muted",isSpeaking:"User is speaking"}},tH={title:"Command palette",shortcuts:{select:"Select",confirm:"Confirm",close:"Close"},recents:"Recently used",search:{placeholder:"Search menus, commands, and discover hidden gems",noMatch:"No matching commands..."},itemNotAvailable:"Command is not available...",shortcutHint:"For Command palette, use {{shortcut}}"},Dw={labels:vz,elementLink:wz,library:_z,search:Tz,buttons:Sz,alerts:Iz,errors:xz,toolBar:Cz,element:Az,headings:Mz,hints:Rz,canvasError:kz,errorSplash:Dz,shareDialog:Lz,roomDialog:Nz,errorDialog:Oz,exportDialog:Pz,helpDialog:Fz,clearCanvasDialog:Bz,publishDialog:zz,publishSuccessDialog:Hz,confirmDialog:Vz,imageExportDialog:$z,encrypted:Gz,stats:Xz,toast:jz,colors:Yz,welcomeScreen:Wz,colorPicker:Kz,overwriteConfirm:Zz,mermaid:qz,quickSearch:Qz,fontList:Jz,userList:eH,commandPalette:tH},Kce=Object.freeze(Object.defineProperty({__proto__:null,alerts:Iz,buttons:Sz,canvasError:kz,clearCanvasDialog:Bz,colorPicker:Kz,colors:Yz,commandPalette:tH,confirmDialog:Vz,default:Dw,element:Az,elementLink:wz,encrypted:Gz,errorDialog:Oz,errorSplash:Dz,errors:xz,exportDialog:Pz,fontList:Jz,headings:Mz,helpDialog:Fz,hints:Rz,imageExportDialog:$z,labels:vz,library:_z,mermaid:qz,overwriteConfirm:Zz,publishDialog:zz,publishSuccessDialog:Hz,quickSearch:Qz,roomDialog:Nz,search:Tz,shareDialog:Lz,stats:Xz,toast:jz,toolBar:Cz,userList:eH,welcomeScreen:Wz},Symbol.toStringTag,{value:"Module"})),nH=100,iH=36,sH={"ar-SA":94,"az-AZ":17,"bg-BG":71,"bn-BD":52,"ca-ES":83,"cs-CZ":86,"da-DK":61,"de-DE":100,"el-GR":80,en:nH,"es-ES":96,"eu-ES":97,"fa-IR":84,"fi-FI":76,"fr-FR":99,"gl-ES":86,"he-IL":77,"hi-IN":76,"hu-HU":76,"id-ID":91,"it-IT":98,"ja-JP":90,kaa:iH,"kab-KAB":76,"kk-KZ":18,"km-KH":83,"ko-KR":100,"ku-TR":87,"lt-LT":48,"lv-LV":77,"mr-IN":98,"my-MM":35,"nb-NO":93,"nl-NL":75,"nn-NO":67,"oc-FR":92,"pa-IN":78,"pl-PL":99,"pt-BR":91,"pt-PT":83,"ro-RO":99,"ru-RU":92,"si-LK":7,"sk-SK":100,"sl-SI":100,"sv-SE":100,"ta-IN":81,"th-TH":44,"tr-TR":87,"uk-UA":93,"vi-VN":49,"zh-CN":100,"zh-HK":22,"zh-TW":100},Zce=Object.freeze(Object.defineProperty({__proto__:null,default:sH,en:nH,kaa:iH},Symbol.toStringTag,{value:"Module"})),qce=85,Pd={code:"en",label:"English"},ap=[Pd,...[{code:"ar-SA",label:"العربية",rtl:!0},{code:"bg-BG",label:"Български"},{code:"ca-ES",label:"Català"},{code:"cs-CZ",label:"Česky"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:"Ελληνικά"},{code:"es-ES",label:"Español"},{code:"eu-ES",label:"Euskara"},{code:"fa-IR",label:"فارسی",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Français"},{code:"gl-ES",label:"Galego"},{code:"he-IL",label:"עברית",rtl:!0},{code:"hi-IN",label:"हिन्दी"},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:"日本語"},{code:"kab-KAB",label:"Taqbaylit"},{code:"kk-KZ",label:"Қазақ тілі"},{code:"ko-KR",label:"한국어"},{code:"ku-TR",label:"Kurdî"},{code:"lt-LT",label:"Lietuvių"},{code:"lv-LV",label:"Latviešu"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokmål"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:"ਪੰਜਾਬੀ"},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Português Brasileiro"},{code:"pt-PT",label:"Português"},{code:"ro-RO",label:"Română"},{code:"ru-RU",label:"Русский"},{code:"sk-SK",label:"Slovenčina"},{code:"sv-SE",label:"Svenska"},{code:"sl-SI",label:"Slovenščina"},{code:"tr-TR",label:"Türkçe"},{code:"uk-UA",label:"Українська"},{code:"zh-CN",label:"简体中文"},{code:"zh-TW",label:"繁體中文"},{code:"vi-VN",label:"Tiếng Việt"},{code:"mr-IN",label:"मराठी"}].filter(e=>sH[e.code]>=qce).sort((e,t)=>e.label>t.label?1:-1)],Yb="__test__";ap.unshift({code:Yb,label:"test language"},{code:`${Yb}.rtl`,label:"‪test language (rtl)‬",rtl:!0});let Vf=Pd,h2={};const rH=async e=>{if(Vf=e,document.documentElement.dir=Vf.rtl?"rtl":"ltr",document.documentElement.lang=Vf.code,e.code.startsWith(Yb))h2={};else try{h2=await Lce(Object.assign({"./locales/ar-SA.json":()=>be(()=>import("./ar-SA-D_jDFH8k.js"),__vite__mapDeps([])),"./locales/az-AZ.json":()=>be(()=>import("./az-AZ-BV3iXazI.js"),__vite__mapDeps([])),"./locales/bg-BG.json":()=>be(()=>import("./bg-BG-CFqJeJis.js"),__vite__mapDeps([])),"./locales/bn-BD.json":()=>be(()=>import("./bn-BD-Dg0jTBuU.js"),__vite__mapDeps([])),"./locales/ca-ES.json":()=>be(()=>import("./ca-ES-B_rqfBtq.js"),__vite__mapDeps([])),"./locales/cs-CZ.json":()=>be(()=>import("./cs-CZ-Cd3Jrse6.js"),__vite__mapDeps([])),"./locales/da-DK.json":()=>be(()=>import("./da-DK-DIUMM5f1.js"),__vite__mapDeps([])),"./locales/de-DE.json":()=>be(()=>import("./de-DE-BF0RlQMn.js"),__vite__mapDeps([])),"./locales/el-GR.json":()=>be(()=>import("./el-GR-DU1ye1AH.js"),__vite__mapDeps([])),"./locales/en.json":()=>be(()=>Promise.resolve().then(()=>Kce),void 0),"./locales/es-ES.json":()=>be(()=>import("./es-ES-xlQfaHzf.js"),__vite__mapDeps([])),"./locales/eu-ES.json":()=>be(()=>import("./eu-ES-DHzY6Edt.js"),__vite__mapDeps([])),"./locales/fa-IR.json":()=>be(()=>import("./fa-IR-dG0Oexeb.js"),__vite__mapDeps([])),"./locales/fi-FI.json":()=>be(()=>import("./fi-FI-Bujb5Dw7.js"),__vite__mapDeps([])),"./locales/fr-FR.json":()=>be(()=>import("./fr-FR-XQSU67Np.js"),__vite__mapDeps([])),"./locales/gl-ES.json":()=>be(()=>import("./gl-ES-DtDal_zw.js"),__vite__mapDeps([])),"./locales/he-IL.json":()=>be(()=>import("./he-IL-DVcgm2lM.js"),__vite__mapDeps([])),"./locales/hi-IN.json":()=>be(()=>import("./hi-IN-C8kzCSp9.js"),__vite__mapDeps([])),"./locales/hu-HU.json":()=>be(()=>import("./hu-HU-DAfvrv_C.js"),__vite__mapDeps([])),"./locales/id-ID.json":()=>be(()=>import("./id-ID-CBiVsIt-.js"),__vite__mapDeps([])),"./locales/it-IT.json":()=>be(()=>import("./it-IT-WpaAwjln.js"),__vite__mapDeps([])),"./locales/ja-JP.json":()=>be(()=>import("./ja-JP-lTAhYhc8.js"),__vite__mapDeps([])),"./locales/kaa.json":()=>be(()=>import("./kaa-FVrrRyw0.js"),__vite__mapDeps([])),"./locales/kab-KAB.json":()=>be(()=>import("./kab-KAB-BrNis2fB.js"),__vite__mapDeps([])),"./locales/kk-KZ.json":()=>be(()=>import("./kk-KZ-D22q2uZy.js"),__vite__mapDeps([])),"./locales/km-KH.json":()=>be(()=>import("./km-KH-c8LT4rcW.js"),__vite__mapDeps([])),"./locales/ko-KR.json":()=>be(()=>import("./ko-KR-Be74AxMq.js"),__vite__mapDeps([])),"./locales/ku-TR.json":()=>be(()=>import("./ku-TR-DnNoknS4.js"),__vite__mapDeps([])),"./locales/lt-LT.json":()=>be(()=>import("./lt-LT-Bezae7cb.js"),__vite__mapDeps([])),"./locales/lv-LV.json":()=>be(()=>import("./lv-LV-DjX28ylN.js"),__vite__mapDeps([])),"./locales/mr-IN.json":()=>be(()=>import("./mr-IN-oZ81g7ZD.js"),__vite__mapDeps([])),"./locales/my-MM.json":()=>be(()=>import("./my-MM-DYr6nfRL.js"),__vite__mapDeps([])),"./locales/nb-NO.json":()=>be(()=>import("./nb-NO-KO5Ap4Cw.js"),__vite__mapDeps([])),"./locales/nl-NL.json":()=>be(()=>import("./nl-NL-CF-IsFrk.js"),__vite__mapDeps([])),"./locales/nn-NO.json":()=>be(()=>import("./nn-NO-BUxdfyBP.js"),__vite__mapDeps([])),"./locales/oc-FR.json":()=>be(()=>import("./oc-FR-DJSOwdjr.js"),__vite__mapDeps([])),"./locales/pa-IN.json":()=>be(()=>import("./pa-IN-CWeXowf0.js"),__vite__mapDeps([])),"./locales/percentages.json":()=>be(()=>Promise.resolve().then(()=>Zce),void 0),"./locales/pl-PL.json":()=>be(()=>import("./pl-PL-DC_Gtqyg.js"),__vite__mapDeps([])),"./locales/pt-BR.json":()=>be(()=>import("./pt-BR-BP870iwO.js"),__vite__mapDeps([])),"./locales/pt-PT.json":()=>be(()=>import("./pt-PT-BCiUoe7O.js"),__vite__mapDeps([])),"./locales/ro-RO.json":()=>be(()=>import("./ro-RO-DDtEzs-o.js"),__vite__mapDeps([])),"./locales/ru-RU.json":()=>be(()=>import("./ru-RU-Cu66rc7c.js"),__vite__mapDeps([])),"./locales/si-LK.json":()=>be(()=>import("./si-LK-D8rbKfZA.js"),__vite__mapDeps([])),"./locales/sk-SK.json":()=>be(()=>import("./sk-SK-B-lk308q.js"),__vite__mapDeps([])),"./locales/sl-SI.json":()=>be(()=>import("./sl-SI-C9l50axt.js"),__vite__mapDeps([])),"./locales/sv-SE.json":()=>be(()=>import("./sv-SE-S0z3nuUO.js"),__vite__mapDeps([])),"./locales/ta-IN.json":()=>be(()=>import("./ta-IN-Bb4XJg6y.js"),__vite__mapDeps([])),"./locales/th-TH.json":()=>be(()=>import("./th-TH-D-2txP3v.js"),__vite__mapDeps([])),"./locales/tr-TR.json":()=>be(()=>import("./tr-TR-C8iTlMZv.js"),__vite__mapDeps([])),"./locales/uk-UA.json":()=>be(()=>import("./uk-UA-BmimCNFT.js"),__vite__mapDeps([])),"./locales/vi-VN.json":()=>be(()=>import("./vi-VN-Cs9mO6qO.js"),__vite__mapDeps([])),"./locales/zh-CN.json":()=>be(()=>import("./zh-CN-D5rso2fJ.js"),__vite__mapDeps([])),"./locales/zh-HK.json":()=>be(()=>import("./zh-HK-Cr1Xzg-X.js"),__vite__mapDeps([])),"./locales/zh-TW.json":()=>be(()=>import("./zh-TW-BhXss3zf.js"),__vite__mapDeps([]))}),`./locales/${Vf.code}.json`)}catch(t){console.error(`Failed to load language ${e.code}:`,t.message),h2=Dw}Ns.set(oH,e.code)},J0=()=>Vf,CA=(e,t)=>{for(let n=0;n<t.length;++n){const i=t[n];if(e[i]===void 0)return;e=e[i]}if(typeof e=="string")return e},k=(e,t,n)=>{if(Vf.code.startsWith(Yb))return`‪[[${t?`${e}(${JSON.stringify(t).slice(1,-1)})`:e}]]‬`;const i=e.split(".");let s=CA(h2,i)||CA(Dw,i)||n;if(s===void 0){const r=`Can't find translation for ${e}`;return console.warn(r),""}if(t)for(const r in t)s=s.replace(`{{${r}}}`,String(t[r]));return s},oH=Zt(Pd.code),Un=()=>{const e=Ez(oH);return{t:k,langCode:e}},Qce=(e,t)=>{const[n,i,s,r]=t,{x:o,y:a}=hr({sceneX:n,sceneY:i},e),{x:l,y:c}=hr({sceneX:s,sceneY:r},e);return l-o>e.width||c-a>e.height},aH=({scenePoint:e,viewportDimensions:t,zoom:n,offsets:i})=>{let s=(t.width-((i==null?void 0:i.right)??0))/2/n.value-e.x;s+=((i==null?void 0:i.left)??0)/2/n.value;let r=(t.height-((i==null?void 0:i.bottom)??0))/2/n.value-e.y;return r+=((i==null?void 0:i.top)??0)/2/n.value,{scrollX:s,scrollY:r}},em=(e,t)=>{if(e=Ece(e),!e.length)return{scrollX:0,scrollY:0};let[n,i,s,r]=xt(e);Qce(t,[n,i,s,r])&&([n,i,s,r]=ule(e,kt({clientX:t.scrollX,clientY:t.scrollY},t)));const o=(n+s)/2,a=(i+r)/2;return aH({scenePoint:{x:o,y:a},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},Fa=e=>Xe($a(e,6),O9,P9),Jce=e=>Xe(Math.round(e),1,100),lH=e=>Xe(Math.round(e),1,100),Yr=e=>"var(--icon-fill-color)",cH=e=>e===Me.LIGHT?hi.white:"#1e1e1e",Y=(e,t=512)=>{const{width:n=512,height:i=n,mirror:s,style:r,...o}=typeof t=="number"?{width:t}:t;return g("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:`0 0 ${n} ${i}`,className:pe({"rtl-mirror":s}),style:r,...o,children:typeof e=="string"?g("path",{fill:"currentColor",d:e}):e})},ce={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},Fe={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"};Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("rect",{x:3,y:8,width:18,height:4,rx:1}),g("line",{x1:12,y1:8,x2:12,y2:21}),g("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),g("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})]}),ce);const Lw=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),g("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),g("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),g("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),g("line",{x1:"21",y1:"6",x2:"21",y2:"19"})]}),ce),eue=Y(P("svg",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),g("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),ce),tue=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"1"}),g("circle",{cx:"12",cy:"19",r:"1"}),g("circle",{cx:"12",cy:"5",r:"1"})]}),ce),nue=Y(P("svg",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),g("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),g("line",{x1:"8",y1:"4",x2:"16",y2:"4"})]}),ce),x5=Y(P("g",{children:[g("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),g("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9,children:g("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})}),g("g",{mask:"url(#UnlockedIcon)",children:g("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"})})]}),Fe),Nw=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),g("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),g("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})]}),Fe),iue=Y(P(ge,{children:[g("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),g("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:41,height:94,fill:"none"}),sue=Y(P(ge,{children:[g("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),g("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:85,height:71,fill:"none"}),rue=Y(P(ge,{children:[g("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),g("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:38,height:78,fill:"none"});Y(g("g",{fill:"currentColor",children:g("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),{width:40,height:40,fill:"none"});const oue=Y(P("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),g("path",{d:"M13.5 13.5l4.5 4.5"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),a4=Y(P("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[g("path",{d:"M4.028 13.252c-.657 -.972 -1.028 -2.078 -1.028 -3.252c0 -3.866 4.03 -7 9 -7s9 3.134 9 7s-4.03 7 -9 7c-1.913 0 -3.686 -.464 -5.144 -1.255"}),g("path",{d:"M5 15m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 17c0 1.42 .316 2.805 1 4"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),uH=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),ce),dH=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})]}),ce),fH=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"})]}),ce),aue=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),g("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),g("line",{x1:"15",y1:"8",x2:"19",y2:"12"})]}),ce),hH=Y(g("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),Fe),lue=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),g("path",{d:"M16 7h4"}),g("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})]}),ce),C5=Y(P("g",{strokeWidth:"1.25",children:[g("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),g("path",{d:"m11.25 5.417 3.333 3.333"})]}),Fe),Ow=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),g("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),g("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),g("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),g("polyline",{points:"5 20 11 4 13 4 20 20"})]}),ce),cue=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M12.5 6.667h.01"}),g("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),g("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),g("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})]}),Fe),uue=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),g("path",{d:"M18 13.3l-6.3 -6.3"})]}),ce),AA=Y(g("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),Fe),MA=Y(g("path",{d:"M5 10h10",strokeWidth:"1.25"}),Fe),due=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M21 21l-6 -6"}),g("path",{d:"M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"}),g("path",{d:"M3 4v4h4"})]}),ce),Oc=Y(g("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),Fe),RA=Y(P("g",{strokeWidth:"1.5",children:[g("polyline",{points:"12 16 18 10 12 4"}),g("polyline",{points:"8 4 2 10 8 16"})]}),Fe),l4=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),g("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]}),Fe),c4=Y(g("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),Fe),u4=Y(g("g",{stroke:"currentColor",strokeLinejoin:"round",children:g("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})}),{...Fe,strokeWidth:1.5}),gH=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),g("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),g("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),ce),A5=Y(g("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),Fe),Pw=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"}),g("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),ce),fue=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"}),g("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),ce),kA=Y(g("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),Fe),Fw=Y(g("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),Fe),mH=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),g("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})]}),Fe),hue=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),g("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),ce),gue=Y(g("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24}),Wb=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),g("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})]}),Fe),mue=Y("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),pue=Y("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),Bw=Y(g("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),Fe);Y("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512});const Uue=Y("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"),iE=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z"}),g("path",{d:"M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z"}),g("path",{d:"M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208"})]}),ce),bue=Y(g("g",{strokeWidth:1.5,children:g("path",{d:"M6 18l12 -12"})}),ce),pH=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 8h.01"}),g("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),g("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),g("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),g("path",{d:"M19 16v6"}),g("path",{d:"M22 19l-3 3l-3 -3"})]}),ce),yue=Y("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512});Y("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});Y("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});const Eue=Y("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");Y("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");const DA=Y(g("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),Fe),LA=Y(g("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),Fe),vue=Y("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0}),zw=Y(g("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),Fe),wue=Y("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"),_ue=Y("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24}),Tue=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1"}),g("path",{d:"M12 14v-11"}),g("path",{d:"M9 6l3 -3l3 3"})]}),ce),Sue=Y(P(ge,{children:[g("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),g("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})]}),{width:64,height:64});Y(g("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024});const UH=P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 10l0 10"}),g("path",{d:"M12 10l4 4"}),g("path",{d:"M12 10l-4 4"}),g("path",{d:"M4 4l16 0"})]}),bH=P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 5l0 14"}),g("path",{d:"M16 9l-4 -4"}),g("path",{d:"M8 9l4 -4"})]}),NA=Y(bH,ce),OA=Y(bH,{...ce,style:{transform:"rotate(180deg)"}}),PA=Y(UH,ce),FA=Y(UH,{...ce,style:{transform:"rotate(180deg)"}}),BA=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),zA=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),HA=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),VA=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),Iue=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),xue=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),$A=Y(P("g",{stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),g("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})]}),Fe),GA=Y(P("g",{stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),g("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})]}),Fe),Hw=Y(P("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"9",cy:"7",r:"4"}),g("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),g("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),g("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]}),ce);Y("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z");Y("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");const Fd=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M15 5 5 15M5 5l10 10"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe);Y("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0});const Cue=Y("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24});Y("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512});const XA=ae.memo(({theme:e})=>Y(P(ge,{children:[g("path",{d:"M25 26H111V111H25",fill:Yr()}),g("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:Yr(),strokeWidth:"2"}),g("path",{d:"M100 100H160V160H100",fill:Yr()}),g("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:Yr(),strokeWidth:"2"}),P("g",{fill:cH(e),stroke:Yr(),strokeWidth:"6",children:[g("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"2.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"2.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),jA=ae.memo(({theme:e})=>Y(P(ge,{children:[g("path",{d:"M25 26H111V111H25",fill:Yr()}),g("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:Yr(),strokeWidth:"2"}),g("path",{d:"M100 100H160V160H100",fill:Yr()}),g("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:Yr(),strokeWidth:"2"}),P("g",{fill:cH(e),stroke:Yr(),strokeWidth:"6",children:[g("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"78.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"78.5",width:"30",height:"30"}),g("rect",{x:"105.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"2.5",y:"102.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),Aue=Y(g("g",{strokeWidth:1.25,children:g("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})}),Fe),Mue=Y(P(ge,{children:[g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16,children:g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})}),g("g",{mask:"url(#FillHachureIcon)",children:g("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})]}),Fe),Rue=Y(P(ge,{children:[P("g",{clipPath:"url(#a)",children:[g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22,children:g("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("g",{mask:"url(#FillCrossHatchIcon)",children:g("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"})})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),kue=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),{...Fe,fill:"currentColor"}),yH=Y(g(ge,{children:g("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),Fe),Due=Y(g("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),Fe),Lue=Y(g("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),Fe);ae.memo(({theme:e})=>Y(g("path",{d:"M6 10H34",stroke:Yr(),strokeWidth:2,fill:"none",strokeLinecap:"round"}),{width:40,height:20}));const Nue=Y(P("g",{strokeWidth:"2",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 12h2"}),g("path",{d:"M17 12h2"}),g("path",{d:"M11 12h2"})]}),ce),Oue=Y(P("g",{strokeWidth:"2",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 12v.01"}),g("path",{d:"M8 12v.01"}),g("path",{d:"M12 12v.01"}),g("path",{d:"M16 12v.01"}),g("path",{d:"M20 12v.01"})]}),ce),Pue=Y(g("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),Fe),Fue=Y(g("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),Fe),Bue=Y(g("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),Fe),zue=Y(P("svg",{strokeWidth:"1.5",children:[g("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),g("path",{d:"M13.3333 3.33331V3.34331"}),g("path",{d:"M16.6667 3.33331V3.34331"}),g("path",{d:"M16.6667 6.66669V6.67669"}),g("path",{d:"M16.6667 10V10.01"}),g("path",{d:"M3.33334 13.3333V13.3433"}),g("path",{d:"M16.6667 13.3333V13.3433"}),g("path",{d:"M3.33334 16.6667V16.6767"}),g("path",{d:"M6.66666 16.6667V16.6767"}),g("path",{d:"M10 16.6667V16.6767"}),g("path",{d:"M13.3333 16.6667V16.6767"}),g("path",{d:"M16.6667 16.6667V16.6767"})]}),Fe),Hue=Y(P("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),g("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),g("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),g("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),g("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),g("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),g("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),g("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),g("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),g("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),g("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),g("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})]}),ce),Vue=Y(P("g",{stroke:"currentColor",opacity:.3,strokeWidth:2,children:[g("path",{d:"M12 12l9 0"}),g("path",{d:"M3 9l6 6"}),g("path",{d:"M3 15l6 -6"})]}),ce),d4=ae.memo(({flip:e=!1})=>Y(P("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",stroke:"currentColor",strokeWidth:2,fill:"none",children:[g("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),g("path",{d:"M27.5 5L34.5 10L27.5 15"})]}),{width:40,height:20})),$ue=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[g("path",{d:"M32 10L6 10",strokeWidth:2}),g("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Gue=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,children:[g("path",{d:"M26 10L6 10"}),g("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Xue=ae.memo(({flip:e=!1})=>Y(g("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",children:g("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:"currentColor",strokeWidth:2,fill:"none"})}),{width:40,height:20})),jue=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[g("path",{d:"M32 10L6 10",strokeWidth:2}),g("path",{d:"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"})]}),{width:40,height:20})),Yue=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,strokeLinejoin:"round",children:[g("path",{d:"M6,9.5H27"}),g("path",{d:"M27,5L34,10L27,14Z",fill:"none"})]}),{width:40,height:20})),Wue=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{d:"M6,9.5H20"}),g("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),Kue=ae.memo(({flip:e=!1})=>Y(P("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{d:"M6,9.5H20"}),g("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),Zue=ae.memo(({flip:e=!1})=>Y(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),que=ae.memo(({flip:e=!1})=>Y(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L15,15 L15,5"})}),{width:40,height:20})),Que=ae.memo(({flip:e=!1})=>Y(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L15,16 L15,4 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),Jue=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),ede=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),tde=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),nde=Y(g(ge,{children:g("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),Fe),M5=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 7v-2h13v2"}),g("path",{d:"M10 5v14"}),g("path",{d:"M12 19h-4"}),g("path",{d:"M15 13v-1h6v1"}),g("path",{d:"M18 12v7"}),g("path",{d:"M17 19h2"})]}),ce),ide=Y(g(ge,{children:P("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 12h10"}),g("path",{d:"M7 5v14"}),g("path",{d:"M17 5v14"}),g("path",{d:"M15 19h4"}),g("path",{d:"M15 5h4"}),g("path",{d:"M5 19h4"}),g("path",{d:"M5 5h4"})]})}),ce),f4=Y(g(ge,{children:g("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"})})}),Fe),EH=Y(P(ge,{children:[g("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Fe),sde=Y(P("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),g("line",{x1:"4",y1:"16",x2:"16",y2:"16"})]}),ce),rde=Y(P("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),g("line",{x1:"6",y1:"16",x2:"18",y2:"16"})]}),ce),ode=Y(P("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),g("line",{x1:"8",y1:"16",x2:"20",y2:"16"})]}),ce),ade=ae.memo(({theme:e})=>Y(P("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),g("rect",{x:"9",y:"8",width:"6",height:"12",rx:"2"})]}),ce)),lde=ae.memo(({theme:e})=>Y(P("g",{strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),g("rect",{x:"9",y:"4",width:"6",height:"12",rx:"2"})]}),ce)),cde=ae.memo(({theme:e})=>Y(P("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),g("line",{x1:"15",y1:"12",x2:"20",y2:"12"}),g("rect",{x:"9",y:"6",width:"6",height:"12",rx:"2"})]}),ce)),vH=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M21 19h-18l9 -15"}),g("path",{d:"M20.615 15.171h.015"}),g("path",{d:"M19.515 11.771h.015"}),g("path",{d:"M17.715 8.671h.015"}),g("path",{d:"M15.415 5.971h.015"})]}),ce),ude=Y(g("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512});Y(g("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"}));const wH=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),g("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),g("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),g("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})]}),ce),YA=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),g("path",{d:"M7 11l5 5l5 -5"}),g("path",{d:"M12 4l0 12"})]}),ce),lp=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),g("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})]}),ce),dde=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M9.15 14.85l8.85 -10.85"}),g("path",{d:"M6 4l8.85 10.85"})]}),ce),fde=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),g("path",{d:"M12 17l0 .01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),ce),hde=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 4v16l13 -8z"})]}),ce),gde=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",strokeWidth:"0",fill:"currentColor"})]}),ce),mde=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 12l5 5l10 -10"})]}),ce),pde=Y(P(ge,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"}),g("path",{d:"M12 9v4"}),g("path",{d:"M12 17h.01"})]}),ce),Ude=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M11 7l6 6"}),g("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]}),ce),bde=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 3l-4 7h8z"}),g("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]}),ce),Kb=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 7l16 0"}),g("path",{d:"M4 17l16 0"}),g("path",{d:"M7 4l0 16"}),g("path",{d:"M17 4l0 16"})]}),ce),_H=Y(g("path",{fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})),g2=Y(P("g",{strokeWidth:"1.25",children:[g("path",{d:"M4.16602 10H15.8327"}),g("path",{d:"M12.5 13.3333L15.8333 10"}),g("path",{d:"M12.5 6.66666L15.8333 9.99999"})]}),Fe),h4=Y(P("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(90 10 10)",children:[g("path",{clipRule:"evenodd",d:"m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z"}),g("path",{d:"m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13"})]}),20),TH=Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z"}),g("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),g("path",{d:"M15 6l3 3"}),g("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),g("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),ce);Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z"}),g("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),g("path",{d:"M15 6l3 3"}),g("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),g("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),ce);Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"}),g("path",{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"}),g("path",{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"}),g("path",{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"}),g("path",{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"}),g("path",{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"})]}),ce);const yde=Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),g("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),g("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),g("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"})]}),ce),R5=Y(P("g",{stroke:"currentColor",fill:"none",strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),g("path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"})]}),ce),Ede=Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828"}),g("path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"}),g("path",{d:"M3 3l18 18"})]}),ce),vde=Y(P("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),g("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),g("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),g("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),g("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),g("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),ce),wde=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),g("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),g("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),g("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),g("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),g("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),ce),md=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),g("path",{d:"M21 21l-6 -6"})]}),ce),_de=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M20.984 12.53a9 9 0 1 0 -7.552 8.355"}),g("path",{d:"M12 7v5l3 3"}),g("path",{d:"M19 16l-2 3h4l-2 3"})]}),ce),Tde=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"}),g("path",{d:"M5 10a7 7 0 0 0 14 0"}),g("path",{d:"M8 21l8 0"}),g("path",{d:"M12 17l0 4"})]}),ce),Sde=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 3l18 18"}),g("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),g("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85"}),g("path",{d:"M8 21l8 0"}),g("path",{d:"M12 17l0 4"})]}),ce),g4=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"})]}),ce),Ide=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z"}),g("path",{d:"M12 20v.01"}),g("path",{d:"M16 20v.01"}),g("path",{d:"M8 20v.01"}),g("path",{d:"M4 20v.01"}),g("path",{d:"M4 16v.01"}),g("path",{d:"M4 12v.01"}),g("path",{d:"M4 8v.01"}),g("path",{d:"M4 4v.01"}),g("path",{d:"M8 4v.01"}),g("path",{d:"M12 4v.01"}),g("path",{d:"M16 4v.01"}),g("path",{d:"M20 4v.01"}),g("path",{d:"M20 8v.01"}),g("path",{d:"M20 12v.01"}),g("path",{d:"M20 16v.01"}),g("path",{d:"M20 20v.01"})]}),ce),xde=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 3v18"}),g("path",{d:"M19 21v-18"}),g("path",{d:"M5 7h14"}),g("path",{d:"M5 15h14"}),g("path",{d:"M8 13v4"}),g("path",{d:"M11 13v4"}),g("path",{d:"M16 13v4"}),g("path",{d:"M14 5v4"}),g("path",{d:"M11 5v4"}),g("path",{d:"M8 5v4"}),g("path",{d:"M3 21h18"})]}),ce),Cde=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 12l18 0"}),g("path",{d:"M7 16l10 0l-10 5l0 -5"}),g("path",{d:"M7 8l10 0l-10 -5l0 5"})]}),ce),Ade=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 3l0 18"}),g("path",{d:"M16 7l0 10l5 0l-5 -10"}),g("path",{d:"M8 7l0 10l-5 0l5 -10"})]}),ce),SH=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}),g("path",{d:"M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2"}),g("path",{d:"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"})]}),ce),Vw=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),g("path",{d:"M22 22l-3 -3"}),g("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),g("path",{d:"M3 11v-1"}),g("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),g("path",{d:"M10 3h1"}),g("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"})]}),ce),Mde=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),g("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),g("path",{d:"M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"}),g("path",{d:"M10 15l2 6l2 -6"}),g("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"})]}),ce),Rde=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),g("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),g("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"}),g("path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"}),g("path",{d:"M11 21v-6l3 6v-6"})]}),ce),kde=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0"}),g("path",{d:"M4 8l5 0"}),g("path",{d:"M15 8l4 0"})]}),ce),Dde=Y(P("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"}),g("path",{d:"M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),g("path",{d:"M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),g("path",{d:"M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"}),g("path",{d:"M16.746 16.726a3 3 0 1 0 .252 -5.555"})]}),ce),Lde=Y(P("g",{stroke:"currentColor",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4"})]}),{...ce,strokeWidth:1.5}),Nde=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),g("path",{d:"M21 12h-13l3 -3"}),g("path",{d:"M11 15l-3 -3"})]}),ce),IH=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z"}),g("path",{d:"M10 9l5 3l-5 3z"})]}),ce),Ode=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 6h18"}),g("path",{d:"M3 12h18"}),g("path",{d:"M3 18h18"}),g("path",{d:"M6 3v18"}),g("path",{d:"M12 3v18"}),g("path",{d:"M18 3v18"})]}),ce),Pde=Y(P("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M17 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),g("path",{d:"M3 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),g("path",{d:"M17 5c-6.627 0 -12 5.373 -12 12"})]}),ce),xH=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 18l12 -12"}),g("path",{d:"M18 10v-4h-4"})]}),ce),CH=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4,19L10,19C11.097,19 12,18.097 12,17L12,9C12,7.903 12.903,7 14,7L21,7"}),g("path",{d:"M18 4l3 3l-3 3"})]}),ce),AH=Y(P("g",{children:[g("path",{d:"M16,12L20,9L16,6"}),g("path",{d:"M6 20c0 -6.075 4.925 -11 11 -11h3"})]}),ce),MH=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 9l6 6l6 -6"})]}),ce),Fde=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 15l6 -6l6 6"})]}),ce),Bde=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 15l6 -6l6 6"})]}),ce),WA=Y(P("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 5v10a1 1 0 0 0 1 1h10"}),g("path",{d:"M5 8h10a1 1 0 0 1 1 1v10"})]}),ce),RH=Y(P("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M19 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 7l0 10"}),g("path",{d:"M7 5l10 0"}),g("path",{d:"M7 19l10 0"}),g("path",{d:"M19 7l0 10"})]}),ce);class zde extends Error{constructor(t="Couldn't export canvas.",n="CANVAS_ERROR"){super(),this.name=n,this.message=t}}class Fh extends DOMException{constructor(t="Request Aborted"){super(t,"AbortError")}}class Mu extends Error{constructor(n="Image Scene Data Error",i="IMAGE_SCENE_DATA_ERROR"){super(n);F(this,"code");this.name="EncodingError",this.code=i}}class kH extends Error{constructor(n="Worker URL is not defined!",i="WORKER_URL_NOT_DEFINED"){super(n);F(this,"code");this.name="WorkerUrlNotDefinedError",this.code=i}}class DH extends Error{constructor(n="Worker has to be in a separate chunk!",i="WORKER_IN_THE_MAIN_CHUNK"){super(n);F(this,"code");this.name="WorkerInTheMainChunkError",this.code=i}}class qr extends Error{constructor(t){super(t),this.name="ExcalidrawError"}}const sl=({size:e="1em",circleWidth:t=8,synchronized:n=!1,className:i=""})=>{const r=-(ae.useRef(Date.now()).current%1600);return g("div",{className:`Spinner ${i}`,children:g("svg",{viewBox:"0 0 100 100",style:{width:e,height:e,"--spinner-delay":n?`${r}ms`:0},children:g("circle",{cx:"50",cy:"50",r:50-t/2,strokeWidth:t,fill:"none",strokeMiterlimit:"10"})})})},Ye=ae.forwardRef(({size:e="medium",visible:t=!0,className:n="",...i},s)=>{const{id:r}=oa(),o=ae.useRef(null);ae.useImperativeHandle(s,()=>o.current);const a=`ToolIcon_size_${e}`,[l,c]=L.useState(!1),u=L.useRef(!0),d=async h=>{var p;const m="onClick"in i&&((p=i.onClick)==null?void 0:p.call(i,h));if(Qm(m))try{c(!0),await m}catch(U){if(U instanceof Fh)console.warn(U);else throw U}finally{u.current&&c(!1)}};L.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const f=L.useRef(null);if(i.type==="button"||i.type==="icon"||i.type==="submit"){const h=i.type==="icon"?"button":i.type;return P("button",{className:pe("ToolIcon_type_button",a,n,t&&!i.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!i.hidden,"ToolIcon--selected":i.selected,"ToolIcon--plain":i.type==="icon"}),style:i.style,"data-testid":i["data-testid"],hidden:i.hidden,title:i.title,"aria-label":i["aria-label"],type:h,onClick:d,ref:o,disabled:l||i.isLoading||!!i.disabled,children:[(i.icon||i.label)&&P("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":!!i.disabled,children:[i.icon||i.label,i.keyBindingLabel&&g("span",{className:"ToolIcon__keybinding",children:i.keyBindingLabel}),i.isLoading&&g(sl,{})]}),i.showAriaLabel&&P("div",{className:"ToolIcon__label",children:[i["aria-label"]," ",l&&g(sl,{})]}),i.children]})}return P("label",{className:pe("ToolIcon",n),title:i.title,onPointerDown:h=>{var m;f.current=h.pointerType||null,(m=i.onPointerDown)==null||m.call(i,{pointerType:h.pointerType||null})},onPointerUp:()=>{requestAnimationFrame(()=>{f.current=null})},children:[g("input",{className:`ToolIcon_type_radio ${a}`,type:"radio",name:i.name,"aria-label":i["aria-label"],"aria-keyshortcuts":i["aria-keyshortcuts"],"data-testid":i["data-testid"],id:`${r}-${i.id}`,onChange:()=>{var h;(h=i.onChange)==null||h.call(i,{pointerType:f.current})},checked:i.checked,ref:o}),P("div",{className:"ToolIcon__icon",children:[i.icon,i.keyBindingLabel&&g("span",{className:"ToolIcon__keybinding",children:i.keyBindingLabel})]})]})});Ye.displayName="ToolButton";let m4=[];const oe=e=>(m4=m4.concat(e),e),Hde=(e,t,n)=>{const i=new Set(He(e.filter(u=>Te(u)),t).map(u=>u.id)),s={},r=n.scene.getNonDeletedElementsMap(),o=new Set;for(const u of i){const d=xr(e,u);for(const f of d)if(!o.has(f.id)){if(Xt(f)){const h=$n(f,r);h&&(s[h.id]=!0)}else s[f.id]=!0;o.add(f.id)}}let a=!0;const l=e.map(u=>{if(t.selectedElementIds[u.id]){const d=Xt(u)?$n(u,r):null;return u.frameId&&i.has(u.frameId)?(a=!1,s[u.id]=!0,u):d!=null&&d.frameId&&i.has(d==null?void 0:d.frameId)?u:(u.boundElements&&u.boundElements.forEach(f=>{var m,p;const h=n.scene.getNonDeletedElementsMap().get(f.id);h&&he(h)&&n.scene.mutateElement(h,{startBinding:u.id===((m=h.startBinding)==null?void 0:m.elementId)?null:h.startBinding,endBinding:u.id===((p=h.endBinding)==null?void 0:p.elementId)?null:h.endBinding})}),Ie(u,{isDeleted:!0}))}return u.frameId&&i.has(u.frameId)?(a=!1,Xt(u)||(s[u.id]=!0),Ie(u,{frameId:null})):Xt(u)&&t.selectedElementIds[u.containerId]?Ie(u,{isDeleted:!0}):u});let c=t.editingGroupId;if(a&&t.editingGroupId){const u=$t(l,t.editingGroupId).filter(d=>!d.isDeleted);if(u.length>1)u[0]&&(s[u[0].id]=!0);else{c=null,u[0]&&(s[u[0].id]=!0);const d=u[0];if(d){const f=d.groupIds.findIndex(m=>m===t.editingGroupId),h=d.groupIds[f+1];if(h){const m=$t(l,h).filter(p=>!p.isDeleted);m.length>1&&(c=h,m.forEach(p=>{s[p.id]=!0}))}}}}return{elements:l,appState:{...t,...Li({selectedElementIds:s,editingGroupId:c},l,t,null)}}},KA=(e,t)=>{if(e.editingGroupId){const n=$t(Bt(t),e.editingGroupId);if(n.length)return{...e,selectedElementIds:{[n[0].id]:!0}}}return e},LH=oe({name:"deleteSelectedElements",label:"labels.delete",icon:Oc,trackEvent:{category:"element",action:"delete"},perform:(e,t,n,i)=>{if(t.editingLinearElement){const{elementId:o,selectedPointsIndices:a,startBindingElement:l,endBindingElement:c}=t.editingLinearElement,u=i.scene.getNonDeletedElementsMap(),d=le.getElement(o,u);if(!d||a==null)return!1;if(d.points.length<2){const h=e.map(p=>p.id===d.id?Ie(p,{isDeleted:!0}):p),m=KA(t,h);return{elements:h,appState:{...m,editingLinearElement:null},captureUpdate:K.IMMEDIATELY}}const f={startBindingElement:a!=null&&a.includes(0)?null:l,endBindingElement:a!=null&&a.includes(d.points.length-1)?null:c};return le.deletePoints(d,i.scene,a),{elements:e,appState:{...t,editingLinearElement:{...t.editingLinearElement,...f,selectedPointsIndices:(a==null?void 0:a[0])>0?[a[0]-1]:[0]}},captureUpdate:K.IMMEDIATELY}}let{elements:s,appState:r}=Hde(e,t,i);return IB(s,s.filter(o=>o.isDeleted)),r=KA(r,s),{elements:s,appState:{...r,activeTool:en(t,{type:"selection"}),multiElement:null,activeEmbeddable:null,selectedLinearElement:null},captureUpdate:Gn(Bt(e),t)?K.IMMEDIATELY:K.EVENTUALLY}},keyTest:(e,t,n)=>(e.key===z.BACKSPACE||e.key===z.DELETE)&&!e[z.CTRL_OR_CMD],PanelComponent:({elements:e,appState:t,updateData:n})=>g(Ye,{type:"button",icon:Oc,title:k("labels.delete"),"aria-label":k("labels.delete"),onClick:()=>n(null),visible:Gn(Bt(e),t)})}),Vde=oe({name:"sendBackward",label:"labels.sendBackward",keywords:["move down","zindex","layer"],icon:OA,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:pce(e,t,i.scene),appState:t,captureUpdate:K.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[z.CTRL_OR_CMD]&&!e.shiftKey&&e.code===et.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${k("labels.sendBackward")} — ${Q("CtrlOrCmd+[")}`,children:OA})}),$de=oe({name:"bringForward",label:"labels.bringForward",keywords:["move up","zindex","layer"],icon:NA,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Uce(e,t,i.scene),appState:t,captureUpdate:K.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[z.CTRL_OR_CMD]&&!e.shiftKey&&e.code===et.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${k("labels.bringForward")} — ${Q("CtrlOrCmd+]")}`,children:NA})}),Gde=oe({name:"sendToBack",label:"labels.sendToBack",keywords:["move down","zindex","layer"],icon:FA,trackEvent:{category:"element"},perform:(e,t)=>({elements:bce(e,t),appState:t,captureUpdate:K.IMMEDIATELY}),keyTest:e=>Xo?e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.BRACKET_LEFT:e[z.CTRL_OR_CMD]&&e.shiftKey&&e.code===et.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${k("labels.sendToBack")} — ${Q(Xo?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")}`,children:FA})}),Xde=oe({name:"bringToFront",label:"labels.bringToFront",keywords:["move up","zindex","layer"],icon:PA,trackEvent:{category:"element"},perform:(e,t)=>({elements:yce(e,t),appState:t,captureUpdate:K.IMMEDIATELY}),keyTest:e=>Xo?e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.BRACKET_RIGHT:e[z.CTRL_OR_CMD]&&e.shiftKey&&e.code===et.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:n=>e(null),title:`${k("labels.bringToFront")} — ${Q(Xo?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")}`,children:PA})}),jde=oe({name:"selectAll",label:"labels.selectAll",icon:Ide,trackEvent:{category:"canvas"},viewMode:!1,perform:(e,t,n,i)=>{if(t.editingLinearElement)return!1;const s=e.filter(r=>!r.isDeleted&&!(ue(r)&&r.containerId)&&!r.locked).reduce((r,o)=>(r[o.id]=!0,r),{});return{appState:{...t,...Li({editingGroupId:null,selectedElementIds:s},Bt(e),t,i),selectedLinearElement:Object.keys(s).length===1&&Ae(e[0])?new le(e[0],_e(e)):null},captureUpdate:K.IMMEDIATELY}},keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.A}),Yde=oe({name:"duplicateSelection",label:"labels.duplicateSelection",icon:l4,trackEvent:{category:"element"},perform:(e,t,n,i)=>{if(t.selectedElementsAreBeingDragged)return!1;if(t.editingLinearElement)try{const o=le.duplicateSelectedPoints(t,i.scene);return{elements:e,appState:o,captureUpdate:K.IMMEDIATELY}}catch{return!1}let{duplicatedElements:s,elementsWithDuplicates:r}=Vb({type:"in-place",elements:e,idsOfElementsToDuplicate:_e(He(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),appState:t,randomizeSeed:!0,overrides:({origElement:o,origIdToDuplicateId:a})=>{const l=o.frameId&&a.get(o.frameId);return{x:o.x+mb/2,y:o.y+mb/2,frameId:l??o.frameId}}});if(i.props.onDuplicate&&r){const o=i.props.onDuplicate(r,e);o&&(r=o)}return{elements:oo(r,_e(s)),appState:{...t,...iB(s,Bt(r),t)},captureUpdate:K.IMMEDIATELY}},keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.D,PanelComponent:({elements:e,appState:t,updateData:n})=>g(Ye,{type:"button",icon:l4,title:`${k("labels.duplicateSelection")} — ${Q("CtrlOrCmd+D")}`,"aria-label":k("labels.duplicateSelection"),onClick:()=>n(null),visible:Gn(Bt(e),t)})});var Wde={VITE_APP_BACKEND_V2_GET_URL:"https://json-dev.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json-dev.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_WS_SERVER_URL:"http://localhost:3002",VITE_APP_PLUS_LP:"",VITE_APP_PLUS_APP:"http://localhost:3000",VITE_APP_AI_BACKEND:"http://localhost:3015",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyCMkxA60XIW8KbqMYL7edC4qT5l4qHX2h8","authDomain":"excalidraw-oss-dev.firebaseapp.com","projectId":"excalidraw-oss-dev","storageBucket":"excalidraw-oss-dev.appspot.com","messagingSenderId":"664559512677","appId":"1:664559512677:web:a385181f2928d328a7aa8c"}',VITE_APP_DEV_DISABLE_LIVE_RELOAD:"",VITE_APP_ENABLE_TRACKING:"true",VITE_APP_PORT:"3000",VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"",VITE_APP_COLLAPSE_OVERLAY:"true",VITE_APP_ENABLE_ESLINT:"true",VITE_APP_ENABLE_PWA:"false",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAm2g5T+Rub6Kbf1Mf57t0
7r2zeHuVg4dla3r5ryXMswtzz6x767octl6oLThn33mQsPSy3GKglFZoCTXJR4ij
ba8SxB04sL/N8eRrKja7TFWjCVtRwTTfyy771NYYNFVJclkxHyE5qw4m27crHF1y
UNWEjuqNMi/lwAErS9fFa2oJlWyT8U7zzv/5kQREkxZI6y9v0AF3qcbsy2731FnD
s9ChJvOUW9toIab2gsIdrKW8ZNpu084ZFVKb6LNjvIXI1Se4oMTHeszXzNptzlot
kdxxjOoaQMAyfljFSot1F1FlU6MQlag7UnFGvFjRHN1JI5q4K+n3a67DX+TMyRqS
HQIDAQAB`,VITE_APP_DISABLE_PREVENT_UNLOAD:"",BASE_URL:"/",MODE:"development",DEV:!1,PROD:!0,SSR:!1};const Kde=new Set(["command_palette","export"]),at=(e,t,n,i)=>{try{if(typeof window>"u"||Wde.VITE_WORKER_ID||!Kde.has(e)||G9())return;window.sa_event&&window.sa_event(t,{category:e,label:n,value:i})}catch(s){console.error("error during analytics",s)}},NH=L.forwardRef((e,t)=>{const{title:n,className:i,testId:s,active:r,standalone:o,icon:a,onClick:l}=e;return g("button",{type:"button",ref:t,title:n,"data-testid":s,className:pe(i,{standalone:o,active:r}),onClick:l,children:a},n)}),sa=e=>g("div",{className:"buttonList",children:e.options.map(t=>e.type==="button"?g(NH,{icon:t.icon,title:t.text,testId:t.testId,active:t.active??e.value===t.value,onClick:n=>e.onClick(t.value,n)},t.text):P("label",{className:pe({active:e.value===t.value}),title:t.text,children:[g("input",{type:"radio",name:e.group,onChange:()=>e.onChange(t.value),checked:e.value===t.value,"data-testid":t.testId}),t.icon]},t.text))});function Ii(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function ZA(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function OH(...e){return t=>{let n=!1;const i=e.map(s=>{const r=ZA(s,t);return!n&&typeof r=="function"&&(n=!0),r});if(n)return()=>{for(let s=0;s<i.length;s++){const r=i[s];typeof r=="function"?r():ZA(e[s],null)}}}}function co(...e){return L.useCallback(OH(...e),e)}function cp(e,t=[]){let n=[];function i(r,o){const a=L.createContext(o),l=n.length;n=[...n,o];const c=d=>{var y;const{scope:f,children:h,...m}=d,p=((y=f==null?void 0:f[e])==null?void 0:y[l])||a,U=L.useMemo(()=>m,Object.values(m));return g(p.Provider,{value:U,children:h})};c.displayName=r+"Provider";function u(d,f){var p;const h=((p=f==null?void 0:f[e])==null?void 0:p[l])||a,m=L.useContext(h);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${r}\``)}return[c,u]}const s=()=>{const r=n.map(o=>L.createContext(o));return function(a){const l=(a==null?void 0:a[e])||r;return L.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return s.scopeName=e,[i,Zde(s,...t)]}function Zde(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(r){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(r)[`__scope${c}`];return{...a,...d}},{});return L.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var tm=L.forwardRef((e,t)=>{const{children:n,...i}=e,s=L.Children.toArray(n),r=s.find(Qde);if(r){const o=r.props.children,a=s.map(l=>l===r?L.Children.count(o)>1?L.Children.only(null):L.isValidElement(o)?o.props.children:null:l);return g(p4,{...i,ref:t,children:L.isValidElement(o)?L.cloneElement(o,void 0,a):null})}return g(p4,{...i,ref:t,children:n})});tm.displayName="Slot";var p4=L.forwardRef((e,t)=>{const{children:n,...i}=e;if(L.isValidElement(n)){const s=efe(n),r=Jde(i,n.props);return n.type!==L.Fragment&&(r.ref=t?OH(t,s):s),L.cloneElement(n,r)}return L.Children.count(n)>1?L.Children.only(null):null});p4.displayName="SlotClone";var qde=({children:e})=>g(ge,{children:e});function Qde(e){return L.isValidElement(e)&&e.type===qde}function Jde(e,t){const n={...t};for(const i in t){const s=e[i],r=t[i];/^on[A-Z]/.test(i)?s&&r?n[i]=(...a)=>{r(...a),s(...a)}:s&&(n[i]=s):i==="style"?n[i]={...s,...r}:i==="className"&&(n[i]=[s,r].filter(Boolean).join(" "))}return{...e,...n}}function efe(e){var i,s;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var tfe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],rs=tfe.reduce((e,t)=>{const n=L.forwardRef((i,s)=>{const{asChild:r,...o}=i,a=r?tm:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g(a,{...o,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function nfe(e,t){e&&Ln.flushSync(()=>e.dispatchEvent(t))}function rl(e){const t=L.useRef(e);return L.useEffect(()=>{t.current=e}),L.useMemo(()=>(...n)=>{var i;return(i=t.current)==null?void 0:i.call(t,...n)},[])}function ife(e,t=globalThis==null?void 0:globalThis.document){const n=rl(e);L.useEffect(()=>{const i=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[n,t])}var sfe="DismissableLayer",U4="dismissableLayer.update",rfe="dismissableLayer.pointerDownOutside",ofe="dismissableLayer.focusOutside",qA,PH=L.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),FH=L.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:r,onInteractOutside:o,onDismiss:a,...l}=e,c=L.useContext(PH),[u,d]=L.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=L.useState({}),m=co(t,T=>d(T)),p=Array.from(c.layers),[U]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=p.indexOf(U),E=u?p.indexOf(u):-1,v=c.layersWithOutsidePointerEventsDisabled.size>0,w=E>=y,I=cfe(T=>{const _=T.target,x=[...c.branches].some(C=>C.contains(_));!w||x||(s==null||s(T),o==null||o(T),T.defaultPrevented||a==null||a())},f),M=ufe(T=>{const _=T.target;[...c.branches].some(C=>C.contains(_))||(r==null||r(T),o==null||o(T),T.defaultPrevented||a==null||a())},f);return ife(T=>{E===c.layers.size-1&&(i==null||i(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},f),L.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(qA=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),QA(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=qA)}},[u,f,n,c]),L.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),QA())},[u,c]),L.useEffect(()=>{const T=()=>h({});return document.addEventListener(U4,T),()=>document.removeEventListener(U4,T)},[]),g(rs.div,{...l,ref:m,style:{pointerEvents:v?w?"auto":"none":void 0,...e.style},onFocusCapture:Ii(e.onFocusCapture,M.onFocusCapture),onBlurCapture:Ii(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Ii(e.onPointerDownCapture,I.onPointerDownCapture)})});FH.displayName=sfe;var afe="DismissableLayerBranch",lfe=L.forwardRef((e,t)=>{const n=L.useContext(PH),i=L.useRef(null),s=co(t,i);return L.useEffect(()=>{const r=i.current;if(r)return n.branches.add(r),()=>{n.branches.delete(r)}},[n.branches]),g(rs.div,{...e,ref:s})});lfe.displayName=afe;function cfe(e,t=globalThis==null?void 0:globalThis.document){const n=rl(e),i=L.useRef(!1),s=L.useRef(()=>{});return L.useEffect(()=>{const r=a=>{if(a.target&&!i.current){let l=function(){BH(rfe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);i.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",r),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}function ufe(e,t=globalThis==null?void 0:globalThis.document){const n=rl(e),i=L.useRef(!1);return L.useEffect(()=>{const s=r=>{r.target&&!i.current&&BH(ofe,n,{originalEvent:r},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function QA(){const e=new CustomEvent(U4);document.dispatchEvent(e)}function BH(e,t,n,{discrete:i}){const s=n.originalEvent.target,r=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),i?nfe(s,r):s.dispatchEvent(r)}var sE=0;function dfe(){L.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??JA()),document.body.insertAdjacentElement("beforeend",e[1]??JA()),sE++,()=>{sE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),sE--}},[])}function JA(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var rE="focusScope.autoFocusOnMount",oE="focusScope.autoFocusOnUnmount",eM={bubbles:!1,cancelable:!0},ffe="FocusScope",zH=L.forwardRef((e,t)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:s,onUnmountAutoFocus:r,...o}=e,[a,l]=L.useState(null),c=rl(s),u=rl(r),d=L.useRef(null),f=co(t,p=>l(p)),h=L.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;L.useEffect(()=>{if(i){let p=function(v){if(h.paused||!a)return;const w=v.target;a.contains(w)?d.current=w:kl(d.current,{select:!0})},U=function(v){if(h.paused||!a)return;const w=v.relatedTarget;w!==null&&(a.contains(w)||kl(d.current,{select:!0}))},y=function(v){if(document.activeElement===document.body)for(const I of v)I.removedNodes.length>0&&kl(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",U);const E=new MutationObserver(y);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",U),E.disconnect()}}},[i,a,h.paused]),L.useEffect(()=>{if(a){nM.add(h);const p=document.activeElement;if(!a.contains(p)){const y=new CustomEvent(rE,eM);a.addEventListener(rE,c),a.dispatchEvent(y),y.defaultPrevented||(hfe(bfe(HH(a)),{select:!0}),document.activeElement===p&&kl(a))}return()=>{a.removeEventListener(rE,c),setTimeout(()=>{const y=new CustomEvent(oE,eM);a.addEventListener(oE,u),a.dispatchEvent(y),y.defaultPrevented||kl(p??document.body,{select:!0}),a.removeEventListener(oE,u),nM.remove(h)},0)}}},[a,c,u,h]);const m=L.useCallback(p=>{if(!n&&!i||h.paused)return;const U=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,y=document.activeElement;if(U&&y){const E=p.currentTarget,[v,w]=gfe(E);v&&w?!p.shiftKey&&y===w?(p.preventDefault(),n&&kl(v,{select:!0})):p.shiftKey&&y===v&&(p.preventDefault(),n&&kl(w,{select:!0})):y===E&&p.preventDefault()}},[n,i,h.paused]);return g(rs.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});zH.displayName=ffe;function hfe(e,{select:t=!1}={}){const n=document.activeElement;for(const i of e)if(kl(i,{select:t}),document.activeElement!==n)return}function gfe(e){const t=HH(e),n=tM(t,e),i=tM(t.reverse(),e);return[n,i]}function HH(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const s=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||s?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function tM(e,t){for(const n of e)if(!mfe(n,{upTo:t}))return n}function mfe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function pfe(e){return e instanceof HTMLInputElement&&"select"in e}function kl(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&pfe(e)&&t&&e.select()}}var nM=Ufe();function Ufe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=iM(e,t),e.unshift(t)},remove(t){var n;e=iM(e,t),(n=e[0])==null||n.resume()}}}function iM(e,t){const n=[...e],i=n.indexOf(t);return i!==-1&&n.splice(i,1),n}function bfe(e){return e.filter(t=>t.tagName!=="A")}var pd=globalThis!=null&&globalThis.document?L.useLayoutEffect:()=>{},yfe=XK.useId||(()=>{}),Efe=0;function $w(e){const[t,n]=L.useState(yfe());return pd(()=>{n(i=>i??String(Efe++))},[e]),e||(t?`radix-${t}`:"")}const vfe=["top","right","bottom","left"],Pc=Math.min,Ds=Math.max,Zb=Math.round,pU=Math.floor,Ho=e=>({x:e,y:e}),wfe={left:"right",right:"left",bottom:"top",top:"bottom"},_fe={start:"end",end:"start"};function b4(e,t,n){return Ds(e,Pc(t,n))}function ol(e,t){return typeof e=="function"?e(t):e}function al(e){return e.split("-")[0]}function gg(e){return e.split("-")[1]}function Gw(e){return e==="x"?"y":"x"}function Xw(e){return e==="y"?"height":"width"}function Fc(e){return["top","bottom"].includes(al(e))?"y":"x"}function jw(e){return Gw(Fc(e))}function Tfe(e,t,n){n===void 0&&(n=!1);const i=gg(e),s=jw(e),r=Xw(s);let o=s==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(o=qb(o)),[o,qb(o)]}function Sfe(e){const t=qb(e);return[y4(e),t,y4(t)]}function y4(e){return e.replace(/start|end/g,t=>_fe[t])}function Ife(e,t,n){const i=["left","right"],s=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:i:t?i:s;case"left":case"right":return t?r:o;default:return[]}}function xfe(e,t,n,i){const s=gg(e);let r=Ife(al(e),n==="start",i);return s&&(r=r.map(o=>o+"-"+s),t&&(r=r.concat(r.map(y4)))),r}function qb(e){return e.replace(/left|right|bottom|top/g,t=>wfe[t])}function Cfe(e){return{top:0,right:0,bottom:0,left:0,...e}}function VH(e){return typeof e!="number"?Cfe(e):{top:e,right:e,bottom:e,left:e}}function Qb(e){const{x:t,y:n,width:i,height:s}=e;return{width:i,height:s,top:n,left:t,right:t+i,bottom:n+s,x:t,y:n}}function sM(e,t,n){let{reference:i,floating:s}=e;const r=Fc(t),o=jw(t),a=Xw(o),l=al(t),c=r==="y",u=i.x+i.width/2-s.width/2,d=i.y+i.height/2-s.height/2,f=i[a]/2-s[a]/2;let h;switch(l){case"top":h={x:u,y:i.y-s.height};break;case"bottom":h={x:u,y:i.y+i.height};break;case"right":h={x:i.x+i.width,y:d};break;case"left":h={x:i.x-s.width,y:d};break;default:h={x:i.x,y:i.y}}switch(gg(t)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const Afe=async(e,t,n)=>{const{placement:i="bottom",strategy:s="absolute",middleware:r=[],platform:o}=n,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:d}=sM(c,i,l),f=i,h={},m=0;for(let p=0;p<a.length;p++){const{name:U,fn:y}=a[p],{x:E,y:v,data:w,reset:I}=await y({x:u,y:d,initialPlacement:i,placement:f,strategy:s,middlewareData:h,rects:c,platform:o,elements:{reference:e,floating:t}});u=E??u,d=v??d,h={...h,[U]:{...h[U],...w}},I&&m<=50&&(m++,typeof I=="object"&&(I.placement&&(f=I.placement),I.rects&&(c=I.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):I.rects),{x:u,y:d}=sM(c,f,l)),p=-1)}return{x:u,y:d,placement:f,strategy:s,middlewareData:h}};async function nm(e,t){var n;t===void 0&&(t={});const{x:i,y:s,platform:r,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=ol(t,e),m=VH(h),U=a[f?d==="floating"?"reference":"floating":d],y=Qb(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(U)))==null||n?U:U.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),E=d==="floating"?{x:i,y:s,width:o.floating.width,height:o.floating.height}:o.reference,v=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),w=await(r.isElement==null?void 0:r.isElement(v))?await(r.getScale==null?void 0:r.getScale(v))||{x:1,y:1}:{x:1,y:1},I=Qb(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:v,strategy:l}):E);return{top:(y.top-I.top+m.top)/w.y,bottom:(I.bottom-y.bottom+m.bottom)/w.y,left:(y.left-I.left+m.left)/w.x,right:(I.right-y.right+m.right)/w.x}}const Mfe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:i,placement:s,rects:r,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=ol(e,t)||{};if(c==null)return{};const d=VH(u),f={x:n,y:i},h=jw(s),m=Xw(h),p=await o.getDimensions(c),U=h==="y",y=U?"top":"left",E=U?"bottom":"right",v=U?"clientHeight":"clientWidth",w=r.reference[m]+r.reference[h]-f[h]-r.floating[m],I=f[h]-r.reference[h],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let T=M?M[v]:0;(!T||!await(o.isElement==null?void 0:o.isElement(M)))&&(T=a.floating[v]||r.floating[m]);const _=w/2-I/2,x=T/2-p[m]/2-1,C=Pc(d[y],x),R=Pc(d[E],x),N=C,D=T-p[m]-R,$=T/2-p[m]/2+_,G=b4(N,$,D),H=!l.arrow&&gg(s)!=null&&$!==G&&r.reference[m]/2-($<N?C:R)-p[m]/2<0,V=H?$<N?$-N:$-D:0;return{[h]:f[h]+V,data:{[h]:G,centerOffset:$-G-V,...H&&{alignmentOffset:V}},reset:H}}}),Rfe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:s,middlewareData:r,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...U}=ol(e,t);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const y=al(s),E=Fc(a),v=al(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),I=f||(v||!p?[qb(a)]:Sfe(a)),M=m!=="none";!f&&M&&I.push(...xfe(a,p,m,w));const T=[a,...I],_=await nm(t,U),x=[];let C=((i=r.flip)==null?void 0:i.overflows)||[];if(u&&x.push(_[y]),d){const $=Tfe(s,o,w);x.push(_[$[0]],_[$[1]])}if(C=[...C,{placement:s,overflows:x}],!x.every($=>$<=0)){var R,N;const $=(((R=r.flip)==null?void 0:R.index)||0)+1,G=T[$];if(G)return{data:{index:$,overflows:C},reset:{placement:G}};let H=(N=C.filter(V=>V.overflows[0]<=0).sort((V,X)=>V.overflows[1]-X.overflows[1])[0])==null?void 0:N.placement;if(!H)switch(h){case"bestFit":{var D;const V=(D=C.filter(X=>{if(M){const j=Fc(X.placement);return j===E||j==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(j=>j>0).reduce((j,q)=>j+q,0)]).sort((X,j)=>X[1]-j[1])[0])==null?void 0:D[0];V&&(H=V);break}case"initialPlacement":H=a;break}if(s!==H)return{reset:{placement:H}}}return{}}}};function rM(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function oM(e){return vfe.some(t=>e[t]>=0)}const kfe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:i="referenceHidden",...s}=ol(e,t);switch(i){case"referenceHidden":{const r=await nm(t,{...s,elementContext:"reference"}),o=rM(r,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:oM(o)}}}case"escaped":{const r=await nm(t,{...s,altBoundary:!0}),o=rM(r,n.floating);return{data:{escapedOffsets:o,escaped:oM(o)}}}default:return{}}}}};async function Dfe(e,t){const{placement:n,platform:i,elements:s}=e,r=await(i.isRTL==null?void 0:i.isRTL(s.floating)),o=al(n),a=gg(n),l=Fc(n)==="y",c=["left","top"].includes(o)?-1:1,u=r&&l?-1:1,d=ol(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const Lfe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:s,y:r,placement:o,middlewareData:a}=t,l=await Dfe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:s+l.x,y:r+l.y,data:{...l,placement:o}}}}},Nfe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:s}=t,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:U=>{let{x:y,y:E}=U;return{x:y,y:E}}},...l}=ol(e,t),c={x:n,y:i},u=await nm(t,l),d=Fc(al(s)),f=Gw(d);let h=c[f],m=c[d];if(r){const U=f==="y"?"top":"left",y=f==="y"?"bottom":"right",E=h+u[U],v=h-u[y];h=b4(E,h,v)}if(o){const U=d==="y"?"top":"left",y=d==="y"?"bottom":"right",E=m+u[U],v=m-u[y];m=b4(E,m,v)}const p=a.fn({...t,[f]:h,[d]:m});return{...p,data:{x:p.x-n,y:p.y-i,enabled:{[f]:r,[d]:o}}}}}},Ofe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:i,placement:s,rects:r,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ol(e,t),u={x:n,y:i},d=Fc(s),f=Gw(d);let h=u[f],m=u[d];const p=ol(a,t),U=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const v=f==="y"?"height":"width",w=r.reference[f]-r.floating[v]+U.mainAxis,I=r.reference[f]+r.reference[v]-U.mainAxis;h<w?h=w:h>I&&(h=I)}if(c){var y,E;const v=f==="y"?"width":"height",w=["top","left"].includes(al(s)),I=r.reference[d]-r.floating[v]+(w&&((y=o.offset)==null?void 0:y[d])||0)+(w?0:U.crossAxis),M=r.reference[d]+r.reference[v]+(w?0:((E=o.offset)==null?void 0:E[d])||0)-(w?U.crossAxis:0);m<I?m=I:m>M&&(m=M)}return{[f]:h,[d]:m}}}},Pfe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,i;const{placement:s,rects:r,platform:o,elements:a}=t,{apply:l=()=>{},...c}=ol(e,t),u=await nm(t,c),d=al(s),f=gg(s),h=Fc(s)==="y",{width:m,height:p}=r.floating;let U,y;d==="top"||d==="bottom"?(U=d,y=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,U=f==="end"?"top":"bottom");const E=p-u.top-u.bottom,v=m-u.left-u.right,w=Pc(p-u[U],E),I=Pc(m-u[y],v),M=!t.middlewareData.shift;let T=w,_=I;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(_=v),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(T=E),M&&!f){const C=Ds(u.left,0),R=Ds(u.right,0),N=Ds(u.top,0),D=Ds(u.bottom,0);h?_=m-2*(C!==0||R!==0?C+R:Ds(u.left,u.right)):T=p-2*(N!==0||D!==0?N+D:Ds(u.top,u.bottom))}await l({...t,availableWidth:_,availableHeight:T});const x=await o.getDimensions(a.floating);return m!==x.width||p!==x.height?{reset:{rects:!0}}:{}}}};function k5(){return typeof window<"u"}function mg(e){return $H(e)?(e.nodeName||"").toLowerCase():"#document"}function Gs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ra(e){var t;return(t=($H(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function $H(e){return k5()?e instanceof Node||e instanceof Gs(e).Node:!1}function uo(e){return k5()?e instanceof Element||e instanceof Gs(e).Element:!1}function Qo(e){return k5()?e instanceof HTMLElement||e instanceof Gs(e).HTMLElement:!1}function aM(e){return!k5()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Gs(e).ShadowRoot}function up(e){const{overflow:t,overflowX:n,overflowY:i,display:s}=fo(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(s)}function Ffe(e){return["table","td","th"].includes(mg(e))}function D5(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Yw(e){const t=Ww(),n=uo(e)?fo(e):e;return["transform","translate","scale","rotate","perspective"].some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function Bfe(e){let t=Bc(e);for(;Qo(t)&&!Bh(t);){if(Yw(t))return t;if(D5(t))return null;t=Bc(t)}return null}function Ww(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Bh(e){return["html","body","#document"].includes(mg(e))}function fo(e){return Gs(e).getComputedStyle(e)}function L5(e){return uo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Bc(e){if(mg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||aM(e)&&e.host||ra(e);return aM(t)?t.host:t}function GH(e){const t=Bc(e);return Bh(t)?e.ownerDocument?e.ownerDocument.body:e.body:Qo(t)&&up(t)?t:GH(t)}function im(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=GH(e),r=s===((i=e.ownerDocument)==null?void 0:i.body),o=Gs(s);if(r){const a=E4(o);return t.concat(o,o.visualViewport||[],up(s)?s:[],a&&n?im(a):[])}return t.concat(s,im(s,[],n))}function E4(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function XH(e){const t=fo(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const s=Qo(e),r=s?e.offsetWidth:n,o=s?e.offsetHeight:i,a=Zb(n)!==r||Zb(i)!==o;return a&&(n=r,i=o),{width:n,height:i,$:a}}function Kw(e){return uo(e)?e:e.contextElement}function oh(e){const t=Kw(e);if(!Qo(t))return Ho(1);const n=t.getBoundingClientRect(),{width:i,height:s,$:r}=XH(t);let o=(r?Zb(n.width):n.width)/i,a=(r?Zb(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const zfe=Ho(0);function jH(e){const t=Gs(e);return!Ww()||!t.visualViewport?zfe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Hfe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Gs(e)?!1:t}function Ud(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),r=Kw(e);let o=Ho(1);t&&(i?uo(i)&&(o=oh(i)):o=oh(e));const a=Hfe(r,n,i)?jH(r):Ho(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(r){const f=Gs(r),h=i&&uo(i)?Gs(i):i;let m=f,p=E4(m);for(;p&&i&&h!==m;){const U=oh(p),y=p.getBoundingClientRect(),E=fo(p),v=y.left+(p.clientLeft+parseFloat(E.paddingLeft))*U.x,w=y.top+(p.clientTop+parseFloat(E.paddingTop))*U.y;l*=U.x,c*=U.y,u*=U.x,d*=U.y,l+=v,c+=w,m=Gs(p),p=E4(m)}}return Qb({width:u,height:d,x:l,y:c})}function Zw(e,t){const n=L5(e).scrollLeft;return t?t.left+n:Ud(ra(e)).left+n}function YH(e,t,n){n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=i.left+t.scrollLeft-(n?0:Zw(e,i)),r=i.top+t.scrollTop;return{x:s,y:r}}function Vfe(e){let{elements:t,rect:n,offsetParent:i,strategy:s}=e;const r=s==="fixed",o=ra(i),a=t?D5(t.floating):!1;if(i===o||a&&r)return n;let l={scrollLeft:0,scrollTop:0},c=Ho(1);const u=Ho(0),d=Qo(i);if((d||!d&&!r)&&((mg(i)!=="body"||up(o))&&(l=L5(i)),Qo(i))){const h=Ud(i);c=oh(i),u.x=h.x+i.clientLeft,u.y=h.y+i.clientTop}const f=o&&!d&&!r?YH(o,l,!0):Ho(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function $fe(e){return Array.from(e.getClientRects())}function Gfe(e){const t=ra(e),n=L5(e),i=e.ownerDocument.body,s=Ds(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),r=Ds(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+Zw(e);const a=-n.scrollTop;return fo(i).direction==="rtl"&&(o+=Ds(t.clientWidth,i.clientWidth)-s),{width:s,height:r,x:o,y:a}}function Xfe(e,t){const n=Gs(e),i=ra(e),s=n.visualViewport;let r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;const c=Ww();(!c||c&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a,y:l}}function jfe(e,t){const n=Ud(e,!0,t==="fixed"),i=n.top+e.clientTop,s=n.left+e.clientLeft,r=Qo(e)?oh(e):Ho(1),o=e.clientWidth*r.x,a=e.clientHeight*r.y,l=s*r.x,c=i*r.y;return{width:o,height:a,x:l,y:c}}function lM(e,t,n){let i;if(t==="viewport")i=Xfe(e,n);else if(t==="document")i=Gfe(ra(e));else if(uo(t))i=jfe(t,n);else{const s=jH(e);i={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Qb(i)}function WH(e,t){const n=Bc(e);return n===t||!uo(n)||Bh(n)?!1:fo(n).position==="fixed"||WH(n,t)}function Yfe(e,t){const n=t.get(e);if(n)return n;let i=im(e,[],!1).filter(a=>uo(a)&&mg(a)!=="body"),s=null;const r=fo(e).position==="fixed";let o=r?Bc(e):e;for(;uo(o)&&!Bh(o);){const a=fo(o),l=Yw(o);!l&&a.position==="fixed"&&(s=null),(r?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||up(o)&&!l&&WH(e,o))?i=i.filter(u=>u!==o):s=a,o=Bc(o)}return t.set(e,i),i}function Wfe(e){let{element:t,boundary:n,rootBoundary:i,strategy:s}=e;const o=[...n==="clippingAncestors"?D5(t)?[]:Yfe(t,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=lM(t,u,s);return c.top=Ds(d.top,c.top),c.right=Pc(d.right,c.right),c.bottom=Pc(d.bottom,c.bottom),c.left=Ds(d.left,c.left),c},lM(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Kfe(e){const{width:t,height:n}=XH(e);return{width:t,height:n}}function Zfe(e,t,n){const i=Qo(t),s=ra(t),r=n==="fixed",o=Ud(e,!0,r,t);let a={scrollLeft:0,scrollTop:0};const l=Ho(0);if(i||!i&&!r)if((mg(t)!=="body"||up(s))&&(a=L5(t)),i){const f=Ud(t,!0,r,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else s&&(l.x=Zw(s));const c=s&&!i&&!r?YH(s,a):Ho(0),u=o.left+a.scrollLeft-l.x-c.x,d=o.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:o.width,height:o.height}}function aE(e){return fo(e).position==="static"}function cM(e,t){if(!Qo(e)||fo(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ra(e)===n&&(n=n.ownerDocument.body),n}function KH(e,t){const n=Gs(e);if(D5(e))return n;if(!Qo(e)){let s=Bc(e);for(;s&&!Bh(s);){if(uo(s)&&!aE(s))return s;s=Bc(s)}return n}let i=cM(e,t);for(;i&&Ffe(i)&&aE(i);)i=cM(i,t);return i&&Bh(i)&&aE(i)&&!Yw(i)?n:i||Bfe(e)||n}const qfe=async function(e){const t=this.getOffsetParent||KH,n=this.getDimensions,i=await n(e.floating);return{reference:Zfe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Qfe(e){return fo(e).direction==="rtl"}const Jfe={convertOffsetParentRelativeRectToViewportRelativeRect:Vfe,getDocumentElement:ra,getClippingRect:Wfe,getOffsetParent:KH,getElementRects:qfe,getClientRects:$fe,getDimensions:Kfe,getScale:oh,isElement:uo,isRTL:Qfe};function ZH(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ehe(e,t){let n=null,i;const s=ra(e);function r(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),r();const c=e.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||t(),!f||!h)return;const m=pU(d),p=pU(s.clientWidth-(u+f)),U=pU(s.clientHeight-(d+h)),y=pU(u),v={rootMargin:-m+"px "+-p+"px "+-U+"px "+-y+"px",threshold:Ds(0,Pc(1,l))||1};let w=!0;function I(M){const T=M[0].intersectionRatio;if(T!==l){if(!w)return o();T?o(!1,T):i=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!ZH(c,e.getBoundingClientRect())&&o(),w=!1}try{n=new IntersectionObserver(I,{...v,root:s.ownerDocument})}catch{n=new IntersectionObserver(I,v)}n.observe(e)}return o(!0),r}function the(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=Kw(e),u=s||r?[...c?im(c):[],...im(t)]:[];u.forEach(y=>{s&&y.addEventListener("scroll",n,{passive:!0}),r&&y.addEventListener("resize",n)});const d=c&&a?ehe(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(y=>{let[E]=y;E&&E.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var v;(v=h)==null||v.observe(t)})),n()}),c&&!l&&h.observe(c),h.observe(t));let m,p=l?Ud(e):null;l&&U();function U(){const y=Ud(e);p&&!ZH(p,y)&&n(),p=y,m=requestAnimationFrame(U)}return n(),()=>{var y;u.forEach(E=>{s&&E.removeEventListener("scroll",n),r&&E.removeEventListener("resize",n)}),d==null||d(),(y=h)==null||y.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const nhe=Lfe,ihe=Nfe,she=Rfe,rhe=Pfe,ohe=kfe,uM=Mfe,ahe=Ofe,lhe=(e,t,n)=>{const i=new Map,s={platform:Jfe,...n},r={...s.platform,_c:i};return Afe(e,t,{...s,platform:r})};var m2=typeof document<"u"?L.useLayoutEffect:L.useEffect;function Jb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,i,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(i=n;i--!==0;)if(!Jb(e[i],t[i]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(t,s[i]))return!1;for(i=n;i--!==0;){const r=s[i];if(!(r==="_owner"&&e.$$typeof)&&!Jb(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function qH(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function dM(e,t){const n=qH(e);return Math.round(t*n)/n}function lE(e){const t=L.useRef(e);return m2(()=>{t.current=e}),t}function che(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:s,elements:{reference:r,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=L.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=L.useState(i);Jb(f,i)||h(i);const[m,p]=L.useState(null),[U,y]=L.useState(null),E=L.useCallback(X=>{X!==M.current&&(M.current=X,p(X))},[]),v=L.useCallback(X=>{X!==T.current&&(T.current=X,y(X))},[]),w=r||m,I=o||U,M=L.useRef(null),T=L.useRef(null),_=L.useRef(u),x=l!=null,C=lE(l),R=lE(s),N=lE(c),D=L.useCallback(()=>{if(!M.current||!T.current)return;const X={placement:t,strategy:n,middleware:f};R.current&&(X.platform=R.current),lhe(M.current,T.current,X).then(j=>{const q={...j,isPositioned:N.current!==!1};$.current&&!Jb(_.current,q)&&(_.current=q,Ln.flushSync(()=>{d(q)}))})},[f,t,n,R,N]);m2(()=>{c===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,d(X=>({...X,isPositioned:!1})))},[c]);const $=L.useRef(!1);m2(()=>($.current=!0,()=>{$.current=!1}),[]),m2(()=>{if(w&&(M.current=w),I&&(T.current=I),w&&I){if(C.current)return C.current(w,I,D);D()}},[w,I,D,C,x]);const G=L.useMemo(()=>({reference:M,floating:T,setReference:E,setFloating:v}),[E,v]),H=L.useMemo(()=>({reference:w,floating:I}),[w,I]),V=L.useMemo(()=>{const X={position:n,left:0,top:0};if(!H.floating)return X;const j=dM(H.floating,u.x),q=dM(H.floating,u.y);return a?{...X,transform:"translate("+j+"px, "+q+"px)",...qH(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:j,top:q}},[n,a,H.floating,u.x,u.y]);return L.useMemo(()=>({...u,update:D,refs:G,elements:H,floatingStyles:V}),[u,D,G,H,V])}const uhe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:i,padding:s}=typeof e=="function"?e(n):e;return i&&t(i)?i.current!=null?uM({element:i.current,padding:s}).fn(n):{}:i?uM({element:i,padding:s}).fn(n):{}}}},dhe=(e,t)=>({...nhe(e),options:[e,t]}),fhe=(e,t)=>({...ihe(e),options:[e,t]}),hhe=(e,t)=>({...ahe(e),options:[e,t]}),ghe=(e,t)=>({...she(e),options:[e,t]}),mhe=(e,t)=>({...rhe(e),options:[e,t]}),phe=(e,t)=>({...ohe(e),options:[e,t]}),Uhe=(e,t)=>({...uhe(e),options:[e,t]});var bhe="Arrow",QH=L.forwardRef((e,t)=>{const{children:n,width:i=10,height:s=5,...r}=e;return g(rs.svg,{...r,ref:t,width:i,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:g("polygon",{points:"0,0 30,0 15,10"})})});QH.displayName=bhe;var yhe=QH;function Ehe(e){const[t,n]=L.useState(void 0);return pd(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const r=s[0];let o,a;if("borderBoxSize"in r){const l=r.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else n(void 0)},[e]),t}var qw="Popper",[JH,eV]=cp(qw),[vhe,tV]=JH(qw),nV=e=>{const{__scopePopper:t,children:n}=e,[i,s]=L.useState(null);return g(vhe,{scope:t,anchor:i,onAnchorChange:s,children:n})};nV.displayName=qw;var iV="PopperAnchor",sV=L.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:i,...s}=e,r=tV(iV,n),o=L.useRef(null),a=co(t,o);return L.useEffect(()=>{r.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:g(rs.div,{...s,ref:a})});sV.displayName=iV;var Qw="PopperContent",[whe,_he]=JH(Qw),rV=L.forwardRef((e,t)=>{var zt,Mt,qt,Ce,Ge,Qt;const{__scopePopper:n,side:i="bottom",sideOffset:s=0,align:r="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:m,...p}=e,U=tV(Qw,n),[y,E]=L.useState(null),v=co(t,as=>E(as)),[w,I]=L.useState(null),M=Ehe(w),T=(M==null?void 0:M.width)??0,_=(M==null?void 0:M.height)??0,x=i+(r!=="center"?"-"+r:""),C=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},R=Array.isArray(c)?c:[c],N=R.length>0,D={padding:C,boundary:R.filter(She),altBoundary:N},{refs:$,floatingStyles:G,placement:H,isPositioned:V,middlewareData:X}=che({strategy:"fixed",placement:x,whileElementsMounted:(...as)=>the(...as,{animationFrame:h==="always"}),elements:{reference:U.anchor},middleware:[dhe({mainAxis:s+_,alignmentAxis:o}),l&&fhe({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?hhe():void 0,...D}),l&&ghe({...D}),mhe({...D,apply:({elements:as,rects:Ar,availableWidth:Mr,availableHeight:Is})=>{const{width:Cy,height:Ay}=Ar.reference,tu=as.floating.style;tu.setProperty("--radix-popper-available-width",`${Mr}px`),tu.setProperty("--radix-popper-available-height",`${Is}px`),tu.setProperty("--radix-popper-anchor-width",`${Cy}px`),tu.setProperty("--radix-popper-anchor-height",`${Ay}px`)}}),w&&Uhe({element:w,padding:a}),Ihe({arrowWidth:T,arrowHeight:_}),f&&phe({strategy:"referenceHidden",...D})]}),[j,q]=lV(H),fe=rl(m);pd(()=>{V&&(fe==null||fe())},[V,fe]);const ie=(zt=X.arrow)==null?void 0:zt.x,Ue=(Mt=X.arrow)==null?void 0:Mt.y,Ve=((qt=X.arrow)==null?void 0:qt.centerOffset)!==0,[$e,nt]=L.useState();return pd(()=>{y&&nt(window.getComputedStyle(y).zIndex)},[y]),g("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:V?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$e,"--radix-popper-transform-origin":[(Ce=X.transformOrigin)==null?void 0:Ce.x,(Ge=X.transformOrigin)==null?void 0:Ge.y].join(" "),...((Qt=X.hide)==null?void 0:Qt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:g(whe,{scope:n,placedSide:j,onArrowChange:I,arrowX:ie,arrowY:Ue,shouldHideArrow:Ve,children:g(rs.div,{"data-side":j,"data-align":q,...p,ref:v,style:{...p.style,animation:V?void 0:"none"}})})})});rV.displayName=Qw;var oV="PopperArrow",The={top:"bottom",right:"left",bottom:"top",left:"right"},aV=L.forwardRef(function(t,n){const{__scopePopper:i,...s}=t,r=_he(oV,i),o=The[r.placedSide];return g("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:g(yhe,{...s,ref:n,style:{...s.style,display:"block"}})})});aV.displayName=oV;function She(e){return e!==null}var Ihe=e=>({name:"transformOrigin",options:e,fn(t){var U,y,E;const{placement:n,rects:i,middlewareData:s}=t,o=((U=s.arrow)==null?void 0:U.centerOffset)!==0,a=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[c,u]=lV(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((y=s.arrow)==null?void 0:y.x)??0)+a/2,h=(((E=s.arrow)==null?void 0:E.y)??0)+l/2;let m="",p="";return c==="bottom"?(m=o?d:`${f}px`,p=`${-l}px`):c==="top"?(m=o?d:`${f}px`,p=`${i.floating.height+l}px`):c==="right"?(m=`${-l}px`,p=o?d:`${h}px`):c==="left"&&(m=`${i.floating.width+l}px`,p=o?d:`${h}px`),{data:{x:m,y:p}}}});function lV(e){const[t,n="center"]=e.split("-");return[t,n]}var xhe=nV,cV=sV,Che=rV,Ahe=aV,Mhe="Portal",uV=L.forwardRef((e,t)=>{var a;const{container:n,...i}=e,[s,r]=L.useState(!1);pd(()=>r(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?ZK.createPortal(g(rs.div,{...i,ref:t}),o):null});uV.displayName=Mhe;function Rhe(e,t){return L.useReducer((n,i)=>t[n][i]??n,e)}var N5=e=>{const{present:t,children:n}=e,i=khe(t),s=typeof n=="function"?n({present:i.isPresent}):L.Children.only(n),r=co(i.ref,Dhe(s));return typeof n=="function"||i.isPresent?L.cloneElement(s,{ref:r}):null};N5.displayName="Presence";function khe(e){const[t,n]=L.useState(),i=L.useRef({}),s=L.useRef(e),r=L.useRef("none"),o=e?"mounted":"unmounted",[a,l]=Rhe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L.useEffect(()=>{const c=UU(i.current);r.current=a==="mounted"?c:"none"},[a]),pd(()=>{const c=i.current,u=s.current;if(u!==e){const f=r.current,h=UU(c);e?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),pd(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,d=h=>{const p=UU(i.current).includes(h.animationName);if(h.target===t&&p&&(l("ANIMATION_END"),!s.current)){const U=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=U)})}},f=h=>{h.target===t&&(r.current=UU(i.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:L.useCallback(c=>{c&&(i.current=getComputedStyle(c)),n(c)},[])}}function UU(e){return(e==null?void 0:e.animationName)||"none"}function Dhe(e){var i,s;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Jw({prop:e,defaultProp:t,onChange:n=()=>{}}){const[i,s]=Lhe({defaultProp:t,onChange:n}),r=e!==void 0,o=r?e:i,a=rl(n),l=L.useCallback(c=>{if(r){const d=typeof c=="function"?c(e):c;d!==e&&a(d)}else s(c)},[r,e,s,a]);return[o,l]}function Lhe({defaultProp:e,onChange:t}){const n=L.useState(e),[i]=n,s=L.useRef(i),r=rl(t);return L.useEffect(()=>{s.current!==i&&(r(i),s.current=i)},[i,s,r]),n}var Nhe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ef=new WeakMap,bU=new WeakMap,yU={},cE=0,dV=function(e){return e&&(e.host||dV(e.parentNode))},Ohe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var i=dV(n);return i&&e.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Phe=function(e,t,n,i){var s=Ohe(t,Array.isArray(e)?e:[e]);yU[n]||(yU[n]=new WeakMap);var r=yU[n],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(i),m=h!==null&&h!=="false",p=(ef.get(f)||0)+1,U=(r.get(f)||0)+1;ef.set(f,p),r.set(f,U),o.push(f),p===1&&m&&bU.set(f,!0),U===1&&f.setAttribute(n,"true"),m||f.setAttribute(i,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(t),a.clear(),cE++,function(){o.forEach(function(d){var f=ef.get(d)-1,h=r.get(d)-1;ef.set(d,f),r.set(d,h),f||(bU.has(d)||d.removeAttribute(i),bU.delete(d)),h||d.removeAttribute(n)}),cE--,cE||(ef=new WeakMap,ef=new WeakMap,bU=new WeakMap,yU={})}},Fhe=function(e,t,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),s=Nhe(e);return s?(i.push.apply(i,Array.from(s.querySelectorAll("[aria-live]"))),Phe(i,s,n,"aria-hidden")):function(){return null}},Ro=function(){return Ro=Object.assign||function(t){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ro.apply(this,arguments)};function fV(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]]);return n}function Bhe(e,t,n){if(n||arguments.length===2)for(var i=0,s=t.length,r;i<s;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var p2="right-scroll-bar-position",U2="width-before-scroll-bar",zhe="with-scroll-bars-hidden",Hhe="--removed-body-scroll-bar-size";function uE(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Vhe(e,t){var n=L.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(i){var s=n.value;s!==i&&(n.value=i,n.callback(i,s))}}}})[0];return n.callback=t,n.facade}var $he=typeof window<"u"?L.useLayoutEffect:L.useEffect,fM=new WeakMap;function Ghe(e,t){var n=Vhe(null,function(i){return e.forEach(function(s){return uE(s,i)})});return $he(function(){var i=fM.get(n);if(i){var s=new Set(i),r=new Set(e),o=n.current;s.forEach(function(a){r.has(a)||uE(a,null)}),r.forEach(function(a){s.has(a)||uE(a,o)})}fM.set(n,e)},[e]),n}function Xhe(e){return e}function jhe(e,t){t===void 0&&(t=Xhe);var n=[],i=!1,s={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(r){var o=t(r,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(r){for(i=!0;n.length;){var o=n;n=[],o.forEach(r)}n={push:function(a){return r(a)},filter:function(){return n}}},assignMedium:function(r){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(r),o=n}var l=function(){var u=o;o=[],u.forEach(r)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return s}function Yhe(e){e===void 0&&(e={});var t=jhe(null);return t.options=Ro({async:!0,ssr:!1},e),t}var hV=function(e){var t=e.sideCar,n=fV(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return L.createElement(i,Ro({},n))};hV.isSideCarExport=!0;function Whe(e,t){return e.useMedium(t),hV}var gV=Yhe(),dE=function(){},O5=L.forwardRef(function(e,t){var n=L.useRef(null),i=L.useState({onScrollCapture:dE,onWheelCapture:dE,onTouchMoveCapture:dE}),s=i[0],r=i[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,m=e.inert,p=e.allowPinchZoom,U=e.as,y=U===void 0?"div":U,E=e.gapMode,v=fV(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,I=Ghe([n,t]),M=Ro(Ro({},v),s);return L.createElement(L.Fragment,null,u&&L.createElement(w,{sideCar:gV,removeScrollBar:c,shards:d,noIsolation:h,inert:m,setCallbacks:r,allowPinchZoom:!!p,lockRef:n,gapMode:E}),o?L.cloneElement(L.Children.only(a),Ro(Ro({},M),{ref:I})):L.createElement(y,Ro({},M,{className:l,ref:I}),a))});O5.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};O5.classNames={fullWidth:U2,zeroRight:p2};var Khe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Zhe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Khe();return t&&e.setAttribute("nonce",t),e}function qhe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Qhe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Jhe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Zhe())&&(qhe(t,n),Qhe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},ege=function(){var e=Jhe();return function(t,n){L.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},mV=function(){var e=ege(),t=function(n){var i=n.styles,s=n.dynamic;return e(i,s),null};return t},tge={left:0,top:0,right:0,gap:0},fE=function(e){return parseInt(e||"",10)||0},nge=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[fE(n),fE(i),fE(s)]},ige=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return tge;var t=nge(e),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-n+t[2]-t[0])}},sge=mV(),ah="data-scroll-locked",rge=function(e,t,n,i){var s=e.left,r=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(zhe,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(ah,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(r,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(p2,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(U2,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(p2," .").concat(p2,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(U2," .").concat(U2,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(ah,`] {
    `).concat(Hhe,": ").concat(a,`px;
  }
`)},hM=function(){var e=parseInt(document.body.getAttribute(ah)||"0",10);return isFinite(e)?e:0},oge=function(){L.useEffect(function(){return document.body.setAttribute(ah,(hM()+1).toString()),function(){var e=hM()-1;e<=0?document.body.removeAttribute(ah):document.body.setAttribute(ah,e.toString())}},[])},age=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,s=i===void 0?"margin":i;oge();var r=L.useMemo(function(){return ige(s)},[s]);return L.createElement(sge,{styles:rge(r,!t,s,n?"":"!important")})},v4=!1;if(typeof window<"u")try{var EU=Object.defineProperty({},"passive",{get:function(){return v4=!0,!0}});window.addEventListener("test",EU,EU),window.removeEventListener("test",EU,EU)}catch{v4=!1}var tf=v4?{passive:!1}:!1,lge=function(e){return e.tagName==="TEXTAREA"},pV=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!lge(e)&&n[t]==="visible")},cge=function(e){return pV(e,"overflowY")},uge=function(e){return pV(e,"overflowX")},gM=function(e,t){var n=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var s=UV(e,i);if(s){var r=bV(e,i),o=r[1],a=r[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},dge=function(e){var t=e.scrollTop,n=e.scrollHeight,i=e.clientHeight;return[t,n,i]},fge=function(e){var t=e.scrollLeft,n=e.scrollWidth,i=e.clientWidth;return[t,n,i]},UV=function(e,t){return e==="v"?cge(t):uge(t)},bV=function(e,t){return e==="v"?dge(t):fge(t)},hge=function(e,t){return e==="h"&&t==="rtl"?-1:1},gge=function(e,t,n,i,s){var r=hge(e,window.getComputedStyle(t).direction),o=r*i,a=n.target,l=t.contains(a),c=!1,u=o>0,d=0,f=0;do{var h=bV(e,a),m=h[0],p=h[1],U=h[2],y=p-U-r*m;(m||y)&&UV(e,a)&&(d+=y,f+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},vU=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},mM=function(e){return[e.deltaX,e.deltaY]},pM=function(e){return e&&"current"in e?e.current:e},mge=function(e,t){return e[0]===t[0]&&e[1]===t[1]},pge=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Uge=0,nf=[];function bge(e){var t=L.useRef([]),n=L.useRef([0,0]),i=L.useRef(),s=L.useState(Uge++)[0],r=L.useState(mV)[0],o=L.useRef(e);L.useEffect(function(){o.current=e},[e]),L.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var p=Bhe([e.lockRef.current],(e.shards||[]).map(pM),!0).filter(Boolean);return p.forEach(function(U){return U.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(U){return U.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=L.useCallback(function(p,U){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var y=vU(p),E=n.current,v="deltaX"in p?p.deltaX:E[0]-y[0],w="deltaY"in p?p.deltaY:E[1]-y[1],I,M=p.target,T=Math.abs(v)>Math.abs(w)?"h":"v";if("touches"in p&&T==="h"&&M.type==="range")return!1;var _=gM(T,M);if(!_)return!0;if(_?I=T:(I=T==="v"?"h":"v",_=gM(T,M)),!_)return!1;if(!i.current&&"changedTouches"in p&&(v||w)&&(i.current=I),!I)return!0;var x=i.current||I;return gge(x,U,p,x==="h"?v:w)},[]),l=L.useCallback(function(p){var U=p;if(!(!nf.length||nf[nf.length-1]!==r)){var y="deltaY"in U?mM(U):vU(U),E=t.current.filter(function(I){return I.name===U.type&&(I.target===U.target||U.target===I.shadowParent)&&mge(I.delta,y)})[0];if(E&&E.should){U.cancelable&&U.preventDefault();return}if(!E){var v=(o.current.shards||[]).map(pM).filter(Boolean).filter(function(I){return I.contains(U.target)}),w=v.length>0?a(U,v[0]):!o.current.noIsolation;w&&U.cancelable&&U.preventDefault()}}},[]),c=L.useCallback(function(p,U,y,E){var v={name:p,delta:U,target:y,should:E,shadowParent:yge(y)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(w){return w!==v})},1)},[]),u=L.useCallback(function(p){n.current=vU(p),i.current=void 0},[]),d=L.useCallback(function(p){c(p.type,mM(p),p.target,a(p,e.lockRef.current))},[]),f=L.useCallback(function(p){c(p.type,vU(p),p.target,a(p,e.lockRef.current))},[]);L.useEffect(function(){return nf.push(r),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,tf),document.addEventListener("touchmove",l,tf),document.addEventListener("touchstart",u,tf),function(){nf=nf.filter(function(p){return p!==r}),document.removeEventListener("wheel",l,tf),document.removeEventListener("touchmove",l,tf),document.removeEventListener("touchstart",u,tf)}},[]);var h=e.removeScrollBar,m=e.inert;return L.createElement(L.Fragment,null,m?L.createElement(r,{styles:pge(s)}):null,h?L.createElement(age,{gapMode:e.gapMode}):null)}function yge(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Ege=Whe(gV,bge);var yV=L.forwardRef(function(e,t){return L.createElement(O5,Ro({},e,{ref:t,sideCar:Ege}))});yV.classNames=O5.classNames;var e_="Popover",[EV,kxe]=cp(e_,[eV]),dp=eV(),[vge,Jc]=EV(e_),vV=e=>{const{__scopePopover:t,children:n,open:i,defaultOpen:s,onOpenChange:r,modal:o=!1}=e,a=dp(t),l=L.useRef(null),[c,u]=L.useState(!1),[d=!1,f]=Jw({prop:i,defaultProp:s,onChange:r});return g(xhe,{...a,children:g(vge,{scope:t,contentId:$w(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:L.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:L.useCallback(()=>u(!0),[]),onCustomAnchorRemove:L.useCallback(()=>u(!1),[]),modal:o,children:n})})};vV.displayName=e_;var wV="PopoverAnchor",wge=L.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,s=Jc(wV,n),r=dp(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=s;return L.useEffect(()=>(o(),()=>a()),[o,a]),g(cV,{...r,...i,ref:t})});wge.displayName=wV;var _V="PopoverTrigger",TV=L.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,s=Jc(_V,n),r=dp(n),o=co(t,s.triggerRef),a=g(rs.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":MV(s.open),...i,ref:o,onClick:Ii(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:g(cV,{asChild:!0,...r,children:a})});TV.displayName=_V;var t_="PopoverPortal",[_ge,Tge]=EV(t_,{forceMount:void 0}),SV=e=>{const{__scopePopover:t,forceMount:n,children:i,container:s}=e,r=Jc(t_,t);return g(_ge,{scope:t,forceMount:n,children:g(N5,{present:n||r.open,children:g(uV,{asChild:!0,container:s,children:i})})})};SV.displayName=t_;var zh="PopoverContent",IV=L.forwardRef((e,t)=>{const n=Tge(zh,e.__scopePopover),{forceMount:i=n.forceMount,...s}=e,r=Jc(zh,e.__scopePopover);return g(N5,{present:i||r.open,children:r.modal?g(Sge,{...s,ref:t}):g(Ige,{...s,ref:t})})});IV.displayName=zh;var Sge=L.forwardRef((e,t)=>{const n=Jc(zh,e.__scopePopover),i=L.useRef(null),s=co(t,i),r=L.useRef(!1);return L.useEffect(()=>{const o=i.current;if(o)return Fhe(o)},[]),g(yV,{as:tm,allowPinchZoom:!0,children:g(xV,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ii(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),r.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Ii(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;r.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Ii(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Ige=L.forwardRef((e,t)=>{const n=Jc(zh,e.__scopePopover),i=L.useRef(!1),s=L.useRef(!1);return g(xV,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var o,a;(o=e.onCloseAutoFocus)==null||o.call(e,r),r.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),r.preventDefault()),i.current=!1,s.current=!1},onInteractOutside:r=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,r),r.defaultPrevented||(i.current=!0,r.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=r.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&s.current&&r.preventDefault()}})}),xV=L.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:r,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=e,f=Jc(zh,n),h=dp(n);return dfe(),g(zH,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:s,onUnmountAutoFocus:r,children:g(FH,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:g(Che,{"data-state":MV(f.open),role:"dialog",id:f.contentId,...h,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),CV="PopoverClose",xge=L.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,s=Jc(CV,n);return g(rs.button,{type:"button",...i,ref:t,onClick:Ii(e.onClick,()=>s.onOpenChange(!1))})});xge.displayName=CV;var Cge="PopoverArrow",AV=L.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,s=dp(n);return g(Ahe,{...s,...i,ref:t})});AV.displayName=Cge;function MV(e){return e?"open":"closed"}var P5=vV,F5=TV,Age=SV,n_=IV,RV=AV;const kV=()=>g("div",{style:{width:1,height:"1rem",backgroundColor:"var(--default-border-color)",margin:"0 auto"}}),DV=ae.createContext(null),Ui=()=>ae.useContext(DV),LV=e=>{const[t,n]=L.useState(null),i=si(),{theme:s}=Ui(),{container:r}=oa();return L.useLayoutEffect(()=>{var o;t&&(t.className="",t.classList.add("excalidraw",...((o=e==null?void 0:e.className)==null?void 0:o.split(/\s+/))||[]),t.classList.toggle("excalidraw--mobile",i.editor.isMobile),t.classList.toggle("theme--dark",s===Me.DARK))},[t,s,i.editor.isMobile,e==null?void 0:e.className]),L.useLayoutEffect(()=>{const o=e!=null&&e.parentSelector?r==null?void 0:r.querySelector(e.parentSelector):document.body;if(!o)return;const a=document.createElement("div");return o.appendChild(a),n(a),()=>{o.removeChild(a)}},[r,e==null?void 0:e.parentSelector]),t};function i_(e,t,n){L.useEffect(()=>{function i(s){const r=s;if(!e.current)return;const o=n==null?void 0:n(r,e.current);if(o===!0)return;if(o===!1)return t(r);e.current.contains(r.target)||!document.documentElement.contains(r.target)||r.target.closest("[data-radix-portal]")||r.target===document.documentElement&&document.body.style.pointerEvents==="none"||r.target.closest("[data-prevent-outside-click]")||t(r)}return document.addEventListener(ee.POINTER_DOWN,i),document.addEventListener(ee.TOUCH_START,i),()=>{document.removeEventListener(ee.POINTER_DOWN,i),document.removeEventListener(ee.TOUCH_START,i)}},[e,t,n])}const B5=e=>{const t=L.useRef(e);return Object.assign(t.current,e),t.current},z5=Zt(null),Mge=({onCancel:e,onChange:t,onSelect:n,colorPickerType:i})=>{const s=LV({className:"excalidraw-eye-dropper-backdrop",parentSelector:".excalidraw-eye-dropper-container"}),r=Ui(),o=fy(),a=mo(),l=He(o,r),c=B5({app:a,onCancel:e,onChange:t,onSelect:n,selectedElements:l}),{container:u}=oa();L.useEffect(()=>{const f=d.current;if(!f||!a.canvas||!s)return;let h=!1;const m=a.canvas.getContext("2d"),p=({clientX:M,clientY:T})=>{const _=m.getImageData((M-r.offsetLeft)*window.devicePixelRatio,(T-r.offsetTop)*window.devicePixelRatio,1,1).data;return pie(_[0],_[1],_[2])},U=({clientX:M,clientY:T,altKey:_})=>{f.style.top=`${T+20}px`,f.style.left=`${M+20}px`;const x=p({clientX:M,clientY:T});h&&c.onChange(i,x,c.selectedElements,{altKey:_}),f.style.background=x},y=()=>{c.onCancel()},E=(M,T)=>{c.onSelect(M,T)},v=M=>{h=!0,M.stopImmediatePropagation()},w=M=>{h=!1,u==null||u.focus(),M.stopImmediatePropagation(),M.preventDefault(),E(p(M),M)},I=M=>{M.key===z.ESCAPE&&(M.preventDefault(),M.stopImmediatePropagation(),y())};return s.tabIndex=-1,s.focus(),U({clientX:c.app.lastViewportPosition.x,clientY:c.app.lastViewportPosition.y,altKey:!1}),s.addEventListener(ee.KEYDOWN,I),s.addEventListener(ee.POINTER_DOWN,v),s.addEventListener(ee.POINTER_UP,w),window.addEventListener("pointermove",U,{passive:!0}),window.addEventListener(ee.BLUR,y),()=>{h=!1,s.removeEventListener(ee.KEYDOWN,I),s.removeEventListener(ee.POINTER_DOWN,v),s.removeEventListener(ee.POINTER_UP,w),window.removeEventListener("pointermove",U),window.removeEventListener(ee.BLUR,y)}},[c,a.canvas,s,i,u,r.offsetLeft,r.offsetTop]);const d=L.useRef(null);return i_(d,()=>{e()},f=>!!f.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")),s?Ln.createPortal(g("div",{ref:d,className:"excalidraw-eye-dropper-preview"}),s):null},eo=ae.forwardRef(({children:e,padding:t,className:n,style:i},s)=>g("div",{className:pe("Island",n),style:{"--padding":t,...i},ref:s,children:e})),NV=ae.forwardRef(({className:e,container:t,children:n,style:i,onClose:s,onKeyDown:r,onFocusOutside:o,onPointerLeave:a,onPointerDownOutside:l},c)=>{const u=si();return g(Age,{container:t,children:P(n_,{ref:c,className:pe("focus-visible-none",e),"data-prevent-outside-click":!0,side:u.editor.isMobile&&!u.viewport.isLandscape?"bottom":"right",align:u.editor.isMobile&&!u.viewport.isLandscape?"center":"start",alignOffset:-16,sideOffset:20,style:{zIndex:"var(--zIndex-popup)"},onPointerLeave:a,onKeyDown:r,onFocusOutside:o,onPointerDownOutside:l,onCloseAutoFocus:d=>{d.stopPropagation(),d.preventDefault(),t&&!pse(document.activeElement)&&t.focus(),s()},children:[g(eo,{padding:3,style:i,children:n}),g(RV,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})}),H5=({palette:e,color:t})=>{if(!t)return null;for(const[n,i]of Object.entries(e))if(Array.isArray(i)){const s=i.indexOf(t);if(s>-1)return{colorName:n,shade:s}}else if(i===t)return{colorName:n,shade:null};return null},w4=[["q","w","e","r","t"],["a","s","d","f","g"],["z","x","c","v","b"]].flat(),OV=({color:e,palette:t})=>!Object.values(t).flat().includes(e),Rge=(e,t,n)=>{const i={elementBackground:"backgroundColor",elementStroke:"strokeColor"},s=e.filter(o=>{if(o.isDeleted)return!1;const a=o[i[t]];return OV({color:a,palette:n})}),r=new Map;return s.forEach(o=>{const a=o[i[t]];r.has(a)?r.set(a,r.get(a)+1):r.set(a,1)}),[...r.entries()].sort((o,a)=>a[1]-o[1]).map(o=>o[0]).slice(0,die)},pg=Zt(null),UM=(e,t,n)=>(e*299+t*587+n*114)/1e3,s_=(e,t=160)=>{if(!e)return!0;if(e==="transparent")return!1;if(!e.startsWith("#")){const r=document.createElement("div");if(r.style.color=e,r.style.color){r.style.position="absolute",r.style.visibility="hidden",r.style.width="0",r.style.height="0",document.body.appendChild(r);const o=getComputedStyle(r).color;document.body.removeChild(r);const a=o.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),l=parseInt(a[0]),c=parseInt(a[1]),u=parseInt(a[2]);return UM(l,c,u)<t}return!0}const n=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16);return UM(n,i,s)<t},kge=({color:e,onChange:t,label:n,colorPickerType:i,placeholder:s})=>{const r=si(),[o,a]=L.useState(e),[l,c]=pn(pg);L.useEffect(()=>{a(e)},[e]);const u=L.useCallback(p=>{const U=p.toLowerCase(),y=zge(U);y&&t(y),a(U)},[t]),d=L.useRef(null),f=L.useRef(null);L.useEffect(()=>{d.current&&d.current.focus()},[l]);const[h,m]=pn(z5);return L.useEffect(()=>()=>{m(null)},[m]),P("div",{className:"color-picker__input-label",children:[g("div",{className:"color-picker__input-hash",children:"#"}),g("input",{ref:l==="hex"?d:void 0,style:{border:0,padding:0},spellCheck:!1,className:"color-picker-input","aria-label":n,onChange:p=>{u(p.target.value)},value:(o||"").replace(/^#/,""),onBlur:()=>{a(e)},tabIndex:-1,onFocus:()=>c("hex"),onKeyDown:p=>{var U;p.key!==z.TAB&&(p.key===z.ESCAPE&&((U=f.current)==null||U.focus()),p.stopPropagation())},placeholder:s}),!r.editor.isMobile&&P(ge,{children:[g("div",{style:{width:"1px",height:"1.25rem",backgroundColor:"var(--default-border-color)"}}),g("div",{ref:f,className:pe("excalidraw-eye-dropper-trigger",{selected:h}),onClick:()=>m(p=>p?null:{keepOpenOnAlt:!1,onSelect:U=>t(U),colorPickerType:i}),title:`${k("labels.eyeDropper")} — ${z.I.toLocaleUpperCase()} or ${Q("Alt")} `,children:Ude})]})]})},r_=({color:e,keyLabel:t,isShade:n=!1})=>P("div",{className:"color-picker__button__hotkey-label",style:{color:s_(e)?"#fff":"#000"},children:[n&&"⇧",t]}),Dge=({colors:e,color:t,onChange:n,label:i})=>{const[s,r]=pn(pg),o=L.useRef(null);return L.useEffect(()=>{o.current&&o.current.focus()},[t,s]),g("div",{className:"color-picker-content--default",children:e.map((a,l)=>P("button",{ref:t===a?o:void 0,tabIndex:-1,type:"button",className:pe("color-picker__button color-picker__button--large has-outline",{active:t===a,"is-transparent":a==="transparent"||!a}),onClick:()=>{n(a),r("custom")},title:a,"aria-label":i,style:{"--swatch-color":a},children:[g("div",{className:"color-picker__button-outline"}),g(r_,{color:a,keyLabel:l+1})]},l))})},Lge=({palette:e,color:t,onChange:n,activeShade:i})=>{const s=H5({color:t,palette:e}),[r,o]=pn(pg),a=L.useRef(null);return L.useEffect(()=>{a.current&&r==="baseColors"&&a.current.focus()},[s==null?void 0:s.colorName,r]),g("div",{className:"color-picker-content--default",children:Object.entries(e).map(([l,c],u)=>{const d=(Array.isArray(c)?c[i]:c)||"transparent",f=w4[u],h=k(`colors.${l.replace(/\d+/,"")}`,null,"");return P("button",{ref:(s==null?void 0:s.colorName)===l?a:void 0,tabIndex:-1,type:"button",className:pe("color-picker__button color-picker__button--large has-outline",{active:(s==null?void 0:s.colorName)===l,"is-transparent":d==="transparent"||!1}),onClick:()=>{n(d),o("baseColors")},title:`${h}${d.startsWith("#")?` ${d}`:""} — ${f}`,"aria-label":`${h} — ${f}`,style:{"--swatch-color":d},"data-testid":`color-${l}`,children:[g("div",{className:"color-picker__button-outline"}),g(r_,{color:d,keyLabel:f})]},l)})})},b2=({children:e})=>g("div",{className:"color-picker__heading",children:e}),Nge=({color:e,onChange:t,palette:n})=>{const i=H5({color:e||"transparent",palette:n}),[s,r]=pn(pg),o=L.useRef(null);if(L.useEffect(()=>{o.current&&s==="shades"&&o.current.focus()},[i,s]),i){const{colorName:a,shade:l}=i,c=n[a];if(Array.isArray(c))return g("div",{className:"color-picker-content--default shades",children:c.map((u,d)=>P("button",{ref:d===l&&s==="shades"?o:void 0,tabIndex:-1,type:"button",className:pe("color-picker__button color-picker__button--large has-outline",{active:d===l}),"aria-label":"Shade",title:`${a} - ${d+1}`,style:u?{"--swatch-color":u}:void 0,onClick:()=>{t(u),r("shades")},children:[g("div",{className:"color-picker__button-outline"}),g(r_,{color:u,keyLabel:d+1,isShade:!0})]},d))})}return P("div",{className:"color-picker-content--default",style:{position:"relative"},tabIndex:-1,children:[g("button",{type:"button",tabIndex:-1,className:"color-picker__button color-picker__button--large color-picker__button--no-focus-visible"}),g("div",{tabIndex:-1,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"0.75rem"},children:k("colorPicker.noShades")})]})},hE=(e,t,n)=>{const i=Math.ceil(n/gf);switch(t=t??-1,e){case"ArrowLeft":{const s=t-1;return s<0?n-1:s}case"ArrowRight":return(t+1)%n;case"ArrowDown":{const s=t+gf;return s>=n?t%gf:s}case"ArrowUp":{const s=t-gf,r=s<0?gf*i+s:s;return r>=n?void 0:r}}},Oge=({e,colorObj:t,onChange:n,palette:i,customColors:s,setActiveColorPickerSection:r,activeShade:o})=>{if((t==null?void 0:t.shade)!=null&&["Digit1","Digit2","Digit3","Digit4","Digit5"].includes(e.code)&&e.shiftKey){const a=Number(e.code.slice(-1))-1;return n(i[t.colorName][a]),r("shades"),!0}if(["1","2","3","4","5"].includes(e.key)&&s[Number(e.key)-1])return n(s[Number(e.key)-1]),r("custom"),!0;if(w4.includes(e.key)){const a=w4.indexOf(e.key),l=Object.keys(i)[a],c=i[l],u=Array.isArray(c)?c[o]:c;return n(u),r("baseColors"),!0}return!1},Pge=({event:e,activeColorPickerSection:t,palette:n,color:i,onChange:s,customColors:r,setActiveColorPickerSection:o,updateData:a,activeShade:l,onEyeDropperToggle:c,onEscape:u})=>{if(e[z.CTRL_OR_CMD])return!1;if(e.key===z.ESCAPE)return u(e),!0;if(e.key===z.ALT)return c(!0),!0;if(e.key===z.I)return c(),!0;const d=H5({color:i,palette:n});if(e.key===z.TAB){const f={custom:!!r.length,baseColors:!0,shades:(d==null?void 0:d.shade)!=null,hex:!0},h=Object.entries(f).reduce((E,[v,w])=>(w&&E.push(v),E),[]),m=h.indexOf(t),p=e.shiftKey?-1:1,U=m+p>h.length-1?0:m+p<0?h.length-1:m+p,y=h[U];return y&&o(y),y==="custom"?s(r[0]):y==="baseColors"&&(Object.entries(n).find(([v,w])=>Array.isArray(w)?w.includes(i):w===i?v:null)||s(ze.black)),e.preventDefault(),e.stopPropagation(),!0}if(Oge({e,colorObj:d,onChange:s,palette:n,customColors:r,setActiveColorPickerSection:o,activeShade:l}))return!0;if(t==="shades"&&d){const{shade:f}=d,h=hE(e.key,f,gf);if(h!==void 0)return s(n[d.colorName][h]),!0}if(t==="baseColors"&&d){const{colorName:f}=d,h=Object.keys(n),m=h.indexOf(f),p=hE(e.key,m,h.length);if(p!==void 0){const U=h[p],y=n[U];return s(Array.isArray(y)?y[l]:y),!0}}if(t==="custom"){const f=i!=null?r.indexOf(i):0,h=hE(e.key,f,r.length);if(h!==void 0){const m=r[h];return s(m),!0}}return!1},Fge=ae.forwardRef(({color:e,onChange:t,type:n,elements:i,palette:s,updateData:r,children:o,onEyeDropperToggle:a,onEscape:l},c)=>{const[u]=ae.useState(()=>n==="canvasBackground"?[]:Rge(i,n,s)),[d,f]=pn(pg),h=H5({color:e,palette:s});L.useEffect(()=>{if(!d){const y=!!e&&OV({color:e,palette:s}),E=y&&!u.includes(e);f(E?null:y?"custom":(h==null?void 0:h.shade)!=null?"shades":"baseColors")}},[d,e,s,f,h,u]);const[m,p]=L.useState((h==null?void 0:h.shade)??(n==="elementBackground"?v1:E1));L.useEffect(()=>{(h==null?void 0:h.shade)!=null&&p(h.shade);const y=E=>{E.key===z.ALT&&a(!1)};return document.addEventListener(ee.KEYUP,y,{capture:!0}),()=>{document.removeEventListener(ee.KEYUP,y,{capture:!0})}},[h,a]);const U=ae.useRef(null);return L.useImperativeHandle(c,()=>U.current),L.useEffect(()=>{var y;(y=U==null?void 0:U.current)==null||y.focus()},[]),g("div",{role:"dialog","aria-modal":"true","aria-label":k("labels.colorPicker"),children:P("div",{ref:U,onKeyDown:y=>{Pge({event:y,activeColorPickerSection:d,palette:s,color:e,onChange:t,onEyeDropperToggle:a,customColors:u,setActiveColorPickerSection:f,updateData:r,activeShade:m,onEscape:l})&&(y.preventDefault(),y.stopPropagation())},className:"color-picker-content properties-content",tabIndex:-1,children:[!!u.length&&P("div",{children:[g(b2,{children:k("colorPicker.mostUsedCustomColors")}),g(Dge,{colors:u,color:e,label:k("colorPicker.mostUsedCustomColors"),onChange:t})]}),P("div",{children:[g(b2,{children:k("colorPicker.colors")}),g(Lge,{color:e,palette:s,onChange:t,activeShade:m})]}),P("div",{children:[g(b2,{children:k("colorPicker.shades")}),g(Nge,{color:e,onChange:t,palette:s})]}),o]})})}),Bge=({onChange:e,type:t,activeColor:n,topPicks:i})=>{let s;return t==="elementStroke"&&(s=jP),t==="elementBackground"&&(s=YP),t==="canvasBackground"&&(s=WP),i&&(s=i),s?g("div",{className:"color-picker__top-picks",children:s.map(r=>g("button",{className:pe("color-picker__button",{active:r===n,"is-transparent":r==="transparent"||!r,"has-outline":!s_(r,GP)}),style:{"--swatch-color":r},type:"button",title:r,onClick:()=>e(r),"data-testid":`color-top-pick-${r}`,children:g("div",{className:"color-picker__button-outline"})},r))}):(console.error("Invalid type for TopPicks"),null)},bM=e=>{const t=new Option().style;return t.color=e,!!t.color},zge=e=>Kr(e)?e:bM(`#${e}`)?`#${e}`:bM(e)?e:null,Hge=({type:e,color:t,onChange:n,label:i,elements:s,palette:r=ze,updateData:o})=>{const{container:a}=oa(),[,l]=pn(pg),[c,u]=pn(z5),d=P("div",{children:[g(b2,{children:k("colorPicker.hexCode")}),g(kge,{color:t||"",label:i,onChange:m=>{n(m)},colorPickerType:e,placeholder:k("colorPicker.color")})]}),f=L.useRef(null),h=()=>{var m;(m=f.current)==null||m.focus()};return g(NV,{container:a,style:{maxWidth:"13rem"},onFocusOutside:m=>{h(),m.preventDefault()},onPointerDownOutside:m=>{c&&m.preventDefault()},onClose:()=>{o({openPopup:null}),l(null)},children:r?g(Fge,{ref:f,palette:r,color:t,onChange:m=>{n(m)},onEyeDropperToggle:m=>{u(p=>m?(p=p||{keepOpenOnAlt:!0,onSelect:n,colorPickerType:e},p.keepOpenOnAlt=!0,p):m===!1||p?null:{keepOpenOnAlt:!1,onSelect:n,colorPickerType:e})},onEscape:m=>{c?u(null):o({openPopup:null})},type:e,elements:s,updateData:o,children:d}):d})},Vge=({label:e,color:t,type:n})=>g(F5,{type:"button",className:pe("color-picker__button active-color properties-trigger",{"is-transparent":!t||t==="transparent","has-outline":!t||!s_(t,GP)}),"aria-label":e,style:t?{"--swatch-color":t}:void 0,title:k(n==="elementStroke"?"labels.showStroke":"labels.showBackground"),children:g("div",{className:"color-picker__button-outline",children:!t&&bue})}),o_=({type:e,color:t,onChange:n,label:i,elements:s,palette:r=ze,topPicks:o,updateData:a,appState:l})=>g("div",{children:P("div",{role:"dialog","aria-modal":"true",className:"color-picker-container",children:[g(Bge,{activeColor:t,onChange:n,type:e,topPicks:o}),g(kV,{}),P(P5,{open:l.openPopup===e,onOpenChange:c=>{a({openPopup:c?e:null})},children:[g(Vge,{color:t,label:i,type:e}),l.openPopup===e&&g(Hge,{type:e,color:t,onChange:n,label:i,elements:s,palette:r,updateData:a})]})]})}),$ge="/fonts/CascadiaCode/CascadiaCode-Regular.woff2",Gge=[{uri:$ge}],Xge="/fonts/ComicShanns/ComicShanns-Regular-279a7b317d12eb88de06167bd672b4b4.woff2",jge="/fonts/ComicShanns/ComicShanns-Regular-6e066e8de2ac57ea9283adb9c24d7f0c.woff2",Yge="/fonts/ComicShanns/ComicShanns-Regular-dc6a8806fa96795d7b3be5026f989a17.woff2",Wge="/fonts/ComicShanns/ComicShanns-Regular-fcb0fc02dcbee4c9846b3e2508668039.woff2",Kge=[{uri:Xge,descriptors:{unicodeRange:"U+20-7e,U+a1-a6,U+a8,U+ab-ac,U+af-b1,U+b4,U+b8,U+bb-bc,U+bf-cf,U+d1-d7,U+d9-de,U+e0-ef,U+f1-f7,U+f9-ff,U+131,U+152-153,U+2c6,U+2da,U+2dc,U+2013-2014,U+2018-201a,U+201c-201d,U+2020-2022,U+2026,U+2039-203a,U+2044,U+20ac,U+2191,U+2193,U+2212"}},{uri:Wge,descriptors:{unicodeRange:"U+100-10f,U+112-125,U+128-130,U+134-137,U+139-13c,U+141-148,U+14c-151,U+154-161,U+164-165,U+168-17f,U+1bf,U+1f7,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+a75b"}},{uri:Yge,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+315,U+2190,U+2192,U+2200,U+2203-2204,U+2264-2265,U+f6c3"}},{uri:jge,descriptors:{unicodeRange:"U+3bb"}}],Zge=[{uri:z9}];class qge{constructor(t){F(this,"instance");F(this,"debounceTerminate");this.instance=new Worker(t,{type:"module"})}}class a_{constructor(t,n){F(this,"idleWorkers",new Set);F(this,"workerUrl");F(this,"workerTTL");this.workerUrl=t,this.workerTTL=n.ttl||1e3}static create(t,n={}){if(!t)throw new kH;if(!import.meta.url||t.toString()===import.meta.url)throw new DH;return new a_(t,n)}async postMessage(t,n){let i;const s=Array.from(this.idleWorkers).shift();return s?(this.idleWorkers.delete(s),i=s):i=await this.createWorker(),new Promise((r,o)=>{i.instance.onmessage=this.onMessageHandler(i,r),i.instance.onerror=this.onErrorHandler(i,o),i.instance.postMessage(t,n),i.debounceTerminate(()=>o(new Error(`Active worker did not respond for ${this.workerTTL}ms!`)))})}async clear(){for(const t of this.idleWorkers)t.debounceTerminate.cancel(),t.instance.terminate();this.idleWorkers.clear()}async createWorker(){const t=new qge(this.workerUrl);return t.debounceTerminate=Qa(n=>{t.instance.terminate(),this.idleWorkers.has(t)?(this.idleWorkers.delete(t),console.debug("Job finished! Idle worker has been released from the pool.")):n?n():console.error("Worker has been terminated!")},this.workerTTL),t}onMessageHandler(t,n){return i=>{t.debounceTerminate(),this.idleWorkers.add(t),n(i.data)}}onErrorHandler(t,n){return i=>{t.debounceTerminate(()=>n(i)),t.debounceTerminate.flush(),this.clear()}}}let yM=typeof Worker<"u";const Qge=async(e,t)=>{const{Commands:n,subsetToBase64:i,toBase64:s}=await e1e();return yM?Dc(async()=>{try{const r=await t1e(),o=e.slice(0),a=await r.postMessage({command:n.Subset,arrayBuffer:o,codePoints:t},{transfer:[o]});return s(a)}catch(r){return yM=!1,Cse()&&(r instanceof kH||r instanceof DH)||console.error("Failed to use workers for subsetting, falling back to the main thread.",r),i(e,t)}}):i(e,t)};let gE=null,mE=null;const Jge=async()=>(gE||(gE=be(()=>import("./subset-worker.chunk-CVR6pt27.js"),__vite__mapDeps([0,1]))),gE),e1e=async()=>(mE||(mE=be(()=>import("./subset-shared.chunk-D3ioWSie.js"),__vite__mapDeps([]))),mE);let pE=null;const t1e=()=>(pE||(pE=Dc(async()=>{const{WorkerUrl:e}=await Jge();return a_.create(e)})),pE);var UE={};const Gf=class Gf{constructor(t,n,i){F(this,"urls");F(this,"fontFace");this.urls=Gf.createUrls(n);const s=this.urls.map(r=>`url(${r}) ${Gf.getFormat(r)}`).join(", ");this.fontFace=new FontFace(t,s,{display:"swap",style:"normal",weight:"400",...i})}toCSS(t){if(!this.getUnicodeRangeRegex().test(t))return;const n=Array.from(t).map(i=>i.codePointAt(0));return this.getContent(n).then(i=>`@font-face { font-family: ${this.fontFace.family}; src: url(${i}); }`)}async getContent(t){let n=0;const i=[];for(;n<this.urls.length;){const s=this.urls[n];try{const r=await this.fetchFont(s);return await Qge(r,t)}catch(r){i.push(`"${s.toString()}" returned error "${r}"`)}n++}return console.error(`Failed to fetch font family "${this.fontFace.family}"`,JSON.stringify(i,void 0,2)),this.urls.length?this.urls[this.urls.length-1].toString():""}fetchFont(t){return Dc(async()=>{const n=await fetch(t,{cache:"force-cache",headers:{Accept:"font/woff2"}});if(!n.ok){const s=t instanceof URL?t.toString():"dataurl";throw new Error(`Failed to fetch "${s}": ${n.statusText}`)}return await n.arrayBuffer()})}getUnicodeRangeRegex(){const t=this.fontFace.unicodeRange.split(/,\s*/).map(n=>{const[i,s]=n.replace("U+","").split("-");return s?`\\u{${i}}-\\u{${s}}`:`\\u{${i}}`}).join("");return new RegExp(`[${t}]`,"u")}static createUrls(t){if(t.startsWith("data"))return[t];if(t.startsWith(z9))return[];if(t.startsWith("http"))return[new URL(t)];const n=t.replace(/^\/+/,""),i=[];if(typeof window.EXCALIDRAW_ASSET_PATH=="string"){const s=this.normalizeBaseUrl(window.EXCALIDRAW_ASSET_PATH);i.push(new URL(n,s))}else Array.isArray(window.EXCALIDRAW_ASSET_PATH)&&window.EXCALIDRAW_ASSET_PATH.forEach(s=>{const r=this.normalizeBaseUrl(s);i.push(new URL(n,r))});return i.push(new URL(n,Gf.ASSETS_FALLBACK_URL)),i}static getFormat(t){if(!(t instanceof URL))return"";try{const n=new URL(t).pathname.split(".");return n.length===1?"":`format('${n.pop()}')`}catch{return""}}static normalizeBaseUrl(t){var i;let n=t;return/^\.?\//.test(n)&&(n=new URL(n.replace(/^\.?\/+/,""),(i=window==null?void 0:window.location)==null?void 0:i.origin).toString()),n=`${n.replace(/\/+$/,"")}/`,n}};F(Gf,"ASSETS_FALLBACK_URL",`https://esm.sh/${UE.PKG_NAME?`${UE.PKG_NAME}@${UE.PKG_VERSION}`:"@excalidraw/excalidraw"}/dist/prod/`);let _4=Gf;const n1e="/fonts/Excalifont/Excalifont-Regular-349fac6ca4700ffec595a7150a0d1e1d.woff2",i1e="/fonts/Excalifont/Excalifont-Regular-3f2c5db56cc93c5a6873b1361d730c16.woff2",s1e="/fonts/Excalifont/Excalifont-Regular-41b173a47b57366892116a575a43e2b6.woff2",r1e="/fonts/Excalifont/Excalifont-Regular-623ccf21b21ef6b3a0d87738f77eb071.woff2",o1e="/fonts/Excalifont/Excalifont-Regular-a88b72a24fb54c9f94e3b5fdaa7481c9.woff2",a1e="/fonts/Excalifont/Excalifont-Regular-b9dcf9d2e50a1eaf42fc664b50a3fd0d.woff2",l1e="/fonts/Excalifont/Excalifont-Regular-be310b9bcd4f1a43f571c46df7809174.woff2",c1e=[{uri:o1e,descriptors:{unicodeRange:"U+20-7e,U+a0-a3,U+a5-a6,U+a8-ab,U+ad-b1,U+b4,U+b6-b8,U+ba-ff,U+131,U+152-153,U+2bc,U+2c6,U+2da,U+2dc,U+304,U+308,U+2013-2014,U+2018-201a,U+201c-201e,U+2020,U+2022,U+2024-2026,U+2030,U+2039-203a,U+20ac,U+2122,U+2212"}},{uri:l1e,descriptors:{unicodeRange:"U+100-130,U+132-137,U+139-149,U+14c-151,U+154-17e,U+192,U+1fc-1ff,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+2113"}},{uri:a1e,descriptors:{unicodeRange:"U+400-45f,U+490-491,U+2116"}},{uri:s1e,descriptors:{unicodeRange:"U+37e,U+384-38a,U+38c,U+38e-393,U+395-3a1,U+3a3-3a8,U+3aa-3cf,U+3d7"}},{uri:i1e,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+302,U+306-307,U+30a-30c,U+326-328,U+212e,U+2211,U+fb01-fb02"}},{uri:n1e,descriptors:{unicodeRange:"U+462-463,U+472-475,U+4d8-4d9,U+4e2-4e3,U+4e6-4e9,U+4ee-4ef"}},{uri:r1e,descriptors:{unicodeRange:"U+300-301,U+303"}}],u1e=[{uri:z9}],d1e="/fonts/LiberationSans/LiberationSans-Regular.woff2",f1e=[{uri:d1e}],h1e="/fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYE98RXi4EwSsbg.woff2",g1e="/fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYEF8RXi4EwQ.woff2",m1e=[{uri:h1e,descriptors:{unicodeRange:yu.LATIN_EXT}},{uri:g1e,descriptors:{unicodeRange:yu.LATIN}}],p1e="/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTA3j6zbXWjgevT5.woff2",U1e="/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTQ3j6zbXWjgeg.woff2",b1e="/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTk3j6zbXWjgevT5.woff2",y1e="/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTo3j6zbXWjgevT5.woff2",E1e="/fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTs3j6zbXWjgevT5.woff2",v1e=[{uri:b1e,descriptors:{unicodeRange:yu.CYRILIC_EXT,weight:"500"}},{uri:p1e,descriptors:{unicodeRange:yu.CYRILIC,weight:"500"}},{uri:E1e,descriptors:{unicodeRange:yu.VIETNAMESE,weight:"500"}},{uri:y1e,descriptors:{unicodeRange:yu.LATIN_EXT,weight:"500"}},{uri:U1e,descriptors:{unicodeRange:yu.LATIN,weight:"500"}}],w1e="/fonts/Virgil/Virgil-Regular.woff2",_1e=[{uri:w1e}],T1e="/fonts/Xiaolai/Xiaolai-Regular-019d66dcad46dc156b162d267f981c20.woff2",S1e="/fonts/Xiaolai/Xiaolai-Regular-04b718e5623574919c8b0dea5f301444.woff2",I1e="/fonts/Xiaolai/Xiaolai-Regular-069e77aac84590e2e991d0a0176d34f2.woff2",x1e="/fonts/Xiaolai/Xiaolai-Regular-06c77b8c66e51ed6c63ccb502dd8b8af.woff2",C1e="/fonts/Xiaolai/Xiaolai-Regular-08e0dc436ad0ad61ba5558db0674d762.woff2",A1e="/fonts/Xiaolai/Xiaolai-Regular-093b9ef39a46ceae95a1df18a0a3a326.woff2",M1e="/fonts/Xiaolai/Xiaolai-Regular-095c169f3314805276f603a362766abd.woff2",R1e="/fonts/Xiaolai/Xiaolai-Regular-09850c4077f3fffe707905872e0e2460.woff2",k1e="/fonts/Xiaolai/Xiaolai-Regular-41521fade99856108931b4768b1b2648.woff2",D1e="/fonts/Xiaolai/Xiaolai-Regular-544fc28abe2c5c30e62383fd4dac255f.woff2",L1e="/fonts/Xiaolai/Xiaolai-Regular-60a3089806700d379f11827ee9843b6b.woff2",N1e="/fonts/Xiaolai/Xiaolai-Regular-7eb9fffd1aa890d07d0f88cc82e6cfe4.woff2",O1e="/fonts/Xiaolai/Xiaolai-Regular-6fe5c5973cc06f74b2387a631ea36b88.woff2",P1e="/fonts/Xiaolai/Xiaolai-Regular-a4c34be6d42152e64b0df90bc4607f64.woff2",F1e="/fonts/Xiaolai/Xiaolai-Regular-b96d9226ce77ec94ceca043d712182e6.woff2",B1e="/fonts/Xiaolai/Xiaolai-Regular-6ae5b42180ad70b971c91e7eefb8eba2.woff2",z1e="/fonts/Xiaolai/Xiaolai-Regular-c69f61a4ab18d0488c8d1fc12e7028e8.woff2",H1e="/fonts/Xiaolai/Xiaolai-Regular-cb17fc3db95f6d139afc9d31a8e93293.woff2",V1e="/fonts/Xiaolai/Xiaolai-Regular-e3fcf5180fd466c8915c4e8069491054.woff2",$1e="/fonts/Xiaolai/Xiaolai-Regular-c1f94158256bb1f3bf665b053d895af9.woff2",G1e="/fonts/Xiaolai/Xiaolai-Regular-7197d6fda6cba7c3874c53d6381ca239.woff2",X1e="/fonts/Xiaolai/Xiaolai-Regular-70c2eb8d64e71a42a834eb857ea9df51.woff2",j1e="/fonts/Xiaolai/Xiaolai-Regular-a004ddfcb26e67bd6e678c8ed19e25ce.woff2",Y1e="/fonts/Xiaolai/Xiaolai-Regular-7e4bde7e9c7f84cd34d8a845e384c746.woff2",W1e="/fonts/Xiaolai/Xiaolai-Regular-23686f7f29da6e8008c36dd3a80c83d6.woff2",K1e="/fonts/Xiaolai/Xiaolai-Regular-69c09cc5fa3e55c74fc4821f76909cc3.woff2",Z1e="/fonts/Xiaolai/Xiaolai-Regular-25b7f38e18f035f96cb5e547bd2bd08c.woff2",q1e="/fonts/Xiaolai/Xiaolai-Regular-ba3de316d63c7e339987b16f41a0b879.woff2",Q1e="/fonts/Xiaolai/Xiaolai-Regular-12b52b58eb3df36804b9a654ec9ee194.woff2",J1e="/fonts/Xiaolai/Xiaolai-Regular-b1220a3c61f85cc0408deedb4c5f57a2.woff2",e0e="/fonts/Xiaolai/Xiaolai-Regular-4535823663ad81405188a528d8f2b1a2.woff2",t0e="/fonts/Xiaolai/Xiaolai-Regular-3eaa538115d76932653c21d8dc28f207.woff2",n0e="/fonts/Xiaolai/Xiaolai-Regular-7e929f262f30c8ee78bf398150b1a7cd.woff2",i0e="/fonts/Xiaolai/Xiaolai-Regular-73e309718fd16cea44b4d54a33581811.woff2",s0e="/fonts/Xiaolai/Xiaolai-Regular-9eb5a99df4e76ac3363453ac9ca288b1.woff2",r0e="/fonts/Xiaolai/Xiaolai-Regular-3e63ed8162808a9e425ed80a8bc79114.woff2",o0e="/fonts/Xiaolai/Xiaolai-Regular-c8b71798409ccc126ee264a00aadcf21.woff2",a0e="/fonts/Xiaolai/Xiaolai-Regular-11c345711937f0ba4b8f7b6b919c8440.woff2",l0e="/fonts/Xiaolai/Xiaolai-Regular-e480d9c614742d05f0e78f274f1e69e6.woff2",c0e="/fonts/Xiaolai/Xiaolai-Regular-95429962233afd82db1c27df1500a28c.woff2",u0e="/fonts/Xiaolai/Xiaolai-Regular-2cf96d082d35ea3d8106851223ad0d16.woff2",d0e="/fonts/Xiaolai/Xiaolai-Regular-2d43040e86ff03ba677f6f9c04cd0805.woff2",f0e="/fonts/Xiaolai/Xiaolai-Regular-2a26d20a23b00898ce82f09d2ee47c3f.woff2",h0e="/fonts/Xiaolai/Xiaolai-Regular-a365e82ed54697a52f27adcea1315fe8.woff2",g0e="/fonts/Xiaolai/Xiaolai-Regular-e4bca6cfa53e499cae0a6be4894a90e9.woff2",m0e="/fonts/Xiaolai/Xiaolai-Regular-e51ef413167c6e14e0c0fdcc585f2fc9.woff2",p0e="/fonts/Xiaolai/Xiaolai-Regular-e5f453bb04da18eed01675eeebd88bf8.woff2",U0e="/fonts/Xiaolai/Xiaolai-Regular-e656f091b9dc4709722c9f4b84d3c797.woff2",b0e="/fonts/Xiaolai/Xiaolai-Regular-f0f13b5c60e0af5553bd359f5513be1b.woff2",y0e="/fonts/Xiaolai/Xiaolai-Regular-f5d079153c99a25b9be5b8583c4cc8a7.woff2",E0e="/fonts/Xiaolai/Xiaolai-Regular-10a7ae9a371830a80c3d844acf1c02d7.woff2",v0e="/fonts/Xiaolai/Xiaolai-Regular-60a41c7e1c68f22424e6d22df544bc82.woff2",w0e="/fonts/Xiaolai/Xiaolai-Regular-7ab2bed91166a9dca83a5ebfbe2a7f38.woff2",_0e="/fonts/Xiaolai/Xiaolai-Regular-670ba603758d94268e8606f240a42e12.woff2",T0e="/fonts/Xiaolai/Xiaolai-Regular-15dc6d811c9cd078f9086a740d5a1038.woff2",S0e="/fonts/Xiaolai/Xiaolai-Regular-8c2f33cee3993174f7e87c28e4bf42ee.woff2",I0e="/fonts/Xiaolai/Xiaolai-Regular-761d05e3cd968cf574166867998ef06a.woff2",x0e="/fonts/Xiaolai/Xiaolai-Regular-642b26e2e5f5fb780b51b593dbc8c851.woff2",C0e="/fonts/Xiaolai/Xiaolai-Regular-5572b3513ba8df57a3d5d7303ee6b11b.woff2",A0e="/fonts/Xiaolai/Xiaolai-Regular-3c9de2ae0ea4bc91a510942dfa4be8d2.woff2",M0e="/fonts/Xiaolai/Xiaolai-Regular-671a2c20b1eb9e4ef8a192833940e319.woff2",R0e="/fonts/Xiaolai/Xiaolai-Regular-4dc6d5f188d5c96d44815cd1e81aa885.woff2",k0e="/fonts/Xiaolai/Xiaolai-Regular-ce4884f96f11589608b76b726a755803.woff2",D0e="/fonts/Xiaolai/Xiaolai-Regular-8f476c4c99813d57cbe6eca4727388ad.woff2",L0e="/fonts/Xiaolai/Xiaolai-Regular-5935a5775af3d5c6307ac667bd9ae74e.woff2",N0e="/fonts/Xiaolai/Xiaolai-Regular-79f007c1c6d07557120982951ea67998.woff2",O0e="/fonts/Xiaolai/Xiaolai-Regular-bafff7a14c27403dcc6cf1432e8ea836.woff2",P0e="/fonts/Xiaolai/Xiaolai-Regular-543fa46ace099a7099dad69123399400.woff2",F0e="/fonts/Xiaolai/Xiaolai-Regular-4ddc14ed3eb0c3e46364317dfc0144a3.woff2",B0e="/fonts/Xiaolai/Xiaolai-Regular-0fa55a080fcd0f9dc2e0b0058b793df8.woff2",z0e="/fonts/Xiaolai/Xiaolai-Regular-66493ba5a8367f2928812f446f47b56a.woff2",H0e="/fonts/Xiaolai/Xiaolai-Regular-57862b464a55b18c7bf234ce22907d73.woff2",V0e="/fonts/Xiaolai/Xiaolai-Regular-8d3bcabb847b56243b16afe62adaaf21.woff2",$0e="/fonts/Xiaolai/Xiaolai-Regular-2b77e8ebfb2367ab2662396a60e7d320.woff2",G0e="/fonts/Xiaolai/Xiaolai-Regular-0b5d723fdc4e249c140f0909e87d03b4.woff2",X0e="/fonts/Xiaolai/Xiaolai-Regular-cdbce89e82cc1ab53a2decbf5819278f.woff2",j0e="/fonts/Xiaolai/Xiaolai-Regular-739bc1a567439c7cffcd1614644593d2.woff2",Y0e="/fonts/Xiaolai/Xiaolai-Regular-72252d73220fa3cd856677888cee1635.woff2",W0e="/fonts/Xiaolai/Xiaolai-Regular-cf6ff4e0f491ca0cf3038187a997b9b4.woff2",K0e="/fonts/Xiaolai/Xiaolai-Regular-9cfb2a77a4e45025105ad29a1748b90d.woff2",Z0e="/fonts/Xiaolai/Xiaolai-Regular-450da755d5bcb70906e1295e559b9602.woff2",q0e="/fonts/Xiaolai/Xiaolai-Regular-0986d134c05864f5025962eef9f994a0.woff2",Q0e="/fonts/Xiaolai/Xiaolai-Regular-1ee544f0f1dac422545c505baa788992.woff2",J0e="/fonts/Xiaolai/Xiaolai-Regular-4806e761d750087c2d734fc64596eaff.woff2",eme="/fonts/Xiaolai/Xiaolai-Regular-33432927cd87d40cfe393c7482bf221f.woff2",tme="/fonts/Xiaolai/Xiaolai-Regular-be549ab72f0719d606a5c01e2c0219b6.woff2",nme="/fonts/Xiaolai/Xiaolai-Regular-b5c1596551c256e0e9cf02028595b092.woff2",ime="/fonts/Xiaolai/Xiaolai-Regular-cf2cc71752631e579e35b0e423bf2638.woff2",sme="/fonts/Xiaolai/Xiaolai-Regular-6f3256af8454371776bc46670d33cc65.woff2",rme="/fonts/Xiaolai/Xiaolai-Regular-23f228f3999c01983860012330e4be08.woff2",ome="/fonts/Xiaolai/Xiaolai-Regular-21430ee05a1248901da8d0de08744d47.woff2",ame="/fonts/Xiaolai/Xiaolai-Regular-5330a2119a716e4e7224ed108b085dac.woff2",lme="/fonts/Xiaolai/Xiaolai-Regular-cd145ce4a0ea18469358df53c207bc1b.woff2",cme="/fonts/Xiaolai/Xiaolai-Regular-36925dfe329a45086cbb7fc5c20d45ac.woff2",ume="/fonts/Xiaolai/Xiaolai-Regular-4bfaa8ffa64c5ee560aa2daba7c9cbd3.woff2",dme="/fonts/Xiaolai/Xiaolai-Regular-112c051027b2d766c19a519f6ee1f4f7.woff2",fme="/fonts/Xiaolai/Xiaolai-Regular-5b0ed6971aaab9c8ad563230bd5471a7.woff2",hme="/fonts/Xiaolai/Xiaolai-Regular-98f2ad84457de7f3740d9920b8fa8667.woff2",gme="/fonts/Xiaolai/Xiaolai-Regular-733171b4ffcd17ea1fe1c0ba627173bf.woff2",mme="/fonts/Xiaolai/Xiaolai-Regular-684d65f1793cac449dde5d59cb3c47fb.woff2",pme="/fonts/Xiaolai/Xiaolai-Regular-cbaaefaaf326668277aa24dfa93c4d28.woff2",Ume="/fonts/Xiaolai/Xiaolai-Regular-58fd02350d0bc52cf1ca3bb32ce9766e.woff2",bme="/fonts/Xiaolai/Xiaolai-Regular-7ccce86603f80a099ddb0cb21d4ae3e3.woff2",yme="/fonts/Xiaolai/Xiaolai-Regular-3717077e38f98d89eae729b6c14e56dc.woff2",Eme="/fonts/Xiaolai/Xiaolai-Regular-dbea1af6dcd9860be40c3d18254338f5.woff2",vme="/fonts/Xiaolai/Xiaolai-Regular-4a0fdb40036e87b40aa08dd30584cb85.woff2",wme="/fonts/Xiaolai/Xiaolai-Regular-0f626226ba1272e832aea87bafd9720e.woff2",_me="/fonts/Xiaolai/Xiaolai-Regular-938d90c10ff8c20386af7f242c05d6b0.woff2",Tme="/fonts/Xiaolai/Xiaolai-Regular-b6d128682ee29e471486354d486a1b90.woff2",Sme="/fonts/Xiaolai/Xiaolai-Regular-9d81066dd2b337c938df6e90380a00dc.woff2",Ime="/fonts/Xiaolai/Xiaolai-Regular-20e7bf72fa05de9adf7dbcc7bf51dde6.woff2",xme="/fonts/Xiaolai/Xiaolai-Regular-4095eb84ef3874e2600247bee0b04026.woff2",Cme="/fonts/Xiaolai/Xiaolai-Regular-4ee10ae43505e2e0bc62656ced49c0fa.woff2",Ame="/fonts/Xiaolai/Xiaolai-Regular-7494dc504ae00ee9cd0505f990f88c5d.woff2",Mme="/fonts/Xiaolai/Xiaolai-Regular-8de5b863cb50dfefdd07cb11c774d579.woff2",Rme="/fonts/Xiaolai/Xiaolai-Regular-3e1f8f654357353bf0e04ba5c34b5f7f.woff2",kme="/fonts/Xiaolai/Xiaolai-Regular-2e33e8dc771ef5e1d9127d60a6b73679.woff2",Dme="/fonts/Xiaolai/Xiaolai-Regular-173945821411c09f70c95f98d590e697.woff2",Lme="/fonts/Xiaolai/Xiaolai-Regular-b358f7a51ece39a3247942b1feabdb29.woff2",Nme="/fonts/Xiaolai/Xiaolai-Regular-23ad2d71b280f00b1363b95b7bea94eb.woff2",Ome="/fonts/Xiaolai/Xiaolai-Regular-5882ffa04f32584d26109137e2da4352.woff2",Pme="/fonts/Xiaolai/Xiaolai-Regular-a203b91dad570bf05a58c3c3ddb529bf.woff2",Fme="/fonts/Xiaolai/Xiaolai-Regular-bd77e3c7f9e0b072d96af37f73d1aa32.woff2",Bme="/fonts/Xiaolai/Xiaolai-Regular-5a45d991244d4c7140217e1e5f5ca4f4.woff2",zme="/fonts/Xiaolai/Xiaolai-Regular-f56414bf9bced67990def8660e306759.woff2",Hme="/fonts/Xiaolai/Xiaolai-Regular-583d166e56ba0de4b77eabb47ef67839.woff2",Vme="/fonts/Xiaolai/Xiaolai-Regular-7f855356ab893b0d2b9c1c83b8116f0e.woff2",$me="/fonts/Xiaolai/Xiaolai-Regular-b57aaedfd8ebdf3931f25119dc6a5eb2.woff2",Gme="/fonts/Xiaolai/Xiaolai-Regular-b6fd38ca30869792244804b04bc058da.woff2",Xme="/fonts/Xiaolai/Xiaolai-Regular-452225341522a7942f0f6aab1a5c91a3.woff2",jme="/fonts/Xiaolai/Xiaolai-Regular-866fa7613df6b3fd272bcfd4530c0bb9.woff2",Yme="/fonts/Xiaolai/Xiaolai-Regular-52a84a22fd1369bffeaf21da2d6158dc.woff2",Wme="/fonts/Xiaolai/Xiaolai-Regular-829615148e6357d826b9242eb7fbbd1e.woff2",Kme="/fonts/Xiaolai/Xiaolai-Regular-c99eda15fc26a2941579560f76c3a5cf.woff2",Zme="/fonts/Xiaolai/Xiaolai-Regular-395c35dd584b56b0789f58a0559beaf1.woff2",qme="/fonts/Xiaolai/Xiaolai-Regular-203b0e569e3b14aac86a003dc3fa523e.woff2",Qme="/fonts/Xiaolai/Xiaolai-Regular-51a0e808bbc8361236ac521a119758a3.woff2",Jme="/fonts/Xiaolai/Xiaolai-Regular-6e092f71c1e634059ada0e52abadce67.woff2",epe="/fonts/Xiaolai/Xiaolai-Regular-0f7fb1e0d5015bb1371343153ecf7ce3.woff2",tpe="/fonts/Xiaolai/Xiaolai-Regular-d0cf73942fea1c74edbdf0b3011f4656.woff2",npe="/fonts/Xiaolai/Xiaolai-Regular-968cffdc8ee679da094e77ebf50f58ef.woff2",ipe="/fonts/Xiaolai/Xiaolai-Regular-7a07ddc0f0c0f5f4a9bad6ee3dda66b5.woff2",spe="/fonts/Xiaolai/Xiaolai-Regular-ec181b795ac1fb5a50d700b6e996d745.woff2",rpe="/fonts/Xiaolai/Xiaolai-Regular-cfb211578629b7e8153b37240de6a9d5.woff2",ope="/fonts/Xiaolai/Xiaolai-Regular-59e9ff77b0efaf684bc09274fb6908c9.woff2",ape="/fonts/Xiaolai/Xiaolai-Regular-2adbc89c11e65905393d3dfc468b9d5b.woff2",lpe="/fonts/Xiaolai/Xiaolai-Regular-70e811fd7994e61f408c923de6ddd078.woff2",cpe="/fonts/Xiaolai/Xiaolai-Regular-c4a687ac4f0c2766eefc9f77ed99cddf.woff2",upe="/fonts/Xiaolai/Xiaolai-Regular-51502f1206be09c565f1547c406e9558.woff2",dpe="/fonts/Xiaolai/Xiaolai-Regular-1fdc0c67ed57263a80fd108c1f6ccf24.woff2",fpe="/fonts/Xiaolai/Xiaolai-Regular-e11567fd2accf9957cd0d3c2be937d87.woff2",hpe="/fonts/Xiaolai/Xiaolai-Regular-20cc1bbf50e7efb442756cb605672c1f.woff2",gpe="/fonts/Xiaolai/Xiaolai-Regular-5d2898fbc097a7e24c6f38d80587621e.woff2",mpe="/fonts/Xiaolai/Xiaolai-Regular-ac9ceb44437becc3e9c4dbfebab7fc2d.woff2",ppe="/fonts/Xiaolai/Xiaolai-Regular-c16ed9740b85badf16e86ea782a3062f.woff2",Upe="/fonts/Xiaolai/Xiaolai-Regular-aa0d470430e6391eca720c7cfa44446f.woff2",bpe="/fonts/Xiaolai/Xiaolai-Regular-f2b54d4e7be0eaefe1c2c56836fa5368.woff2",ype="/fonts/Xiaolai/Xiaolai-Regular-99a16ef6a64934d5781933dbd9c46b2e.woff2",Epe="/fonts/Xiaolai/Xiaolai-Regular-c40533fdf4cc57177b12803598af7e59.woff2",vpe="/fonts/Xiaolai/Xiaolai-Regular-91ddb2969bf2d31ba02ad82998d1314c.woff2",wpe="/fonts/Xiaolai/Xiaolai-Regular-774d4f764a1299da5d28ec2f2ffe0d69.woff2",_pe="/fonts/Xiaolai/Xiaolai-Regular-7718fe60986d8b42b1be9c5ace5ccf25.woff2",Tpe="/fonts/Xiaolai/Xiaolai-Regular-aa5c9ca6cf4fba00433b7aa3fa10671a.woff2",Spe="/fonts/Xiaolai/Xiaolai-Regular-4f50e5136e136527280bc902c5817561.woff2",Ipe="/fonts/Xiaolai/Xiaolai-Regular-a0ca5df4258213d7fc9fce80f65ce760.woff2",xpe="/fonts/Xiaolai/Xiaolai-Regular-d2666cbed13462c5dc36fa2f15c202ca.woff2",Cpe="/fonts/Xiaolai/Xiaolai-Regular-1e6fd68f1f3902ce48ce8c69df385622.woff2",Ape="/fonts/Xiaolai/Xiaolai-Regular-87599f94b6cc129d505b375798d0d751.woff2",Mpe="/fonts/Xiaolai/Xiaolai-Regular-13ae07ed2e272d26d59bc0691cd7117a.woff2",Rpe="/fonts/Xiaolai/Xiaolai-Regular-353f33792a8f60dc69323ddf635a269e.woff2",kpe="/fonts/Xiaolai/Xiaolai-Regular-0facdf1ea213ba40261022f5d5ed4493.woff2",Dpe="/fonts/Xiaolai/Xiaolai-Regular-f6032fc06eb20480f096199713f70885.woff2",Lpe="/fonts/Xiaolai/Xiaolai-Regular-f8ee5d36068a42b51d0e4a1116cfcec1.woff2",Npe="/fonts/Xiaolai/Xiaolai-Regular-79d494361ae093b69e74ee9dbe65bfd4.woff2",Ope="/fonts/Xiaolai/Xiaolai-Regular-74e2263a91439c25b91d5132ce9f4d62.woff2",Ppe="/fonts/Xiaolai/Xiaolai-Regular-ee8bae97908d5147b423f77ad0d3c1bb.woff2",Fpe="/fonts/Xiaolai/Xiaolai-Regular-56467a5c8840c4d23a60b2f935114848.woff2",Bpe="/fonts/Xiaolai/Xiaolai-Regular-145aa02cdd91946e67dc934e1acffe75.woff2",zpe="/fonts/Xiaolai/Xiaolai-Regular-54acdfc2166ad7fcbd074f75fd4a56ba.woff2",Hpe="/fonts/Xiaolai/Xiaolai-Regular-29cec36cd205b211da97acabaa62f055.woff2",Vpe="/fonts/Xiaolai/Xiaolai-Regular-3756e81d3e149cf6099163ee79944fec.woff2",$pe="/fonts/Xiaolai/Xiaolai-Regular-8e9f97f01034820170065b2921b4fb5e.woff2",Gpe="/fonts/Xiaolai/Xiaolai-Regular-13d2887ec8ee73c43acdabc52a05af7b.woff2",Xpe="/fonts/Xiaolai/Xiaolai-Regular-72536a3d71b694a0d53dd90ddceae41e.woff2",jpe="/fonts/Xiaolai/Xiaolai-Regular-603aefd23e350ba7eb124273e3c9bcf1.woff2",Ype="/fonts/Xiaolai/Xiaolai-Regular-9544732d2e62d1a429674f8ee41b5d3a.woff2",Wpe="/fonts/Xiaolai/Xiaolai-Regular-d3716376641d615e2995605b29bca7b6.woff2",Kpe="/fonts/Xiaolai/Xiaolai-Regular-5a1ce3117cfe90c48e8fb4a9a00f694d.woff2",Zpe="/fonts/Xiaolai/Xiaolai-Regular-b7d203b051eff504ff59ddca7576b6a9.woff2",qpe="/fonts/Xiaolai/Xiaolai-Regular-4a38cc3e9cf104e69ba246d37f8cf135.woff2",Qpe="/fonts/Xiaolai/Xiaolai-Regular-982b630266d87db93d2539affb1275c6.woff2",Jpe="/fonts/Xiaolai/Xiaolai-Regular-9592bfc861f07bcb8d75c196b370e548.woff2",eUe="/fonts/Xiaolai/Xiaolai-Regular-a7accba310e821da5505f71c03b76bdb.woff2",tUe="/fonts/Xiaolai/Xiaolai-Regular-dac48066b5883d8b4551fc584f0c2a3e.woff2",nUe="/fonts/Xiaolai/Xiaolai-Regular-a1f916d6039285c4ffb900cd654e418f.woff2",iUe="/fonts/Xiaolai/Xiaolai-Regular-95bfd249da4902577b4b7d76ebdd0b44.woff2",sUe="/fonts/Xiaolai/Xiaolai-Regular-93fc8f28a33234bcadf1527cafabd502.woff2",rUe="/fonts/Xiaolai/Xiaolai-Regular-903bb6865f3452e2fda42e3a25547bc5.woff2",oUe="/fonts/Xiaolai/Xiaolai-Regular-4aca6a43e59aceee2166b0c7e4e85ef1.woff2",aUe="/fonts/Xiaolai/Xiaolai-Regular-24476a126f129212beb33f66853ea151.woff2",lUe="/fonts/Xiaolai/Xiaolai-Regular-1b611157cd46bb184d4fa4dae2d6a2b8.woff2",cUe="/fonts/Xiaolai/Xiaolai-Regular-56a32a7689abd0326e57c10c6c069bb4.woff2",uUe="/fonts/Xiaolai/Xiaolai-Regular-3cc70dbb64df5b21f1326cc24dee2195.woff2",dUe="/fonts/Xiaolai/Xiaolai-Regular-e2ead7ea7da0437f085f42ffc05f8d13.woff2",fUe="/fonts/Xiaolai/Xiaolai-Regular-97f7f48ce90c9429bf32ae51469db74d.woff2",hUe="/fonts/Xiaolai/Xiaolai-Regular-24a21c1e4449222e8d1898d69ff3a404.woff2",gUe="/fonts/Xiaolai/Xiaolai-Regular-726303e0774b4e678bff8c2deb6ca603.woff2",mUe="/fonts/Xiaolai/Xiaolai-Regular-5a7fac4b8b23a6e4e5ba0c9bf1756c91.woff2",pUe="/fonts/Xiaolai/Xiaolai-Regular-2b7441d46298788ac94e610ffcc709b6.woff2",UUe=[{uri:R1e,descriptors:{unicodeRange:"U+f9b8-fa6d,U+fe32,U+fe45-fe4f,U+ff02-ff0b,U+ff0d-ff1e,U+ff20-ff2a"}},{uri:N1e,descriptors:{unicodeRange:"U+20dd-20de,U+25ef,U+ff2b-ffbe,U+ffc2-ffc7,U+ffca-ffcf,U+ffd2-ffd7,U+ffda-ffdc,U+ffe0-ffe6,U+ffe8-ffee"}},{uri:L1e,descriptors:{unicodeRange:"U+d7eb-d7fb,U+f900-f9b7"}},{uri:O1e,descriptors:{unicodeRange:"U+d6f2-d7a3,U+d7b0-d7c6,U+d7cb-d7ea"}},{uri:F1e,descriptors:{unicodeRange:"U+d609-d6f1"}},{uri:B1e,descriptors:{unicodeRange:"U+d520-d608"}},{uri:P1e,descriptors:{unicodeRange:"U+d437-d51f"}},{uri:z1e,descriptors:{unicodeRange:"U+d34e-d436"}},{uri:V1e,descriptors:{unicodeRange:"U+d265-d34d"}},{uri:$1e,descriptors:{unicodeRange:"U+d17c-d264"}},{uri:D1e,descriptors:{unicodeRange:"U+d093-d17b"}},{uri:G1e,descriptors:{unicodeRange:"U+cfaa-d092"}},{uri:X1e,descriptors:{unicodeRange:"U+cec1-cfa9"}},{uri:I1e,descriptors:{unicodeRange:"U+cdd8-cec0"}},{uri:k1e,descriptors:{unicodeRange:"U+ccf1-cdd7"}},{uri:j1e,descriptors:{unicodeRange:"U+cc08-ccf0"}},{uri:S1e,descriptors:{unicodeRange:"U+cb43-cc07"}},{uri:Y1e,descriptors:{unicodeRange:"U+ca83-cb42"}},{uri:W1e,descriptors:{unicodeRange:"U+c9a1-ca82"}},{uri:K1e,descriptors:{unicodeRange:"U+c8b8-c9a0"}},{uri:Z1e,descriptors:{unicodeRange:"U+c7cf-c8b7"}},{uri:q1e,descriptors:{unicodeRange:"U+c6e6-c7ce"}},{uri:Q1e,descriptors:{unicodeRange:"U+c5fd-c6e5"}},{uri:J1e,descriptors:{unicodeRange:"U+c514-c5fc"}},{uri:e0e,descriptors:{unicodeRange:"U+c42b-c513"}},{uri:t0e,descriptors:{unicodeRange:"U+c341-c34e,U+c350-c42a"}},{uri:n0e,descriptors:{unicodeRange:"U+c258-c340"}},{uri:i0e,descriptors:{unicodeRange:"U+c16f-c257"}},{uri:s0e,descriptors:{unicodeRange:"U+c086-c16e"}},{uri:r0e,descriptors:{unicodeRange:"U+bf9d-c085"}},{uri:H1e,descriptors:{unicodeRange:"U+beb4-bf9c"}},{uri:o0e,descriptors:{unicodeRange:"U+bdcb-beb3"}},{uri:a0e,descriptors:{unicodeRange:"U+bce2-bdca"}},{uri:l0e,descriptors:{unicodeRange:"U+bbf9-bce1"}},{uri:c0e,descriptors:{unicodeRange:"U+bb10-bbf8"}},{uri:u0e,descriptors:{unicodeRange:"U+ba27-bb0f"}},{uri:d0e,descriptors:{unicodeRange:"U+b93e-ba26"}},{uri:f0e,descriptors:{unicodeRange:"U+b855-b93d"}},{uri:h0e,descriptors:{unicodeRange:"U+b76c-b854"}},{uri:y0e,descriptors:{unicodeRange:"U+b683-b76b"}},{uri:E0e,descriptors:{unicodeRange:"U+b59a-b682"}},{uri:g0e,descriptors:{unicodeRange:"U+b4b1-b599"}},{uri:v0e,descriptors:{unicodeRange:"U+11fb-11ff,U+b3cd-b4b0"}},{uri:w0e,descriptors:{unicodeRange:"U+11e6-11fa,U+b2f9-b3cc"}},{uri:_0e,descriptors:{unicodeRange:"U+11d1-11e5,U+b225-b2f8"}},{uri:U0e,descriptors:{unicodeRange:"U+11bc-11d0,U+b151-b224"}},{uri:T0e,descriptors:{unicodeRange:"U+11a7-11bb,U+b07d-b150"}},{uri:b0e,descriptors:{unicodeRange:"U+1191-11a6,U+afaa-b07c"}},{uri:S0e,descriptors:{unicodeRange:"U+117c-1190,U+aed6-afa9"}},{uri:I0e,descriptors:{unicodeRange:"U+1167-117b,U+ae02-aed5"}},{uri:x0e,descriptors:{unicodeRange:"U+1152-115e,U+1160-1166,U+ad2d-ae01"}},{uri:C0e,descriptors:{unicodeRange:"U+113d-1151,U+ac59-ad2c"}},{uri:A0e,descriptors:{unicodeRange:"U+1100-113c,U+9f95-9f98,U+9f9c-9f9e,U+9fa1-9fce,U+9fd0,U+a960-a97c,U+ac00-ac58"}},{uri:M0e,descriptors:{unicodeRange:"U+9771-9772,U+9775,U+9777-977b,U+977d-9784,U+9786-978a,U+978c,U+978e-9790,U+9793,U+9795-9797,U+9799-979f,U+97a1-97a2,U+97a4-97aa,U+97ac,U+97ae,U+97b0-97b1,U+97b3,U+97b5-97e5,U+97e8,U+97ee-97f2,U+97f4,U+97f7-982d"}},{uri:R0e,descriptors:{unicodeRange:"U+9491,U+9496,U+9498,U+94c7,U+94cf,U+94d3-94d4,U+94da,U+94e6,U+94fb,U+951c,U+9520,U+9527,U+9533,U+953d,U+9543,U+9548,U+954b,U+9555,U+955a,U+9560,U+956e,U+9574-9575,U+9577-957e,U+9580-95e7,U+95ec,U+95ff,U+9607,U+9613,U+9618,U+961b,U+961e,U+9620,U+9623-9629,U+962b-962d,U+962f-9630,U+9637-963a,U+963e,U+9641,U+9643,U+964a,U+964e-964f,U+9651-9653,U+9656-965a,U+965c-965e,U+9660,U+9663,U+9665-9666,U+966b,U+966d-9671,U+9673,U+9678-9684,U+9687,U+9689-968a,U+968c,U+968e,U+9691-9693"}},{uri:k0e,descriptors:{unicodeRange:"U+923c-9273,U+9275-928d,U+928f-92ad,U+92af-92c7,U+92c9-92ee"}},{uri:D0e,descriptors:{unicodeRange:"U+9159,U+915b-915c,U+915f-9160,U+9166-9168,U+916b,U+916d,U+9173,U+917a-917c,U+9180-9184,U+9186,U+9188,U+918a,U+918e-918f,U+9193-9199,U+919c-91a1,U+91a4-91a9,U+91ab-91ac,U+91b0-91b3,U+91b6-91b9,U+91bb-91c6,U+91c8,U+91cb,U+91d0,U+91d2-91db,U+91dd-923b"}},{uri:L0e,descriptors:{unicodeRange:"U+902b-902c,U+9030-9034,U+9037,U+9039-903a,U+903d,U+903f-9040,U+9043,U+9045-9046,U+9048-904c,U+904e,U+9054-9056,U+9059-905a,U+905c-9061,U+9064,U+9066-9067,U+9069-906c,U+906f-9073,U+9076-907c,U+907e,U+9081,U+9084-9087,U+9089-908a,U+908c-9090,U+9092,U+9094,U+9096,U+9098,U+909a,U+909c,U+909e-90a0,U+90a4-90a5,U+90a7-90a9,U+90ab,U+90ad,U+90b2,U+90b7,U+90bc-90bd,U+90bf-90c0,U+90c2-90c3,U+90c6,U+90c8-90c9,U+90cb-90cd,U+90d2,U+90d4-90d6,U+90d8-90da,U+90de-90e0,U+90e3-90e5,U+90e9-90ea,U+90ec,U+90ee,U+90f0-90f3,U+90f5-90f7,U+90f9-90fc,U+90ff-9101,U+9103,U+9105-9118,U+911a-911d,U+911f-9121,U+9124-912e,U+9130,U+9132-9138,U+913a-9142,U+9144-9145,U+9147-9148,U+9151,U+9153-9156,U+9158"}},{uri:N0e,descriptors:{unicodeRange:"U+8f03-8f65,U+8f6a,U+8f80,U+8f8c,U+8f92,U+8f9d,U+8fa0-8fa2,U+8fa4-8fa7,U+8faa,U+8fac-8faf,U+8fb2-8fb5,U+8fb7-8fb8,U+8fba-8fbc,U+8fbf-8fc0,U+8fc3,U+8fc6,U+8fc9-8fcd,U+8fcf,U+8fd2,U+8fd6-8fd7,U+8fda,U+8fe0-8fe1,U+8fe3,U+8fe7,U+8fec,U+8fef,U+8ff1-8ff2,U+8ff4-8ff6,U+8ffa-8ffc,U+8ffe-8fff,U+9007-9008,U+900c,U+900e,U+9013,U+9015,U+9018-9019,U+901c,U+9023-9025,U+9027-902a"}},{uri:O0e,descriptors:{unicodeRange:"U+8d03-8d1c,U+8d20,U+8d51-8d52,U+8d57,U+8d5f,U+8d65,U+8d68-8d6a,U+8d6c,U+8d6e-8d6f,U+8d71-8d72,U+8d78-8d80,U+8d82-8d83,U+8d86-8d89,U+8d8c-8d90,U+8d92-8d93,U+8d95-8d9e,U+8da0-8da2,U+8da4-8db0,U+8db2,U+8db6-8db7,U+8db9,U+8dbb,U+8dbd,U+8dc0-8dc2,U+8dc5,U+8dc7-8dca,U+8dcd,U+8dd0,U+8dd2-8dd5,U+8dd8-8dd9,U+8ddc,U+8de0-8de2,U+8de5-8de7,U+8de9,U+8ded-8dee,U+8df0-8df2,U+8df4,U+8df6,U+8dfc,U+8dfe-8e04,U+8e06-8e08,U+8e0b,U+8e0d-8e0e,U+8e10-8e13,U+8e15-8e1c,U+8e20-8e21,U+8e24-8e28,U+8e2b,U+8e2d,U+8e30,U+8e32-8e34,U+8e36-8e38,U+8e3b-8e3c,U+8e3e-8e3f,U+8e43,U+8e45-8e46"}},{uri:P0e,descriptors:{unicodeRange:"U+8bea,U+8c09,U+8c1e,U+8c38-8c40,U+8c42-8c45,U+8c48,U+8c4a-8c4b,U+8c4d-8c54,U+8c56-8c59,U+8c5b-8c60,U+8c63-8c69,U+8c6c-8c72,U+8c74-8c77,U+8c7b-8c81,U+8c83-8c84,U+8c86-8c88,U+8c8b,U+8c8d-8c93,U+8c95-8c97,U+8c99-8d02"}},{uri:F0e,descriptors:{unicodeRange:"U+8a64-8a78,U+8a7a-8a88,U+8a8b-8a92,U+8a94-8b06,U+8b08-8b1b"}},{uri:B0e,descriptors:{unicodeRange:"U+8987-89c0,U+89c3,U+89cd,U+89d3-89d5,U+89d7-89d9,U+89db,U+89dd,U+89df-89e2,U+89e4,U+89e7-89ea,U+89ec-89ee,U+89f0-89f2,U+89f4-89ff,U+8a01-8a06,U+8a08-8a3d,U+8a3f-8a47,U+8a49-8a63"}},{uri:z0e,descriptors:{unicodeRange:"U+87e3-87e4,U+87e6-87e9,U+87eb-87ed,U+87ef-87f8,U+87fa-87fd,U+87ff-8802,U+8804-8809,U+880b-8812,U+8814,U+8817-881a,U+881c-8820,U+8823-8831,U+8833-8838,U+883a-883b,U+883d-883f,U+8841-8843,U+8846-884b,U+884e-8853,U+8855-8856,U+8858,U+885a-8860,U+8866-8867,U+886a,U+886d,U+886f,U+8871,U+8873-8876,U+8878-887c,U+8880,U+8883,U+8886-8887,U+8889-888a,U+888c,U+888e-8891,U+8893-8895,U+8897-889b,U+889d-88a1,U+88a3,U+88a5-88aa,U+88ac,U+88ae-88b0,U+88b2-88b6,U+88b8-88bb"}},{uri:H0e,descriptors:{unicodeRange:"U+86e7-86e8,U+86ea-86ec,U+86ef,U+86f5-86f7,U+86fa-86fd,U+86ff,U+8701,U+8704-8706,U+870b-870c,U+870e-8711,U+8714,U+8716,U+8719,U+871b,U+871d,U+871f-8720,U+8724,U+8726-8728,U+872a-872d,U+872f-8730,U+8732-8733,U+8735-8736,U+8738-873a,U+873c-873d,U+8740-8746,U+874a-874b,U+874d,U+874f-8752,U+8754-8756,U+8758,U+875a-875f,U+8761-8762,U+8766-876d,U+876f,U+8771-8773,U+8775,U+8777-877a,U+877f-8781,U+8784,U+8786-8787,U+8789-878a,U+878c,U+878e-8792,U+8794-8796,U+8798-879e,U+87a0-87a7,U+87a9-87aa,U+87ae,U+87b0-87b2,U+87b4,U+87b6-87b9,U+87bb-87bc,U+87be-87bf,U+87c1-87c5,U+87c7-87c9,U+87cc-87d0,U+87d4-87da,U+87dc-87df,U+87e1-87e2"}},{uri:V0e,descriptors:{unicodeRange:"U+8604,U+8606-8610,U+8612-8615,U+8617-8626,U+8628,U+862a-8637,U+8639-863b,U+863d-864c,U+8652-8653,U+8655-8659,U+865b-865d,U+865f-8661,U+8663-866a,U+866d,U+866f-8670,U+8672-8678,U+8683-8689,U+868e-8692,U+8694,U+8696-869b,U+869e-86a2,U+86a5-86a6,U+86ab,U+86ad-86ae,U+86b2-86b3,U+86b7-86b9,U+86bb-86bf,U+86c1-86c3,U+86c5,U+86c8,U+86cc-86cd,U+86d2-86d3,U+86d5-86d7,U+86da,U+86dc-86dd,U+86e0-86e3,U+86e5-86e6"}},{uri:$0e,descriptors:{unicodeRange:"U+8456,U+8458,U+845d-8460,U+8462,U+8464-8468,U+846a,U+846e-8470,U+8472,U+8474,U+8477,U+8479,U+847b-8481,U+8483-8486,U+848a,U+848d,U+848f-8496,U+8498,U+849a-849b,U+849d-84a0,U+84a2-84ae,U+84b0-84b1,U+84b3,U+84b5-84b7,U+84bb-84bc,U+84be,U+84c0,U+84c2-84c3,U+84c5-84c8,U+84cb-84cc,U+84ce-84cf,U+84d2,U+84d4-84d5,U+84d7-84dc,U+84de,U+84e1-84e2,U+84e4,U+84e7-84eb,U+84ed-84ef,U+84f1-84fb,U+84fd-84fe,U+8500-850b,U+850d-8510,U+8512,U+8514-8516,U+8518-8519,U+851b-851e,U+8520,U+8522-852a,U+852d-8536,U+853e-8542,U+8544-8547,U+854b-854f"}},{uri:G0e,descriptors:{unicodeRange:"U+82c2-82c3,U+82c5-82c6,U+82c9,U+82d0,U+82d6,U+82d9-82da,U+82dd,U+82e2,U+82e7-82ea,U+82ec-82ee,U+82f0,U+82f2-82f3,U+82f5-82f6,U+82f8,U+82fa,U+82fc-8300,U+830a-830b,U+830d,U+8310,U+8312-8313,U+8316,U+8318-8319,U+831d-8326,U+8329-832a,U+832e,U+8330,U+8332,U+8337,U+833b,U+833d-833f,U+8341-8342,U+8344-8345,U+8348,U+834a-834e,U+8353,U+8355-8359,U+835d,U+8362,U+8370-8376,U+8379-837a,U+837e-8384,U+8387-8388,U+838a-838d,U+838f-8391,U+8394-8397,U+8399-839a,U+839d,U+839f,U+83a1-83a7,U+83ac-83af,U+83b5,U+83bb,U+83be-83bf,U+83c2-83c4,U+83c6,U+83c8-83c9,U+83cb,U+83cd-83ce,U+83d0-83d3,U+83d5,U+83d7,U+83d9-83db,U+83de,U+83e2-83e4,U+83e6-83e8,U+83eb-83ef,U+83f3-83f7,U+83fa-83fc,U+83fe-8400,U+8402,U+8405,U+8407-840a,U+8410,U+8412-8417,U+8419-841b,U+841e-8423,U+8429-8430,U+8432-8437,U+8439-843b,U+843e-8445,U+8447-8450,U+8452-8455"}},{uri:X0e,descriptors:{unicodeRange:"U+81a4-81a5,U+81a7,U+81a9,U+81ab-81b2,U+81b4-81b9,U+81bc-81bf,U+81c4-81c5,U+81c7-81c9,U+81cb,U+81cd-81e2,U+81e4-81e6,U+81e8-81e9,U+81eb,U+81ee-81f2,U+81f5-81fa,U+81fd,U+81ff,U+8203,U+8207-820b,U+820e-820f,U+8211,U+8213,U+8215-821a,U+821d,U+8220,U+8224-8227,U+8229,U+822e,U+8232,U+823a,U+823c-823d,U+823f-8243,U+8245-8246,U+8248,U+824a,U+824c-824e,U+8250-8257,U+8259,U+825b-825e,U+8260-8267,U+8269-826d,U+8271,U+8275-8278,U+827b-827c,U+8280-8281,U+8283,U+8285-8287,U+8289,U+828c,U+8290,U+8293-8296,U+829a-829b,U+829e,U+82a0,U+82a2-82a3,U+82a7,U+82b2,U+82b5-82b6,U+82ba-82bc,U+82bf-82c0"}},{uri:j0e,descriptors:{unicodeRange:"U+8059,U+805b-8068,U+806b-8070,U+8072-807e,U+8081-8082,U+8085,U+8088,U+808a,U+808d-8092,U+8094-8095,U+8097,U+8099,U+809e,U+80a3,U+80a6-80a8,U+80ac,U+80b0,U+80b3,U+80b5-80b6,U+80b8-80b9,U+80bb,U+80c5,U+80c7-80cb,U+80cf-80d5,U+80d8,U+80df-80e0,U+80e2-80e3,U+80e6,U+80ee,U+80f5,U+80f7,U+80f9,U+80fb,U+80fe-8101,U+8103-8105,U+8107-8108,U+810b-810c,U+8115,U+8117,U+8119,U+811b-811d,U+811f-812b,U+812d-812e,U+8130,U+8133-8135,U+8137,U+8139-813d,U+813f-8145,U+8147,U+8149,U+814d-814f,U+8152,U+8156-8158,U+815b-815f,U+8161-8164,U+8166,U+8168,U+816a-816c,U+816f,U+8172-8173,U+8175-8178,U+8181,U+8183-8187,U+8189,U+818b-818e,U+8190,U+8192-8197,U+8199-819a,U+819e-81a2"}},{uri:Y0e,descriptors:{unicodeRange:"U+7f3c-7f41,U+7f43,U+7f46-7f4f,U+7f52-7f53,U+7f56,U+7f59,U+7f5b-7f5e,U+7f60,U+7f63-7f67,U+7f6b-7f6d,U+7f6f-7f70,U+7f73,U+7f75-7f78,U+7f7a-7f7d,U+7f7f-7f80,U+7f82-7f89,U+7f8b,U+7f8d,U+7f8f-7f93,U+7f95-7f99,U+7f9b-7f9c,U+7fa0,U+7fa2-7fa3,U+7fa5-7fa6,U+7fa8-7fae,U+7fb1,U+7fb3-7fb7,U+7fba-7fbb,U+7fbe,U+7fc0,U+7fc2-7fc4,U+7fc6-7fc9,U+7fcb,U+7fcd,U+7fcf-7fd3,U+7fd6-7fd7,U+7fd9-7fde,U+7fe2-7fe4,U+7fe7-7fe8,U+7fea-7fed,U+7fef,U+7ff2,U+7ff4-7ffa,U+7ffd-7fff,U+8002,U+8007-800a,U+800e-800f,U+8011,U+8013,U+801a-801b,U+801d-801f,U+8021,U+8023-8024,U+802b-8030,U+8032,U+8034,U+8039-803a,U+803c,U+803e,U+8040-8041,U+8044-8045,U+8047-8049,U+804e-8051,U+8053,U+8055-8057"}},{uri:C1e,descriptors:{unicodeRange:"U+7cd8,U+7cda-7cdb,U+7cdd-7cde,U+7ce1-7ce7,U+7ce9-7cee,U+7cf0-7cf7,U+7cf9-7cfa,U+7cfc-7d09,U+7d0b-7d1f,U+7d21,U+7d23-7d26,U+7d28-7d2a,U+7d2c-7d2e,U+7d30-7d6d,U+7d6f-7d76,U+7d78-7d94"}},{uri:W0e,descriptors:{unicodeRange:"U+7afe,U+7b00-7b02,U+7b05,U+7b07,U+7b09,U+7b0c-7b0e,U+7b10,U+7b12-7b13,U+7b16-7b18,U+7b1a,U+7b1c-7b1d,U+7b1f,U+7b21-7b23,U+7b27,U+7b29,U+7b2d,U+7b2f-7b30,U+7b32,U+7b34-7b37,U+7b39,U+7b3b,U+7b3d,U+7b3f-7b44,U+7b46,U+7b48,U+7b4a,U+7b4d-7b4e,U+7b53,U+7b55,U+7b57,U+7b59,U+7b5c,U+7b5e-7b5f,U+7b61,U+7b63-7b6d,U+7b6f-7b70,U+7b73-7b74,U+7b76,U+7b78,U+7b7a,U+7b7c-7b7d,U+7b7f,U+7b81-7b84,U+7b86-7b8c,U+7b8e-7b8f,U+7b91-7b93,U+7b96,U+7b98-7b9b,U+7b9e-7ba0,U+7ba3-7ba5,U+7bae-7bb0,U+7bb2-7bb3,U+7bb5-7bb7,U+7bb9-7bc0,U+7bc2-7bc5,U+7bc8-7bcb,U+7bcd-7bd0,U+7bd2,U+7bd4-7bd8,U+7bdb-7bdc,U+7bde-7be0,U+7be2-7be4,U+7be7-7be9,U+7beb-7bed,U+7bef-7bf0,U+7bf2-7bf6,U+7bf8-7bfb,U+7bfd,U+7bff-7c06,U+7c08-7c0a,U+7c0d-7c0e,U+7c10-7c13"}},{uri:K0e,descriptors:{unicodeRange:"U+7a10-7a13,U+7a15-7a16,U+7a18-7a19,U+7a1b-7a1d,U+7a1f,U+7a21-7a22,U+7a24-7a32,U+7a34-7a36,U+7a38,U+7a3a,U+7a3e,U+7a40-7a45,U+7a47-7a50,U+7a52-7a56,U+7a58-7a6f,U+7a71-7a73,U+7a75,U+7a7b-7a7e,U+7a82,U+7a85,U+7a87,U+7a89-7a8c,U+7a8e-7a90,U+7a93-7a94,U+7a99-7a9b,U+7a9e,U+7aa1-7aa4,U+7aa7,U+7aa9-7aab,U+7aae-7ab2,U+7ab4-7abe,U+7ac0-7aca,U+7acc-7ad5,U+7ad7-7ad8,U+7ada-7add,U+7ae1-7ae2,U+7ae4,U+7ae7-7aec,U+7aee,U+7af0-7af8,U+7afb-7afc"}},{uri:Z0e,descriptors:{unicodeRange:"U+790d-7912,U+7914-791d,U+791f-7923,U+7925-7933,U+7935-7939,U+793d,U+793f,U+7942-7945,U+7947,U+794a-7952,U+7954-7955,U+7958-7959,U+7961,U+7963-7964,U+7966,U+7969-796c,U+796e,U+7970-7976,U+7979,U+797b-797f,U+7982-7983,U+7986-7989,U+798b-798e,U+7990-7999,U+799b-79a6,U+79a8-79b2,U+79b4-79b8,U+79bc,U+79bf,U+79c2,U+79c4-79c5,U+79c7-79c8,U+79ca,U+79cc,U+79ce-79d0,U+79d3-79d4,U+79d6-79d7,U+79d9-79de,U+79e0-79e2,U+79e5,U+79e8,U+79ea,U+79ec,U+79ee,U+79f1-79f7,U+79f9-79fa,U+79fc,U+79fe-79ff,U+7a01,U+7a04-7a05,U+7a07-7a0a,U+7a0c,U+7a0f"}},{uri:q0e,descriptors:{unicodeRange:"U+77d8-77da,U+77dd-77e1,U+77e4,U+77e6,U+77e8,U+77ea,U+77ef-77f2,U+77f4-77f5,U+77f7,U+77f9-77fc,U+7803-7808,U+780a-780b,U+780e-7810,U+7813,U+7815,U+7819,U+781b,U+781e,U+7820-7822,U+7824,U+7828,U+782a-782b,U+782e-782f,U+7831-7833,U+7835-7836,U+783d,U+783f,U+7841-7844,U+7846,U+7848-784b,U+784d,U+784f,U+7851,U+7853-7854,U+7858-785c,U+785e-7869,U+786f-7876,U+7878-787b,U+787d-7886,U+7888,U+788a-788b,U+788f-7890,U+7892,U+7894-7896,U+7899,U+789d-789e,U+78a0,U+78a2,U+78a4,U+78a6,U+78a8-78af,U+78b5-78b8,U+78ba-78bd,U+78bf-78c0,U+78c2-78c4,U+78c6-78c8,U+78cc-78cf,U+78d1-78d3,U+78d6-78d8,U+78da-78e7,U+78e9-78eb,U+78ed-78f1,U+78f3,U+78f5-78f6,U+78f8-78f9,U+78fb-7900,U+7902-7904,U+7906-790c"}},{uri:Q0e,descriptors:{unicodeRange:"U+76af-76b0,U+76b3,U+76b5-76be,U+76c0-76c1,U+76c3-76c4,U+76c7,U+76c9,U+76cb-76cc,U+76d3,U+76d5,U+76d9-76da,U+76dc-76de,U+76e0-76e4,U+76e6-76ed,U+76f0,U+76f3,U+76f5-76f7,U+76fa-76fb,U+76fd,U+76ff-7703,U+7705-7706,U+770a,U+770c,U+770e-7718,U+771b-771e,U+7721,U+7723-7725,U+7727,U+772a-772c,U+772e,U+7730-7734,U+7739,U+773b,U+773d-773f,U+7742,U+7744-7746,U+7748-774f,U+7752-7759,U+775c-7760,U+7764,U+7767,U+7769-776a,U+776d-7778,U+777a-777c,U+7781-7783,U+7786-778b,U+778f-7790,U+7793-779e,U+77a1,U+77a3-77a4,U+77a6,U+77a8,U+77ab,U+77ad-77af,U+77b1-77b2,U+77b4,U+77b6-77ba,U+77bc,U+77be,U+77c0-77cc,U+77ce-77d6"}},{uri:J0e,descriptors:{unicodeRange:"U+7589-758a,U+758c-758e,U+7590,U+7593,U+7595,U+7598,U+759b-759c,U+759e,U+75a2,U+75a6-75aa,U+75ad,U+75b6-75b7,U+75ba-75bb,U+75bf-75c1,U+75c6,U+75cb-75cc,U+75ce-75d1,U+75d3,U+75d7,U+75d9-75da,U+75dc-75dd,U+75df-75e1,U+75e5,U+75e9,U+75ec-75ef,U+75f2-75f3,U+75f5-75f8,U+75fa-75fb,U+75fd-75fe,U+7602,U+7604,U+7606-7609,U+760b,U+760d-760f,U+7611-7614,U+7616,U+761a,U+761c-761e,U+7621,U+7623,U+7627-7628,U+762c,U+762e-762f,U+7631-7632,U+7636-7637,U+7639-763b,U+763d,U+7641-7642,U+7644-764b,U+764e-7653,U+7655,U+7657-765b,U+765d,U+765f-7662,U+7664-766a,U+766c-766e,U+7670-7677,U+7679-767a,U+767c,U+767f-7681,U+7683,U+7685,U+7689-768a,U+768c-768d,U+768f-7690,U+7692,U+7694-7695,U+7697-7698,U+769a-76a3,U+76a5-76ad"}},{uri:eme,descriptors:{unicodeRange:"U+7492-749b,U+749d,U+749f-74a6,U+74aa-74b9,U+74bb-74d1,U+74d3-74db,U+74dd,U+74df,U+74e1,U+74e5,U+74e7-74ed,U+74f0-74f3,U+74f5,U+74f8-74fe,U+7500-7503,U+7505-750c,U+750e,U+7510,U+7512,U+7514-7517,U+751b,U+751d-751e,U+7520-7524,U+7526-7527,U+752a,U+752e,U+7534,U+7536,U+7539,U+753c-753d,U+753f,U+7541-7544,U+7546-7547,U+7549-754a,U+754d,U+7550-7553,U+7555-7558,U+755d-7564,U+7567-7569,U+756b-7571,U+7573,U+7575-7577,U+757a-757e,U+7580-7582,U+7584-7585,U+7587-7588"}},{uri:tme,descriptors:{unicodeRange:"U+7372-737d,U+737f-7383,U+7385-7386,U+7388,U+738a,U+738c-738d,U+738f-7390,U+7392-7395,U+7397-739a,U+739c-739e,U+73a0-73a1,U+73a3-73a8,U+73aa,U+73ac-73ad,U+73b1,U+73b4-73b6,U+73b8-73b9,U+73bc-73bf,U+73c1,U+73c3-73c7,U+73cb-73cc,U+73ce,U+73d2-73d8,U+73da-73dd,U+73df,U+73e1-73e4,U+73e6,U+73e8,U+73ea-73ec,U+73ee-73f1,U+73f3-7402,U+7404,U+7407-7408,U+740b-740e,U+7411-7419,U+741c-7421,U+7423-7424,U+7427,U+7429,U+742b,U+742d,U+742f,U+7431-7432,U+7437-743b,U+743d-7440,U+7442-7454,U+7456,U+7458,U+745d,U+7460-746c,U+746e-746f,U+7471-7475,U+7478-747d,U+747f,U+7482,U+7484-7486,U+7488-748a,U+748c-748d,U+748f,U+7491"}},{uri:T1e,descriptors:{unicodeRange:"U+7054-705d,U+705f-706a,U+706e,U+7071-7074,U+7077,U+7079-707b,U+707d,U+7081-7084,U+7086-7088,U+708b-708d,U+708f-7091,U+7093,U+7097-7098,U+709a-709b,U+709e-70aa,U+70b0,U+70b2,U+70b4-70b6,U+70ba,U+70be-70bf,U+70c4-70c7,U+70c9,U+70cb-70d7,U+70da,U+70dc-70de,U+70e0-70e3,U+70e5,U+70ea,U+70ee,U+70f0-70f6,U+70f8,U+70fa-70fc,U+70fe-7108,U+710b-710f,U+7111-7112,U+7114,U+7117,U+711b-7125,U+7127-712e,U+7132-7135,U+7137-7144,U+7146-7149,U+714b,U+714d,U+714f-715b,U+715d,U+715f-7163,U+7165,U+7169-716d,U+716f-7171,U+7174-7177"}},{uri:nme,descriptors:{unicodeRange:"U+722e-722f,U+7232-7234,U+723a,U+723c,U+723e,U+7240-7246,U+7249-724b,U+724e-7251,U+7253-7255,U+7257-7258,U+725a,U+725c,U+725e,U+7260,U+7263-7265,U+7268,U+726a-726d,U+7270-7271,U+7273-7274,U+7276-7278,U+727b-727d,U+7282-7283,U+7285-7289,U+728c,U+728e,U+7290-7291,U+7293-729e,U+72a0-72ab,U+72ae,U+72b1-72b3,U+72b5,U+72ba-72c0,U+72c5-72c7,U+72c9-72cc,U+72cf,U+72d1,U+72d3-72d6,U+72d8,U+72da-72dd,U+72df,U+72e2-72e7,U+72ea-72eb,U+72f5-72f6,U+72f9,U+72fd-7300,U+7302,U+7304-7309,U+730b-730d,U+730f-7312,U+7314,U+7318-731a,U+731f-7320,U+7323-7324,U+7326-7328,U+732d,U+732f-7330,U+7332-7333,U+7335-7336,U+733a-733d,U+7340-734c,U+734e-734f,U+7351,U+7353-7356,U+7358-735f,U+7361-736b,U+736e,U+7370-7371"}},{uri:p0e,descriptors:{unicodeRange:"U+6ec5-6ec6,U+6ec8-6eca,U+6ecc-6ece,U+6ed0,U+6ed2,U+6ed6,U+6ed8-6ed9,U+6edb-6edd,U+6ee3,U+6ee7,U+6eea-6ef3,U+6ef5-6ef8,U+6efa-6f01,U+6f03-6f05,U+6f07-6f08,U+6f0a-6f0e,U+6f10-6f12,U+6f16-6f1f,U+6f21-6f23,U+6f25-6f28,U+6f2c,U+6f2e,U+6f30,U+6f32,U+6f34-6f35,U+6f37-6f3d,U+6f3f-6f45,U+6f48-6f4a,U+6f4c,U+6f4e-6f57,U+6f59-6f5b,U+6f5d,U+6f5f-6f61,U+6f63-6f65,U+6f67-6f6c,U+6f6f-6f71,U+6f73,U+6f75-6f77,U+6f79,U+6f7b,U+6f7d-6f83,U+6f85-6f87,U+6f8a-6f8b,U+6f8f-6f9b,U+6f9d-6fa0,U+6fa2-6fa6,U+6fa8-6fb1"}},{uri:ime,descriptors:{unicodeRange:"U+6d73,U+6d75-6d76,U+6d79-6d7b,U+6d7d-6d81,U+6d83-6d84,U+6d86-6d87,U+6d8a-6d8b,U+6d8d,U+6d8f-6d90,U+6d92,U+6d96-6d9a,U+6d9c,U+6da2,U+6da5,U+6dac-6dad,U+6db0-6db1,U+6db3-6db4,U+6db6-6db7,U+6db9-6dbe,U+6dc1-6dc3,U+6dc8-6dca,U+6dcd-6dd0,U+6dd2-6dd5,U+6dd7,U+6dda-6ddc,U+6ddf,U+6de2-6de3,U+6de5,U+6de7-6dea,U+6ded,U+6def-6df0,U+6df2,U+6df4-6df6,U+6df8,U+6dfa,U+6dfd-6e04,U+6e06-6e09,U+6e0b,U+6e0f,U+6e12-6e13,U+6e15,U+6e18-6e19,U+6e1b-6e1c,U+6e1e-6e1f,U+6e22,U+6e26-6e28,U+6e2a,U+6e2c,U+6e2e,U+6e30-6e31,U+6e33,U+6e35-6e37,U+6e39,U+6e3b-6e42,U+6e45-6e4c,U+6e4f-6e52,U+6e55,U+6e57,U+6e59-6e5a,U+6e5c-6e5e,U+6e60-6e6a,U+6e6c-6e6d,U+6e6f-6e7d,U+6e80-6e82,U+6e84,U+6e87-6e88,U+6e8a-6e8e,U+6e91-6e97,U+6e99-6e9b,U+6e9d-6e9e,U+6ea0-6ea1,U+6ea3-6ea4,U+6ea6,U+6ea8-6ea9,U+6eab-6eae,U+6eb0,U+6eb3,U+6eb5,U+6eb8-6eb9,U+6ebc,U+6ebe-6ec0,U+6ec3-6ec4"}},{uri:sme,descriptors:{unicodeRange:"U+6bbb-6bbe,U+6bc0,U+6bc3-6bc4,U+6bc6-6bca,U+6bcc,U+6bce,U+6bd0-6bd1,U+6bd8,U+6bda,U+6bdc-6be0,U+6be2-6be9,U+6bec-6bee,U+6bf0-6bf2,U+6bf4,U+6bf6-6bf8,U+6bfa-6bfc,U+6bfe-6c04,U+6c08-6c0c,U+6c0e,U+6c12,U+6c17,U+6c1c-6c1e,U+6c20,U+6c23,U+6c25,U+6c2b-6c2d,U+6c31,U+6c33,U+6c36-6c37,U+6c39-6c3c,U+6c3e-6c3f,U+6c43-6c45,U+6c48,U+6c4b-6c4f,U+6c51-6c53,U+6c56,U+6c58-6c5a,U+6c62-6c63,U+6c65-6c67,U+6c6b-6c6f,U+6c71,U+6c73,U+6c75,U+6c77-6c78,U+6c7a-6c7c,U+6c7f-6c80,U+6c84,U+6c87,U+6c8a-6c8b,U+6c8d-6c8e,U+6c91-6c92,U+6c95-6c98,U+6c9a,U+6c9c-6c9e,U+6ca0,U+6ca2,U+6ca8,U+6cac,U+6caf-6cb0,U+6cb4-6cb7,U+6cba,U+6cc0-6cc3,U+6cc6-6cc8,U+6ccb,U+6ccd-6ccf,U+6cd1-6cd2,U+6cd8-6cda,U+6cdc-6cdd,U+6cdf,U+6ce4,U+6ce6-6ce7,U+6ce9,U+6cec-6ced,U+6cf2,U+6cf4,U+6cf9,U+6cff-6d00,U+6d02-6d03,U+6d05-6d06,U+6d08-6d0a,U+6d0d,U+6d0f-6d11,U+6d13-6d16,U+6d18,U+6d1c-6d1d,U+6d1f-6d24,U+6d26,U+6d28-6d29,U+6d2c-6d2d,U+6d2f-6d30,U+6d34,U+6d36-6d38,U+6d3a,U+6d3f-6d40,U+6d42,U+6d44,U+6d49,U+6d4c,U+6d50,U+6d55-6d58,U+6d5b,U+6d5d,U+6d5f,U+6d61-6d62,U+6d64-6d65,U+6d67-6d68,U+6d6b-6d6d,U+6d70-6d72"}},{uri:rme,descriptors:{unicodeRange:"U+6967-696a,U+696c-696d,U+696f-6970,U+6972-6976,U+697a-697b,U+697d-697f,U+6981,U+6983,U+6985,U+698a-698c,U+698e-6993,U+6996-6997,U+6999-699a,U+699d-69a6,U+69a9-69aa,U+69ac,U+69ae-69b0,U+69b2-69b3,U+69b5-69b6,U+69b8-69ba,U+69bc-69c0,U+69c2-69c9,U+69cb,U+69cd,U+69cf,U+69d1-69d3,U+69d5-69da,U+69dc-69de,U+69e1-69ec,U+69ee-69f1,U+69f3-69fc,U+69fe,U+6a00-6a09,U+6a0b-6a16,U+6a19-6a1e,U+6a20,U+6a22-6a27,U+6a29,U+6a2b-6a2e,U+6a30,U+6a32-6a34,U+6a36-6a3c,U+6a3f-6a43,U+6a45-6a46,U+6a48-6a4a"}},{uri:ome,descriptors:{unicodeRange:"U+6830-6831,U+6834-6836,U+683a-683b,U+683f,U+6847,U+684b,U+684d,U+684f,U+6852,U+6856-685f,U+686a,U+686c-6873,U+6875,U+6878-6880,U+6882,U+6884,U+6887-688e,U+6890-6892,U+6894-6896,U+6898-68a1,U+68a3-68a5,U+68a9-68ac,U+68ae,U+68b1-68b2,U+68b4,U+68b6-68bf,U+68c1,U+68c3-68c8,U+68ca,U+68cc,U+68ce-68d1,U+68d3-68d4,U+68d6-68d7,U+68d9,U+68db-68df,U+68e1-68e2,U+68e4-68ed,U+68ef,U+68f2-68f4,U+68f6-68f8,U+68fb,U+68fd-6900,U+6902-6904,U+6906-690a,U+690c,U+690f,U+6911,U+6913-691e,U+6921-6923,U+6925-692c,U+692e-692f,U+6931-6933,U+6935-6938,U+693a-693c,U+693e,U+6940-6941,U+6943-6953,U+6955-6956,U+6958-6959,U+695b-695c,U+695f,U+6961-6962,U+6964-6965"}},{uri:ame,descriptors:{unicodeRange:"U+66b8,U+66ba-66bd,U+66bf-66d8,U+66da,U+66de-66e5,U+66e7-66e8,U+66ea-66ef,U+66f1,U+66f5-66f6,U+66f8,U+66fa-66fb,U+66fd,U+6701-6707,U+670c,U+670e-670f,U+6711-6713,U+6716,U+6718-671a,U+671c,U+671e,U+6720-6725,U+6727,U+6729,U+672e,U+6730,U+6732-6733,U+6736-6739,U+673b-673c,U+673e-673f,U+6741,U+6744-6745,U+6747,U+674a-674b,U+674d,U+6752,U+6754-6755,U+6757-675b,U+675d,U+6762-6764,U+6766-6767,U+676b-676c,U+676e,U+6771,U+6774,U+6776,U+6778-677b,U+677d,U+6780,U+6782-6783,U+6785-6786,U+6788,U+678a,U+678c-678f,U+6791-6794,U+6796,U+6799,U+679b,U+679f-67a1,U+67a4,U+67a6,U+67a9,U+67ac,U+67ae,U+67b1-67b2,U+67b4,U+67b9-67c0,U+67c2,U+67c5-67ce,U+67d5-67d7,U+67db,U+67df,U+67e1,U+67e3-67e4,U+67e6-67e8,U+67ea-67eb,U+67ed-67ee,U+67f2,U+67f5-67fc,U+67fe,U+6801-6804,U+6806,U+680d,U+6810,U+6812,U+6814-6815,U+6818-681c,U+681e-6820,U+6822-6828,U+682b-682f"}},{uri:lme,descriptors:{unicodeRange:"U+6569-656a,U+656d-656f,U+6571,U+6573,U+6575-6576,U+6578-6586,U+6588-658a,U+658d-658f,U+6592,U+6594-6596,U+6598,U+659a,U+659d-659e,U+65a0,U+65a2-65a3,U+65a6,U+65a8,U+65aa,U+65ac,U+65ae,U+65b1-65b8,U+65ba-65bb,U+65be-65c0,U+65c2,U+65c7-65ca,U+65cd,U+65d0-65d1,U+65d3-65d5,U+65d8-65df,U+65e1,U+65e3-65e4,U+65ea-65eb,U+65f2-65f5,U+65f8-65f9,U+65fb-65ff,U+6601,U+6604-6605,U+6607-6609,U+660b,U+660d,U+6610-6612,U+6616-6618,U+661a-661c,U+661e,U+6621-6624,U+6626,U+6629-662c,U+662e,U+6630,U+6632-6633,U+6637-663b,U+663d,U+663f-6640,U+6642,U+6644-664a,U+664d-664e,U+6650-6651,U+6658-6659,U+665b-665e,U+6660,U+6662-6663,U+6665,U+6667,U+6669-666d,U+6671-6673,U+6675,U+6678-6679,U+667b-667d,U+667f-6681,U+6683,U+6685-6686,U+6688-668b,U+668d-6690,U+6692-6695,U+6698-669c,U+669e-66a6,U+66a9-66ad,U+66af-66b3,U+66b5-66b7"}},{uri:cme,descriptors:{unicodeRange:"U+5f30,U+5f32-5f38,U+5f3b,U+5f3d-5f3f,U+5f41-5f4f,U+5f51,U+5f54,U+5f59-5f5c,U+5f5e-5f60,U+5f63,U+5f65,U+5f67-5f68,U+5f6b,U+5f6e-5f6f,U+5f72,U+5f74-5f76,U+5f78,U+5f7a,U+5f7d-5f7f,U+5f83,U+5f86,U+5f8d-5f8f,U+5f91,U+5f93-5f94,U+5f96,U+5f9a-5f9b,U+5f9d-5fa0,U+5fa2-5fa7,U+5fa9,U+5fab-5fac,U+5faf-5fb4,U+5fb6,U+5fb8-5fbb,U+5fbe-5fc2,U+5fc7-5fc8,U+5fca-5fcb,U+5fce,U+5fd3-5fd5,U+5fda-5fdc,U+5fde-5fdf,U+5fe2-5fe3,U+5fe5-5fe6,U+5fe8-5fe9,U+5fec,U+5fef-5ff0,U+5ff2-5ff4,U+5ff6-5ff7,U+5ff9-5ffa,U+5ffc,U+6007-6009,U+600b-600c,U+6010-6011,U+6013,U+6017-6018,U+601a,U+601e-601f,U+6022-6024,U+602c-602e,U+6030-6034,U+6036-603a,U+603d-603e,U+6040,U+6044-604a,U+604c,U+604e-604f,U+6051,U+6053-6054,U+6056-6058,U+605b-605c,U+605e-6061,U+6065-6066,U+606e,U+6071-6072,U+6074-6075,U+6077,U+607e,U+6080-6082,U+6085-6088,U+608a-608b,U+608e-6091,U+6093,U+6095,U+6097-6099,U+609c,U+609e,U+60a1-60a2,U+60a4-60a5,U+60a7,U+60a9-60aa,U+60ae,U+60b0,U+60b3,U+60b5-60b7,U+60b9-60ba,U+60bd-60c4,U+60c7-60c9,U+60cc"}},{uri:ume,descriptors:{unicodeRange:"U+635a-635d,U+6360,U+6364-6366,U+6368,U+636a-636c,U+636f-6370,U+6372-6375,U+6378-6379,U+637c-637f,U+6381,U+6383-6386,U+638b,U+638d,U+6391,U+6393-6395,U+6397,U+6399-639f,U+63a1,U+63a4,U+63a6,U+63ab,U+63af,U+63b1-63b2,U+63b5-63b6,U+63b9,U+63bb,U+63bd,U+63bf-63c3,U+63c5,U+63c7-63c8,U+63ca-63cc,U+63d1,U+63d3-63d5,U+63d7-63dd,U+63df,U+63e2,U+63e4-63e8,U+63eb-63ec,U+63ee-63f1,U+63f3,U+63f5,U+63f7,U+63f9-63fc,U+63fe,U+6403-6404,U+6406-640a,U+640d-640e,U+6411-6412,U+6415-641a,U+641d,U+641f,U+6422-6425,U+6427-6429,U+642b,U+642e-6433,U+6435-6439,U+643b-643c,U+643e,U+6440,U+6442-6443,U+6449,U+644b-6451,U+6453,U+6455-6457,U+6459-645d,U+645f-6466,U+6468,U+646a-646c,U+646e-6477,U+647b-6481,U+6483,U+6486,U+6488-648f"}},{uri:dme,descriptors:{unicodeRange:"U+61c5-61c7,U+61c9,U+61cc-61d0,U+61d3,U+61d5-61e5,U+61e7-61f4,U+61f6-61fe,U+6200-6205,U+6207,U+6209,U+6213-6214,U+6219,U+621c-621e,U+6220,U+6223,U+6226-6229,U+622b,U+622d,U+622f-6232,U+6235-6236,U+6238-623c,U+6242,U+6244-6246,U+624a,U+624f-6250,U+6255-6257,U+6259-625a,U+625c-6262,U+6264-6265,U+6268,U+6271-6272,U+6274-6275,U+6277-6278,U+627a-627b,U+627d,U+6281-6283,U+6285-6288,U+628b-6290,U+6294,U+6299,U+629c-629e,U+62a3,U+62a6-62a7,U+62a9-62aa,U+62ad-62b0,U+62b2-62b4,U+62b6-62b8,U+62ba,U+62be,U+62c0-62c1,U+62c3,U+62cb,U+62cf,U+62d1,U+62d5,U+62dd-62de,U+62e0-62e1,U+62e4,U+62ea-62eb,U+62f0,U+62f2,U+62f5,U+62f8-62fb,U+6300,U+6303-6306,U+630a-630d,U+630f-6310,U+6312-6315,U+6317-6319,U+631c,U+6326-6327,U+6329,U+632c-632e,U+6330-6331,U+6333-6338,U+633b-633c,U+633e-6341,U+6344,U+6347-6348,U+634a,U+6351-6354,U+6356-6359"}},{uri:fme,descriptors:{unicodeRange:"U+5dd0-5dda,U+5ddc,U+5ddf-5de0,U+5de3-5de4,U+5dea,U+5dec-5ded,U+5df0,U+5df5-5df6,U+5df8-5dfc,U+5dff-5e00,U+5e04,U+5e07,U+5e09-5e0b,U+5e0d-5e0e,U+5e12-5e13,U+5e17,U+5e1e-5e25,U+5e28-5e2c,U+5e2f-5e30,U+5e32-5e36,U+5e39-5e3a,U+5e3e-5e41,U+5e43,U+5e46-5e4b,U+5e4d-5e53,U+5e56-5e5a,U+5e5c-5e5d,U+5e5f-5e60,U+5e63-5e71,U+5e75,U+5e77,U+5e79,U+5e7e,U+5e81-5e83,U+5e85,U+5e88-5e89,U+5e8c-5e8e,U+5e92,U+5e98,U+5e9b,U+5e9d,U+5ea1-5ea4,U+5ea8-5eac,U+5eae-5eb2,U+5eb4,U+5eba-5ebd,U+5ebf-5ec8,U+5ecb-5ed0,U+5ed4-5ed5,U+5ed7-5eda,U+5edc-5ee7,U+5ee9,U+5eeb-5ef3,U+5ef5,U+5ef8-5ef9,U+5efb-5efd,U+5f05-5f07,U+5f09,U+5f0c-5f0e,U+5f10,U+5f12,U+5f14,U+5f16,U+5f19-5f1a,U+5f1c-5f1e,U+5f21-5f24,U+5f28,U+5f2b-5f2c,U+5f2e"}},{uri:hme,descriptors:{unicodeRange:"U+60cd-60d0,U+60d2-60d4,U+60d6-60d7,U+60d9,U+60db,U+60de,U+60e1-60e5,U+60ea,U+60f1-60f2,U+60f5,U+60f7-60f8,U+60fb-60ff,U+6102-6105,U+6107,U+610a-610c,U+6110-6114,U+6116-6119,U+611b-611e,U+6121-6122,U+6125,U+6128-612a,U+612c-613e,U+6140-6147,U+6149,U+614b,U+614d,U+614f-6150,U+6152-6154,U+6156-615c,U+615e-6161,U+6163-6166,U+6169-616f,U+6171-6174,U+6176,U+6178-618a,U+618c-618d,U+618f-6193,U+6195-619c,U+619e-61a6,U+61aa-61ab,U+61ad-61b6,U+61b8-61bd,U+61bf-61c1,U+61c3-61c4"}},{uri:gme,descriptors:{unicodeRange:"U+5cf4-5cfa,U+5cfc-5d01,U+5d04-5d05,U+5d08-5d0d,U+5d0f-5d13,U+5d15,U+5d17-5d1a,U+5d1c-5d1d,U+5d1f-5d23,U+5d25,U+5d28,U+5d2a-5d2c,U+5d2f-5d33,U+5d35-5d3c,U+5d3f-5d46,U+5d48-5d49,U+5d4d-5d57,U+5d59-5d5a,U+5d5c,U+5d5e-5d68,U+5d6a,U+5d6d-5d6e,U+5d70-5d73,U+5d75-5d81,U+5d83-5d98,U+5d9a-5d9c,U+5d9e-5db6,U+5db8-5dc4,U+5dc6-5dcc,U+5dce-5dcf"}},{uri:mme,descriptors:{unicodeRange:"U+5b52,U+5b56,U+5b5e,U+5b60-5b61,U+5b67-5b68,U+5b6b,U+5b6d-5b6f,U+5b72,U+5b74,U+5b76-5b79,U+5b7b-5b7c,U+5b7e-5b7f,U+5b82,U+5b86,U+5b8a,U+5b8d-5b8e,U+5b90-5b92,U+5b94,U+5b96,U+5b9f,U+5ba7-5ba9,U+5bac-5baf,U+5bb1-5bb2,U+5bb7,U+5bba-5bbc,U+5bc0-5bc1,U+5bc3,U+5bc8-5bcb,U+5bcd-5bcf,U+5bd1,U+5bd4-5bdc,U+5be0,U+5be2-5be3,U+5be6-5be7,U+5be9-5bed,U+5bef,U+5bf1-5bf7,U+5bfd-5bfe,U+5c00,U+5c02-5c03,U+5c05,U+5c07-5c08,U+5c0b-5c0e,U+5c10,U+5c12-5c13,U+5c17,U+5c19,U+5c1b,U+5c1e-5c21,U+5c23,U+5c26,U+5c28-5c2b,U+5c2d-5c30,U+5c32-5c33,U+5c35-5c37,U+5c43-5c44,U+5c46-5c47,U+5c4c-5c4d,U+5c52-5c54,U+5c56-5c58,U+5c5a-5c5d,U+5c5f,U+5c62,U+5c64,U+5c67-5c6d,U+5c70,U+5c72-5c78,U+5c7b-5c7e,U+5c80,U+5c83-5c87,U+5c89-5c8b,U+5c8e-5c8f,U+5c92-5c93,U+5c95,U+5c9d-5ca1,U+5ca4-5ca8,U+5caa,U+5cae-5cb0,U+5cb2,U+5cb4,U+5cb6,U+5cb9-5cbc,U+5cbe,U+5cc0,U+5cc2-5cc3,U+5cc5-5cca,U+5ccc-5cd1,U+5cd3-5cd8,U+5cda-5ce0,U+5ce2-5ce3,U+5ce7,U+5ce9,U+5ceb-5cec,U+5cee-5cef,U+5cf1-5cf3"}},{uri:pme,descriptors:{unicodeRange:"U+593b,U+593d-5940,U+5943,U+5945-5946,U+594a,U+594c-594d,U+5950,U+5952-5953,U+5959,U+595b-595f,U+5961,U+5963-5964,U+5966-5972,U+5975,U+5977,U+597a-597c,U+597e-5980,U+5985,U+5989,U+598b-598c,U+598e-5991,U+5994-5995,U+5998,U+599a-599d,U+599f-59a2,U+59a6-59a7,U+59ac-59ad,U+59b0-59b1,U+59b3-59b8,U+59ba,U+59bc-59bd,U+59bf-59c5,U+59c7-59c9,U+59cc-59cf,U+59d5-59d6,U+59d9,U+59db,U+59de-59e2,U+59e4,U+59e6-59e7,U+59e9-59eb,U+59ed-59f8,U+59fa,U+59fc-59fe,U+5a00,U+5a02,U+5a0a-5a0b,U+5a0d-5a10,U+5a12,U+5a14-5a17,U+5a19-5a1b,U+5a1d-5a1e,U+5a21-5a22,U+5a24,U+5a26-5a28,U+5a2a-5a30,U+5a33,U+5a35,U+5a37-5a3b,U+5a3d-5a3f,U+5a41-5a45,U+5a47-5a48,U+5a4b-5a54,U+5a56-5a59,U+5a5b-5a61,U+5a63-5a66,U+5a68-5a69,U+5a6b-5a73,U+5a78-5a79,U+5a7b-5a7e,U+5a80-5a90"}},{uri:Ume,descriptors:{unicodeRange:"U+5a91,U+5a93-5a99,U+5a9c-5aa9,U+5aab-5ab1,U+5ab4,U+5ab6-5ab7,U+5ab9-5abd,U+5abf-5ac0,U+5ac3-5ac8,U+5aca-5acb,U+5acd-5ad1,U+5ad3,U+5ad5,U+5ad7,U+5ad9-5adb,U+5add-5adf,U+5ae2,U+5ae4-5ae5,U+5ae7-5ae8,U+5aea,U+5aec-5af0,U+5af2-5b08,U+5b0a-5b15,U+5b18-5b31,U+5b33,U+5b35-5b36,U+5b38-5b3f,U+5b41-5b4f"}},{uri:bme,descriptors:{unicodeRange:"U+5843,U+5845-584b,U+584e-5850,U+5852-5853,U+5855-5857,U+5859-585d,U+585f-5864,U+5866-586a,U+586d-587d,U+587f,U+5882,U+5884,U+5886-5888,U+588a-5891,U+5894-5898,U+589b-589d,U+58a0-58a7,U+58aa-58bb,U+58bd-58c0,U+58c2-58c4,U+58c6-58d0,U+58d2-58d4,U+58d6-58e3,U+58e5-58ea,U+58ed,U+58ef,U+58f1-58f2,U+58f4-58f5,U+58f7-58f8,U+58fa-5901,U+5903,U+5905-5906,U+5908-590c,U+590e,U+5910-5913,U+5917-5918,U+591b,U+591d-591e,U+5920-5923,U+5926,U+5928,U+592c,U+5930,U+5932-5933,U+5935-5936"}},{uri:yme,descriptors:{unicodeRange:"U+56d0-56d3,U+56d5-56d6,U+56d8-56d9,U+56dc,U+56e3,U+56e5-56ea,U+56ec,U+56ee-56ef,U+56f2-56f3,U+56f6-56f8,U+56fb-56fc,U+5700-5702,U+5705,U+5707,U+570b-571b,U+571d-571e,U+5720-5722,U+5724-5727,U+572b,U+5731-5732,U+5734-5738,U+573c-573d,U+573f,U+5741,U+5743-5746,U+5748-5749,U+574b,U+5752-5756,U+5758-5759,U+5762-5763,U+5765,U+5767,U+576c,U+576e,U+5770-5772,U+5774-5775,U+5778-577a,U+577d-5781,U+5787-578a,U+578d-5791,U+5794-579a,U+579c-579f,U+57a5,U+57a8,U+57aa,U+57ac,U+57af-57b1,U+57b3,U+57b5-57b7,U+57b9-57c1,U+57c4-57ca,U+57cc-57cd,U+57d0-57d1,U+57d3,U+57d6-57d7,U+57db-57dc,U+57de,U+57e1-57e3,U+57e5-57ec,U+57ee,U+57f0-57f3,U+57f5-57f7,U+57fb-57fc,U+57fe-57ff,U+5801,U+5803-5805,U+5808-580a,U+580c,U+580e-5810,U+5812-5814,U+5816-5818,U+581a-581d,U+581f,U+5822-5823,U+5825-5829,U+582b-582f,U+5831-5834,U+5836-5842"}},{uri:Eme,descriptors:{unicodeRange:"U+55f9-55fc,U+55ff,U+5602-5607,U+560a-560b,U+560d,U+5610-5617,U+5619-561a,U+561c-561d,U+5620-5622,U+5625-5626,U+5628-562b,U+562e-5630,U+5633,U+5635,U+5637-5638,U+563a,U+563c-563e,U+5640-564b,U+564f-5653,U+5655-5656,U+565a-565b,U+565d-5661,U+5663,U+5665-5667,U+566d-5670,U+5672-5675,U+5677-567a,U+567d-5684,U+5687-568d,U+5690-5692,U+5694-56a2,U+56a4-56ae,U+56b0-56b6,U+56b8-56bb,U+56bd-56c9,U+56cb-56cf"}},{uri:vme,descriptors:{unicodeRange:"U+5286-5287,U+5289-528f,U+5291-5292,U+5294-529a,U+529c,U+52a4-52a7,U+52ae-52b0,U+52b4-52bd,U+52c0-52c2,U+52c4-52c6,U+52c8,U+52ca,U+52cc-52cf,U+52d1,U+52d3-52d5,U+52d7,U+52d9-52de,U+52e0-52e3,U+52e5-52ef,U+52f1-52f8,U+52fb-52fd,U+5301-5304,U+5307,U+5309-530c,U+530e,U+5311-5314,U+5318,U+531b-531c,U+531e-531f,U+5322,U+5324-5325,U+5327-5329,U+532b-532d,U+532f-5338,U+533c-533d,U+5340,U+5342,U+5344,U+5346,U+534b-534d,U+5350,U+5354,U+5358-5359,U+535b,U+535d,U+5365,U+5368,U+536a,U+536c-536d,U+5372,U+5376,U+5379,U+537b-537e,U+5380-5381,U+5383,U+5387-5388,U+538a,U+538e-5394,U+5396-5397,U+5399,U+539b-539c,U+539e,U+53a0-53a1,U+53a4,U+53a7,U+53aa-53ad,U+53af-53b5,U+53b7-53ba,U+53bc-53be,U+53c0,U+53c3-53c7,U+53ce-53d0,U+53d2-53d3,U+53d5,U+53da,U+53dc-53de,U+53e1-53e2,U+53e7,U+53f4,U+53fa,U+53fe-5400,U+5402,U+5405,U+5407,U+540b,U+5414,U+5418-541a,U+541c,U+5422,U+5424-5425,U+542a,U+5430,U+5433,U+5436-5437,U+543a"}},{uri:wme,descriptors:{unicodeRange:"U+5101-5105,U+5108-510a,U+510c-5111,U+5113-5120,U+5122-513e,U+5142,U+5147,U+514a,U+514c,U+514e-5150,U+5152-5153,U+5157-5159,U+515b,U+515d-5161,U+5163-5164,U+5166-5167,U+5169-516a,U+516f,U+5172,U+517a,U+517e-517f,U+5183-5184,U+5186-5187,U+518a-518b,U+518e-5191,U+5193-5194,U+5198,U+519a,U+519d-519f,U+51a1,U+51a3,U+51a6-51aa,U+51ad-51ae,U+51b4,U+51b8-51ba,U+51be-51bf,U+51c1-51c3,U+51c5,U+51c8,U+51ca,U+51cd-51ce,U+51d0,U+51d2-51da,U+51dc,U+51de-51df,U+51e2-51e3,U+51e5-51ea,U+51ec,U+51ee,U+51f1-51f2,U+51f4,U+51f7,U+51fe,U+5204-5205,U+5209,U+520b-520c,U+520f-5210,U+5213-5215,U+521c,U+521e-521f,U+5221-5223,U+5225-5227,U+522a,U+522c,U+522f,U+5231-5232,U+5234-5235,U+523c,U+523e,U+5244-5249,U+524b,U+524e-524f,U+5252-5253,U+5255,U+5257-525b,U+525d,U+525f-5260,U+5262-5264,U+5266,U+5268,U+526b-526e,U+5270-5271,U+5273-527c,U+527e,U+5280,U+5283-5285"}},{uri:_me,descriptors:{unicodeRange:"U+543d,U+543f,U+5441-5442,U+5444-5445,U+5447,U+5449,U+544c-544f,U+5451,U+545a,U+545d-5461,U+5463,U+5465,U+5467,U+5469-5470,U+5474,U+5479-547a,U+547e-547f,U+5481,U+5483,U+5485,U+5487-548a,U+548d,U+5491,U+5493,U+5497-5498,U+549c,U+549e-54a2,U+54a5,U+54ae,U+54b0,U+54b2,U+54b5-54b7,U+54b9-54ba,U+54bc,U+54be,U+54c3,U+54c5,U+54ca-54cb,U+54d6,U+54d8,U+54db,U+54e0-54e4,U+54eb-54ec,U+54ef-54f1,U+54f4-54f9,U+54fb,U+54fe,U+5500,U+5502-5505,U+5508,U+550a-550e,U+5512-5513,U+5515-551a,U+551c-551f,U+5521,U+5525-5526,U+5528-5529,U+552b,U+552d,U+5532,U+5534-5536,U+5538-553b,U+553d,U+5540,U+5542,U+5545,U+5547-5548,U+554b-554f,U+5551-5554,U+5557-555b,U+555d-5560,U+5562-5563,U+5568-5569,U+556b,U+556f-5574,U+5579-557a,U+557d,U+557f,U+5585-5586,U+558c-558e,U+5590,U+5592-5593,U+5595-5597,U+559a-559b,U+559e,U+55a0-55a6,U+55a8-55b0,U+55b2,U+55b4,U+55b6,U+55b8,U+55ba,U+55bc,U+55bf-55c3,U+55c6-55c8,U+55ca-55cb,U+55ce-55d0,U+55d5,U+55d7-55db,U+55de,U+55e0,U+55e2,U+55e7,U+55e9,U+55ed-55ee,U+55f0-55f1,U+55f4,U+55f6,U+55f8"}},{uri:Tme,descriptors:{unicodeRange:"U+4fe0,U+4fe2,U+4fe4-4fe5,U+4fe7,U+4feb-4fec,U+4ff0,U+4ff2,U+4ff4-4ff7,U+4ff9,U+4ffb-4ffd,U+4fff-500b,U+500e,U+5010-5011,U+5013,U+5015-5017,U+501b,U+501d-501e,U+5020,U+5022-5024,U+5027,U+502b,U+502f-5039,U+503b,U+503d,U+503f-5042,U+5044-5046,U+5049-504b,U+504d,U+5050-5054,U+5056-5059,U+505b,U+505d-5064,U+5066-506b,U+506d-5075,U+5078-507a,U+507c-507d,U+5081-5084,U+5086-5087,U+5089-508c,U+508e-50a2,U+50a4,U+50a6,U+50aa-50ab,U+50ad-50b1,U+50b3-50b9,U+50bc-50ce,U+50d0-50d5,U+50d7-50d9,U+50db-50e5,U+50e8-50eb,U+50ef-50f2,U+50f4,U+50f6-50fa,U+50fc-5100"}},{uri:m0e,descriptors:{unicodeRange:"U+49d5-4a77"}},{uri:Sme,descriptors:{unicodeRange:"U+4dac-4dad,U+4daf-4db5,U+4e02,U+4e04-4e06,U+4e0f,U+4e12,U+4e17,U+4e1f-4e21,U+4e23,U+4e26,U+4e29,U+4e2e-4e2f,U+4e31,U+4e33,U+4e35,U+4e37,U+4e3c,U+4e40-4e42,U+4e44,U+4e46,U+4e4a,U+4e51,U+4e55,U+4e57,U+4e5a-4e5b,U+4e62-4e65,U+4e67-4e68,U+4e6a-4e6f,U+4e72,U+4e74-4e7d,U+4e7f-4e85,U+4e87,U+4e8a,U+4e90,U+4e96-4e97,U+4e99,U+4e9c-4e9e,U+4ea3,U+4eaa,U+4eaf-4eb1,U+4eb4,U+4eb6-4eb9,U+4ebc-4ebe,U+4ec8,U+4ecc,U+4ecf-4ed0,U+4ed2,U+4eda-4edc,U+4ee0,U+4ee2,U+4ee6-4ee7,U+4ee9,U+4eed-4eef,U+4ef1,U+4ef4,U+4ef8-4efa,U+4efc,U+4efe,U+4f00,U+4f02-4f08,U+4f0b-4f0c,U+4f12-4f16,U+4f1c-4f1d,U+4f21,U+4f23,U+4f28-4f29,U+4f2c-4f2e,U+4f31,U+4f33,U+4f35,U+4f37,U+4f39,U+4f3b,U+4f3e-4f42,U+4f44-4f45,U+4f47-4f4c,U+4f52,U+4f54,U+4f56,U+4f61-4f62,U+4f66,U+4f68,U+4f6a-4f6b,U+4f6d-4f6e,U+4f71-4f72,U+4f75,U+4f77-4f7a,U+4f7d,U+4f80-4f82,U+4f85-4f87,U+4f8a,U+4f8c,U+4f8e,U+4f90,U+4f92-4f93,U+4f95-4f96,U+4f98-4f9a,U+4f9c,U+4f9e-4f9f,U+4fa1-4fa2,U+4fa4,U+4fab,U+4fad,U+4fb0-4fb4,U+4fb6-4fbe,U+4fc0-4fc2,U+4fc6-4fc9,U+4fcb-4fcd,U+4fd2-4fd6,U+4fd9,U+4fdb"}},{uri:Ime,descriptors:{unicodeRange:"U+4933-49d4"}},{uri:xme,descriptors:{unicodeRange:"U+487a-4932"}},{uri:Cme,descriptors:{unicodeRange:"U+47d2-4879,U+2ce7c,U+2ce88,U+2ce93"}},{uri:Ame,descriptors:{unicodeRange:"U+4756-47d1,U+2ca02,U+2ca0e,U+2ca7d,U+2caa9,U+2cb29,U+2cb2e,U+2cb31,U+2cb38-2cb39,U+2cb3f,U+2cb41,U+2cb4e,U+2cb5a,U+2cb64,U+2cb69,U+2cb6c,U+2cb6f,U+2cb76,U+2cb78,U+2cb7c,U+2cbb1,U+2cbbf-2cbc0,U+2cbce,U+2cc5f,U+2ccf5-2ccf6,U+2ccfd,U+2ccff,U+2cd02-2cd03,U+2cd0a,U+2cd8b,U+2cd8d,U+2cd8f-2cd90,U+2cd9f-2cda0,U+2cda8,U+2cdad-2cdae,U+2cdd5,U+2ce18,U+2ce1a,U+2ce23,U+2ce26,U+2ce2a"}},{uri:Mme,descriptors:{unicodeRange:"U+46c3-4755,U+2c488,U+2c494,U+2c497,U+2c542,U+2c613,U+2c618,U+2c621,U+2c629,U+2c62b-2c62d,U+2c62f,U+2c642,U+2c64a-2c64b,U+2c72c,U+2c72f,U+2c79f,U+2c7c1,U+2c7fd,U+2c8d9,U+2c8de,U+2c8e1,U+2c8f3,U+2c907,U+2c90a,U+2c91d"}},{uri:Rme,descriptors:{unicodeRange:"U+4629-46c2,U+2bdf7,U+2be29,U+2c029-2c02a,U+2c0a9,U+2c0ca,U+2c1d5,U+2c1d9,U+2c1f9,U+2c27c,U+2c288,U+2c2a4,U+2c317,U+2c35b,U+2c361,U+2c364"}},{uri:kme,descriptors:{unicodeRange:"U+458e-4628,U+2b7a9,U+2b7c5,U+2b7e6,U+2b7f9,U+2b806,U+2b80a,U+2b81c,U+2b8b8,U+2bac7,U+2bb5f,U+2bb62,U+2bb7c,U+2bb83,U+2bc1b,U+2bd77,U+2bd87"}},{uri:Dme,descriptors:{unicodeRange:"U+4449-4511,U+2afa2,U+2b127-2b128,U+2b137-2b138,U+2b1ed"}},{uri:Lme,descriptors:{unicodeRange:"U+439b-4448,U+2a437,U+2a5f1,U+2a602,U+2a61a,U+2a6b2,U+2a7dd,U+2a8fb,U+2a917,U+2aa30,U+2aa36,U+2aa58"}},{uri:Nme,descriptors:{unicodeRange:"U+4275-430d,U+298c6,U+29a72,U+29d98,U+29ddb,U+29e15,U+29e3d,U+29e49"}},{uri:Ome,descriptors:{unicodeRange:"U+4132-41de,U+28bef,U+28c47,U+28c4f,U+28c51,U+28c54,U+28d10,U+28d71,U+28dfb,U+28e1f,U+28e36,U+28e89,U+28e99,U+28eeb,U+28f32,U+28ff8,U+292a0"}},{uri:Pme,descriptors:{unicodeRange:"U+41df-4274,U+292b1,U+29490,U+295cf,U+2967f,U+296f0,U+29719,U+29750"}},{uri:Fme,descriptors:{unicodeRange:"U+408e-4131,U+285c8-285c9,U+28678,U+28695,U+286d7,U+286fa,U+287e0,U+28946,U+28949,U+2896b,U+28987-28988,U+289ba-289bb,U+28a1e,U+28a29,U+28a43,U+28a71,U+28a99,U+28acd,U+28add,U+28ae4,U+28b49,U+28bc1"}},{uri:Bme,descriptors:{unicodeRange:"U+3e83-3f2f,U+27139,U+273da-273db,U+273fe,U+27410,U+27449,U+27614-27615,U+27631,U+27684,U+27693,U+2770e,U+27723,U+27752"}},{uri:zme,descriptors:{unicodeRange:"U+3f30-3fdb,U+27985,U+27a84,U+27bb3,U+27bbe,U+27bc7,U+27cb8,U+27da0,U+27e10"}},{uri:Hme,descriptors:{unicodeRange:"U+3fdc-408d,U+27fb7,U+27ff9,U+2808a,U+280bb,U+2815d,U+28277,U+28282,U+282e2,U+282f3,U+283cd,U+28408,U+2840c,U+28455,U+28468,U+2856b"}},{uri:Vme,descriptors:{unicodeRange:"U+3dd2-3e82,U+26a58,U+26a8c,U+26ab7,U+26aff,U+26b5c,U+26c21,U+26c29,U+26c73,U+26cdd,U+26e40,U+26e65,U+26f94,U+26ff6-26ff8,U+270f4,U+2710d"}},{uri:$me,descriptors:{unicodeRange:"U+3d34-3dd1,U+2648d,U+26676,U+2667e,U+266b0,U+2671d,U+2677c,U+267cc,U+268dd,U+268ea,U+26951,U+2696f,U+269dd,U+269fa,U+26a1e"}},{uri:Gme,descriptors:{unicodeRange:"U+3c76-3d33,U+25d0a,U+25da1,U+25e2e,U+25e56,U+25e62,U+25e65,U+25ec2,U+25ed7-25ed8,U+25ee8,U+25f23,U+25f5c,U+25fd4,U+25fe0,U+25ffb,U+2600c,U+26017,U+26060,U+260ed,U+26221,U+26270,U+26286,U+2634c,U+26402"}},{uri:Xme,descriptors:{unicodeRange:"U+3bda-3c75,U+25771,U+257a9,U+257b4,U+259c4,U+259d4,U+25ae3-25ae4,U+25af1,U+25bb2,U+25c14,U+25c4b,U+25c64"}},{uri:jme,descriptors:{unicodeRange:"U+3b25-3bd9,U+2504a,U+25055,U+25122,U+2512b,U+251a9,U+251cd,U+251e5,U+2521e,U+2524c,U+2542e,U+2548e,U+254d9,U+2550e,U+25532,U+25562,U+255a7-255a8"}},{uri:Yme,descriptors:{unicodeRange:"U+3a6b-3b24,U+24896,U+249db,U+24a4d,U+24a7d,U+24ac9,U+24b56,U+24b6f,U+24c16,U+24d14,U+24dea,U+24e0e,U+24e37,U+24e6a,U+24e8b,U+24eaa"}},{uri:Wme,descriptors:{unicodeRange:"U+39a9-3a6a,U+24096,U+24103,U+241ac,U+241c6,U+241fe,U+243bc,U+243f8,U+244d3,U+24629,U+246a5,U+247f1"}},{uri:Kme,descriptors:{unicodeRange:"U+38e3-39a8,U+23a98,U+23c7f,U+23c97-23c98,U+23cfe,U+23d00,U+23d0e,U+23d40,U+23dd3,U+23df9-23dfa,U+23e23,U+23f7e"}},{uri:Zme,descriptors:{unicodeRange:"U+3760-382a,U+22ab8,U+22b43,U+22b46,U+22b4f-22b50,U+22ba6,U+22bca,U+22c1d,U+22c24,U+22c55,U+22d4c,U+22de1"}},{uri:qme,descriptors:{unicodeRange:"U+382b-38e2,U+231b6,U+231c3-231c4,U+231f5,U+23350,U+23372,U+233d0,U+233d2-233d3,U+233d5,U+233da,U+233df,U+233e4,U+2344a-2344b,U+23451,U+23465,U+234e4,U+2355a,U+23594,U+235c4,U+235cb,U+23638-2363a,U+23647,U+2370c,U+2371c,U+2373f,U+23763-23764,U+237e7,U+237ff,U+23824,U+2383d"}},{uri:Qme,descriptors:{unicodeRange:"U+3698-375f,U+22218,U+2231e,U+223ad,U+224dc,U+226f3,U+2285b,U+228ab,U+2298f"}},{uri:Jme,descriptors:{unicodeRange:"U+35e6-3697,U+21c56,U+21cde,U+21d2d,U+21d45,U+21d62,U+21d78,U+21d92,U+21d9c,U+21da1,U+21db7,U+21de0,U+21e33-21e34,U+21f1e,U+21f76,U+21ffa,U+2217b"}},{uri:epe,descriptors:{unicodeRange:"U+3444-350e,U+20ad3,U+20b1d,U+20b9f,U+20c41,U+20cbf,U+20cd0,U+20d45,U+20de1,U+20e64,U+20e6d,U+20e95,U+20e9d,U+20ea2,U+20f5f,U+210c1,U+21201,U+2123d,U+21255,U+21274,U+2127b"}},{uri:tpe,descriptors:{unicodeRange:"U+350f-35e5,U+212d7,U+212e4,U+212fd,U+2131b,U+21336,U+21344,U+2139a,U+213c4,U+21413,U+2146d-2146e,U+215d7,U+21647,U+216b4,U+21706,U+21742,U+218bd,U+219c3"}},{uri:npe,descriptors:{unicodeRange:"U+336d-3443,U+2032b,U+20371,U+20381,U+203f9,U+2044a,U+20509,U+20547,U+205d6,U+20628,U+20676,U+2074f,U+20779,U+20807,U+2083a,U+20895,U+208b9,U+2097c,U+2099d"}},{uri:ipe,descriptors:{unicodeRange:"U+328b-336c,U+2000b,U+20089,U+200a2,U+200a4,U+20164,U+201a2,U+20213"}},{uri:spe,descriptors:{unicodeRange:"U+3192-31ba,U+31c0-31e3,U+31f0-321e,U+3220-328a,U+1f250-1f251"}},{uri:rpe,descriptors:{unicodeRange:"U+2f74-2fd5,U+3000,U+3003-3007,U+3012-3013,U+3018-301c,U+3020-3029,U+302f-303f,U+3041-3096,U+3099-30a1"}},{uri:ope,descriptors:{unicodeRange:"U+30a2-30ff,U+3105-312f,U+3131-318e,U+3190-3191"}},{uri:ape,descriptors:{unicodeRange:"U+4e36,U+4ea0,U+4f74,U+4f91,U+4f94,U+4fc5,U+507e,U+50ed,U+5182,U+51f5,U+525e,U+5282,U+52f9,U+5326,U+537a,U+53a3,U+5423,U+5459,U+54b4,U+54d9,U+55c9,U+57f4,U+580b,U+5902,U+5925,U+5a08,U+5ab5,U+5b84,U+5be4,U+5c22,U+5cb5,U+5cbd,U+5d3e,U+5e31,U+5e5e,U+5e80,U+5ee8,U+5f82,U+5fc9,U+5fed,U+600a,U+605d,U+609b,U+609d,U+60dd,U+6243,U+6322,U+63ce,U+640c,U+643f,U+6445,U+64d7,U+6534,U+6549,U+656b,U+6603,U+674c,U+680a,U+6864,U+69d4,U+6a65,U+6c2a,U+6c46,U+6c5c,U+6d0e,U+6d48,U+6e2b,U+6eb2,U+6eb7,U+6f89,U+706c,U+70b1,U+7113,U+71d4,U+727f,U+72f3,U+7303,U+7321,U+736c,U+736f,U+74a9,U+74de,U+750d,U+7513,U+7592,U+75c4,U+7605,U+760a,U+761b,U+7625,U+762d,U+7643,U+7707,U+7747,U+77b5,U+7839,U+784e,U+78a5,U+7924,U+793b,U+798a,U+7a03,U+7a06,U+7a78,U+7a80,U+7aad,U+7ba8,U+7be5,U+7cc8,U+7ec1,U+7f0b,U+7f0f,U+7f12,U+7f68,U+7f9d,U+8025,U+809c,U+80ad,U+80b7,U+80e8,U+811e,U+8204,U+8223,U+822d,U+823b,U+824b,U+825a,U+827d,U+827f,U+828f,U+82c8,U+8307,U+831b,U+8347,U+837d,U+839b,U+83a9,U+83f9,U+84b9,U+8579,U+864d,U+867f,U+86b0,U+86d1,U+86d8,U+86f2,U+8764,U+8770,U+8788,U+8797,U+87ac-87ad,U+87b5,U+881b,U+8844,U+88bc,U+88fc,U+8930,U+89cf,U+89d6,U+8ba0,U+8bd4,U+8c02,U+8c2b,U+8c85,U+8e23,U+8f81-8f82,U+8fd5,U+90b6,U+90db,U+914e,U+9164,U+91ad,U+943e,U+94b7-94b8,U+94eb,U+950d,U+9514,U+9516,U+9518,U+9529,U+9538,U+953f,U+954e,U+955f,U+95fc,U+9667,U+96b3,U+9792,U+97b2,U+98a1,U+9969,U+9987,U+9998,U+9a80,U+9a92,U+9a96,U+9adf,U+9cb4,U+9cbd,U+9cd0,U+9cd4,U+9e31,U+9e3a,U+9e71,U+9ee5,U+9eea,U+9ef9,U+9fa0"}},{uri:lpe,descriptors:{unicodeRange:"U+4e0c,U+4e28,U+4e3f,U+4ec2,U+502e,U+50ba,U+5155,U+5181,U+522d,U+5281,U+5290,U+5369,U+53b6,U+54d5,U+54dc,U+54ff,U+552a,U+553c,U+5588,U+55b5,U+5686,U+570a,U+5776,U+5786,U+57a4,U+5820,U+5865,U+58bc,U+5b32,U+5b65,U+5c1c,U+5c66,U+5c6e,U+5c8d,U+5ddb,U+5f2a,U+5f50,U+5f61,U+6067,U+614a,U+615d,U+619d,U+61d4,U+620b,U+6224-6225,U+6343,U+63ad,U+63f2,U+640b,U+6420,U+6434,U+6496,U+64d0,U+6509,U+652e,U+67a8,U+6833,U+6844,U+684a,U+6920,U+6957,U+6971,U+6a8e,U+6a91,U+6aa0,U+6b43,U+6bea,U+6bf5,U+6c15,U+6cd0,U+6ee0,U+6f24,U+6f2d,U+70c0,U+721d,U+728b,U+72c3,U+72e8,U+730a,U+7338-7339,U+734d,U+746d,U+752f,U+754e,U+770d,U+7735,U+778d,U+77a2,U+77e7,U+7857,U+786d,U+78c9,U+78f2,U+791e,U+7953,U+7b58,U+7b9d,U+7bda,U+7cd7,U+7f32-7f33,U+8022,U+8028-8029,U+8035,U+804d,U+8080,U+80c2,U+80e9,U+80ec,U+80f2,U+810e,U+8221,U+8274,U+82b0,U+82e0,U+83b0,U+8487-8488,U+848e,U+84cd,U+84d0,U+8539,U+857a,U+85a8,U+85b7,U+867c,U+871e,U+8723,U+877e,U+878b,U+8793,U+8803,U+88d2,U+8966,U+89cc,U+89eb,U+8b26,U+8c8a,U+8c98,U+8d33,U+8d47,U+8d55,U+8dbc,U+8e40,U+8e94,U+8f77,U+8f79,U+9058,U+91a2,U+91b5,U+928e,U+9494,U+94b6,U+94de,U+94f4,U+94f9,U+950a,U+950e,U+951e,U+952b,U+953c,U+953e,U+9544,U+9561,U+9564,U+9569,U+95f6,U+9603,U+960d,U+963d,U+9674,U+9794,U+97ab,U+98a5,U+9a9f,U+9ab1,U+9ad1,U+9b0f,U+9b2f,U+9c92,U+9c95,U+9cba,U+9cbc,U+9cc6,U+9ccb,U+9cd8,U+9e32,U+9e38,U+9e5b,U+9e7e,U+9eb4,U+9efb-9efc,U+9f3d"}},{uri:cpe,descriptors:{unicodeRange:"U+2e3b,U+2e80-2e99,U+2e9b-2ef3,U+2f00-2f73,U+ffffd"}},{uri:upe,descriptors:{unicodeRange:"U+4e69,U+4f1b,U+4f67,U+4f7e,U+4fdc,U+50e6,U+5196,U+5202,U+5233,U+523f,U+52a2,U+536e,U+5476,U+54ad,U+54cf,U+5537,U+561e,U+56dd,U+56df,U+5709,U+572c,U+57cf,U+57f8,U+580d,U+5881,U+589a,U+5941,U+59b2,U+5c25,U+5d24,U+5d74,U+5e42,U+5e8b,U+5eb3,U+5ed2,U+5fad,U+6003,U+603c,U+6083,U+6100,U+6126,U+6206,U+62ca,U+638e,U+63b4,U+6426,U+646d,U+6535,U+65c4,U+66db,U+6715,U+6769,U+6798,U+67c3,U+6861,U+698d,U+69ca,U+69ed,U+69f2,U+69ff,U+6a18,U+6b39,U+6bb3,U+6c0d,U+6cb2,U+6cd6,U+6cf7,U+6cfa,U+6d33,U+6e16,U+6e53-6e54,U+6ebb,U+6fb6,U+709d,U+72ad,U+72f7,U+72fb,U+7313,U+739f,U+74ba,U+754b,U+755b,U+758b,U+75ac,U+75d6,U+7617,U+7635,U+7640,U+76a4,U+76b2,U+775a,U+77bd,U+781f,U+79b3,U+7b2b,U+7b31,U+7b3e,U+7b6e,U+7b9c,U+7c0b,U+7c9e,U+7cc1,U+7ce8,U+7ea5,U+7f21,U+7f27,U+7f74,U+7fb0,U+8031,U+8071,U+80ea,U+8114,U+8160,U+81a6,U+81c1,U+829f,U+82a4,U+82fb,U+831a,U+8333,U+836c,U+83b6,U+83f8,U+8411,U+841c,U+8489,U+848c,U+85a4,U+8627,U+8629,U+866e,U+86b5,U+872e,U+8731,U+877b,U+877d,U+87ea,U+8813,U+8816,U+8864,U+88ce,U+88e5,U+897b,U+89cb,U+89f3,U+8bfc,U+8c35,U+8d46,U+8d4d,U+8dba,U+8e3a,U+8f75,U+8f7e,U+8fd3,U+9161,U+9179,U+917e,U+91a3,U+94ac,U+94d7,U+94e5,U+952a,U+952c,U+9545,U+9565,U+9568,U+956a,U+961d,U+96e0,U+972a,U+9730,U+989f,U+98e7,U+990d,U+9967,U+9993,U+9aa3,U+9ac0,U+9ae1,U+9aeb,U+9af9,U+9c86,U+9c8b,U+9ca0-9ca1,U+9ca3,U+9ce2,U+9e48,U+9e6a,U+9e87,U+9ee2,U+9ee9,U+9f17,U+9f19,U+9f2c,U+9f80"}},{uri:dpe,descriptors:{unicodeRange:"U+4ef3,U+50d6,U+50ec,U+51ab,U+51b1,U+52d6,U+54a9,U+54da,U+55be,U+55cd,U+564d,U+572f,U+574c,U+576b,U+57d8,U+57fd,U+5844,U+59d2,U+5ae0,U+5b16,U+5b37,U+5b5b,U+5b80,U+5d1e,U+5d6b,U+5efe,U+5f11,U+5f56,U+5f58,U+5f73,U+5f8c,U+5fc4,U+5fe4,U+602b,U+6106,U+610d,U+63de,U+63f8,U+641b,U+64e4,U+6634,U+676a,U+67b5,U+681d,U+6883,U+69b1,U+69e0,U+6b37,U+6b9b,U+6d7c,U+6ed7,U+6f36,U+6f72,U+6f8c,U+7035,U+7039,U+7173,U+7178,U+7228,U+728f,U+72b4,U+72ef,U+72f4,U+7331,U+7481,U+74e0,U+7540,U+75c3,U+75e6,U+763c,U+764d,U+76cd,U+7704,U+7743,U+7780,U+7847,U+786a,U+78b9,U+7962,U+7a02,U+7aac,U+7ab3,U+7b0a,U+7b4c,U+7b7b,U+7bfc,U+7c0f,U+7c16,U+7c40,U+7ca2,U+7cc7,U+7cf8,U+7d77,U+7e3b,U+7ea1,U+7ea9,U+7ef2,U+7f02,U+7f07,U+7f0c,U+7f23,U+7f2f,U+7fbc,U+8016,U+8020,U+812c,U+8136,U+8182,U+822f,U+8233,U+825f,U+8268,U+8284,U+8288,U+8291,U+8308,U+8311,U+835b,U+836d,U+83dd,U+8406,U+840f,U+845c,U+84b4,U+84e3,U+850c,U+855e,U+863c,U+86ba,U+86c4,U+86de,U+86f1,U+873e,U+87bd,U+87db,U+880a,U+883c,U+887f,U+88f0,U+890a,U+892b,U+895e,U+89ef,U+8a48,U+8bdc,U+8c18,U+8c33,U+8c94,U+8db1,U+8dcf,U+8dd6,U+8de3,U+8e6f,U+8e90,U+8f7a,U+8fb6,U+902d,U+90be,U+91af,U+936a,U+948b,U+94d8,U+9513,U+953a,U+956c,U+963c,U+9654,U+966c,U+9688,U+97b4,U+996b,U+9a75,U+9a7a,U+9aba,U+9aed,U+9b08,U+9b43,U+9c8e,U+9c94,U+9c9a,U+9e2b,U+9e36,U+9e4b,U+9e4e,U+9e55,U+9e63,U+9e68-9e69,U+9ebd,U+9ec9,U+9f0d,U+9f37,U+9f51"}},{uri:fpe,descriptors:{unicodeRange:"U+50a7,U+5240,U+5261,U+52ac,U+531a,U+5363,U+5432,U+5452,U+5456,U+5472,U+5478,U+553f,U+5575,U+5581,U+55cc,U+55fe,U+5601,U+572e,U+57d2,U+57ef,U+581e,U+5924,U+5981,U+5997,U+59a3,U+5aaa,U+5ab8,U+5b34,U+5d5d,U+5def,U+5e11,U+5e91,U+5ed1,U+5ef4,U+5f40,U+600d,U+6019,U+601b,U+605a,U+6092,U+60ab,U+6217,U+623d,U+6369,U+65d2,U+6661,U+670a,U+6753,U+67a7,U+6855,U+68f9,U+6939,U+696e,U+6980,U+6a7c,U+6aab,U+6b82,U+6bf3,U+6bf9,U+6c05,U+6c19-6c1a,U+6ca9,U+6cf6,U+6d1a,U+6dab,U+6f74,U+7085,U+7198,U+71b5,U+7256,U+725d,U+727e,U+72fa,U+7322,U+738e,U+73e5,U+750f,U+755a,U+7594,U+75b3,U+760c,U+7615,U+7630,U+763f,U+77ec,U+7817,U+78a1,U+78d9,U+7905,U+7b2a,U+7b2e,U+7b62,U+7b85,U+7bcc,U+7bea,U+7c26,U+7c74,U+7c9c-7c9d,U+7e47,U+7e9b,U+7e9f,U+7ee0,U+7ee8,U+7ef1,U+7f01,U+7f11,U+7f17,U+7f36,U+7f7e,U+7fee,U+802a,U+80cd,U+8112,U+8169,U+8234,U+8279,U+8298,U+82ca,U+82d8,U+82e1,U+83c0,U+83d4,U+83df,U+8401,U+8451,U+845a,U+8476,U+8478,U+84ba,U+84bd,U+84e0,U+851f,U+8548,U+8556,U+8585,U+868d,U+86e9,U+86f4,U+86f8,U+8765,U+8785,U+87ab,U+87ee,U+8832,U+8872,U+88b7,U+88e2-88e3,U+89da,U+8bce,U+8bd3,U+8bd6,U+8bf9,U+8c16,U+8c73,U+8d5c,U+8dde,U+8f6d,U+8f94,U+8fe8,U+9011,U+915e,U+9185,U+918c,U+94ab,U+94d1,U+94f3,U+9515,U+951d,U+9558,U+9567,U+96ce,U+96e9,U+9785,U+9878,U+987c,U+9883,U+98d1,U+9954,U+9963,U+9a93,U+9ac1,U+9acc,U+9b1f,U+9b49,U+9b4d,U+9b51,U+9ca7,U+9cae,U+9cce,U+9cd3,U+9e37,U+9e39,U+9e41,U+9e46,U+9f22,U+9f2f,U+9f39,U+9f85"}},{uri:hpe,descriptors:{unicodeRange:"U+4e5c,U+4edf,U+4f25,U+4f32,U+4f5e,U+4f76,U+4faa,U+4fe6,U+5028,U+5048,U+5250,U+535f,U+538d,U+53c1,U+5412,U+5443,U+54d4,U+54dd,U+5541,U+5550,U+5577,U+55dd,U+55f3,U+560f,U+562c,U+5657-5658,U+5664,U+56af,U+575c,U+577c,U+57b2,U+57da,U+5800,U+5a62,U+5aeb,U+5c3b,U+5ca3,U+5d26,U+5d9d,U+5f01,U+5fb5,U+5fdd,U+5ff8,U+6029,U+6041,U+6079,U+60b1,U+6222,U+629f,U+6332,U+63bc,U+63e0,U+6485,U+65ab,U+65c3,U+65c6,U+668c,U+669d,U+66be,U+67fd,U+6800,U+68fc,U+690b,U+6924,U+6978,U+69a7,U+6a3e,U+6a50,U+6a5b,U+6a97,U+6b24,U+6b8d,U+6baa,U+6c10,U+6c54,U+6ceb,U+6d04,U+6d4d,U+6eb1,U+6ebd,U+7110,U+71b3,U+71f9,U+7230,U+728d,U+7292,U+72b8,U+72d2,U+7360,U+73a2,U+7511,U+75a0,U+75c8,U+779f,U+7826,U+7877,U+7a39,U+7aa8,U+7ae6,U+7b04,U+7b0f,U+7baa,U+7bac,U+7c1f,U+7ccd,U+7ecb,U+7ed4,U+7ed7,U+7efb,U+7f0d,U+7f5f,U+7faf,U+7fd5,U+7fe5,U+8027,U+80bc,U+80dd,U+80fc,U+8132,U+815a,U+8167,U+816d,U+81ca,U+8228,U+82a1,U+82a9,U+82ab,U+82cc,U+8351,U+8368,U+83b8,U+83d8,U+83ea,U+83f0,U+8497,U+84c1,U+858f,U+85ff,U+867b,U+86a8-86a9,U+870a,U+8722,U+876e,U+877c,U+87e5,U+8888,U+88df,U+8919,U+8bcc,U+8bdf,U+8be8,U+8bee,U+8c20,U+8c2f,U+8d36,U+8df8,U+8e05,U+8e2f,U+8f9a,U+9021,U+908b,U+90b4,U+90ba,U+90d0,U+90eb,U+90fe,U+91aa,U+933e,U+9486-9487,U+948d,U+9490,U+94ad,U+94bd,U+94d6,U+94d9,U+9507,U+9546,U+955e,U+956b,U+95e9,U+9604,U+960b,U+9612,U+9615,U+9617,U+96b9,U+989a-989b,U+989e,U+9a78,U+9a7d,U+9aa0,U+9aa2,U+9ac2,U+9b23,U+9b3b,U+9c82,U+9cca,U+9cd9,U+9e28,U+9e5a,U+9e5e,U+9e6c,U+9efe,U+9f0b"}},{uri:gpe,descriptors:{unicodeRange:"U+4e47,U+4e8d,U+4f65,U+4f89,U+50ee,U+520e,U+5416,U+5454,U+54bb,U+54c2,U+54d3,U+54de,U+5591,U+55e5,U+560c,U+566b,U+5769,U+578c,U+5793,U+57e4,U+5889,U+593c,U+59ab,U+5ad4,U+5ad8,U+5af1,U+5b53,U+5ba5,U+5c59,U+5c63,U+5d5b,U+5e0f,U+5e14,U+5edb,U+5fbc,U+6004,U+60ad,U+610e,U+61b7,U+624c,U+634c,U+647a,U+64ba,U+65f0,U+6600,U+66f7,U+67e2,U+67f0,U+680c,U+686b,U+6874,U+691f,U+6989,U+6a17,U+6b81,U+6b84,U+6c06-6c07,U+6c3d,U+6d07,U+6d27,U+6d2b,U+6d91,U+6e6b,U+6e8f,U+6fde,U+70bb,U+723b,U+726e,U+72b0,U+72ce,U+72f2,U+7301,U+731e,U+737e,U+7477,U+748e,U+74ff,U+7633,U+7654,U+771a,U+7726,U+7765,U+7768,U+781c,U+7829,U+78d4,U+7913,U+7957,U+79d5,U+79eb,U+7a70,U+7a86,U+7b25,U+7b38,U+7b47,U+7b72,U+7ba6-7ba7,U+7dae,U+7ee1,U+7efe,U+7f26,U+7f31,U+7f35,U+801c,U+8043,U+809f,U+80ab,U+80d7,U+8118,U+8188,U+81cc,U+823e,U+8244,U+824f,U+82b4,U+82c1,U+82e4,U+82f4,U+8306,U+833a,U+835c,U+839c,U+83b3,U+83bc,U+846d,U+867a,U+868b,U+8734,U+87ca,U+886e,U+887e,U+88a2,U+88c9,U+8921,U+8bb5,U+8bf3,U+8c04,U+8c17,U+8c1d,U+8c25,U+8c36,U+8c55,U+8c78,U+8d3d,U+8d40,U+8d59,U+8d67,U+8d91,U+8dbf,U+8deb-8dec,U+8dfd,U+8e14,U+8e41,U+8f8e,U+900b,U+9044,U+9062,U+90cf,U+9123,U+9146,U+9162,U+9172,U+918d,U+9190,U+92c8,U+93ca,U+948c,U+94aa,U+94b2,U+94c8,U+94ca,U+94d5,U+94df,U+94e9-94ea,U+94f7,U+94fc-94fd,U+951b,U+954f,U+9554,U+9559,U+9566,U+9571-9572,U+95f1,U+9608,U+960f,U+97af,U+988f,U+98d5,U+992e,U+9955,U+9ab0,U+9b32,U+9c90,U+9c9e,U+9ca5,U+9ca9,U+9cad,U+9cb1,U+9cc3,U+9e47,U+9ee7,U+9f87"}},{uri:mpe,descriptors:{unicodeRange:"U+4e93,U+4ec4,U+4ef5,U+4f27,U+4f7b,U+4fe3,U+5080,U+5121,U+51eb,U+5208,U+52f0,U+53f5,U+5453,U+5466,U+54a6,U+54bf,U+54d0,U+5533,U+5549,U+5556,U+556d,U+558f,U+55f2,U+55f5,U+5627,U+567b,U+56d4,U+571c,U+5739,U+57b4,U+5807,U+58c5,U+59a4,U+59af,U+59d8,U+5a09,U+5a0c,U+5a4a,U+5ad2,U+5b6c,U+5ca2,U+5cac,U+5d03,U+5d6c,U+5db7,U+5ebe,U+5f2d,U+5fea,U+6042,U+6120,U+6175,U+6221,U+623e,U+6339,U+638a,U+643d,U+64b8,U+64e2,U+66e9,U+67b3,U+67c1,U+67d2,U+6832,U+6877,U+68f0,U+6934,U+6966,U+6987,U+6998,U+69c1,U+69ce,U+6a3d,U+6a84,U+6aa9,U+6b87,U+6bd6,U+6c16,U+6c18,U+6cd4,U+6cee,U+6de0,U+6e0c,U+6ecf,U+6f4b,U+70b7,U+7168,U+72d9,U+7352,U+73b3,U+73d0,U+7441,U+74d2,U+75a5,U+75e7-75e8,U+7610,U+7619,U+765e,U+772d,U+7812,U+782c,U+784c,U+7850,U+7856,U+789b,U+78f4,U+7a51,U+7b15,U+7b1e,U+7b24,U+7b5a,U+7bb8,U+7bc1,U+7bd9,U+7ed0,U+7ee6,U+7efa,U+7f1b,U+7f1f,U+7f22,U+7f45,U+7f71,U+7fa7,U+7fbf,U+7ff3,U+8052,U+80b1,U+80db,U+80f4,U+81bb,U+81ec,U+8202,U+8210,U+8249,U+828a,U+828e,U+82e3,U+8315,U+8369,U+8378,U+83a8,U+83aa,U+83b4,U+83e1,U+84fc,U+8538,U+853b,U+859c,U+85ae,U+86b4,U+86c9,U+86cf,U+8725,U+879f,U+87b3,U+887d,U+88fe,U+8a8a,U+8ba7,U+8c07,U+8c14,U+8c30,U+8c47,U+8db5,U+8dd7,U+8e1f,U+8e69,U+8e70,U+8e85,U+8f78,U+8f87,U+8f8b,U+8f8f,U+90c4,U+9143,U+917d,U+948f,U+94cd,U+94d2,U+94ef,U+954a,U+9609-960a,U+96d2,U+9708,U+9765,U+97ea,U+9880,U+98a7,U+996c,U+9980,U+9991,U+9a88,U+9ab6,U+9afb,U+9b47,U+9c87,U+9c9b,U+9cb5,U+9cc7,U+9e2c,U+9e42,U+9e58,U+9ecd,U+9ecf,U+9f8a,U+9f8c"}},{uri:ppe,descriptors:{unicodeRange:"U+4ebb,U+4edd,U+4fa9,U+502c,U+50a5,U+51c7,U+51fc,U+523d,U+5241,U+530f,U+5464,U+549d,U+54a3,U+5514,U+5527,U+555c,U+556e,U+5576,U+55b1,U+55b9,U+55eb,U+5624,U+564c,U+5671,U+5685,U+568f,U+56d7,U+56e1,U+57a1,U+57d9,U+5942,U+5a67,U+5c50,U+5c7a,U+5c98,U+5d06,U+5d27,U+5d6f,U+5df3,U+5dfd,U+5e19,U+5ea0,U+5eb9,U+5eea,U+5ffe,U+600f,U+606b,U+6215,U+622c,U+6266,U+62bb,U+62bf,U+6308,U+6387,U+63b8,U+63c4,U+63c6,U+63f6,U+6441,U+6555,U+659b,U+6677,U+66a7,U+6775,U+678b,U+679e,U+6840,U+6849,U+6860,U+68c2,U+6910,U+6a28,U+6a2f,U+6a79,U+6b92-6b93,U+6bc2,U+6bfd,U+6c29,U+6c32,U+6c86,U+6cc5,U+6d0c,U+6d60,U+6da0,U+6ddd,U+6e86,U+6ed3,U+6edf,U+6fb9,U+6fd1,U+6fef,U+7023,U+7080,U+70ca,U+712f,U+7145,U+7284,U+732c,U+73c8,U+73d9,U+740a,U+7457,U+7596,U+759d,U+75a3,U+75d8,U+75e3-75e4,U+75ff,U+7622,U+7688,U+76b4,U+76e5,U+7818,U+7887,U+789a,U+78b2,U+7b08,U+7b33,U+7c2a,U+7ccc,U+7ea8,U+7ec0,U+7fe6,U+8012,U+8084,U+8093,U+80e4,U+80ef,U+8297,U+82a8,U+82be,U+8331,U+8366,U+83c5,U+83fd,U+8473,U+84a1,U+84ca,U+84d1,U+857b,U+85c1,U+85d3,U+8605,U+8662,U+86aa,U+86b1,U+86d4,U+86ed,U+86f3,U+8709,U+8748,U+874c,U+8763,U+89c7,U+89de,U+89e5,U+8a3e,U+8ba6,U+8c00,U+8c21,U+8c49,U+8c7a,U+8d30,U+8df9,U+8e51,U+8e59,U+8f6b,U+8f73,U+8ff3,U+9016,U+9026,U+902f,U+9099,U+909b,U+90c7,U+914a,U+91ae,U+91ba,U+9495,U+94a3,U+94af,U+94ba,U+94bf,U+94cc,U+94e1,U+94f0,U+9531,U+955d,U+95f3,U+9697,U+96bc,U+975b,U+977c,U+98a2,U+998a,U+9994-9995,U+9a9b,U+9ab7,U+9ac5,U+9c91,U+9ccf,U+9cd5,U+9e29,U+9edc,U+9edf,U+9f83,U+9f88-9f89"}},{uri:Upe,descriptors:{unicodeRange:"U+4ee8,U+4f22,U+4f43,U+4f57,U+4f5d,U+4f6f,U+4ff8,U+502d,U+507b,U+5345,U+53df,U+53fb,U+544b,U+5482,U+54a7,U+54cc,U+550f,U+5544,U+5555,U+5594,U+55e8,U+55ec,U+55ef,U+564e,U+56f9,U+5704,U+576d,U+5785,U+57ad,U+5914,U+5958,U+599e,U+59aa,U+59be,U+5a06,U+5abe,U+5ae1,U+5b40,U+5bee,U+5cbf,U+5cc4,U+5ccb,U+5d47,U+603f,U+6078,U+607d,U+607f,U+608c,U+609a,U+60fa,U+61ff,U+621b,U+622e,U+626a,U+6371,U+63ae,U+63cd,U+63d6,U+6410,U+6414,U+6421,U+6448,U+64d8,U+6710,U+6748,U+6772,U+680e,U+6954,U+69ab,U+6c68,U+6c8f,U+6ca4,U+6d2e,U+6e4e,U+6e98,U+6fe0,U+7094,U+70e9,U+7116,U+7119,U+723f,U+73c9,U+74e4,U+753e,U+7548,U+75bd,U+75cd,U+7618,U+7634,U+76c5,U+76f1,U+7708,U+7719,U+777e,U+7791,U+77b3,U+7823,U+7827,U+7830,U+7889,U+7893,U+7949,U+795c,U+79e3,U+7a14,U+7a88,U+7a95,U+7aa0,U+7afd,U+7b90,U+7bd1,U+7bfe,U+7da6,U+7ec2,U+7eef,U+7f03-7f04,U+7f08,U+7f58,U+7f61,U+7f9f,U+8174,U+8200,U+828d,U+82c4,U+82d5,U+82dc,U+82f7,U+832d,U+835a,U+840b,U+8438,U+852b,U+869d,U+86ac,U+86d0,U+86f0,U+8782,U+87a8,U+87d1-87d2,U+87e0,U+8839,U+8913,U+891b,U+8934,U+8941,U+89ca,U+89ce,U+8a07,U+8ba3,U+8bc5,U+8bcb,U+8bdb,U+8c11,U+8c15,U+8c29,U+8c32,U+8dc4,U+8dce,U+8ddb,U+8dfa,U+8e09,U+8e1d,U+8e39,U+8e42,U+8e49,U+8e4b,U+8e8f,U+8f71-8f72,U+9004,U+9036,U+9097,U+90dc,U+90e2,U+90e6,U+90ef,U+9104,U+919a,U+91b4,U+938f,U+9497,U+950f,U+9557,U+9562-9563,U+9573,U+9606,U+9649,U+972d,U+973e,U+97a3,U+97eb,U+988c,U+9894,U+98a6,U+9974,U+9977,U+997d,U+9a90,U+9a9d,U+9aef,U+9ca2,U+9ccd,U+9cdf,U+9e20,U+9e4c,U+9e6b,U+9f3e"}},{uri:bpe,descriptors:{unicodeRange:"U+4ede,U+4ee1,U+4eeb,U+4fda,U+4ffe,U+5025,U+506c,U+50f3,U+5106,U+520d,U+525c,U+52ad,U+530d,U+5310,U+539d,U+53a9,U+53fc,U+5421,U+5477,U+54e7,U+551b,U+5530,U+557e,U+5599,U+55c4,U+55d1,U+55d4,U+55df,U+55e4,U+55ea,U+5623,U+562d,U+5654,U+56eb,U+56f5,U+57a7,U+57d5,U+57dd,U+584d,U+5880,U+58ec,U+59dd,U+5a32,U+5a55,U+5a75,U+5b51,U+5b71,U+5b73,U+5cd2,U+5ce4,U+5e5b,U+5e96,U+5fd2,U+607b,U+61d1,U+634b,U+636d,U+63b3,U+63ff,U+64c0,U+661d,U+6657,U+66dc,U+67a5,U+6841,U+6867,U+6901,U+699b,U+6a47,U+6b46,U+6c21,U+6c24,U+6c35,U+6c4a,U+6c94,U+6ca3,U+6d39,U+6d63,U+6d6f,U+6d94,U+705e,U+71e7,U+726f,U+72cd,U+72de,U+72f0,U+7325,U+7350,U+7391,U+741a,U+757f,U+7583,U+75b1,U+75b4,U+75b8,U+75c2,U+75f1,U+766f,U+7699,U+7751,U+789c,U+7a17,U+7be6,U+7cb2,U+7ea3,U+7eb0,U+7ebe,U+7eeb,U+7f25,U+7f2c,U+7fb8,U+8026,U+8037,U+8153,U+8171,U+8191,U+8214,U+821b,U+8222,U+826e,U+82eb,U+830c,U+8314,U+8334,U+83d6,U+8418,U+843c,U+84ff,U+8564,U+8572,U+8616,U+866c,U+8693,U+86a3,U+86a7,U+86af,U+86b6,U+86c6,U+86ca,U+8708,U+870d,U+8759,U+8760,U+87af,U+87c6,U+8869,U+88c6,U+89d0,U+8b07,U+8baa-8bab,U+8bc2,U+8be4,U+8bf0,U+8c2a,U+8c62,U+8c89,U+8d49,U+8d6d,U+8d84,U+8d94,U+8db8,U+8dc6,U+8e2e,U+8e3d,U+8e47,U+8e7f,U+9005,U+9051,U+907d,U+9082,U+9088,U+90b0,U+90d3,U+9150,U+949c,U+94a4,U+94b9,U+94cb,U+94e0,U+9509,U+9512,U+951f,U+9534,U+9552-9553,U+965f,U+96b0,U+9791,U+9889,U+9990,U+9a9c,U+9aa7,U+9c88,U+9cb2-9cb3,U+9cb6-9cb7,U+9cc5,U+9cdc,U+9e22,U+9e2a,U+9e57,U+9e67,U+9e73,U+9e82,U+9eb8,U+9ee0,U+9f9b"}},{uri:ype,descriptors:{unicodeRange:"U+4eb5,U+4f09,U+4f5a,U+4f8f,U+4fce,U+4fdf,U+4fea,U+4ff3,U+500c,U+500f,U+504e,U+5088,U+52be,U+5420,U+5457,U+5499,U+549b,U+54c6,U+54d2,U+558b,U+559f,U+55bd,U+55d6,U+565c,U+567c,U+568e,U+5768,U+577b,U+57a9,U+57ed,U+59f9,U+5a11,U+5a40,U+5ae6,U+5b6a,U+5b93,U+5bb8,U+5c15,U+5c99,U+5c9c,U+5cc1,U+5d2e,U+5d4b,U+5d99,U+5e54,U+5e61,U+5fcf-5fd1,U+6002,U+6006,U+6014,U+60af,U+60c6,U+60da,U+60f4,U+621f,U+62c8,U+631b,U+631e,U+63e9,U+64b5,U+655d,U+6619,U+6635,U+6641,U+67ad,U+67b0,U+67b7,U+67e9,U+684e,U+688f,U+695d,U+696b,U+69b7,U+6a58,U+6c26,U+6d35,U+6d43,U+6d9e,U+6dd9,U+6dec,U+6e11,U+6e6e,U+6e9f,U+6ec2,U+6ee2,U+6ef9,U+6f09,U+6f66,U+6f8d,U+6fc2,U+6fc9,U+729f,U+72c8,U+73de,U+7430,U+7566,U+7579,U+75c9,U+75e2,U+75fc,U+762a,U+7638,U+7678,U+76c2,U+76f9,U+778c,U+77cd,U+77dc,U+7800,U+781d,U+782d,U+783b-783c,U+78a3,U+78ec,U+7980,U+7a23,U+7b95,U+7bdd,U+7c0c,U+7c41,U+7c91,U+7cb3,U+7cc5,U+7ecc,U+7f19,U+7fca,U+8006,U+8069,U+807f,U+80bd,U+80ed,U+814b,U+8198,U+82cb,U+82d2,U+834f,U+8360,U+847a,U+84d6,U+84e5,U+8537,U+85d0,U+8671,U+86a4,U+86ce,U+86f9,U+8703,U+8707,U+8737,U+873b,U+8815,U+8936,U+8bc3,U+8bcf,U+8bd2,U+8bd8,U+8be9,U+8c0c,U+8c0f,U+8c4c,U+8d45,U+8d5d,U+8d73,U+8e31,U+8e6d,U+8e76,U+8fe4,U+9041,U+90d7,U+9169,U+92ae,U+94a1,U+94c4,U+94c9,U+94db,U+94e7,U+9503,U+9506,U+9517,U+9528,U+9537,U+9542,U+9549,U+95fe,U+9616,U+961a,U+96c9,U+96f3,U+9701,U+970e,U+9739,U+9753,U+9798,U+98d2-98d3,U+98d9-98da,U+9968,U+996f,U+9984,U+9997,U+9acb,U+9b03,U+9c85,U+9ca8,U+9cab,U+9e49,U+9e51,U+9e66,U+9f10"}},{uri:Epe,descriptors:{unicodeRange:"U+4e15,U+4e1e,U+4e2b,U+4eb3,U+4ec9,U+4f0e,U+4f64,U+501c,U+50a9,U+510b,U+51a2,U+51bc,U+527d,U+52d0,U+53fd,U+5429,U+542e,U+5486,U+54af,U+5506,U+5511,U+5522,U+552c,U+556c,U+55b3,U+55d2,U+55e6,U+55fd,U+561f,U+5639,U+5659,U+5662,U+5693,U+572a,U+5892,U+598a,U+5992,U+59a9,U+5a20,U+5ae3,U+5b17,U+5b7d,U+5d34,U+5d3d,U+5d4a,U+5d82,U+5e1a-5e1b,U+5ea5,U+5f0b,U+5f77,U+5fd6,U+5fff,U+6026,U+6035,U+6063,U+60b4,U+60bb,U+60ee,U+612b,U+6194,U+61ca,U+61e6,U+61f5,U+620a,U+6248,U+62a1,U+62d7,U+6376,U+637b,U+652b,U+65bc,U+65cc,U+65ce,U+65d6,U+664c,U+665f,U+6666,U+6684,U+66b9,U+6773,U+6777,U+6787,U+67de,U+6845,U+693d,U+6994,U+6a35,U+6d54,U+6d5c,U+6d8e,U+6dd6,U+6eb4,U+6f2a,U+6f78,U+704f,U+70ec,U+7118,U+714a,U+7172,U+71b9,U+724d,U+728a,U+7337,U+733e,U+7396,U+73b7,U+73cf,U+7428,U+742c,U+742e,U+74ee,U+74f4,U+7525,U+753a,U+7572,U+75d4,U+765c,U+768e,U+7762,U+777d,U+77fd,U+7825,U+7837,U+78b4,U+795f,U+79ed,U+7a1e,U+7b06,U+7b20,U+7ba9,U+7bab,U+7c7c,U+7cbd,U+7cdc,U+7ec9,U+7ef6,U+7f30,U+7f42,U+7f44,U+7f54,U+7f94,U+8004,U+800b,U+8019,U+809b,U+80ae,U+80c4,U+80f1,U+8146,U+816e,U+817c,U+81c0,U+81fc,U+81fe,U+822b,U+830f,U+832f,U+8340,U+8365,U+8385,U+8392,U+83a0,U+8424,U+84af,U+869c,U+8713,U+8717-8718,U+87c0,U+87cb,U+87fe,U+8821,U+8902,U+89d1,U+8bb9,U+8c12,U+8d32,U+8d53,U+8df7,U+8e7c,U+8f7c,U+8f95,U+8fab,U+9052,U+905b,U+9095,U+909d,U+90c5,U+911e,U+9122,U+916a,U+919b,U+948e,U+9492,U+949a,U+94b5,U+94bc,U+94c6,U+94f1,U+9502,U+9511,U+9536,U+956f-9570,U+9602,U+9621,U+9631,U+998b,U+99a5,U+9a81,U+9a9e,U+9ebe,U+9f8b"}},{uri:vpe,descriptors:{unicodeRange:"U+4f2b,U+4f3d,U+4fac,U+5043,U+5055,U+5140,U+5156,U+51cb,U+5243,U+531d,U+536f,U+53a5,U+53ae,U+53f1,U+541d,U+5431,U+547b,U+5492,U+5494,U+54a4,U+54aa,U+54ce,U+54fd,U+5509,U+5520,U+553e,U+557b,U+55c5,U+55e1,U+55f7,U+5608,U+5636,U+563b,U+5773,U+57a0,U+5811,U+587e,U+58d5,U+59e3,U+5a29,U+5a6a,U+5a76,U+5a7a,U+5ac9,U+5b62,U+5b95,U+5c49,U+5c8c,U+5cab,U+5cb7,U+5d02,U+5d58,U+5e44,U+5e7a,U+5eff,U+5f29,U+5f89,U+5f9c,U+5fa8,U+6005,U+6043,U+60b8,U+60d8,U+60ec,U+60f0,U+6115,U+618e,U+630e,U+637a,U+6390,U+63ac,U+63b0,U+64de,U+6525,U+6538,U+65ee-65ef,U+6631,U+6636,U+6654,U+677c,U+67b8,U+67d8,U+683e,U+6886,U+68b5,U+692d,U+6963,U+6979,U+6988,U+6b59,U+6b9a,U+6c69,U+6c74,U+6cae,U+6ce0,U+6cef,U+6d95,U+6dc5,U+6dde,U+6de6,U+6dfc,U+6ea7,U+6f15,U+6f29,U+7096,U+70c3,U+7131,U+715c,U+7166,U+7266,U+7317,U+731d,U+7329,U+73e9,U+7425,U+7455,U+7490,U+74ef,U+7519,U+75b5,U+75b9,U+75de,U+7656,U+7663,U+7691,U+7729,U+77fe,U+783e,U+787c,U+795a,U+7a79,U+7abf,U+7b3a,U+7b4f,U+7b60,U+7b75,U+7b8d,U+7bb4,U+7bd3,U+7be1,U+7cbc,U+7edb,U+7f1c,U+7f8c,U+7fb2,U+7fb9,U+7fce,U+7ff1,U+810d,U+81c6,U+82a5,U+82aa,U+82de,U+8317,U+8343,U+835e,U+8364,U+836a,U+853a,U+8543,U+854a,U+8559,U+8568,U+85b0,U+85b9,U+864f,U+86e4,U+8715,U+8845,U+8884,U+88e8,U+88f1,U+8983,U+8be1,U+8c1f,U+8c27,U+8c5a,U+8c82,U+8d58,U+8dbe,U+8f98,U+9035,U+9074,U+90a1,U+9149,U+9157,U+93d6,U+949d,U+94c2,U+94e3-94e4,U+95eb,U+95f0,U+9611,U+9619,U+9642,U+968d,U+9706,U+970f,U+97ed,U+988a,U+9893,U+98e8,U+9a77,U+9a87,U+9aa1,U+9abc,U+9cdd,U+9e2f,U+9e33,U+9e44,U+9e5c,U+9e9d,U+9edd"}},{uri:wpe,descriptors:{unicodeRange:"U+4f58,U+4f6c,U+4f70,U+4fd0,U+5014,U+51bd,U+524c,U+5315,U+5323,U+535e,U+540f,U+542d,U+545b,U+548e,U+549a,U+54ab,U+54fc,U+5567,U+556a,U+5600,U+5618,U+563f,U+5669,U+56f1,U+56ff,U+573b,U+574d,U+579b,U+57b8,U+57c2,U+586c,U+58f9,U+595a,U+598d,U+5993,U+5996,U+59d7,U+5b7a,U+5ba6,U+5c4e,U+5c96,U+5ce5,U+5eb6,U+5f08,U+5f99,U+602f,U+6059,U+606c,U+607a,U+60ed,U+61a9,U+620c,U+6249,U+62a8,U+62c4,U+62ed,U+62fd,U+6342,U+6345,U+6396,U+63a3,U+6402,U+6413,U+642a,U+6487,U+64a9,U+64ac,U+64ae,U+64b7,U+659f,U+65a1,U+667e,U+66f3,U+67e0,U+69db,U+69df,U+6aac,U+6b86,U+6c50,U+6c5e,U+6c76,U+6c85,U+6c8c,U+6cde,U+6d19,U+6d52,U+6da7,U+6db8,U+6e1a,U+6e25,U+6e4d,U+6e5f,U+6ec1,U+6f31,U+6f7a,U+6fa7,U+6fe1,U+701b,U+70ab,U+70f7,U+717d,U+71a8,U+7252,U+72c4,U+72e1,U+7315,U+736d,U+73ae,U+73c0,U+73c2,U+740f,U+75a4,U+7600-7601,U+768b,U+76bf,U+76d4,U+7728,U+772f,U+776c,U+77a0,U+77b0,U+77f8,U+783a,U+78d0,U+78fa,U+7977,U+7a37,U+7a92,U+7afa,U+7b71,U+7b94,U+7cef,U+7f28,U+7fe1,U+808b,U+80e5,U+80eb,U+8110,U+8113,U+812f,U+814c,U+81c3,U+8235,U+82d4,U+8309,U+83c1,U+8431,U+8469,U+84bf,U+84d3,U+84df,U+84e6,U+8511,U+8638,U+86c0,U+86db,U+86fe,U+8757,U+8822,U+8882,U+8885,U+8892,U+88f3,U+892a,U+8ba5,U+8bd9,U+8be0,U+8be7,U+8bfd,U+8c1a,U+8d4a,U+8d4e,U+8d66,U+8dda,U+8e0c,U+8e52,U+8e74,U+8e87,U+8f76,U+8fc2,U+8fe6,U+900d,U+9068,U+90ac,U+90b3,U+90b8,U+90e7,U+9119,U+9131,U+915a,U+916e,U+94b4,U+94d0,U+94e2,U+94ec,U+94ff,U+9522,U+9535,U+9556,U+965b,U+96f9,U+9774,U+9981,U+998d,U+998f,U+9a6e,U+9a7f,U+9a8a,U+9b13,U+9c9f,U+9e3e,U+9e43,U+9e6d,U+9e8b,U+9e92,U+9edb,U+9eef"}},{uri:_pe,descriptors:{unicodeRange:"U+4e10,U+4e56,U+4e98,U+4ec3,U+4f3a,U+4f5f,U+4f88,U+4f97,U+4fa5,U+4fe8,U+504c,U+5197,U+52fa,U+5364,U+53e8,U+5406,U+543c,U+545c,U+5471,U+5480,U+5495,U+54b3,U+54df,U+54e6,U+54ee,U+557c,U+5583,U+55dc,U+55e3,U+566c,U+592f,U+5944,U+5983,U+59ca,U+59e5,U+5a13,U+5a7f,U+5b09,U+5bd0,U+5e4c,U+5eb5,U+5f1b,U+5f3c,U+608d,U+60cb,U+61a7,U+61ac,U+61cb,U+6233,U+62a0,U+62e7,U+62ee,U+62f4,U+62f7,U+634e,U+6382,U+63c9,U+63ea,U+6400,U+645e,U+6482,U+6556,U+6593,U+6615,U+664f,U+66e6,U+672d,U+675e,U+67da,U+6805,U+6808,U+6868,U+68a2,U+695e,U+69ad,U+6a80,U+6a90,U+6b83,U+6be1,U+6c30,U+6cad,U+6cb1,U+6cf1,U+6d31,U+6d93,U+6dae,U+6dbf,U+6dc6-6dc7,U+6e0d,U+6e32,U+6e3a,U+6e85,U+6eba,U+6f3e,U+6f5e,U+6f7c,U+6fee,U+71ee,U+722a,U+72b7,U+72e9,U+73ba,U+73d1,U+7409,U+7435-7436,U+7459-745a,U+747e,U+7487,U+74e2,U+7504,U+752c-752d,U+7599,U+759f,U+75a1,U+75ca,U+75f0,U+761f,U+7629,U+777f,U+7785,U+77a5,U+77bf,U+78d5,U+7934,U+7940,U+79a7,U+7b19,U+7c38,U+7c95,U+7cb1,U+7ce0,U+7eca,U+7ef7,U+7f2b,U+7f81,U+7fcc,U+8046,U+8148,U+8165,U+819b,U+81ba,U+828b,U+82ae,U+82b7,U+82d3,U+8301,U+830e,U+831c,U+8338,U+837c,U+8393,U+8398,U+83ba,U+83e0,U+83e9,U+853c,U+8654,U+86df,U+8712,U+873f,U+874e,U+8783,U+8859,U+88a4,U+8925,U+8bb7,U+8bff,U+8c19,U+8c1b,U+8c24,U+8c2c,U+8d61,U+8db4,U+8e6c,U+8f8a,U+8fe5,U+8ff8,U+901e,U+90f4,U+912f,U+9163,U+9170,U+91dc,U+949b,U+94a8,U+94b3,U+94c0,U+94e8,U+9525,U+9530,U+9539,U+954c-954d,U+9550,U+955b,U+962a,U+9685,U+96cc,U+9776,U+988d,U+9975,U+9985,U+9a6f,U+9aa5,U+9ab8,U+9c7f,U+9ca4,U+9cb8,U+9e25,U+9e35,U+9e4a"}},{uri:Tpe,descriptors:{unicodeRange:"U+4ea2,U+4ea5,U+4f36,U+4f84,U+4f8d,U+501a,U+5029,U+516e,U+51a5,U+51c4,U+51f8,U+5201,U+527f,U+5321,U+5352,U+5366,U+53e9,U+54c7,U+5632,U+5676,U+56b7,U+56bc,U+56da,U+56e4,U+5703,U+5729,U+5742,U+57a2-57a3,U+5815,U+58d1,U+5919,U+592d,U+5955,U+5a05,U+5a25,U+5a34,U+5b70,U+5b75,U+5bdd,U+5bf0,U+5c41,U+5c79,U+5c91,U+5c94,U+5ce6,U+5ced,U+5d69,U+5dc5,U+5e16,U+5e27,U+5f27,U+5f95,U+5ffb,U+6020,U+604d,U+6055,U+60e6,U+60eb,U+6123,U+618b,U+61a8,U+620d,U+62c7,U+62ce,U+62d9,U+631f,U+634d,U+6452,U+6479,U+64ce,U+64d2,U+655b,U+660a,U+6726,U+67c4,U+6809,U+6853,U+68e3,U+68f1,U+68fa,U+693f,U+6942,U+6995,U+69a8,U+69b4,U+6a71,U+6b89,U+6bcb,U+6bd3,U+6bd9,U+6c40,U+6cf8,U+6cfe,U+6d85,U+6da3,U+6daa,U+6e0e,U+6e43-6e44,U+6f88,U+7078,U+7099,U+70bd,U+70d9,U+70fd,U+7109,U+7184,U+7239,U+733f,U+73f2,U+748b,U+749c,U+749e,U+759a,U+75d2,U+75eb,U+7620,U+766b,U+7693,U+76cf,U+7738,U+773a,U+776b,U+778e,U+77aa,U+7852,U+78be,U+7948,U+795b,U+7960,U+796f,U+79ba,U+7a20,U+7a96,U+7aa5,U+7b03,U+7b28,U+7b50,U+7b77,U+7bc6,U+7bf1,U+7c27,U+7d0a,U+7ead,U+7ec5,U+7ee2,U+7ef0,U+7efd,U+7f0e,U+7f2e,U+7f79,U+7f9a,U+8098,U+80da,U+80e7,U+80f0,U+80f3,U+80fa,U+818a,U+81e7,U+8237-8238,U+8299,U+82b8,U+82ce,U+837b,U+83bd,U+83cf,U+8426,U+8475,U+85c9,U+85d5,U+85dc,U+85e9,U+871a,U+8747,U+8749,U+888d,U+8910,U+891a,U+8bb4,U+8be3,U+8bec,U+8bf2,U+8c06,U+8c0d,U+8d31,U+8d48,U+8de4,U+8e1e,U+8e4a,U+8e66,U+8f84,U+8f97,U+9083,U+90e1,U+9165,U+91c9,U+94b0,U+94f5,U+9504,U+9532,U+956d,U+95f5,U+95fa,U+9668,U+9698,U+96bd,U+9704,U+9773,U+9890,U+996a,U+997a,U+9a74,U+9a8b,U+9cc4,U+9ccc"}},{uri:Spe,descriptors:{unicodeRange:"U+4ea8,U+4f1e,U+4f51,U+4f63,U+4f7c,U+4f83,U+4fa0,U+4fd1,U+4ffa,U+5018,U+5026,U+508d,U+50bb,U+50f5,U+50fb,U+5162,U+5319,U+5320,U+538c,U+5413,U+541f,U+5475,U+54bd,U+54d1,U+5589,U+5598,U+575f,U+57ae,U+57e0,U+5937,U+5974,U+5978,U+59ae,U+5a1f,U+5a49,U+5ab3,U+5b99,U+5b9b,U+5ba0,U+5be1,U+5be5,U+5c09,U+5c27,U+5de2,U+5e9a,U+5f26,U+5f8a,U+5f98,U+6021,U+606d,U+60bc,U+60d5,U+60e7,U+611a,U+614c,U+6254,U+626f,U+6292,U+6296,U+62b9,U+62e2,U+631a,U+631d,U+6320,U+6346,U+63ba,U+6467,U+64bc,U+658b,U+663c,U+6643,U+6652,U+6656,U+6687,U+66d9,U+66dd,U+66f0,U+673d,U+67ab,U+6816-6817,U+68a7,U+68ad,U+68cd,U+68e0,U+6986,U+69fd,U+6b47,U+6bd7,U+6c1f,U+6c2e-6c2f,U+6cbe,U+6de4,U+6e1d,U+6e83,U+6e9c,U+6ed4-6ed5,U+6f4d,U+70f9,U+7130,U+716e,U+718f,U+71ac,U+71e5,U+72fc,U+731c,U+7334,U+73ca,U+7422,U+7426,U+745f,U+7470,U+75af,U+75f4,U+762b,U+763e,U+7696,U+7737,U+7741,U+77a7,U+77bb,U+77ee,U+785d,U+788c,U+78ca,U+7901,U+796d,U+7985,U+79fd,U+7a3c,U+7a57,U+7a74,U+7b5b,U+7caa,U+7cb9,U+7cd5,U+7eac,U+7eb6,U+7ed1,U+7ee5,U+7f20,U+7f2a,U+7f38,U+7f69,U+7fa1,U+8018,U+8038,U+803f,U+804b,U+80a2,U+80be,U+80d6,U+817a,U+81fb,U+820c,U+82ad,U+82af,U+82bd,U+8327,U+8354,U+835f,U+8367,U+836b,U+840c,U+841d,U+8471,U+849c,U+84b2,U+84c9,U+8517,U+851a,U+8549,U+8681,U+8721,U+8776,U+88d9,U+88f9,U+89c5,U+8c1c,U+8c34,U+8d81,U+8d9f,U+8e0a,U+8e72,U+8eb2,U+8fed,U+901b,U+902e,U+906e,U+9091,U+90aa,U+90af,U+915d,U+9171,U+946b,U+9489,U+9499,U+94a5,U+9508,U+9524,U+952d,U+9551,U+9576,U+95f7,U+9600,U+96b6,U+96c0,U+9756,U+97f6,U+98a0,U+98a4,U+997f,U+9a73,U+9a86,U+9ad3,U+9e3d,U+9ed4"}},{uri:A1e,descriptors:{unicodeRange:"U+4e4d,U+4e5e,U+4ec7,U+4ed5,U+50da,U+50e7,U+515c,U+51a4,U+51ff,U+5203,U+5254,U+5300,U+533e,U+5375,U+53ee,U+5435,U+543b,U+5455,U+548b,U+548f,U+54d7,U+54fa,U+5578,U+5587,U+55a7,U+560e,U+5760,U+576f,U+5777,U+5830,U+58a9,U+5962,U+59e8,U+5a07,U+5a23,U+5a3c,U+5b5a,U+5bb5,U+5bc5,U+5bde,U+5c7f,U+5cb1,U+5ce8,U+5cea,U+5d29,U+5d4c,U+5e18,U+5f57,U+5f5d,U+5f87,U+5ff1,U+6016,U+601c,U+6064,U+6177,U+61d2,U+625b,U+62e3,U+62f1,U+634f,U+63a0,U+6401,U+6405,U+6495,U+64c2,U+6512,U+6577,U+6590,U+65a7,U+65a9,U+65f7,U+6627,U+6655,U+6714,U+6795,U+67d1,U+67ff,U+68b3,U+68d5,U+68d8,U+6930,U+6960,U+6977,U+69bb,U+69d0,U+6a31,U+6b7c,U+6bb4,U+6c22,U+6c72,U+6c79,U+6c7e,U+6c81,U+6c93,U+6ca5,U+6cbc,U+6ce3,U+6cfb,U+6d3c,U+6da9,U+6df3,U+6e2d,U+6eaf,U+6ec7,U+6f13,U+6f33,U+6f62,U+6fa1,U+7011,U+707c,U+708a,U+70c1,U+70d8,U+70eb,U+711a,U+7194,U+7281,U+7316,U+7357,U+7384,U+7405,U+742a,U+745b,U+7574,U+7578,U+75ea,U+7682,U+7792,U+77d7,U+77e9,U+77eb,U+77f6,U+780c,U+78c5,U+7941,U+79e4,U+7a1a,U+7a9c,U+7ad6,U+7b5d,U+7bf7,U+7c07,U+7c3f,U+7c9f,U+7ca5,U+7cdf,U+7e82,U+7eab,U+7ece,U+7eda,U+7f09,U+7f15,U+7f9e,U+7fdf,U+7fe9,U+803b,U+803d,U+80aa,U+80b4,U+813e,U+8155,U+817b,U+819d,U+821c,U+82b9,U+82df,U+82ef,U+8304,U+83b9,U+8446,U+853d,U+85af,U+85fb,U+8650,U+865e,U+86d9,U+86ee,U+8700,U+8862,U+889c,U+88d4,U+88f8,U+895f,U+8a79,U+8bb3,U+8bb6,U+8bc0,U+8beb,U+8bf5,U+8c23,U+8c79,U+8d1e,U+8dcb,U+8e29,U+8e44,U+8e81,U+8eac,U+8eaf,U+8f8d,U+9050,U+90f8,U+914b,U+948a,U+94be,U+94ee,U+950c,U+9540,U+962e,U+9647,U+9661,U+9699,U+96cf,U+9716,U+9761,U+97a0,U+97e7,U+9a7c,U+9a8f,U+9ae6,U+9cd6,U+9e26"}},{uri:Ipe,descriptors:{unicodeRange:"U+4fa3,U+4fae,U+4fd8,U+4fef,U+50a3,U+5189,U+5195,U+51db,U+51f3,U+51f9,U+5220,U+5228,U+5288,U+52ff,U+532e,U+533f,U+5351,U+53db,U+53ed,U+5450,U+5484,U+5490,U+54c9,U+54e9,U+5501,U+5507,U+5543,U+55d3,U+56a3,U+575e,U+589f,U+5984,U+59ec,U+5a04,U+5a36,U+5a77,U+5a9a-5a9b,U+5ab2,U+5ac2,U+5ad6,U+5bc7,U+5c2c,U+5c34,U+5c51,U+5cd9,U+5d0e,U+5deb,U+5e3c,U+5e87,U+5ed3,U+5f13,U+5f64,U+5fe1,U+606a,U+6096,U+60df,U+60f6,U+60f9,U+6151,U+620e,U+6241,U+6252,U+6273,U+627c,U+6289,U+62c2,U+62cc,U+62ef,U+6361,U+6363,U+63b7,U+63e3,U+6518,U+66ae,U+6756,U+6789,U+6813,U+6829,U+6862,U+6866,U+6893,U+6897,U+690e,U+6984,U+69cc,U+6a1f,U+6a44,U+6a59,U+6ba1,U+6c13,U+6c90,U+6ca6,U+6cbd,U+6ccc,U+6cd3,U+6cd7,U+6d4a,U+6d4f,U+6d5a,U+6d9f,U+6da1,U+6dcc,U+6ea5,U+6ee4,U+6ee6,U+6f2f,U+6f8e,U+701a,U+7095,U+709c,U+70af,U+70db,U+70e8,U+714e,U+715e,U+71a0,U+71ce,U+7235,U+7280,U+72d0,U+72f8,U+73ab,U+7410,U+745c,U+7480,U+74a7-74a8,U+74e3,U+75ae,U+75f9,U+76b1,U+76ce,U+7736,U+77e2-77e3,U+781a,U+789f,U+797a,U+79be,U+79c3,U+79c6,U+79f8,U+7a8d,U+7a98,U+7aa6,U+7aff,U+7b1b,U+7cd9,U+7d6e,U+7ede,U+7eee,U+7f00,U+7f24,U+7f2d,U+7fd8,U+800d,U+8116,U+8151,U+81b3,U+8205,U+82c7,U+82db,U+832c,U+8335,U+8339,U+8386,U+846b,U+8587,U+8611,U+8682,U+868a,U+868c,U+8774,U+88d8,U+88f4,U+8912,U+8b6c,U+8bbd,U+8c0e,U+8c41,U+8d26,U+8d3b-8d3c,U+8d50,U+8dea,U+8e35,U+8f99,U+8fe2,U+8fe9,U+9017,U+914c,U+916f,U+9175-9176,U+918b,U+94a0,U+94ae,U+94ce,U+94f2,U+951a,U+952f,U+9541,U+9640,U+9672,U+968b,U+96cd,U+96ef,U+9713,U+97ec,U+9885,U+9992,U+9a6d,U+9a79,U+9a85,U+9cbb,U+9cd7,U+9cde,U+9e93,U+9f9f"}},{uri:xpe,descriptors:{unicodeRange:"U+4e11,U+4ed7,U+4fcf,U+4fe9,U+4fed,U+50ac,U+50b2,U+5112,U+5180,U+5188,U+51f6,U+522e,U+5265,U+52cb,U+52df,U+5349,U+5367,U+5378,U+537f,U+5395,U+5398,U+53d4,U+543e,U+5440,U+5446,U+54b8,U+5565-5566,U+5580,U+55bb,U+56ca,U+572d,U+573e,U+574e,U+5782-5784,U+58f3,U+5938-5939,U+5948,U+594e,U+5a1c,U+5a74,U+5ae9,U+5b55,U+5b5c,U+5bb0,U+5bd3,U+5bf8,U+5c3f,U+5d14,U+5d2d,U+5df7,U+5dfe,U+5e05-5e06,U+5e1c,U+5e62,U+5e7b,U+5e7d,U+5ed6,U+5f2f,U+5f66,U+5f6c,U+5fa1,U+604b,U+609f,U+60a6,U+60e8,U+6101,U+6124,U+6127,U+6148,U+61be,U+6247,U+62d8,U+62da,U+633d,U+635e,U+6367,U+6380,U+638f,U+63a9,U+63fd,U+641c,U+64e6,U+655e,U+6572,U+6591,U+65a5,U+6691,U+6735,U+67a2-67a3,U+67ef,U+680b,U+6876,U+6905,U+6a0a,U+6a61,U+6b79,U+6bb7,U+6bbf,U+6c41,U+6c55,U+6c83,U+6c9b,U+6ca7,U+6cfc,U+6d46,U+6d51,U+6d74,U+6d9d,U+6daf,U+6dc0,U+6deb,U+6e17,U+6e24,U+6e89,U+6ea2,U+6ef4,U+6f6d,U+707f,U+70b3,U+70e4,U+70ef,U+710a,U+722c,U+725f,U+7261,U+72ee,U+72f1,U+730e,U+732b,U+7433,U+7538,U+75bc,U+7624,U+7709,U+7750,U+7779,U+7802,U+7898,U+78a7,U+78b1,U+78cb,U+78f7,U+7984,U+7a83,U+7aed,U+7b3c,U+7b4b,U+7c92,U+7c98,U+7ca4,U+7eb9,U+7ee3,U+7ef3,U+7ef5,U+7f05,U+7f55,U+7f62,U+7fc1,U+7fd4,U+7fe0,U+8042,U+806a,U+80a0,U+80a4,U+80c3,U+8102,U+8106,U+814a,U+8154,U+8247,U+8258,U+82cd,U+8328,U+832b,U+8389,U+83ca,U+845b,U+846c,U+84b8,U+8574,U+859b,U+8680,U+8695,U+86c7,U+8702,U+886c,U+8896,U+88b1,U+88e4,U+8bc8,U+8c10,U+8c26,U+8c28,U+8c2d,U+8d4c,U+8d63,U+8f67,U+8f74,U+8fc4,U+9006,U+9063,U+90a2,U+90b1,U+90c1,U+9177,U+9189,U+9493,U+949e,U+94fe,U+9610,U+961c,U+96a7,U+96fe,U+978d,U+97f5,U+9888,U+997c,U+9a84,U+9b3c,U+9b44-9b45,U+9b54,U+9e64,U+9f0e,U+9f9a"}},{uri:Cpe,descriptors:{unicodeRange:"U+4e19,U+4e38,U+4e53,U+4e7e,U+4e9f,U+4ec6,U+4f50,U+4fde,U+502a,U+5154,U+517d,U+51d1,U+51f0,U+5239,U+5256,U+52c9,U+52fe,U+5308,U+532a,U+535c,U+5384,U+53a2,U+53a8,U+53c9,U+53e0,U+5496,U+54ac,U+54c0,U+54c4,U+54e8,U+5561,U+5582,U+561b,U+5631,U+566a,U+5764,U+576a,U+5792,U+57ab,U+584c,U+5885,U+58f6,U+59a8,U+5acc,U+5bc2,U+5c38-5c39,U+5c60,U+5c6f,U+5c82,U+5c90,U+5d16,U+5dcd,U+5e37,U+5e90,U+5eb8,U+5f6a,U+5fcc,U+6012,U+6068,U+6073,U+607c,U+6094,U+6109,U+621a,U+626e,U+6284,U+62d0,U+62e6,U+62fe,U+6321,U+6328,U+632b,U+6349,U+6454,U+65ed,U+660f,U+6674,U+66a8,U+6749,U+674f,U+6760,U+67af,U+6850,U+6854,U+6869,U+68a8,U+68d2,U+68f5,U+6912,U+6b49,U+6b6a,U+6bef,U+6c28,U+6c5d,U+6c82,U+6cab,U+6cb8,U+6cc4,U+6cf5,U+6d47,U+6d78,U+6da4,U+6dc4,U+6dcb,U+6df9,U+6e0a,U+6e23,U+6e5b,U+6eb6,U+6f06,U+6f47,U+6f84,U+6f9c,U+6fd2,U+7076,U+70ac,U+7199,U+723d,U+72ac,U+72ed,U+7476,U+7529,U+752b,U+754f,U+7554,U+75d5,U+7626,U+76ef,U+7720,U+7766,U+7784,U+77ac,U+780d,U+7838,U+7845,U+786b,U+78b3,U+7978,U+79b9,U+79c9,U+79e7,U+7a3d,U+7a84,U+7a9f,U+7b0b,U+7b52,U+7c7d,U+7f1a,U+7fc5,U+7ff0,U+804a,U+8086-8087,U+808c,U+809a,U+80ba,U+810a,U+8180,U+818f,U+81c2,U+81ed,U+8231,U+8292,U+829c,U+82a6,U+82d1,U+8346,U+838e,U+839e,U+83c7,U+83f1,U+8403,U+840e,U+8513,U+857e,U+85e4,U+867e,U+871c,U+87ba,U+87f9,U+884d,U+8944,U+8a93,U+8c05,U+8d2c,U+8d2e,U+8d42-8d43,U+8dfb,U+8e22,U+8eba,U+8f69,U+8f9c,U+8fa3,U+8fa8,U+8fb1,U+900a,U+9038,U+903b,U+9042,U+904f,U+90b5,U+90dd,U+9102,U+9187,U+94a7,U+94c5,U+9523,U+95f8,U+95fd,U+960e,U+964b-964c,U+96c1,U+9709,U+971c,U+97ad,U+9882,U+9965,U+9976,U+9988,U+99a8,U+9a82,U+9a9a,U+9b41,U+9c8d,U+9e45,U+9e70,U+9e9f,U+9f3b,U+9f7f"}},{uri:Ape,descriptors:{unicodeRange:"U+4e08,U+4e18,U+4e1b,U+4e22,U+4e27,U+4e32,U+4e52,U+4e73,U+4ead,U+4ed4,U+4ed9,U+4ef0,U+4fa6,U+5076,U+5179,U+51bb,U+51c9,U+51ef,U+51fd,U+524a,U+526a,U+529d,U+52ab,U+5306,U+5339,U+53d9,U+540a,U+5410,U+541e,U+5439,U+54b1,U+54ed,U+5564,U+558a,U+55b7,U+5634,U+574a,U+5751,U+57a6,U+57cb,U+57d4,U+5824,U+582a,U+5835,U+5858,U+5893,U+58e4,U+5951,U+5986,U+59da,U+59fb,U+59ff,U+5a03,U+5a46,U+5ac1,U+5b5d,U+5bfa,U+5c18,U+5c3a,U+5c48,U+5c4f,U+5c61,U+5cb3,U+5d1b,U+5e15,U+5e3d,U+5e99,U+5e9e,U+5eca,U+5f0a,U+5f17-5f18,U+5f25,U+5f7c,U+5fcd,U+6028,U+60a0,U+60ac,U+60d1,U+614e,U+6155,U+6168,U+61c8,U+6208,U+6212,U+6251,U+629a-629b,U+62ab-62ac,U+62fc,U+6323,U+632a,U+63d2,U+643a,U+6491-6492,U+649e,U+64b0,U+64c5,U+659c,U+6614,U+662d,U+6664,U+6670,U+6676,U+6746,U+67cf,U+67d4,U+682a,U+6843,U+6846,U+68da,U+6b3a,U+6b67,U+6c27,U+6c5b,U+6c64,U+6c70,U+6caa,U+6cca,U+6ce1,U+6d12,U+6d45,U+6dd1,U+6dd8,U+6e34,U+6e7f,U+6ee5,U+6f02,U+7092,U+70c2,U+70e6,U+7115,U+7237,U+7272,U+727a,U+72c2,U+739b,U+73b2,U+743c,U+751c,U+758f,U+75b2,U+7686,U+76c6,U+76d2,U+76fc,U+775b,U+77a9,U+7816,U+788e,U+7897,U+78b0,U+79bd,U+7a0d,U+7a91,U+7a9d,U+7ae3,U+7bad,U+7cca,U+7d2b,U+7eb1,U+7f06,U+7f14,U+7f1d,U+7f50,U+7ffc,U+8036,U+80bf,U+80c1,U+80ce,U+80f8,U+8109,U+810f,U+8170,U+8179,U+819c,U+821f,U+8230,U+8236,U+8273,U+829d,U+82f9,U+8305,U+8350,U+83b2,U+83cc,U+8404,U+840d,U+8427,U+8482,U+8679,U+8854,U+886b,U+8bbc,U+8be6,U+8c31,U+8c6b,U+8d4b,U+8dcc,U+8e2a,U+8e48,U+8f90,U+8fb0,U+9022,U+903c,U+903e,U+9065,U+916c,U+917f,U+94a9,U+94c3,U+94dd,U+94ed,U+9510,U+953b,U+96c7,U+970d,U+9738,U+9877,U+987d,U+989c,U+98d8,U+9a70,U+9a91,U+9aa4,U+9b42,U+9b4f,U+9e2d,U+9e3f,U+9e7f,U+9f20"}},{uri:x1e,descriptors:{unicodeRange:"U+4e59,U+4ed3,U+4f0f,U+4f38,U+4f69,U+4fa7,U+4faf,U+4ff1,U+5077,U+5085,U+5144,U+5151,U+51af,U+51b6,U+51cc,U+523a,U+5251,U+5269,U+5272,U+52d8,U+5353,U+5389,U+53f9,U+5401,U+5415,U+541b,U+54f2,U+5524,U+554a,U+559d,U+5609,U+5740,U+575d,U+5806,U+5821,U+586b,U+5915,U+594f,U+5960,U+5999,U+59a5,U+59b9,U+59c6,U+59d1,U+59dc,U+5b5f,U+5b64,U+5b87,U+5bb4,U+5bbf,U+5c16,U+5c1d,U+5c3e,U+5c9a,U+5ca9,U+5cad,U+5cfb,U+5de1,U+5de7,U+5de9,U+5ef7,U+5f04,U+5f70,U+5f79,U+5fc6,U+602a,U+6050,U+6052,U+6070,U+6084,U+60b2,U+60dc,U+60e9,U+6167,U+6170,U+61c2,U+6270,U+6291,U+62b1,U+62bc,U+62dc,U+62df,U+62f3,U+6324,U+633a,U+6377,U+6398,U+63cf,U+640f,U+642c-642d,U+6458,U+6478,U+6500,U+654c,U+6566,U+658c,U+65c1,U+65cb,U+65e8,U+65ec,U+6696-6697,U+6734,U+679a,U+679d,U+67dc,U+67f3-67f4,U+680f,U+683d,U+684c,U+68af,U+699c,U+6bc1,U+6c0f,U+6c1b,U+6c57,U+6c6a,U+6d3d,U+6d6e,U+6d82,U+6db5,U+6dee,U+6e58,U+6eaa,U+6ecb,U+6ede,U+6ee9,U+6f0f,U+6f20,U+6f58,U+704c,U+7070,U+70b8,U+718a,U+7238,U+7262,U+7275,U+72b9,U+72d7,U+72e0,U+741b,U+7434,U+7483,U+74f6-74f7,U+75ab,U+764c,U+7761,U+7855,U+7891,U+78c1,U+79d2,U+7a00,U+7a3b,U+7c97,U+7ea4,U+7eb2,U+7ed2,U+7eea,U+7ef8,U+7f18,U+7fbd,U+8000,U+8010,U+8096,U+809d,U+80a9,U+817f,U+81e3,U+8206,U+8212,U+82ac,U+8302,U+8361,U+8377,U+83f2,U+8461,U+848b,U+84ec,U+8521,U+85aa,U+8870,U+8877,U+8881,U+888b,U+88ad,U+88c2,U+8986,U+8bd1,U+8bf1,U+8d24,U+8d2a,U+8d3e-8d3f,U+8d41,U+8d56,U+8d64,U+8d6b,U+8e0f,U+8f70,U+8f85,U+8f88,U+8fa9,U+9003,U+901d,U+90b9,U+90ce,U+94a6,U+94f8,U+9505,U+95ea,U+95ef,U+95f2,U+95f9,U+9601,U+9605,U+9634,U+966a,U+9677,U+9690,U+9694,U+96d5,U+971e,U+9896-9897,U+9972,U+9a71,U+9a76,U+9a7e,U+9e1f,U+9e23"}},{uri:Mpe,descriptors:{unicodeRange:"U+4e01,U+4e43,U+4ea6,U+4ef2,U+4eff,U+4f26,U+4f2a,U+4f2f,U+4f5b,U+4fa8,U+4fca,U+4fd7,U+5021,U+504f,U+5141,U+51c0,U+51dd,U+51e4,U+51ed,U+5200,U+5237,U+5427,U+5448,U+54a8,U+5706,U+5708,U+5723,U+575b,U+57c3,U+5899,U+58a8,U+58c1,U+5976,U+5988,U+59bb,U+59d0,U+59d3,U+5a18,U+5a31,U+5a92,U+5b54,U+5b85,U+5baa-5bab,U+5bc4,U+5bd2,U+5be8,U+5bff,U+5c65,U+5d07,U+5e1d,U+5e78,U+5e7c,U+5f03,U+5f1f,U+5f39,U+5f6d,U+5f92,U+5faa,U+5fbd,U+5fe7,U+5ffd,U+60a8,U+60ef,U+6108,U+6162,U+622a,U+6234,U+626b,U+626d,U+62c6,U+62d2,U+62d4,U+62d6,U+62e8,U+6316,U+6355,U+63ed,U+6447,U+64a4,U+65f1,U+6606,U+6628,U+664b,U+6668,U+6682,U+66f9,U+66fc,U+66ff,U+6717,U+6740,U+676d,U+67aa,U+67ec,U+67f1,U+6842,U+6851,U+695a,U+6982,U+6a2a,U+6b20,U+6b23,U+6b32,U+6b96,U+6bc5,U+6beb,U+6c60,U+6c9f,U+6cea,U+6cf3,U+6d1e,U+6d53,U+6d66,U+6d69,U+6d8c,U+6d9b,U+6db2,U+6de1,U+6dfb,U+6e14,U+6ed1,U+6eda,U+6ee8,U+6f2b,U+706d,U+7089,U+708e,U+70ad-70ae,U+70e7,U+7126,U+714c,U+71c3,U+71d5,U+7206,U+7259,U+731b,U+73a9,U+73bb,U+74dc,U+7532,U+7545,U+755c,U+75c7,U+7687,U+76d7,U+76f2,U+788d,U+78e8,U+79e6,U+79e9,U+7a3f,U+7a46,U+7a97,U+7af9,U+7bee,U+7c4d,U+7c89,U+7cd6,U+7eb5,U+7ebd,U+7ed8,U+8017,U+8033,U+80c0,U+80de,U+80f6,U+8138,U+817e,U+81a8,U+820d,U+827e,U+82b3,U+82d7,U+83b1,U+84c4,U+84dd,U+8584,U+864e,U+865a,U+866b,U+86cb,U+88d5,U+89e6,U+8bca,U+8bde,U+8bfa,U+8c0a,U+8c37,U+8c46,U+8c6a,U+8c8c,U+8d1d,U+8d29,U+8d4f,U+8d54,U+8d5a,U+8d60,U+8d62,U+8f7f,U+8f96,U+8f9e-8f9f,U+8fc1,U+8fdf,U+8fea,U+8ff7,U+9012,U+906d,U+9075,U+90a6,U+90bb,U+90ca,U+9178,U+9192,U+91ca,U+94bb,U+94dc,U+94fa,U+9501,U+950b,U+9521,U+955c,U+963b,U+9655,U+9675-9676,U+9887,U+9891,U+9971,U+9a97,U+9ece,U+9ed8"}},{uri:Rpe,descriptors:{unicodeRange:"U+4e1d,U+4e39,U+4e4c,U+4e4f,U+4e54,U+4e58,U+4e95,U+4ea1,U+4eab,U+4eae,U+4ec1,U+4f10,U+4f19,U+4f30,U+4f34,U+4fb5,U+503e,U+518c,U+5192,U+51a0,U+51ac,U+51b0,U+51e1,U+5211,U+5242,U+52a3,U+52b2,U+52c3,U+52c7,U+52d2,U+52e4,U+5377,U+539a,U+53a6,U+53e5,U+5417,U+5510,U+552f,U+5531,U+574f-5750,U+5761,U+5851,U+5854,U+58ee,U+593a,U+5949,U+5954,U+5a5a,U+5b8b,U+5bbd,U+5c04,U+5c0a,U+5c4b,U+5ce1,U+5cf0,U+5e10,U+5e8a,U+5e9f,U+5ec9,U+5f31,U+5f84,U+5fd8-5fd9,U+5fe0,U+6015,U+6062,U+6069,U+6076,U+6089,U+60a3,U+60ca,U+620f,U+624e,U+6263,U+6298,U+62a2,U+62bd,U+6311,U+6350,U+6389,U+638c,U+63f4,U+6446,U+644a,U+6469,U+64cd,U+654f,U+6562,U+656c,U+65d7,U+65e6,U+65fa,U+660c,U+6653,U+66b4,U+670b,U+672b,U+676f-6770,U+6881,U+6885,U+68a6,U+68cb,U+68ee,U+6b8a,U+6c88-6c89,U+6cc9,U+6ce5,U+6d01,U+6d17,U+6d1b,U+6d59,U+6d6a,U+6da8,U+6df7,U+6e10,U+6e20-6e21,U+6f5c,U+706f,U+70bc,U+719f,U+7267,U+732a,U+73cd,U+7518,U+756a,U+7586,U+7591,U+75db,U+76c8,U+76d0,U+76d6,U+76d8,U+76df,U+76fe,U+77db,U+7801,U+786c,U+795d,U+7965,U+79cb,U+7a77,U+7a7f,U+7aef,U+7b11,U+7bb1,U+7bc7,U+7ea0,U+7eaf,U+7ed5,U+7edc,U+7f13,U+7f29,U+7f34,U+7f8a,U+7ffb,U+8015,U+8058,U+805a,U+8083,U+80af,U+80c6,U+80cc,U+811a,U+8150,U+82e5,U+8336,U+8352,U+83ab,U+8428,U+8463,U+852c,U+8861,U+89c8,U+8bcd,U+8bd7,U+8bda,U+8be2,U+8bef,U+8bf8,U+8c0b,U+8c13,U+8d34,U+8d3a,U+8d74,U+8d76,U+8da3,U+8dd1,U+8ddd,U+8ddf,U+8df3,U+8f68,U+8f6f,U+8f7d,U+8f91,U+8f9b,U+8fbd,U+8fc8,U+8fd4,U+8feb,U+8ff9,U+900f,U+9057,U+907f-9080,U+90d1,U+90ed,U+91ce,U+9519,U+9526,U+95ed,U+9614,U+9635,U+9644,U+9686,U+96c5,U+96ea,U+9707,U+9732,U+9759,U+978b,U+9876,U+9881,U+9910,U+996e,U+9970,U+9c81,U+9e21,U+9ebb,U+9f84"}},{uri:kpe,descriptors:{unicodeRange:"U+4e3d,U+4e4e,U+4e71,U+4e8f,U+4ed8,U+4eea,U+4f0a,U+4f0d,U+4f11,U+4f1f,U+4f24,U+4f3c,U+4f73,U+4fc4,U+500d,U+5012,U+501f,U+503a,U+505c,U+507f,U+50a8,U+514d,U+5178,U+517c,U+51b2,U+51b7,U+520a,U+5238,U+523b,U+52b1,U+535a,U+5371,U+5385,U+53eb-53ec,U+53f3,U+53f6,U+5409,U+542b,U+542f,U+5434,U+5462,U+5473,U+547c,U+54c8,U+54ea,U+56fa,U+5733,U+5757,U+5766,U+5802,U+585e,U+590f,U+591c,U+591f,U+5947,U+594b,U+5987,U+5a01,U+5b59,U+5b63,U+5b88,U+5b97,U+5b9c,U+5bbe,U+5bfb,U+5c01,U+5c1a,U+5c24,U+5c3c,U+5c97,U+5c9b,U+5cb8,U+5de6,U+5e01,U+5e2e,U+5e45,U+5e55,U+5e84,U+5ef6,U+5f02,U+5f52,U+5f69,U+5f7b,U+5f90,U+5fae,U+6000,U+600e,U+6025,U+60e0,U+6276,U+6297,U+62b5,U+62cd,U+62d3,U+62e5,U+62e9,U+62ff,U+6302,U+632f,U+63e1,U+6444,U+64ad,U+653b,U+6551,U+6563,U+65a4,U+65e7,U+6620,U+667a,U+66f2,U+671d,U+6731,U+6742,U+675f,U+6768,U+677e-677f,U+6790,U+67b6,U+67d3,U+6863,U+68b0,U+68c9,U+690d,U+6b8b,U+6bcd,U+6bd2,U+6bd5,U+6c38,U+6c61,U+6cbf,U+6cdb,U+6cf0,U+6d2a,U+6d89,U+6da6,U+6f6e,U+6fb3,U+7075,U+707e,U+70df,U+7164,U+7236,U+725b,U+7389,U+73e0,U+745e,U+74e6,U+751a,U+7537,U+75be,U+76ae,U+76db,U+793c,U+7956,U+7981,U+79d8,U+79df,U+79fb,U+7adf,U+7ae5,U+7b14,U+7b26,U+7b54,U+7b79,U+7d2f,U+7eb8,U+7eba,U+7ec6,U+7ee9,U+7eff,U+7f5a,U+7f6a,U+7f72,U+8089,U+80a5,U+80e1,U+8111,U+8131,U+821e,U+822c,U+8270,U+8499,U+8651,U+867d,U+8840,U+8857,U+8863,U+88c1,U+89c9,U+89d2,U+8a89,U+8bed,U+8bfe,U+8c01,U+8c22,U+8d21,U+8d25,U+8d2f,U+8d5e,U+8d75,U+8d8b,U+8dc3,U+8de8,U+8df5,U+8f6e,U+8f86,U+8f89,U+8fc5,U+8ff0,U+8ffd,U+9014,U+904d,U+90ae,U+9274,U+949f,U+952e,U+969c,U+96c4,U+96e8,U+96f6-96f7,U+97e9,U+987f,U+996d,U+9a7b,U+9aa8,U+9c7c,U+9c9c,U+9e4f,U+9f13,U+9f50"}},{uri:Lpe,descriptors:{unicodeRange:"U+4e13,U+4e16,U+4e1c,U+4e24,U+4e3e,U+4e49,U+4e61,U+4e66,U+4e89,U+4e8c,U+4e94,U+4e9b,U+4ea4,U+4eac,U+4ebf,U+4eca,U+4ef6-4ef7,U+4efb,U+4f18,U+4f20,U+4f46,U+4f7f,U+4fe1,U+503c,U+505a,U+5146,U+5148,U+515a,U+5171,U+5177,U+519b,U+51b3,U+51c6,U+51e0,U+5212,U+521b,U+522b,U+529e,U+52bf,U+534e-534f,U+5355,U+5357,U+5382,U+539f,U+53bb,U+53bf,U+53c2,U+53c8,U+53ca,U+53d6-53d8,U+53e3,U+53ea,U+53f0,U+540d,U+5411,U+56db,U+56de,U+56e0,U+56e2,U+578b,U+57ce,U+57fa,U+589e,U+5904,U+5934,U+5982,U+5b89,U+5b8c,U+5bfc,U+5c06,U+5c11,U+5c40,U+5c71,U+5e38,U+5e72,U+5e76,U+5e7f,U+5e94,U+5e9c,U+5f0f,U+5f15,U+5f20,U+5f3a,U+5f62,U+5f88,U+5fc5,U+5fd7,U+5feb,U+601d,U+6027,U+60c5,U+60f3,U+610f,U+6216,U+6218,U+624b,U+624d,U+6279,U+628a,U+6295,U+6301,U+6307,U+636e,U+63a5,U+63a8,U+652f,U+6536,U+653e,U+6548,U+6559,U+6570,U+65bd,U+65e0,U+6602,U+660e,U+6613,U+66f4,U+6700,U+670d,U+671f,U+672f,U+6743,U+674e,U+6751,U+6761,U+6784,U+6797,U+679c,U+67e5,U+6807,U+6837,U+683c,U+6b21,U+6b63-6b65,U+6bcf,U+6bd4,U+6c42,U+6c5f,U+6ca1,U+6cbb,U+6d3b,U+6d41,U+6d88,U+6df1,U+70b9,U+7136,U+7269,U+7279,U+7531,U+754c,U+767e,U+76ca,U+76f8,U+770b,U+7740,U+7814,U+79ef,U+7a0b,U+7a0e,U+7a76,U+7b80,U+7cbe,U+7cfb,U+7e41,U+7ea7,U+7ec4,U+7ec7,U+7ed3,U+7ed9,U+7edf,U+7f8e,U+8001,U+804c,U+8054,U+80b2,U+81f3,U+8425,U+8868,U+88ab,U+897f,U+89c1-89c2,U+89c4,U+89c6,U+89e3,U+8ba1,U+8ba4,U+8bae,U+8bb0,U+8bba,U+8bc1,U+8c03,U+8d28,U+8d39,U+8def,U+8f66,U+8f6c,U+8fd0-8fd1,U+9020,U+9053,U+90a3,U+90fd,U+91cc,U+9500,U+9547,U+95e8,U+95f4,U+961f,U+9645,U+9662,U+96be,U+96c6,U+9700,U+9769,U+97e6,U+9875,U+9879,U+9886,U+9898,U+98ce,U+9996,U+2b5af,U+2cc56,U+2e9f5,U+30edd-30ede"}},{uri:Npe,descriptors:{unicodeRange:"U+4e03,U+4e30,U+4e34,U+4e45,U+4e60,U+4e70,U+4e88,U+4e91-4e92,U+4ea9,U+4eb2,U+4ec0,U+4ecb,U+4ecd,U+4ee4,U+4fee,U+5019,U+5047,U+50cf,U+5145,U+516d,U+5170,U+5175,U+5199,U+51cf,U+51fb,U+521a,U+5224,U+5267,U+52aa,U+5347-5348,U+534a,U+5356,U+5361,U+536b,U+5370,U+538b,U+53e4,U+53e6,U+5403,U+5426,U+5428,U+542c,U+5438,U+5668,U+56ed,U+56f4,U+56fe,U+57df,U+592a,U+5957,U+5b69,U+5b81,U+5b8f,U+5b98,U+5b9d,U+5ba1,U+5ba4,U+5bb3,U+5bc6,U+5bdf,U+5c3d,U+5c5e,U+5c81,U+5ddd,U+5de8,U+5dee,U+5e0c,U+5e86,U+5e8f,U+5e93,U+5e95,U+5e97,U+5ea7,U+5ead,U+5eb7,U+5f55,U+5f81,U+5f85,U+5ff5,U+6001,U+613f,U+6258,U+6267,U+6269,U+626c,U+627e,U+62db,U+62ec,U+6325,U+635f,U+6362,U+6388,U+6392,U+63a2,U+63a7,U+63aa,U+641e,U+6545,U+6597,U+65e2,U+65e9,U+661f,U+665a,U+666e-666f,U+66fe,U+6728,U+67d0,U+6811,U+6838,U+6865,U+697c,U+6b22,U+6b27,U+6b4c,U+6b62,U+6b66,U+6b7b,U+6bdb,U+6c47,U+6c49,U+6c7d,U+6c99,U+6cfd,U+6d0b,U+6d25,U+6d32,U+6d3e,U+6d4b,U+6e29,U+6e56,U+6e7e,U+6f14,U+6fc0,U+706b,U+70c8,U+7247,U+72af,U+72b6,U+72ec,U+732e,U+73ed,U+7403,U+7533,U+753b,U+7559,U+7565,U+7597,U+767b,U+773c,U+7763,U+77ed,U+77ff,U+7968,U+798f,U+79bb,U+79c0-79c1,U+7ad9,U+7ae0,U+7b51,U+7b7e,U+7cae,U+7d22,U+7ea2,U+7eb3,U+7eb7,U+7ec3,U+7ec8,U+7ecd,U+7edd,U+7efc,U+7f16,U+7f3a,U+7f51,U+7f57,U+7f6e,U+80dc,U+822a,U+8239,U+826f,U+82cf,U+82e6,U+8349,U+8363,U+83dc,U+8457,U+85cf,U+878d,U+8865,U+8a00,U+8b66,U+8ba2,U+8ba8,U+8bad,U+8bb2,U+8bc9,U+8bd5,U+8bfb,U+8d2b,U+8d35,U+8d37,U+8f7b,U+8f93,U+8fce,U+8fdd,U+9000-9002,U+9010,U+9047,U+9093,U+9152,U+9488,U+94a2,U+9633,U+9636,U+963f,U+9646,U+9648,U+964d,U+9664,U+9669,U+9760,U+97f3,U+987a,U+987e,U+9884,U+98de,U+9986,U+9ed1"}},{uri:Ope,descriptors:{unicodeRange:"U+4e14,U+4e25,U+4e48,U+4e50,U+4e5d,U+4e9a,U+4ec5,U+4efd,U+4f17,U+4f4e-4f4f,U+4f55,U+4f59,U+4f60,U+4f8b,U+4f9b,U+4f9d,U+4fbf,U+4fc3,U+5065,U+513f,U+5149,U+514b,U+516b,U+5174,U+517b,U+518d,U+51b5,U+5207,U+5217-5219,U+521d,U+526f,U+529f,U+52a9,U+52b3,U+5305,U+533b,U+5343,U+5360,U+5373-5374,U+5386,U+53cb-53cd,U+53f2,U+53f7,U+544a,U+5468,U+547d,U+54cd,U+552e,U+5584,U+56f0,U+571f,U+5747,U+575a,U+57f9,U+5883,U+58eb,U+58f0,U+5907,U+590d,U+592e,U+5931,U+5956,U+5965,U+5973,U+5979,U+59cb,U+5b57-5b58,U+5b83,U+5ba2-5ba3,U+5bb9,U+5bcc,U+5c42,U+5c45,U+5c4a,U+5dde,U+5df1,U+5df4,U+5e03,U+5e08,U+5e26,U+5e2d,U+5f71,U+5f80,U+5f8b,U+5fb7,U+606f,U+611f,U+6237,U+623f,U+6253,U+627f,U+6293,U+62a4,U+62c5,U+62c9,U+6309,U+6574,U+6599,U+65ad,U+65af,U+65c5,U+65cf,U+6625,U+663e,U+671b,U+672a,U+6750,U+6781,U+6821,U+6839,U+6848,U+68c0,U+6a21,U+6b3e,U+6bb5,U+6c14,U+6cb3,U+6cb9,U+6ce8,U+6e05,U+6e2f,U+6e38,U+6e90,U+6ee1,U+70ed,U+7167,U+7231,U+7248,U+724c,U+7387,U+738b,U+73af,U+7530,U+75c5,U+767d,U+76d1,U+76f4,U+771f,U+77e5,U+77f3,U+7834,U+7840,U+786e,U+793a,U+795e,U+79f0,U+7a33,U+7a7a,U+7a81,U+7ade,U+7b56,U+7b97,U+7c73,U+7c7b,U+7d20,U+7d27,U+7ea6,U+7eaa,U+7ebf,U+7ee7,U+7eed,U+7ef4,U+7fa4,U+8003,U+80a1,U+81f4,U+8272,U+827a,U+8282,U+82b1,U+82f1,U+8303,U+836f,U+83b7,U+843d,U+88c5,U+8ba9,U+8baf,U+8bb8,U+8bbf,U+8bc4,U+8bc6,U+8bdd,U+8be5,U+8bf7,U+8c08,U+8c61,U+8d1f,U+8d22-8d23,U+8d27,U+8d2d,U+8d38,U+8d5b,U+8d70,U+8d85,U+8d8a,U+8db3,U+8eab,U+8f83,U+8fb9,U+8fdc,U+8fde,U+9009,U+901f,U+914d,U+91c7,U+94b1,U+94c1,U+94f6,U+95fb,U+9632,U+9650,U+968f,U+9752,U+975e,U+987b,U+989d,U+98df,U+9999,U+9a6c,U+9a8c,U+9ec4,U+9feb-9fec"}},{uri:Ppe,descriptors:{unicodeRange:"U+98fb-990c,U+990e-990f,U+9911-992d,U+992f-9953,U+9956-9962,U+9964,U+9966,U+9973,U+9978-9979,U+997b,U+997e,U+9982-9983,U+9989,U+998c,U+998e,U+999a-99a4,U+99a6-99a7,U+99a9-99c8"}},{uri:Fpe,descriptors:{unicodeRange:"U+8e4c-8e50,U+8e53-8e58,U+8e5a-8e65,U+8e67-8e68,U+8e6a-8e6b,U+8e6e,U+8e71,U+8e73,U+8e75,U+8e77-8e7b,U+8e7d-8e7e,U+8e80,U+8e82-8e84,U+8e86,U+8e88-8e8e,U+8e91-8e93,U+8e95-8e9b,U+8e9d,U+8e9f-8eaa,U+8ead-8eae,U+8eb0-8eb1,U+8eb3-8eb9,U+8ebb-8ecd,U+8ecf-8f02"}},{uri:Bpe,descriptors:{unicodeRange:"U+2e3a,U+3001-3002,U+3008-3011,U+3014-3017,U+301d-301f,U+4dae,U+4e00,U+4e07,U+4e09-4e0b,U+4e0d-4e0e,U+4e1a,U+4e2a,U+4e2d,U+4e3a-4e3b,U+4e4b,U+4e5f,U+4e86,U+4e8b,U+4e8e,U+4ea7,U+4eba,U+4ece,U+4ed1,U+4ed6,U+4ee3,U+4ee5,U+4eec,U+4f01,U+4f1a,U+4f4d,U+4f53,U+4f5c,U+4fdd,U+5143,U+5165,U+5168,U+516c,U+5173,U+5176,U+5185,U+519c,U+51fa,U+5206,U+5229,U+5230,U+5236,U+524d,U+529b,U+52a0-52a1,U+52a8,U+5316-5317,U+533a,U+5341,U+5362,U+53d1,U+53ef,U+53f8,U+5404,U+5408,U+540c,U+540e,U+5458,U+548c,U+54c1,U+54e5,U+5546,U+559c,U+56fd,U+5728,U+5730,U+573a,U+5916,U+591a,U+5927,U+5929,U+592b,U+597d,U+59d4,U+5b50,U+5b66,U+5b9a,U+5b9e,U+5bb6,U+5bf9,U+5c0f,U+5c14,U+5c31,U+5c55,U+5de5,U+5df2,U+5e02,U+5e73-5e74,U+5ea6,U+5efa,U+5f00,U+5f53,U+5f97,U+5fc3,U+603b,U+6210-6211,U+6240,U+6280,U+62a5,U+63d0,U+6539,U+653f,U+6587,U+65b0,U+65b9,U+65e5,U+65f6,U+662f,U+6708-6709,U+672c,U+673a,U+675c,U+6765,U+6c11,U+6c34,U+6cd5,U+6ce2,U+6d4e,U+6d77,U+73b0,U+7406,U+751f,U+7528,U+7535,U+7684,U+76ee,U+793e,U+79cd,U+79d1,U+7acb,U+7b2c,U+7b49,U+7ba1,U+7ecf,U+8005,U+800c,U+80fd,U+81ea,U+884c,U+8981,U+8bbe,U+8bf4,U+8d44,U+8d77,U+8fbe,U+8fc7,U+8fd8-8fd9,U+8fdb,U+901a,U+90e8,U+91cd,U+91cf,U+91d1,U+9485,U+957f,U+95ee,U+9762,U+9ad8,U+9ea6,U+9f99,U+9fcf,U+9fd4,U+9fed,U+fe10-fe19,U+fe30-fe31,U+fe33-fe44,U+ff01,U+ff0c,U+ff1f,U+2b4e7,U+2b7f7,U+2b7fc,U+2cb2d,U+2cb3b,U+2cb4a,U+2cb5b,U+2cb73"}},{uri:zpe,descriptors:{unicodeRange:"U+6490,U+6493-6494,U+6497-6498,U+649a-649d,U+649f-64a3,U+64a5-64a8,U+64aa-64ab,U+64af,U+64b1-64b4,U+64b6,U+64b9,U+64bb,U+64bd-64bf,U+64c1,U+64c3-64c4,U+64c6-64cc,U+64cf,U+64d1,U+64d3-64d6,U+64d9-64dd,U+64df-64e1,U+64e3,U+64e5,U+64e7-64ff,U+6501-6508,U+650a-6511,U+6513-6517,U+6519-6524,U+6526-652a,U+652c-652d,U+6530-6533,U+6537,U+653a,U+653c-653d,U+6540-6544,U+6546-6547,U+654a-654b,U+654d-654e,U+6550,U+6552-6554,U+6557-6558,U+655a,U+655c,U+655f-6561,U+6564-6565,U+6567-6568"}},{uri:Hpe,descriptors:{unicodeRange:"U+9695-9696,U+969a-969b,U+969d-96a6,U+96a8-96af,U+96b1-96b2,U+96b4-96b5,U+96b7-96b8,U+96ba-96bb,U+96bf,U+96c2-96c3,U+96c8,U+96ca-96cb,U+96d0-96d1,U+96d3-96d4,U+96d6-96df,U+96e1-96e7,U+96eb-96ee,U+96f0-96f2,U+96f4-96f5,U+96f8,U+96fa-96fd,U+96ff,U+9702-9703,U+9705,U+970a-970c,U+9710-9712,U+9714-9715,U+9717-971b,U+971d,U+971f-9729,U+972b-972c,U+972e-972f,U+9731,U+9733-9737,U+973a-973d,U+973f-9751,U+9754-9755,U+9757-9758,U+975a,U+975c-975d,U+975f,U+9763-9764,U+9766-9768,U+976a-9770"}},{uri:Vpe,descriptors:{unicodeRange:"U+6af0-6b1f,U+6b25-6b26,U+6b28-6b31,U+6b33-6b36,U+6b38,U+6b3b-6b3d,U+6b3f-6b42,U+6b44-6b45,U+6b48,U+6b4a-6b4b,U+6b4d-6b58,U+6b5a-6b61,U+6b68-6b69,U+6b6b-6b78,U+6b7a,U+6b7d-6b80,U+6b85,U+6b88,U+6b8c,U+6b8e-6b91,U+6b94-6b95,U+6b97-6b99,U+6b9c-6ba0,U+6ba2-6ba9,U+6bab-6bb2,U+6bb6,U+6bb8-6bba"}},{uri:$pe,descriptors:{unicodeRange:"U+430e-439a,U+29e8a,U+29ec4,U+29edb,U+29ee9,U+29f7e,U+29f83,U+29f8c,U+29fce,U+2a01a,U+2a02f,U+2a082,U+2a0f9,U+2a190,U+2a38c"}},{uri:Gpe,descriptors:{unicodeRange:"U+92ef-933d,U+933f-9369,U+936b-9388"}},{uri:Xpe,descriptors:{unicodeRange:"U+4512-458d,U+2b300,U+2b363,U+2b36f,U+2b372,U+2b37d,U+2b404,U+2b410,U+2b413,U+2b461,U+2b4ef,U+2b4f6,U+2b4f9,U+2b50d-2b50e,U+2b536,U+2b5ae,U+2b5b3,U+2b5e7,U+2b5f4,U+2b61c-2b61d,U+2b626-2b628,U+2b62a,U+2b62c,U+2b695-2b696,U+2b6ad,U+2b6ed"}},{uri:jpe,descriptors:{unicodeRange:"U+88bd-88c0,U+88c3-88c4,U+88c7-88c8,U+88ca-88cd,U+88cf-88d1,U+88d3,U+88d6-88d7,U+88da-88de,U+88e0-88e1,U+88e6-88e7,U+88e9-88ef,U+88f2,U+88f5-88f7,U+88fa-88fb,U+88fd,U+88ff-8901,U+8903-8909,U+890b-890f,U+8911,U+8914-8918,U+891c-8920,U+8922-8924,U+8926-8929,U+892c-892f,U+8931-8933,U+8935,U+8937-8940,U+8942-8943,U+8945-895d,U+8960-8965,U+8967-897a,U+897c-897e,U+8980,U+8982,U+8984-8985"}},{uri:M1e,descriptors:{unicodeRange:"U+4b0b-4ba0"}},{uri:Ype,descriptors:{unicodeRange:"U+7179,U+717b-717c,U+717e-7183,U+7185-7189,U+718b-718e,U+7190-7193,U+7195-7197,U+719a-719e,U+71a1-71a7,U+71a9-71ab,U+71ad-71b2,U+71b4,U+71b6-71b8,U+71ba-71c2,U+71c4-71cd,U+71cf-71d3,U+71d6-71df,U+71e1-71e4,U+71e6,U+71e8-71ed,U+71ef-71f8,U+71fa-7205,U+7207-721c,U+721e-7227,U+7229,U+722b,U+722d"}},{uri:Wpe,descriptors:{unicodeRange:"U+982e-9874,U+988b,U+988e,U+9892,U+9895,U+9899,U+98a3,U+98a8-98cd,U+98cf-98d0,U+98d4,U+98d6-98d7,U+98db-98dd,U+98e0-98e6,U+98e9-98fa"}},{uri:Kpe,descriptors:{unicodeRange:"U+7c14-7c15,U+7c17-7c1e,U+7c20-7c25,U+7c28-7c29,U+7c2b-7c37,U+7c39-7c3e,U+7c42-7c4c,U+7c4e-7c72,U+7c75-7c7a,U+7c7e-7c88,U+7c8a-7c90,U+7c93-7c94,U+7c96,U+7c99-7c9b,U+7ca0-7ca1,U+7ca3,U+7ca6-7ca9,U+7cab-7cad,U+7caf-7cb0,U+7cb4-7cb8,U+7cba-7cbb,U+7cbf-7cc0,U+7cc2-7cc4,U+7cc6,U+7cc9,U+7ccb,U+7cce-7cd4"}},{uri:Zpe,descriptors:{unicodeRange:"U+7d95-7da5,U+7da7-7dad,U+7daf-7e2a"}},{uri:qpe,descriptors:{unicodeRange:"U+4a78-4b0a"}},{uri:Qpe,descriptors:{unicodeRange:"U+9b30-9b31,U+9b33-9b3a,U+9b3d-9b40,U+9b46,U+9b4a-9b4c,U+9b4e,U+9b50,U+9b52-9b53,U+9b55-9bcf"}},{uri:Jpe,descriptors:{unicodeRange:"U+6a4b-6a4f,U+6a51-6a57,U+6a5a,U+6a5c-6a60,U+6a62-6a64,U+6a66-6a70,U+6a72-6a78,U+6a7a-6a7b,U+6a7d-6a7f,U+6a81-6a83,U+6a85-6a8d,U+6a8f,U+6a92-6a96,U+6a98-6a9f,U+6aa1-6aa8,U+6aaa,U+6aad-6aef"}},{uri:eUe,descriptors:{unicodeRange:"U+99c9-9a53"}},{uri:tUe,descriptors:{unicodeRange:"U+8550-8555,U+8557-8558,U+855a-855d,U+855f-8563,U+8565-8567,U+8569-8571,U+8573,U+8575-8578,U+857c-857d,U+857f-8583,U+8586,U+8588-858e,U+8590-859a,U+859d-85a3,U+85a5-85a7,U+85a9,U+85ab-85ad,U+85b1-85b6,U+85b8,U+85ba-85c0,U+85c2-85c8,U+85ca-85ce,U+85d1-85d2,U+85d4,U+85d6-85db,U+85dd-85e3,U+85e5-85e8,U+85ea-85fa,U+85fc-85fe,U+8600-8603"}},{uri:nUe,descriptors:{unicodeRange:"U+6fb2,U+6fb4-6fb5,U+6fb7-6fb8,U+6fba-6fbf,U+6fc1,U+6fc3-6fc8,U+6fca-6fd0,U+6fd3-6fdd,U+6fdf,U+6fe2-6fed,U+6ff0-7010,U+7012-7019,U+701c-7022,U+7024-7034,U+7036-7038,U+703a-704b,U+704d-704e,U+7050-7053"}},{uri:iUe,descriptors:{unicodeRange:"U+4ba1-4c2c"}},{uri:sUe,descriptors:{unicodeRange:"U+9a54-9a6b,U+9a72,U+9a83,U+9a89,U+9a8d-9a8e,U+9a94-9a95,U+9a99,U+9aa6,U+9aa9-9aaf,U+9ab2-9ab5,U+9ab9,U+9abb,U+9abd-9abf,U+9ac3-9ac4,U+9ac6-9aca,U+9acd-9ad0,U+9ad2,U+9ad4-9ad7,U+9ad9-9ade,U+9ae0,U+9ae2-9ae5,U+9ae7-9aea,U+9aec,U+9aee,U+9af0-9af8,U+9afa,U+9afc-9b02,U+9b04-9b07,U+9b09-9b0e,U+9b10-9b12,U+9b14-9b1e,U+9b20-9b22,U+9b24-9b2e"}},{uri:rUe,descriptors:{unicodeRange:"U+9d1a-9da1"}},{uri:oUe,descriptors:{unicodeRange:"U+9e13-9e1e,U+9e24,U+9e27,U+9e2e,U+9e30,U+9e34,U+9e3b-9e3c,U+9e40,U+9e4d,U+9e50,U+9e52-9e54,U+9e56,U+9e59,U+9e5d,U+9e5f-9e62,U+9e65,U+9e6e-9e6f,U+9e72,U+9e74-9e7d,U+9e80-9e81,U+9e83-9e86,U+9e89-9e8a,U+9e8c-9e91,U+9e94-9e9c,U+9e9e,U+9ea0-9ea5,U+9ea7-9eb3,U+9eb5-9eb7,U+9eb9-9eba,U+9ebc,U+9ebf-9ec3,U+9ec5-9ec8,U+9eca-9ecc,U+9ed0,U+9ed2-9ed3,U+9ed5-9ed7,U+9ed9-9eda,U+9ede,U+9ee1,U+9ee3-9ee4,U+9ee6,U+9ee8,U+9eeb-9eee,U+9ef0-9ef8"}},{uri:aUe,descriptors:{unicodeRange:"U+8b1c-8b25,U+8b27-8b65,U+8b67-8b6b,U+8b6d-8b9f,U+8bac,U+8bb1,U+8bbb,U+8bc7,U+8bd0"}},{uri:lUe,descriptors:{unicodeRange:"U+4cad-4d2f"}},{uri:cUe,descriptors:{unicodeRange:"U+9c4b-9c7b,U+9c7d-9c7e,U+9c80,U+9c83-9c84,U+9c89-9c8a,U+9c8c,U+9c8f,U+9c93,U+9c96-9c99,U+9c9d,U+9caa,U+9cac,U+9caf,U+9cb9,U+9cbe-9cc2,U+9cc8-9cc9,U+9cd1-9cd2,U+9cda-9cdb,U+9ce0-9ce1,U+9ce3-9d19"}},{uri:uUe,descriptors:{unicodeRange:"U+9389-938e,U+9390-93c9,U+93cb-93d5,U+93d7-9410"}},{uri:Dpe,descriptors:{unicodeRange:"U+20a0-20b5,U+20b9-20ba,U+20bc-20bd,U+4e2c,U+5107,U+5216,U+5293,U+54f3,U+5523,U+5819,U+5adc,U+5c88,U+5e3b,U+5fee,U+62f6,U+63be,U+6484,U+6499,U+67d9,U+67dd,U+6d5e,U+6f46,U+717a,U+71e0,U+72c1,U+73e7,U+75b0,U+7603,U+7722,U+7809,U+7811,U+7946,U+7967,U+799a,U+7b45,U+7ba2,U+8014,U+80d9,U+8159,U+817d,U+81a3,U+81aa,U+8201,U+833c,U+836e,U+83e5,U+8459,U+84f0,U+8729,U+8753,U+87d3,U+89dc,U+8bf6,U+8c2e,U+8e2c,U+8e9c,U+8e9e,U+8ece,U+8fee,U+9139,U+914f,U+9174,U+9191,U+960c,U+9622,U+9a98,U+9b48,U+9ca6,U+9cb0,U+9da2-9e12,U+9e88,U+9f44,U+9f86"}},{uri:dUe,descriptors:{unicodeRange:"U+9bd0-9c4a"}},{uri:fUe,descriptors:{unicodeRange:"U+4c2d-4cac"}},{uri:hUe,descriptors:{unicodeRange:"U+4d30-4dab"}},{uri:gUe,descriptors:{unicodeRange:"U+9411-943d,U+943f-946a,U+946c-9484"}},{uri:mUe,descriptors:{unicodeRange:"U+9efa,U+9efd,U+9eff-9f0a,U+9f0c,U+9f0f,U+9f11-9f12,U+9f14-9f16,U+9f18,U+9f1a-9f1f,U+9f21,U+9f23-9f2b,U+9f2d-9f2e,U+9f30-9f36,U+9f38,U+9f3a,U+9f3c,U+9f3f-9f43,U+9f45-9f4f,U+9f52-9f7e,U+9f81-9f82,U+9f8d-9f94"}},{uri:pUe,descriptors:{unicodeRange:"U+7e2b-7e3a,U+7e3c-7e40,U+7e42-7e46,U+7e48-7e81,U+7e83-7e9a,U+7e9c-7e9e,U+7eae,U+7eb4,U+7ebb-7ebc,U+7ed6,U+7ee4,U+7eec,U+7ef9,U+7f0a,U+7f10,U+7f1e,U+7f37,U+7f39,U+7f3b"}}],Ze=class Ze{constructor(t){F(this,"scene");F(this,"getSceneFamilies",()=>Ze.getUniqueFamilies(this.scene.getNonDeletedElements()));F(this,"onLoaded",t=>{let n=!0;for(const r of t){const o=`${r.family}-${r.style}-${r.weight}-${r.unicodeRange}`;Ze.loadedFontsCache.has(o)||(Ze.loadedFontsCache.add(o),n=!1)}if(n)return;let i=!1;const s=this.scene.getNonDeletedElementsMap();for(const r of this.scene.getNonDeletedElements())if(ue(r)){i=!0,Gt.delete(r),np.clearCache(gt(r));const o=$n(r,s);o&&Gt.delete(o)}i&&this.scene.triggerUpdate()});F(this,"loadSceneFonts",async()=>{const t=this.getSceneFamilies(),n=Ze.getCharsPerFamily(this.scene.getNonDeletedElements());return Ze.loadFontFaces(t,n)});this.scene=t}static get registered(){return Ze._registered?Ze._initialized||(Ze._registered=new Map([...Ze.init().entries(),...Ze._registered.entries()])):Ze._registered=Ze.init(),Ze._registered}get registered(){return Ze.registered}static async generateFontFaceDeclarations(t){const n=Ze.getUniqueFamilies(t),i=Ze.getCharsPerFamily(t),s=n.find(l=>qP(l).includes(Lf));if(s){const l=Ze.getCharacters(i,s);if(woe(l)){const c=Nf[Lf];i[c]=new Set(l),n.unshift(Nf[Lf])}}const r=Ze.fontFacesStylesGenerator(n,i),o=3,a=await new cC(r,o).all();return Array.from(new Set(a))}static async loadFontFaces(t,n){for(const{fontFaces:o,metadata:a}of Ze.registered.values())if(!a.local)for(const{fontFace:l}of o)window.document.fonts.has(l)||window.document.fonts.add(l);const i=Ze.fontFacesLoader(t,n),s=10;return(await new cC(i,s).all()).flat().filter(Boolean)}static*fontFacesLoader(t,n){for(const[i,s]of t.entries()){const r=gt({fontFamily:s,fontSize:16}),o=Ze.getCharacters(n,s);window.document.fonts.check(r,o)||(yield Dc(async()=>{var a;try{const l=await window.document.fonts.load(r,o);return[i,l]}catch(l){console.error(`Failed to load font "${r}" from urls "${(a=Ze.registered.get(s))==null?void 0:a.fontFaces.map(c=>c.urls)}"`,l)}}))}}static*fontFacesStylesGenerator(t,n){for(const[i,s]of t.entries()){const{fontFaces:r,metadata:o}=Ze.registered.get(s)??{};if(!Array.isArray(r)){console.error(`Couldn't find registered fonts for font-family "${s}"`,Ze.registered);continue}if(!(o!=null&&o.local))for(const[a,l]of r.entries())yield Dc(async()=>{try{const c=Ze.getCharacters(n,s),u=await l.toCSS(c);return u?[i*1e4+a,u]:void 0}catch(c){console.error(`Couldn't transform font-face to css for family "${l.fontFace.family}"`,c)}})}}static register(t,n,...i){const s=lt[t]??Nf[t];return this.registered.get(s)||this.registered.set(s,{metadata:n,fontFaces:i.map(({uri:o,descriptors:a})=>new _4(t,o,a))}),this.registered}static init(){const t={registered:new Map},n=(i,...s)=>{const r=lt[i]??Nf[i],o=xh[r]??xh[lt.Excalifont];Ze.register.call(t,i,o,...s)};return n("Cascadia",...Gge),n("Comic Shanns",...Kge),n("Excalifont",...c1e),n("Helvetica",...u1e),n("Liberation Sans",...f1e),n("Lilita One",...m1e),n("Nunito",...v1e),n("Virgil",..._1e),n(Lf,...UUe),n(V0,...Zge),Ze._initialized=!0,t.registered}static getUniqueFamilies(t){return Array.from(t.reduce((n,i)=>(ue(i)&&n.add(i.fontFamily),n),new Set))}static getCharsPerFamily(t){const n={};for(const i of t)if(ue(i))for(const s of i.originalText)n[i.fontFamily]||(n[i.fontFamily]=new Set),n[i.fontFamily].add(s);return n}static getCharacters(t,n){return t[n]?Array.from(t[n]).join(""):""}static getAllFamilies(){return Array.from(Ze.registered.keys())}};F(Ze,"loadedFontsCache",new Set),F(Ze,"_registered"),F(Ze,"_initialized",!1),F(Ze,"loadElementsFonts",async t=>{const n=Ze.getUniqueFamilies(t),i=Ze.getCharsPerFamily(t);return Ze.loadFontFaces(n,i)});let ja=Ze;const PV=ae.forwardRef(({className:e,placeholder:t,onChange:n},i)=>P("div",{className:pe("QuickSearch__wrapper",e),children:[md,g("input",{ref:i,className:"QuickSearch__input",type:"text",placeholder:t,onChange:s=>n(s.target.value.trim().toLowerCase())})]})),FV=({className:e,placeholder:t,children:n})=>{const i=!L.Children.count(n);return g("div",{className:pe("ScrollableList__wrapper",e),role:"menu",children:i?g("div",{className:"empty",children:t}):n})},e6=({children:e,className:t="",style:n,title:i})=>P("div",{className:`dropdown-menu-group ${t}`,style:n,children:[i&&g("p",{className:"dropdown-menu-group-title",children:i}),e]});e6.displayName="DropdownMenuGroup";const BV=({textStyle:e,icon:t,shortcut:n,children:i})=>{const s=si();return P(ge,{children:[t&&g("div",{className:"dropdown-menu-item__icon",children:t}),g("div",{style:e,className:"dropdown-menu-item__text",children:i}),n&&!s.editor.isMobile&&g("div",{className:"dropdown-menu-item__shortcut",children:n})]})},zV=ae.createContext({}),HV=(e="",t=!1,n=!1)=>`dropdown-menu-item dropdown-menu-item-base ${e}
  ${t?"dropdown-menu-item--selected":""} ${n?"dropdown-menu-item--hovered":""}`.trim(),VV=(e,t)=>{const n=L.useContext(zV);return h5(e,i=>{var r;const s=new CustomEvent(ee.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});t==null||t(s),s.defaultPrevented||(r=n.onSelect)==null||r.call(n,s)})},Ts=({icon:e,value:t,order:n,children:i,shortcut:s,className:r,hovered:o,selected:a,textStyle:l,onSelect:c,onClick:u,...d})=>{const f=VV(u,c),h=L.useRef(null);return L.useEffect(()=>{var m,p;o&&(n===0?(m=h.current)==null||m.scrollIntoView({block:"end"}):(p=h.current)==null||p.scrollIntoView({block:"nearest"}))},[o,n]),g("button",{...d,ref:h,value:t,onClick:f,className:HV(r,a,o),title:d.title??d["aria-label"],children:g(BV,{textStyle:l,icon:e,shortcut:s,children:i})})};Ts.displayName="DropdownMenuItem";const I1={GREEN:"green",RED:"red",BLUE:"blue"},l_=({type:e=I1.BLUE,children:t})=>{const{theme:n}=pp(),i={display:"inline-flex",marginLeft:"auto",padding:"2px 4px",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace",border:n===Me.LIGHT?"1.5px solid white":"none"};switch(e){case I1.GREEN:Object.assign(i,{backgroundColor:"var(--background-color-badge)",color:"var(--color-badge)"});break;case I1.RED:Object.assign(i,{backgroundColor:"pink",color:"darkred"});break;case I1.BLUE:default:Object.assign(i,{background:"var(--color-promo)",color:"var(--color-surface-lowest)"})}return g("div",{className:"DropDownMenuItemBadge",style:i,children:t})};l_.displayName="DropdownMenuItemBadge";Ts.Badge=l_;const bUe=({event:e,inputRef:t,hoveredFont:n,filteredFonts:i,onClose:s,onSelect:r,onHover:o})=>{var a,l,c;if(!e[z.CTRL_OR_CMD]&&e.shiftKey&&e.key.toLowerCase()===z.F)return(a=t.current)==null||a.focus(),!0;if(e.key===z.ESCAPE)return s(),!0;if(e.key===z.ENTER)return n!=null&&n.value&&r(n.value),!0;if(e.key===z.ARROW_DOWN)return n!=null&&n.next?o(n.next.value):(l=i[0])!=null&&l.value&&o(i[0].value),!0;if(e.key===z.ARROW_UP)return n!=null&&n.prev?o(n.prev.value):(c=i[i.length-1])!=null&&c.value&&o(i[i.length-1].value),!0},yUe=e=>{switch(e){case lt.Excalifont:case lt.Virgil:return C5;case lt.Nunito:case lt.Helvetica:return f4;case lt["Lilita One"]:return ide;case lt["Comic Shanns"]:case lt.Cascadia:return EH;default:return f4}},EUe=ae.memo(({selectedFontFamily:e,hoveredFontFamily:t,onSelect:n,onHover:i,onLeave:s,onOpen:r,onClose:o})=>{const{container:a}=oa(),{fonts:l}=mo(),{showDeprecatedFonts:c}=mp(),[u,d]=L.useState(""),f=L.useRef(null),h=L.useMemo(()=>Array.from(ja.registered.entries()).filter(([_,{metadata:x}])=>!x.private&&!x.fallback).map(([_,{metadata:x,fontFaces:C}])=>{var N,D;const R={value:_,icon:yUe(_),text:((D=(N=C[0])==null?void 0:N.fontFace)==null?void 0:D.family)??"Unknown"};return x.deprecated&&Object.assign(R,{deprecated:x.deprecated,badge:{type:I1.RED,placeholder:k("fontList.badge.old")}}),R}).sort((_,x)=>_.text.toLowerCase()>x.text.toLowerCase()?1:-1),[]),m=L.useMemo(()=>new Set(l.getSceneFamilies()),[e]),p=L.useMemo(()=>h.filter(_=>m.has(_.value)),[h,m]),U=L.useMemo(()=>h.filter(_=>!m.has(_.value)&&(c||!_.deprecated)),[h,m,c]),y=L.useMemo(()=>Ise([...p,...U].filter(_=>{var x;return(x=_.text)==null?void 0:x.toLowerCase().includes(u)})),[p,U,u]),E=L.useMemo(()=>{var x;let _;return t?_=y.find(C=>C.value===t):e&&(_=y.find(C=>C.value===e)),!_&&u&&((x=y[0])!=null&&x.value?i(y[0].value):s()),_},[t,e,u,y,i,s]),v=L.useCallback(_=>{bUe({event:_,inputRef:f,hoveredFont:E,filteredFonts:y,onSelect:n,onHover:i,onClose:o})&&(_.preventDefault(),_.stopPropagation())},[E,y,n,i,o]);L.useEffect(()=>(r(),()=>{o()}),[]);const w=L.useMemo(()=>y.filter(_=>m.has(_.value)),[y,m]),I=L.useMemo(()=>y.filter(_=>!m.has(_.value)),[y,m]),M=(_,x)=>P(Ts,{icon:_.icon,value:_.value,order:x,textStyle:{fontFamily:Zm({fontFamily:_.value})},hovered:_.value===(E==null?void 0:E.value),selected:_.value===e,tabIndex:_.value===e?0:-1,onClick:C=>{n(Number(C.currentTarget.value))},onMouseMove:()=>{(E==null?void 0:E.value)!==_.value&&i(_.value)},children:[_.text,_.badge&&g(l_,{type:_.badge.type,children:_.badge.placeholder})]},_.value),T=[];return w.length&&T.push(g(e6,{title:k("fontList.sceneFonts"),children:w.map(M)},"group_1")),I.length&&T.push(g(e6,{title:k("fontList.availableFonts"),children:I.map((_,x)=>M(_,x+w.length))},"group_2")),P(NV,{className:"properties-content",container:a,style:{width:"15rem"},onClose:o,onPointerLeave:s,onKeyDown:v,children:[g(PV,{ref:f,placeholder:k("quickSearch.placeholder"),onChange:Qa(d,20)}),g(FV,{className:"dropdown-menu fonts manual-hover",placeholder:k("fontList.empty"),children:T.length?T:null})]})},(e,t)=>e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),vUe=({selectedFontFamily:e})=>{const t=L.useMemo(()=>!!(e&&!_Ue(e)),[e]);return g(F5,{asChild:!0,children:g("div",{children:g(NH,{standalone:!0,icon:Ow,title:k("labels.showFonts"),className:"properties-trigger",testId:"font-family-show-fonts",active:t,onClick:()=>{}})})})},$V=[{value:lt.Excalifont,icon:C5,text:k("labels.handDrawn"),testId:"font-family-hand-drawn"},{value:lt.Nunito,icon:f4,text:k("labels.normal"),testId:"font-family-normal"},{value:lt["Comic Shanns"],icon:EH,text:k("labels.code"),testId:"font-family-code"}],wUe=new Set($V.map(e=>e.value)),_Ue=e=>e?wUe.has(e):!1,TUe=ae.memo(({isOpened:e,selectedFontFamily:t,hoveredFontFamily:n,onSelect:i,onHover:s,onLeave:r,onPopupChange:o})=>{const a=L.useMemo(()=>$V,[]),l=L.useCallback(c=>{c&&i(c)},[i]);return P("div",{role:"dialog","aria-modal":"true",className:"FontPicker__container",children:[g(sa,{type:"button",options:a,value:t,onClick:l}),g(kV,{}),P(P5,{open:e,onOpenChange:o,children:[g(vUe,{selectedFontFamily:t}),e&&g(EUe,{selectedFontFamily:t,hoveredFontFamily:n,onSelect:l,onHover:s,onLeave:r,onOpen:()=>o(!0),onClose:()=>o(!1)})]})]})},(e,t)=>e.isOpened===t.isOpened&&e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),V5=({icon:e})=>g("span",{style:{width:"1em",margin:"0 0.5ex 0 0.5ex",display:"inline-block",lineHeight:0,verticalAlign:"middle"},children:e}),T4=({label:e,open:t,openTrigger:n,children:i,className:s,showCollapsedIcon:r=!0})=>P(ge,{children:[P("div",{style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},className:s,onClick:n,children:[e,r&&g(V5,{icon:t?Fde:MH})]}),t&&g("div",{style:{display:"flex",flexDirection:"column"},children:i})]}),SUe=Zt(!1);function IUe({options:e,value:t,label:n,onChange:i,onClose:s,numberOfOptionsToAlwaysShow:r=e.length}){const o=si(),a=h=>{const m=e.find(p=>p.keyBinding===h.key.toLowerCase());if(!(h.metaKey||h.altKey||h.ctrlKey)&&m)i(m.value),h.preventDefault();else if(h.key===z.TAB){const p=e.findIndex(y=>y.value===t),U=h.shiftKey?(e.length+p-1)%e.length:(p+1)%e.length;i(e[U].value)}else if(w1(h.key)){const p=J0().rtl,U=e.findIndex(y=>y.value===t);if(U!==-1){const y=e.length;let E=U;switch(h.key){case(p?z.ARROW_LEFT:z.ARROW_RIGHT):E=(U+1)%y;break;case(p?z.ARROW_RIGHT:z.ARROW_LEFT):E=(y+U-1)%y;break;case z.ARROW_DOWN:{E=(U+(r??1))%y;break}case z.ARROW_UP:{E=(y+U-(r??1))%y;break}}i(e[E].value)}h.preventDefault()}else(h.key===z.ESCAPE||h.key===z.ENTER)&&(h.preventDefault(),s());h.nativeEvent.stopImmediatePropagation(),h.stopPropagation()},[l,c]=pn(SUe),u=ae.useMemo(()=>e.slice(0,r),[e,r]),d=ae.useMemo(()=>e.slice(r),[e,r]);L.useEffect(()=>{u.some(h=>h.value===t)||c(!0)},[t,u,c]);const f=h=>g("div",{className:"picker-content",children:h.map((m,p)=>P("button",{type:"button",className:pe("picker-option",{active:t===m.value}),onClick:U=>{i(m.value)},title:`${m.text} ${m.keyBinding&&`— ${m.keyBinding.toUpperCase()}`}`,"aria-label":m.text||"none","aria-keyshortcuts":m.keyBinding||void 0,ref:U=>{t===m.value&&setTimeout(()=>{U==null||U.focus()},0)},children:[m.icon,m.keyBinding&&g("span",{className:"picker-keybinding",children:m.keyBinding})]},m.text))});return g(n_,{side:o.editor.isMobile&&!o.viewport.isLandscape?"top":"bottom",align:"start",sideOffset:12,style:{zIndex:"var(--zIndex-popup)"},onKeyDown:a,children:P("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":n,children:[f(u),d.length>0&&g(T4,{label:k("labels.more_options"),open:l,openTrigger:()=>{c(h=>!h)},className:"picker-collapsible",children:f(d)})]})})}function EM({value:e,label:t,options:n,onChange:i,group:s="",numberOfOptionsToAlwaysShow:r}){var c;const[o,a]=ae.useState(!1),l=ae.useRef(null);return g("div",{children:P(P5,{open:o,onOpenChange:u=>a(u),children:[g(F5,{name:s,type:"button","aria-label":t,onClick:()=>a(!o),ref:l,className:o?"active":"",children:(c=n.find(u=>u.value===e))==null?void 0:c.icon}),o&&g(IUe,{options:n,value:e,label:t,onChange:i,onClose:()=>{a(!1)},numberOfOptionsToAlwaysShow:r})]})})}const xUe=({updateData:e,app:t,testId:n})=>{const i=ae.useRef(null),s=ae.useRef(null),r=t.scene.getSelectedElements(t.state);let o=!0;const a=r.at(0),c=r.reduce((u,d)=>(u!=null&&u!==d.opacity&&(o=!1),u==null||u>d.opacity?d.opacity:u),(a==null?void 0:a.opacity)??null)??t.state.currentItemOpacity;return L.useEffect(()=>{if(i.current&&s.current){const u=i.current,d=s.current,f=u.offsetWidth,h=15,m=c/100*(f-h)+h/2;d.style.left=`${m}px`,u.style.background=`linear-gradient(to right, var(--color-slider-track) 0%, var(--color-slider-track) ${c}%, var(--button-bg) ${c}%, var(--button-bg) 100%)`}},[c]),P("label",{className:"control-label",children:[k("labels.opacity"),P("div",{className:"range-wrapper",children:[g("input",{style:{"--color-slider-track":o?void 0:"var(--button-bg)"},ref:i,type:"range",min:"0",max:"100",step:"10",onChange:u=>{e(+u.target.value)},value:c,className:"range-input","data-testid":n}),g("div",{className:"value-bubble",ref:s,children:c!==0?c:null}),g("div",{className:"zero-label",children:"0"})]})]})},GV=.1,is=(e,t,n,i=!1)=>{const s=_e(He(e,t,{includeBoundTextElement:i}));return e.map(r=>{var o;return s.get(r.id)||r.id===((o=t.editingTextElement)==null?void 0:o.id)?n(r):r})},ws=function(e,t,n,i,s){const r=t.state.editingTextElement,o=Bt(e);let a=null;if(r&&(a=n(r)),!a)if(Gn(o,t.state)){const c=t.scene.getSelectedElements(t.state),u=i===!0?c:c.filter(d=>i(d));a=wF(u,n)??(typeof s=="function"?s(!0):s)}else a=typeof s=="function"?s(!1):s;return a},CUe=(e,t,n)=>Xt(t)||!t.autoResize?t:n.mutateElement(t,{x:e.textAlign==="left"?e.x:e.x+(e.width-t.width)/(e.textAlign==="center"?2:1),y:e.y+(e.height-t.height)/2}),c_=(e,t,n,i,s)=>{const r=new Set,o=is(e,t,a=>{if(ue(a)){const l=i(a);r.add(l);let c=Ie(a,{fontSize:l});return $i(c,n.scene.getContainerElement(a),n.scene),c=CUe(a,c,n.scene),c}return a},!0);return He(e,t,{includeBoundTextElement:!0}).forEach(a=>{ue(a)&&ys(a,n.scene)}),{elements:o,appState:{...t,currentItemFontSize:r.size===1?[...r][0]:s??t.currentItemFontSize},captureUpdate:K.IMMEDIATELY}};oe({name:"changeStrokeColor",label:"labels.stroke",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemStrokeColor&&{elements:is(e,t,i=>H3(i.type)?Ie(i,{strokeColor:n.currentItemStrokeColor}):i,!0)},appState:{...t,...n},captureUpdate:n.currentItemStrokeColor?K.IMMEDIATELY:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>P(ge,{children:[g("h3",{"aria-hidden":"true",children:k("labels.stroke")}),g(o_,{topPicks:jP,palette:hie,type:"elementStroke",label:k("labels.stroke"),color:ws(e,i,s=>s.strokeColor,!0,s=>s?null:t.currentItemStrokeColor),onChange:s=>n({currentItemStrokeColor:s}),elements:e,appState:t,updateData:n})]})});oe({name:"changeBackgroundColor",label:"labels.changeBackground",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemBackgroundColor&&{elements:is(e,t,i=>Ie(i,{backgroundColor:n.currentItemBackgroundColor}))},appState:{...t,...n},captureUpdate:n.currentItemBackgroundColor?K.IMMEDIATELY:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>P(ge,{children:[g("h3",{"aria-hidden":"true",children:k("labels.background")}),g(o_,{topPicks:YP,palette:gie,type:"elementBackground",label:k("labels.background"),color:ws(e,i,s=>s.backgroundColor,!0,s=>s?null:t.currentItemBackgroundColor),onChange:s=>n({currentItemBackgroundColor:s}),elements:e,appState:t,updateData:n})]})});oe({name:"changeFillStyle",label:"labels.fill",trackEvent:!1,perform:(e,t,n,i)=>(at("element","changeFillStyle",`${n} (${i.device.editor.isMobile?"mobile":"desktop"})`),{elements:is(e,t,s=>Ie(s,{fillStyle:n})),appState:{...t,currentItemFillStyle:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const s=He(e,t),r=s.length>0&&s.every(o=>o.fillStyle==="zigzag");return P("fieldset",{children:[g("legend",{children:k("labels.fill")}),g(sa,{type:"button",options:[{value:"hachure",text:`${k(r?"labels.zigzag":"labels.hachure")} (${Q("Alt-Click")})`,icon:r?Aue:Mue,active:r?!0:void 0,testId:"fill-hachure"},{value:"cross-hatch",text:k("labels.crossHatch"),icon:Rue,testId:"fill-cross-hatch"},{value:"solid",text:k("labels.solid"),icon:kue,testId:"fill-solid"}],value:ws(e,i,o=>o.fillStyle,o=>o.hasOwnProperty("fillStyle"),o=>o?null:t.currentItemFillStyle),onClick:(o,a)=>{const l=a.altKey&&o==="hachure"&&s.every(c=>c.fillStyle==="hachure")?"zigzag":o;n(l)}})]})}});oe({name:"changeStrokeWidth",label:"labels.strokeWidth",trackEvent:!1,perform:(e,t,n)=>({elements:is(e,t,i=>Ie(i,{strokeWidth:n})),appState:{...t,currentItemStrokeWidth:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>P("fieldset",{children:[g("legend",{children:k("labels.strokeWidth")}),g(sa,{group:"stroke-width",options:[{value:F8.thin,text:k("labels.thin"),icon:yH,testId:"strokeWidth-thin"},{value:F8.bold,text:k("labels.bold"),icon:Due,testId:"strokeWidth-bold"},{value:F8.extraBold,text:k("labels.extraBold"),icon:Lue,testId:"strokeWidth-extraBold"}],value:ws(e,i,s=>s.strokeWidth,s=>s.hasOwnProperty("strokeWidth"),s=>s?null:t.currentItemStrokeWidth),onChange:s=>n(s)})]})});oe({name:"changeSloppiness",label:"labels.sloppiness",trackEvent:!1,perform:(e,t,n)=>({elements:is(e,t,i=>Ie(i,{seed:Wo(),roughness:n})),appState:{...t,currentItemRoughness:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>P("fieldset",{children:[g("legend",{children:k("labels.sloppiness")}),g(sa,{group:"sloppiness",options:[{value:0,text:k("labels.architect"),icon:Pue},{value:1,text:k("labels.artist"),icon:Fue},{value:2,text:k("labels.cartoonist"),icon:Bue}],value:ws(e,i,s=>s.roughness,s=>s.hasOwnProperty("roughness"),s=>s?null:t.currentItemRoughness),onChange:s=>n(s)})]})});oe({name:"changeStrokeStyle",label:"labels.strokeStyle",trackEvent:!1,perform:(e,t,n)=>({elements:is(e,t,i=>Ie(i,{strokeStyle:n})),appState:{...t,currentItemStrokeStyle:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>P("fieldset",{children:[g("legend",{children:k("labels.strokeStyle")}),g(sa,{group:"strokeStyle",options:[{value:"solid",text:k("labels.strokeStyle_solid"),icon:yH},{value:"dashed",text:k("labels.strokeStyle_dashed"),icon:Nue},{value:"dotted",text:k("labels.strokeStyle_dotted"),icon:Oue}],value:ws(e,i,s=>s.strokeStyle,s=>s.hasOwnProperty("strokeStyle"),s=>s?null:t.currentItemStrokeStyle),onChange:s=>n(s)})]})});oe({name:"changeOpacity",label:"labels.opacity",trackEvent:!1,perform:(e,t,n)=>({elements:is(e,t,i=>Ie(i,{opacity:n}),!0),appState:{...t,currentItemOpacity:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({app:e,updateData:t})=>g(xUe,{updateData:t,app:e,testId:"opacity"})});oe({name:"changeFontSize",label:"labels.fontSize",trackEvent:!1,perform:(e,t,n,i)=>c_(e,t,i,()=>n,n),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>P("fieldset",{children:[g("legend",{children:k("labels.fontSize")}),g(sa,{group:"font-size",options:[{value:16,text:k("labels.small"),icon:Jue,testId:"fontSize-small"},{value:20,text:k("labels.medium"),icon:ede,testId:"fontSize-medium"},{value:28,text:k("labels.large"),icon:tde,testId:"fontSize-large"},{value:36,text:k("labels.veryLarge"),icon:nde,testId:"fontSize-veryLarge"}],value:ws(e,i,s=>{if(ue(s))return s.fontSize;const r=Oe(s,i.scene.getNonDeletedElementsMap());return r?r.fontSize:null},s=>ue(s)||Oe(s,i.scene.getNonDeletedElementsMap())!==null,s=>s?null:t.currentItemFontSize||pl),onChange:s=>n(s)})]})});const vM=oe({name:"decreaseFontSize",label:"labels.decreaseFontSize",icon:M5,trackEvent:!1,perform:(e,t,n,i)=>c_(e,t,i,s=>Math.round(1/(1+GV)*s.fontSize)),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&(e.key===z.CHEVRON_LEFT||e.key===z.COMMA)}),wM=oe({name:"increaseFontSize",label:"labels.increaseFontSize",icon:M5,trackEvent:!1,perform:(e,t,n,i)=>c_(e,t,i,s=>Math.round(s.fontSize*(1+GV))),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&(e.key===z.CHEVRON_RIGHT||e.key===z.PERIOD)});oe({name:"changeFontFamily",label:"labels.fontFamily",trackEvent:!1,perform:(e,t,n,i)=>{var m;const{cachedElements:s,resetAll:r,resetContainers:o,...a}=n;if(r)return{elements:is(e,t,U=>{const y=s==null?void 0:s.get(U.id);return y?Ie(U,{...y}):U},!0),appState:{...t,...a},captureUpdate:K.NEVER};const{currentItemFontFamily:l,currentHoveredFontFamily:c}=n;let u=K.EVENTUALLY,d,f=!1;if(l)d=l,u=K.IMMEDIATELY;else if(c){d=c,u=K.EVENTUALLY;const p=He(e,t,{includeBoundTextElement:!0}).filter(U=>ue(U));if(p.length>200)f=!0;else{let U=0,y=0;for(;U<p.length&&y<5e3;){const E=p[U];y+=(E==null?void 0:E.originalText.length)||0,U++}y>5e3&&(f=!0)}}const h={appState:{...t,...a},captureUpdate:u};if(d&&!f){const p=new Map;let U=new Set,y=!1;const E=Array.from(ja.loadedFontsCache.values()),v=(m=Object.entries(lt).find(([M,T])=>T===d))==null?void 0:m[0];c&&v&&E.some(M=>M.startsWith(v))&&(y=!0),Object.assign(h,{elements:is(e,t,M=>{if(ue(M)&&(M.fontFamily!==d||l)){const T=Ie(M,{fontFamily:d,lineHeight:Rc(d)}),_=(s==null?void 0:s.get(M.containerId||""))||{},x=i.scene.getContainerElement(M);return o&&x&&_&&i.scene.mutateElement(x,{..._}),y||(U=new Set([...U,...Array.from(T.originalText)])),p.set(T,x),T}return M},!0)});const w=`10px ${Zm({fontFamily:d})}`,I=Array.from(U.values()).join();if(y||window.document.fonts.check(w,I))for(const[M,T]of p)$i(M,T,i.scene);else window.document.fonts.load(w,I).then(M=>{for(const[T,_]of p){const x=i.scene.getElement(T.id),C=_?i.scene.getElement(_.id):null;x&&$i(x,C,i.scene)}i.fonts.onLoaded(M)})}return h},PanelComponent:({elements:e,appState:t,app:n,updateData:i})=>{const s=L.useRef(new Map),r=L.useRef(null),[o,a]=L.useState({}),l=L.useRef(!0),c=L.useMemo(()=>{var d;const u=(f,h)=>ws(f,n,m=>{if(ue(m))return m.fontFamily;const p=Oe(m,h);return p?p.fontFamily:null},m=>ue(m)||Oe(m,h)!==null,m=>m?null:t.currentItemFontFamily||Kc);return o.openPopup==="fontFamily"&&t.openPopup==="fontFamily"?u(Array.from(((d=s.current)==null?void 0:d.values())??[]),s.current):!o.openPopup&&t.openPopup!=="fontFamily"?u(e,n.scene.getNonDeletedElementsMap()):r.current},[o.openPopup,t,e,n]);return L.useEffect(()=>{r.current=c},[c]),L.useEffect(()=>{Object.keys(o).length&&(i(o),a({}))},[o]),L.useEffect(()=>(l.current=!1,()=>{l.current=!0}),[]),P("fieldset",{children:[g("legend",{children:k("labels.fontFamily")}),g(TUe,{isOpened:t.openPopup==="fontFamily",selectedFontFamily:c,hoveredFontFamily:t.currentHoveredFontFamily,onSelect:u=>{a({openPopup:null,currentHoveredFontFamily:null,currentItemFontFamily:u}),s.current.clear()},onHover:u=>{a({currentHoveredFontFamily:u,cachedElements:new Map(s.current),resetContainers:!0})},onLeave:()=>{a({currentHoveredFontFamily:null,cachedElements:new Map(s.current),resetAll:!0})},onPopupChange:u=>{if(u){s.current.clear();const{editingTextElement:d}=t;if((d==null?void 0:d.type)==="text"){const f=n.scene.getElement(d.id);s.current.set(d.id,Ie(f||d,{},!0))}else{const f=He(e,t,{includeBoundTextElement:!0});for(const h of f)s.current.set(h.id,Ie(h,{},!0))}a({openPopup:"fontFamily"})}else{const d={openPopup:null,currentHoveredFontFamily:null,cachedElements:new Map(s.current),resetAll:!0};l.current?i({...o,...d}):a(d),s.current.clear()}}})]})}});oe({name:"changeTextAlign",label:"Change text alignment",trackEvent:!1,perform:(e,t,n,i)=>({elements:is(e,t,s=>{if(ue(s)){const r=Ie(s,{textAlign:n});return $i(r,i.scene.getContainerElement(s),i.scene),r}return s},!0),appState:{...t,currentItemTextAlign:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const s=i.scene.getNonDeletedElementsMap();return P("fieldset",{children:[g("legend",{children:k("labels.textAlign")}),g(sa,{group:"text-align",options:[{value:"left",text:k("labels.left"),icon:sde,testId:"align-left"},{value:"center",text:k("labels.center"),icon:rde,testId:"align-horizontal-center"},{value:"right",text:k("labels.right"),icon:ode,testId:"align-right"}],value:ws(e,i,r=>{if(ue(r))return r.textAlign;const o=Oe(r,s);return o?o.textAlign:null},r=>ue(r)||Oe(r,s)!==null,r=>r?null:t.currentItemTextAlign),onChange:r=>n(r)})]})}});oe({name:"changeVerticalAlign",label:"Change vertical alignment",trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:is(e,t,s=>{if(ue(s)){const r=Ie(s,{verticalAlign:n});return $i(r,i.scene.getContainerElement(s),i.scene),r}return s},!0),appState:{...t},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g("fieldset",{children:g(sa,{group:"text-align",options:[{value:Fs.TOP,text:k("labels.alignTop"),icon:g(ade,{theme:t.theme}),testId:"align-top"},{value:Fs.MIDDLE,text:k("labels.centerVertically"),icon:g(cde,{theme:t.theme}),testId:"align-middle"},{value:Fs.BOTTOM,text:k("labels.alignBottom"),icon:g(lde,{theme:t.theme}),testId:"align-bottom"}],value:ws(e,i,s=>{if(ue(s)&&s.containerId)return s.verticalAlign;const r=Oe(s,i.scene.getNonDeletedElementsMap());return r?r.verticalAlign:null},s=>ue(s)||Oe(s,i.scene.getNonDeletedElementsMap())!==null,s=>s?null:Fs.MIDDLE),onChange:s=>n(s)})})});oe({name:"changeRoundness",label:"Change edge roundness",trackEvent:!1,perform:(e,t,n)=>({elements:is(e,t,i=>he(i)?i:Ie(i,{roundness:n==="round"?{type:Od(i.type)?mn.ADAPTIVE_RADIUS:mn.PROPORTIONAL_RADIUS}:null})),appState:{...t,currentItemRoundness:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const r=nB(Bt(e),t).some(o=>{var a;return((a=o.roundness)==null?void 0:a.type)===mn.LEGACY});return P("fieldset",{children:[g("legend",{children:k("labels.edges")}),g(sa,{group:"edges",options:[{value:"sharp",text:k("labels.sharp"),icon:zue},{value:"round",text:k("labels.round"),icon:Hue}],value:ws(e,i,o=>r?null:o.roundness?"round":"sharp",o=>!xe(o)&&o.hasOwnProperty("roundness"),o=>o?null:t.currentItemRoundness),onChange:o=>n(o)})]})}});const _M=e=>[{value:null,text:k("labels.arrowhead_none"),keyBinding:"q",icon:Vue},{value:"arrow",text:k("labels.arrowhead_arrow"),keyBinding:"w",icon:g(d4,{flip:e})},{value:"triangle",text:k("labels.arrowhead_triangle"),icon:g(jue,{flip:e}),keyBinding:"e"},{value:"triangle_outline",text:k("labels.arrowhead_triangle_outline"),icon:g(Yue,{flip:e}),keyBinding:"r"},{value:"circle",text:k("labels.arrowhead_circle"),keyBinding:"a",icon:g($ue,{flip:e})},{value:"circle_outline",text:k("labels.arrowhead_circle_outline"),keyBinding:"s",icon:g(Gue,{flip:e})},{value:"diamond",text:k("labels.arrowhead_diamond"),icon:g(Wue,{flip:e}),keyBinding:"d"},{value:"diamond_outline",text:k("labels.arrowhead_diamond_outline"),icon:g(Kue,{flip:e}),keyBinding:"f"},{value:"bar",text:k("labels.arrowhead_bar"),keyBinding:"z",icon:g(Xue,{flip:e})},{value:"crowfoot_one",text:k("labels.arrowhead_crowfoot_one"),icon:g(que,{flip:e}),keyBinding:"c"},{value:"crowfoot_many",text:k("labels.arrowhead_crowfoot_many"),icon:g(Zue,{flip:e}),keyBinding:"x"},{value:"crowfoot_one_or_many",text:k("labels.arrowhead_crowfoot_one_or_many"),icon:g(Que,{flip:e}),keyBinding:"v"}];oe({name:"changeArrowhead",label:"Change arrowheads",trackEvent:!1,perform:(e,t,n)=>({elements:is(e,t,i=>{if(Ae(i)){const{position:s,type:r}=n;if(s==="start")return Ie(i,{startArrowhead:r});if(s==="end")return Ie(i,{endArrowhead:r})}return i}),appState:{...t,[n.position==="start"?"currentItemStartArrowhead":"currentItemEndArrowhead"]:n.type},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const s=J0().rtl;return P("fieldset",{children:[g("legend",{children:k("labels.arrowheads")}),P("div",{className:"iconSelectList buttonList",children:[g(EM,{label:"arrowhead_start",options:_M(!s),value:ws(e,i,r=>Ae(r)&&Fb(r.type)?r.startArrowhead:t.currentItemStartArrowhead,!0,t.currentItemStartArrowhead),onChange:r=>n({position:"start",type:r}),numberOfOptionsToAlwaysShow:4}),g(EM,{label:"arrowhead_end",group:"arrowheads",options:_M(!!s),value:ws(e,i,r=>Ae(r)&&Fb(r.type)?r.endArrowhead:t.currentItemEndArrowhead,!0,t.currentItemEndArrowhead),onChange:r=>n({position:"end",type:r}),numberOfOptionsToAlwaysShow:4})]})]})}});oe({name:"changeArrowType",label:"Change arrow types",trackEvent:!1,perform:(e,t,n,i)=>{var a;const s=is(e,t,l=>{if(!xe(l))return l;let c=Ie(l,{roundness:n===ai.round?{type:mn.PROPORTIONAL_RADIUS}:null,elbowed:n===ai.elbow,points:n===ai.elbow||l.elbowed?[l.points[0],l.points[l.points.length-1]]:l.points});if(he(c)){c.fixedSegments=null;const u=i.scene.getNonDeletedElementsMap();i.dismissLinearEditor();const d=le.getPointAtIndexGlobalCoordinates(c,0,u),f=le.getPointAtIndexGlobalCoordinates(c,-1,u),h=!c.startBinding&&Zr(Wr(d),e,u,t.zoom,!1,!0),m=!c.endBinding&&Zr(Wr(f),e,u,t.zoom,!1,!0),p=h||c.startBinding&&u.get(c.startBinding.elementId),U=m||c.endBinding&&u.get(c.endBinding.elementId),y=h?K0(c,h,"start"):d,E=m?K0(c,m,"end"):f;h&&gr(c,h,"start",i.scene),m&&gr(c,m,"end",i.scene);const v=p&&c.startBinding?{...c.startBinding,...Lb(c,p,"start")}:null,w=U&&c.endBinding?{...c.endBinding,...Lb(c,U,"end")}:null;c={...c,startBinding:v,endBinding:w,...hg(c,u,{points:[y,E].map(I=>S(I[0]-c.x,I[1]-c.y)),startBinding:v,endBinding:w,fixedSegments:null})},le.updateEditorMidPointsCache(c,u,i.state)}else{const u=i.scene.getNonDeletedElementsMap();if(c.startBinding){const d=u.get(c.startBinding.elementId);d&&gr(c,d,"start",i.scene)}if(c.endBinding){const d=u.get(c.endBinding.elementId);d&&gr(c,d,"end",i.scene)}}return c}),r={...t,currentItemArrowType:n},o=(a=t.selectedLinearElement)==null?void 0:a.elementId;if(o){const l=s.find(c=>c.id===o);l&&(r.selectedLinearElement=new le(l,_e(e)))}return{elements:s,appState:r,captureUpdate:K.IMMEDIATELY}},PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>P("fieldset",{children:[g("legend",{children:k("labels.arrowtypes")}),g(sa,{group:"arrowtypes",options:[{value:ai.sharp,text:k("labels.arrowtype_sharp"),icon:xH,testId:"sharp-arrow"},{value:ai.round,text:k("labels.arrowtype_round"),icon:AH,testId:"round-arrow"},{value:ai.elbow,text:k("labels.arrowtype_elbowed"),icon:CH,testId:"elbow-arrow"}],value:ws(e,i,s=>xe(s)?s.elbowed?ai.elbow:s.roundness?ai.round:ai.sharp:null,s=>xe(s),s=>s?null:t.currentItemArrowType),onChange:s=>n(s)})]})});const AUe=B9.includes(devicePixelRatio)?devicePixelRatio:1,Jo=()=>({showWelcomeScreen:!1,theme:Me.LIGHT,collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:fn.backgroundColor,currentItemEndArrowhead:"arrow",currentItemFillStyle:fn.fillStyle,currentItemFontFamily:Kc,currentItemFontSize:pl,currentItemOpacity:fn.opacity,currentItemRoughness:fn.roughness,currentItemStartArrowhead:null,currentItemStrokeColor:fn.strokeColor,currentItemRoundness:"round",currentItemArrowType:ai.round,currentItemStrokeStyle:fn.strokeStyle,currentItemStrokeWidth:fn.strokeWidth,currentItemTextAlign:Km,currentHoveredFontFamily:null,cursorButton:"up",activeEmbeddable:null,newElement:null,editingTextElement:null,editingGroupId:null,editingLinearElement:null,activeTool:{type:"selection",customType:null,locked:fn.locked,fromSelection:!1,lastActiveTool:null},penMode:!1,penDetected:!1,errorMessage:null,exportBackground:!0,exportScale:AUe,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:mb,gridStep:JP,gridModeEnabled:!1,isBindingEnabled:!0,defaultSidebarDockedPreference:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:null,contextMenu:null,openMenu:null,openPopup:null,openSidebar:null,openDialog:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},hoveredElementIds:{},selectedGroupIds:{},selectedElementsAreBeingDragged:!1,selectionElement:null,shouldCacheIgnoreZoom:!1,stats:{open:!1,panels:Of.generalStats|Of.elementProperties},startBoundElement:null,suggestedBindings:[],frameRendering:{enabled:!0,clip:!0,name:!0,outline:!0},frameToHighlight:null,editingFrame:null,elementsToHighlight:null,toast:null,viewBackgroundColor:ze.white,zenModeEnabled:!1,zoom:{value:1},viewModeEnabled:!1,pendingImageElementId:null,showHyperlinkPopup:!1,selectedLinearElement:null,snapLines:[],originSnapOffset:{x:0,y:0},objectsSnapModeEnabled:!1,userToFollow:null,followedBy:new Set,isCropping:!1,croppingElementId:null,searchMatches:null}),MUe=(e=>e)({showWelcomeScreen:{browser:!0,export:!1,server:!1},theme:{browser:!0,export:!1,server:!1},collaborators:{browser:!1,export:!1,server:!1},currentChartType:{browser:!0,export:!1,server:!1},currentItemBackgroundColor:{browser:!0,export:!1,server:!1},currentItemEndArrowhead:{browser:!0,export:!1,server:!1},currentItemFillStyle:{browser:!0,export:!1,server:!1},currentItemFontFamily:{browser:!0,export:!1,server:!1},currentItemFontSize:{browser:!0,export:!1,server:!1},currentItemRoundness:{browser:!0,export:!1,server:!1},currentItemArrowType:{browser:!0,export:!1,server:!1},currentItemOpacity:{browser:!0,export:!1,server:!1},currentItemRoughness:{browser:!0,export:!1,server:!1},currentItemStartArrowhead:{browser:!0,export:!1,server:!1},currentItemStrokeColor:{browser:!0,export:!1,server:!1},currentItemStrokeStyle:{browser:!0,export:!1,server:!1},currentItemStrokeWidth:{browser:!0,export:!1,server:!1},currentItemTextAlign:{browser:!0,export:!1,server:!1},currentHoveredFontFamily:{browser:!1,export:!1,server:!1},cursorButton:{browser:!0,export:!1,server:!1},activeEmbeddable:{browser:!1,export:!1,server:!1},newElement:{browser:!1,export:!1,server:!1},editingTextElement:{browser:!1,export:!1,server:!1},editingGroupId:{browser:!0,export:!1,server:!1},editingLinearElement:{browser:!1,export:!1,server:!1},activeTool:{browser:!0,export:!1,server:!1},penMode:{browser:!0,export:!1,server:!1},penDetected:{browser:!0,export:!1,server:!1},errorMessage:{browser:!1,export:!1,server:!1},exportBackground:{browser:!0,export:!1,server:!1},exportEmbedScene:{browser:!0,export:!1,server:!1},exportScale:{browser:!0,export:!1,server:!1},exportWithDarkMode:{browser:!0,export:!1,server:!1},fileHandle:{browser:!1,export:!1,server:!1},gridSize:{browser:!0,export:!0,server:!0},gridStep:{browser:!0,export:!0,server:!0},gridModeEnabled:{browser:!0,export:!0,server:!0},height:{browser:!1,export:!1,server:!1},isBindingEnabled:{browser:!1,export:!1,server:!1},defaultSidebarDockedPreference:{browser:!0,export:!1,server:!1},isLoading:{browser:!1,export:!1,server:!1},isResizing:{browser:!1,export:!1,server:!1},isRotating:{browser:!1,export:!1,server:!1},lastPointerDownWith:{browser:!0,export:!1,server:!1},multiElement:{browser:!1,export:!1,server:!1},name:{browser:!0,export:!1,server:!1},offsetLeft:{browser:!1,export:!1,server:!1},offsetTop:{browser:!1,export:!1,server:!1},contextMenu:{browser:!1,export:!1,server:!1},openMenu:{browser:!0,export:!1,server:!1},openPopup:{browser:!1,export:!1,server:!1},openSidebar:{browser:!0,export:!1,server:!1},openDialog:{browser:!1,export:!1,server:!1},pasteDialog:{browser:!1,export:!1,server:!1},previousSelectedElementIds:{browser:!0,export:!1,server:!1},resizingElement:{browser:!1,export:!1,server:!1},scrolledOutside:{browser:!0,export:!1,server:!1},scrollX:{browser:!0,export:!1,server:!1},scrollY:{browser:!0,export:!1,server:!1},selectedElementIds:{browser:!0,export:!1,server:!1},hoveredElementIds:{browser:!1,export:!1,server:!1},selectedGroupIds:{browser:!0,export:!1,server:!1},selectedElementsAreBeingDragged:{browser:!1,export:!1,server:!1},selectionElement:{browser:!1,export:!1,server:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1,server:!1},stats:{browser:!0,export:!1,server:!1},startBoundElement:{browser:!1,export:!1,server:!1},suggestedBindings:{browser:!1,export:!1,server:!1},frameRendering:{browser:!1,export:!1,server:!1},frameToHighlight:{browser:!1,export:!1,server:!1},editingFrame:{browser:!1,export:!1,server:!1},elementsToHighlight:{browser:!1,export:!1,server:!1},toast:{browser:!1,export:!1,server:!1},viewBackgroundColor:{browser:!0,export:!0,server:!0},width:{browser:!1,export:!1,server:!1},zenModeEnabled:{browser:!0,export:!1,server:!1},zoom:{browser:!0,export:!1,server:!1},viewModeEnabled:{browser:!1,export:!1,server:!1},pendingImageElementId:{browser:!1,export:!1,server:!1},showHyperlinkPopup:{browser:!1,export:!1,server:!1},selectedLinearElement:{browser:!0,export:!1,server:!1},snapLines:{browser:!1,export:!1,server:!1},originSnapOffset:{browser:!1,export:!1,server:!1},objectsSnapModeEnabled:{browser:!0,export:!1,server:!1},userToFollow:{browser:!1,export:!1,server:!1},followedBy:{browser:!1,export:!1,server:!1},isCropping:{browser:!1,export:!1,server:!1},croppingElementId:{browser:!1,export:!1,server:!1},searchMatches:{browser:!1,export:!1,server:!1}}),u_=(e,t)=>{const n={};for(const i of Object.keys(e)){const s=MUe[i];if(s!=null&&s[t]){const r=e[i];n[i]=r}}return n},XV=e=>u_(e,"browser"),jV=e=>u_(e,"export"),RUe=e=>u_(e,"server"),So=({activeTool:e})=>e.type==="eraser",Hh=({activeTool:e})=>e.type==="hand",d0=()=>{const e=document.querySelector(".excalidraw-tooltip");if(e)return e;const t=document.createElement("div");return document.body.appendChild(t),t.classList.add("excalidraw-tooltip"),t},YV=(e,t,n="bottom")=>{const i=e.getBoundingClientRect(),s=window.innerWidth,r=window.innerHeight,o=5;let a=t.left+t.width/2-i.width/2;a<0?a=o:a+i.width>=s&&(a=s-i.width-o);let l;n==="bottom"?(l=t.top+t.height+o,l+i.height>=r&&(l=t.top-i.height-o)):(l=t.top-i.height-o,l<0&&(l=t.top+t.height+o)),Object.assign(e.style,{top:`${l}px`,left:`${a}px`})},kUe=(e,t,n,i)=>{t.classList.add("excalidraw-tooltip--visible"),t.style.minWidth=i?"50ch":"10ch",t.style.maxWidth=i?"50ch":"15ch",t.textContent=n;const s=e.getBoundingClientRect();YV(t,s)},ll=({children:e,label:t,long:n=!1,style:i,disabled:s})=>(L.useEffect(()=>()=>d0().classList.remove("excalidraw-tooltip--visible"),[]),s?null:g("div",{className:"excalidraw-tooltip-wrapper",onPointerEnter:r=>kUe(r.currentTarget,d0(),t,n),onPointerLeave:()=>d0().classList.remove("excalidraw-tooltip--visible"),style:i,children:e})),WV='<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">',DUe='<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>',KV='<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>',LUe=`data:${ye.svg},${encodeURIComponent(`${WV}${KV}</svg>`)}`,NUe=`data:${ye.svg},${encodeURIComponent(`${WV}${DUe}${KV}</svg>`)}`,Or=e=>{e&&(e.style.cursor="")},Ct=(e,t)=>{e&&(e.style.cursor=t)};let bo,TM;const ZV=(e,t)=>{const i=()=>{const s=t===Me.DARK;bo=document.createElement("canvas"),bo.theme=t,bo.height=20,bo.width=20;const r=bo.getContext("2d");r.lineWidth=1,r.beginPath(),r.arc(bo.width/2,bo.height/2,5,0,2*Math.PI),r.fillStyle=s?hi.black:hi.white,r.fill(),r.strokeStyle=s?hi.white:hi.black,r.stroke(),TM=bo.toDataURL(ye.svg)};(!bo||bo.theme!==t)&&i(),Ct(e,`url(${TM}) ${20/2} ${20/2}, auto`)},vo=(e,t)=>{if(e)if(t.activeTool.type==="selection")Or(e);else if(Hh(t))e.style.cursor=wt.GRAB;else if(So(t))ZV(e,t.theme);else if(t.activeTool.type==="laser"){const n=t.theme===Me.LIGHT?LUe:NUe;e.style.cursor=`url(${n}), auto`}else["image","custom"].includes(t.activeTool.type)?t.activeTool.type!=="image"&&(e.style.cursor=wt.AUTO):e.style.cursor=wt.CROSSHAIR},Ru=({viewportX:e,viewportY:t,nextZoom:n},i)=>{const s=e-i.offsetLeft,r=t-i.offsetTop,o=i.zoom.value,a=i.scrollX+(s-s/o),l=i.scrollY+(r-r/o),c=-(s-s/n),u=-(r-r/n);return{scrollX:a+c,scrollY:l+u,zoom:{value:n}}};oe({name:"changeViewBackgroundColor",label:"labels.canvasBackground",trackEvent:!1,predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.changeViewBackgroundColor&&!t.viewModeEnabled,perform:(e,t,n)=>({appState:{...t,...n},captureUpdate:n.viewBackgroundColor?K.IMMEDIATELY:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:i})=>g(o_,{palette:null,topPicks:WP,label:k("labels.canvasBackground"),type:"canvasBackground",color:t.viewBackgroundColor,onChange:s=>n({viewBackgroundColor:s}),"data-testid":"canvas-background-picker",elements:e,appState:t,updateData:n})});const f0=oe({name:"clearCanvas",label:"labels.clearCanvas",icon:Oc,trackEvent:{category:"canvas"},predicate:(e,t,n,i)=>{var s;return!!i.props.UIOptions.canvasActions.clearCanvas&&!t.viewModeEnabled&&((s=t.openDialog)==null?void 0:s.name)!=="elementLinkSelector"},perform:(e,t,n,i)=>(i.imageCache.clear(),{elements:e.map(s=>Ie(s,{isDeleted:!0})),appState:{...Jo(),files:{},theme:t.theme,penMode:t.penMode,penDetected:t.penDetected,exportBackground:t.exportBackground,exportEmbedScene:t.exportEmbedScene,gridSize:t.gridSize,gridStep:t.gridStep,gridModeEnabled:t.gridModeEnabled,stats:t.stats,pasteDialog:t.pasteDialog,activeTool:t.activeTool.type==="image"?{...t.activeTool,type:"selection"}:t.activeTool},captureUpdate:K.IMMEDIATELY})}),SM=oe({name:"zoomIn",label:"buttons.zoomIn",viewMode:!0,icon:AA,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...Ru({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Fa(t.zoom.value+c5)},t),userToFollow:null},captureUpdate:K.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(Ye,{type:"button",className:"zoom-in-button zoom-button",icon:AA,title:`${k("buttons.zoomIn")} — ${Q("CtrlOrCmd++")}`,"aria-label":k("buttons.zoomIn"),disabled:t.zoom.value>=P9,onClick:()=>{e(null)}}),keyTest:e=>(e.code===et.EQUAL||e.code===et.NUM_ADD)&&(e[z.CTRL_OR_CMD]||e.shiftKey)}),IM=oe({name:"zoomOut",label:"buttons.zoomOut",icon:MA,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...Ru({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Fa(t.zoom.value-c5)},t),userToFollow:null},captureUpdate:K.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(Ye,{type:"button",className:"zoom-out-button zoom-button",icon:MA,title:`${k("buttons.zoomOut")} — ${Q("CtrlOrCmd+-")}`,"aria-label":k("buttons.zoomOut"),disabled:t.zoom.value<=O9,onClick:()=>{e(null)}}),keyTest:e=>(e.code===et.MINUS||e.code===et.NUM_SUBTRACT)&&(e[z.CTRL_OR_CMD]||e.shiftKey)}),xM=oe({name:"resetZoom",label:"buttons.resetZoom",icon:due,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...Ru({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Fa(1)},t),userToFollow:null},captureUpdate:K.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(ll,{label:k("buttons.resetZoom"),style:{height:"100%"},children:P(Ye,{type:"button",className:"reset-zoom-button zoom-button",title:k("buttons.resetZoom"),"aria-label":k("buttons.resetZoom"),onClick:()=>{e(null)},children:[(t.zoom.value*100).toFixed(0),"%"]})}),keyTest:e=>(e.code===et.ZERO||e.code===et.NUM_ZERO)&&(e[z.CTRL_OR_CMD]||e.shiftKey)}),OUe=(e,t,n=1)=>{const[i,s,r,o]=e,a=r-i,l=t.width/a,c=o-s,u=t.height/c,f=Math.min(l,u)*Xe(n,.1,1);return Math.min(f,1)},qV=({bounds:e,appState:t,canvasOffsets:n,fitToViewport:i=!1,viewportZoomFactor:s=1,minZoom:r=-1/0,maxZoom:o=1/0})=>{s=Xe(s,O9,P9);const[a,l,c,u]=e,d=(a+c)/2,f=(l+u)/2,h=(n==null?void 0:n.left)??0,m=(n==null?void 0:n.top)??0,p=(n==null?void 0:n.right)??0,U=(n==null?void 0:n.bottom)??0,y=t.width-h-p,E=t.height-m-U;let v;if(i){const M=c-a,T=u-l;v=Math.min(y/M,E/T)*s}else v=OUe(e,{width:y,height:E},s);const w=Fa(Xe(qie(v,c5,"floor"),r,o)),I=aH({scenePoint:{x:d,y:f},viewportDimensions:{width:t.width,height:t.height},offsets:n,zoom:{value:w}});return{appState:{...t,scrollX:I.scrollX,scrollY:I.scrollY,zoom:{value:w}},captureUpdate:K.EVENTUALLY}},$5=({canvasOffsets:e,targetElements:t,appState:n,fitToViewport:i,viewportZoomFactor:s,minZoom:r,maxZoom:o})=>{const a=xt(Bt(t));return qV({canvasOffsets:e,bounds:a,appState:n,fitToViewport:i,viewportZoomFactor:s,minZoom:r,maxZoom:o})};oe({name:"zoomToFitSelectionInViewport",label:"labels.zoomToFitViewport",icon:Vw,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const s=i.scene.getSelectedElements(t);return $5({targetElements:s.length?s:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:i.getEditorUIOffsets()})},keyTest:e=>e.code===et.TWO&&e.shiftKey&&!e.altKey&&!e[z.CTRL_OR_CMD]});oe({name:"zoomToFitSelection",label:"helpDialog.zoomToSelection",icon:Vw,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const s=i.scene.getSelectedElements(t);return $5({targetElements:s.length?s:e,appState:{...t,userToFollow:null},fitToViewport:!0,canvasOffsets:i.getEditorUIOffsets()})},keyTest:e=>e.code===et.THREE&&e.shiftKey&&!e.altKey&&!e[z.CTRL_OR_CMD]});oe({name:"zoomToFit",label:"helpDialog.zoomToFit",icon:Vw,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>$5({targetElements:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:i.getEditorUIOffsets()}),keyTest:e=>e.code===et.ONE&&e.shiftKey&&!e.altKey&&!e[z.CTRL_OR_CMD]});const t6=oe({name:"toggleTheme",label:(e,t)=>t.theme===Me.DARK?"buttons.lightMode":"buttons.darkMode",keywords:["toggle","dark","light","mode","theme"],icon:e=>e.theme===Me.LIGHT?c4:u4,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n)=>({appState:{...t,theme:n||(t.theme===Me.LIGHT?Me.DARK:Me.LIGHT)},captureUpdate:K.EVENTUALLY}),keyTest:e=>e.altKey&&e.shiftKey&&e.code===et.D,predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.toggleTheme});oe({name:"toggleEraserTool",label:"toolBar.eraser",trackEvent:{category:"toolbar"},perform:(e,t)=>{let n;return So(t)?n=en(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):n=en(t,{type:"eraser",lastActiveToolBeforeEraser:t.activeTool}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:n},captureUpdate:K.IMMEDIATELY}},keyTest:e=>e.key===z.E});oe({name:"toggleLassoTool",label:"toolBar.lasso",icon:a4,trackEvent:{category:"toolbar"},perform:(e,t,n,i)=>{let s;return t.activeTool.type!=="lasso"?(s=en(t,{type:"lasso",fromSelection:!1}),Ct(i.interactiveCanvas,wt.CROSSHAIR)):s=en(t,{type:"selection"}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:s},captureUpdate:K.NEVER}}});const PUe=oe({name:"toggleHandTool",label:"toolBar.hand",trackEvent:{category:"toolbar"},icon:wH,viewMode:!1,perform:(e,t,n,i)=>{let s;return Hh(t)?s=en(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):(s=en(t,{type:"hand",lastActiveToolBeforeEraser:t.activeTool}),Ct(i.interactiveCanvas,wt.GRAB)),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:s},captureUpdate:K.IMMEDIATELY}},keyTest:e=>!e.altKey&&!e[z.CTRL_OR_CMD]&&e.key===z.H});oe({name:"setEmbeddableAsActiveTool",trackEvent:{category:"toolbar"},target:"Tool",label:"toolBar.embeddable",perform:(e,t,n,i)=>{const s=en(t,{type:"embeddable"});return vo(i.canvas,{...t,activeTool:s}),{elements:e,appState:{...t,activeTool:en(t,{type:"embeddable"})},captureUpdate:K.EVENTUALLY}}});const Lr=oe({name:"finalize",label:"",trackEvent:!1,perform:(e,t,n,i)=>{var f;const{interactiveCanvas:s,focusContainer:r,scene:o}=i,a=o.getNonDeletedElementsMap();if(t.editingLinearElement){const{elementId:h,startBindingElement:m,endBindingElement:p}=t.editingLinearElement,U=le.getElement(h,a);if(U)return Ca(U)&&w5(U,m,p,o),{elements:U.points.length<2||gd(U)?e.filter(y=>y.id!==U.id):void 0,appState:{...t,cursorButton:"up",editingLinearElement:null},captureUpdate:K.IMMEDIATELY}}let l=e;const c=t.pendingImageElementId&&o.getElement(t.pendingImageElementId);c&&o.mutateElement(c,{isDeleted:!0},{informMutation:!1,isDragging:!1}),window.document.activeElement instanceof HTMLElement&&r();const u=t.multiElement?t.multiElement:((f=t.newElement)==null?void 0:f.type)==="freedraw"?t.newElement:null;if(u){if(u.type!=="freedraw"&&t.lastPointerDownWith!=="touch"){const{points:m,lastCommittedPoint:p}=u;(!p||m[m.length-1]!==p)&&o.mutateElement(u,{points:u.points.slice(0,-1)})}gd(u)&&(l=l.filter(m=>m.id!==u.id));const h=nl(u.points,t.zoom.value);if((u.type==="line"||u.type==="freedraw")&&h){const m=u.points,p=m[0];o.mutateElement(u,{points:m.map((U,y)=>y===m.length-1?S(p[0],p[1]):U)})}if(Ca(u)&&!h&&u.points.length>1){const[m,p]=le.getPointAtIndexGlobalCoordinates(u,-1,_e(e));B3(u,t,{x:m,y:p},o)}}(!t.activeTool.locked&&t.activeTool.type!=="freedraw"||!u)&&Or(s);let d;return t.activeTool.type==="eraser"?d=en(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):d=en(t,{type:"selection"}),{elements:l,appState:{...t,cursorButton:"up",activeTool:(t.activeTool.locked||t.activeTool.type==="freedraw")&&u?t.activeTool:d,activeEmbeddable:null,newElement:null,selectionElement:null,multiElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:u&&!t.activeTool.locked&&t.activeTool.type!=="freedraw"?{...t.selectedElementIds,[u.id]:!0}:t.selectedElementIds,selectedLinearElement:u&&Ae(u)?new le(u,_e(l)):t.selectedLinearElement,pendingImageElementId:null},captureUpdate:K.IMMEDIATELY}},keyTest:(e,t)=>e.key===z.ESCAPE&&(t.editingLinearElement!==null||!t.newElement&&t.multiElement===null)||(e.key===z.ESCAPE||e.key===z.ENTER)&&t.multiElement!==null,PanelComponent:({appState:e,updateData:t,data:n})=>g(Ye,{type:"button",icon:Eue,title:k("buttons.done"),"aria-label":k("buttons.done"),onClick:t,visible:e.multiElement!=null,size:(n==null?void 0:n.size)||"medium",style:{pointerEvents:"all"}})}),d_=({children:e,checked:t,onChange:n,className:i})=>P("div",{className:pe("Checkbox",i,{"is-checked":t}),onClick:s=>{n(!t,s),s.currentTarget.querySelector(".Checkbox-box").focus()},children:[g("button",{type:"button",className:"Checkbox-box",role:"checkbox","aria-checked":t,children:gue}),g("div",{className:"Checkbox-label",children:e})]}),FUe=e=>{const t=e.title||(e.value===Me.DARK?k("buttons.lightMode"):k("buttons.darkMode"));return g(Ye,{type:"icon",icon:e.value===Me.LIGHT?CM.MOON:CM.SUN,title:t,"aria-label":t,onClick:()=>e.onChange(e.value===Me.DARK?Me.LIGHT:Me.DARK),"data-testid":"toggle-dark-mode"})},CM={SUN:g("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:g("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})}),MOON:g("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:g("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"})})},BUe=e=>{const{id:t}=oa(),[n,i]=L.useState(e.value),s=o=>{e.ignoreFocus||Tse(o.target);const a=o.target.value;a!==e.value&&e.onChange(a)},r=o=>{if(o.key===z.ENTER){if(o.preventDefault(),o.nativeEvent.isComposing||o.keyCode===229)return;o.currentTarget.blur()}};return P("div",{className:"ProjectName",children:[g("label",{className:"ProjectName-label",htmlFor:"filename",children:`${e.label}:`}),g("input",{type:"text",className:"TextInput",onBlur:s,onKeyDown:r,id:`${t}-filename`,value:n,onChange:o=>i(o.target.value)})]})};/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */const zUe=4,AM=0,MM=1,HUe=2;function Ug(e){let t=e.length;for(;--t>=0;)e[t]=0}const VUe=0,QV=1,$Ue=2,GUe=3,XUe=258,f_=29,fp=256,sm=fp+1+f_,lh=30,h_=19,JV=2*sm+1,ku=15,bE=16,jUe=7,g_=256,e$=16,t$=17,n$=18,S4=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),y2=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),YUe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),i$=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),WUe=512,Ea=new Array((sm+2)*2);Ug(Ea);const h0=new Array(lh*2);Ug(h0);const rm=new Array(WUe);Ug(rm);const om=new Array(XUe-GUe+1);Ug(om);const m_=new Array(f_);Ug(m_);const n6=new Array(lh);Ug(n6);function yE(e,t,n,i,s){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=s,this.has_stree=e&&e.length}let s$,r$,o$;function EE(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const a$=e=>e<256?rm[e]:rm[256+(e>>>7)],am=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},ps=(e,t,n)=>{e.bi_valid>bE-n?(e.bi_buf|=t<<e.bi_valid&65535,am(e,e.bi_buf),e.bi_buf=t>>bE-e.bi_valid,e.bi_valid+=n-bE):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},ko=(e,t,n)=>{ps(e,n[t*2],n[t*2+1])},l$=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},KUe=e=>{e.bi_valid===16?(am(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},ZUe=(e,t)=>{const n=t.dyn_tree,i=t.max_code,s=t.stat_desc.static_tree,r=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,d,f,h,m,p=0;for(f=0;f<=ku;f++)e.bl_count[f]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<JV;c++)u=e.heap[c],f=n[n[u*2+1]*2+1]+1,f>l&&(f=l,p++),n[u*2+1]=f,!(u>i)&&(e.bl_count[f]++,h=0,u>=a&&(h=o[u-a]),m=n[u*2],e.opt_len+=m*(f+h),r&&(e.static_len+=m*(s[u*2+1]+h)));if(p!==0){do{for(f=l-1;e.bl_count[f]===0;)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[l]--,p-=2}while(p>0);for(f=l;f!==0;f--)for(u=e.bl_count[f];u!==0;)d=e.heap[--c],!(d>i)&&(n[d*2+1]!==f&&(e.opt_len+=(f-n[d*2+1])*n[d*2],n[d*2+1]=f),u--)}},c$=(e,t,n)=>{const i=new Array(ku+1);let s=0,r,o;for(r=1;r<=ku;r++)i[r]=s=s+n[r-1]<<1;for(o=0;o<=t;o++){let a=e[o*2+1];a!==0&&(e[o*2]=l$(i[a]++,a))}},qUe=()=>{let e,t,n,i,s;const r=new Array(ku+1);for(n=0,i=0;i<f_-1;i++)for(m_[i]=n,e=0;e<1<<S4[i];e++)om[n++]=i;for(om[n-1]=i,s=0,i=0;i<16;i++)for(n6[i]=s,e=0;e<1<<y2[i];e++)rm[s++]=i;for(s>>=7;i<lh;i++)for(n6[i]=s<<7,e=0;e<1<<y2[i]-7;e++)rm[256+s++]=i;for(t=0;t<=ku;t++)r[t]=0;for(e=0;e<=143;)Ea[e*2+1]=8,e++,r[8]++;for(;e<=255;)Ea[e*2+1]=9,e++,r[9]++;for(;e<=279;)Ea[e*2+1]=7,e++,r[7]++;for(;e<=287;)Ea[e*2+1]=8,e++,r[8]++;for(c$(Ea,sm+1,r),e=0;e<lh;e++)h0[e*2+1]=5,h0[e*2]=l$(e,5);s$=new yE(Ea,S4,fp+1,sm,ku),r$=new yE(h0,y2,0,lh,ku),o$=new yE(new Array(0),YUe,0,h_,jUe)},u$=e=>{let t;for(t=0;t<sm;t++)e.dyn_ltree[t*2]=0;for(t=0;t<lh;t++)e.dyn_dtree[t*2]=0;for(t=0;t<h_;t++)e.bl_tree[t*2]=0;e.dyn_ltree[g_*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},d$=e=>{e.bi_valid>8?am(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},QUe=(e,t,n,i)=>{d$(e),am(e,n),am(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},RM=(e,t,n,i)=>{const s=t*2,r=n*2;return e[s]<e[r]||e[s]===e[r]&&i[t]<=i[n]},vE=(e,t,n)=>{const i=e.heap[n];let s=n<<1;for(;s<=e.heap_len&&(s<e.heap_len&&RM(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!RM(t,i,e.heap[s],e.depth));)e.heap[n]=e.heap[s],n=s,s<<=1;e.heap[n]=i},kM=(e,t,n)=>{let i,s,r=0,o,a;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+r*2]<<8|e.pending_buf[e.d_buf+r*2+1],s=e.pending_buf[e.l_buf+r],r++,i===0?ko(e,s,t):(o=om[s],ko(e,o+fp+1,t),a=S4[o],a!==0&&(s-=m_[o],ps(e,s,a)),i--,o=a$(i),ko(e,o,n),a=y2[o],a!==0&&(i-=n6[o],ps(e,i,a)));while(r<e.last_lit);ko(e,g_,t)},I4=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,r=t.stat_desc.elems;let o,a,l=-1,c;for(e.heap_len=0,e.heap_max=JV,o=0;o<r;o++)n[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,s&&(e.static_len-=i[c*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)vE(e,n,o);c=r;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],vE(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[c*2]=n[o*2]+n[a*2],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[o*2+1]=n[a*2+1]=c,e.heap[1]=c++,vE(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],ZUe(e,t),c$(n,l,e.bl_count)},DM=(e,t,n)=>{let i,s=-1,r,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)r=o,o=t[(i+1)*2+1],!(++a<l&&r===o)&&(a<c?e.bl_tree[r*2]+=a:r!==0?(r!==s&&e.bl_tree[r*2]++,e.bl_tree[e$*2]++):a<=10?e.bl_tree[t$*2]++:e.bl_tree[n$*2]++,a=0,s=r,o===0?(l=138,c=3):r===o?(l=6,c=3):(l=7,c=4))},LM=(e,t,n)=>{let i,s=-1,r,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),i=0;i<=n;i++)if(r=o,o=t[(i+1)*2+1],!(++a<l&&r===o)){if(a<c)do ko(e,r,e.bl_tree);while(--a!==0);else r!==0?(r!==s&&(ko(e,r,e.bl_tree),a--),ko(e,e$,e.bl_tree),ps(e,a-3,2)):a<=10?(ko(e,t$,e.bl_tree),ps(e,a-3,3)):(ko(e,n$,e.bl_tree),ps(e,a-11,7));a=0,s=r,o===0?(l=138,c=3):r===o?(l=6,c=3):(l=7,c=4)}},JUe=e=>{let t;for(DM(e,e.dyn_ltree,e.l_desc.max_code),DM(e,e.dyn_dtree,e.d_desc.max_code),I4(e,e.bl_desc),t=h_-1;t>=3&&e.bl_tree[i$[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},e2e=(e,t,n,i)=>{let s;for(ps(e,t-257,5),ps(e,n-1,5),ps(e,i-4,4),s=0;s<i;s++)ps(e,e.bl_tree[i$[s]*2+1],3);LM(e,e.dyn_ltree,t-1),LM(e,e.dyn_dtree,n-1)},t2e=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return AM;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return MM;for(n=32;n<fp;n++)if(e.dyn_ltree[n*2]!==0)return MM;return AM};let NM=!1;const n2e=e=>{NM||(qUe(),NM=!0),e.l_desc=new EE(e.dyn_ltree,s$),e.d_desc=new EE(e.dyn_dtree,r$),e.bl_desc=new EE(e.bl_tree,o$),e.bi_buf=0,e.bi_valid=0,u$(e)},f$=(e,t,n,i)=>{ps(e,(VUe<<1)+(i?1:0),3),QUe(e,t,n)},i2e=e=>{ps(e,QV<<1,3),ko(e,g_,Ea),KUe(e)},s2e=(e,t,n,i)=>{let s,r,o=0;e.level>0?(e.strm.data_type===HUe&&(e.strm.data_type=t2e(e)),I4(e,e.l_desc),I4(e,e.d_desc),o=JUe(e),s=e.opt_len+3+7>>>3,r=e.static_len+3+7>>>3,r<=s&&(s=r)):s=r=n+5,n+4<=s&&t!==-1?f$(e,t,n,i):e.strategy===zUe||r===s?(ps(e,(QV<<1)+(i?1:0),3),kM(e,Ea,h0)):(ps(e,($Ue<<1)+(i?1:0),3),e2e(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),kM(e,e.dyn_ltree,e.dyn_dtree)),u$(e),i&&d$(e)},r2e=(e,t,n)=>(e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(om[n]+fp+1)*2]++,e.dyn_dtree[a$(t)*2]++),e.last_lit===e.lit_bufsize-1);var o2e=n2e,a2e=f$,l2e=s2e,c2e=r2e,u2e=i2e,d2e={_tr_init:o2e,_tr_stored_block:a2e,_tr_flush_block:l2e,_tr_tally:c2e,_tr_align:u2e};const f2e=(e,t,n,i)=>{let s=e&65535|0,r=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do s=s+t[i++]|0,r=r+s|0;while(--o);s%=65521,r%=65521}return s|r<<16|0};var lm=f2e;const h2e=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},g2e=new Uint32Array(h2e()),m2e=(e,t,n,i)=>{const s=g2e,r=i+n;e^=-1;for(let o=i;o<r;o++)e=e>>>8^s[(e^t[o])&255];return e^-1};var oi=m2e,bd={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},G5={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:p2e,_tr_stored_block:U2e,_tr_flush_block:b2e,_tr_tally:gc,_tr_align:y2e}=d2e,{Z_NO_FLUSH:Bd,Z_PARTIAL_FLUSH:E2e,Z_FULL_FLUSH:v2e,Z_FINISH:mc,Z_BLOCK:OM,Z_OK:Do,Z_STREAM_END:PM,Z_STREAM_ERROR:vr,Z_DATA_ERROR:w2e,Z_BUF_ERROR:wE,Z_DEFAULT_COMPRESSION:_2e,Z_FILTERED:T2e,Z_HUFFMAN_ONLY:wU,Z_RLE:S2e,Z_FIXED:I2e,Z_DEFAULT_STRATEGY:x2e,Z_UNKNOWN:C2e,Z_DEFLATED:X5}=G5,A2e=9,M2e=15,R2e=8,k2e=29,D2e=256,x4=D2e+1+k2e,L2e=30,N2e=19,O2e=2*x4+1,P2e=15,ot=3,Ql=258,to=Ql+ot+1,F2e=32,j5=42,C4=69,E2=73,v2=91,w2=103,Du=113,x1=666,Jn=1,hp=2,yd=3,bg=4,B2e=3,Jl=(e,t)=>(e.msg=bd[t],t),FM=e=>(e<<1)-(e>4?9:0),Yl=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let z2e=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,pc=z2e;const Dl=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},Si=(e,t)=>{b2e(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Dl(e.strm)},vt=(e,t)=>{e.pending_buf[e.pending++]=t},n1=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},H2e=(e,t,n,i)=>{let s=e.avail_in;return s>i&&(s=i),s===0?0:(e.avail_in-=s,t.set(e.input.subarray(e.next_in,e.next_in+s),n),e.state.wrap===1?e.adler=lm(e.adler,t,s,n):e.state.wrap===2&&(e.adler=oi(e.adler,t,s,n)),e.next_in+=s,e.total_in+=s,s)},h$=(e,t)=>{let n=e.max_chain_length,i=e.strstart,s,r,o=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-to?e.strstart-(e.w_size-to):0,c=e.window,u=e.w_mask,d=e.prev,f=e.strstart+Ql;let h=c[i+o-1],m=c[i+o];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(s=t,!(c[s+o]!==m||c[s+o-1]!==h||c[s]!==c[i]||c[++s]!==c[i+1])){i+=2,s++;do;while(c[++i]===c[++s]&&c[++i]===c[++s]&&c[++i]===c[++s]&&c[++i]===c[++s]&&c[++i]===c[++s]&&c[++i]===c[++s]&&c[++i]===c[++s]&&c[++i]===c[++s]&&i<f);if(r=Ql-(f-i),i=f-Ql,r>o){if(e.match_start=t,o=r,r>=a)break;h=c[i+o-1],m=c[i+o]}}while((t=d[t&u])>l&&--n!==0);return o<=e.lookahead?o:e.lookahead},Ed=e=>{const t=e.w_size;let n,i,s,r,o;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-to)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do s=e.head[--n],e.head[n]=s>=t?s-t:0;while(--i);i=t,n=i;do s=e.prev[--n],e.prev[n]=s>=t?s-t:0;while(--i);r+=t}if(e.strm.avail_in===0)break;if(i=H2e(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=i,e.lookahead+e.insert>=ot)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=pc(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=pc(e,e.ins_h,e.window[o+ot-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<ot)););}while(e.lookahead<to&&e.strm.avail_in!==0)},V2e=(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Ed(e),e.lookahead===0&&t===Bd)return Jn;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;const i=e.block_start+n;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,Si(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-to&&(Si(e,!1),e.strm.avail_out===0))return Jn}return e.insert=0,t===mc?(Si(e,!0),e.strm.avail_out===0?yd:bg):(e.strstart>e.block_start&&(Si(e,!1),e.strm.avail_out===0),Jn)},_E=(e,t)=>{let n,i;for(;;){if(e.lookahead<to){if(Ed(e),e.lookahead<to&&t===Bd)return Jn;if(e.lookahead===0)break}if(n=0,e.lookahead>=ot&&(e.ins_h=pc(e,e.ins_h,e.window[e.strstart+ot-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-to&&(e.match_length=h$(e,n)),e.match_length>=ot)if(i=gc(e,e.strstart-e.match_start,e.match_length-ot),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ot){e.match_length--;do e.strstart++,e.ins_h=pc(e,e.ins_h,e.window[e.strstart+ot-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=pc(e,e.ins_h,e.window[e.strstart+1]);else i=gc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(Si(e,!1),e.strm.avail_out===0))return Jn}return e.insert=e.strstart<ot-1?e.strstart:ot-1,t===mc?(Si(e,!0),e.strm.avail_out===0?yd:bg):e.last_lit&&(Si(e,!1),e.strm.avail_out===0)?Jn:hp},sf=(e,t)=>{let n,i,s;for(;;){if(e.lookahead<to){if(Ed(e),e.lookahead<to&&t===Bd)return Jn;if(e.lookahead===0)break}if(n=0,e.lookahead>=ot&&(e.ins_h=pc(e,e.ins_h,e.window[e.strstart+ot-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ot-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-to&&(e.match_length=h$(e,n),e.match_length<=5&&(e.strategy===T2e||e.match_length===ot&&e.strstart-e.match_start>4096)&&(e.match_length=ot-1)),e.prev_length>=ot&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-ot,i=gc(e,e.strstart-1-e.prev_match,e.prev_length-ot),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=s&&(e.ins_h=pc(e,e.ins_h,e.window[e.strstart+ot-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=ot-1,e.strstart++,i&&(Si(e,!1),e.strm.avail_out===0))return Jn}else if(e.match_available){if(i=gc(e,0,e.window[e.strstart-1]),i&&Si(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Jn}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=gc(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ot-1?e.strstart:ot-1,t===mc?(Si(e,!0),e.strm.avail_out===0?yd:bg):e.last_lit&&(Si(e,!1),e.strm.avail_out===0)?Jn:hp},$2e=(e,t)=>{let n,i,s,r;const o=e.window;for(;;){if(e.lookahead<=Ql){if(Ed(e),e.lookahead<=Ql&&t===Bd)return Jn;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=ot&&e.strstart>0&&(s=e.strstart-1,i=o[s],i===o[++s]&&i===o[++s]&&i===o[++s])){r=e.strstart+Ql;do;while(i===o[++s]&&i===o[++s]&&i===o[++s]&&i===o[++s]&&i===o[++s]&&i===o[++s]&&i===o[++s]&&i===o[++s]&&s<r);e.match_length=Ql-(r-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ot?(n=gc(e,1,e.match_length-ot),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=gc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Si(e,!1),e.strm.avail_out===0))return Jn}return e.insert=0,t===mc?(Si(e,!0),e.strm.avail_out===0?yd:bg):e.last_lit&&(Si(e,!1),e.strm.avail_out===0)?Jn:hp},G2e=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(Ed(e),e.lookahead===0)){if(t===Bd)return Jn;break}if(e.match_length=0,n=gc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Si(e,!1),e.strm.avail_out===0))return Jn}return e.insert=0,t===mc?(Si(e,!0),e.strm.avail_out===0?yd:bg):e.last_lit&&(Si(e,!1),e.strm.avail_out===0)?Jn:hp};function yo(e,t,n,i,s){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=s}const C1=[new yo(0,0,0,0,V2e),new yo(4,4,8,4,_E),new yo(4,5,16,8,_E),new yo(4,6,32,32,_E),new yo(4,4,16,16,sf),new yo(8,16,32,32,sf),new yo(8,16,128,128,sf),new yo(8,32,128,256,sf),new yo(32,128,258,1024,sf),new yo(32,258,258,4096,sf)],X2e=e=>{e.window_size=2*e.w_size,Yl(e.head),e.max_lazy_match=C1[e.level].max_lazy,e.good_match=C1[e.level].good_length,e.nice_match=C1[e.level].nice_length,e.max_chain_length=C1[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ot-1,e.match_available=0,e.ins_h=0};function j2e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=X5,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(O2e*2),this.dyn_dtree=new Uint16Array((2*L2e+1)*2),this.bl_tree=new Uint16Array((2*N2e+1)*2),Yl(this.dyn_ltree),Yl(this.dyn_dtree),Yl(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(P2e+1),this.heap=new Uint16Array(2*x4+1),Yl(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*x4+1),Yl(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const g$=e=>{if(!e||!e.state)return Jl(e,vr);e.total_in=e.total_out=0,e.data_type=C2e;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?j5:Du,e.adler=t.wrap===2?0:1,t.last_flush=Bd,p2e(t),Do},m$=e=>{const t=g$(e);return t===Do&&X2e(e.state),t},Y2e=(e,t)=>!e||!e.state||e.state.wrap!==2?vr:(e.state.gzhead=t,Do),p$=(e,t,n,i,s,r)=>{if(!e)return vr;let o=1;if(t===_2e&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),s<1||s>A2e||n!==X5||i<8||i>15||t<0||t>9||r<0||r>I2e)return Jl(e,vr);i===8&&(i=9);const a=new j2e;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+ot-1)/ot),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=r,a.method=n,m$(e)},W2e=(e,t)=>p$(e,t,X5,M2e,R2e,x2e),K2e=(e,t)=>{let n,i;if(!e||!e.state||t>OM||t<0)return e?Jl(e,vr):vr;const s=e.state;if(!e.output||!e.input&&e.avail_in!==0||s.status===x1&&t!==mc)return Jl(e,e.avail_out===0?wE:vr);s.strm=e;const r=s.last_flush;if(s.last_flush=t,s.status===j5)if(s.wrap===2)e.adler=0,vt(s,31),vt(s,139),vt(s,8),s.gzhead?(vt(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),vt(s,s.gzhead.time&255),vt(s,s.gzhead.time>>8&255),vt(s,s.gzhead.time>>16&255),vt(s,s.gzhead.time>>24&255),vt(s,s.level===9?2:s.strategy>=wU||s.level<2?4:0),vt(s,s.gzhead.os&255),s.gzhead.extra&&s.gzhead.extra.length&&(vt(s,s.gzhead.extra.length&255),vt(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=oi(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=C4):(vt(s,0),vt(s,0),vt(s,0),vt(s,0),vt(s,0),vt(s,s.level===9?2:s.strategy>=wU||s.level<2?4:0),vt(s,B2e),s.status=Du);else{let o=X5+(s.w_bits-8<<4)<<8,a=-1;s.strategy>=wU||s.level<2?a=0:s.level<6?a=1:s.level===6?a=2:a=3,o|=a<<6,s.strstart!==0&&(o|=F2e),o+=31-o%31,s.status=Du,n1(s,o),s.strstart!==0&&(n1(s,e.adler>>>16),n1(s,e.adler&65535)),e.adler=1}if(s.status===C4)if(s.gzhead.extra){for(n=s.pending;s.gzindex<(s.gzhead.extra.length&65535)&&!(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>n&&(e.adler=oi(e.adler,s.pending_buf,s.pending-n,n)),Dl(e),n=s.pending,s.pending===s.pending_buf_size));)vt(s,s.gzhead.extra[s.gzindex]&255),s.gzindex++;s.gzhead.hcrc&&s.pending>n&&(e.adler=oi(e.adler,s.pending_buf,s.pending-n,n)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=E2)}else s.status=E2;if(s.status===E2)if(s.gzhead.name){n=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>n&&(e.adler=oi(e.adler,s.pending_buf,s.pending-n,n)),Dl(e),n=s.pending,s.pending===s.pending_buf_size)){i=1;break}s.gzindex<s.gzhead.name.length?i=s.gzhead.name.charCodeAt(s.gzindex++)&255:i=0,vt(s,i)}while(i!==0);s.gzhead.hcrc&&s.pending>n&&(e.adler=oi(e.adler,s.pending_buf,s.pending-n,n)),i===0&&(s.gzindex=0,s.status=v2)}else s.status=v2;if(s.status===v2)if(s.gzhead.comment){n=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>n&&(e.adler=oi(e.adler,s.pending_buf,s.pending-n,n)),Dl(e),n=s.pending,s.pending===s.pending_buf_size)){i=1;break}s.gzindex<s.gzhead.comment.length?i=s.gzhead.comment.charCodeAt(s.gzindex++)&255:i=0,vt(s,i)}while(i!==0);s.gzhead.hcrc&&s.pending>n&&(e.adler=oi(e.adler,s.pending_buf,s.pending-n,n)),i===0&&(s.status=w2)}else s.status=w2;if(s.status===w2&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&Dl(e),s.pending+2<=s.pending_buf_size&&(vt(s,e.adler&255),vt(s,e.adler>>8&255),e.adler=0,s.status=Du)):s.status=Du),s.pending!==0){if(Dl(e),e.avail_out===0)return s.last_flush=-1,Do}else if(e.avail_in===0&&FM(t)<=FM(r)&&t!==mc)return Jl(e,wE);if(s.status===x1&&e.avail_in!==0)return Jl(e,wE);if(e.avail_in!==0||s.lookahead!==0||t!==Bd&&s.status!==x1){let o=s.strategy===wU?G2e(s,t):s.strategy===S2e?$2e(s,t):C1[s.level].func(s,t);if((o===yd||o===bg)&&(s.status=x1),o===Jn||o===yd)return e.avail_out===0&&(s.last_flush=-1),Do;if(o===hp&&(t===E2e?y2e(s):t!==OM&&(U2e(s,0,0,!1),t===v2e&&(Yl(s.head),s.lookahead===0&&(s.strstart=0,s.block_start=0,s.insert=0))),Dl(e),e.avail_out===0))return s.last_flush=-1,Do}return t!==mc?Do:s.wrap<=0?PM:(s.wrap===2?(vt(s,e.adler&255),vt(s,e.adler>>8&255),vt(s,e.adler>>16&255),vt(s,e.adler>>24&255),vt(s,e.total_in&255),vt(s,e.total_in>>8&255),vt(s,e.total_in>>16&255),vt(s,e.total_in>>24&255)):(n1(s,e.adler>>>16),n1(s,e.adler&65535)),Dl(e),s.wrap>0&&(s.wrap=-s.wrap),s.pending!==0?Do:PM)},Z2e=e=>{if(!e||!e.state)return vr;const t=e.state.status;return t!==j5&&t!==C4&&t!==E2&&t!==v2&&t!==w2&&t!==Du&&t!==x1?Jl(e,vr):(e.state=null,t===Du?Jl(e,w2e):Do)},q2e=(e,t)=>{let n=t.length;if(!e||!e.state)return vr;const i=e.state,s=i.wrap;if(s===2||s===1&&i.status!==j5||i.lookahead)return vr;if(s===1&&(e.adler=lm(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){s===0&&(Yl(i.head),i.strstart=0,i.block_start=0,i.insert=0);let l=new Uint8Array(i.w_size);l.set(t.subarray(n-i.w_size,n),0),t=l,n=i.w_size}const r=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Ed(i);i.lookahead>=ot;){let l=i.strstart,c=i.lookahead-(ot-1);do i.ins_h=pc(i,i.ins_h,i.window[l+ot-1]),i.prev[l&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=l,l++;while(--c);i.strstart=l,i.lookahead=ot-1,Ed(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=ot-1,i.match_available=0,e.next_in=o,e.input=a,e.avail_in=r,i.wrap=s,Do};var Q2e=W2e,J2e=p$,ebe=m$,tbe=g$,nbe=Y2e,ibe=K2e,sbe=Z2e,rbe=q2e,obe="pako deflate (from Nodeca project)",g0={deflateInit:Q2e,deflateInit2:J2e,deflateReset:ebe,deflateResetKeep:tbe,deflateSetHeader:nbe,deflate:ibe,deflateEnd:sbe,deflateSetDictionary:rbe,deflateInfo:obe};const abe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var lbe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const i in n)abe(n,i)&&(e[i]=n[i])}}return e},cbe=e=>{let t=0;for(let i=0,s=e.length;i<s;i++)t+=e[i].length;const n=new Uint8Array(t);for(let i=0,s=0,r=e.length;i<r;i++){let o=e[i];n.set(o,s),s+=o.length}return n},Y5={assign:lbe,flattenChunks:cbe};let U$=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{U$=!1}const cm=new Uint8Array(256);for(let e=0;e<256;e++)cm[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;cm[254]=cm[254]=1;var ube=e=>{let t,n,i,s,r,o=e.length,a=0;for(s=0;s<o;s++)n=e.charCodeAt(s),(n&64512)===55296&&s+1<o&&(i=e.charCodeAt(s+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),s++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),r=0,s=0;r<a;s++)n=e.charCodeAt(s),(n&64512)===55296&&s+1<o&&(i=e.charCodeAt(s+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),s++)),n<128?t[r++]=n:n<2048?(t[r++]=192|n>>>6,t[r++]=128|n&63):n<65536?(t[r++]=224|n>>>12,t[r++]=128|n>>>6&63,t[r++]=128|n&63):(t[r++]=240|n>>>18,t[r++]=128|n>>>12&63,t[r++]=128|n>>>6&63,t[r++]=128|n&63);return t};const dbe=(e,t)=>{if(t<65534&&e.subarray&&U$)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n};var fbe=(e,t)=>{let n,i;const s=t||e.length,r=new Array(s*2);for(i=0,n=0;n<s;){let o=e[n++];if(o<128){r[i++]=o;continue}let a=cm[o];if(a>4){r[i++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<s;)o=o<<6|e[n++]&63,a--;if(a>1){r[i++]=65533;continue}o<65536?r[i++]=o:(o-=65536,r[i++]=55296|o>>10&1023,r[i++]=56320|o&1023)}return dbe(r,i)},hbe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+cm[e[n]]>t?n:t},um={string2buf:ube,buf2string:fbe,utf8border:hbe};function gbe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var b$=gbe;const y$=Object.prototype.toString,{Z_NO_FLUSH:mbe,Z_SYNC_FLUSH:pbe,Z_FULL_FLUSH:Ube,Z_FINISH:bbe,Z_OK:i6,Z_STREAM_END:ybe,Z_DEFAULT_COMPRESSION:Ebe,Z_DEFAULT_STRATEGY:vbe,Z_DEFLATED:wbe}=G5;function W5(e){this.options=Y5.assign({level:Ebe,method:wbe,chunkSize:16384,windowBits:15,memLevel:8,strategy:vbe},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b$,this.strm.avail_out=0;let n=g0.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==i6)throw new Error(bd[n]);if(t.header&&g0.deflateSetHeader(this.strm,t.header),t.dictionary){let i;if(typeof t.dictionary=="string"?i=um.string2buf(t.dictionary):y$.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,n=g0.deflateSetDictionary(this.strm,i),n!==i6)throw new Error(bd[n]);this._dict_set=!0}}W5.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let s,r;if(this.ended)return!1;for(t===~~t?r=t:r=t===!0?bbe:mbe,typeof e=="string"?n.input=um.string2buf(e):y$.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(r===pbe||r===Ube)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(s=g0.deflate(n,r),s===ybe)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),s=g0.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===i6;if(n.avail_out===0){this.onData(n.output);continue}if(r>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};W5.prototype.onData=function(e){this.chunks.push(e)};W5.prototype.onEnd=function(e){e===i6&&(this.result=Y5.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function _be(e,t){const n=new W5(t);if(n.push(e,!0),n.err)throw n.msg||bd[n.err];return n.result}var Tbe=_be,Sbe={deflate:Tbe};const _U=30,Ibe=12;var xbe=function(t,n){let i,s,r,o,a,l,c,u,d,f,h,m,p,U,y,E,v,w,I,M,T,_,x,C;const R=t.state;i=t.next_in,x=t.input,s=i+(t.avail_in-5),r=t.next_out,C=t.output,o=r-(n-t.avail_out),a=r+(t.avail_out-257),l=R.dmax,c=R.wsize,u=R.whave,d=R.wnext,f=R.window,h=R.hold,m=R.bits,p=R.lencode,U=R.distcode,y=(1<<R.lenbits)-1,E=(1<<R.distbits)-1;e:do{m<15&&(h+=x[i++]<<m,m+=8,h+=x[i++]<<m,m+=8),v=p[h&y];t:for(;;){if(w=v>>>24,h>>>=w,m-=w,w=v>>>16&255,w===0)C[r++]=v&65535;else if(w&16){I=v&65535,w&=15,w&&(m<w&&(h+=x[i++]<<m,m+=8),I+=h&(1<<w)-1,h>>>=w,m-=w),m<15&&(h+=x[i++]<<m,m+=8,h+=x[i++]<<m,m+=8),v=U[h&E];n:for(;;){if(w=v>>>24,h>>>=w,m-=w,w=v>>>16&255,w&16){if(M=v&65535,w&=15,m<w&&(h+=x[i++]<<m,m+=8,m<w&&(h+=x[i++]<<m,m+=8)),M+=h&(1<<w)-1,M>l){t.msg="invalid distance too far back",R.mode=_U;break e}if(h>>>=w,m-=w,w=r-o,M>w){if(w=M-w,w>u&&R.sane){t.msg="invalid distance too far back",R.mode=_U;break e}if(T=0,_=f,d===0){if(T+=c-w,w<I){I-=w;do C[r++]=f[T++];while(--w);T=r-M,_=C}}else if(d<w){if(T+=c+d-w,w-=d,w<I){I-=w;do C[r++]=f[T++];while(--w);if(T=0,d<I){w=d,I-=w;do C[r++]=f[T++];while(--w);T=r-M,_=C}}}else if(T+=d-w,w<I){I-=w;do C[r++]=f[T++];while(--w);T=r-M,_=C}for(;I>2;)C[r++]=_[T++],C[r++]=_[T++],C[r++]=_[T++],I-=3;I&&(C[r++]=_[T++],I>1&&(C[r++]=_[T++]))}else{T=r-M;do C[r++]=C[T++],C[r++]=C[T++],C[r++]=C[T++],I-=3;while(I>2);I&&(C[r++]=C[T++],I>1&&(C[r++]=C[T++]))}}else if(w&64){t.msg="invalid distance code",R.mode=_U;break e}else{v=U[(v&65535)+(h&(1<<w)-1)];continue n}break}}else if(w&64)if(w&32){R.mode=Ibe;break e}else{t.msg="invalid literal/length code",R.mode=_U;break e}else{v=p[(v&65535)+(h&(1<<w)-1)];continue t}break}}while(i<s&&r<a);I=m>>3,i-=I,m-=I<<3,h&=(1<<m)-1,t.next_in=i,t.next_out=r,t.avail_in=i<s?5+(s-i):5-(i-s),t.avail_out=r<a?257+(a-r):257-(r-a),R.hold=h,R.bits=m};const rf=15,BM=852,zM=592,HM=0,TE=1,VM=2,Cbe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Abe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Mbe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Rbe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),kbe=(e,t,n,i,s,r,o,a)=>{const l=a.bits;let c=0,u=0,d=0,f=0,h=0,m=0,p=0,U=0,y=0,E=0,v,w,I,M,T,_=null,x=0,C;const R=new Uint16Array(rf+1),N=new Uint16Array(rf+1);let D=null,$=0,G,H,V;for(c=0;c<=rf;c++)R[c]=0;for(u=0;u<i;u++)R[t[n+u]]++;for(h=l,f=rf;f>=1&&R[f]===0;f--);if(h>f&&(h=f),f===0)return s[r++]=1<<24|64<<16|0,s[r++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<f&&R[d]===0;d++);for(h<d&&(h=d),U=1,c=1;c<=rf;c++)if(U<<=1,U-=R[c],U<0)return-1;if(U>0&&(e===HM||f!==1))return-1;for(N[1]=0,c=1;c<rf;c++)N[c+1]=N[c]+R[c];for(u=0;u<i;u++)t[n+u]!==0&&(o[N[t[n+u]]++]=u);if(e===HM?(_=D=o,C=19):e===TE?(_=Cbe,x-=257,D=Abe,$-=257,C=256):(_=Mbe,D=Rbe,C=-1),E=0,u=0,c=d,T=r,m=h,p=0,I=-1,y=1<<h,M=y-1,e===TE&&y>BM||e===VM&&y>zM)return 1;for(;;){G=c-p,o[u]<C?(H=0,V=o[u]):o[u]>C?(H=D[$+o[u]],V=_[x+o[u]]):(H=96,V=0),v=1<<c-p,w=1<<m,d=w;do w-=v,s[T+(E>>p)+w]=G<<24|H<<16|V|0;while(w!==0);for(v=1<<c-1;E&v;)v>>=1;if(v!==0?(E&=v-1,E+=v):E=0,u++,--R[c]===0){if(c===f)break;c=t[n+o[u]]}if(c>h&&(E&M)!==I){for(p===0&&(p=h),T+=d,m=c-p,U=1<<m;m+p<f&&(U-=R[m+p],!(U<=0));)m++,U<<=1;if(y+=1<<m,e===TE&&y>BM||e===VM&&y>zM)return 1;I=E&M,s[I]=h<<24|m<<16|T-r|0}}return E!==0&&(s[T+E]=c-p<<24|64<<16|0),a.bits=h,0};var m0=kbe;const Dbe=0,E$=1,v$=2,{Z_FINISH:$M,Z_BLOCK:Lbe,Z_TREES:TU,Z_OK:vd,Z_STREAM_END:Nbe,Z_NEED_DICT:Obe,Z_STREAM_ERROR:Cr,Z_DATA_ERROR:w$,Z_MEM_ERROR:_$,Z_BUF_ERROR:Pbe,Z_DEFLATED:GM}=G5,T$=1,XM=2,jM=3,YM=4,WM=5,KM=6,ZM=7,qM=8,QM=9,JM=10,s6=11,pa=12,SE=13,eR=14,IE=15,tR=16,nR=17,iR=18,sR=19,SU=20,IU=21,rR=22,oR=23,aR=24,lR=25,cR=26,xE=27,uR=28,dR=29,sn=30,S$=31,Fbe=32,Bbe=852,zbe=592,Hbe=15,Vbe=Hbe,fR=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function $be(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const I$=e=>{if(!e||!e.state)return Cr;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=T$,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Bbe),t.distcode=t.distdyn=new Int32Array(zbe),t.sane=1,t.back=-1,vd},x$=e=>{if(!e||!e.state)return Cr;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,I$(e)},C$=(e,t)=>{let n;if(!e||!e.state)return Cr;const i=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?Cr:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,x$(e))},A$=(e,t)=>{if(!e)return Cr;const n=new $be;e.state=n,n.window=null;const i=C$(e,t);return i!==vd&&(e.state=null),i},Gbe=e=>A$(e,Vbe);let hR=!0,CE,AE;const Xbe=e=>{if(hR){CE=new Int32Array(512),AE=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(m0(E$,e.lens,0,288,CE,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;m0(v$,e.lens,0,32,AE,0,e.work,{bits:5}),hR=!1}e.lencode=CE,e.lenbits=9,e.distcode=AE,e.distbits=5},M$=(e,t,n,i)=>{let s;const r=e.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),i>=r.wsize?(r.window.set(t.subarray(n-r.wsize,n),0),r.wnext=0,r.whave=r.wsize):(s=r.wsize-r.wnext,s>i&&(s=i),r.window.set(t.subarray(n-i,n-i+s),r.wnext),i-=s,i?(r.window.set(t.subarray(n-i,n),0),r.wnext=i,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0},jbe=(e,t)=>{let n,i,s,r,o,a,l,c,u,d,f,h,m,p,U=0,y,E,v,w,I,M,T,_;const x=new Uint8Array(4);let C,R;const N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Cr;n=e.state,n.mode===pa&&(n.mode=SE),o=e.next_out,s=e.output,l=e.avail_out,r=e.next_in,i=e.input,a=e.avail_in,c=n.hold,u=n.bits,d=a,f=l,_=vd;e:for(;;)switch(n.mode){case T$:if(n.wrap===0){n.mode=SE;break}for(;u<16;){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}if(n.wrap&2&&c===35615){n.check=0,x[0]=c&255,x[1]=c>>>8&255,n.check=oi(n.check,x,2,0),c=0,u=0,n.mode=XM;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=sn;break}if((c&15)!==GM){e.msg="unknown compression method",n.mode=sn;break}if(c>>>=4,u-=4,T=(c&15)+8,n.wbits===0)n.wbits=T;else if(T>n.wbits){e.msg="invalid window size",n.mode=sn;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=c&512?JM:pa,c=0,u=0;break;case XM:for(;u<16;){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==GM){e.msg="unknown compression method",n.mode=sn;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=sn;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,n.check=oi(n.check,x,2,0)),c=0,u=0,n.mode=jM;case jM:for(;u<32;){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,x[2]=c>>>16&255,x[3]=c>>>24&255,n.check=oi(n.check,x,4,0)),c=0,u=0,n.mode=YM;case YM:for(;u<16;){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,n.check=oi(n.check,x,2,0)),c=0,u=0,n.mode=WM;case WM:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,n.check=oi(n.check,x,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=KM;case KM:if(n.flags&1024&&(h=n.length,h>a&&(h=a),h&&(n.head&&(T=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(r,r+h),T)),n.flags&512&&(n.check=oi(n.check,i,h,r)),a-=h,r+=h,n.length-=h),n.length))break e;n.length=0,n.mode=ZM;case ZM:if(n.flags&2048){if(a===0)break e;h=0;do T=i[r+h++],n.head&&T&&n.length<65536&&(n.head.name+=String.fromCharCode(T));while(T&&h<a);if(n.flags&512&&(n.check=oi(n.check,i,h,r)),a-=h,r+=h,T)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=qM;case qM:if(n.flags&4096){if(a===0)break e;h=0;do T=i[r+h++],n.head&&T&&n.length<65536&&(n.head.comment+=String.fromCharCode(T));while(T&&h<a);if(n.flags&512&&(n.check=oi(n.check,i,h,r)),a-=h,r+=h,T)break e}else n.head&&(n.head.comment=null);n.mode=QM;case QM:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}if(c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=sn;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=pa;break;case JM:for(;u<32;){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}e.adler=n.check=fR(c),c=0,u=0,n.mode=s6;case s6:if(n.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=r,e.avail_in=a,n.hold=c,n.bits=u,Obe;e.adler=n.check=1,n.mode=pa;case pa:if(t===Lbe||t===TU)break e;case SE:if(n.last){c>>>=u&7,u-=u&7,n.mode=xE;break}for(;u<3;){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=eR;break;case 1:if(Xbe(n),n.mode=SU,t===TU){c>>>=2,u-=2;break e}break;case 2:n.mode=nR;break;case 3:e.msg="invalid block type",n.mode=sn}c>>>=2,u-=2;break;case eR:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=sn;break}if(n.length=c&65535,c=0,u=0,n.mode=IE,t===TU)break e;case IE:n.mode=tR;case tR:if(h=n.length,h){if(h>a&&(h=a),h>l&&(h=l),h===0)break e;s.set(i.subarray(r,r+h),o),a-=h,r+=h,l-=h,o+=h,n.length-=h;break}n.mode=pa;break;case nR:for(;u<14;){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=sn;break}n.have=0,n.mode=iR;case iR:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}n.lens[N[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},_=m0(Dbe,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,_){e.msg="invalid code lengths set",n.mode=sn;break}n.have=0,n.mode=sR;case sR:for(;n.have<n.nlen+n.ndist;){for(;U=n.lencode[c&(1<<n.lenbits)-1],y=U>>>24,E=U>>>16&255,v=U&65535,!(y<=u);){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}if(v<16)c>>>=y,u-=y,n.lens[n.have++]=v;else{if(v===16){for(R=y+2;u<R;){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}if(c>>>=y,u-=y,n.have===0){e.msg="invalid bit length repeat",n.mode=sn;break}T=n.lens[n.have-1],h=3+(c&3),c>>>=2,u-=2}else if(v===17){for(R=y+3;u<R;){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}c>>>=y,u-=y,T=0,h=3+(c&7),c>>>=3,u-=3}else{for(R=y+7;u<R;){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}c>>>=y,u-=y,T=0,h=11+(c&127),c>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=sn;break}for(;h--;)n.lens[n.have++]=T}}if(n.mode===sn)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=sn;break}if(n.lenbits=9,C={bits:n.lenbits},_=m0(E$,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,_){e.msg="invalid literal/lengths set",n.mode=sn;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},_=m0(v$,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,_){e.msg="invalid distances set",n.mode=sn;break}if(n.mode=SU,t===TU)break e;case SU:n.mode=IU;case IU:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=r,e.avail_in=a,n.hold=c,n.bits=u,xbe(e,f),o=e.next_out,s=e.output,l=e.avail_out,r=e.next_in,i=e.input,a=e.avail_in,c=n.hold,u=n.bits,n.mode===pa&&(n.back=-1);break}for(n.back=0;U=n.lencode[c&(1<<n.lenbits)-1],y=U>>>24,E=U>>>16&255,v=U&65535,!(y<=u);){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}if(E&&!(E&240)){for(w=y,I=E,M=v;U=n.lencode[M+((c&(1<<w+I)-1)>>w)],y=U>>>24,E=U>>>16&255,v=U&65535,!(w+y<=u);){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}c>>>=w,u-=w,n.back+=w}if(c>>>=y,u-=y,n.back+=y,n.length=v,E===0){n.mode=cR;break}if(E&32){n.back=-1,n.mode=pa;break}if(E&64){e.msg="invalid literal/length code",n.mode=sn;break}n.extra=E&15,n.mode=rR;case rR:if(n.extra){for(R=n.extra;u<R;){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=oR;case oR:for(;U=n.distcode[c&(1<<n.distbits)-1],y=U>>>24,E=U>>>16&255,v=U&65535,!(y<=u);){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}if(!(E&240)){for(w=y,I=E,M=v;U=n.distcode[M+((c&(1<<w+I)-1)>>w)],y=U>>>24,E=U>>>16&255,v=U&65535,!(w+y<=u);){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}c>>>=w,u-=w,n.back+=w}if(c>>>=y,u-=y,n.back+=y,E&64){e.msg="invalid distance code",n.mode=sn;break}n.offset=v,n.extra=E&15,n.mode=aR;case aR:if(n.extra){for(R=n.extra;u<R;){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=sn;break}n.mode=lR;case lR:if(l===0)break e;if(h=f-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=sn;break}h>n.wnext?(h-=n.wnext,m=n.wsize-h):m=n.wnext-h,h>n.length&&(h=n.length),p=n.window}else p=s,m=o-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do s[o++]=p[m++];while(--h);n.length===0&&(n.mode=IU);break;case cR:if(l===0)break e;s[o++]=n.length,l--,n.mode=IU;break;case xE:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=i[r++]<<u,u+=8}if(f-=l,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?oi(n.check,s,f,o-f):lm(n.check,s,f,o-f)),f=l,(n.flags?c:fR(c))!==n.check){e.msg="incorrect data check",n.mode=sn;break}c=0,u=0}n.mode=uR;case uR:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=i[r++]<<u,u+=8}if(c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=sn;break}c=0,u=0}n.mode=dR;case dR:_=Nbe;break e;case sn:_=w$;break e;case S$:return _$;case Fbe:default:return Cr}return e.next_out=o,e.avail_out=l,e.next_in=r,e.avail_in=a,n.hold=c,n.bits=u,(n.wsize||f!==e.avail_out&&n.mode<sn&&(n.mode<xE||t!==$M))&&M$(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?oi(n.check,s,f,e.next_out-f):lm(n.check,s,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===pa?128:0)+(n.mode===SU||n.mode===IE?256:0),(d===0&&f===0||t===$M)&&_===vd&&(_=Pbe),_},Ybe=e=>{if(!e||!e.state)return Cr;let t=e.state;return t.window&&(t.window=null),e.state=null,vd},Wbe=(e,t)=>{if(!e||!e.state)return Cr;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,vd):Cr},Kbe=(e,t)=>{const n=t.length;let i,s,r;return!e||!e.state||(i=e.state,i.wrap!==0&&i.mode!==s6)?Cr:i.mode===s6&&(s=1,s=lm(s,t,n,0),s!==i.check)?w$:(r=M$(e,t,n,n),r?(i.mode=S$,_$):(i.havedict=1,vd))};var Zbe=x$,qbe=C$,Qbe=I$,Jbe=Gbe,e6e=A$,t6e=jbe,n6e=Ybe,i6e=Wbe,s6e=Kbe,r6e="pako inflate (from Nodeca project)",va={inflateReset:Zbe,inflateReset2:qbe,inflateResetKeep:Qbe,inflateInit:Jbe,inflateInit2:e6e,inflate:t6e,inflateEnd:n6e,inflateGetHeader:i6e,inflateSetDictionary:s6e,inflateInfo:r6e};function o6e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var a6e=o6e;const R$=Object.prototype.toString,{Z_NO_FLUSH:l6e,Z_FINISH:c6e,Z_OK:dm,Z_STREAM_END:ME,Z_NEED_DICT:RE,Z_STREAM_ERROR:u6e,Z_DATA_ERROR:gR,Z_MEM_ERROR:d6e}=G5;function K5(e){this.options=Y5.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b$,this.strm.avail_out=0;let n=va.inflateInit2(this.strm,t.windowBits);if(n!==dm)throw new Error(bd[n]);if(this.header=new a6e,va.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=um.string2buf(t.dictionary):R$.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=va.inflateSetDictionary(this.strm,t.dictionary),n!==dm)))throw new Error(bd[n])}K5.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,s=this.options.dictionary;let r,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?c6e:l6e,R$.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),r=va.inflate(n,o),r===RE&&s&&(r=va.inflateSetDictionary(n,s),r===dm?r=va.inflate(n,o):r===gR&&(r=RE));n.avail_in>0&&r===ME&&n.state.wrap>0&&e[n.next_in]!==0;)va.inflateReset(n),r=va.inflate(n,o);switch(r){case u6e:case gR:case RE:case d6e:return this.onEnd(r),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||r===ME))if(this.options.to==="string"){let l=um.utf8border(n.output,n.next_out),c=n.next_out-l,u=um.buf2string(n.output,l);n.next_out=c,n.avail_out=i-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(r===dm&&a===0)){if(r===ME)return r=va.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};K5.prototype.onData=function(e){this.chunks.push(e)};K5.prototype.onEnd=function(e){e===dm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Y5.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function f6e(e,t){const n=new K5(t);if(n.push(e),n.err)throw n.msg||bd[n.err];return n.result}var h6e=f6e,g6e={inflate:h6e};const{deflate:m6e}=Sbe,{inflate:p6e}=g6e;var k$=m6e,D$=p6e;const _2=12,U6e=()=>{const e=new Uint8Array(_2);return window.crypto.getRandomValues(e)},p_=async e=>{const t=await window.crypto.subtle.generateKey({name:"AES-GCM",length:eF},!0,["encrypt","decrypt"]);return e==="cryptoKey"?t:(await window.crypto.subtle.exportKey("jwk",t)).k},L$=(e,t)=>window.crypto.subtle.importKey("jwk",{alg:"A128GCM",ext:!0,k:e,key_ops:["encrypt","decrypt"],kty:"oct"},{name:"AES-GCM",length:eF},!1,[t]),Z5=async(e,t)=>{const n=typeof e=="string"?await L$(e,"encrypt"):e,i=U6e(),s=typeof t=="string"?new TextEncoder().encode(t):t instanceof Uint8Array?t:t instanceof Blob?await ec(t):t;return{encryptedBuffer:await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},n,s),iv:i}},fm=async(e,t,n)=>{const i=await L$(n,"decrypt");return window.crypto.subtle.decrypt({name:"AES-GCM",iv:e},i,t)},r6=e=>{const t=typeof e=="string"?new TextEncoder().encode(e):e instanceof Uint8Array?e:new Uint8Array(e);let n="";for(const i of t)n+=String.fromCharCode(i);return n},N$=e=>{const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let i=0,s=e.length;i<s;i++)n[i]=e.charCodeAt(i);return t},O$=e=>new TextDecoder("utf-8").decode(N$(e)),P$=(e,t=!1)=>t?window.btoa(e):window.btoa(r6(e)),F$=(e,t=!1)=>t?window.atob(e):O$(window.atob(e)),mR=e=>window.atob(e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+(4-e.length%4)%4,"=")),B$=({text:e,compress:t})=>{let n;if(t!==!1)try{n=r6(k$(e))}catch(i){console.error("encode: cannot deflate",i)}return{version:"1",encoding:"bstring",compressed:!!n,encoded:n||r6(e)}},z$=e=>{let t;switch(e.encoding){case"bstring":t=e.compressed?e.encoded:O$(e.encoded);break;default:throw new Error(`decode: unknown encoding "${e.encoding}"`)}return e.compressed?D$(new Uint8Array(N$(t)),{to:"string"}):t},H$=1,T2=4,ch=4,kE={1:8,2:16,4:32};function o6(e,t,n,i){if(i!=null){if(i>Math.pow(2,kE[t])-1)throw new Error(`attempting to set value higher than the allocated bytes (value: ${i}, bytes: ${t})`);const r=`setUint${kE[t]}`;return new DataView(e.buffer)[r](n,i),e}const s=`getUint${kE[t]}`;return new DataView(e.buffer)[s](n)}const pR=(...e)=>{const t=new Uint8Array(T2+ch*e.length+e.reduce((i,s)=>i+s.byteLength,0));let n=0;o6(t,T2,n,H$),n+=T2;for(const i of e)o6(t,ch,n,i.byteLength),n+=ch,t.set(i,n),n+=i.byteLength;return t},UR=e=>{const t=[];let n=0;const i=o6(e,ch,n);if(i>H$)throw new Error(`invalid version ${i}`);for(n+=T2;;){const s=o6(e,ch,n);if(n+=ch,t.push(e.slice(n,n+s)),n+=s,n>=e.byteLength)break}return t},b6e=async(e,t)=>{const{encryptedBuffer:n,iv:i}=await Z5(t,k$(e));return{iv:i,buffer:new Uint8Array(n)}},V$=async(e,t)=>{const n={version:2,compression:"pako@1",encryption:"AES-GCM"},i=new TextEncoder().encode(JSON.stringify(n)),s=new TextEncoder().encode(JSON.stringify(t.metadata||null)),{iv:r,buffer:o}=await b6e(pR(s,e),t.encryptionKey);return pR(i,r,o)},y6e=async(e,t,n,i)=>(t=new Uint8Array(await fm(e,t,n)),i?D$(t):t),$$=async(e,t)=>{const[n,i,s]=UR(e),r=JSON.parse(new TextDecoder().decode(n));try{const[o,a]=UR(await y6e(i,s,t.decryptionKey,!!r.compression));return{metadata:JSON.parse(new TextDecoder().decode(o)),data:a}}catch(o){throw console.error("Error during decompressing and decrypting the file.",r),o}},zd=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{}catch{return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),E6e=be(zd?()=>import("./file-open-002ab408-DIuFHtCF.js"):()=>import("./file-open-7c801643-684qeFg4.js"),__vite__mapDeps([]));async function v6e(...e){return(await E6e).default(...e)}be(zd?()=>import("./directory-open-4ed118d0-BzWybGaI.js"):()=>import("./directory-open-01563666-DWU9wJ6I.js"),__vite__mapDeps([]));const w6e=be(zd?()=>import("./file-save-745eba88-Bb9F9Kg7.js"):()=>import("./file-save-3189631c-x92wctJd.js"),__vite__mapDeps([]));async function _6e(...e){return(await w6e).default(...e)}const bR=500,U_=e=>{var i,s;const t=(i=e.extensions)==null?void 0:i.reduce((r,o)=>(r.push(ye[o]),r),[]),n=(s=e.extensions)==null?void 0:s.reduce((r,o)=>o==="jpg"?r.concat(".jpg",".jpeg"):r.concat(`.${o}`),[]);return v6e({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1,legacySetup:(r,o,a)=>{const l=Qa(o,bR),c=()=>{u(),document.addEventListener(ee.KEYUP,l),document.addEventListener(ee.POINTER_UP,l),l()},u=()=>{var f;if((f=a.files)!=null&&f.length){const h=e.multiple?[...a.files]:a.files[0];r(h)}};requestAnimationFrame(()=>{window.addEventListener(ee.FOCUS,c)});const d=window.setInterval(()=>{u()},bR);return f=>{clearInterval(d),l.cancel(),window.removeEventListener(ee.FOCUS,c),document.removeEventListener(ee.KEYUP,l),document.removeEventListener(ee.POINTER_UP,l),f&&(console.warn("Opening the file was canceled (legacy-fs)."),f(new Fh))}}})},a6=(e,t)=>_6e(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`],mimeTypes:t.mimeTypes},t.fileHandle),T6e=(e,t)=>{const n={};for(const i of e)!i.isDeleted&&"fileId"in i&&i.fileId&&t[i.fileId]&&(n[i.fileId]=t[i.fileId]);return n},yg=(e,t,n,i)=>{const s={type:br.excalidraw,version:u5.excalidraw,source:N9(),elements:i==="local"?lz(e):vce(e),appState:i==="local"?jV(t):RUe(t),files:i==="local"?T6e(e,n):void 0};return JSON.stringify(s,null,2)},G$=async(e,t,n,i=t.name||iF)=>{const s=yg(e,t,n,"local"),r=new Blob([s],{type:ye.excalidraw});return{fileHandle:await a6(r,{name:i,extension:"excalidraw",description:"Excalidraw file",fileHandle:v_(t.fileHandle)?null:t.fileHandle})}},S6e=async(e,t)=>{const n=await U_({description:"Excalidraw files"});return w_(await __(n),e,t,n.handle)},I6e=e=>(e==null?void 0:e.type)===br.excalidraw&&(!e.elements||Array.isArray(e.elements)&&(!e.appState||typeof e.appState=="object")),X$=e=>typeof e=="object"&&e&&e.type===br.excalidrawLibrary&&(e.version===1||e.version===2),j$=e=>{const t={type:br.excalidrawLibrary,version:u5.excalidrawLibrary,source:N9(),libraryItems:e};return JSON.stringify(t,null,2)},x6e=async e=>{const t=j$(e);await a6(new Blob([t],{type:ye.excalidrawlib}),{name:"library",extension:"excalidrawlib",description:"Excalidraw library file"})},C6e=12,Y$=document.createElement("img");Y$.src=`data:${ye.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;const W$=document.createElement("img");W$.src=`data:${ye.svg}, ${encodeURIComponent('<svg  xmlns="http://www.w3.org/2000/svg"  width="16"  height="16"  viewBox="0 0 24 24"  fill="none"  stroke="#1971c2"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-big-right-line"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-6v-6h6z" /><path d="M3 9v6" /></svg>')}`;const b_=([e,t,n,i],s,r)=>{const o=C6e,a=r.zoom.value>1?r.zoom.value:1,l=o/a,c=o/a,u=o/a,d=(e+n)/2,f=(t+i)/2,h=(o-8)/(2*a),m=4/a,p=n+m-h,U=t-m-u+h,[y,E]=Z(S(p+l/2,U+c/2),S(d,f),s);return[y-l/2,E-c/2,l,c]},K$=(e,t,n,[i,s])=>{const r=4/n.zoom.value,[o,a,l,c]=Ne(e,t),[u,d,f,h]=b_([o,a,l,c],e.angle,n);return i>u-r&&i<u+r+f&&s>d-r&&s<d+h+r},DE=(e,t,n,[i,s],r)=>!e.link||n.selectedElementIds[e.id]?!1:!r&&n.viewModeEnabled&&Q9(i,s,e,t)?!0:K$(e,t,n,S(i,s)),q5=(e,t,n,i,s=!0)=>{e.beginPath(),e.arc(t,n,i,0,Math.PI*2),e.fill(),s&&e.stroke()},Q5=(e,t)=>[e.width/t,e.height/t],J5=({canvas:e,scale:t,normalizedWidth:n,normalizedHeight:i,theme:s,isExporting:r,viewBackgroundColor:o})=>{const a=e.getContext("2d");return a.setTransform(1,0,0,1,0,0),a.scale(t,t),r&&s===Me.DARK&&(a.filter=F9),typeof o=="string"?((o==="transparent"||o.length===5||o.length===9||/(hsla|rgba)\(/.test(o))&&a.clearRect(0,0,n,i),a.save(),a.fillStyle=o,a.fillRect(0,0,n,i),a.restore()):a.clearRect(0,0,n,i),a};function Tl(e,t,n=20){e.lineTo(t[0][0],t[0][1]);for(let i=0;i<t.length-1;i++){const s=t[i-1<0?0:i-1],r=t[i],o=t[i+1>=t.length?t.length-1:i+1];for(let a=0;a<=1;a+=1/n){const l=a*a,c=(1-a)*(1-a)*s[0]+2*(1-a)*a*r[0]+l*o[0],u=(1-a)*(1-a)*s[1]+2*(1-a)*a*r[1]+l*o[1];e.lineTo(c,u)}}}function Sl(e,t,n=20){e.lineTo(t[0][0],t[0][1]);for(let i=0;i<t.length-1;i++){const s=t[i-1<0?0:i-1],r=t[i],o=t[i+1>=t.length?t.length-1:i+1],a=t[i+2>=t.length?t.length-1:i+2];for(let l=0;l<=1;l+=1/n){const c=l*l,u=c*l,d=.5*(2*r[0]+(-s[0]+o[0])*l+(2*s[0]-5*r[0]+4*o[0]-a[0])*c+(-s[0]+3*r[0]-3*o[0]+a[0])*u),f=.5*(2*r[1]+(-s[1]+o[1])*l+(2*s[1]-5*r[1]+4*o[1]-a[1])*c+(-s[1]+3*r[1]-3*o[1]+a[1])*u);e.lineTo(d,f)}}}const A6e=(e,t,n)=>{const[i,s]=Z(S(t.x,t.y),Xn(t),t.angle);e.save(),e.translate(i,s),e.rotate(t.angle);let r=es(Math.min(t.width,t.height),t);r===0&&(r=.01),e.beginPath();{const o=xl(S(0,0+r),S(0,0),S(0+r,0),n),a=xl(S(t.width-r,0),S(t.width,0),S(t.width,r),n),l=xl(S(t.width,t.height-r),S(t.width,t.height),S(t.width-r,t.height),n),c=xl(S(r,t.height),S(0,t.height),S(0,t.height-r),n);e.moveTo(o[o.length-1][0],o[o.length-1][1]),e.lineTo(a[0][0],a[0][1]),Tl(e,a),e.lineTo(l[0][0],l[0][1]),Tl(e,l),e.lineTo(c[0][0],c[0][1]),Tl(e,c),e.lineTo(o[0][0],o[0][1]),Tl(e,o)}{const o=xl(S(0+r,0),S(0,0),S(0,0+r),-5),a=xl(S(t.width,r),S(t.width,0),S(t.width-r,0),-5),l=xl(S(t.width-r,t.height),S(t.width,t.height),S(t.width,t.height-r),-5),c=xl(S(0,t.height-r),S(0,t.height),S(r,t.height),-5);e.moveTo(o[o.length-1][0],o[o.length-1][1]),e.lineTo(c[0][0],c[0][1]),Tl(e,c),e.lineTo(l[0][0],l[0][1]),Tl(e,l),e.lineTo(a[0][0],a[0][1]),Tl(e,a),e.lineTo(o[0][0],o[0][1]),Tl(e,o)}e.closePath(),e.fill(),e.restore()},M6e=(e,t,n,i,s,r)=>{e.beginPath(),e.ellipse(i,s,t/2,n/2,r,0,Math.PI*2),e.stroke()},ey=(e,t,n,i,s,r,o,a,l=!1,c=0)=>{e.save(),e.translate(r,o),e.rotate(a),l&&e.fillRect(t-r,n-o,i,s),c&&e.roundRect?(e.beginPath(),e.roundRect(t-r,n-o,i,s,c),e.stroke(),e.closePath()):e.strokeRect(t-r,n-o,i,s),e.restore()},R6e=(e,t,n)=>{const[i,s]=Z(S(n.x,n.y),Xn(n),n.angle);e.save(),e.translate(i,s),e.rotate(n.angle);{e.beginPath();const[r,o,a,l,c,u,d,f]=zb(n),h=n.roundness?es(Math.abs(r-d),n):(r-d)*.01,m=n.roundness?es(Math.abs(l-o),n):(l-o)*.01,p=Il(S(r-h,o+m),S(r,o),S(r,o),S(r+h,o+m),t),U=Il(S(a-h,l-m),S(a,l),S(a,l),S(a-h,l+m),t),y=Il(S(c+h,u-m),S(c,u),S(c,u),S(c-h,u-m),t),E=Il(S(d+h,f+m),S(d,f),S(d,f),S(d+h,f-m),t);e.moveTo(p[p.length-1][0],p[p.length-1][1]),e.lineTo(U[0][0],U[0][1]),Sl(e,U),e.lineTo(y[0][0],y[0][1]),Sl(e,y),e.lineTo(E[0][0],E[0][1]),Sl(e,E),e.lineTo(p[0][0],p[0][1]),Sl(e,p)}{const[r,o,a,l,c,u,d,f]=zb(n),h=n.roundness?es(Math.abs(r-d),n):(r-d)*.01,m=n.roundness?es(Math.abs(l-o),n):(l-o)*.01,p=Il(S(r+h,o+m),S(r,o),S(r,o),S(r-h,o+m),-5),U=Il(S(a-h,l+m),S(a,l),S(a,l),S(a-h,l-m),-5),y=Il(S(c-h,u-m),S(c,u),S(c,u),S(c+h,u-m),-5),E=Il(S(d+h,f-m),S(d,f),S(d,f),S(d+h,f+m),-5);e.moveTo(p[p.length-1][0],p[p.length-1][1]),e.lineTo(E[0][0],E[0][1]),Sl(e,E),e.lineTo(y[0][0],y[0][1]),Sl(e,y),e.lineTo(U[0][0],U[0][1]),Sl(e,U),e.lineTo(p[0][0],p[0][1]),Sl(e,p)}e.closePath(),e.fill(),e.restore()};function Il(e,t,n,i,s,r=20){const o=[];for(let a=0;a<=r;a++){const l=a/r,c=Lo(e,t,n,i),u=eh(c,l),d=Bn(ase(c,l)),f=oF(d);o.push(Re(At(f,s),u))}return o}function xl(e,t,n,i,s=20){const r=[];for(let o=0;o<=s;o++){const a=o/s,l=1-a,c=S(l*l*e[0]+2*l*a*t[0]+a*a*n[0],l*l*e[1]+2*l*a*t[1]+a*a*n[1]),u=2*(1-a)*(t[0]-e[0])+2*a*(n[0]-t[0]),d=2*(1-a)*(t[1]-e[1])+2*a*(n[1]-t[1]),f=Bn(On(u,d)),h=oF(f);r.push(Re(At(h,i),c))}return r}const xU={Bold:"#dddddd",Regular:"#e5e5e5"},k6e=(e,t,n,i,s,r,o,a)=>{const l=i%t-t,c=s%t-t,u=t*r.value,d=1/r.value;e.save(),r.value===1&&e.translate(l%1?0:.5,c%1?0:.5);for(let f=l;f<l+o+t*2;f+=t){const h=n>1&&Math.round(f-i)%(n*t)===0;if(!h&&u<10)continue;const m=Math.min(1/r.value,h?4:1);e.lineWidth=m;const p=[m*3,d+(m+d)];e.beginPath(),e.setLineDash(h?[]:p),e.strokeStyle=h?xU.Bold:xU.Regular,e.moveTo(f,c-t),e.lineTo(f,Math.ceil(c+a+t*2)),e.stroke()}for(let f=c;f<c+a+t*2;f+=t){const h=n>1&&Math.round(f-s)%(n*t)===0;if(!h&&u<10)continue;const m=Math.min(1/r.value,h?4:1);e.lineWidth=m;const p=[m*3,d+(m+d)];e.beginPath(),e.setLineDash(h?[]:p),e.strokeStyle=h?xU.Bold:xU.Regular,e.moveTo(l-t,f),e.lineTo(Math.ceil(l+o+t*2),f),e.stroke()}e.restore()},yR=(e,t,n,i)=>{t.translate(e.x+i.scrollX,e.y+i.scrollY),t.beginPath(),t.roundRect?t.roundRect(0,0,e.width,e.height,Pt.radius/i.zoom.value):t.rect(0,0,e.width,e.height),t.clip(),t.translate(-(e.x+i.scrollX),-(e.y+i.scrollY))},ER={regularLink:null,elementLink:null},vR=(e,t,n,i)=>{if(e.link&&!n.selectedElementIds[e.id]){const[s,r,o,a]=Ne(e,i),[l,c,u,d]=b_([s,r,o,a],e.angle,n),f=l+u/2,h=c+d/2;t.save(),t.translate(n.scrollX+f,n.scrollY+h),t.rotate(e.angle);const m=ih(e.link)?"elementLink":"regularLink";let p=ER[m];if(!p||p.zoom!==n.zoom.value){p=Object.assign(document.createElement("canvas"),{zoom:n.zoom.value}),p.width=u*window.devicePixelRatio*n.zoom.value,p.height=d*window.devicePixelRatio*n.zoom.value,ER[m]=p;const U=p.getContext("2d");U.scale(window.devicePixelRatio*n.zoom.value,window.devicePixelRatio*n.zoom.value),U.fillStyle=n.viewBackgroundColor||"#fff",U.fillRect(0,0,u,d),m==="elementLink"?U.drawImage(W$,0,0,u,d):U.drawImage(Y$,0,0,u,d),U.restore()}t.drawImage(p,l-f,c-h,u,d),t.restore()}},Z$=({canvas:e,rc:t,elementsMap:n,allElementsMap:i,visibleElements:s,scale:r,appState:o,renderConfig:a})=>{var p;if(e===null)return;const{renderGrid:l=!0,isExporting:c}=a,[u,d]=Q5(e,r),f=J5({canvas:e,scale:r,normalizedWidth:u,normalizedHeight:d,theme:o.theme,isExporting:c,viewBackgroundColor:o.viewBackgroundColor});f.scale(o.zoom.value,o.zoom.value),l&&k6e(f,o.gridSize,o.gridStep,o.scrollX,o.scrollY,o.zoom,u/o.zoom.value,d/o.zoom.value);const h=new Set;s.forEach(U=>{U.groupIds.length>0&&o.frameToHighlight&&o.selectedElementIds[U.id]&&(Lc(U,o.frameToHighlight,n)||U.groupIds.find(y=>h.has(y)))&&U.groupIds.forEach(y=>h.add(y))});const m=new Map;s.filter(U=>!lr(U)).forEach(U=>{var y;try{const E=U.frameId||((y=o.frameToHighlight)==null?void 0:y.id);if(ue(U)&&U.containerId&&n.has(U.containerId))return;if(f.save(),E&&o.frameRendering.enabled&&o.frameRendering.clip){const w=P3(U,n,o);w&&DC(U,w,o,n,m)&&yR(w,f,a,o),pu(U,n,i,t,f,a,o)}else pu(U,n,i,t,f,a,o);const v=Oe(U,n);v&&pu(v,n,i,t,f,a,o),f.restore(),c||vR(U,f,o,n)}catch(E){console.error(E,U.id,U.x,U.y,U.width,U.height)}}),s.filter(U=>lr(U)).forEach(U=>{var y;try{const E=()=>{if(pu(U,n,i,t,f,a,o),lr(U)&&(c||fs(U)&&a.embedsValidationStatus.get(U.id)!==!0)&&U.width&&U.height){const w=XB(U);pu(w,n,i,t,f,a,o)}c||vR(U,f,o,n)};if((U.frameId||((y=o.frameToHighlight)==null?void 0:y.id))&&o.frameRendering.enabled&&o.frameRendering.clip){f.save();const w=P3(U,n,o);w&&DC(U,w,o,n,m)&&yR(w,f,a,o),E(),f.restore()}else E()}catch(E){console.error(E)}}),(p=a.pendingFlowchartNodes)==null||p.forEach(U=>{try{pu(U,n,i,t,f,a,o)}catch(y){console.error(y)}})},q$=dg(e=>{Z$(e)},{trailing:!0}),Q$=(e,t)=>{if(t){q$(e);return}Z$(e)},i1=(e,t,n)=>{const i={sets:t.sets,shape:t.shape,options:{...t.options,fixedDecimalPlaceDigits:n}};return e.draw(i)},s1=(e,t,n,i,s)=>{if(!i.enabled||!i.clip)return null;const r=bs(e,s);if(r){const o=t.ownerDocument.createElementNS(st,"g");return o.setAttributeNS(st,"clip-path",`url(#${r.id})`),n.forEach(a=>o.appendChild(a)),o}return null},S2=(e,t,n,i,s,r,o,a)=>{var v;const l={x:r,y:o},[c,u,d,f]=Ne(e,t);let h=(d-c)/2-(e.x-c),m=(f-u)/2-(e.y-u);if(ue(e)){const w=$n(e,t);if(xe(w)){const[I,M,T,_]=Ne(w,t),x=le.getBoundTextElementPosition(w,e,t);h=(T-I)/2-(x.x-I),m=(_-M)/2-(x.y-M),r=r+x.x-e.x,o=o+x.y-e.y}}const p=180*e.angle/Math.PI;let U=i;if(e.link){const w=i.ownerDocument.createElementNS(st,"a");w.setAttribute("href",$s(e.link)),U.appendChild(w),U=w}const y=(w,I)=>{U.appendChild(w)},E=(((v=bs(e,t))==null?void 0:v.opacity)??100)*e.opacity/1e4;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":{const w=Gt.generateElementShape(e,null),I=i1(n,w,jg);E!==1&&(I.setAttribute("stroke-opacity",`${E}`),I.setAttribute("fill-opacity",`${E}`)),I.setAttribute("stroke-linecap","round"),I.setAttribute("transform",`translate(${r||0} ${o||0}) rotate(${p} ${h} ${m})`);const M=s1(e,U,[I],a.frameRendering,t);y(M||I);break}case"iframe":case"embeddable":{const w=Gt.generateElementShape(e,a),I=i1(n,w,jg),M=e.opacity/100;M!==1&&(I.setAttribute("stroke-opacity",`${M}`),I.setAttribute("fill-opacity",`${M}`)),I.setAttribute("stroke-linecap","round"),I.setAttribute("transform",`translate(${r||0} ${o||0}) rotate(${p} ${h} ${m})`),y(I);const T=XB(e);S2(T,t,n,U,s,T.x+l.x-e.x,T.y+l.y-e.y,a);const _=i1(n,w,jg);for(_.setAttribute("stroke-linecap","round"),_.setAttribute("transform",`translate(${r||0} ${o||0}) rotate(${p} ${h} ${m})`);_.firstChild;)_.removeChild(_.firstChild);const x=es(Math.min(e.width,e.height),e),C=zf(j9(e.link||""));if(a.renderEmbeddables===!1||(C==null?void 0:C.type)==="document"){const R=i.ownerDocument.createElementNS(st,"a");R.setAttribute("href",$s(e.link||"")),R.setAttribute("target","_blank"),R.setAttribute("rel","noopener noreferrer"),R.style.borderRadius=`${x}px`,_.appendChild(R)}else{const R=i.ownerDocument.createElementNS(st,"foreignObject");R.style.width=`${e.width}px`,R.style.height=`${e.height}px`,R.style.border="none";const N=R.ownerDocument.createElementNS(st,"div");N.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),N.style.width="100%",N.style.height="100%";const D=N.ownerDocument.createElement("iframe");D.src=(C==null?void 0:C.link)??"",D.style.width="100%",D.style.height="100%",D.style.border="none",D.style.borderRadius=`${x}px`,D.style.top="0",D.style.left="0",D.allowFullscreen=!0,N.appendChild(D),R.appendChild(N),_.appendChild(R)}y(_);break}case"line":case"arrow":{const w=Oe(e,t),I=i.ownerDocument.createElementNS(st,"mask");if(w){I.setAttribute("id",`mask-${e.id}`);const x=i.ownerDocument.createElementNS(st,"rect");r=r||0,o=o||0,x.setAttribute("x","0"),x.setAttribute("y","0"),x.setAttribute("fill","#fff"),x.setAttribute("width",`${e.width+100+r}`),x.setAttribute("height",`${e.height+100+o}`),I.appendChild(x);const C=i.ownerDocument.createElementNS(st,"rect"),R=le.getBoundTextElementPosition(e,w,t),N=r+R.x-e.x,D=o+R.y-e.y;C.setAttribute("x",N.toString()),C.setAttribute("y",D.toString()),C.setAttribute("fill","#000"),C.setAttribute("width",`${w.width}`),C.setAttribute("height",`${w.height}`),C.setAttribute("opacity","1"),I.appendChild(C)}const M=i.ownerDocument.createElementNS(st,"g");w&&M.setAttribute("mask",`url(#mask-${e.id})`),M.setAttribute("stroke-linecap","round"),Gt.generateElementShape(e,a).forEach(x=>{const C=i1(n,x,jg);E!==1&&(C.setAttribute("stroke-opacity",`${E}`),C.setAttribute("fill-opacity",`${E}`)),C.setAttribute("transform",`translate(${r||0} ${o||0}) rotate(${p} ${h} ${m})`),e.type==="line"&&nl(e.points)&&e.backgroundColor!=="transparent"&&C.setAttribute("fill-rule","evenodd"),M.appendChild(C)});const _=s1(e,U,[M,I],a.frameRendering,t);_?(y(_),U.appendChild(_)):(y(M),U.append(I));break}case"freedraw":{const w=Gt.generateElementShape(e,a),I=w?i1(n,w,jg):i.ownerDocument.createElementNS(st,"g");E!==1&&(I.setAttribute("stroke-opacity",`${E}`),I.setAttribute("fill-opacity",`${E}`)),I.setAttribute("transform",`translate(${r||0} ${o||0}) rotate(${p} ${h} ${m})`),I.setAttribute("stroke","none");const M=i.ownerDocument.createElementNS(st,"path");M.setAttribute("fill",e.strokeColor),M.setAttribute("d",UB(e)),I.appendChild(M);const T=s1(e,U,[I],a.frameRendering,t);y(T||I);break}case"image":{const w=Math.round(e.width),I=Math.round(e.height),M=In(e)&&s[e.fileId];if(M){const{reuseImages:T=!0}=a;let _=`image-${M.id}`,x=e.width,C=e.height;e.crop&&({width:x,height:C}=tl(e),_=`image-crop-${M.id}-${Mw(`${x}x${C}`)}`),T||(_=`image-${e.id}`);let R=i.querySelector(`#${_}`);if(!R){R=i.ownerDocument.createElementNS(st,"symbol"),R.id=_;const j=i.ownerDocument.createElementNS(st,"image");j.setAttribute("href",M.dataURL),j.setAttribute("preserveAspectRatio","none"),e.crop||!T?(j.setAttribute("width",`${x}`),j.setAttribute("height",`${C}`)):(j.setAttribute("width","100%"),j.setAttribute("height","100%")),R.appendChild(j),(U.querySelector("defs")||U).prepend(R)}const N=i.ownerDocument.createElementNS(st,"use");N.setAttribute("href",`#${_}`),a.exportWithDarkMode&&M.mimeType!==ye.svg&&N.setAttribute("filter",cB);let D=0,$=0;if(e.crop){const{width:j,height:q}=tl(e);D=e.crop.x/(e.crop.naturalWidth/j),$=e.crop.y/(e.crop.naturalHeight/q)}const G=h+D,H=m+$;N.setAttribute("width",`${w+D}`),N.setAttribute("height",`${I+$}`),N.setAttribute("opacity",`${E}`),(e.scale[0]!==1||e.scale[1]!==1)&&N.setAttribute("transform",`translate(${G} ${H}) scale(${e.scale[0]} ${e.scale[1]}) translate(${-G} ${-H})`);const V=i.ownerDocument.createElementNS(st,"g");if(e.crop){const j=i.ownerDocument.createElementNS(st,"mask");j.setAttribute("id",`mask-image-crop-${e.id}`),j.setAttribute("fill","#fff");const q=i.ownerDocument.createElementNS(st,"rect");q.setAttribute("x",`${D}`),q.setAttribute("y",`${$}`),q.setAttribute("width",`${w}`),q.setAttribute("height",`${I}`),j.appendChild(q),U.appendChild(j),V.setAttribute("mask",`url(#${j.id})`)}if(V.appendChild(N),V.setAttribute("transform",`translate(${r-D} ${o-$}) rotate(${p} ${G} ${H})`),e.roundness){const j=i.ownerDocument.createElementNS(st,"clipPath");j.id=`image-clipPath-${e.id}`;const q=i.ownerDocument.createElementNS(st,"rect"),fe=es(Math.min(e.width,e.height),e);q.setAttribute("width",`${e.width}`),q.setAttribute("height",`${e.height}`),q.setAttribute("rx",`${fe}`),q.setAttribute("ry",`${fe}`),j.appendChild(q),y(j),V.setAttributeNS(st,"clip-path",`url(#${j.id})`)}const X=s1(e,U,[V],a.frameRendering,t);y(X||V)}break}case"frame":case"magicframe":{if(a.frameRendering.enabled&&a.frameRendering.outline){const w=document.createElementNS(st,"rect");w.setAttribute("transform",`translate(${r||0} ${o||0}) rotate(${p} ${h} ${m})`),w.setAttribute("width",`${e.width}px`),w.setAttribute("height",`${e.height}px`),w.setAttribute("rx",Pt.radius.toString()),w.setAttribute("ry",Pt.radius.toString()),w.setAttribute("fill","none"),w.setAttribute("stroke",Pt.strokeColor),w.setAttribute("stroke-width",Pt.strokeWidth.toString()),y(w)}break}default:if(ue(e)){const w=i.ownerDocument.createElementNS(st,"g");E!==1&&(w.setAttribute("stroke-opacity",`${E}`),w.setAttribute("fill-opacity",`${E}`)),w.setAttribute("transform",`translate(${r||0} ${o||0}) rotate(${p} ${h} ${m})`);const I=e.text.replace(/\r\n?/g,`
`).split(`
`),M=tp(e.fontSize,e.lineHeight),T=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,_=rF(e.fontFamily,e.fontSize,M),x=gF(e.text)?"rtl":"ltr",C=e.textAlign==="center"?"middle":e.textAlign==="right"||x==="rtl"?"end":"start";for(let N=0;N<I.length;N++){const D=i.ownerDocument.createElementNS(st,"text");D.textContent=I[N],D.setAttribute("x",`${T}`),D.setAttribute("y",`${N*M+_}`),D.setAttribute("font-family",Zm(e)),D.setAttribute("font-size",`${e.fontSize}px`),D.setAttribute("fill",e.strokeColor),D.setAttribute("text-anchor",C),D.setAttribute("style","white-space: pre;"),D.setAttribute("direction",x),D.setAttribute("dominant-baseline","alphabetic"),w.appendChild(D)}const R=s1(e,U,[w],a.frameRendering,t);y(R||w)}else throw new Error(`Unimplemented type ${e.type}`)}},D6e=(e,t,n,i,s,r)=>{i&&(e.filter(o=>!lr(o)).forEach(o=>{if(!o.isDeleted){if(ue(o)&&o.containerId&&t.has(o.containerId))return;try{S2(o,t,n,i,s,o.x+r.offsetX,o.y+r.offsetY,r);const a=Oe(o,t);a&&S2(a,t,n,i,s,a.x+r.offsetX,a.y+r.offsetY,r)}catch(a){console.error(a)}}}),e.filter(o=>lr(o)).forEach(o=>{if(!o.isDeleted)try{S2(o,t,n,i,s,o.x+r.offsetX,o.y+r.offsetY,r)}catch(a){console.error(a)}}))},L6e=(e,t)=>{if(e.width<=t)return e;const i=document.createElement("canvas").getContext("2d");i.font=gt({fontFamily:e.fontFamily,fontSize:e.fontSize});let s=e.text;if(i.measureText(s).width>t)for(let o=s.length;o>0;o--){const a=`${s.slice(0,o)}...`;if(i.measureText(a).width<=t){s=a;break}}return Ie(e,{text:s,width:t})},N6e=(e,t)=>{const n=[];for(const i of e){if(Te(i)){let s=js({x:i.x,y:i.y-Pt.nameOffsetY,fontFamily:lt.Helvetica,fontSize:Pt.nameFontSize,lineHeight:Pt.nameLineHeight,strokeColor:t.exportWithDarkMode?Pt.nameColorDarkTheme:Pt.nameColorLightTheme,text:aB(i)});s.y-=s.height,s=L6e(s,i.width),n.push(s)}n.push(i)}return n},J$=(e,t)=>(t=t||Jo().frameRendering,{enabled:e?!0:t.enabled,outline:e?!1:t.outline,name:e?!1:t.name,clip:e?!0:t.clip}),eG=({elements:e,exportingFrame:t,frameRendering:n,exportWithDarkMode:i})=>{let s;return t?s=dw(e,t):n.enabled&&n.name?s=N6e(e,{exportWithDarkMode:i}):s=e,s},tG=async(e,t,n,{exportBackground:i,exportPadding:s=ug,viewBackgroundColor:r,exportingFrame:o},a=(c,u)=>{const d=document.createElement("canvas");return d.width=c*t.exportScale,d.height=u*t.exportScale,{canvas:d,scale:t.exportScale}},l=async()=>{await ja.loadElementsFonts(e)})=>{await l();const c=J$(o??null,t.frameRendering??null);o&&(c.clip=!1);const u=eG({elements:e,exportingFrame:o,exportWithDarkMode:t.exportWithDarkMode,frameRendering:c});o&&(s=0);const[d,f,h,m]=E_(o?[o]:cw(u),s),{canvas:p,scale:U=1}=a(h,m),y=Jo(),{imageCache:E}=await KB({imageCache:new Map,fileIds:ZB(u).map(v=>v.fileId),files:n});return Q$({canvas:p,rc:Zc.canvas(p),elementsMap:Yo(_e(u)),allElementsMap:Yo(_e(qo(e))),visibleElements:u,scale:U,appState:{...t,frameRendering:c,viewBackgroundColor:i?r:null,scrollX:-d+s,scrollY:-f+s,zoom:y.zoom,shouldCacheIgnoreZoom:!1,theme:t.exportWithDarkMode?Me.DARK:Me.LIGHT},renderConfig:{canvasBackgroundColor:r,imageCache:E,renderGrid:!1,isExporting:!0,embedsValidationStatus:new Map,elementsPendingErasure:new Set,pendingFlowchartNodes:null}}),p},A1=e=>document.createComment(` ${e} `),y_=async(e,t,n,i)=>{const s=J$((i==null?void 0:i.exportingFrame)??null,t.frameRendering??null);let{exportPadding:r=ug,exportWithDarkMode:o=!1,viewBackgroundColor:a,exportScale:l=1,exportEmbedScene:c}=t;const{exportingFrame:u=null}=i||{},d=eG({elements:e,exportingFrame:u,exportWithDarkMode:o,frameRendering:s});u&&(r=0);const[f,h,m,p]=E_(u?[u]:cw(d),r),U=-f+r,y=-h+r,E=document.createElementNS(st,"svg");E.setAttribute("version","1.1"),E.setAttribute("xmlns",st),E.setAttribute("viewBox",`0 0 ${m} ${p}`),E.setAttribute("width",`${m*l}`),E.setAttribute("height",`${p*l}`),o&&E.setAttribute("filter",F9);const v=E.ownerDocument.createElementNS(st,"defs"),w=E.ownerDocument.createElementNS(st,"metadata");if(E.appendChild(A1("svg-source:excalidraw")),E.appendChild(w),E.appendChild(v),c)try{O6e({metadataElement:w,payload:yg(e,t,n||{},"local")})}catch(R){console.error(R)}const I=lw(e);if(I.length){const R=_e(e);for(const N of I){const D=E.ownerDocument.createElementNS(st,"clipPath");D.setAttribute("id",N.id);const[$,G,H,V]=Ne(N,R),X=(H-$)/2-(N.x-$),j=(V-G)/2-(N.y-G),q=E.ownerDocument.createElementNS(st,"rect");q.setAttribute("transform",`translate(${N.x+U} ${N.y+y}) rotate(${N.angle} ${X} ${j})`),q.setAttribute("width",`${N.width}`),q.setAttribute("height",`${N.height}`),u||(q.setAttribute("rx",`${Pt.radius}`),q.setAttribute("ry",`${Pt.radius}`)),D.appendChild(q),v.appendChild(D)}}const M=i!=null&&i.skipInliningFonts?[]:await ja.generateFontFaceDeclarations(e),T=`
      `,_=E.ownerDocument.createElementNS(st,"style");if(_.classList.add("style-fonts"),_.appendChild(document.createTextNode(`${T}${M.join(T)}`)),v.appendChild(_),t.exportBackground&&a){const R=E.ownerDocument.createElementNS(st,"rect");R.setAttribute("x","0"),R.setAttribute("y","0"),R.setAttribute("width",`${m}`),R.setAttribute("height",`${p}`),R.setAttribute("fill",a),E.appendChild(R)}const x=Zc.svg(E),C=(i==null?void 0:i.renderEmbeddables)??!1;return D6e(d,Yo(_e(d)),x,E,n||{},{offsetX:U,offsetY:y,isExporting:!0,exportWithDarkMode:o,renderEmbeddables:C,frameRendering:s,canvasBackgroundColor:a,embedsValidationStatus:C?new Map(d.filter(R=>Te(R)).map(R=>[R.id,!0])):new Map,reuseImages:(i==null?void 0:i.reuseImages)??!0}),E},O6e=({payload:e,metadataElement:t})=>{const n=P$(JSON.stringify(B$({text:e})),!0);t.appendChild(A1(`payload-type:${ye.excalidraw}`)),t.appendChild(A1("payload-version:2")),t.appendChild(A1("payload-start")),t.appendChild(document.createTextNode(n)),t.appendChild(A1("payload-end"))},P6e=({svg:e})=>{if(e.includes(`payload-type:${ye.excalidraw}`)){const t=e.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/);if(!t)throw new Error("INVALID");const n=e.match(/<!-- payload-version:(\d+) -->/),s=((n==null?void 0:n[1])||"1")!=="1";try{const r=F$(t[1],s),o=JSON.parse(r);if(!("encoded"in o)){if("type"in o&&o.type===br.excalidraw)return r;throw new Error("FAILED")}return z$(o)}catch(r){throw console.error(r),new Error("FAILED")}}throw new Error("INVALID")},E_=(e,t)=>{const[n,i,s,r]=xt(e),o=Pi(n,s)+t*2,a=Pi(i,r)+t*2;return[n,i,o,a]},F6e=(e,t,n)=>{const[,,i,s]=E_(e,t).map(r=>Math.trunc(r*n));return[i,s]},B6e={selection:!0,lasso:!0,text:!0,rectangle:!0,diamond:!0,ellipse:!0,line:!0,image:!0,arrow:!0,freedraw:!0,eraser:!1,custom:!0,frame:!0,embeddable:!0,hand:!0,laser:!1,magicframe:!1},z6e=e=>Object.keys(lt).includes(e)?lt[e]:Kc,of=(e,t)=>{if(!t)return null;const n=t.focus||0;return he(e)?Cb(t)?{...t,focus:n,fixedPoint:_5(t.fixedPoint??[0,0])}:null:{...t,focus:n}},Cl=(e,t)=>{const n={type:t.type||e.type,version:e.version||1,versionNonce:e.versionNonce??0,index:e.index??null,isDeleted:e.isDeleted??!1,id:e.id||vs(),fillStyle:e.fillStyle||fn.fillStyle,strokeWidth:e.strokeWidth||fn.strokeWidth,strokeStyle:e.strokeStyle??fn.strokeStyle,roughness:e.roughness??fn.roughness,opacity:e.opacity==null?fn.opacity:e.opacity,angle:e.angle||0,x:t.x??e.x??0,y:t.y??e.y??0,strokeColor:e.strokeColor||fn.strokeColor,backgroundColor:e.backgroundColor||fn.backgroundColor,width:e.width||0,height:e.height||0,seed:e.seed??1,groupIds:e.groupIds??[],frameId:e.frameId??null,roundness:e.roundness?e.roundness:e.strokeSharpness==="round"?{type:Od(e.type)?mn.LEGACY:mn.PROPORTIONAL_RADIUS}:null,boundElements:e.boundElementIds?e.boundElementIds.map(s=>({type:"arrow",id:s})):e.boundElements??[],updated:e.updated??fg(),link:e.link?$s(e.link):null,locked:e.locked??!1};("customData"in e||"customData"in t)&&(n.customData="customData"in t?t.customData:e.customData);const i={...e,...n,...DB(n),...t};return delete i.strokeSharpness,delete i.boundElementIds,i},H6e=e=>{switch(e={...e},e.type){case"text":delete e.rawText;let t=e.fontSize,n=e.fontFamily;if("font"in e){const[u,d]=e.font.split(" ");t=parseFloat(u),n=z6e(d)}const i=typeof e.text=="string"&&e.text||"",s=e.lineHeight||(e.height?boe(e):Rc(e.fontFamily));return e=Cl(e,{fontSize:t,fontFamily:n,text:i,textAlign:e.textAlign||Km,verticalAlign:e.verticalAlign||hb,containerId:e.containerId??null,originalText:e.originalText||i,autoResize:e.autoResize??!0,lineHeight:s}),!i&&!e.isDeleted&&(e={...e,originalText:i,isDeleted:!0},e=Ma(e)),e;case"freedraw":return Cl(e,{points:e.points,lastCommittedPoint:null,simulatePressure:e.simulatePressure,pressures:e.pressures});case"image":return Cl(e,{status:e.status||"pending",fileId:e.fileId,scale:e.scale||[1,1],crop:e.crop??null});case"line":case"draw":const{startArrowhead:r=null,endArrowhead:o=null}=e;let a=e.x,l=e.y,c=!Array.isArray(e.points)||e.points.length<2?[S(0,0),S(e.width,e.height)]:e.points;return(c[0][0]!==0||c[0][1]!==0)&&({points:c,x:a,y:l}=le.getNormalizedPoints(e)),Cl(e,{type:e.type==="draw"?"line":e.type,startBinding:of(e,e.startBinding),endBinding:of(e,e.endBinding),lastCommittedPoint:null,startArrowhead:r,endArrowhead:o,points:c,x:a,y:l,...Ch(c)});case"arrow":{const{startArrowhead:u=null,endArrowhead:d="arrow"}=e;let f=e.x,h=e.y,m=!Array.isArray(e.points)||e.points.length<2?[S(0,0),S(e.width,e.height)]:e.points;(m[0][0]!==0||m[0][1]!==0)&&({points:m,x:f,y:h}=le.getNormalizedPoints(e));const p={type:e.type,startBinding:of(e,e.startBinding),endBinding:of(e,e.endBinding),lastCommittedPoint:null,startArrowhead:u,endArrowhead:d,points:m,x:f,y:h,elbowed:e.elbowed,...Ch(m)};return he(e)?Cl(e,{...p,elbowed:!0,startBinding:of(e,e.startBinding),endBinding:of(e,e.endBinding),fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}):Cl(e,p)}case"ellipse":case"rectangle":case"diamond":case"iframe":case"embeddable":return Cl(e,{});case"magicframe":case"frame":return Cl(e,{name:e.name??null})}return null},V6e=(e,t)=>{if(e.boundElements){const n=e.boundElements.slice(),i=new Set;e.boundElements=n.reduce((s,r)=>{const o=t.get(r.id);if(o&&!i.has(r.id)){if(i.add(r.id),o.isDeleted)return s;s.push(r),ue(o)&&!o.containerId&&(o.containerId=e.id)}return s},[])}},$6e=(e,t)=>{const n=e.containerId?t.get(e.containerId):null;if(e.angle=xe(n)?0:(n==null?void 0:n.angle)??0,!n){e.containerId=null;return}if(!e.isDeleted&&n.boundElements&&!n.boundElements.find(i=>i.id===e.id)){const i=(n.boundElements||(n.boundElements=[])).slice();i.push({type:"text",id:e.id}),n.boundElements=i}},G6e=(e,t)=>{e.frameId&&(t.get(e.frameId)||(e.frameId=null))},wd=(e,t,n)=>{const i=new Set,s=t?_e(t):null,r=qo((e||[]).reduce((a,l)=>{if(l.type!=="selection"&&!gd(l)){let c=H6e(l);if(c){const u=s==null?void 0:s.get(l.id);u&&u.version>c.version&&(c=Ma(c,u.version)),i.has(c.id)&&(c={...c,id:vs()}),i.add(c.id),a.push(c)}}return a},[]));if(!(n!=null&&n.repairBindings))return r;const o=_e(r);for(const a of r)a.frameId&&G6e(a,o),ue(a)&&a.containerId?$6e(a,o):a.boundElements&&V6e(a,o),n.refreshDimensions&&ue(a)&&Object.assign(a,$B(a,$n(a,o),o)),Ae(a)&&(a.startBinding&&(!o.has(a.startBinding.elementId)||!xe(a))&&(a.startBinding=null),a.endBinding&&(!o.has(a.endBinding.elementId)||!xe(a))&&(a.endBinding=null));return r.map(a=>{if(he(a)&&!BF(a)&&!Uw(a.points))return{...a,...hg(a,o,{points:[S(0,0),a.points[a.points.length-1]]}),index:a.index};if(he(a)&&a.startBinding&&a.endBinding&&a.startBinding.elementId===a.endBinding.elementId&&a.points.length>1&&a.points.some(([l,c])=>Math.abs(l)>1e6||Math.abs(c)>1e6)){console.error("Fixing self-bound elbow arrow",a.id);const l=o.get(a.startBinding.elementId);return l?{...a,x:l.x+l.width/2,y:l.y-5,width:l.width,height:l.height,points:[S(0,0),S(0,-10),S(l.width/2+5,-10),S(l.width/2+5,l.height/2+5)]}:(console.error("Bound element not found",a.startBinding.elementId),a)}return a})},X6e=(e,t,n)=>{const i=t[e];return i!==void 0?i:n[e]},wR={isSidebarDocked:(e,t)=>["defaultSidebarDockedPreference",e.isSidebarDocked??X6e("defaultSidebarDockedPreference",e,t)]},nG=(e,t)=>{var s;e=e||{};const n=Jo(),i={};for(const r of Object.keys(wR))if(r in e){const[o,a]=wR[r](e,n);i[o]=a}for(const[r,o]of Object.entries(n)){const a=e[r],l=t?t[r]:void 0;i[r]=a!==void 0?a:l!==void 0?l:o}return{...i,cursorButton:(t==null?void 0:t.cursorButton)||"up",penDetected:(t==null?void 0:t.penDetected)??(e.penMode?e.penDetected??!1:!1),activeTool:{...en(n,i.activeTool.type&&B6e[i.activeTool.type]?i.activeTool:{type:"selection"}),lastActiveTool:null,locked:i.activeTool.locked??!1},zoom:{value:Fa(s0(e.zoom)?e.zoom:((s=e.zoom)==null?void 0:s.value)??n.zoom.value)},openSidebar:typeof e.openSidebar=="string"?{name:yr.name}:i.openSidebar,gridSize:Jce(s0(e.gridSize)?e.gridSize:mb),gridStep:lH(s0(e.gridStep)?e.gridStep:JP),editingFrame:null}},_d=(e,t,n,i)=>({elements:wd(e==null?void 0:e.elements,n,i),appState:nG(e==null?void 0:e.appState,t||null),files:(e==null?void 0:e.files)||{}}),_R=e=>{const t=wd(Bt(e.elements),null);return t.length?{...e,elements:t}:null},ty=(e=[],t)=>{const n=[];for(const i of e)if(Array.isArray(i)){const s=_R({status:t,elements:i,id:vs(),created:Date.now()});s&&n.push(s)}else{const s=i,r=_R({...s,id:s.id||vs(),status:s.status||t,created:s.created||Date.now()});r&&n.push(r)}return n},iG=async e=>{let t;if(e.type===ye.png)try{return await(await be(()=>Promise.resolve().then(()=>kG),void 0)).decodePngMetadata(e)}catch(n){throw n.message==="INVALID"?new Mu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new Mu("Error: cannot restore image")}else if("text"in Blob?t=await e.text():t=await new Promise(n=>{const i=new FileReader;i.readAsText(e,"utf8"),i.onloadend=()=>{i.readyState===FileReader.DONE&&n(i.result)}}),e.type===ye.svg)try{return P6e({svg:t})}catch(n){throw n.message==="INVALID"?new Mu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new Mu("Error: cannot restore image")}return t},sG=e=>{var t;return e&&((t=e.name.match(/\.(json|excalidraw|png|svg)$/))==null?void 0:t[1])||null},j6e=e=>e==="png"||e==="svg",v_=e=>{const t=sG(e);return t==="png"||t==="svg"},rG=e=>!!e&&Object.values(Ih).includes(e),Wu=e=>{const{type:t}=e||{};return rG(t)},oG=async(e,t,n,i)=>{const s=await iG(e);let r;try{try{r=JSON.parse(s)}catch(o){throw Wu(e)?new Mu("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):o}if(I6e(r))return{type:ye.excalidraw,data:_d({elements:lz(r.elements||[]),appState:{theme:t==null?void 0:t.theme,fileHandle:i||e.handle||null,...jV(r.appState||{}),...t?em(r.elements||[],t):{}},files:r.files},t,n,{repairBindings:!0,refreshDimensions:!1})};if(X$(r))return{type:ye.excalidrawlib,data:r};throw new Error("Error: invalid file")}catch(o){throw o instanceof Mu?o:new Error("Error: invalid file")}},w_=async(e,t,n,i)=>{const s=await oG(e,t,n,i);if(s.type!==ye.excalidraw)throw new Error("Error: invalid file");return s.data},aG=(e,t="unpublished")=>{const n=JSON.parse(e);if(!X$(n))throw new Error("Invalid library");const i=n.libraryItems||n.library;return ty(i,t)},Y6e=async(e,t="unpublished")=>aG(await iG(e),t),hm=async e=>new Promise(async(t,n)=>{try{Qm(e)&&(e=await e),e.toBlob(i=>{if(!i)return n(new zde("Error: Canvas too big","CANVAS_POSSIBLY_TOO_BIG"));t(i)})}catch(i){n(i)}}),W6e=async e=>{try{const t=await window.crypto.subtle.digest("SHA-1",await ec(e));return UF(new Uint8Array(t))}catch(t){return console.error(t),NF(40)}},A4=async e=>new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{const s=i.result;t(s)},i.onerror=s=>n(s),i.readAsDataURL(e)}),K6e=(e,t)=>`data:${t};base64,${P$(r6(e),!0)}`,Z6e=(e,t="")=>{const n=e.indexOf(","),i=atob(e.slice(n+1)),s=e.slice(0,n).split(":")[1].split(";")[0],r=new ArrayBuffer(i.length),o=new Uint8Array(r);for(let a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return new File([r],t,{type:s})},q6e=e=>F$(e.slice(e.indexOf(",")+1)),M4=async(e,t)=>{if(e.type===ye.svg)return e;const[n,i]=await Promise.all([be(()=>import("./pica-DARfqxbt.js").then(r=>r.p),__vite__mapDeps([2,3])).then(r=>r.default),be(()=>import("./image-blob-reduce.esm-B6b2_-a4.js"),__vite__mapDeps([])).then(r=>r.default)]),s=i({pica:n({features:["js","wasm"]})});if(t.outputType){const{outputType:r}=t;s._create_blob=function(o){return this.pica.toBlob(o.out_canvas,r,.8).then(a=>(o.out_blob=a,o))}}if(!Wu(e))throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"});return new File([await s.toBlob(e,{max:t.maxWidthOrHeight,alpha:!0})],e.name,{type:t.outputType||e.type})},TR=(e,t="")=>new File([new TextEncoder().encode(e)],t,{type:ye.svg}),Q6e=async(e,t="")=>{let n;try{n=await fetch(e)}catch{throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"})}if(!n.ok)throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"});const i=await n.blob();if(i.type&&Wu(i)){const s=t||i.name||"";return new File([i],s,{type:i.type})}throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"})},J6e=async e=>{const t=e.dataTransfer.files.item(0),n=await e5e(e);return{file:t?await __(t):null,fileHandle:n}},e5e=async e=>{if(zd)try{return await e.dataTransfer.items[0].getAsFileSystemHandle()||null}catch(t){return console.warn(t.name,t.message),null}return null},SR=e=>{let t=null;const n=`${[...new Uint8Array(e).slice(0,8)].join(" ")} `,i={png:"137 80 78 71 13 10 26 10 ",jpg:"255 216 255 ",gif:"71 73 70 56 57 97 "};return n===i.png?t=ye.png:n.startsWith(i.jpg)?t=ye.jpg:n.startsWith(i.gif)&&(t=ye.gif),t},M1=(e,t,n)=>new File([e],n||"",{type:t}),__=async e=>{var t,n;if(e.type){if(Wu(e)){const i=await ec(e),s=SR(i);s&&s!==e.type&&(e=M1(i,s,e.name))}}else if((t=e==null?void 0:e.name)!=null&&t.endsWith(".excalidrawlib"))e=M1(await ec(e),ye.excalidrawlib,e.name);else if((n=e==null?void 0:e.name)!=null&&n.endsWith(".excalidraw"))e=M1(await ec(e),ye.excalidraw,e.name);else{const i=await ec(e),s=SR(i);s&&(e=M1(i,s,e.name))}return e},ec=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{const i=new FileReader;i.onload=s=>{var r;if(!((r=s.target)!=null&&r.result))return n(new Error("Couldn't convert blob to ArrayBuffer"));t(s.target.result)},i.readAsArrayBuffer(e)}),Xr=32,Lt=12,Uc=256,lG=50,wu="NOT_SPREADSHEET",gm="VALID_SPREADSHEET",R1=e=>{const t=/^([-+]?)[$€£¥₩]?([-+]?)([\d.,]+)[%]?$/.exec(e);return t?parseFloat(`${(t[1]||t[2])+t[3]}`.replace(/,/g,"")):null},LE=(e,t)=>e.slice(1).every(n=>R1(n[t])!==null),IR=e=>{const t=e[0].length;if(t>2)return{type:wu,reason:"More than 2 columns"};if(t===1){if(!LE(e,0))return{type:wu,reason:"Value is not numeric"};const l=R1(e[0][0])===null,c=(l?e.slice(1):e).map(u=>R1(u[0]));return c.length<2?{type:wu,reason:"Less than two rows"}:{type:gm,spreadsheet:{title:l?e[0][0]:null,labels:null,values:c}}}const n=LE(e,0),i=LE(e,1);if(!n&&!i)return{type:wu,reason:"Value is not numeric"};const[s,r]=i?[0,1]:[1,0],o=R1(e[0][r])===null,a=o?e.slice(1):e;return a.length<2?{type:wu,reason:"Less than 2 rows"}:{type:gm,spreadsheet:{title:o?e[0][r]:null,labels:a.map(l=>l[s]),values:a.map(l=>R1(l[r]))}}},t5e=e=>{const t=[];for(let n=0;n<e[0].length;n++){const i=[];for(let s=0;s<e.length;s++)i.push(e[s][n]);t.push(i)}return t},n5e=e=>{let t=e.trim().split(`
`).map(r=>r.trim().split("	"));if(t.length&&t[0].length!==2&&(t=e.trim().split(`
`).map(r=>r.trim().split(","))),t.length===0)return{type:wu,reason:"No values"};const n=t[0].length;if(!t.every(r=>r.length===n))return{type:wu,reason:"All rows don't have same number of columns"};const s=IR(t);if(s.type!==gm){const r=IR(t5e(t));if(r.type===gm)return r}return s},l6=mie(fie),wr={fillStyle:"hachure",fontFamily:Kc,fontSize:pl,opacity:100,roughness:1,strokeColor:ze.black,roundness:null,strokeStyle:"solid",strokeWidth:1,verticalAlign:Fs.MIDDLE,locked:!1},cG=e=>{const t=(Xr+Lt)*e.values.length+Lt,n=Uc+Lt*2;return{chartWidth:t,chartHeight:n}},i5e=(e,t,n,i,s)=>{var r;return((r=e.labels)==null?void 0:r.map((o,a)=>js({groupIds:[i],backgroundColor:s,...wr,text:o.length>8?`${o.slice(0,5)}...`:o,x:t+a*(Xr+Lt)+Lt*2,y:n+Lt/2,width:Xr,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"})))||[]},s5e=(e,t,n,i,s)=>{const r=js({groupIds:[i],backgroundColor:s,...wr,x:t-Lt,y:n-Lt,text:"0",textAlign:"right"}),o=js({groupIds:[i],backgroundColor:s,...wr,x:t-Lt,y:n-Uc-r.height/2,text:Math.max(...e.values).toLocaleString(),textAlign:"right"});return[r,o]},r5e=(e,t,n,i,s)=>{const{chartWidth:r,chartHeight:o}=cG(e),a=hc({backgroundColor:s,groupIds:[i],...wr,type:"line",x:t,y:n,width:r,points:[S(0,0),S(r,0)]}),l=hc({backgroundColor:s,groupIds:[i],...wr,type:"line",x:t,y:n,height:o,points:[S(0,0),S(0,-280)]}),c=hc({backgroundColor:s,groupIds:[i],...wr,type:"line",x:t,y:n-Uc-Lt,strokeStyle:"dotted",width:r,opacity:lG,points:[S(0,0),S(r,0)]});return[a,l,c]},uG=(e,t,n,i,s,r)=>{const{chartWidth:o,chartHeight:a}=cG(e),l=e.title?js({backgroundColor:s,groupIds:[i],...wr,text:e.title,x:t+o/2,y:n-Uc-Lt*2-pl,roundness:null,textAlign:"center"}):null,c=lo({backgroundColor:s,groupIds:[i],...wr,type:"rectangle",x:t,y:n-a,width:o,height:a,strokeColor:ze.black,fillStyle:"solid",opacity:6});return[...c?[c]:[],...l?[l]:[],...i5e(e,t,n,i,s),...s5e(e,t,n,i,s),...r5e(e,t,n,i,s)]},o5e=(e,t,n)=>{const i=Math.max(...e.values),s=vs(),r=l6[Math.floor(Math.random()*l6.length)];return[...e.values.map((a,l)=>{const c=a/i*Uc;return lo({backgroundColor:r,groupIds:[s],...wr,type:"rectangle",x:t+l*(Xr+Lt)+Lt,y:n-c-Lt,width:Xr,height:c})}),...uG(e,t,n,s,r)]},a5e=(e,t,n)=>{const i=Math.max(...e.values),s=vs(),r=l6[Math.floor(Math.random()*l6.length)];let o=0;const a=[];for(const p of e.values){const U=o*(Xr+Lt),y=-(p/i)*Uc;a.push([U,y]),o++}const l=Math.max(...a.map(p=>p[0])),c=Math.max(...a.map(p=>p[1])),u=Math.min(...a.map(p=>p[0])),d=Math.min(...a.map(p=>p[1])),f=hc({backgroundColor:r,groupIds:[s],...wr,type:"line",x:t+Lt+Xr/2,y:n-Lt,height:c-d,width:l-u,strokeWidth:2,points:a}),h=e.values.map((p,U)=>{const y=U*(Xr+Lt)+Lt/2,E=-(p/i)*Uc+Lt/2;return lo({backgroundColor:r,groupIds:[s],...wr,fillStyle:"solid",strokeWidth:2,type:"ellipse",x:t+y+Xr/2,y:n+E-Lt*2,width:Lt,height:Lt})}),m=e.values.map((p,U)=>{const y=U*(Xr+Lt)+Lt/2,E=p/i*Uc+Lt/2+Lt;return hc({backgroundColor:r,groupIds:[s],...wr,type:"line",x:t+y+Xr/2+Lt/2,y:n-E,height:E,strokeStyle:"dotted",opacity:lG,points:[S(0,0),S(0,E)]})});return[...uG(e,t,n,s,r),f,...m,...h]},l5e=(e,t,n,i)=>e==="line"?a5e(t,n,i):o5e(t,n,i),T_="clipboard"in navigator&&"writeText"in navigator.clipboard,S_="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,c5e=e=>!!([br.excalidraw,br.excalidrawClipboard,br.excalidrawClipboardWithAPI].includes(e==null?void 0:e.type)&&Array.isArray(e.elements)),u5e=({types:e,files:t})=>{var i,s,r,o;!e&&!t&&console.warn("createPasteEvent: no types or files provided");const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});if(e)for(const[a,l]of Object.entries(e)){if(typeof l!="string"){t=t||[],t.push(l);continue}try{if((i=n.clipboardData)==null||i.setData(a,l),((s=n.clipboardData)==null?void 0:s.getData(a))!==l)throw new Error(`Failed to set "${a}" as clipboardData item`)}catch(c){throw new Error(c.message)}}if(t){let a=-1;for(const l of t){a++;try{if((r=n.clipboardData)==null||r.items.add(l),((o=n.clipboardData)==null?void 0:o.files[a])!==l)throw new Error(`Failed to set file "${l.name}" as clipboardData item`)}catch(c){throw new Error(c.message)}}}return n},d5e=({elements:e,files:t})=>{const n=_e(e),i=new Set(e.filter(a=>Te(a)));let s=!1;const r=e.reduce((a,l)=>(In(l)&&(s=!0,t&&t[l.fileId]&&(a[l.fileId]=t[l.fileId])),a),{});s&&!t&&console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object.");const o={type:br.excalidrawClipboard,elements:e.map(a=>{if(bs(a,n)&&!i.has(bs(a,n))){const l=Nc(a);return pi(l,n,{frameId:null}),l}return a}),files:t?r:void 0};return JSON.stringify(o)},f5e=async(e,t,n)=>{await eu(d5e({elements:e,files:t}),n)},h5e=e=>{const t=n5e(e);return t.type===gm?{spreadsheet:t.spreadsheet}:null};function dG(e){var n;let t=[];for(const i of e.childNodes)if(i.nodeType===3){const s=(n=i.textContent)==null?void 0:n.trim();s&&t.push({type:"text",value:s})}else if(i instanceof HTMLImageElement){const s=i.getAttribute("src");s&&s.startsWith("http")&&t.push({type:"imageUrl",value:s})}else t=t.concat(dG(i));return t}const g5e=e=>{var n;const t=(n=e.clipboardData)==null?void 0:n.getData(ye.html);if(!t)return null;try{const i=new DOMParser().parseFromString(t,ye.html),s=dG(i.body);if(s.length)return{type:"mixedContent",value:s}}catch(i){console.error(`error in parseHTMLFromPaste: ${i.message}`)}return null},m5e=async()=>{var n,i,s,r;const e={};let t;try{t=await((n=navigator.clipboard)==null?void 0:n.read())}catch(o){try{if((i=navigator.clipboard)!=null&&i.readText){console.warn(`navigator.clipboard.readText() failed (${o.message}). Failling back to navigator.clipboard.read()`);const a=await((s=navigator.clipboard)==null?void 0:s.readText());if(a)return{[ye.text]:a}}}catch(a){if((r=navigator.clipboard)!=null&&r.read)console.warn(`navigator.clipboard.readText() failed (${a.message}). Failling back to navigator.clipboard.read()`);else{if(a.name==="DataError")return console.warn(`navigator.clipboard.read() error, clipboard is probably empty: ${a.message}`),e;throw a}}throw o}for(const o of t)for(const a of o.types)if(yF(Mie,a))try{if(a===ye.text||a===ye.html)e[a]=await(await o.getType(a)).text();else if(rG(a)){const l=await o.getType(a),c=M1(l,a,void 0);e[a]=c}else throw new qr(`Unsupported clipboard type: ${a}`)}catch(l){console.warn(l instanceof qr?l.message:`Cannot retrieve ${a} from clipboardItem: ${l.message}`)}return Object.keys(e).length===0&&console.warn("No clipboard data found from clipboard.read()."),e},p5e=async(e,t=!1)=>{var n,i;try{const s=!t&&e&&g5e(e);return s?s.value.every(o=>o.type==="text")?{type:"text",value:((n=e.clipboardData)==null?void 0:n.getData(ye.text))||s.value.map(o=>o.value).join(`
`).trim()}:s:{type:"text",value:(((i=e.clipboardData)==null?void 0:i.getData(ye.text))||"").trim()}}catch{return{type:"text",value:""}}},fG=async(e,t=!1)=>{const n=await p5e(e,t);if(n.type==="mixedContent")return{mixedContent:n.value};try{const i=!t&&h5e(n.value);if(i)return i}catch(i){console.error(i)}try{const i=JSON.parse(n.value),s=i.type===br.excalidrawClipboardWithAPI;if(c5e(i))return{elements:i.elements,files:i.files,text:t?JSON.stringify(i.elements,null,2):void 0,programmaticAPI:s}}catch{}return{text:n.value}},U5e=async e=>{try{await navigator.clipboard.write([new window.ClipboardItem({[ye.png]:e})])}catch(t){if(Qm(e))await navigator.clipboard.write([new window.ClipboardItem({[ye.png]:await e})]);else throw t}},eu=async(e,t)=>{var n,i;if(T_)try{await navigator.clipboard.writeText(e||"");return}catch(s){console.error(s)}try{if(t){if((n=t.clipboardData)==null||n.setData(ye.text,e||""),((i=t.clipboardData)==null?void 0:i.getData(ye.text))!==e)throw new Error("Failed to setData on clipboardEvent");return}}catch(s){console.error(s)}if(!b5e(e))throw new Error("Error copying to clipboard.")},b5e=e=>{e||(e=" ");const t=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";const i=window.pageYOffset||document.documentElement.scrollTop;n.style.top=`${i}px`,n.style.fontSize="12pt",n.setAttribute("readonly",""),n.value=e,document.body.appendChild(n);let s=!1;try{n.select(),n.setSelectionRange(0,n.value.length),s=document.execCommand("copy")}catch(r){console.error(r)}return n.remove(),s},ny=(e,{selectedElementIds:t},n)=>{e=Bt(e);const i=n&&Gn(e,{selectedElementIds:t});let s=null,r=i?He(e,{selectedElementIds:t},{includeBoundTextElement:!0}):e;return i&&(r.length===1&&Te(r[0])?(s=r[0],r=dw(e,s)):r.length>1&&(r=He(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}))),{exportingFrame:s,exportedElements:Ga(r)}},iy=async(e,t,n,i,{exportBackground:s,exportPadding:r=ug,viewBackgroundColor:o,name:a=n.name||iF,fileHandle:l=null,exportingFrame:c=null})=>{if(t.length===0)throw new Error(k("alerts.cannotExportEmptyCanvas"));if(e==="svg"||e==="clipboard-svg"){const d=y_(t,{exportBackground:s,exportWithDarkMode:n.exportWithDarkMode,viewBackgroundColor:o,exportPadding:r,exportScale:n.exportScale,exportEmbedScene:n.exportEmbedScene&&e==="svg"},i,{exportingFrame:c});if(e==="svg")return a6(d.then(f=>new Blob([$ie+f.outerHTML],{type:ye.svg})),{description:"Export to SVG",name:a,extension:n.exportEmbedScene?"excalidraw.svg":"svg",mimeTypes:[Ih.svg],fileHandle:l});if(e==="clipboard-svg"){const f=await d.then(h=>h.outerHTML);try{await eu(f)}catch{throw new Error(k("errors.copyToSystemClipboardFailed"))}return}}const u=tG(t,n,i,{exportBackground:s,viewBackgroundColor:o,exportPadding:r,exportingFrame:c});if(e==="png"){let d=hm(u);return n.exportEmbedScene&&(d=d.then(f=>be(()=>Promise.resolve().then(()=>kG),void 0).then(({encodePngMetadata:h})=>h({blob:f,metadata:yg(t,n,i,"local")})))),a6(d,{description:"Export to PNG",name:a,extension:n.exportEmbedScene?"excalidraw.png":"png",mimeTypes:[Ih.png],fileHandle:l})}else if(e==="clipboard")try{const d=hm(u);await U5e(d)}catch(d){throw console.warn(d),d.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(k("canvasError.canvasTooBig")):H0&&d.name==="TypeError"?new Error(`${k("alerts.couldNotCopyToClipboard")}

${k("hints.firefox_clipboard_write")}`):new Error(k("alerts.couldNotCopyToClipboard"))}else throw new Error("Unsupported export type")},y5e=async(e,t,n,i)=>{const{exportBackground:s,viewBackgroundColor:r,fileHandle:o}=t,a=sG(o);if(!o||!j6e(a))throw new Error("fileHandle should exist and should be of type svg or png when resaving");t={...t,exportEmbedScene:!0};const{exportedElements:l,exportingFrame:c}=ny(e,t,!1);return await iy(a,l,t,n,{exportBackground:s,viewBackgroundColor:r,name:i,fileHandle:o,exportingFrame:c}),{fileHandle:o}},E5e=oe({name:"changeProjectName",label:"labels.fileTitle",trackEvent:!1,perform:(e,t,n)=>({appState:{...t,name:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t,appProps:n,data:i,app:s})=>g(BUe,{label:k("labels.fileTitle"),value:s.getName(),onChange:r=>t(r),ignoreFocus:(i==null?void 0:i.ignoreFocus)??!1})}),v5e=oe({name:"changeExportScale",label:"imageExportDialog.scale",trackEvent:{category:"export",action:"scale"},perform:(e,t,n)=>({appState:{...t,exportScale:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=Bt(e),r=Gn(i,t)?He(i,t):i;return g(ge,{children:B9.map(o=>{const[a,l]=F6e(r,ug,o),c=`${k("imageExportDialog.label.scale")} ${o}x (${a}x${l})`;return g(Ye,{size:"small",type:"radio",icon:`${o}x`,name:"export-canvas-scale",title:c,"aria-label":c,id:"export-canvas-scale",checked:o===t.exportScale,onChange:()=>n(o)},o)})})}}),w5e=oe({name:"changeExportBackground",label:"imageExportDialog.label.withBackground",trackEvent:{category:"export",action:"toggleBackground"},perform:(e,t,n)=>({appState:{...t,exportBackground:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g(d_,{checked:e.exportBackground,onChange:n=>t(n),children:k("imageExportDialog.label.withBackground")})}),hG=oe({name:"changeExportEmbedScene",label:"imageExportDialog.tooltip.embedScene",trackEvent:{category:"export",action:"embedScene"},perform:(e,t,n)=>({appState:{...t,exportEmbedScene:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>P(d_,{checked:e.exportEmbedScene,onChange:n=>t(n),children:[k("imageExportDialog.label.embedScene"),g(ll,{label:k("imageExportDialog.tooltip.embedScene"),long:!0,children:g("div",{className:"excalidraw-tooltip-icon",children:vue})})]})}),c6=oe({name:"saveToActiveFile",label:"buttons.save",icon:A5,trackEvent:{category:"export"},predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.saveToActiveFile&&!!t.fileHandle&&!t.viewModeEnabled,perform:async(e,t,n,i)=>{const s=!!t.fileHandle;try{const{fileHandle:r}=v_(t.fileHandle)?await y5e(e,t,i.files,i.getName()):await G$(e,t,i.files,i.getName());return{captureUpdate:K.EVENTUALLY,appState:{...t,fileHandle:r,toast:s?{message:r!=null&&r.name?k("toast.fileSavedToFilename").replace("{filename}",`"${r.name}"`):k("toast.fileSaved")}:null}}}catch(r){return(r==null?void 0:r.name)!=="AbortError"?console.error(r):console.warn(r),{captureUpdate:K.EVENTUALLY}}},keyTest:e=>e.key===z.S&&e[z.CTRL_OR_CMD]&&!e.shiftKey}),gG=oe({name:"saveFileToDisk",label:"exportDialog.disk_title",icon:A5,viewMode:!0,trackEvent:{category:"export"},perform:async(e,t,n,i)=>{try{const{fileHandle:s}=await G$(e,{...t,fileHandle:null},i.files,i.getName());return{captureUpdate:K.EVENTUALLY,appState:{...t,openDialog:null,fileHandle:s,toast:{message:k("toast.fileSaved")}}}}catch(s){return(s==null?void 0:s.name)!=="AbortError"?console.error(s):console.warn(s),{captureUpdate:K.EVENTUALLY}}},keyTest:e=>e.key===z.S&&e.shiftKey&&e[z.CTRL_OR_CMD],PanelComponent:({updateData:e})=>g(Ye,{type:"button",icon:pue,title:k("buttons.saveAs"),"aria-label":k("buttons.saveAs"),showAriaLabel:si().editor.isMobile,hidden:!zd,onClick:()=>e(null),"data-testid":"save-as-button"})}),R4=oe({name:"loadScene",label:"buttons.load",trackEvent:{category:"export"},predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.loadScene&&!t.viewModeEnabled,perform:async(e,t,n,i)=>{try{const{elements:s,appState:r,files:o}=await S6e(t,e);return{elements:s,appState:r,files:o,captureUpdate:K.IMMEDIATELY}}catch(s){return(s==null?void 0:s.name)==="AbortError"?(console.warn(s),!1):{elements:e,appState:{...t,errorMessage:s.message},files:i.files,captureUpdate:K.EVENTUALLY}}},keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.O}),_5e=oe({name:"exportWithDarkMode",label:"imageExportDialog.label.darkMode",trackEvent:{category:"export",action:"toggleTheme"},perform:(e,t,n)=>({appState:{...t,exportWithDarkMode:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"},children:g(FUe,{value:e.exportWithDarkMode?Me.DARK:Me.LIGHT,onChange:n=>{t(n===Me.DARK)},title:k("imageExportDialog.label.darkMode")})})});let mG="{}";const T5e=oe({name:"copyStyles",label:"labels.copyStyles",icon:SH,trackEvent:{category:"element"},perform:(e,t,n,i)=>{const s=[],r=e.find(o=>t.selectedElementIds[o.id]);if(s.push(r),r&&ns(r)){const o=Oe(r,i.scene.getNonDeletedElementsMap());s.push(o)}return r&&(mG=JSON.stringify(s)),{appState:{...t,toast:{message:k("toast.copyStyles")}},captureUpdate:K.EVENTUALLY}},keyTest:e=>e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.C}),S5e=oe({name:"pasteStyles",label:"labels.pasteStyles",icon:SH,trackEvent:{category:"element"},perform:(e,t,n,i)=>{const s=JSON.parse(mG),r=s[0],o=s[1];if(!FF(r))return{elements:e,captureUpdate:K.EVENTUALLY};const a=He(e,t,{includeBoundTextElement:!0}),l=a.map(c=>c.id);return{elements:e.map(c=>{if(l.includes(c.id)){let u=r;if(ue(c)&&c.containerId&&(u=o),!u)return c;let d=Ie(c,{backgroundColor:u==null?void 0:u.backgroundColor,strokeWidth:u==null?void 0:u.strokeWidth,strokeColor:u==null?void 0:u.strokeColor,strokeStyle:u==null?void 0:u.strokeStyle,fillStyle:u==null?void 0:u.fillStyle,opacity:u==null?void 0:u.opacity,roughness:u==null?void 0:u.roughness,roundness:u.roundness?$re(u.roundness.type,c)?u.roundness:Gre(c):null});if(ue(d)){const f=u.fontSize||pl,h=u.fontFamily||Kc;d=Ie(d,{fontSize:f,fontFamily:h,textAlign:u.textAlign||Km,lineHeight:u.lineHeight||Rc(h)});let m=null;d.containerId&&(m=a.find(p=>ue(d)&&p.id===d.containerId)||null),$i(d,m,i.scene)}return d.type==="arrow"&&xe(u)&&(d=Ie(d,{startArrowhead:u.startArrowhead,endArrowhead:u.endArrowhead})),Te(c)&&(d=Ie(d,{roundness:null,backgroundColor:"transparent"})),d}return c}),captureUpdate:K.IMMEDIATELY}},keyTest:e=>e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.V});oe({name:"toggleCanvasMenu",label:"buttons.menu",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="canvas"?null:"canvas"},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g(Ye,{type:"button",icon:gH,"aria-label":k("buttons.menu"),onClick:t,selected:e.openMenu==="canvas"})});oe({name:"toggleEditMenu",label:"buttons.edit",trackEvent:{category:"menu"},perform:(e,t)=>({appState:{...t,openMenu:t.openMenu==="shape"?null:"shape"},captureUpdate:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>g(Ye,{visible:Aw(t,Bt(e)),type:"button",icon:Uue,"aria-label":k("buttons.edit"),onClick:n,selected:t.openMenu==="shape"})});const I_=oe({name:"toggleShortcuts",label:"welcomeScreen.defaults.helpHint",icon:fue,viewMode:!0,trackEvent:{category:"menu",action:"toggleHelpDialog"},perform:(e,t,n,{focusContainer:i})=>{var s,r;return((s=t.openDialog)==null?void 0:s.name)==="help"&&i(),{appState:{...t,openDialog:((r=t.openDialog)==null?void 0:r.name)==="help"?null:{name:"help"}},captureUpdate:K.EVENTUALLY}},keyTest:e=>e.key===z.QUESTION_MARK}),I5e=e=>{if(e.length>=2){const t=e[0].groupIds;for(const n of t)if(e.reduce((i,s)=>i&&Y0(s,n),!0))return!0}return!1},xR=(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});return i.length>=2&&!I5e(i)&&!lB(i)},x5e=oe({name:"group",label:"labels.group",icon:e=>g(XA,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,i)=>{const s=cw(i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}));if(s.length<2)return{appState:t,elements:e,captureUpdate:K.EVENTUALLY};const r=Yu(t);if(r.length===1){const U=r[0],y=new Set($t(e,U).map(w=>w.id)),E=new Set(s.map(w=>w.id));if(new Set([...Array.from(y),...Array.from(E)]).size===y.size)return{appState:t,elements:e,captureUpdate:K.EVENTUALLY}}let o=[...e];new Set(s.map(U=>U.frameId)).size>1&&tae(s).forEach((y,E)=>{y5(y,i.scene.getNonDeletedElementsMap())});const l=vs(),c=_e(s);o=o.map(U=>c.get(U.id)?Ie(U,{groupIds:Koe(U.groupIds,l,t.editingGroupId)}):U);const u=$t(o,l),d=u[u.length-1],f=o.lastIndexOf(d),h=o.slice(f+1),m=o.slice(0,f).filter(U=>!Y0(U,l)),p=oo([...m,...u,...h],_e(u));return{appState:{...t,...ZF(l,{...t,selectedGroupIds:{}},Bt(o))},elements:p,captureUpdate:K.IMMEDIATELY}},predicate:(e,t,n,i)=>xR(e,t,i),keyTest:e=>!e.shiftKey&&e[z.CTRL_OR_CMD]&&e.key===z.G,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!xR(e,t,i),type:"button",icon:g(XA,{theme:t.theme}),onClick:()=>n(null),title:`${k("labels.group")} — ${Q("CtrlOrCmd+G")}`,"aria-label":k("labels.group"),visible:Gn(Bt(e),t)})}),C5e=oe({name:"ungroup",label:"labels.ungroup",icon:e=>g(jA,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,i)=>{const s=Yu(t),r=_e(e);if(s.length===0)return{appState:t,elements:e,captureUpdate:K.EVENTUALLY};let o=[...e];const a=[];o=o.map(f=>{Xt(f)&&a.push(f.id);const h=Zoe(f.groupIds,t.selectedGroupIds);return h.length===f.groupIds.length?f:Ie(f,{groupIds:h})});const l=Li(t,Bt(o),t,null),c=i.scene.getSelectedElements(t),u=new Set(c.filter(f=>f.frameId).map(f=>f.frameId));return lw(e).filter(f=>u.has(f.id)).forEach(f=>{f&&(o=oB(o,l2(o,f,t,r),f,i))}),l.selectedElementIds=Object.entries(l.selectedElementIds).reduce((f,[h,m])=>(m&&!a.includes(h)&&(f[h]=!0),f),{}),{appState:{...t,...l},elements:o,captureUpdate:K.IMMEDIATELY}},keyTest:e=>e.shiftKey&&e[z.CTRL_OR_CMD]&&e.key===z.G.toUpperCase(),predicate:(e,t)=>Yu(t).length>0,PanelComponent:({elements:e,appState:t,updateData:n})=>g(Ye,{type:"button",hidden:Yu(t).length===0,icon:g(jA,{theme:t.theme}),onClick:()=>n(null),title:`${k("labels.ungroup")} — ${Q("CtrlOrCmd+Shift+G")}`,"aria-label":k("labels.ungroup"),visible:Gn(Bt(e),t)})}),pG=(e,t,n,i,s,r,o)=>{e.beginPath(),e.moveTo(t+r,n),e.lineTo(t+i-r,n),e.quadraticCurveTo(t+i,n,t+i,n+r),e.lineTo(t+i,n+s-r),e.quadraticCurveTo(t+i,n+s,t+i-r,n+s),e.lineTo(t+r,n+s),e.quadraticCurveTo(t,n+s,t,n+s-r),e.lineTo(t,n+r),e.quadraticCurveTo(t,n,t+r,n),e.closePath(),e.fill(),o&&(e.strokeStyle=o),e.stroke()};function A5e(e){let t=0;if(e.length===0)return t;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);t=(t<<5)-t+i}return t}const sy=(e,t)=>`hsl(${Math.abs(A5e((t==null?void 0:t.id)||e))%37*10}, 100%, 83%)`,M5e=e=>{var n;const t=(n=e==null?void 0:e.trim())==null?void 0:n.codePointAt(0);return(t?String.fromCodePoint(t):"?").toUpperCase()},R5e=({context:e,renderConfig:t,appState:n,normalizedWidth:i,normalizedHeight:s})=>{for(const[r,o]of t.remotePointerViewportCoords){let{x:a,y:l}=o;const c=n.collaborators.get(r);a-=n.offsetLeft,l-=n.offsetTop;const u=11,d=14,f=a<0||a>i-u||l<0||l>s-d;a=Math.max(a,0),a=Math.min(a,i-u),l=Math.max(l,0),l=Math.min(l,s-d);const h=sy(r,c);e.save(),e.strokeStyle=h,e.fillStyle=h;const m=t.remotePointerUserStates.get(r),p=f||m===Iu.IDLE||m===Iu.AWAY;p&&(e.globalAlpha=.3),t.remotePointerButton.get(r)==="down"&&(e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=3,e.strokeStyle="#ffffff88",e.stroke(),e.closePath(),e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=1,e.strokeStyle=h,e.stroke(),e.closePath());const U=n.theme===Me.DARK?"#2f6330":Aie,y=c==null?void 0:c.isSpeaking;y&&(e.fillStyle=U,e.strokeStyle=U,e.lineWidth=10,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill()),e.fillStyle=aU,e.strokeStyle=aU,e.lineWidth=6,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill(),e.fillStyle=h,e.strokeStyle=h,e.lineWidth=2,e.lineJoin="round",e.beginPath(),p?(e.moveTo(a-1,l-1),e.lineTo(a-1,l+15),e.lineTo(a+5,l+10),e.lineTo(a+12,l+9),e.closePath(),e.fill()):(e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.fill(),e.stroke());const E=t.remotePointerUsernames.get(r)||"";if(!f&&E){e.font="600 12px sans-serif";const v=(y?a+0:a)+u/2,w=(y?l+0:l)+d+2,I=5,M=3,T=e.measureText(E),_=T.actualBoundingBoxDescent+T.actualBoundingBoxAscent,x=Math.max(_,12),C=v-1,R=w-1,N=T.width+2+I*2+2,D=x+2+M*2+2;if(e.roundRect?(e.beginPath(),e.roundRect(C,R,N,D,8),e.fillStyle=h,e.fill(),e.strokeStyle=aU,e.stroke(),y&&(e.beginPath(),e.roundRect(C-2,R-2,N+4,D+4,8),e.strokeStyle=U,e.stroke())):pG(e,C,R,N,D,8,aU),e.fillStyle=Cie,e.fillText(E,v+I+1,w+M+T.actualBoundingBoxAscent+Math.floor((x-_)/2)+2),y){e.fillStyle=U;const $=8,G=8,H=5;e.fillRect(C+N+G,R+(D/2-$/2),2,$),e.fillRect(C+N+G+H,R+(D/2-$*2/2),2,$*2),e.fillRect(C+N+G+H*2,R+(D/2-$/2),2,$)}}e.restore(),e.closePath()}},CR=({color:e,onClick:t,name:n,src:i,className:s})=>{const r=M5e(n),[o,a]=L.useState(!1),l=!o&&i,c=l?void 0:{background:e};return g("div",{className:pe("Avatar",s),style:c,onClick:t,children:l?g("img",{className:"Avatar-img",src:i,alt:r,referrerPolicy:"no-referrer",onError:()=>a(!0)}):r})};oe({name:"goToCollaborator",label:"Go to a collaborator",viewMode:!0,trackEvent:{category:"collab"},perform:(e,t,n)=>{var i;return!n.socketId||((i=t.userToFollow)==null?void 0:i.socketId)===n.socketId||n.isCurrentUser?{appState:{...t,userToFollow:null},captureUpdate:K.EVENTUALLY}:{appState:{...t,userToFollow:{socketId:n.socketId,username:n.username||""},openMenu:t.openMenu==="canvas"?null:t.openMenu},captureUpdate:K.EVENTUALLY}},PanelComponent:({updateData:e,data:t,appState:n})=>{const{socketId:i,collaborator:s,withName:r,isBeingFollowed:o}=t,a=sy(i,s),l=pe({"is-followed":o,"is-current-user":s.isCurrentUser===!0,"is-speaking":s.isSpeaking,"is-in-call":s.isInCall,"is-muted":s.isMuted}),c=s.isInCall?s.isSpeaking?P("div",{className:"UserList__collaborator-status-icon-speaking-indicator",title:k("userList.hint.isSpeaking"),children:[g("div",{}),g("div",{}),g("div",{})]}):s.isMuted?g("div",{className:"UserList__collaborator-status-icon-microphone-muted",title:k("userList.hint.micMuted"),children:Sde}):g("div",{title:k("userList.hint.inCall"),children:Tde}):null;return r?P("div",{className:`dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${l}`,style:{"--avatar-size":"1.5rem"},onClick:()=>e(s),children:[g(CR,{color:a,onClick:()=>{},name:s.username||"",src:s.avatarUrl,className:l}),g("div",{className:"UserList__collaborator-name",children:s.username}),P("div",{className:"UserList__collaborator-status-icons","aria-hidden":!0,children:[o&&g("div",{className:"UserList__collaborator-status-icon-is-followed",title:k("userList.hint.followStatus"),children:R5}),c]})]}):P("div",{className:`UserList__collaborator UserList__collaborator--avatar-only ${l}`,children:[g(CR,{color:a,onClick:()=>{e(s)},name:s.username||"",src:s.avatarUrl,className:l}),c&&g("div",{className:"UserList__collaborator-status-icon",children:c})]})}});const k5e=oe({name:"addToLibrary",trackEvent:{category:"element"},perform:(e,t,n,i)=>{const s=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});for(const r of nF)if(s.some(o=>o.type===r))return{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:k(`errors.libraryElementTypeError.${r}`)}};return i.library.getLatestLibrary().then(r=>i.library.setLibrary([{id:vs(),status:"unpublished",elements:s.map(Nc),created:Date.now()},...r])).then(()=>({captureUpdate:K.EVENTUALLY,appState:{...t,toast:{message:k("toast.addedToLibrary")}}})).catch(r=>({captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:r.message}}))},label:"labels.addToLibrary"}),Ys=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(i=>Te(i))},Eg=(e,t,n,i)=>{const s=n.scene.getSelectedElements(t),r=fle(s,i,n.scene),o=_e(r);return Dh(e.map(a=>o.get(a.id)||a),t,n)};oe({name:"alignTop",label:"labels.alignTop",icon:BA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Ys(t,i),perform:(e,t,n,i)=>({appState:t,elements:Eg(e,t,i,{position:"start",axis:"y"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&e.key===z.ARROW_UP,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!Ys(t,i),type:"button",icon:BA,onClick:()=>n(null),title:`${k("labels.alignTop")} — ${Q("CtrlOrCmd+Shift+Up")}`,"aria-label":k("labels.alignTop"),visible:Gn(Bt(e),t)})});oe({name:"alignBottom",label:"labels.alignBottom",icon:zA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Ys(t,i),perform:(e,t,n,i)=>({appState:t,elements:Eg(e,t,i,{position:"end",axis:"y"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&e.key===z.ARROW_DOWN,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!Ys(t,i),type:"button",icon:zA,onClick:()=>n(null),title:`${k("labels.alignBottom")} — ${Q("CtrlOrCmd+Shift+Down")}`,"aria-label":k("labels.alignBottom"),visible:Gn(Bt(e),t)})});oe({name:"alignLeft",label:"labels.alignLeft",icon:HA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Ys(t,i),perform:(e,t,n,i)=>({appState:t,elements:Eg(e,t,i,{position:"start",axis:"x"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&e.key===z.ARROW_LEFT,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!Ys(t,i),type:"button",icon:HA,onClick:()=>n(null),title:`${k("labels.alignLeft")} — ${Q("CtrlOrCmd+Shift+Left")}`,"aria-label":k("labels.alignLeft"),visible:Gn(Bt(e),t)})});oe({name:"alignRight",label:"labels.alignRight",icon:VA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Ys(t,i),perform:(e,t,n,i)=>({appState:t,elements:Eg(e,t,i,{position:"end",axis:"x"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>e[z.CTRL_OR_CMD]&&e.shiftKey&&e.key===z.ARROW_RIGHT,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!Ys(t,i),type:"button",icon:VA,onClick:()=>n(null),title:`${k("labels.alignRight")} — ${Q("CtrlOrCmd+Shift+Right")}`,"aria-label":k("labels.alignRight"),visible:Gn(Bt(e),t)})});oe({name:"alignVerticallyCentered",label:"labels.centerVertically",icon:$A,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Ys(t,i),perform:(e,t,n,i)=>({appState:t,elements:Eg(e,t,i,{position:"center",axis:"y"}),captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!Ys(t,i),type:"button",icon:$A,onClick:()=>n(null),title:k("labels.centerVertically"),"aria-label":k("labels.centerVertically"),visible:Gn(Bt(e),t)})});oe({name:"alignHorizontallyCentered",label:"labels.centerHorizontally",icon:GA,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Ys(t,i),perform:(e,t,n,i)=>({appState:t,elements:Eg(e,t,i,{position:"center",axis:"x"}),captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!Ys(t,i),type:"button",icon:GA,onClick:()=>n(null),title:k("labels.centerHorizontally"),"aria-label":k("labels.centerHorizontally"),visible:Gn(Bt(e),t)})});const UG=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length>1&&!n.some(i=>Te(i))},bG=(e,t,n,i)=>{const s=n.scene.getSelectedElements(t),r=Cle(s,n.scene.getNonDeletedElementsMap(),i),o=_e(r);return Dh(e.map(a=>o.get(a.id)||a),t,n)};oe({name:"distributeHorizontally",label:"labels.distributeHorizontally",trackEvent:{category:"element"},perform:(e,t,n,i)=>({appState:t,elements:bG(e,t,i,{axis:"x"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.H,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!UG(t,i),type:"button",icon:Iue,onClick:()=>n(null),title:`${k("labels.distributeHorizontally")} — ${Q("Alt+H")}`,"aria-label":k("labels.distributeHorizontally"),visible:Gn(Bt(e),t)})});oe({name:"distributeVertically",label:"labels.distributeVertically",trackEvent:{category:"element"},perform:(e,t,n,i)=>({appState:t,elements:bG(e,t,i,{axis:"y"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.V,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Ye,{hidden:!UG(t,i),type:"button",icon:xue,onClick:()=>n(null),title:`${k("labels.distributeVertically")} — ${Q("Alt+V")}`,"aria-label":k("labels.distributeVertically"),visible:Gn(Bt(e),t)})});const D5e=oe({name:"flipHorizontal",label:"labels.flipHorizontal",icon:Ade,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Dh(yG(e,i.scene.getNonDeletedElementsMap(),t,"horizontal",i),t,i),appState:t,captureUpdate:K.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===et.H}),L5e=oe({name:"flipVertical",label:"labels.flipVertical",icon:Cde,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Dh(yG(e,i.scene.getNonDeletedElementsMap(),t,"vertical",i),t,i),appState:t,captureUpdate:K.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===et.V&&!e[z.CTRL_OR_CMD]}),yG=(e,t,n,i,s)=>{const r=He(Bt(e),n,{includeBoundTextElement:!0,includeElementsInFrames:!0}),o=N5e(r,t,n,i,s),a=_e(o);return e.map(l=>a.get(l.id)||l)},N5e=(e,t,n,i,s)=>{if(e.every(h=>xe(h)&&(h.startBinding||h.endBinding)))return e.map(h=>{const m=h;return Ie(m,{startArrowhead:m.endArrowhead,endArrowhead:m.startArrowhead})});const{midX:r,midY:o}=Er(e);qB(e,t,"nw",s.scene,new Map(Array.from(t.values()).map(h=>[h.id,Nc(h)])),{flipByX:i==="horizontal",flipByY:i==="vertical",shouldResizeFromCenter:!0,shouldMaintainAspectRatio:!0}),Db(e.filter(Ae),Cu(n),[],s.scene,n.zoom);const{elbowArrows:a,otherElements:l}=e.reduce((h,m)=>he(m)?{...h,elbowArrows:h.elbowArrows.concat(m)}:{...h,otherElements:h.otherElements.concat(m)},{elbowArrows:[],otherElements:[]}),{midX:c,midY:u}=Er(e),[d,f]=[r-c,o-u];return l.forEach(h=>s.scene.mutateElement(h,{x:h.x+d,y:h.y+f})),a.forEach(h=>s.scene.mutateElement(h,{x:h.x+d,y:h.y+f})),e},I2=oe({name:"copy",label:"labels.copy",icon:l4,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{const s=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});try{await f5e(s,i.files,n)}catch(r){return{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:r.message}}}return{captureUpdate:K.EVENTUALLY}},keyTest:void 0}),AR=oe({name:"paste",label:"labels.paste",trackEvent:{category:"element"},perform:async(e,t,n,i)=>{let s;try{s=await m5e()}catch(r){return r.name==="AbortError"||r.name==="NotAllowedError"?!1:(console.error(`actionPaste ${r.name}: ${r.message}`),H0?{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:k("hints.firefox_clipboard_write")}}:{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:k("errors.asyncPasteFailedOnRead")}})}try{i.pasteFromClipboard(u5e({types:s}))}catch(r){return console.error(r),{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:k("errors.asyncPasteFailedOnParse")}}}return{captureUpdate:K.EVENTUALLY}},keyTest:void 0}),MR=oe({name:"cut",label:"labels.cut",icon:dde,trackEvent:{category:"element"},perform:(e,t,n,i)=>(I2.perform(e,t,n,i),LH.perform(e,t,null,i)),keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.X}),RR=oe({name:"copyAsSvg",label:"labels.copyAsSvg",icon:Mde,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{if(!i.canvas)return{captureUpdate:K.EVENTUALLY};const{exportedElements:s,exportingFrame:r}=ny(e,t,!0);try{await iy("clipboard-svg",s,t,i.files,{...t,exportingFrame:r,name:i.getName()});const o=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});return{appState:{toast:{message:k("toast.copyToClipboardAsSvg",{exportSelection:o.length?k("toast.selection"):k("toast.canvas"),exportColorScheme:t.exportWithDarkMode?k("buttons.darkMode"):k("buttons.lightMode")})}},captureUpdate:K.EVENTUALLY}}catch(o){return console.error(o),{appState:{errorMessage:o.message},captureUpdate:K.EVENTUALLY}}},predicate:e=>T_&&e.length>0,keywords:["svg","clipboard","copy"]}),kR=oe({name:"copyAsPng",label:"labels.copyAsPng",icon:Rde,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{if(!i.canvas)return{captureUpdate:K.EVENTUALLY};const s=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),{exportedElements:r,exportingFrame:o}=ny(e,t,!0);try{return await iy("clipboard",r,t,i.files,{...t,exportingFrame:o,name:i.getName()}),{appState:{...t,toast:{message:k("toast.copyToClipboardAsPng",{exportSelection:s.length?k("toast.selection"):k("toast.canvas"),exportColorScheme:t.exportWithDarkMode?k("buttons.darkMode"):k("buttons.lightMode")})}},captureUpdate:K.EVENTUALLY}}catch(a){return console.error(a),{appState:{...t,errorMessage:a.message},captureUpdate:K.EVENTUALLY}}},predicate:e=>S_&&e.length>0,keyTest:e=>e.code===et.C&&e.altKey&&e.shiftKey,keywords:["png","clipboard","copy"]}),DR=oe({name:"copyText",label:"labels.copyText",trackEvent:{category:"element"},perform:(e,t,n,i)=>{const s=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});try{eu(KF(s))}catch{throw new Error(k("errors.copyToSystemClipboardFailed"))}return{captureUpdate:K.EVENTUALLY}},predicate:(e,t,n,i)=>T_&&i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}).some(ue),keywords:["text","clipboard","copy"]}),LR=oe({name:"gridMode",icon:Ode,keywords:["snap"],label:"labels.toggleGrid",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>e.gridModeEnabled},perform(e,t){return{appState:{...t,gridModeEnabled:!this.checked(t),objectsSnapModeEnabled:!1},captureUpdate:K.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[z.CTRL_OR_CMD]&&e.code===et.QUOTE}),k4=oe({name:"zenMode",label:"buttons.zenMode",icon:Dde,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.zenModeEnabled},perform(e,t){return{appState:{...t,zenModeEnabled:!this.checked(t)},captureUpdate:K.EVENTUALLY}},checked:e=>e.zenModeEnabled,predicate:(e,t,n)=>typeof n.zenModeEnabled>"u",keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.Z}),O5e=oe({name:"objectsSnapMode",label:"buttons.objectsSnapMode",icon:kde,viewMode:!1,trackEvent:{category:"canvas",predicate:e=>!e.objectsSnapModeEnabled},perform(e,t){return{appState:{...t,objectsSnapModeEnabled:!this.checked(t),gridModeEnabled:!1},captureUpdate:K.EVENTUALLY}},checked:e=>e.objectsSnapModeEnabled,predicate:(e,t,n)=>typeof n.objectsSnapModeEnabled>"u",keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.S}),D4=oe({name:"stats",label:"stats.fullTitle",icon:xde,viewMode:!0,trackEvent:{category:"menu"},keywords:["edit","attributes","customize"],perform(e,t){return{appState:{...t,stats:{...t.stats,open:!this.checked(t)}},captureUpdate:K.EVENTUALLY}},checked:e=>e.stats.open,keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.SLASH}),P5e=oe({name:"unbindText",label:"labels.unbindText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>i.scene.getSelectedElements(t).some(r=>ns(r)),perform:(e,t,n,i)=>{const s=i.scene.getSelectedElements(t),r=i.scene.getNonDeletedElementsMap();return s.forEach(o=>{var l;const a=Oe(o,r);if(a){const{width:c,height:u}=Vn(a.originalText,gt(a),a.lineHeight),d=poe(o.id);XF(o.id);const{x:f,y:h}=U5(o,a,r);i.scene.mutateElement(a,{containerId:null,width:c,height:u,text:a.originalText,x:f,y:h}),i.scene.mutateElement(o,{boundElements:(l=o.boundElements)==null?void 0:l.filter(m=>m.id!==a.id),height:d||o.height})}}),{elements:e,appState:t,captureUpdate:K.IMMEDIATELY}}}),F5e=oe({name:"bindText",label:"labels.bindText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const s=i.scene.getSelectedElements(t);if(s.length===2){const r=ue(s[0])||ue(s[1]);let o;if(ju(s[0])?o=s[0]:ju(s[1])&&(o=s[1]),r&&o&&Oe(o,i.scene.getNonDeletedElementsMap())===null)return!0}return!1},perform:(e,t,n,i)=>{const s=i.scene.getSelectedElements(t);let r,o;ue(s[0])&&ju(s[1])?(r=s[0],o=s[1]):(r=s[1],o=s[0]),i.scene.mutateElement(r,{containerId:o.id,verticalAlign:Fs.MIDDLE,textAlign:$0.CENTER,autoResize:!0,angle:xe(o)?0:(o==null?void 0:o.angle)??0}),i.scene.mutateElement(o,{boundElements:(o.boundElements||[]).concat({type:"text",id:r.id})});const a=o.height;return $i(r,o,i.scene),Mb(o.id,a),{elements:B5e(e,o,r),appState:{...t,selectedElementIds:{[o.id]:!0}},captureUpdate:K.IMMEDIATELY}}}),B5e=(e,t,n)=>{const i=e.slice(),s=i.findIndex(o=>o.id===n.id);i.splice(s,1);const r=i.findIndex(o=>o.id===t.id);return i.splice(r+1,0,n),oo(i,_e([t,n])),i},z5e=(e,t,n)=>{const i=e.slice(),s=i.findIndex(o=>o.id===t.id);i.splice(s,1);const r=i.findIndex(o=>o.id===n.id);return i.splice(r,0,t),oo(i,_e([t,n])),i},H5e=oe({name:"wrapTextInContainer",label:"labels.createContainerFromText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const s=i.scene.getSelectedElements(t),r=s.some(o=>ue(o));return s.length>0&&r},perform:(e,t,n,i)=>{var a;const s=i.scene.getSelectedElements(t);let r=e.slice();const o={};for(const l of s)if(ue(l)){const c=lo({type:"rectangle",backgroundColor:t.currentItemBackgroundColor,boundElements:[...l.boundElements||[],{id:l.id,type:"text"}],angle:l.angle,fillStyle:t.currentItemFillStyle,strokeColor:t.currentItemStrokeColor,roughness:t.currentItemRoughness,strokeWidth:t.currentItemStrokeWidth,strokeStyle:t.currentItemStrokeStyle,roundness:t.currentItemRoundness==="round"?{type:Od("rectangle")?mn.ADAPTIVE_RADIUS:mn.PROPORTIONAL_RADIUS}:null,opacity:100,locked:!1,x:l.x-Fn,y:l.y-Fn,width:fd(l.width,"rectangle"),height:fd(l.height,"rectangle"),groupIds:l.groupIds,frameId:l.frameId});if((a=l.boundElements)!=null&&a.length){const u=l.boundElements.filter(f=>f.type==="arrow").map(f=>f.id);r.filter(f=>u.includes(f.id)).forEach(f=>{let h=f.startBinding,m=f.endBinding;(h==null?void 0:h.elementId)===l.id&&(h={...h,elementId:c.id}),(m==null?void 0:m.elementId)===l.id&&(m={...m,elementId:c.id}),(h||m)&&i.scene.mutateElement(f,{startBinding:h,endBinding:m})})}i.scene.mutateElement(l,{containerId:c.id,verticalAlign:Fs.MIDDLE,boundElements:null,textAlign:$0.CENTER,autoResize:!0}),$i(l,c,i.scene),r=z5e([...r,c],c,l),o[c.id]=!0}return{elements:r,appState:{...t,selectedElementIds:o},captureUpdate:K.IMMEDIATELY}}}),x_=380,V5e=42,L4=5,EG=85,$5e=500;let N4=!1;const CU=new Map,G5e=({element:e,scene:t,setAppState:n,onLinkOpen:i,setToast:s,updateEmbedValidationStatus:r})=>{const o=t.getNonDeletedElementsMap(),a=pp(),l=mp(),c=si(),u=e.link||"",[d,f]=L.useState(u),h=L.useRef(null),m=a.showHyperlinkPopup==="editor",p=L.useCallback(()=>{var I;if(!h.current)return;const w=$s(h.current.value)||null;if(!e.link&&w&&at("hyperlink","create"),fs(e)){if(((I=a.activeEmbeddable)==null?void 0:I.element)===e&&n({activeEmbeddable:null}),!w){t.mutateElement(e,{link:null}),r(e,!1);return}if(!f2(w,l.validateEmbeddable))w&&s({message:k("toast.unableToEmbed"),closable:!0}),e.link&&CU.set(e.id,e.link),t.mutateElement(e,{link:w}),r(e,!1);else{const{width:M,height:T}=e,_=zf(w);(_==null?void 0:_.error)instanceof URIError&&s({message:k("toast.unrecognizedLinkFormat"),closable:!0});const x=_?_.intrinsicSize.w/_.intrinsicSize.h:1,C=CU.get(e.id)!==e.link;t.mutateElement(e,{...C?{width:(_==null?void 0:_.type)==="video"?M>T?M:T*x:M,height:(_==null?void 0:_.type)==="video"&&M>T?M/x:T}:{},link:w}),r(e,!0),CU.has(e.id)&&CU.delete(e.id)}}else t.mutateElement(e,{link:w})},[e,t,s,l.validateEmbeddable,a.activeEmbeddable,n,r]);L.useLayoutEffect(()=>()=>{p()},[p]),L.useEffect(()=>{m&&(h!=null&&h.current)&&!(c.viewport.isMobile||c.isTouchScreen)&&h.current.select()},[m,c.viewport.isMobile,c.isTouchScreen]),L.useEffect(()=>{let w=null;const I=M=>{if(m)return;w&&clearTimeout(w),Y5e(e,o,a,S(M.clientX,M.clientY))&&(w=window.setTimeout(()=>{n({showHyperlinkPopup:!1})},$5e))};return window.addEventListener(ee.POINTER_MOVE,I,!1),()=>{window.removeEventListener(ee.POINTER_MOVE,I,!1),w&&clearTimeout(w)}},[a,e,m,n,o]);const U=L.useCallback(()=>{at("hyperlink","delete"),t.mutateElement(e,{link:null}),n({showHyperlinkPopup:!1})},[n,e,t]),y=()=>{at("hyperlink","edit","popup-ui"),n({showHyperlinkPopup:"editor"})},{x:E,y:v}=vG(e,a,o);return a.contextMenu||a.selectedElementsAreBeingDragged||a.resizingElement||a.isRotating||a.openMenu||a.viewModeEnabled?null:P("div",{className:"excalidraw-hyperlinkContainer",style:{top:`${v}px`,left:`${E}px`,width:x_,padding:L4},children:[m?g("input",{className:pe("excalidraw-hyperlinkContainer-input"),placeholder:k("labels.link.hint"),ref:h,value:d,onChange:w=>f(w.target.value),autoFocus:!0,onKeyDown:w=>{w.stopPropagation(),w[z.CTRL_OR_CMD]&&w.key===z.K&&w.preventDefault(),(w.key===z.ENTER||w.key===z.ESCAPE)&&(p(),n({showHyperlinkPopup:"info"}))}}):e.link?g("a",{href:$s(e.link||""),className:"excalidraw-hyperlinkContainer-link",target:TF(e.link)?"_self":"_blank",onClick:w=>{if(e.link&&i){const I=bF(ee.EXCALIDRAW_LINK,w.nativeEvent);i({...e,link:$s(e.link)},I),I.defaultPrevented&&w.preventDefault()}},rel:"noopener noreferrer",children:e.link}):g("div",{className:"excalidraw-hyperlinkContainer-link",children:k("labels.link.empty")}),P("div",{className:"excalidraw-hyperlinkContainer__buttons",children:[!m&&g(Ye,{type:"button",title:k("buttons.edit"),"aria-label":k("buttons.edit"),label:k("buttons.edit"),onClick:y,className:"excalidraw-hyperlinkContainer--edit",icon:C5}),g(Ye,{type:"button",title:k("labels.linkToElement"),"aria-label":k("labels.linkToElement"),label:k("labels.linkToElement"),onClick:()=>{n({openDialog:{name:"elementLinkSelector",sourceElementId:e.id}})},icon:RH}),u&&!fs(e)&&g(Ye,{type:"button",title:k("buttons.remove"),"aria-label":k("buttons.remove"),label:k("buttons.remove"),onClick:U,className:"excalidraw-hyperlinkContainer--remove",icon:Oc})]})]})},vG=(e,t,n)=>{const[i,s]=Ne(e,n),{x:r,y:o}=hr({sceneX:i+e.width/2,sceneY:s},t),a=r-t.offsetLeft-x_/2,l=o-t.offsetTop-EG;return{x:a,y:l}},NR=(e,t)=>{var s;const n=He(e,t);return fs(n[0])?"labels.link.editEmbed":(s=n[0])!=null&&s.link?"labels.link.edit":"labels.link.create"};let p0=null;const X5e=(e,t,n)=>{p0&&clearTimeout(p0),p0=window.setTimeout(()=>j5e(e,t,n),Pie)},j5e=(e,t,n)=>{if(!e.link)return;const i=d0();i.classList.add("excalidraw-tooltip--visible"),i.style.maxWidth="20rem",i.textContent=ih(e.link)?k("labels.link.goToElement"):e.link;const[s,r,o,a]=Ne(e,n),[l,c,u,d]=b_([s,r,o,a],e.angle,t),f=hr({sceneX:l,sceneY:c},t);YV(i,{left:f.x,top:f.y,width:u,height:d},"top"),at("hyperlink","tooltip","link-icon"),N4=!0},OR=()=>{p0&&clearTimeout(p0),N4&&(N4=!1,d0().classList.remove("excalidraw-tooltip--visible"))},Y5e=(e,t,n,[i,s])=>{const{x:r,y:o}=kt({clientX:i,clientY:s},n),a=15/n.zoom.value;if(Q9(r,o,e,t))return!1;const[l,c,u]=Ne(e,t);if(r>=l&&r<=u&&o>=c-EG&&o<=c)return!1;const{x:d,y:f}=vG(e,n,t);return!(i>=d-a&&i<=d+x_+L4*2+a&&s>=f-a&&s<=f+a+L4*2+V5e)},wG=oe({name:"hyperlink",label:(e,t)=>NR(e,t),icon:Wb,perform:(e,t)=>t.showHyperlinkPopup==="editor"?!1:{elements:e,appState:{...t,showHyperlinkPopup:"editor",openMenu:null},captureUpdate:K.IMMEDIATELY},trackEvent:{category:"hyperlink",action:"click"},keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.K,predicate:(e,t)=>He(e,t).length===1,PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=He(e,t);return g(Ye,{type:"button",icon:Wb,"aria-label":k(NR(e,t)),title:`${fs(e[0])?k("labels.link.labelEmbed"):k("labels.link.label")} - ${Q("CtrlOrCmd+K")}`,onClick:()=>n(null),selected:i.length===1&&!!i[0].link})}}),NE=e=>e.every(t=>!t.locked),W5e=oe({name:"toggleElementLock",label:(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1});return i.length===1&&!Te(i[0])?i[0].locked?"labels.elementLock.unlock":"labels.elementLock.lock":NE(i)?"labels.elementLock.lockAll":"labels.elementLock.unlockAll"},icon:(e,t)=>{const n=He(t,e);return NE(n)?Nw:x5},trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const s=i.scene.getSelectedElements(t);return s.length>0&&!s.some(r=>r.locked&&r.frameId)},perform:(e,t,n,i)=>{const s=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});if(!s.length)return!1;const r=NE(s),o=_e(s);return{elements:e.map(a=>o.has(a.id)?Ie(a,{locked:r}):a),appState:{...t,selectedLinearElement:r?null:t.selectedLinearElement},captureUpdate:K.IMMEDIATELY}},keyTest:(e,t,n,i)=>e.key.toLocaleLowerCase()===z.L&&e[z.CTRL_OR_CMD]&&e.shiftKey&&i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}).length>0}),K5e=oe({name:"unlockAllElements",trackEvent:{category:"canvas"},viewMode:!1,icon:x5,predicate:(e,t)=>He(e,t).length===0&&e.some(i=>i.locked),perform:(e,t)=>{const n=e.filter(i=>i.locked);return{elements:e.map(i=>i.locked?Ie(i,{locked:!1}):i),appState:{...t,selectedElementIds:Object.fromEntries(n.map(i=>[i.id,!0]))},captureUpdate:K.IMMEDIATELY}},label:"labels.elementLock.unlockAll"});var _G={exports:{}};(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(i,s){return s.filter(function(r){return n.test(i,r)})},n.test=function(i,s){return n.match(i,s)!==null},n.match=function(i,s,r){r=r||{};var o=0,a=[],l=s.length,c=0,u=0,d=r.pre||"",f=r.post||"",h=r.caseSensitive&&s||s.toLowerCase(),m;i=r.caseSensitive&&i||i.toLowerCase();for(var p=0;p<l;p++)m=s[p],h[p]===i[o]?(m=d+m+f,o+=1,u+=1+u):u=0,c+=u,a[a.length]=m;return o===i.length?(c=h===i?1/0:c,{rendered:a.join(""),score:c}):null},n.filter=function(i,s,r){return!s||s.length===0?[]:typeof i!="string"?s:(r=r||{},s.reduce(function(o,a,l,c){var u=a;r.extract&&(u=r.extract(a));var d=n.match(i,u,r);return d!=null&&(o[o.length]={string:d.rendered,score:d.score,index:l,original:a}),o},[]).sort(function(o,a){var l=a.score-o.score;return l||o.index-a.index}))}})()})(_G);var Z5e=_G.exports;const q5e=hl(Z5e),Q5e=8,J5e=10,k1=["rectangle","diamond","ellipse"],D1=["line","sharpArrow","curvedArrow","elbowArrow"],eye=new Set(k1),tye=new Set(D1),Vh=e=>eye.has(e),u6=e=>e==="arrow"||tye.has(e),wa=Zt(null),mm=new Map,pm=new Map,nye=({app:e})=>{const t=e.scene.getSelectedElements(e.state),n=L.useRef(null);return L.useEffect(()=>{if(t.length===0){e.updateEditorAtom(wa,null);return}const i=ry(t);i&&!n.current?n.current=i:(n.current&&!i||n.current&&i!==n.current)&&(e.updateEditorAtom(wa,null),n.current=null)},[t,e]),L.useEffect(()=>()=>{mm.clear(),pm.clear()},[]),g(iye,{app:e,elements:t})},iye=({app:e,elements:t})=>{const n=ry(t),i=L.useMemo(()=>n==="generic"?IG(t):[],[n,t]),s=L.useMemo(()=>n==="linear"?P4(t):[],[n,t]),r=n==="generic"?i.every(d=>d.type===i[0].type):n==="linear"?s.every(d=>th(d)===th(s[0])):!1,[o,a]=L.useState({x:0,y:0}),l=L.useRef(""),c=L.useRef(null);L.useEffect(()=>{const d=[...i,...s].sort((U,y)=>U.id.localeCompare(y.id)),f=`
      ${e.state.scrollX}${e.state.scrollY}${e.state.offsetTop}${e.state.offsetLeft}${e.state.zoom.value}${d.map(U=>U.id).join(",")}`;if(f===l.current)return;l.current=f;let h;if(d.length===1){const[U,,,y,E,v]=Ne(d[0],e.scene.getNonDeletedElementsMap());h=Z(S(U,y),S(E,v),d[0].angle)}else{const{minX:U,maxY:y}=Er(d);h=S(U,y)}const{x:m,y:p}=hr({sceneX:h[0],sceneY:h[1]},e.state);a({x:m,y:p})},[i,s,e.scene,e.state]),L.useEffect(()=>{for(const d of s){const f=O4(d.id,lye(d));pm.has(f)||pm.set(f,d)}},[s]),L.useEffect(()=>{for(const d of i)if(!mm.has(d.id)){const f=Oe(d,e.scene.getNonDeletedElementsMap());f&&mm.set(d.id,{fontSize:f.fontSize})}},[i,e.scene]);const u=n==="linear"?[["line",hH],["sharpArrow",xH],["curvedArrow",AH],["elbowArrow",CH]]:n==="generic"?[["rectangle",uH],["diamond",dH],["ellipse",fH]]:[];return g("div",{ref:c,tabIndex:-1,style:{position:"absolute",top:`${o.y+(J5e+8)*e.state.zoom.value-e.state.offsetTop}px`,left:`${o.x-e.state.offsetLeft-Q5e}px`,zIndex:2},className:Mc.CONVERT_ELEMENT_TYPE_POPUP,children:u.map(([d,f])=>{const h=r&&(n==="generic"&&i[0].type===d||n==="linear"&&th(s[0])===d);return g(Ye,{className:"Shape",type:"radio",icon:f,checked:h,name:"convertElementType-option",title:d,keyBindingLabel:"","aria-label":d,"data-testid":`toolbar-${d}`,onChange:()=>{var m;e.state.activeTool.type!==d&&at("convertElementType",d,"ui"),TG(e,{conversionType:n,nextType:d}),(m=c.current)==null||m.focus()}},`${t[0].id}${t[0].version}_${d}`)})})},sye=(e,t,n)=>{const i=Zo(e,t),s=sp(e,t),r=qc(t.text,gt(t),i);let o=Vn(r,gt(t),t.lineHeight),a=t.fontSize;for(;(o.width>i||o.height>s)&&a>0;){a-=1;const l={...t,fontSize:a};o=Vn(t.text,gt(l),t.lineHeight)}pi(t,n.getNonDeletedElementsMap(),{fontSize:a,width:o.width,height:o.height}),$i(t,e,n)},TG=(e,{conversionType:t,nextType:n,direction:i="right"})=>{var a;if(!t)return!1;const s=e.scene.getSelectedElements(e.state),r=s.reduce((l,c)=>({...l,[c.id]:!0}),{}),o=i==="right"?1:-1;if(t==="generic"){const l=IG(s),u=l.every(d=>d.type===l[0].type)?k1.indexOf(l[0].type):-1;if(n=n??k1[(u+k1.length+o)%k1.length],n&&Vh(n)){const d={};for(const h of l){const m=FR(h,n,e);d[m.id]=m}const f=[];for(const h of e.scene.getElementsIncludingDeleted())d[h.id]?f.push(d[h.id]):f.push(h);e.scene.replaceAllElements(f);for(const h of Object.values(d)){const m=Oe(h,e.scene.getNonDeletedElementsMap());m&&(mm.get(h.id)&&pi(m,e.scene.getNonDeletedElementsMap(),{fontSize:((a=mm.get(h.id))==null?void 0:a.fontSize)??m.fontSize}),sye(h,m,e.scene))}e.setState(h=>({selectedElementIds:r,activeTool:en(h,{type:"selection"})}))}}if(t==="linear"){const l=P4(s);if(!n){const u=wF(l,th),d=u?D1.indexOf(u):-1;n=D1[(d+D1.length+o)%D1.length]}if(u6(n)){const u=[],d=e.scene.getElementsMapIncludingDeleted();for(const f of l){const h=pm.get(O4(f.id,n));if(h&&th(h)===n)d.set(h.id,h),u.push(h);else{const m=FR(f,n,e);d.set(m.id,m),u.push(m)}}e.scene.replaceAllElements(d);for(const f of u)if(Ae(f))if(he(f)){const h=rye(f);if(h.length<2)continue;const m=[];for(let U=0;U<h.length-1;U++)m.push({start:h[U],end:h[U+1],index:U+1});const p=hg(f,e.scene.getNonDeletedElementsMap(),{points:h,fixedSegments:m});pi(f,e.scene.getNonDeletedElementsMap(),{...p})}else{const h=wse(["line","sharpArrow","curvedArrow"],m=>pm.get(O4(f.id,m)));if(h){const m=h.points;e.scene.mutateElement(f,{points:m})}}}const c=P4(e.scene.getSelectedElements(e.state));e.setState(u=>({selectedElementIds:r,selectedLinearElement:c.length===1?new le(c[0],e.scene.getNonDeletedElementsMap()):null,activeTool:en(u,{type:"selection"})}))}return!0},ry=e=>{if(e.length===0)return null;let t=!1;for(const n of e){if(Vh(n.type))return"generic";SG(n)&&(t=!0)}return t?"linear":null},SG=e=>Ae(e)&&(!xe(e)||!BF(e)&&!ns(e)),O4=(e,t)=>`${e}:${t}`,IG=e=>e.filter(t=>Vh(t.type)),P4=e=>e.filter(t=>SG(t)),AU=20,Uf=(e,t)=>e[0]===t[0],OE=(e,t)=>e[1]===t[1],PR=(e,t)=>Uf(e,t)?Math.abs(e[1]-t[1]):Math.abs(e[0]-t[0]),rye=e=>{const t=[e.points[0]],n=oye(e.points);for(let r=1;r<n.length;++r){const o=t[t.length-1],a=[...n[r]];Math.abs(a[0]-o[0])<AU?a[0]=o[0]:Math.abs(a[1]-o[1])<AU&&(a[1]=o[1]),Uf(o,a)||OE(o,a)||t.push(S(o[0],a[1])),t.push(a)}const i=[t[0]];for(let r=1;r<t.length-1;++r)Uf(t[r-1],t[r])&&Uf(t[r],t[r+1])||OE(t[r-1],t[r])&&OE(t[r],t[r+1])||i.push(t[r]);i.push(t[t.length-1]);const s=[i[0]];for(let r=1;r<i.length-1;++r){const o=s[s.length-1],a=i[r],l=i[r+1],c=Uf(o,a),u=Uf(a,l);if(c!==u){const d=PR(o,a),f=PR(a,l);if(d<AU||f<AU){if(f<d)c?l[0]=o[0]:l[1]=o[1];else if(u)for(let h=s.length-1;h>=0&&s[h][0]===o[0];--h)s[h][0]=a[0];else for(let h=s.length-1;h>=0&&s[h][1]===o[1];--h)s[h][1]=a[1];continue}}s.push(a)}return s.push(i[i.length-1]),s},oye=e=>{if(e.length===0)return[];const t=[e[0]];for(let n=1;n<e.length;n++){const[i,s]=t[t.length-1],[r,o]=e[n];(i!==r||s!==o)&&t.push(e[n])}return t},FR=(e,t,n)=>{if(!aye(e.type,t))throw Error(`Invalid conversion from ${e.type} to ${t}.`);if(e.type===t)return e;if(Gt.delete(e),Vh(t)){const i=Ma(lo({...e,type:t,roundness:t==="diamond"&&e.roundness?{type:Od(t)?mn.ADAPTIVE_RADIUS:mn.PROPORTIONAL_RADIUS}:e.roundness}));return W0(i,n.scene),i}if(u6(t))switch(t){case"line":return Ma(hc({...e,type:"line"}));case"sharpArrow":return Ma(sh({...e,type:"arrow",elbowed:!1,roundness:null,startArrowhead:n.state.currentItemStartArrowhead,endArrowhead:n.state.currentItemEndArrowhead}));case"curvedArrow":return Ma(sh({...e,type:"arrow",elbowed:!1,roundness:{type:mn.PROPORTIONAL_RADIUS},startArrowhead:n.state.currentItemStartArrowhead,endArrowhead:n.state.currentItemEndArrowhead}));case"elbowArrow":return Ma(sh({...e,type:"arrow",elbowed:!0,fixedSegments:null,roundness:null}))}return jo(t,`unhandled conversion type: ${t}`),e},aye=(e,t)=>!!(Vh(e)&&Vh(t)||u6(e)&&u6(t)),lye=e=>Ae(e)?th(e):e.type,cye=oe({name:"toggleShapeSwitch",label:"labels.shapeSwitch",icon:()=>null,viewMode:!0,trackEvent:{category:"shape_switch",action:"toggle"},keywords:["change","switch","swap"],perform(e,t,n,i){return Ns.set(wa,{type:"panel"}),{captureUpdate:K.NEVER}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>ry(e)!==null}),xG=oe({name:"copyElementLink",label:"labels.copyElementLink",icon:lp,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{const s=He(e,t);try{if(window.location){const r=HB(s,t);return r?(await eu(i.props.generateLinkForSelection?i.props.generateLinkForSelection(r.id,r.type):zB(r.id,r.type)),{appState:{toast:{message:k("toast.elementLinkCopied"),closable:!0}},captureUpdate:K.EVENTUALLY}):{appState:t,elements:e,app:i,captureUpdate:K.EVENTUALLY}}}catch(r){console.error(r)}return{appState:t,elements:e,app:i,captureUpdate:K.EVENTUALLY}},predicate:(e,t)=>Xb(He(e,t))}),uye=oe({name:"linkToElement",label:"labels.linkToElement",icon:RH,perform:(e,t,n,i)=>{const s=He(e,t);return s.length!==1||!Xb(s)?{elements:e,appState:t,app:i,captureUpdate:K.EVENTUALLY}:{appState:{...t,openDialog:{name:"elementLinkSelector",sourceElementId:He(e,t)[0].id}},captureUpdate:K.IMMEDIATELY}},predicate:(e,t,n,i)=>{var r;const s=He(e,t);return((r=t.openDialog)==null?void 0:r.name)!=="elementLinkSelector"&&s.length===1&&Xb(s)},trackEvent:!1}),dye={toggleTheme:[Q("Shift+Alt+D")],saveScene:[Q("CtrlOrCmd+S")],loadScene:[Q("CtrlOrCmd+O")],clearCanvas:[Q("CtrlOrCmd+Delete")],imageExport:[Q("CtrlOrCmd+Shift+E")],commandPalette:[Q("CtrlOrCmd+/"),Q("CtrlOrCmd+Shift+P")],cut:[Q("CtrlOrCmd+X")],copy:[Q("CtrlOrCmd+C")],paste:[Q("CtrlOrCmd+V")],copyStyles:[Q("CtrlOrCmd+Alt+C")],pasteStyles:[Q("CtrlOrCmd+Alt+V")],selectAll:[Q("CtrlOrCmd+A")],deleteSelectedElements:[Q("Delete")],duplicateSelection:[Q("CtrlOrCmd+D"),Q(`Alt+${k("helpDialog.drag")}`)],sendBackward:[Q("CtrlOrCmd+[")],bringForward:[Q("CtrlOrCmd+]")],sendToBack:[Q(Xo?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")],bringToFront:[Q(Xo?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")],copyAsPng:[Q("Shift+Alt+C")],group:[Q("CtrlOrCmd+G")],ungroup:[Q("CtrlOrCmd+Shift+G")],gridMode:[Q("CtrlOrCmd+'")],zenMode:[Q("Alt+Z")],objectsSnapMode:[Q("Alt+S")],stats:[Q("Alt+/")],addToLibrary:[],flipHorizontal:[Q("Shift+H")],flipVertical:[Q("Shift+V")],viewMode:[Q("Alt+R")],hyperlink:[Q("CtrlOrCmd+K")],toggleElementLock:[Q("CtrlOrCmd+Shift+L")],resetZoom:[Q("CtrlOrCmd+0")],zoomOut:[Q("CtrlOrCmd+-")],zoomIn:[Q("CtrlOrCmd++")],zoomToFitSelection:[Q("Shift+3")],zoomToFit:[Q("Shift+1")],zoomToFitSelectionInViewport:[Q("Shift+2")],toggleEraserTool:[Q("E")],toggleHandTool:[Q("H")],setFrameAsActiveTool:[Q("F")],saveFileToDisk:[Q("CtrlOrCmd+S")],saveToActiveFile:[Q("CtrlOrCmd+S")],toggleShortcuts:[Q("?")],searchMenu:[Q("CtrlOrCmd+F")],wrapSelectionInFrame:[]},Vi=(e,t=0)=>{const n=dye[e];return n&&n.length>0?n[t]||n[0]:""},fye="\\u0300-\\u036f",hye="\\ufe20-\\ufe2f",gye="\\u20d0-\\u20ff",mye=fye+hye+gye,pye=`[${mye}]`,Uye=RegExp(pye,"g"),bye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yye={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"E",æ:"e",Þ:"T",þ:"t",ß:"s",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"I",ĳ:"i",Œ:"E",œ:"e",ŉ:"n",ſ:"s"},BR=e=>e.replace(bye,t=>yye[t]||t).replace(Uye,""),CG=()=>{const[e,t]=L.useState(null),n=L.useCallback(i=>t(i),[]);return[e,n]};var oy={},Eye=vye;function vye(e,t){if(e=String(e),t=String(t),!/^[\x00-\xFF]+$/.test(e)||!/^[\x00-\xFF]+$/.test(t))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(e.length>=80)throw new Error('Keyword "'+e+'" is longer than the 79-character limit imposed by the PNG specification');for(var n=e.length+t.length+1,i=new Uint8Array(n),s=0,r,o=0;o<e.length;o++){if(!(r=e.charCodeAt(o)))throw new Error("0x00 character is not permitted in tEXt keywords");i[s++]=r}i[s++]=0;for(var a=0;a<t.length;a++){if(!(r=t.charCodeAt(a)))throw new Error("0x00 character is not permitted in tEXt content");i[s++]=r}return{name:"tEXt",data:i}}var wye=_ye;function _ye(e){e.data&&e.name&&(e=e.data);for(var t=!0,n="",i="",s=0;s<e.length;s++){var r=e[s];if(t)r?i+=String.fromCharCode(r):t=!1;else if(r)n+=String.fromCharCode(r);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:i,text:n}}oy.encode=Eye;oy.decode=wye;var Tye=function(e,t,n){var i=[],s=e.length;if(s===0)return i;var r=t<0?Math.max(0,t+s):t||0;for(n!==void 0&&(s=n<0?n+s:n);s-- >r;)i[s-r]=e[s];return i},C_={};(function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="0.3.0";function n(){for(var c=0,u=new Array(256),d=0;d!=256;++d)c=d,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,u[d]=c;return typeof Int32Array<"u"?new Int32Array(u):u}var i=n(),s=typeof Buffer<"u";function r(c){if(c.length>32768&&s)return a(new Buffer(c));for(var u=-1,d=c.length-1,f=0;f<d;)u=i[(u^c.charCodeAt(f++))&255]^u>>>8,u=i[(u^c.charCodeAt(f++))&255]^u>>>8;return f===d&&(u=u>>>8^i[(u^c.charCodeAt(f))&255]),u^-1}function o(c){if(c.length>1e4)return a(c);for(var u=-1,d=0,f=c.length-3;d<f;)u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255];for(;d<f+3;)u=u>>>8^i[(u^c[d++])&255];return u^-1}function a(c){for(var u=-1,d=0,f=c.length-7;d<f;)u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255];for(;d<f+7;)u=u>>>8^i[(u^c[d++])&255];return u^-1}function l(c){for(var u=-1,d=0,f=c.length,h,m;d<f;)h=c.charCodeAt(d++),h<128?u=u>>>8^i[(u^h)&255]:h<2048?(u=u>>>8^i[(u^(192|h>>6&31))&255],u=u>>>8^i[(u^(128|h&63))&255]):h>=55296&&h<57344?(h=(h&1023)+64,m=c.charCodeAt(d++)&1023,u=u>>>8^i[(u^(240|h>>8&7))&255],u=u>>>8^i[(u^(128|h>>2&63))&255],u=u>>>8^i[(u^(128|m>>6&15|h&3))&255],u=u>>>8^i[(u^(128|m&63))&255]):(u=u>>>8^i[(u^(224|h>>12&15))&255],u=u>>>8^i[(u^(128|h>>6&63))&255],u=u>>>8^i[(u^(128|h&63))&255]);return u^-1}t.table=i,t.bstr=r,t.buf=o,t.str=l})})(C_);var Sye=Tye,Iye=C_,xye=Mye,wo=new Uint8Array(4),Cye=new Int32Array(wo.buffer),Aye=new Uint32Array(wo.buffer);function Mye(e){var t=8,n=t,i;for(i=0;i<e.length;i++)t+=e[i].data.length,t+=12;var s=new Uint8Array(t);for(s[0]=137,s[1]=80,s[2]=78,s[3]=71,s[4]=13,s[5]=10,s[6]=26,s[7]=10,i=0;i<e.length;i++){var r=e[i],o=r.name,a=r.data,l=a.length,c=[o.charCodeAt(0),o.charCodeAt(1),o.charCodeAt(2),o.charCodeAt(3)];Aye[0]=l,s[n++]=wo[3],s[n++]=wo[2],s[n++]=wo[1],s[n++]=wo[0],s[n++]=c[0],s[n++]=c[1],s[n++]=c[2],s[n++]=c[3];for(var u=0;u<l;)s[n++]=a[u++];var d=c.concat(Sye(a)),f=Iye.buf(d);Cye[0]=f,s[n++]=wo[3],s[n++]=wo[2],s[n++]=wo[1],s[n++]=wo[0]}return s}const Rye=hl(xye);var kye=C_,Dye=Oye,_o=new Uint8Array(4),Lye=new Int32Array(_o.buffer),Nye=new Uint32Array(_o.buffer);function Oye(e){if(e[0]!==137)throw new Error("Invalid .png file header");if(e[1]!==80)throw new Error("Invalid .png file header");if(e[2]!==78)throw new Error("Invalid .png file header");if(e[3]!==71)throw new Error("Invalid .png file header");if(e[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(e[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(e[6]!==26)throw new Error("Invalid .png file header");if(e[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var t=!1,n=[],i=8;i<e.length;){_o[3]=e[i++],_o[2]=e[i++],_o[1]=e[i++],_o[0]=e[i++];var s=Nye[0]+4,r=new Uint8Array(s);r[0]=e[i++],r[1]=e[i++],r[2]=e[i++],r[3]=e[i++];var o=String.fromCharCode(r[0])+String.fromCharCode(r[1])+String.fromCharCode(r[2])+String.fromCharCode(r[3]);if(!n.length&&o!=="IHDR")throw new Error("IHDR header missing");if(o==="IEND"){t=!0,n.push({name:o,data:new Uint8Array(0)});break}for(var a=4;a<s;a++)r[a]=e[i++];_o[3]=e[i++],_o[2]=e[i++],_o[1]=e[i++],_o[0]=e[i++];var l=Lye[0],c=kye.buf(r);if(c!==l)throw new Error("CRC values for "+o+" header do not match, PNG file is likely corrupted");var u=new Uint8Array(r.buffer.slice(4));n.push({name:o,data:u})}if(!t)throw new Error(".png file ended prematurely: no IEND header was found");return n}const AG=hl(Dye),MG=async e=>{const n=AG(new Uint8Array(await ec(e))).find(i=>i.name==="tEXt");return n?oy.decode(n.data):null},RG=async({blob:e,metadata:t})=>{const n=AG(new Uint8Array(await ec(e))),i=oy.encode(ye.excalidraw,JSON.stringify(B$({text:t,compress:!0})));return n.splice(-1,0,i),new Blob([Rye(n)],{type:ye.png})},Pye=async e=>{const t=await MG(e);if((t==null?void 0:t.keyword)===ye.excalidraw)try{const n=JSON.parse(t.text);if(!("encoded"in n)){if("type"in n&&n.type===br.excalidraw)return t.text;throw new Error("FAILED")}return z$(n)}catch(n){throw console.error(n),new Error("FAILED")}throw new Error("INVALID")},kG=Object.freeze(Object.defineProperty({__proto__:null,decodePngMetadata:Pye,encodePngMetadata:RG,getTEXtChunk:MG},Symbol.toStringTag,{value:"Module"})),ay=({elements:e,appState:t,files:n,maxWidthOrHeight:i,getDimensions:s,exportPadding:r,exportingFrame:o})=>{const{elements:a,appState:l}=_d({elements:e,appState:t},null,null),{exportBackground:c,viewBackgroundColor:u}=l;return tG(a,{...l,offsetTop:0,offsetLeft:0,width:0,height:0},n||{},{exportBackground:c,exportPadding:r,viewBackgroundColor:u,exportingFrame:o},(d,f)=>{const h=document.createElement("canvas");if(i){typeof s=="function"&&console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");const p=Math.max(d,f),U=i<p?i/p:(t==null?void 0:t.exportScale)??1;return h.width=d*U,h.height=f*U,{canvas:h,scale:U}}const m=(s==null?void 0:s(d,f))||{width:d,height:f};return h.width=m.width,h.height=m.height,{canvas:h,scale:m.scale??1}})},Fye=async e=>{var s;let{mimeType:t=ye.png,quality:n}=e;t===ye.png&&typeof n=="number"&&console.warn(`"quality" will be ignored for "${ye.png}" mimeType`),t==="image/jpg"&&(t=ye.jpg),t===ye.jpg&&!((s=e.appState)!=null&&s.exportBackground)&&(console.warn(`Defaulting "exportBackground" to "true" for "${ye.jpg}" mimeType`),e={...e,appState:{...e.appState,exportBackground:!0}});const i=await ay(e);return n=n||(/image\/jpe?g/.test(t)?.92:.8),new Promise((r,o)=>{i.toBlob(async a=>{var l;if(!a)return o(new Error("couldn't export to blob"));a&&t===ye.png&&((l=e.appState)!=null&&l.exportEmbedScene)&&(a=await RG({blob:a,metadata:yg(e.elements,e.appState,e.files||{},"local")})),r(a)},t,n)})},DG=async({elements:e,appState:t=Jo(),files:n={},exportPadding:i,renderEmbeddables:s,exportingFrame:r,skipInliningFonts:o,reuseImages:a})=>{const{elements:l,appState:c}=_d({elements:e,appState:t},null,null),u={...c,exportPadding:i};return y_(l,u,n,{exportingFrame:r,renderEmbeddables:s,skipInliningFonts:o,reuseImages:a})},LG=Zt(new Map),zR=async e=>await DG({elements:e,appState:{exportBackground:!1,viewBackgroundColor:ze.white},files:null,renderEmbeddables:!1,skipInliningFonts:!0}),Bye=(e,t,n)=>{const[i,s]=L.useState();return L.useEffect(()=>{if(t)if(e){const r=n.get(e);r?s(r):(async()=>{var a;const o=await zR(t);(a=o.querySelector(".style-fonts"))==null||a.remove(),o&&(n.set(e,o),s(o))})()}else(async()=>{const r=await zR(t);s(r)})()},[e,t,n,s]),i},NG=()=>{const[e]=pn(LG);return{clearLibraryCache:()=>e.clear(),deleteItemsFromLibraryCache:i=>{i.forEach(s=>e.delete(s))},svgCache:e}},zye=["excalidraw.com","raw.githubusercontent.com/excalidraw/excalidraw-libraries"],OG=new zr,Um=Zt({status:"loaded",isInitialized:!1,libraryItems:[]}),r1=e=>Ga(e),Hye=(e,t)=>!e.find(n=>n.elements.length!==t.elements.length?!1:n.elements.every((i,s)=>i.id===t.elements[s].id&&i.versionNonce===t.elements[s].versionNonce)),Vye=(e,t)=>{const n=[];for(const i of t)Hye(e,i)&&n.push(i);return[...n,...e]},PG=(e,t)=>{const n=_e(t),i={deletedItems:new Map,addedItems:new Map};for(const r of e)n.has(r.id)||i.deletedItems.set(r.id,r);const s=_e(e);for(const r of t)s.has(r.id)||i.addedItems.set(r.id,r);return i};class $ye{constructor(t){this.currLibraryItems=[],this.prevLibraryItems=r1(this.currLibraryItems),this.updateQueue=[],this.getLastUpdateTask=()=>this.updateQueue[this.updateQueue.length-1],this.notifyListeners=()=>{var n,i;if(this.updateQueue.length>0)Ns.set(Um,s=>({status:"loading",libraryItems:this.currLibraryItems,isInitialized:s.isInitialized}));else{Ns.set(Um,{status:"loaded",libraryItems:this.currLibraryItems,isInitialized:!0});try{const s=this.prevLibraryItems;this.prevLibraryItems=r1(this.currLibraryItems);const r=r1(this.currLibraryItems);(i=(n=this.app.props).onLibraryChange)==null||i.call(n,r),OG.trigger(PG(s,r),r)}catch(s){console.error(s)}}},this.destroy=()=>{this.updateQueue=[],this.currLibraryItems=[],Ns.set(LG,new Map)},this.resetLibrary=()=>this.setLibrary([]),this.getLatestLibrary=()=>new Promise(async n=>{try{const i=await(this.getLastUpdateTask()||this.currLibraryItems);this.updateQueue.length>0?n(this.getLatestLibrary()):n(r1(i))}catch{return n(this.currLibraryItems)}}),this.updateLibrary=async({libraryItems:n,prompt:i=!1,merge:s=!1,openLibraryMenu:r=!1,defaultStatus:o="unpublished"})=>(r&&this.app.setState({openSidebar:{name:yr.name,tab:pb}}),this.setLibrary(()=>new Promise(async(a,l)=>{try{const c=await(typeof n=="function"&&!(n instanceof Blob)?n(this.currLibraryItems):n);let u;c instanceof Blob?u=await Y6e(c,o):u=ty(c,o),!i||window.confirm(k("alerts.confirmAddLibrary",{numShapes:u.length}))?(i&&this.app.focusContainer(),a(s?Vye(this.currLibraryItems,u):u)):l(new Fh)}catch(c){l(c)}}))),this.setLibrary=n=>{const i=new Promise(async(s,r)=>{try{await this.getLastUpdateTask(),typeof n=="function"&&(n=n(this.currLibraryItems)),this.currLibraryItems=r1(await n),s(this.currLibraryItems)}catch(o){r(o)}}).catch(s=>{if(s.name==="AbortError")return console.warn("Library update aborted by user"),this.currLibraryItems;throw s}).finally(()=>{this.updateQueue=this.updateQueue.filter(s=>s!==i),this.notifyListeners()});return this.updateQueue.push(i),this.notifyListeners(),i},this.app=t}}const FG=e=>{const n=Math.ceil(Math.sqrt(e.length)),i=[],s=h=>e.slice(h*n,h*n+n).reduce((p,U)=>{const{height:y}=Er(U.elements);return Math.max(p,y)},0),r=h=>{let m=0,p=0,U=0;for(const y of e){if(m%n===0&&(p=0),p===h){const{width:E}=Er(y.elements);U=Math.max(U,E)}m++,p++}return U};let o=0,a=0,l=0,c=0,u=0,d=0,f=0;for(const h of e){u&&u%n===0&&(a+=l+50,o=0,d=0,f++),d===0&&(l=s(f)),c=r(d);const{minX:m,minY:p,width:U,height:y}=Er(h.elements),E=(c-U)/2,v=(l-y)/2;i.push(...h.elements.map(w=>({...w,x:w.x+o+E-m,y:w.y+a+v-p}))),o+=c+50,u++,d++}return i},Gye=(e,t=zye)=>{if(typeof t=="function"?t(e):t.some(n=>{const i=new URL(`https://${n.replace(/^https?:\/\//,"")}`),{hostname:s,pathname:r}=new URL(e);return new RegExp(`(^|\\.)${i.hostname}$`).test(s)&&new RegExp(`^${i.pathname.replace(/\/+$/,"")}(/+|$)`).test(r)}))return!0;throw new Error(`Invalid or disallowed library URL: "${e}"`)},F4=()=>{const e=new URLSearchParams(window.location.hash.slice(1)).get(T3.addLibrary)||new URLSearchParams(window.location.search).get(_3.addLibrary),t=e?new URLSearchParams(window.location.hash.slice(1)).get("token"):null;return e?{libraryUrl:e,idToken:t}:null},zl=class zl{static async getLibraryItems(t,n,i=!0){const s=()=>new Promise(async(r,o)=>{try{const a=await t.load({source:n});r(ty((a==null?void 0:a.libraryItems)||[],"published"))}catch(a){o(a)}});return i?zl.queue.push(s):s()}constructor(t){this.adapter=t}getLibraryItems(t){return zl.getLibraryItems(this.adapter,t,!1)}};zl.queue=new Wie,zl.run=async(t,n)=>{const i=new zl(t);return zl.queue.push(()=>n(i))};let uh=zl,U0=0,d6=0;const B4=e=>Mw(e.map(t=>`${t.id}:${az(t.elements)}`).sort().join()),HR=async(e,t)=>{try{return d6++,await uh.run(e,async n=>{const i=_e(await n.getLibraryItems("save"));for(const[a]of t.deletedItems)i.delete(a);const s=[];for(const[a,l]of t.addedItems)i.has(a)?i.set(a,l):s.push(l);const r=s.concat(Array.from(i.values())),o=B4(r);return o!==U0&&await e.save({libraryItems:r}),U0=o,r})}finally{d6--}},Xye=e=>{const{excalidrawAPI:t}=e,n=L.useRef(e);n.current=e;const i=L.useRef(!1);L.useEffect(()=>{if(!t)return;i.current=!1;const s=async({libraryUrl:a,idToken:l})=>{const c=new Promise(async(d,f)=>{try{a=decodeURIComponent(a),a=j9(a),Gye(a,n.current.validateLibraryUrl);const m=await(await fetch(a)).blob();d(m)}catch(h){f(h)}}),u=l!==t.id;await(u&&document.hidden?new Promise(d=>{window.addEventListener("focus",()=>d(),{once:!0})}):null);try{await t.updateLibrary({libraryItems:c,prompt:u,merge:!0,defaultStatus:"published",openLibraryMenu:!0})}catch(d){throw t.updateScene({appState:{errorMessage:d.message}}),d}finally{if(window.location.hash.includes(T3.addLibrary)){const d=new URLSearchParams(window.location.hash.slice(1));d.delete(T3.addLibrary),window.history.replaceState({},Va,`#${d.toString()}`)}else if(window.location.search.includes(_3.addLibrary)){const d=new URLSearchParams(window.location.search);d.delete(_3.addLibrary),window.history.replaceState({},Va,`?${d.toString()}`)}}},r=a=>{a.preventDefault();const l=F4();l&&(a.stopImmediatePropagation(),window.history.replaceState({},"",a.oldURL),s(l))},o=F4();if(o&&s(o),"getInitialLibraryItems"in n.current&&n.current.getInitialLibraryItems&&(console.warn("useHandleLibrar `opts.getInitialLibraryItems` is deprecated. Use `opts.adapter` instead."),Promise.resolve(n.current.getInitialLibraryItems()).then(a=>{t.updateLibrary({libraryItems:a,merge:!0})}).catch(a=>{console.error(`UseHandeLibrary getInitialLibraryItems failed: ${a==null?void 0:a.message}`)})),"adapter"in n.current&&n.current.adapter){const a=n.current.adapter,l=n.current.migrationAdapter,c=f5();l?c.resolve(Dc(l.load).then(async u=>{let d=null;try{if(!u)return uh.getLibraryItems(a,"load");d=ty(u.libraryItems||[],"published");const f=await HR(a,PG([],d));try{await l.clear()}catch(h){console.error(`couldn't delete legacy library data: ${h.message}`)}return f}catch(f){return console.error(`couldn't migrate legacy library data: ${f.message}`),d}}).catch(u=>(console.error(`error during library migration: ${u.message}`),uh.getLibraryItems(a,"load")))):c.resolve(Dc(uh.getLibraryItems,a,"load")),t.updateLibrary({libraryItems:c.then(u=>{const d=u||[];return U0=B4(d),d}),merge:!0}).finally(()=>{i.current=!0})}return window.addEventListener(ee.HASHCHANGE,r),()=>{window.removeEventListener(ee.HASHCHANGE,r)}},[t]),L.useEffect(()=>{const s=OG.on(async(o,a)=>{const l=i.current,c="adapter"in n.current&&n.current.adapter||null;try{c&&U0!==B4(a)&&await HR(c,o)}catch(u){console.error(`couldn't persist library update: ${u.message}`,o),l&&n.current.excalidrawAPI&&n.current.excalidrawAPI.updateScene({appState:{errorMessage:k("errors.saveLibraryError")}})}}),r=o=>{d6&&$9(o)};return window.addEventListener(ee.BEFORE_UNLOAD,r),()=>{window.removeEventListener(ee.BEFORE_UNLOAD,r),s(),U0=0,d6=0}},[])},jye=({theme:e,id:t,libraryReturnUrl:n})=>{const i=n||window.location.origin+window.location.pathname;return g("a",{className:"library-menu-browse-button",href:`https://libraries.excalidraw.com?target=${window.name||"_blank"}&referrer=${i}&useHash=true&token=${t}&theme=${e}&version=${u5.excalidrawLibrary}`,target:"_excalidraw_libraries",children:k("labels.libraries")})},BG=({libraryReturnUrl:e,theme:t,id:n,style:i,children:s,className:r})=>P("div",{className:pe("library-menu-control-buttons",r),style:i,children:[g(jye,{id:n,libraryReturnUrl:e,theme:t}),s]}),Yye=Zt(0),Wye=e=>{const[t,n]=pn(Yye);return L.useEffect(()=>{const{current:i}=e;if(!i)return;const s=No(()=>{const{scrollTop:r}=i;n(r)},200);return i.addEventListener("scroll",s),()=>{s.cancel(),i.removeEventListener("scroll",s)}},[e,n]),t},$h=({label:e,onClick:t,className:n,children:i,actionType:s,type:r="button",isLoading:o,...a})=>{const l=s?`Dialog__action-button--${s}`:"";return P("button",{className:pe("Dialog__action-button",l,n),type:r,"aria-label":e,onClick:t,...a,children:[i&&g("div",{style:o?{visibility:"hidden"}:{},children:i}),g("div",{style:o?{visibility:"hidden"}:{},children:e}),o&&g("div",{style:{position:"absolute",inset:0},children:g(sl,{})})]})},zG=e=>{const{onConfirm:t,onCancel:n,children:i,confirmText:s=k("buttons.confirm"),cancelText:r=k("buttons.cancel"),className:o="",...a}=e,l=Yn(),c=I5(A_),{container:u}=oa();return P(Ws,{onCloseRequest:n,size:"small",...a,className:`confirm-dialog ${o}`,children:[i,P("div",{className:"confirm-dialog-buttons",children:[g($h,{label:r,onClick:()=>{l({openMenu:null}),c(!1),Ln.flushSync(()=>{n()}),u==null||u.focus()}}),g($h,{label:s,onClick:()=>{l({openMenu:null}),c(!1),Ln.flushSync(()=>{t()}),u==null||u.focus()},actionType:"danger"})]})]})};class Ku{static has(t){try{return!!window.localStorage.getItem(t)}catch(n){return console.warn(`localStorage.getItem error: ${n.message}`),!1}}static get(t){try{const n=window.localStorage.getItem(t);return n?JSON.parse(n):null}catch(n){return console.warn(`localStorage.getItem error: ${n.message}`),null}}}F(Ku,"set",(t,n)=>{try{return window.localStorage.setItem(t,JSON.stringify(n)),!0}catch(i){return console.warn(`localStorage.setItem error: ${i.message}`),!1}}),F(Ku,"delete",t=>{try{window.localStorage.removeItem(t)}catch(n){console.warn(`localStorage.removeItem error: ${n.message}`)}});const Kye=/({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g,Zye=/{{([\w-]+)}}/,qye=/<([\w-]+)>/,Qye=/<\/([\w-]+)>/,Jye=(e,t)=>{const n=[{name:"",children:[]}];return e.split(Kye).filter(Boolean).forEach(i=>{const s=i.match(qye),r=i.match(Qye),o=i.match(Zye);if(s!==null){const a=s[1];t.hasOwnProperty(a)?n.push({name:a,children:[]}):console.warn(`Trans: missed to pass in prop ${a} for interpolating ${e}`)}else if(r!==null)if(r[1]===n[n.length-1].name){const l=n.pop(),c=ae.createElement(ae.Fragment,{},...l.children),u=t[l.name];typeof u=="function"&&n[n.length-1].children.push(u(c))}else console.warn(`Trans: unexpected end tag ${i} for interpolating ${e}`);else if(o!==null){const a=o[1];t.hasOwnProperty(a)?n[n.length-1].children.push(t[a]):console.warn(`Trans: key ${a} not in props for interpolating ${e}`)}else n[n.length-1].children.push(i)}),n.length!==1&&console.warn(`Trans: stack not empty for interpolating ${e}`),n[0].children},Us=({i18nKey:e,children:t,...n})=>{const{t:i}=Un();return ae.createElement(ae.Fragment,{},...Jye(i(e),n))},e8e=async e=>{const i=Math.round(8),s=Math.max(Math.round(128/64),2),r=bse(e,6),o=document.createElement("canvas");o.width=r[0].length*128+(r[0].length+1)*(i*2)-i*2,o.height=r.length*128+(r.length+1)*(i*2)-i*2;const a=o.getContext("2d");a.fillStyle=hi.white,a.fillRect(0,0,o.width,o.height);for(const[l,c]of e.entries()){const u=await ay({elements:c.elements,files:null,maxWidthOrHeight:128}),{width:d,height:f}=u,h=Math.floor(l/6)*(128+i*2),m=l%6*(128+i*2);a.drawImage(u,m+(128-d)/2+i,h+(128-f)/2+i),a.lineWidth=s,a.strokeStyle=hi.gray[4],a.strokeRect(m+i/2,h+i/2,128+i,128+i)}return await M4(new File([await hm(o)],"preview",{type:ye.png}),{outputType:ye.jpg,maxWidthOrHeight:5e3})},t8e=({libItem:e,appState:t,index:n,onChange:i,onRemove:s})=>{const r=L.useRef(null),o=L.useRef(null);return L.useEffect(()=>{const a=r.current;a&&(async()=>{const l=await DG({elements:e.elements,appState:{...t,viewBackgroundColor:hi.white,exportBackground:!0},files:null,skipInliningFonts:!0});a.innerHTML=l.outerHTML})()},[e.elements,t]),P("div",{className:"single-library-item",children:[e.status==="published"&&g("span",{className:"single-library-item-status",children:k("labels.statusPublished")}),g("div",{ref:r,className:"single-library-item__svg"}),g(Ye,{"aria-label":k("buttons.remove"),type:"button",icon:Fd,className:"single-library-item--remove",onClick:s.bind(null,e.id),title:k("buttons.remove")}),P("div",{style:{display:"flex",margin:"0.8rem 0",width:"100%",fontSize:"14px",fontWeight:500,flexDirection:"column"},children:[P("label",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[P("div",{style:{padding:"0.5em 0"},children:[g("span",{style:{fontWeight:500,color:hi.gray[6]},children:k("publishDialog.itemName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",ref:o,style:{width:"80%",padding:"0.2rem"},defaultValue:e.name,placeholder:"Item name",onChange:a=>{i(a.target.value,n)}})]}),g("span",{className:"error",children:e.error})]})]})},n8e=({onClose:e,libraryItems:t,appState:n,onSuccess:i,onError:s,updateItemsInStorage:r,onRemove:o})=>{const[a,l]=L.useState({authorName:"",githubHandle:"",name:"",description:"",twitterHandle:"",website:""}),[c,u]=L.useState(!1);L.useEffect(()=>{const v=Ku.get(n0.PUBLISH_LIBRARY);v&&l(v)},[]);const[d,f]=L.useState(t.slice());L.useEffect(()=>{f(t.slice())},[t]);const h=v=>{l({...a,[v.target.name]:v.target.value})},m=async v=>{v.preventDefault(),u(!0);const w=[];let I=!1;if(d.forEach(R=>{let N="";R.name||(N=k("publishDialog.errors.required"),I=!0),w.push({...R,error:N})}),I){f(w),u(!1);return}const M=await e8e(d),T={type:br.excalidrawLibrary,version:u5.excalidrawLibrary,source:N9(),libraryItems:d},_=JSON.stringify(T,null,2),x=new Blob([_],{type:"application/json"}),C=new FormData;C.append("excalidrawLib",x),C.append("previewImage",M),C.append("previewImageType",M.type),C.append("title",a.name),C.append("authorName",a.authorName),C.append("githubHandle",a.githubHandle),C.append("name",a.name),C.append("description",a.description),C.append("twitterHandle",a.twitterHandle),C.append("website",a.website),fetch("https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries/submit",{method:"post",body:C}).then(R=>R.ok?R.json().then(({url:N})=>{Ku.delete(n0.PUBLISH_LIBRARY),i({url:N,authorName:a.authorName,items:d})}):R.json().catch(()=>{throw new Error(R.statusText||"something went wrong")}).then(N=>{throw new Error(N.message||R.statusText||"something went wrong")}),R=>{console.error(R),s(R),u(!1)}).catch(R=>{console.error(R),s(R),u(!1)})},p=()=>{const v=[];return d.forEach((w,I)=>{v.push(g("div",{className:"single-library-item-wrapper",children:g(t8e,{libItem:w,appState:n,index:I,onChange:(M,T)=>{const _=d.slice();_[T].name=M,f(_)},onRemove:o})},I))}),g("div",{className:"selected-library-items",children:v})},U=L.useCallback(()=>{r(d),Ku.set(n0.PUBLISH_LIBRARY,a),e()},[d,e,r,a]),y=!!t.length,E=t.some(v=>v.status==="published");return g(Ws,{onCloseRequest:U,title:k("publishDialog.title"),className:"publish-library",children:y?P("form",{onSubmit:m,children:[g("div",{className:"publish-library-note",children:g(Us,{i18nKey:"publishDialog.noteDescription",link:v=>g("a",{href:"https://libraries.excalidraw.com",target:"_blank",rel:"noopener",children:v})})}),g("span",{className:"publish-library-note",children:g(Us,{i18nKey:"publishDialog.noteGuidelines",link:v=>g("a",{href:"https://github.com/excalidraw/excalidraw-libraries#guidelines",target:"_blank",rel:"noopener noreferrer",children:v})})}),g("div",{className:"publish-library-note",children:k("publishDialog.noteItems")}),E&&g("span",{className:"publish-library-note publish-library-warning",children:k("publishDialog.republishWarning")}),p(),P("div",{className:"publish-library__fields",children:[P("label",{children:[P("div",{children:[g("span",{children:k("publishDialog.libraryName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",name:"name",required:!0,value:a.name,onChange:h,placeholder:k("publishDialog.placeholder.libraryName")})]}),P("label",{style:{alignItems:"flex-start"},children:[P("div",{children:[g("span",{children:k("publishDialog.libraryDesc")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("textarea",{name:"description",rows:4,required:!0,value:a.description,onChange:h,placeholder:k("publishDialog.placeholder.libraryDesc")})]}),P("label",{children:[P("div",{children:[g("span",{children:k("publishDialog.authorName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",name:"authorName",required:!0,value:a.authorName,onChange:h,placeholder:k("publishDialog.placeholder.authorName")})]}),P("label",{children:[g("span",{children:k("publishDialog.githubUsername")}),g("input",{type:"text",name:"githubHandle",value:a.githubHandle,onChange:h,placeholder:k("publishDialog.placeholder.githubHandle")})]}),P("label",{children:[g("span",{children:k("publishDialog.twitterUsername")}),g("input",{type:"text",name:"twitterHandle",value:a.twitterHandle,onChange:h,placeholder:k("publishDialog.placeholder.twitterHandle")})]}),P("label",{children:[g("span",{children:k("publishDialog.website")}),g("input",{type:"text",name:"website",pattern:"https?://.+",title:k("publishDialog.errors.website"),value:a.website,onChange:h,placeholder:k("publishDialog.placeholder.website")})]}),g("span",{className:"publish-library-note",children:g(Us,{i18nKey:"publishDialog.noteLicense",link:v=>g("a",{href:"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:v})})})]}),P("div",{className:"publish-library__buttons",children:[g($h,{label:k("buttons.cancel"),onClick:U,"data-testid":"cancel-clear-canvas-button"}),g($h,{type:"submit",label:k("buttons.submit"),actionType:"primary",isLoading:c})]})]}):g("p",{style:{padding:"1em",textAlign:"center",fontWeight:500},children:k("publishDialog.atleastOneLibItem")})})},i8e=L.forwardRef(({children:e,gap:t,align:n,justifyContent:i,className:s,style:r},o)=>g("div",{className:pe("Stack Stack_horizontal",s),style:{"--gap":t,alignItems:n,justifyContent:i,...r},ref:o,children:e})),s8e=L.forwardRef(({children:e,gap:t,align:n,justifyContent:i,className:s,style:r},o)=>g("div",{className:pe("Stack Stack_vertical",s),style:{"--gap":t,justifyItems:n,justifyContent:i,...r},ref:o,children:e})),mr={Row:i8e,Col:s8e},HG=({children:e,onClickOutside:t,className:n="",onSelect:i,style:s})=>{const r=si(),o=L.useRef(null),a=B5({onClickOutside:t});i_(o,()=>{var c;(c=a.onClickOutside)==null||c.call(a)}),L.useEffect(()=>{const c=d=>{var f;d.key===z.ESCAPE&&(d.stopImmediatePropagation(),(f=a.onClickOutside)==null||f.call(a))},u={capture:!0};return document.addEventListener(ee.KEYDOWN,c,u),()=>{document.removeEventListener(ee.KEYDOWN,c,u)}},[a]);const l=pe(`dropdown-menu ${n}`,{"dropdown-menu--mobile":r.editor.isMobile}).trim();return g(zV.Provider,{value:{onSelect:i},children:g("div",{ref:o,className:l,style:s,"data-testid":"dropdown-menu",children:r.editor.isMobile?g(mr.Col,{className:"dropdown-menu-container",children:e}):g(eo,{className:"dropdown-menu-container",padding:2,style:{zIndex:2},children:e})})})};HG.displayName="DropdownMenuContent";const r8e=({children:e,className:t="",selected:n,...i})=>g("div",{...i,className:`dropdown-menu-item-base dropdown-menu-item-custom ${t} ${n?"dropdown-menu-item--selected":""}`.trim(),children:e}),f6=({icon:e,shortcut:t,href:n,children:i,onSelect:s,className:r="",selected:o,rel:a="noopener",...l})=>{const c=VV(l.onClick,s);return g("a",{...l,href:n,target:"_blank",rel:a||"noopener",className:HV(r,o),title:l.title??l["aria-label"],onClick:c,children:g(BV,{icon:e,shortcut:t,children:i})})};f6.displayName="DropdownMenuItemLink";const VG=()=>g("div",{style:{height:"1px",backgroundColor:"var(--default-border-color)",margin:".5rem 0"}});VG.displayName="DropdownMenuSeparator";const $G=({className:e="",children:t,onToggle:n,title:i,...s})=>{const r=si(),o=pe(`dropdown-menu-button ${e}`,"zen-mode-transition",{"dropdown-menu-button--mobile":r.editor.isMobile}).trim();return g("button",{"data-prevent-outside-click":!0,className:o,onClick:n,type:"button","data-testid":"dropdown-menu-button",title:i,...s,children:t})};$G.displayName="DropdownMenuTrigger";const o8e=e=>{const t=ae.Children.toArray(e).find(n=>ae.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuTrigger");return t||null},a8e=e=>{const t=ae.Children.toArray(e).find(n=>ae.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuContent");return t||null},Qe=({children:e,open:t})=>{const n=o8e(e),i=a8e(e);return P(ge,{children:[n,t&&i]})};Qe.Trigger=$G;Qe.Content=HG;Qe.Item=Ts;Qe.ItemLink=f6;Qe.ItemCustom=r8e;Qe.Group=e6;Qe.Separator=VG;Qe.displayName="DropdownMenu";const l8e=(e,t)=>e.filter(n=>t.includes(n.id)),c8e=({setAppState:e,selectedItems:t,library:n,onRemoveFromLibrary:i,resetLibrary:s,onSelectItems:r,appState:o,className:a})=>{const[l]=pn(Um),[c,u]=pn(A_),d=()=>{const C=t.length?k("alerts.removeItemsFromsLibrary",{count:t.length}):k("alerts.resetLibrary"),R=t.length?k("confirmDialog.removeItemsFromLib"):k("confirmDialog.resetLibrary");return g(zG,{onConfirm:()=>{t.length?i():s(),h(!1)},onCancel:()=>{h(!1)},title:R,children:g("p",{children:C})})},[f,h]=L.useState(!1),m=!!t.length,p=m?l.libraryItems.filter(C=>t.includes(C.id)):l.libraryItems,U=k(m?"buttons.remove":"buttons.resetLibrary"),[y,E]=L.useState(!1),[v,w]=L.useState(null),I=L.useCallback(()=>P(Ws,{onCloseRequest:()=>w(null),title:k("publishSuccessDialog.title"),className:"publish-library-success",size:"small",children:[g("p",{children:g(Us,{i18nKey:"publishSuccessDialog.content",authorName:v.authorName,link:C=>g("a",{href:v==null?void 0:v.url,target:"_blank",rel:"noopener noreferrer",children:C})})}),g(Ye,{type:"button",title:k("buttons.close"),"aria-label":k("buttons.close"),label:k("buttons.close"),onClick:()=>w(null),"data-testid":"publish-library-success-close",className:"publish-library-success-close"})]}),[w,v]),M=(C,R)=>{E(!1),w({url:C.url,authorName:C.authorName});const N=R.slice();N.forEach(D=>{t.includes(D.id)&&(D.status="published")}),n.setLibrary(N)},T=async()=>{try{await n.updateLibrary({libraryItems:U_({description:"Excalidraw library files"}),merge:!0,openLibraryMenu:!0})}catch(C){if((C==null?void 0:C.name)==="AbortError"){console.warn(C);return}e({errorMessage:k("errors.importLibraryError")})}},_=async()=>{const C=m?p:await n.getLatestLibrary();x6e(C).catch(mF).catch(R=>{e({errorMessage:R.message})})},x=()=>P(Qe,{open:c,children:[g(Qe.Trigger,{onToggle:()=>u(!c),children:tue}),P(Qe.Content,{onClickOutside:()=>u(!1),onSelect:()=>u(!1),className:"library-menu",children:[!m&&g(Qe.Item,{onSelect:T,icon:Bw,"data-testid":"lib-dropdown--load",children:k("buttons.load")}),!!p.length&&g(Qe.Item,{onSelect:_,icon:A5,"data-testid":"lib-dropdown--export",children:k("buttons.export")}),!!p.length&&g(Qe.Item,{onSelect:()=>h(!0),icon:Oc,children:U}),m&&g(Qe.Item,{icon:ude,onSelect:()=>E(!0),"data-testid":"lib-dropdown--remove",children:k("buttons.publishLibrary")})]})]});return P("div",{className:pe("library-menu-dropdown-container",a),children:[x(),t.length>0&&g("div",{className:"library-actions-counter",children:t.length}),f&&d(),y&&g(n8e,{onClose:()=>E(!1),libraryItems:l8e(l.libraryItems,t),appState:o,onSuccess:C=>M(C,l.libraryItems),onError:C=>window.alert(C),updateItemsInStorage:()=>n.setLibrary(l.libraryItems),onRemove:C=>r(t.filter(R=>R!==C))}),v&&I()]})},VR=({selectedItems:e,onSelectItems:t,className:n})=>{const{library:i}=mo(),{clearLibraryCache:s,deleteItemsFromLibraryCache:r}=NG(),o=Ui(),a=Yn(),[l]=pn(Um),c=async d=>{const f=d.filter(h=>!e.includes(h.id));i.setLibrary(f).catch(()=>{a({errorMessage:k("alerts.errorRemovingFromLibrary")})}),r(e),t([])};return g(c8e,{appState:o,setAppState:a,selectedItems:e,onSelectItems:t,library:i,onRemoveFromLibrary:()=>c(l.libraryItems),resetLibrary:()=>{i.resetLibrary(),s()},className:n})};function u8e(){return[!1,L.useCallback(t=>t(),[])]}const d8e=ae.useTransition||u8e,f8e=L.memo(({id:e,elements:t,isPending:n,onClick:i,selected:s,onToggle:r,onDrag:o,svgCache:a})=>{const l=L.useRef(null),c=Bye(e,t,a);L.useEffect(()=>{const m=l.current;if(m)return c&&(m.innerHTML=c.outerHTML),()=>{m.innerHTML=""}},[c]);const[u,d]=L.useState(!1),f=si().editor.isMobile,h=n&&g("div",{className:"library-unit__adder",children:eue});return P("div",{className:pe("library-unit",{"library-unit__active":t,"library-unit--hover":t&&u,"library-unit--selected":s,"library-unit--skeleton":!c}),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[g("div",{className:pe("library-unit__dragger",{"library-unit__pulse":!!n}),ref:l,draggable:!!t,onClick:t||n?m=>{e&&m.shiftKey?r(e,m):i(e)}:void 0,onDragStart:m=>{if(!e){m.preventDefault();return}d(!1),o(e,m)}}),h,e&&t&&(u||f||s)&&g(d_,{checked:s,onChange:(m,p)=>r(e,p),className:"library-unit__checkbox"})]})}),h8e=()=>g("div",{className:"library-unit library-unit--skeleton"}),$R=({children:e})=>g("div",{className:"library-menu-items-container__grid",children:e}),PE=L.memo(({items:e,onItemSelectToggle:t,onItemDrag:n,isItemSelected:i,onClick:s,svgCache:r,itemsRenderedPerBatch:o})=>{const[,a]=d8e(),[l,c]=L.useState(0);return L.useEffect(()=>{l<e.length&&a(()=>{c(l+o)})},[l,e.length,a,o]),g(ge,{children:e.map((u,d)=>d<l?g(f8e,{elements:u==null?void 0:u.elements,isPending:!(u!=null&&u.id)&&!!(u!=null&&u.elements),onClick:s,svgCache:r,id:u==null?void 0:u.id,selected:i(u.id),onToggle:t,onDrag:n},(u==null?void 0:u.id)??d):g(h8e,{},d))})}),g8e=17,m8e=64;function p8e({isLoading:e,libraryItems:t,onAddToLibrary:n,onInsertLibraryItems:i,pendingElements:s,theme:r,id:o,libraryReturnUrl:a,onSelectItems:l,selectedItems:c}){const u=L.useRef(null),d=Wye(u);L.useEffect(()=>{var C;d>0&&((C=u.current)==null||C.scrollTo(0,d))},[]);const{svgCache:f}=NG(),h=L.useMemo(()=>t.filter(C=>C.status!=="published"),[t]),m=L.useMemo(()=>t.filter(C=>C.status==="published"),[t]),p=!t.length&&!s.length,U=!s.length&&!h.length&&!m.length,[y,E]=L.useState(null),v=L.useCallback((C,R)=>{const N=!c.includes(C),D=[...h,...m];if(N){if(R.shiftKey&&y){const $=D.findIndex(X=>X.id===y),G=D.findIndex(X=>X.id===C);if($===-1||G===-1){l([...c,C]);return}const H=_e(c),V=D.reduce((X,j,q)=>((q>=$&&q<=G||H.has(j.id))&&X.push(j.id),X),[]);l(V)}else l([...c,C]);E(C)}else E(null),l(c.filter($=>$!==C))},[y,l,m,c,h]),w=L.useCallback(C=>{let R;return c.includes(C)?R=t.filter(N=>c.includes(N.id)):R=t.filter(N=>N.id===C),R.map(N=>({...N,elements:Vb({type:"everything",elements:N.elements,randomizeSeed:!0}).duplicatedElements}))},[t,c]),I=L.useCallback((C,R)=>{R.dataTransfer.setData(ye.excalidrawlib,j$(w(C)))},[w]),M=L.useCallback(C=>C?c.includes(C):!1,[c]),T=L.useCallback(()=>{n(s)},[s,n]),_=L.useCallback(C=>{C&&i(w(C))},[w,i]),x=f.size>=t.length?m8e:g8e;return P("div",{className:"library-menu-items-container",style:s.length||h.length||m.length?{justifyContent:"flex-start"}:{borderBottom:0},children:[!U&&g(VR,{selectedItems:c,onSelectItems:l,className:"library-menu-dropdown-container--in-heading"}),P(mr.Col,{className:"library-menu-items-container__items",align:"start",gap:1,style:{flex:m.length>0?1:"0 1 auto",marginBottom:0},ref:u,children:[P(ge,{children:[!U&&g("div",{className:"library-menu-items-container__header",children:k("labels.personalLib")}),e&&g("div",{style:{position:"absolute",top:"var(--container-padding-y)",right:"var(--container-padding-x)",transform:"translateY(50%)"},children:g(sl,{})}),!s.length&&!h.length?P("div",{className:"library-menu-items__no-items",children:[g("div",{className:"library-menu-items__no-items__label",children:k("library.noItems")}),g("div",{className:"library-menu-items__no-items__hint",children:m.length>0?k("library.hint_emptyPrivateLibrary"):k("library.hint_emptyLibrary")})]}):P($R,{children:[s.length>0&&g(PE,{itemsRenderedPerBatch:x,items:[{id:null,elements:s}],onItemSelectToggle:v,onItemDrag:I,onClick:T,isItemSelected:M,svgCache:f}),g(PE,{itemsRenderedPerBatch:x,items:h,onItemSelectToggle:v,onItemDrag:I,onClick:_,isItemSelected:M,svgCache:f})]})]}),P(ge,{children:[(m.length>0||s.length>0||h.length>0)&&g("div",{className:"library-menu-items-container__header library-menu-items-container__header--excal",children:k("labels.excalidrawLib")}),m.length>0?g($R,{children:g(PE,{itemsRenderedPerBatch:x,items:m,onItemSelectToggle:v,onItemDrag:I,onClick:_,isItemSelected:M,svgCache:f})}):h.length>0?g("div",{style:{margin:"1rem 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",fontSize:".9rem"},children:k("library.noItems")}):null]}),p&&g(BG,{style:{padding:"16px 0",width:"100%"},id:o,libraryReturnUrl:a,theme:r,children:g(VR,{selectedItems:c,onSelectItems:l})})]})]})}const A_=Zt(!1),GR=({children:e})=>g("div",{className:"layer-ui__library",children:e}),U8e=L.memo(({onInsertLibraryItems:e,pendingElements:t,onAddToLibrary:n,setAppState:i,libraryReturnUrl:s,library:r,id:o,theme:a,selectedItems:l,onSelectItems:c})=>{const[u]=pn(Um),d=L.useCallback(m=>{(async(U,y)=>{at("element","addToLibrary","ui");for(const v of nF)if(U.some(w=>w.type===v))return i({errorMessage:k(`errors.libraryElementTypeError.${v}`)});const E=[{status:"unpublished",elements:U,id:vs(),created:Date.now()},...y];n(),r.setLibrary(E).catch(()=>{i({errorMessage:k("alerts.errorAddingToLibrary")})})})(m,u.libraryItems)},[n,r,i,u.libraryItems]),f=L.useMemo(()=>u.libraryItems,[u]);if(u.status==="loading"&&!u.isInitialized)return g(GR,{children:g("div",{className:"layer-ui__library-message",children:P("div",{children:[g(sl,{size:"2em"}),g("span",{children:k("labels.libraryLoadingMessage")})]})})});const h=u.libraryItems.length>0||t.length>0;return P(GR,{children:[g(p8e,{isLoading:u.status==="loading",libraryItems:f,onAddToLibrary:d,onInsertLibraryItems:e,pendingElements:t,id:o,libraryReturnUrl:s,theme:a,onSelectItems:c,selectedItems:l}),h&&g(BG,{className:"library-menu-control-buttons--at-bottom",style:{padding:"16px 12px 0 12px"},id:o,libraryReturnUrl:s,theme:a})]})}),FE=(e,t)=>({elements:e,pending:He(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}),selectedElementIds:t}),b8e=(e,t)=>{const n=fy(),[i,s]=L.useState(()=>FE(n,e.selectedElementIds)),r=L.useRef(new Map);return L.useEffect(()=>{for(const o of i.pending)r.current.set(o.id,o.version)},[i.pending]),L.useEffect(()=>{t.state.cursorButton==="up"&&t.state.activeTool.type==="selection"&&s(o=>{var l;if(!Ji(o.selectedElementIds,e.selectedElementIds))return r.current.clear(),FE(n,e.selectedElementIds);const a=t.scene.getNonDeletedElementsMap();for(const c of Object.keys(e.selectedElementIds)){const u=(l=a.get(c))==null?void 0:l.version;if(u&&u!==r.current.get(c))return FE(n,e.selectedElementIds)}return o})},[t,t.state.cursorButton,t.state.activeTool.type,e.selectedElementIds,n]),i.pending},y8e=L.memo(()=>{const e=mo(),{onInsertElements:t}=e,n=mp(),i=Ui(),s=Yn(),[r,o]=L.useState([]),a=L.useMemo(()=>e.library,[e.library]),l=b8e(i,e),c=L.useCallback(d=>{t(FG(d))},[t]),u=L.useCallback(()=>{s({selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null})},[s]);return g(U8e,{pendingElements:l,onInsertLibraryItems:c,onAddToLibrary:u,setAppState:s,libraryReturnUrl:n.libraryReturnUrl,library:a,id:e.id,theme:i.theme,selectedItems:r,onSelectItems:o})}),E8e=e=>{const{closeOnClickOutside:t=!0}=e,n=LV({className:"excalidraw-modal-container"}),i=L.useRef(document.body.classList.contains("excalidraw-animations-disabled"));if(!n)return null;const s=r=>{r.key===z.ESCAPE&&(r.nativeEvent.stopImmediatePropagation(),r.stopPropagation(),e.onCloseRequest())};return Ln.createPortal(P("div",{className:pe("Modal",e.className,{"animations-disabled":i.current}),role:"dialog","aria-modal":"true",onKeyDown:s,"aria-labelledby":e.labelledBy,"data-prevent-outside-click":!0,children:[g("div",{className:"Modal__background",onClick:t?e.onCloseRequest:void 0}),g("div",{className:"Modal__content",style:{"--max-width":`${e.maxWidth}px`},tabIndex:0,children:e.children})]}),n)};function v8e(e){if(e&&typeof e=="number")return e;switch(e){case"small":return 550;case"wide":return 1024;case"regular":default:return 800}}const Ws=e=>{const[t,n]=CG(),[i]=L.useState(document.activeElement),{id:s}=oa(),r=si().viewport.isMobile;L.useEffect(()=>{if(!t)return;const c=M3(t);setTimeout(()=>{c.length>0&&e.autofocus!==!1&&(c[1]||c[0]).focus()});const u=d=>{if(d.key===z.TAB){const f=M3(t),{activeElement:h}=document,m=f.findIndex(p=>p===h);m===0&&d.shiftKey?(f[f.length-1].focus(),d.preventDefault()):m===f.length-1&&!d.shiftKey&&(f[0].focus(),d.preventDefault())}};return t.addEventListener("keydown",u),()=>t.removeEventListener("keydown",u)},[t,e.autofocus]);const o=Yn(),a=I5(A_),l=()=>{o({openMenu:null}),a(!1),i.focus(),e.onCloseRequest()};return g(E8e,{className:pe("Dialog",e.className,{"Dialog--fullscreen":r}),labelledBy:"dialog-title",maxWidth:v8e(e.size),onCloseRequest:l,closeOnClickOutside:e.closeOnClickOutside,children:P(eo,{ref:n,children:[e.title&&g("h2",{id:`${s}-dialog-title`,className:"Dialog__title",children:g("span",{className:"Dialog__titleContent",children:e.title})}),r&&g("button",{className:"Dialog__close",onClick:l,title:k("buttons.close"),"aria-label":k("buttons.close"),type:"button",children:Fd}),g("div",{className:"Dialog__content",children:e.children})]})})},Td=({type:e="button",onSelect:t,selected:n,children:i,className:s="",...r})=>g("button",{onClick:h5(r.onClick,o=>{t()}),type:e,className:pe("excalidraw-button",s,{selected:n}),...r,children:i}),Gh=L.forwardRef(({onChange:e,label:t,fullWidth:n,placeholder:i,readonly:s,selectOnRender:r,onKeyDown:o,isRedacted:a=!1,icon:l,className:c,...u},d)=>{const f=L.useRef(null);L.useImperativeHandle(d,()=>f.current),L.useLayoutEffect(()=>{var p,U;r&&((p=f.current)==null||p.focus(),(U=f.current)==null||U.select())},[r]);const[h,m]=L.useState(!1);return P("div",{className:pe("ExcTextField",c,{"ExcTextField--fullWidth":n,"ExcTextField--hasIcon":!!l}),onClick:()=>{var p;(p=f.current)==null||p.focus()},children:[l,t&&g("div",{className:"ExcTextField__label",children:t}),P("div",{className:pe("ExcTextField__input",{"ExcTextField__input--readonly":s}),children:[g("input",{className:pe({"is-redacted":"value"in u&&u.value&&a&&!h}),readOnly:s,value:"value"in u?u.value:void 0,defaultValue:"defaultValue"in u?u.defaultValue:void 0,placeholder:i,ref:f,onChange:p=>e==null?void 0:e(p.target.value),onKeyDown:o}),a&&g(Td,{onSelect:()=>m(!h),style:{border:0,userSelect:"none"},children:h?Ede:R5})]})]})}),M_=[{icon:oue,value:"selection",key:z.V,numericKey:z[1],fillable:!0},{icon:uH,value:"rectangle",key:z.R,numericKey:z[2],fillable:!0},{icon:dH,value:"diamond",key:z.D,numericKey:z[3],fillable:!0},{icon:fH,value:"ellipse",key:z.O,numericKey:z[4],fillable:!0},{icon:aue,value:"arrow",key:z.A,numericKey:z[5],fillable:!0},{icon:hH,value:"line",key:z.L,numericKey:z[6],fillable:!0},{icon:C5,value:"freedraw",key:[z.P,z.X],numericKey:z[7],fillable:!1},{icon:Ow,value:"text",key:z.T,numericKey:z[8],fillable:!1},{icon:cue,value:"image",key:null,numericKey:z[9],fillable:!1},{icon:uue,value:"eraser",key:z.E,numericKey:z[0],fillable:!1}],w8e=e=>{const t=M_.find((n,i)=>n.numericKey!=null&&e===n.numericKey.toString()||n.key&&(typeof n.key=="string"?n.key===e:n.key.includes(e)));return(t==null?void 0:t.value)||null};var _8e={};const XR=e=>{let t;const n=new Set,i=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(m=>m(t,h))}},s=()=>t,l={setState:i,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(_8e?"development":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(i,s,l);return l},T8e=e=>e?XR(e):XR;var GG={exports:{}},XG={},jG={exports:{}},YG={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xh=L;function S8e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var I8e=typeof Object.is=="function"?Object.is:S8e,x8e=Xh.useState,C8e=Xh.useEffect,A8e=Xh.useLayoutEffect,M8e=Xh.useDebugValue;function R8e(e,t){var n=t(),i=x8e({inst:{value:n,getSnapshot:t}}),s=i[0].inst,r=i[1];return A8e(function(){s.value=n,s.getSnapshot=t,BE(s)&&r({inst:s})},[e,n,t]),C8e(function(){return BE(s)&&r({inst:s}),e(function(){BE(s)&&r({inst:s})})},[e]),M8e(n),n}function BE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!I8e(e,n)}catch{return!0}}function k8e(e,t){return t()}var D8e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?k8e:R8e;YG.useSyncExternalStore=Xh.useSyncExternalStore!==void 0?Xh.useSyncExternalStore:D8e;jG.exports=YG;var L8e=jG.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ly=L,N8e=L8e;function O8e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var P8e=typeof Object.is=="function"?Object.is:O8e,F8e=N8e.useSyncExternalStore,B8e=ly.useRef,z8e=ly.useEffect,H8e=ly.useMemo,V8e=ly.useDebugValue;XG.useSyncExternalStoreWithSelector=function(e,t,n,i,s){var r=B8e(null);if(r.current===null){var o={hasValue:!1,value:null};r.current=o}else o=r.current;r=H8e(function(){function l(h){if(!c){if(c=!0,u=h,h=i(h),s!==void 0&&o.hasValue){var m=o.value;if(s(m,h))return d=m}return d=h}if(m=d,P8e(u,h))return m;var p=i(h);return s!==void 0&&s(m,p)?(u=h,m):(u=h,d=p)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,i,s]);var a=F8e(e,r[0],r[1]);return z8e(function(){o.hasValue=!0,o.value=a},[a]),V8e(a),a};GG.exports=XG;var $8e=GG.exports;const G8e=hl($8e);var WG={};const{useDebugValue:X8e}=ae,{useSyncExternalStoreWithSelector:j8e}=G8e;let jR=!1;const Y8e=e=>e;function W8e(e,t=Y8e,n){(WG?"development":void 0)!=="production"&&n&&!jR&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),jR=!0);const i=j8e(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return X8e(i),i}const YR=e=>{(WG?"development":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?T8e(e):e,n=(i,s)=>W8e(t,i,s);return Object.assign(n,t),n},K8e=e=>e?YR(e):YR;var WR,KR;const ZR=typeof window<"u"&&((WR=window.document)!=null&&WR.createElement||((KR=window.navigator)==null?void 0:KR.product)==="ReactNative")?ae.useLayoutEffect:ae.useEffect;function Eo(){const e=K8e(t=>({current:new Array,version:0,set:t}));return{In:({children:t})=>{const n=e(s=>s.set),i=e(s=>s.version);return ZR(()=>{n(s=>({version:s.version+1}))},[]),ZR(()=>(n(({current:s})=>({current:[...s,t]})),()=>n(({current:s})=>({current:s.filter(r=>r!==t)}))),[t,i]),null},Out:()=>{const t=e(n=>n.current);return ae.createElement(ae.Fragment,null,t)}}}const KG=ae.createContext(null),os=()=>ae.useContext(KG),Z8e=bz(),q8e=()=>ae.useMemo(()=>({MainMenuTunnel:Eo(),WelcomeScreenMenuHintTunnel:Eo(),WelcomeScreenToolbarHintTunnel:Eo(),WelcomeScreenHelpHintTunnel:Eo(),WelcomeScreenCenterTunnel:Eo(),FooterCenterTunnel:Eo(),DefaultSidebarTriggerTunnel:Eo(),DefaultSidebarTabTriggersTunnel:Eo(),OverwriteConfirmDialogTunnel:Eo(),TTDDialogTriggerTunnel:Eo(),tunnelsJotai:Z8e}),[]),ZG=(e,t)=>{var i;let n=((i=t[0])==null?void 0:i.type)||null;for(const s of t)if(s.type!==n){n=null;break}return H3(e.activeTool.type)&&n!=="image"&&n!=="frame"&&n!=="magicframe"||t.some(s=>H3(s.type))},qG=(e,t)=>Nh(e.activeTool.type)||t.some(n=>Nh(n.type)),QG=({appState:e,elementsMap:t,renderAction:n,app:i})=>{const s=nB(t,e);let r=!1;s.length===2&&(ns(s[0])||ns(s[1]))&&(r=!0);const o=!!(e.editingTextElement||e.newElement),a=si(),l=document.documentElement.getAttribute("dir")==="rtl",c=Nh(e.activeTool.type)&&!Kr(e.currentItemBackgroundColor)||s.some(m=>Nh(m.type)&&!Kr(m.backgroundColor)),u=s.length===1||r,d=!e.editingLinearElement&&s.length===1&&Ae(s[0])&&!he(s[0]),f=!e.croppingElementId&&s.length===1&&ft(s[0]),h=!r&&Ys(e,i);return P("div",{className:"panelColumn",children:[g("div",{children:ZG(e,s)&&n("changeStrokeColor")}),qG(e,s)&&g("div",{children:n("changeBackgroundColor")}),c&&n("changeFillStyle"),($C(e.activeTool.type)||s.some(m=>$C(m.type)))&&n("changeStrokeWidth"),(e.activeTool.type==="freedraw"||s.some(m=>m.type==="freedraw"))&&n("changeStrokeShape"),(GC(e.activeTool.type)||s.some(m=>GC(m.type)))&&P(ge,{children:[n("changeStrokeStyle"),n("changeSloppiness")]}),(V3(e.activeTool.type)||s.some(m=>V3(m.type)))&&g(ge,{children:n("changeRoundness")}),(XC(e.activeTool.type)||s.some(m=>XC(m.type)))&&g(ge,{children:n("changeArrowType")}),(e.activeTool.type==="text"||s.some(ue))&&P(ge,{children:[n("changeFontFamily"),n("changeFontSize"),(e.activeTool.type==="text"||Ooe(s,t))&&n("changeTextAlign")]}),Noe(s,t)&&n("changeVerticalAlign"),(Fb(e.activeTool.type)||s.some(m=>Fb(m.type)))&&g(ge,{children:n("changeArrowhead")}),n("changeOpacity"),P("fieldset",{children:[g("legend",{children:k("labels.layers")}),P("div",{className:"buttonList",children:[n("sendToBack"),n("sendBackward"),n("bringForward"),n("bringToFront")]})]}),h&&!r&&P("fieldset",{children:[g("legend",{children:k("labels.align")}),P("div",{className:"buttonList",children:[l?P(ge,{children:[n("alignRight"),n("alignHorizontallyCentered"),n("alignLeft")]}):P(ge,{children:[n("alignLeft"),n("alignHorizontallyCentered"),n("alignRight")]}),s.length>2&&n("distributeHorizontally"),g("div",{style:{flexBasis:"100%",height:0}}),P("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[n("alignTop"),n("alignVerticallyCentered"),n("alignBottom"),s.length>2&&n("distributeVertically")]})]})]}),!o&&s.length>0&&P("fieldset",{children:[g("legend",{children:k("labels.actions")}),P("div",{className:"buttonList",children:[!a.editor.isMobile&&n("duplicateSelection"),!a.editor.isMobile&&n("deleteSelectedElements"),n("group"),n("ungroup"),u&&n("hyperlink"),f&&n("cropEditor"),d&&n("toggleLinearEditor")]})]})]})},JG=({activeTool:e,appState:t,app:n,UIOptions:i})=>{const[s,r]=L.useState(!1),o=e.type==="frame",a=e.type==="laser",l=e.type==="lasso",c=e.type==="embeddable",{TTDDialogTriggerTunnel:u}=os();return P(ge,{children:[M_.map(({value:d,icon:f,key:h,numericKey:m,fillable:p},U)=>{var w;if(((w=i.tools)==null?void 0:w[d])===!1)return null;const y=k(`toolBar.${d}`),E=h&&r0(typeof h=="string"?h:h[0]),v=E?`${E} ${k("helpDialog.or")} ${m}`:`${m}`;return g(Ye,{className:pe("Shape",{fillable:p}),type:"radio",icon:f,checked:e.type===d,name:"editor-current-shape",title:`${r0(y)} — ${v}`,keyBindingLabel:m||E,"aria-label":r0(y),"aria-keyshortcuts":v,"data-testid":`toolbar-${d}`,onPointerDown:({pointerType:I})=>{!t.penDetected&&I==="pen"&&n.togglePenMode(!0),d==="selection"&&(t.activeTool.type==="selection"?n.setActiveTool({type:"lasso"}):n.setActiveTool({type:"selection"}))},onChange:({pointerType:I})=>{t.activeTool.type!==d&&at("toolbar",d,"ui"),d==="image"?n.setActiveTool({type:d,insertOnCanvasDirectly:I!=="mouse"}):n.setActiveTool({type:d})}},d)}),g("div",{className:"App-toolbar__divider"}),P(Qe,{open:s,children:[g(Qe.Trigger,{className:pe("App-toolbar__extra-tools-trigger",{"App-toolbar__extra-tools-trigger--selected":o||c||l||a&&!n.props.isCollaborating}),onToggle:()=>r(!s),title:k("toolBar.extraTools"),children:o?Kb:c?RA:a&&!n.props.isCollaborating?h4:l?a4:bde}),P(Qe.Content,{onClickOutside:()=>r(!1),onSelect:()=>r(!1),className:"App-toolbar__extra-tools-dropdown",children:[g(Qe.Item,{onSelect:()=>n.setActiveTool({type:"frame"}),icon:Kb,shortcut:z.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",selected:o,children:k("toolBar.frame")}),g(Qe.Item,{onSelect:()=>n.setActiveTool({type:"embeddable"}),icon:RA,"data-testid":"toolbar-embeddable",selected:c,children:k("toolBar.embeddable")}),g(Qe.Item,{onSelect:()=>n.setActiveTool({type:"laser"}),icon:h4,"data-testid":"toolbar-laser",selected:a,shortcut:z.K.toLocaleUpperCase(),children:k("toolBar.laser")}),g(Qe.Item,{onSelect:()=>n.setActiveTool({type:"lasso"}),icon:a4,"data-testid":"toolbar-lasso",selected:l,children:k("toolBar.lasso")}),g("div",{style:{margin:"6px 0",fontSize:14,fontWeight:600},children:"Generate"}),n.props.aiEnabled!==!1&&g(u.Out,{}),g(Qe.Item,{onSelect:()=>n.setOpenDialog({name:"ttd",tab:"mermaid"}),icon:_H,"data-testid":"toolbar-embeddable",children:k("toolBar.mermaidToExcalidraw")}),n.props.aiEnabled!==!1&&n.plugins.diagramToCode&&g(ge,{children:P(Qe.Item,{onSelect:()=>n.onMagicframeToolSelect(),icon:TH,"data-testid":"toolbar-magicframe",children:[k("toolBar.magicframe"),g(Qe.Item.Badge,{children:"AI"})]})})]})]})]})},Q8e=({renderAction:e,zoom:t})=>g(mr.Col,{gap:1,className:Mc.ZOOM_ACTIONS,children:P(mr.Row,{align:"center",children:[e("zoomOut"),e("resetZoom"),e("zoomIn")]})}),J8e=({renderAction:e,className:t})=>P("div",{className:`undo-redo-buttons ${t}`,children:[g("div",{className:"undo-button-container",children:g(ll,{label:k("buttons.undo"),children:e("undo")})}),g("div",{className:"redo-button-container",children:P(ll,{label:k("buttons.redo"),children:[" ",e("redo")]})})]}),eEe=({actionManager:e,showExitZenModeBtn:t})=>g("button",{type:"button",className:pe("disable-zen-mode",{"disable-zen-mode--visible":t}),onClick:()=>e.executeAction(k4),children:k("buttons.exitZenMode")}),tEe=({renderAction:e,className:t})=>g("div",{className:`finalize-button ${t}`,children:e("finalize",{size:"small"})}),qR=e=>{const t=L.useRef({userFn:e});return t.current.userFn=e,t.current.stableFn||(t.current.stableFn=(...n)=>t.current.userFn(...n)),t.current.stableFn},cy=Zt(null),nEe=()=>{const[e,t]=pn(cy),n=Ss();return e&&e==="clearCanvas"?g(zG,{onConfirm:()=>{n.executeAction(f0),t(null)},onCancel:()=>t(null),title:k("clearCanvasDialog.title"),children:P("p",{className:"clear-canvas__content",children:[" ",k("alerts.clearReset")]})}):null},iEe={...t6,category:"App",label:"Toggle theme",perform:({actionManager:e})=>{e.executeAction(t6,"commandPalette")}},sEe=Object.freeze(Object.defineProperty({__proto__:null,toggleTheme:iEe},Symbol.toStringTag,{value:"Module"})),rEe=Zt(null),St={app:"App",export:"Export",tools:"Tools",editor:"Editor",elements:"Elements",links:"Links"},oEe=e=>{switch(e){case St.app:return 1;case St.export:return 2;case St.editor:return 3;case St.tools:return 4;case St.elements:return 5;case St.links:return 6;default:return 10}},x2=({shortcut:e,className:t,children:n})=>{const i=e.replace("++","+$").split("+");return P("div",{className:pe("shortcut",t),children:[i.map((s,r)=>g("div",{className:"shortcut-wrapper",children:g("div",{className:"shortcut-key",children:s==="$"?"+":s})},s)),g("div",{className:"shortcut-desc",children:n})]})},eX=e=>!e.altKey&&e[z.CTRL_OR_CMD]&&(e.shiftKey&&e.key.toLowerCase()===z.P||e.key===z.SLASH),QR=Object.assign(e=>{var i;const t=Ui(),n=Yn();return L.useEffect(()=>{const s=r=>{eX(r)&&(r.preventDefault(),r.stopPropagation(),n(o=>{var l;const a=((l=o.openDialog)==null?void 0:l.name)==="commandPalette"?null:{name:"commandPalette"};return a&&at("command_palette","open","shortcut"),{openDialog:a}}))};return window.addEventListener(ee.KEYDOWN,s,{capture:!0}),()=>window.removeEventListener(ee.KEYDOWN,s,{capture:!0})},[n]),((i=t.openDialog)==null?void 0:i.name)!=="commandPalette"?null:g(aEe,{...e})},{defaultItems:sEe});function aEe({customCommandPaletteItems:e}){const t=mo(),n=Ui(),i=Yn(),s=mp(),r=Ss(),[o,a]=pn(rEe),[l,c]=L.useState(null),u=L.useRef(null),d=B5({uiAppState:n,customCommandPaletteItems:e,appProps:s});L.useEffect(()=>{const{uiAppState:M,customCommandPaletteItems:T,appProps:_}=d,x=D=>{let $="";return D.label&&(typeof D.label=="function"?$=k(D.label(t.scene.getNonDeletedElements(),M,t)):$=k(D.label)),$},C=D=>typeof D.icon=="function"?D.icon(M,t.scene.getNonDeletedElements()):D.icon;let R=[];const N=(D,$,G)=>{const H={label:x(D),icon:C(D),category:$,shortcut:Vi(D.name),keywords:D.keywords,predicate:D.predicate,viewMode:D.viewMode,perform:()=>{r.executeAction(D,"commandPalette")}};return G?G(H,D):H};if(M&&t.scene&&r){const D=[r.actions.group,r.actions.ungroup,r.actions.cut,r.actions.copy,r.actions.deleteSelectedElements,r.actions.wrapSelectionInFrame,r.actions.copyStyles,r.actions.pasteStyles,r.actions.bringToFront,r.actions.bringForward,r.actions.sendBackward,r.actions.sendToBack,r.actions.alignTop,r.actions.alignBottom,r.actions.alignLeft,r.actions.alignRight,r.actions.alignVerticallyCentered,r.actions.alignHorizontallyCentered,r.actions.duplicateSelection,r.actions.flipHorizontal,r.actions.flipVertical,r.actions.zoomToFitSelection,r.actions.zoomToFitSelectionInViewport,r.actions.increaseFontSize,r.actions.decreaseFontSize,r.actions.toggleLinearEditor,r.actions.cropEditor,wG,xG,uye].map(j=>N(j,St.elements,(q,fe)=>({...q,predicate:fe.predicate?fe.predicate:(ie,Ue,Ve,$e)=>He(ie,Ue).length>0}))),$=[r.actions.toggleHandTool,r.actions.setFrameAsActiveTool,r.actions.toggleLassoTool].map(j=>N(j,St.tools)),G=[r.actions.undo,r.actions.redo,r.actions.zoomIn,r.actions.zoomOut,r.actions.resetZoom,r.actions.zoomToFit,r.actions.zenMode,r.actions.viewMode,r.actions.gridMode,r.actions.objectsSnapMode,r.actions.toggleShortcuts,r.actions.selectAll,r.actions.toggleElementLock,r.actions.unlockAllElements,r.actions.stats].map(j=>N(j,St.editor)),H=[r.actions.saveToActiveFile,r.actions.saveFileToDisk,r.actions.copyAsPng,r.actions.copyAsSvg].map(j=>N(j,St.export));R=[...D,...G,{label:x(f0),icon:C(f0),shortcut:Vi(f0.name),category:St.editor,keywords:["delete","destroy"],viewMode:!1,perform:()=>{Ns.set(cy,"clearCanvas")}},{label:k("buttons.exportImage"),category:St.export,icon:pH,shortcut:Vi("imageExport"),keywords:["export","image","png","jpeg","svg","clipboard","picture"],perform:()=>{i({openDialog:{name:"imageExport"}})}},...H];const V=[{label:k("toolBar.library"),category:St.app,icon:Lw,viewMode:!1,perform:()=>{M.openSidebar?i({openSidebar:null}):i({openSidebar:{name:yr.name,tab:yr.defaultTab}})}},{label:k("search.title"),category:St.app,icon:md,viewMode:!0,perform:()=>{r.executeAction(tX)}},{label:k("labels.shapeSwitch"),category:St.elements,icon:g4,perform:()=>{r.executeAction(cye)}},{label:k("labels.changeStroke"),keywords:["color","outline"],category:St.elements,icon:iE,viewMode:!1,predicate:(j,q)=>{const fe=He(j,q);return fe.length>0&&ZG(q,fe)},perform:()=>{i(j=>({openMenu:j.openMenu==="shape"?null:"shape",openPopup:"elementStroke"}))}},{label:k("labels.changeBackground"),keywords:["color","fill"],icon:iE,category:St.elements,viewMode:!1,predicate:(j,q)=>{const fe=He(j,q);return fe.length>0&&qG(q,fe)},perform:()=>{i(j=>({openMenu:j.openMenu==="shape"?null:"shape",openPopup:"elementBackground"}))}},{label:k("labels.canvasBackground"),keywords:["color"],icon:iE,category:St.editor,viewMode:!1,perform:()=>{i(j=>({openMenu:j.openMenu==="canvas"?null:"canvas",openPopup:"canvasBackground"}))}},...M_.reduce((j,q)=>{var Mt;const{value:fe,icon:ie,key:Ue,numericKey:Ve}=q;if(((Mt=_.UIOptions.tools)==null?void 0:Mt[fe])===!1)return j;const nt=Ue&&r0(typeof Ue=="string"?Ue:Ue[0])||Ve,zt={label:k(`toolBar.${fe}`),category:St.tools,shortcut:nt,icon:ie,keywords:["toolbar"],viewMode:!1,perform:({event:qt})=>{fe==="image"?t.setActiveTool({type:fe,insertOnCanvasDirectly:qt.type===ee.KEYDOWN}):t.setActiveTool({type:fe})}};return j.push(zt),j},[]),...$,{label:k("toolBar.lock"),category:St.tools,icon:M.activeTool.locked?Nw:x5,shortcut:z.Q.toLocaleUpperCase(),viewMode:!1,perform:()=>{t.toggleLock()}},{label:`${k("labels.textToDiagram")}...`,category:St.tools,icon:wde,viewMode:!1,predicate:_.aiEnabled,perform:()=>{i(j=>({...j,openDialog:{name:"ttd",tab:"text-to-diagram"}}))}},{label:`${k("toolBar.mermaidToExcalidraw")}...`,category:St.tools,icon:_H,viewMode:!1,predicate:_.aiEnabled,perform:()=>{i(j=>({...j,openDialog:{name:"ttd",tab:"mermaid"}}))}}],X=[...R,...V,...T||[]].map(j=>{var q;return{...j,icon:j.icon||g4,order:j.order??oEe(j.category),haystack:`${BR(j.label.toLocaleLowerCase())} ${((q=j.keywords)==null?void 0:q.join(" "))||""}`}});c(X),a(X.find(j=>j.label===(o==null?void 0:o.label))??null)}},[d,t,r,c,o==null?void 0:o.label,a,i]);const[f,h]=L.useState(""),[m,p]=L.useState(null),[U,y]=L.useState({}),E=M=>{i({openDialog:null},M),h("")},v=(M,T)=>{var _;((_=n.openDialog)==null?void 0:_.name)==="commandPalette"&&(T.stopPropagation(),T.preventDefault(),document.body.classList.add("excalidraw-animations-disabled"),E(()=>{M.perform({actionManager:r,event:T}),a(M),requestAnimationFrame(()=>{document.body.classList.remove("excalidraw-animations-disabled")})}))},w=qR(M=>M.viewMode===!1&&n.viewModeEnabled?!1:typeof M.predicate=="function"?M.predicate(t.scene.getNonDeletedElements(),n,s,t):M.predicate===void 0||M.predicate),I=qR(M=>{var C;const T=Eu(M.target)||eX(M)||M.key===z.ESCAPE;if(T&&M.key!==z.ARROW_UP&&M.key!==z.ARROW_DOWN&&M.key!==z.ENTER)return;const _=Object.values(U).flat(),x=o&&!f&&w(o);if(M.key===z.ARROW_UP){M.preventDefault();const R=_.findIndex($=>$.label===(m==null?void 0:m.label));if(x){if(R===0){p(o);return}if(m===o){const $=_[_.length-1];$&&p($);return}}let N;R===-1?N=_.length-1:N=R===0?_.length-1:(R-1)%_.length;const D=_[N];D&&p(D);return}if(M.key===z.ARROW_DOWN){M.preventDefault();const R=_.findIndex($=>$.label===(m==null?void 0:m.label));if(x){if(!m||R===_.length-1){p(o);return}if(m===o){const $=_[0];$&&p($);return}}const N=(R+1)%_.length,D=_[N];D&&p(D);return}if(M.key===z.ENTER&&m&&setTimeout(()=>{v(m,M)}),!T){if(M.stopPropagation(),/^[a-zA-Z0-9]$/.test(M.key)){(C=u==null?void 0:u.current)==null||C.focus();return}M.preventDefault()}});return L.useEffect(()=>(window.addEventListener(ee.KEYDOWN,I,{capture:!0}),()=>window.removeEventListener(ee.KEYDOWN,I,{capture:!0})),[I]),L.useEffect(()=>{if(!l)return;const M=C=>{const R={};for(const N of C)R[N.category]?R[N.category].push(N):R[N.category]=[N];return R};let T=l.filter(w).sort((C,R)=>C.order-R.order);const _=!f&&o&&w(o);if(!f){y(M(_?T.filter(C=>C.label!==(o==null?void 0:o.label)):T)),p(_?o:T[0]||null);return}const x=BR(f.toLocaleLowerCase().replace(/[<>_| -]/g,""));T=q5e.filter(x,T,{extract:C=>C.haystack}).sort((C,R)=>R.score-C.score).map(C=>C.original),y(M(T)),p(T[0]??null)},[f,l,w,o]),P(Ws,{onCloseRequest:()=>E(),closeOnClickOutside:!0,title:!1,size:720,autofocus:!0,className:"command-palette-dialog",children:[g(Gh,{value:f,placeholder:k("commandPalette.search.placeholder"),onChange:M=>{h(M)},selectOnRender:!0,ref:u}),!t.device.viewport.isMobile&&P("div",{className:"shortcuts-wrapper",children:[g(x2,{shortcut:"↑↓",children:k("commandPalette.shortcuts.select")}),g(x2,{shortcut:"↵",children:k("commandPalette.shortcuts.confirm")}),g(x2,{shortcut:Q("Esc"),children:k("commandPalette.shortcuts.close")})]}),P("div",{className:"commands",children:[o&&!f&&P("div",{className:"command-category",children:[P("div",{className:"command-category-title",children:[k("commandPalette.recents"),g("div",{className:"icon",style:{marginLeft:"6px"},children:_de})]}),g(JR,{command:o,isSelected:o.label===(m==null?void 0:m.label),onClick:M=>v(o,M),disabled:!w(o),onMouseMove:()=>p(o),showShortcut:!t.device.viewport.isMobile,appState:n})]}),Object.keys(U).length>0?Object.keys(U).map((M,T)=>P("div",{className:"command-category",children:[g("div",{className:"command-category-title",children:M}),U[M].map(_=>g(JR,{command:_,isSelected:_.label===(m==null?void 0:m.label),onClick:x=>v(_,x),onMouseMove:()=>p(_),showShortcut:!t.device.viewport.isMobile,appState:n},_.label))]},M)):l?P("div",{className:"no-match",children:[g("div",{className:"icon",children:md})," ",k("commandPalette.search.noMatch")]}):null]})]})}const JR=({command:e,isSelected:t,disabled:n,onMouseMove:i,onClick:s,showShortcut:r,appState:o})=>{const a=()=>{};return P("div",{className:pe("command-item",{"item-selected":t,"item-disabled":n}),ref:l=>{var c;t&&!n&&((c=l==null?void 0:l.scrollIntoView)==null||c.call(l,{block:"nearest"}))},onClick:n?a:s,onMouseMove:n?a:i,title:n?k("commandPalette.itemNotAvailable"):"",children:[P("div",{className:"name",children:[e.icon&&g(V5,{icon:typeof e.icon=="function"?e.icon(o):e.icon}),e.label]}),r&&e.shortcut&&g(x2,{shortcut:e.shortcut})]})},lEe=oe({name:"toggleLinearEditor",category:St.elements,label:(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds})[0];return(i==null?void 0:i.type)==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit"},keywords:["line"],trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const s=i.scene.getSelectedElements(t);return!!(!t.editingLinearElement&&s.length===1&&Ae(s[0])&&!he(s[0]))},perform(e,t,n,i){var o;const s=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0],r=((o=t.editingLinearElement)==null?void 0:o.elementId)===s.id?null:new le(s,_e(e));return{appState:{...t,editingLinearElement:r},captureUpdate:K.IMMEDIATELY}},PanelComponent:({appState:e,updateData:t,app:n})=>{const i=n.scene.getSelectedElements({selectedElementIds:e.selectedElementIds})[0],s=k(i.type==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit");return g(Ye,{type:"button",icon:Pde,title:s,"aria-label":s,onClick:()=>t(null)})}}),tX=oe({name:"searchMenu",icon:md,keywords:["search","find"],label:"search.title",viewMode:!0,trackEvent:{category:"search_menu",action:"toggle",predicate:e=>e.gridModeEnabled},perform(e,t,n,i){var s,r;if(((s=t.openSidebar)==null?void 0:s.name)===yr.name&&t.openSidebar.tab===Gu){const o=(r=i.excalidrawContainerValue.container)==null?void 0:r.querySelector(`.${Mc.SEARCH_MENU_INPUT_WRAPPER} input`);return o==null||o.focus(),o==null||o.select(),!1}return{appState:{...t,openSidebar:{name:yr.name,tab:Gu},openDialog:null},captureUpdate:K.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[z.CTRL_OR_CMD]&&e.key===z.F}),cEe=oe({name:"cropEditor",label:"helpDialog.cropStart",icon:WA,viewMode:!0,trackEvent:{category:"menu"},keywords:["image","crop"],perform(e,t,n,i){const s=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0];return{appState:{...t,isCropping:!1,croppingElementId:s.id},captureUpdate:K.IMMEDIATELY}},predicate:(e,t,n,i)=>{const s=i.scene.getSelectedElements(t);return!!(!t.croppingElementId&&s.length===1&&ft(s[0]))},PanelComponent:({appState:e,updateData:t,app:n})=>{const i=k("helpDialog.cropStart");return g(Ye,{type:"button",icon:WA,title:i,"aria-label":i,onClick:()=>t(null)})}}),nX=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length===1&&Te(n[0])},uEe=oe({name:"selectAllElementsInFrame",label:"labels.selectAllElementsInFrame",trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const s=i.scene.getSelectedElements(t).at(0)||null;if(Te(s)){const r=xr(Bt(e),s.id).filter(o=>!(o.type==="text"&&o.containerId));return{elements:e,appState:{...t,selectedElementIds:r.reduce((o,a)=>(o[a.id]=!0,o),{})},captureUpdate:K.IMMEDIATELY}}return{elements:e,appState:t,captureUpdate:K.EVENTUALLY}},predicate:(e,t,n,i)=>nX(t,i)}),dEe=oe({name:"removeAllElementsFromFrame",label:"labels.removeAllElementsFromFrame",trackEvent:{category:"history"},perform:(e,t,n,i)=>{const s=i.scene.getSelectedElements(t).at(0)||null;return Te(s)?{elements:rB(e,s),appState:{...t,selectedElementIds:{[s.id]:!0}},captureUpdate:K.IMMEDIATELY}:{elements:e,appState:t,captureUpdate:K.EVENTUALLY}},predicate:(e,t,n,i)=>nX(t,i)});oe({name:"updateFrameRendering",label:"labels.updateFrameRendering",viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t)=>({elements:e,appState:{...t,frameRendering:{...t.frameRendering,enabled:!t.frameRendering.enabled}},captureUpdate:K.EVENTUALLY}),checked:e=>e.frameRendering.enabled});oe({name:"setFrameAsActiveTool",label:"toolBar.frame",trackEvent:{category:"toolbar"},icon:Kb,viewMode:!1,perform:(e,t,n,i)=>{const s=en(t,{type:"frame"});return vo(i.interactiveCanvas,{...t,activeTool:s}),{elements:e,appState:{...t,activeTool:en(t,{type:"frame"})},captureUpdate:K.EVENTUALLY}},keyTest:e=>!e[z.CTRL_OR_CMD]&&!e.shiftKey&&!e.altKey&&e.key.toLocaleLowerCase()===z.F});const fEe=oe({name:"wrapSelectionInFrame",label:"labels.wrapSelectionInFrame",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const s=He(e,t);return s.length>0&&!s.some(r=>Te(r))},perform:(e,t,n,i)=>{const s=He(e,t),r=i.scene.getNonDeletedElementsMap(),[o,a,l,c]=xt(s,r),u=16,d=Tw({x:o-u,y:a-u,width:l-o+u*2,height:c-a+u*2});if(t.editingGroupId){const h=$t(s,t.editingGroupId);for(const m of h){const p=m.groupIds.indexOf(t.editingGroupId);pi(m,r,{groupIds:m.groupIds.slice(0,p)})}}return{elements:o0([...i.scene.getElementsIncludingDeleted(),d],s,d,t),appState:{selectedElementIds:{[d.id]:!0}},captureUpdate:K.IMMEDIATELY}}});class MU extends vw{}class h6{constructor(t=!0,n=!0){this.isUndoStackEmpty=t,this.isRedoStackEmpty=n}}class Lu{constructor(t){F(this,"onHistoryChangedEmitter",new zr);F(this,"undoStack",[]);F(this,"redoStack",[]);this.store=t}get isUndoStackEmpty(){return this.undoStack.length===0}get isRedoStackEmpty(){return this.redoStack.length===0}clear(){this.undoStack.length=0,this.redoStack.length=0}record(t){if(t.isEmpty()||t instanceof MU)return;const n=MU.inverse(t);this.undoStack.push(n),n.elements.isEmpty()||(this.redoStack.length=0),this.onHistoryChangedEmitter.trigger(new h6(this.isUndoStackEmpty,this.isRedoStackEmpty))}undo(t,n){return this.perform(t,n,()=>Lu.pop(this.undoStack),i=>Lu.push(this.redoStack,i,t))}redo(t,n){return this.perform(t,n,()=>Lu.pop(this.redoStack),i=>Lu.push(this.undoStack,i,t))}perform(t,n,i,s){try{let r=i();if(r===null)return;const o=K.IMMEDIATELY;let a=this.store.snapshot,l=t,c=n,u=!1;for(;r;){try{[l,c,u]=vw.applyTo(r,l,c,a);const d=a.maybeClone(o,l,c);this.store.scheduleMicroAction({action:o,change:nh.create(a,d),delta:r}),a=d}finally{s(r)}if(u)break;r=i()}return[l,c]}finally{this.onHistoryChangedEmitter.trigger(new h6(this.isUndoStackEmpty,this.isRedoStackEmpty))}}static pop(t){if(!t.length)return null;const n=t.pop();return n!==void 0?n:null}static push(t,n,i){const s=MU.inverse(n),r=MU.applyLatestChanges(s,i,"inserted");return t.push(r)}}const iX=(e,t)=>{const[n,i]=L.useState(t);return L.useEffect(()=>{const s=e.on(r=>{i(r)});return()=>{s()}},[e]),n},sX=(e,t,n)=>{if(!t.multiElement&&!t.resizingElement&&!t.editingTextElement&&!t.newElement&&!t.selectedElementsAreBeingDragged&&!t.selectionElement&&!e.flowChartCreator.isCreatingChart){const i=n();if(!i)return{captureUpdate:K.EVENTUALLY};const[s,r]=i,o=_w(Array.from(s.values()));return{appState:r,elements:o,captureUpdate:K.NEVER}}return{captureUpdate:K.EVENTUALLY}},hEe=e=>({name:"undo",label:"buttons.undo",icon:DA,trackEvent:{category:"history"},viewMode:!1,perform:(t,n,i,s)=>sX(s,n,()=>e.undo(_e(t),n)),keyTest:t=>t[z.CTRL_OR_CMD]&&S3(t,z.Z)&&!t.shiftKey,PanelComponent:({updateData:t,data:n})=>{const{isUndoStackEmpty:i}=iX(e.onHistoryChangedEmitter,new h6(e.isUndoStackEmpty,e.isRedoStackEmpty));return g(Ye,{type:"button",icon:DA,"aria-label":k("buttons.undo"),onClick:t,size:(n==null?void 0:n.size)||"medium",disabled:i,"data-testid":"button-undo"})}}),gEe=e=>({name:"redo",label:"buttons.redo",icon:LA,trackEvent:{category:"history"},viewMode:!1,perform:(t,n,i,s)=>sX(s,n,()=>e.redo(_e(t),n)),keyTest:t=>t[z.CTRL_OR_CMD]&&t.shiftKey&&S3(t,z.Z)||KP&&t.ctrlKey&&!t.shiftKey&&S3(t,z.Y),PanelComponent:({updateData:t,data:n})=>{const{isRedoStackEmpty:i}=iX(e.onHistoryChangedEmitter,new h6(e.isUndoStackEmpty,e.isRedoStackEmpty));return g(Ye,{type:"button",icon:LA,"aria-label":k("buttons.redo"),onClick:t,size:(n==null?void 0:n.size)||"medium",disabled:i,"data-testid":"button-redo"})}}),mEe=oe({name:"autoResize",label:"labels.autoResize",icon:null,trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const s=He(e,t);return s.length===1&&ue(s[0])&&!s[0].autoResize},perform:(e,t,n,i)=>{const s=He(e,t);return{appState:t,elements:e.map(r=>{if(r.id===s[0].id&&ue(r)){const o=Vn(r.originalText,gt(r),r.lineHeight);return Ie(r,{autoResize:!0,width:o.width,height:o.height,text:r.originalText})}return r}),captureUpdate:K.IMMEDIATELY}}}),ek=oe({name:"viewMode",label:"labels.viewMode",icon:R5,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.viewModeEnabled},perform(e,t){return{appState:{...t,viewModeEnabled:!this.checked(t)},captureUpdate:K.EVENTUALLY}},checked:e=>e.viewModeEnabled,predicate:(e,t,n)=>typeof n.viewModeEnabled>"u",keyTest:e=>!e[z.CTRL_OR_CMD]&&e.altKey&&e.code===et.R}),zE=(e,t,n,i,s,r)=>{if(e.trackEvent)try{typeof e.trackEvent=="object"&&(!e.trackEvent.predicate||e.trackEvent.predicate(n,i,r))&&at(e.trackEvent.category,e.trackEvent.action||e.name,`${t} (${s.device.editor.isMobile?"mobile":"desktop"})`)}catch(o){console.error("error while logging action:",o)}};class pEe{constructor(t,n,i,s){F(this,"actions",{});F(this,"updater");F(this,"getAppState");F(this,"getElementsIncludingDeleted");F(this,"app");F(this,"renderAction",(t,n)=>{const i=this.app.props.UIOptions.canvasActions;if(this.actions[t]&&"PanelComponent"in this.actions[t]&&(!(t in i)||i[t])){const s=this.actions[t],r=s.PanelComponent;r.displayName="PanelComponent";const o=this.getElementsIncludingDeleted(),a=this.getAppState(),l=c=>{zE(s,"ui",a,o,this.app,c),this.updater(s.perform(this.getElementsIncludingDeleted(),this.getAppState(),c,this.app))};return g(r,{elements:this.getElementsIncludingDeleted(),appState:this.getAppState(),updateData:l,appProps:this.app.props,app:this.app,data:n})}return null});F(this,"isActionEnabled",t=>{const n=this.getElementsIncludingDeleted(),i=this.getAppState();return!t.predicate||t.predicate(n,i,this.app.props,this.app)});this.updater=r=>{if(Qm(r))r.then(o=>t(o));else return t(r)},this.getAppState=n,this.getElementsIncludingDeleted=i,this.app=s}registerAction(t){this.actions[t.name]=t}registerAll(t){t.forEach(n=>this.registerAction(n))}handleKeyDown(t){const n=this.app.props.UIOptions.canvasActions,i=Object.values(this.actions).sort((l,c)=>(c.keyPriority||0)-(l.keyPriority||0)).filter(l=>(l.name in n?n[l.name]:!0)&&l.keyTest&&l.keyTest(t,this.getAppState(),this.getElementsIncludingDeleted(),this.app));if(i.length!==1)return i.length>1&&console.warn("Canceling as multiple actions match this shortcut",i),!1;const s=i[0];if(this.getAppState().viewModeEnabled&&s.viewMode!==!0)return!1;const r=this.getElementsIncludingDeleted(),o=this.getAppState(),a=null;return zE(s,"keyboard",o,r,this.app,null),t.preventDefault(),t.stopPropagation(),this.updater(i[0].perform(r,o,a,this.app)),!0}executeAction(t,n="api",i=null){const s=this.getElementsIncludingDeleted(),r=this.getAppState();zE(t,n,r,s,this.app,i),this.updater(t.perform(s,r,i,this.app))}}class UEe{constructor(){F(this,"targets",new WeakMap);F(this,"rafIds",new WeakMap)}register(t,n){this.targets.set(t,{callback:n,stopped:!0})}start(t){const n=this.targets.get(t);n&&(this.rafIds.has(t)||(this.targets.set(t,{...n,stopped:!1}),this.scheduleFrame(t)))}stop(t){const n=this.targets.get(t);n&&!n.stopped&&this.targets.set(t,{...n,stopped:!0}),this.cancelFrame(t)}constructFrame(t){return n=>{const i=this.targets.get(t);if(!i)return;const s=this.onFrame(i,n);!i.stopped&&!s?this.scheduleFrame(t):this.cancelFrame(t)}}scheduleFrame(t){const n=requestAnimationFrame(this.constructFrame(t));this.rafIds.set(t,n)}cancelFrame(t){if(this.rafIds.has(t)){const n=this.rafIds.get(t);cancelAnimationFrame(n)}this.rafIds.delete(t)}onFrame(t,n){return t.callback(n)??!1}}const tk=e=>{const t=Array.from(e.values());return{x:ik(t,n=>n.x)/t.length,y:ik(t,n=>n.y)/t.length}},nk=([e,t])=>Math.hypot(e.x-t.x,e.y-t.y),ik=(e,t)=>e.reduce((n,i)=>n+t(i),0),bEe=8,sk=99999,uy=e=>bEe/e,Wi=class Wi{};F(Wi,"referenceSnapPoints",null),F(Wi,"visibleGaps",null),F(Wi,"setReferenceSnapPoints",t=>{Wi.referenceSnapPoints=t}),F(Wi,"getReferenceSnapPoints",()=>Wi.referenceSnapPoints),F(Wi,"setVisibleGaps",t=>{Wi.visibleGaps=t}),F(Wi,"getVisibleGaps",()=>Wi.visibleGaps),F(Wi,"destroy",()=>{Wi.referenceSnapPoints=null,Wi.visibleGaps=null});let Hr=Wi;const bm=e=>e.props.gridModeEnabled??e.state.gridModeEnabled,zc=({event:e,app:t,selectedElements:n})=>e?t.state.activeTool.type!=="lasso"&&(t.state.objectsSnapModeEnabled&&!e[z.CTRL_OR_CMD]||!t.state.objectsSnapModeEnabled&&e[z.CTRL_OR_CMD]&&!bm(t)):n.length===1&&n[0].type==="arrow"?!1:t.state.objectsSnapModeEnabled,yEe=(e,t,n=.01)=>Math.abs(e-t)<=n,ym=(e,t,{omitCenter:n,boundingBoxCorners:i,dragOffset:s}={omitCenter:!1,boundingBoxCorners:!1})=>{let r=[];if(e.length===1){const o=e[0];let[a,l,c,u,d,f]=Ne(o,t);s&&(a+=s.x,c+=s.x,d+=s.x,l+=s.y,u+=s.y,f+=s.y);const h=(c-a)/2,m=(u-l)/2;if((o.type==="diamond"||o.type==="ellipse")&&!i){const p=Z(S(a,l+m),S(d,f),o.angle),U=Z(S(a+h,l),S(d,f),o.angle),y=Z(S(c,l+m),S(d,f),o.angle),E=Z(S(a+h,u),S(d,f),o.angle),v=S(d,f);r=n?[p,U,y,E]:[p,U,y,E,v]}else{const p=Z(S(a,l),S(d,f),o.angle),U=Z(S(c,l),S(d,f),o.angle),y=Z(S(a,u),S(d,f),o.angle),E=Z(S(c,u),S(d,f),o.angle),v=S(d,f);r=n?[p,U,y,E]:[p,U,y,E,v]}}else if(e.length>1){const[o,a,l,c]=yw(e,s??{x:0,y:0}),u=l-o,d=c-a,f=S(o,a),h=S(l,a),m=S(o,c),p=S(l,c),U=S(o+u/2,a+d/2);r=n?[f,h,m,p]:[f,h,m,p,U]}return r.map(o=>S(an(o[0]),an(o[1])))},rX=(e,t,n,i)=>{const s=t.filter(r=>Te(r)).map(r=>r.id);return tB(e,t,n,i).filter(r=>!(r.frameId&&s.includes(r.frameId)))},EEe=(e,t,n,i)=>{const s=rX(e,t,n,i),r=b5(s,i).filter(d=>!(d.length===1&&Xt(d[0]))).map(d=>xt(d).map(f=>an(f))),o=r.sort((d,f)=>d[0]-f[0]),a=[];let l=0;e:for(let d=0;d<o.length;d++){const f=o[d];for(let h=d+1;h<o.length;h++){if(++l>sk)break e;const m=o[h],[,p,U,y]=f,[E,v,,w]=m;U<E&&vb(Ni(p,y),Ni(v,w))&&a.push({startBounds:f,endBounds:m,startSide:[S(U,p),S(U,y)],endSide:[S(E,v),S(E,w)],length:E-U,overlap:wb(Ni(p,y),Ni(v,w))})}}const c=r.sort((d,f)=>d[1]-f[1]),u=[];l=0;e:for(let d=0;d<c.length;d++){const f=c[d];for(let h=d+1;h<c.length;h++){if(++l>sk)break e;const m=c[h],[p,,U,y]=f,[E,v,w]=m;y<v&&vb(Ni(p,U),Ni(E,w))&&u.push({startBounds:f,endBounds:m,startSide:[S(p,y),S(U,y)],endSide:[S(E,v),S(w,v)],length:v-y,overlap:wb(Ni(p,U),Ni(E,w))})}}return{horizontalGaps:a,verticalGaps:u}},rk=(e,t,n,i,s,r,o)=>{if(!zc({app:n,event:i,selectedElements:e}))return[];if(e.length===0)return[];const a=Hr.getVisibleGaps();if(a){const{horizontalGaps:l,verticalGaps:c}=a,[u,d,f,h]=yw(e,t).map(U=>an(U)),m=(u+f)/2,p=(d+h)/2;for(const U of l){if(!vb(Ni(d,h),U.overlap))continue;const y=U.startSide[0][0]+U.length/2,E=an(y-m);if(U.length>f-u&&Math.abs(E)<=o.x){Math.abs(E)<o.x&&(s.length=0),o.x=Math.abs(E);const C={type:"gap",direction:"center_horizontal",gap:U,offset:E};s.push(C);continue}const[,,w]=U.endBounds,I=u-w,M=an(U.length-I);if(Math.abs(M)<=o.x){Math.abs(M)<o.x&&(s.length=0),o.x=Math.abs(M);const C={type:"gap",direction:"side_right",gap:U,offset:M};s.push(C);continue}const[T,,,]=U.startBounds,_=T-f,x=an(_-U.length);if(Math.abs(x)<=o.x){Math.abs(x)<o.x&&(s.length=0),o.x=Math.abs(x);const C={type:"gap",direction:"side_left",gap:U,offset:x};s.push(C);continue}}for(const U of c){if(!vb(Ni(u,f),U.overlap))continue;const y=U.startSide[0][1]+U.length/2,E=an(y-p);if(U.length>h-d&&Math.abs(E)<=o.y){Math.abs(E)<o.y&&(r.length=0),o.y=Math.abs(E);const C={type:"gap",direction:"center_vertical",gap:U,offset:E};r.push(C);continue}const[,w,,]=U.startBounds,I=w-h,M=an(I-U.length);if(Math.abs(M)<=o.y){Math.abs(M)<o.y&&(r.length=0),o.y=Math.abs(M);const C={type:"gap",direction:"side_top",gap:U,offset:M};r.push(C);continue}const[,,,T]=U.endBounds,_=an(d-T),x=U.length-_;if(Math.abs(x)<=o.y){Math.abs(x)<o.y&&(r.length=0),o.y=Math.abs(x);const C={type:"gap",direction:"side_bottom",gap:U,offset:x};r.push(C);continue}}}},vEe=(e,t,n,i)=>{const s=rX(e,t,n,i);return b5(s,i).filter(r=>!(r.length===1&&Xt(r[0]))).flatMap(r=>ym(r,i))},jh=(e,t,n,i,s,r,o)=>{if(!zc({app:n,event:i,selectedElements:e})||e.length===0&&t.length===0)return[];const a=Hr.getReferenceSnapPoints();if(a)for(const l of t)for(const c of a){const u=c[0]-l[0],d=c[1]-l[1];Math.abs(u)<=o.x&&(Math.abs(u)<o.x&&(s.length=0),s.push({type:"point",points:[l,c],offset:u}),o.x=Math.abs(u)),Math.abs(d)<=o.y&&(Math.abs(d)<o.y&&(r.length=0),r.push({type:"point",points:[l,c],offset:d}),o.y=Math.abs(d))}},wEe=(e,t,n,i,s)=>{var U,y;const r=n.state,o=He(e,r);if(!zc({app:n,event:i,selectedElements:o})||o.length===0)return{snapOffset:{x:0,y:0},snapLines:[]};t.x=an(t.x),t.y=an(t.y);const a=[],l=[],c=uy(r.zoom.value),u={x:c,y:c},d=ym(o,s,{dragOffset:t});jh(o,d,n,i,a,l,u),rk(o,t,n,i,a,l,u);const f={x:((U=a[0])==null?void 0:U.offset)??0,y:((y=l[0])==null?void 0:y.offset)??0};u.x=0,u.y=0,a.length=0,l.length=0;const h={x:an(t.x+f.x),y:an(t.y+f.y)};jh(o,ym(o,s,{dragOffset:h}),n,i,a,l,u),rk(o,h,n,i,a,l,u);const m=R_(a,l),p=TEe(o,h,[...a,...l].filter(E=>E.type==="gap"));return{snapOffset:f,snapLines:[...m,...p]}},an=e=>Math.round(e*10**6)/10**6,ok=e=>{const t=new Map;for(const n of e){const i=n.join(",");t.has(i)||t.set(i,n)}return Array.from(t.values())},R_=(e,t)=>{const n={},i={};if(e.length>0){for(const s of e)if(s.type==="point"){const r=an(s.points[0][0]);n[r]||(n[r]=[]),n[r].push(...s.points.map(o=>S(an(o[0]),an(o[1]))))}}if(t.length>0){for(const s of t)if(s.type==="point"){const r=an(s.points[0][1]);i[r]||(i[r]=[]),i[r].push(...s.points.map(o=>S(an(o[0]),an(o[1]))))}}return Object.entries(n).map(([s,r])=>({type:"points",points:ok(r.map(o=>S(Number(s),o[1])).sort((o,a)=>o[1]-a[1]))})).concat(Object.entries(i).map(([s,r])=>({type:"points",points:ok(r.map(o=>S(o[0],Number(s))).sort((o,a)=>o[0]-a[0]))})))},_Ee=e=>{const t=new Map;for(const n of e){const i=n.points.flat().map(s=>[an(s)]).join(",");t.has(i)||t.set(i,n)}return Array.from(t.values())},TEe=(e,t,n)=>{const[i,s,r,o]=yw(e,t),a=[];for(const l of n){const[c,u,d,f]=l.gap.startBounds,[h,m,p,U]=l.gap.endBounds,y=wb(Ni(s,o),l.gap.overlap),E=wb(Ni(i,r),l.gap.overlap);switch(l.direction){case"center_horizontal":{if(y){const v=(y[0]+y[1])/2;a.push({type:"gap",direction:"horizontal",points:[S(l.gap.startSide[0][0],v),S(i,v)]},{type:"gap",direction:"horizontal",points:[S(r,v),S(l.gap.endSide[0][0],v)]})}break}case"center_vertical":{if(E){const v=(E[0]+E[1])/2;a.push({type:"gap",direction:"vertical",points:[S(v,l.gap.startSide[0][1]),S(v,s)]},{type:"gap",direction:"vertical",points:[S(v,o),S(v,l.gap.endSide[0][1])]})}break}case"side_right":{if(y){const v=(y[0]+y[1])/2;a.push({type:"gap",direction:"horizontal",points:[S(d,v),S(h,v)]},{type:"gap",direction:"horizontal",points:[S(p,v),S(i,v)]})}break}case"side_left":{if(y){const v=(y[0]+y[1])/2;a.push({type:"gap",direction:"horizontal",points:[S(r,v),S(c,v)]},{type:"gap",direction:"horizontal",points:[S(d,v),S(h,v)]})}break}case"side_top":{if(E){const v=(E[0]+E[1])/2;a.push({type:"gap",direction:"vertical",points:[S(v,o),S(v,u)]},{type:"gap",direction:"vertical",points:[S(v,f),S(v,m)]})}break}case"side_bottom":{if(E){const v=(E[0]+E[1])/2;a.push({type:"gap",direction:"vertical",points:[S(v,f),S(v,m)]},{type:"gap",direction:"vertical",points:[S(v,U),S(v,s)]})}break}}}return _Ee(a.map(l=>({...l,points:l.points.map(c=>S(an(c[0]),an(c[1])))})))},ak=(e,t,n,i,s,r)=>{var M,T;if(!zc({event:i,selectedElements:e,app:n})||e.length===0||e.length===1&&!yEe(e[0].angle,0))return{snapOffset:{x:0,y:0},snapLines:[]};let[o,a,l,c]=xt(t);r&&(r.includes("e")?l+=s.x:r.includes("w")&&(o+=s.x),r.includes("n")?a+=s.y:r.includes("s")&&(c+=s.y));const u=[];if(r)switch(r){case"e":{u.push(S(l,a),S(l,c));break}case"w":{u.push(S(o,a),S(o,c));break}case"n":{u.push(S(o,a),S(l,a));break}case"s":{u.push(S(o,c),S(l,c));break}case"ne":{u.push(S(l,a));break}case"nw":{u.push(S(o,a));break}case"se":{u.push(S(l,c));break}case"sw":{u.push(S(o,c));break}}const d=uy(n.state.zoom.value),f={x:d,y:d},h=[],m=[];jh(t,u,n,i,h,m,f);const p={x:((M=h[0])==null?void 0:M.offset)??0,y:((T=m[0])==null?void 0:T.offset)??0};f.x=0,f.y=0,h.length=0,m.length=0;const[U,y,E,v]=xt(e).map(_=>an(_)),w=[S(U,y),S(U,v),S(E,y),S(E,v)];jh(e,w,n,i,h,m,f);const I=R_(h,m);return{snapOffset:p,snapLines:I}},SEe=(e,t,n,i,s,r)=>{var m,p;if(!zc({event:n,selectedElements:[e],app:t}))return{snapOffset:{x:0,y:0},snapLines:[]};const o=[S(i.x+s.x,i.y+s.y)],a=uy(t.state.zoom.value),l={x:a,y:a},c=[],u=[];jh([e],o,t,n,c,u,l);const d={x:((m=c[0])==null?void 0:m.offset)??0,y:((p=u[0])==null?void 0:p.offset)??0};l.x=0,l.y=0,c.length=0,u.length=0;const f=ym([e],r,{boundingBoxCorners:!0,omitCenter:!0});jh([e],f,t,n,c,u,l);const h=R_(c,u);return{snapOffset:d,snapLines:h}},IEe=(e,t,n,i,s)=>{if(!zc({event:i,selectedElements:[],app:t}))return{originOffset:{x:0,y:0},snapLines:[]};const r=tB(e,[],t.state,s),o=uy(t.state.zoom.value),a={x:o,y:o},l=[],c=[];for(const u of r){const d=ym([u],s);for(const f of d){const h=f[0]-n.x;Math.abs(h)<=Math.abs(a.x)&&(Math.abs(h)<Math.abs(a.x)&&(c.length=0),c.push({type:"pointer",points:[f,S(f[0],n.y)],direction:"vertical"}),a.x=h);const m=f[1]-n.y;Math.abs(m)<=Math.abs(a.y)&&(Math.abs(m)<Math.abs(a.y)&&(l.length=0),l.push({type:"pointer",points:[f,S(n.x,f[1])],direction:"horizontal"}),a.y=m)}}return{originOffset:{x:c.length>0?c[0].points[0][0]-n.x:0,y:l.length>0?l[0].points[0][1]-n.y:0},snapLines:[...c,...l]}},xEe=e=>e===Zn.rectangle||e===Zn.ellipse||e===Zn.diamond||e===Zn.frame||e===Zn.magicframe||e===Zn.image||e===Zn.text,RU={width:100,height:0},tc=100,CEe=(e,t,n)=>{const i=js({x:0,y:0,textAlign:$0.CENTER,verticalAlign:Fs.MIDDLE,...t,containerId:e.id,strokeColor:t.strokeColor||e.strokeColor});return Object.assign(e,{boundElements:(e.boundElements||[]).concat({type:"text",id:i.id})}),$i(i,e,n),[e,i]},lk=(e,t,n,i,s)=>{let r,o;if(Object.assign(e,{startBinding:(e==null?void 0:e.startBinding)||null,endBinding:e.endBinding||null}),t){const u=(t==null?void 0:t.width)??tc,d=(t==null?void 0:t.height)??tc;let f;t.id&&(f=i.getElement(t.id),f||console.error(`No element for start binding with id ${t.id} found`));const h=t.x||e.x-u,m=t.y||e.y-d/2,p=f?f.type:t.type;if(p){if(p==="text"){let U="";f&&f.type==="text"?U=f.text:t.type==="text"&&(U=t.text),U||console.error(`No text found for start binding text element for ${e.id}`),r=js({x:h,y:m,type:"text",...f,...t,text:U}),Object.assign(r,{x:t.x||e.x-r.width,y:t.y||e.y-r.height/2})}else switch(p){case"rectangle":case"ellipse":case"diamond":{r=lo({x:h,y:m,width:u,height:d,...f,...t,type:p});break}default:jo(e,`Unhandled element start type "${t.type}"`,!0)}gr(e,r,"start",s)}}if(n){const u=(n==null?void 0:n.height)??tc,d=(n==null?void 0:n.width)??tc;let f;n.id&&(f=i.getElement(n.id),f||console.error(`No element for end binding with id ${n.id} found`));const h=n.x||e.x+e.width,m=n.y||e.y-u/2,p=f?f.type:n.type;if(p){if(p==="text"){let U="";f&&f.type==="text"?U=f.text:n.type==="text"&&(U=n.text),U||console.error(`No text found for end binding text element for ${e.id}`),o=js({x:h,y:m,type:"text",...f,...n,text:U}),Object.assign(o,{y:n.y||e.y-o.height/2})}else switch(p){case"rectangle":case"ellipse":case"diamond":{o=lo({x:h,y:m,width:d,height:u,...f,...n,type:p});break}default:jo(e,`Unhandled element end type "${p}"`,!0)}gr(e,o,"end",s)}}if(e.points.length<2)return{linearElement:e,startBoundElement:r,endBoundElement:o};const a=e.points.length-1,l=.5,c=Ga(e.points);return e.points[a][0]>e.points[a-1][0]&&(c[0][0]=l,c[a][0]-=l),e.points[a][0]<e.points[a-1][0]&&(c[0][0]=-.5,c[a][0]+=l),e.points[a][1]>e.points[a-1][1]&&(c[0][1]=l,c[a][1]-=l),e.points[a][1]<e.points[a-1][1]&&(c[0][1]=-.5,c[a][1]+=l),Object.assign(e,le.getNormalizedPoints({...e,points:c})),{linearElement:e,startBoundElement:r,endBoundElement:o}};class AEe{constructor(){F(this,"excalidrawElements",new Map);F(this,"add",t=>{t&&this.excalidrawElements.set(t.id,t)});F(this,"getElements",()=>qo(Array.from(this.excalidrawElements.values())));F(this,"getElementsMap",()=>Yo(_e(this.getElements())));F(this,"getElement",t=>this.excalidrawElements.get(t))}}const z4=(e,t)=>{var l,c,u;if(!e)return[];const n=Ga(e),i=new AEe,s=new Map,r=new Map;for(const d of n){let f;const h=d.id;switch((t==null?void 0:t.regenerateIds)!==!1&&Object.assign(d,{id:vs()}),d.type){case"rectangle":case"ellipse":case"diamond":{const p=(l=d==null?void 0:d.label)!=null&&l.text&&d.width===void 0?0:(d==null?void 0:d.width)||tc,U=(c=d==null?void 0:d.label)!=null&&c.text&&d.height===void 0?0:(d==null?void 0:d.height)||tc;f=lo({...d,width:p,height:U});break}case"line":{const p=d.width||RU.width,U=d.height||RU.height;f=hc({width:p,height:U,points:[S(0,0),S(p,U)],...d});break}case"arrow":{const p=d.width||RU.width,U=d.height||RU.height;f=sh({width:p,height:U,endArrowhead:"arrow",points:[S(0,0),S(p,U)],...d,type:"arrow"}),Object.assign(f,Ch(f.points));break}case"text":{const p=(d==null?void 0:d.fontFamily)||Kc,U=(d==null?void 0:d.fontSize)||pl,y=(d==null?void 0:d.lineHeight)||Rc(p),E=d.text??"",v=Rh(E),w=Vn(v,gt({fontFamily:p,fontSize:U}),y);f=js({width:w.width,height:w.height,fontFamily:p,fontSize:U,...d});break}case"image":{f=GB({width:(d==null?void 0:d.width)||tc,height:(d==null?void 0:d.height)||tc,...d});break}case"frame":{f=Tw({x:0,y:0,...d});break}case"magicframe":{f=W3({x:0,y:0,...d});break}case"freedraw":case"iframe":case"embeddable":{f=d;break}default:f=d,jo(d,`Unhandled element type "${d.type}"`,!0)}i.getElement(f.id)?console.error(`Duplicate id found for ${f.id}`):(i.add(f),s.set(f.id,d),h&&r.set(h,f.id))}const o=i.getElementsMap(),a=new Gb(o);for(const[d,f]of s){const h=i.getElement(d);switch(f.type){case"rectangle":case"ellipse":case"diamond":case"arrow":{if((u=f.label)!=null&&u.text){let[m,p]=CEe(h,f==null?void 0:f.label,a);if(i.add(m),i.add(p),xe(m)){const U=f.type==="arrow"?f==null?void 0:f.start:void 0,y=f.type==="arrow"?f==null?void 0:f.end:void 0;if(U&&U.id){const I=r.get(U.id);I&&Object.assign(U,{id:I})}if(y&&y.id){const I=r.get(y.id);I&&Object.assign(y,{id:I})}const{linearElement:E,startBoundElement:v,endBoundElement:w}=lk(m,U,y,i,a);m=E,i.add(E),i.add(v),i.add(w)}}else switch(f.type){case"arrow":{const{start:m,end:p}=f;if(m&&m.id){const v=r.get(m.id);Object.assign(m,{id:v})}if(p&&p.id){const v=r.get(p.id);Object.assign(p,{id:v})}const{linearElement:U,startBoundElement:y,endBoundElement:E}=lk(h,m,p,i,a);i.add(U),i.add(y),i.add(E);break}}break}}}for(const[d,f]of s){if(f.type!=="frame"&&f.type!=="magicframe")continue;const h=i.getElement(d);if(!h)throw new Error(`Excalidraw element with id ${d} doesn't exist`);const m=[];f.children.forEach(_=>{var R;const x=r.get(_);if(!x)throw new Error(`Element with ${_} wasn't mapped correctly`);const C=i.getElement(x);if(!C)throw new Error(`Frame element with id ${x} doesn't exist`);Object.assign(C,{frameId:h.id}),(R=C==null?void 0:C.boundElements)==null||R.forEach(N=>{const D=i.getElement(N.id);if(!D)throw new Error(`Bound element with id ${N.id} doesn't exist`);Object.assign(D,{frameId:h.id}),m.push(D)}),m.push(C)});let[p,U,y,E]=xt(m);const v=10;p=p-v,U=U-v,y=y+v,E=E+v;const w=(h==null?void 0:h.x)||p,I=(h==null?void 0:h.y)||U,M=(h==null?void 0:h.width)||y-p,T=(h==null?void 0:h.height)||E-U;Object.assign(h,{x:w,y:I,width:M,height:T}),f.children.length&&(h!=null&&h.x||h!=null&&h.y||h!=null&&h.width||h!=null&&h.height)&&console.info("User provided frame attributes are being considered, if you find this inaccurate, please remove any of the attributes - x, y, width and height so frame coordinates and dimensions are calculated automatically")}return i.getElements()},MEe="#ff6b6b",REe="#ff0000",ck=1,uk=2,kEe=(e,t)=>{if(!t.snapLines.length)return;const n=t.theme===Me.LIGHT||t.zenModeEnabled?MEe:REe,i=(t.zenModeEnabled?ck*1.5:ck)/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY);for(const s of t.snapLines)s.type==="pointer"?(e.lineWidth=i,e.strokeStyle=n,LEe(s,e,t)):s.type==="gap"?(e.lineWidth=i,e.strokeStyle=n,NEe(s.points[0],s.points[1],s.direction,t,e)):s.type==="points"&&(e.lineWidth=i,e.strokeStyle=n,DEe(s,e,t));e.restore()},DEe=(e,t,n)=>{if(!n.zenModeEnabled){const i=e.points[0],s=e.points[e.points.length-1];Qs(i,s,t)}for(const i of e.points)oX(i,n,t)},LEe=(e,t,n)=>{oX(e.points[0],n,t),n.zenModeEnabled||Qs(e.points[0],e.points[1],t)},oX=([e,t],n,i)=>{i.save();const s=(n.zenModeEnabled?uk*1.5:uk)/n.zoom.value;i.beginPath(),i.moveTo(e-s,t-s),i.lineTo(e+s,t+s),i.moveTo(e+s,t-s),i.lineTo(e-s,t+s),i.stroke(),i.restore()},Qs=(e,t,n)=>{n.beginPath(),n.lineTo(e[0],e[1]),n.lineTo(t[0],t[1]),n.stroke()},NEe=(e,t,n,i,s)=>{const r=8/i.zoom.value,o=r/2,a=r/4;if(n==="horizontal"){const l=[(e[0]+t[0])/2,e[1]];i.zenModeEnabled||Qs(S(e[0],e[1]-r),S(e[0],e[1]+r),s),Qs(S(l[0]-a,l[1]-o),S(l[0]-a,l[1]+o),s),Qs(S(l[0]+a,l[1]-o),S(l[0]+a,l[1]+o),s),i.zenModeEnabled||(Qs(S(t[0],t[1]-r),S(t[0],t[1]+r),s),Qs(e,t,s))}else{const l=[e[0],(e[1]+t[1])/2];i.zenModeEnabled||Qs(S(e[0]-r,e[1]),S(e[0]+r,e[1]),s),Qs(S(l[0]-o,l[1]-a),S(l[0]+o,l[1]-a),s),Qs(S(l[0]-o,l[1]+a),S(l[0]+o,l[1]+a),s),i.zenModeEnabled||(Qs(S(t[0]-r,t[1]),S(t[0]+r,t[1]),s),Qs(e,t,s))}},Io=4,nr=6,OEe="rgba(0,0,0,0.3)",PEe=(e,t,n,i)=>{if(!e.size)return{horizontal:null,vertical:null};const[s,r,o,a]=xt(e),l=t/i.zoom.value,c=n/i.zoom.value,u={top:parseInt(uU("sat"))||0,bottom:parseInt(uU("sab"))||0,left:parseInt(uU("sal"))||0,right:parseInt(uU("sar"))||0},d=J0().rtl,f=-i.scrollX+u.left,h=-i.scrollY+u.top,m=f+l-u.right,p=h+c-u.bottom,U=Math.min(s,f),y=Math.min(r,h),E=Math.max(o,m),v=Math.max(a,p),w=o-s,I=a-r,M=E-U,T=v-y,_=Math.max(Io*2,u.left+u.right)+nr*2,x=t*(l/M)-_,C=Math.max(Io*2,u.top+u.bottom)+nr*2,R=n*(c/T)-C,N=M>w?M*i.zoom.value/(x+_):t/(x+_),D=T>I?T*i.zoom.value/(R+C):n/(R+C);return{horizontal:f===U&&m===E?null:{x:Math.max(u.left,Io)+nr+(f-U)/M*t,y:n-nr-Math.max(Io,u.bottom),width:x,height:nr,deltaMultiplier:N},vertical:h===y&&p===v?null:{x:d?Math.max(u.left,Io):t-nr-Math.max(u.right,Io),y:Math.max(u.top,Io)+nr+(h-y)/T*n,width:nr,height:R,deltaMultiplier:D}}},dk=(e,t,n)=>{const[i,s]=[e.horizontal,e.vertical].map(o=>o!=null&&o.x<=t&&t<=o.x+o.width&&o.y<=n&&n<=o.y+o.height);return{isOverEither:i||s,isOverHorizontal:i,isOverVertical:s}},FEe=(e,t)=>{ti(t.selectedLinearElement,"selectedLinearElement is null");const{segmentMidPointHoveredCoords:n}=t.selectedLinearElement;ti(n,"midPointCoords is null"),e.save(),e.translate(t.scrollX,t.scrollY),aX(n,e,t),e.restore()},BEe=(e,t,n)=>{var a,l;const{elementId:i,hoverPointIndex:s}=t.selectedLinearElement;if((l=(a=t.editingLinearElement)==null?void 0:a.selectedPointsIndices)!=null&&l.includes(s))return;const r=le.getElement(i,n);if(!r)return;const o=le.getPointAtIndexGlobalCoordinates(r,s,n);e.save(),e.translate(t.scrollX,t.scrollY),aX(o,e,t),e.restore()},aX=(e,t,n)=>{t.fillStyle="rgba(105, 101, 219, 0.4)",q5(t,e[0],e[1],le.POINT_HANDLE_SIZE/n.zoom.value,!1)},HE=(e,t,n,i,s,r=!1)=>{e.strokeStyle="#5e5ad8",e.setLineDash([]),e.fillStyle="rgba(255, 255, 255, 0.9)",s?e.fillStyle="rgba(134, 131, 226, 0.9)":r&&(e.fillStyle="rgba(177, 151, 252, 0.7)"),q5(e,n[0],n[1],i/t.zoom.value,!r)},zEe=(e,t,n,i)=>{const[s,r,o,a]=Ne(t,n),l=o-s,c=a-r;e.strokeStyle="rgba(0,0,0,.05)",e.fillStyle="rgba(0,0,0,.05)";const u=hd(t,t.width,t.height,i);switch(t.type){case"rectangle":case"text":case"image":case"iframe":case"embeddable":case"frame":case"magicframe":A6e(e,t,u);break;case"diamond":R6e(e,u,t);break;case"ellipse":e.lineWidth=hd(t,t.width,t.height,i)-Rt,M6e(e,l+u+Rt,c+u+Rt,s+l/2,r+c/2,t.angle);break}},HEe=(e,t,n,i)=>{const[s,r,o]=t,a=hd(o,o.width,o.height,i);e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,.05)",(r==="both"?[0,-1]:r==="start"?[0]:[-1]).forEach(c=>{const[u,d]=le.getPointAtIndexGlobalCoordinates(s,c,n);q5(e,u,d,a)})},lX=(e,t,n)=>{const{angle:i,x1:s,y1:r,x2:o,y2:a,selectionColors:l,cx:c,cy:u,dashed:d,activeEmbeddable:f}=n,h=o-s,m=a-r,U=(n.padding??ld*2)/t.zoom.value,y=8/t.zoom.value,E=4/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=(f?4:1)/t.zoom.value;const v=l.length;for(let w=0;w<v;++w)e.strokeStyle=l[w],d&&e.setLineDash([y,E+(y+E)*(v-1)]),e.lineDashOffset=(y+E)*w,ey(e,s-U,r-U,h+U*2,m+U*2,c,u,i);e.restore()},VEe=(e,t,n,i)=>{const s=Array.isArray(n)?HEe:zEe;e.save(),e.translate(t.scrollX,t.scrollY),s(e,n,i,t.zoom),e.restore()},$Ee=(e,t,n,i)=>{const[s,r,o,a]=Ne(n,i),l=o-s,c=a-r;e.strokeStyle="rgb(0,118,255)",e.lineWidth=Pt.strokeWidth/t.zoom.value,e.save(),e.translate(t.scrollX,t.scrollY),ey(e,s,r,l,c,s+l/2,r+c/2,n.angle,!1,Pt.radius/t.zoom.value),e.restore()},GEe=(e,t,n)=>{const i=n.filter(a=>a.groupIds.length===0),s=n.filter(a=>a.groupIds.length>0),r=a=>{const[l,c,u,d]=xt(a);return{angle:0,x1:l,x2:u,y1:c,y2:d,selectionColors:["rgb(0,118,255)"],dashed:!1,cx:l+(u-l)/2,cy:c+(d-c)/2,activeEmbeddable:!1}},o=a=>{const l=$t(n,a);return r(l)};Object.entries(JF(s,t)).filter(([a,l])=>l).map(([a,l])=>a).map(a=>o(a)).concat(i.map(a=>r([a]))).forEach(a=>lX(e,t,a))},VE=(e,t,n,i)=>{var a;if(!t.selectedLinearElement)return;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=1/t.zoom.value;const s=le.getPointsGlobalCoordinates(n,i),{POINT_HANDLE_SIZE:r}=le,o=t.editingLinearElement?r:r/2;if(s.forEach((l,c)=>{var d,f;if(he(n)&&c!==0&&c!==s.length-1)return;const u=!!((f=(d=t.editingLinearElement)==null?void 0:d.selectedPointsIndices)!=null&&f.includes(c));HE(e,t,l,o,u)}),he(n)){const l=((a=n.fixedSegments)==null?void 0:a.map(c=>c.index))||[];s.slice(0,-1).forEach((c,u)=>{le.isSegmentTooShort(n,s[u+1],s[u],u,t.zoom)||HE(e,t,S((c[0]+s[u+1][0])/2,(c[1]+s[u+1][1])/2),r/2,!1,!l.includes(u+1))})}else le.getEditorMidPoints(n,i,t).filter((c,u,d)=>c!==null&&!(he(n)&&(u===0||u===d.length-1))).forEach(c=>{(t.editingLinearElement||s.length===2)&&HE(e,t,c,r/2,!1,!0)});e.restore()},fk=(e,t,n,i,s)=>{Object.keys(i).forEach(r=>{const o=i[r];if(o!==void 0){const[a,l,c,u]=o;e.save(),e.lineWidth=1/n.zoom.value,t.selectionColor&&(e.strokeStyle=t.selectionColor),r==="rotation"?q5(e,a+c/2,l+u/2,c/2):e.roundRect?(e.beginPath(),e.roundRect(a,l,c,u,2/n.zoom.value),e.fill(),e.stroke()):ey(e,a,l,c,u,a+c/2,l+u/2,s,!0),e.restore()}})},XEe=(e,t,n,i,s)=>{const[r,o,,,a,l]=Ne(i,s),c=3,u=20,d=c/n.zoom.value,f=d/2,h=a-r+d,m=l-o+d,p=Math.min(u/n.zoom.value,h),U=Math.min(u/n.zoom.value,m);e.save(),e.fillStyle=t.selectionColor,e.strokeStyle=t.selectionColor,e.lineWidth=d,[[[-h,-m],[0,f],[p,f],[f,0],[f,U]],[[h-f,-m],[f,f],[-p+f,f],[0,0],[0,U]],[[-h,m],[0,-f],[p,-f],[f,0],[f,-U]],[[h-f,m],[f,-f],[-p+f,-f],[0,0],[0,-U]]].forEach(E=>{const[[v,w],[I,M],[T,_],[x,C],[R,N]]=E;e.save(),e.translate(a,l),e.rotate(i.angle),e.beginPath(),e.moveTo(v+I,w+M),e.lineTo(v+T,w+_),e.stroke(),e.beginPath(),e.moveTo(v+x,w+C),e.lineTo(v+R,w+N),e.stroke(),e.restore()}),e.restore()},jEe=(e,t,n,i)=>{t.save();const s=ld*2/n.zoom.value,r=e.width+s*2,o=e.height+s*2,a=e.x+r/2,l=e.y+o/2,c=-(r/2+s),u=-(o/2+s);t.translate(a+n.scrollX,l+n.scrollY),t.rotate(e.angle),t.lineWidth=1/n.zoom.value,t.strokeStyle=i,t.strokeRect(c,u,r,o),t.restore()},cX=({canvas:e,elementsMap:t,visibleElements:n,selectedElements:i,allElementsMap:s,scale:r,appState:o,renderConfig:a,device:l})=>{var p,U,y,E;if(e===null)return{atLeastOneVisibleElement:!1,elementsMap:t};const[c,u]=Q5(e,r),d=J5({canvas:e,scale:r,normalizedWidth:c,normalizedHeight:u});d.save(),d.scale(o.zoom.value,o.zoom.value);let f;if(n.forEach(v=>{var w;((w=o.editingLinearElement)==null?void 0:w.elementId)===v.id&&v&&(f=v)}),f&&VE(d,o,f,t),o.selectionElement&&!o.isCropping)try{cae(o.selectionElement,d,o,a.selectionColor)}catch(v){console.error(v)}if(o.editingTextElement&&ue(o.editingTextElement)){const v=s.get(o.editingTextElement.id);v&&!v.autoResize&&jEe(v,d,o,a.selectionColor)}o.isBindingEnabled&&o.suggestedBindings.filter(v=>v!=null).forEach(v=>{VEe(d,o,v,t)}),o.frameToHighlight&&$Ee(d,o,o.frameToHighlight,t),o.elementsToHighlight&&GEe(d,o,o.elementsToHighlight);const h=i.some(v=>Te(v));if(i.length===1&&((p=o.editingLinearElement)==null?void 0:p.elementId)===i[0].id&&VE(d,o,i[0],t),o.selectedLinearElement){const v=o.selectedLinearElement,w=i.find(I=>I.id===v.elementId);v.segmentMidPointHoveredCoords?FEe(d,o):(he(w)?v.hoverPointIndex===0||v.hoverPointIndex===w.points.length-1:v.hoverPointIndex>=0)&&BEe(d,o,t)}if(!o.multiElement&&!o.editingLinearElement){const v=ez(i,o),w=i.length===1&&Ae(i[0]);w&&((U=o.selectedLinearElement)==null?void 0:U.elementId)===i[0].id&&!i[0].locked&&VE(d,o,i[0],t);const I=a.selectionColor||hi.black;if(v){const M=_e(i),T=[];for(const x of t.values()){const C=[],R=a.remoteSelectedElementIds.get(x.id);if(w&&he(x)&&(x.startBinding||x.endBinding)||(M.has(x.id)&&!qF(o,x)&&C.push(I),R&&C.push(...R.map(N=>sy(N,o.collaborators.get(N))))),C.length){const[N,D,$,G,H,V]=Ne(x,t,!0);T.push({angle:x.angle,x1:N,y1:D,x2:$,y2:G,selectionColors:C,dashed:!!R,cx:H,cy:V,activeEmbeddable:((y=o.activeEmbeddable)==null?void 0:y.element)===x&&o.activeEmbeddable.state==="active",padding:x.id===o.croppingElementId||ft(x)?0:void 0})}}const _=x=>{const C=$t(t,x),[R,N,D,$]=xt(C);T.push({angle:0,x1:R,x2:D,y1:N,y2:$,selectionColors:[hi.black],dashed:!0,cx:R+(D-R)/2,cy:N+($-N)/2,activeEmbeddable:!1})};for(const x of Yu(o))_(x);o.editingGroupId&&_(o.editingGroupId),T.forEach(x=>lX(d,o,x))}if(d.save(),d.translate(o.scrollX,o.scrollY),i.length===1){d.fillStyle=hi.white;const M=JB(i[0],o.zoom,t,"mouse",c0(l));if(!o.viewModeEnabled&&v&&!ue(o.editingTextElement)&&!o.croppingElementId&&fk(d,a,o,M,i[0].angle),o.croppingElementId&&!o.isCropping){const T=t.get(o.croppingElementId);T&&ft(T)&&XEe(d,a,o,T,t)}}else if(i.length>1&&!o.isRotating){const M=ld*2/o.zoom.value;d.fillStyle=hi.white;const[T,_,x,C]=xt(i,t),R=d.getLineDash();d.setLineDash([2/o.zoom.value]);const N=d.lineWidth;d.lineWidth=1/o.zoom.value,d.strokeStyle=I,ey(d,T-M,_-M,x-T+M*2,C-_+M*2,(T+x)/2,(_+C)/2,0),d.lineWidth=N,d.setLineDash(R);const D=Cw([T,_,x,C,(T+x)/2,(_+C)/2],0,o.zoom,"mouse",h?{...c0(l),rotation:!0}:c0(l));i.some($=>!$.locked)&&fk(d,a,o,D,0)}d.restore()}(E=o.searchMatches)==null||E.matches.forEach(({id:v,focus:w,matchedLines:I})=>{const M=t.get(v);if(M){const[T,_,,,x,C]=Ne(M,t,!0);d.save(),o.theme===Me.LIGHT?w?d.fillStyle="rgba(255, 124, 0, 0.4)":d.fillStyle="rgba(255, 226, 0, 0.4)":w?d.fillStyle="rgba(229, 82, 0, 0.4)":d.fillStyle="rgba(99, 52, 0, 0.4)";const R=Te(M)?o.zoom.value:1;d.translate(o.scrollX,o.scrollY),d.translate(x,C),d.rotate(M.angle),I.forEach(N=>{(N.showOnCanvas||w)&&d.fillRect(T+N.offsetX/R-x,_+N.offsetY/R-C,N.width/R,N.height/R)}),d.restore()}}),kEe(d,o),d.restore(),R5e({context:d,renderConfig:a,appState:o,normalizedWidth:c,normalizedHeight:u});let m;return a.renderScrollbars&&(m=PEe(t,c,u,o),d.save(),d.fillStyle=OEe,d.strokeStyle="rgba(255,255,255,0.8)",[m.horizontal,m.vertical].forEach(v=>{v&&pG(d,v.x,v.y,v.width,v.height,nr/2)}),d.restore()),{scrollBars:m,atLeastOneVisibleElement:n.length>0,elementsMap:t}},uX=dg(e=>{var n;const t=cX(e);(n=e.callback)==null||n.call(e,t)},{trailing:!0}),YEe=(e,t)=>{if(t){uX(e);return}const n=cX(e);return e.callback(n),n};class hk{constructor(t){F(this,"scene");F(this,"getRenderableElements",(()=>{const t=({elementsMap:i,zoom:s,offsetLeft:r,offsetTop:o,scrollX:a,scrollY:l,height:c,width:u})=>{const d=[];for(const f of i.values())Hb(f,u,c,{zoom:s,offsetLeft:r,offsetTop:o,scrollX:a,scrollY:l},i)&&d.push(f);return d},n=({elements:i,editingTextElement:s,newElementId:r,pendingImageElementId:o})=>{const a=Yo(new Map);for(const l of i)ft(l)&&o===l.id||r!==l.id&&(!s||s.type!=="text"||l.id!==s.id)&&a.set(l.id,l);return a};return Mse(({zoom:i,offsetLeft:s,offsetTop:r,scrollX:o,scrollY:a,height:l,width:c,editingTextElement:u,newElementId:d,pendingImageElementId:f,sceneNonce:h})=>{const m=this.scene.getNonDeletedElements(),p=n({elements:m,editingTextElement:u,newElementId:d,pendingImageElementId:f}),U=t({elementsMap:p,zoom:i,offsetLeft:s,offsetTop:r,scrollX:o,scrollY:a,height:l,width:c});return{elementsMap:p,visibleElements:U}})})());this.scene=t}destroy(){uX.cancel(),q$.cancel(),this.getRenderableElements.clear()}}const WEe=5,KEe=(e,t,n)=>{const[i,s]=Ne(e,n),{x:r,y:o}=hr({sceneX:i+e.width,sceneY:s},t),a=r-t.offsetLeft+10,l=o-t.offsetTop;return{x:a,y:l}},gk=({children:e,element:t,elementsMap:n})=>{const i=pp();if(i.contextMenu||i.newElement||i.resizingElement||i.isRotating||i.openMenu||i.viewModeEnabled)return null;const{x:s,y:r}=KEe(t,i,n);return g("div",{className:"excalidraw-canvas-buttons",style:{top:`${r}px`,left:`${s}px`,padding:WEe},children:e})};function ZEe(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var qEe={};ZEe(qEe,"LaserPointer",()=>m6);function yn([e,t,n],[i,s,r]){return[e+i,t+s,n+r]}function L1([e,t,n],[i,s,r]){return[e-i,t-s,n-r]}function An([e,t,n],i){return[e*i,t*i,n*i]}function af([e,t,n]){return[e/Math.sqrt(e**2+t**2),t/Math.sqrt(e**2+t**2),n]}function Ri([e,t,n],i){return[Math.cos(i)*e-Math.sin(i)*t,Math.sin(i)*e+Math.cos(i)*t,n]}function QEe(e,t,n){return yn(e,An(L1(t,e),n))}function mk(e,t,n){return Math.atan2(n[1]-e[1],n[0]-e[0])-Math.atan2(t[1]-e[1],t[0]-e[0])}function pk(e){return Math.atan2(Math.sin(e),Math.cos(e))}function Uk([e,t]){return Math.sqrt(e**2+t**2)}function dh([e,t],[n,i]){return Math.sqrt((n-e)**2+(i-t)**2)}function JEe(e){if(e.length<2)return 0;let t=0;for(let n=1;n<=e.length-1;n++)t+=dh(e[n-1],e[n]);return t+=dh(e[e.length-2],e[e.length-1]),t}const e7e=(e,t,n)=>Math.max(t,Math.min(n,e));function t7e(e,t,n){const i=dh(t,n);if(i===0)return dh(e,t);const s=e7e(((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i**2,0,1),r=[t[0]+s*(n[0]-t[0]),t[1]+s*(n[1]-t[1]),e[2]];return dh(r,e)}function g6(e,t){if(t===0||e.length<=2)return e;const n=e[0],i=e[e.length-1],[s,r]=e.reduce(([o,a],l,c)=>{const u=t7e(l,n,i);return u>o?[u,c]:[o,a]},[0,-1]);if(s>=t){const o=e[r];return[...g6([n,...e.slice(1,r),o],t).slice(0,-1),o,...g6([o,...e.slice(r,-1),i],t).slice(1)]}else return[n,i]}const Hl=class Hl{constructor(t){this.originalPoints=[],this.stablePoints=[],this.tailPoints=[],this.isFresh=!0,this.options=Object.assign({},Hl.defaults,t)}get lastPoint(){return this.tailPoints[this.tailPoints.length-1]??this.stablePoints[this.stablePoints.length-1]}addPoint(t){const n=this.originalPoints[this.originalPoints.length-1];if(!(n&&n[0]===t[0]&&n[1]===t[1])){if(this.originalPoints.push(t),this.isFresh){this.isFresh=!1,this.stablePoints.push(t);return}this.options.streamline>0&&(t=QEe(this.lastPoint,t,1-this.options.streamline)),this.tailPoints.push(t),JEe(this.tailPoints)>Hl.constants.maxTailLength&&this.stabilizeTail()}}close(){this.stabilizeTail()}stabilizeTail(){if(this.options.simplify>0&&this.options.simplifyPhase=="tail")throw new Error("Not implemented yet");this.stablePoints.push(...this.tailPoints),this.tailPoints=[]}getSize(t,n,i,s,r){return(t??this.options.size)*this.options.sizeMapping({pressure:n,runningLength:r,currentIndex:i,totalLength:s})}getStrokeOutline(t){if(this.isFresh)return[];let n=[...this.stablePoints,...this.tailPoints];this.options.simplify>0&&this.options.simplifyPhase==="input"&&(n=g6(n,this.options.simplify));const i=n.length;if(i===0)return[];if(i===1){const T=n[0],_=this.getSize(t,T[2],0,i,0);if(_<.5)return[];const x=[];for(let C=0;C<=Math.PI*2;C+=Math.PI/16)x.push(yn(T,An(Ri([1,0,0],C),_)));return x.push(yn(T,An([1,0,0],this.getSize(t,T[2],0,i,0)))),x}if(i===2){const T=n[0],_=n[1],x=this.getSize(t,T[2],0,i,0),C=this.getSize(t,_[2],0,i,0);if(x<.5||C<.5)return[];const R=[],N=mk(T,[T[0],T[1]-100,T[2]],_);for(let D=N;D<=Math.PI+N;D+=Math.PI/16)R.push(yn(T,An(Ri([1,0,0],D),x)));for(let D=Math.PI+N;D<=Math.PI*2+N;D+=Math.PI/16)R.push(yn(_,An(Ri([1,0,0],D),C)));return R.push(R[0]),R}const s=[],r=[];let o=0,a=0,l=0,c=0;for(let T=1;T<i-1;T++){const _=n[T-1],x=n[T],C=n[T+1];let R=x[2];const N=dh(_,x);c+=N,o=a+(N-a)*.2;const D=this.getSize(t,R,T,i,c);if(D===0){l=T+1;continue}const $=af(L1(_,x)),G=af(L1(C,x)),H=Ri($,Math.PI/2),V=Ri($,-Math.PI/2),X=Ri(G,Math.PI/2),j=Ri(G,-Math.PI/2),q=yn(x,An(H,D)),fe=yn(x,An(V,D)),ie=yn(x,An(X,D)),Ue=yn(x,An(j,D)),Ve=yn(H,j),$e=yn(V,X),nt=yn(x,An(Uk(Ve)===0?$:af(Ve),D)),zt=yn(x,An(Uk($e)===0?G:af($e),D)),Mt=pk(mk(x,_,C)),qt=Hl.constants.cornerDetectionMaxAngle/180*Math.PI*Hl.constants.cornerDetectionVariance(o);if(Math.abs(Mt)<qt){const Ce=Math.abs(pk(Math.PI-Mt));if(Ce===0)continue;if(Mt<0){r.push(fe,zt);for(let Ge=0;Ge<=Ce;Ge+=Ce/4)s.push(yn(x,Ri(An(H,D),Ge)));for(let Ge=Ce;Ge>=0;Ge-=Ce/4)r.push(yn(x,Ri(An(H,D),Ge)));r.push(zt,ie)}else{s.push(q,nt);for(let Ge=0;Ge<=Ce;Ge+=Ce/4)r.push(yn(x,Ri(An(H,-D),-Ge)));for(let Ge=Ce;Ge>=0;Ge-=Ce/4)s.push(yn(x,Ri(An(H,-D),-Ge)));s.push(nt,Ue)}}else s.push(nt),r.push(zt);a=o}if(l>=i-2)if(this.options.keepHead){const T=n[i-1],_=[];for(let x=0;x<=Math.PI*2;x+=Math.PI/16)_.push(yn(T,An(Ri([1,0,0],x),this.options.size)));return _.push(yn(T,An([1,0,0],this.options.size))),_}else return[];const u=n[l],d=n[l+1],f=n[i-2],h=n[i-1],m=af(L1(d,u)),p=af(L1(f,h)),U=Ri(m,-Math.PI/2),y=Ri(p,Math.PI/2),E=this.getSize(t,u[2],0,i,0),v=[],w=this.options.keepHead?this.options.size:this.getSize(t,f[2],i-2,i,c),I=[];if(E>1){for(let T=0;T<=Math.PI;T+=Math.PI/16)v.unshift(yn(u,Ri(An(U,E),-T)));v.unshift(yn(u,An(U,-E)))}else v.push(u);for(let T=0;T<=Math.PI*3;T+=Math.PI/16)I.push(yn(h,Ri(An(y,-w),-T)));const M=[...v,...s,...I.reverse(),...r.reverse()];return v.length>0&&M.push(v[0]),this.options.simplify>0&&this.options.simplifyPhase==="output"?g6(M,this.options.simplify):M}};Hl.defaults={size:2,streamline:.45,simplify:.1,simplifyPhase:"output",keepHead:!1,sizeMapping:()=>1},Hl.constants={cornerDetectionMaxAngle:75,cornerDetectionVariance:t=>t>35?.5:1,maxTailLength:50};let m6=Hl;class p6{constructor(t,n,i){F(this,"currentTrail");F(this,"pastTrails",[]);F(this,"container");F(this,"trailElement");F(this,"trailAnimation");this.animationFrameHandler=t,this.app=n,this.options=i,this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.trailElement=document.createElementNS(st,"path"),this.options.animateTrail&&(this.trailAnimation=document.createElementNS(st,"animate"),this.trailAnimation.setAttribute("attributeName","stroke-dashoffset"),this.trailElement.setAttribute("stroke-dasharray","7 7"),this.trailElement.setAttribute("stroke-dashoffset","10"),this.trailAnimation.setAttribute("from","0"),this.trailAnimation.setAttribute("to","-14"),this.trailAnimation.setAttribute("dur","0.3s"),this.trailElement.appendChild(this.trailAnimation))}get hasCurrentTrail(){return!!this.currentTrail}hasLastPoint(t,n){if(this.currentTrail){const i=this.currentTrail.originalPoints.length;return this.currentTrail.originalPoints[i-1][0]===t&&this.currentTrail.originalPoints[i-1][1]===n}return!1}start(t){t&&(this.container=t),this.trailElement.parentNode!==this.container&&this.container&&this.container.appendChild(this.trailElement),this.animationFrameHandler.start(this)}stop(){var t;this.animationFrameHandler.stop(this),this.trailElement.parentNode===this.container&&((t=this.container)==null||t.removeChild(this.trailElement))}startPath(t,n){this.currentTrail=new m6(this.options),this.currentTrail.addPoint([t,n,performance.now()]),this.update()}addPointToPath(t,n){this.currentTrail&&(this.currentTrail.addPoint([t,n,performance.now()]),this.update())}endPath(){this.currentTrail&&(this.currentTrail.close(),this.currentTrail.options.keepHead=!1,this.pastTrails.push(this.currentTrail),this.currentTrail=void 0,this.update())}getCurrentTrail(){return this.currentTrail}clearTrails(){this.pastTrails=[],this.currentTrail=void 0,this.update()}update(){this.start(),this.trailAnimation&&(this.trailAnimation.setAttribute("begin","indefinite"),this.trailAnimation.setAttribute("repeatCount","indefinite"))}onFrame(){const t=[];for(const i of this.pastTrails)t.push(this.drawTrail(i,this.app.state));if(this.currentTrail){const i=this.drawTrail(this.currentTrail,this.app.state);t.push(i)}this.pastTrails=this.pastTrails.filter(i=>i.getStrokeOutline().length!==0),t.length===0&&this.stop();const n=t.join(" ").trim();this.trailElement.setAttribute("d",n),this.trailAnimation?(this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this)),this.trailElement.setAttribute("stroke",(this.options.stroke??(()=>"black"))(this))):this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this))}drawTrail(t,n){const i=t.getStrokeOutline(t.options.size/n.zoom.value).map(([r,o])=>{const a=hr({sceneX:r,sceneY:o},n);return[a.x,a.y]}),s=this.trailAnimation?i.slice(0,i.length/2):i;return Rse(s,!0)}}class n7e{constructor(t,n){F(this,"localTrail");F(this,"collabTrails",new Map);F(this,"container");this.animationFrameHandler=t,this.app=n,this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.localTrail=new p6(t,n,{...this.getTrailOptions(),fill:()=>Tie})}getTrailOptions(){return{simplify:0,streamline:.4,sizeMapping:t=>{const s=Math.max(0,1-(performance.now()-t.pressure)/1e3),r=(50-Math.min(50,t.totalLength-t.currentIndex))/50;return Math.min(Ja(r),Ja(s))}}}startPath(t,n){this.localTrail.startPath(t,n)}addPointToPath(t,n){this.localTrail.addPointToPath(t,n)}endPath(){this.localTrail.endPath()}start(t){this.container=t,this.animationFrameHandler.start(this),this.localTrail.start(t)}stop(){this.animationFrameHandler.stop(this),this.localTrail.stop()}onFrame(){this.updateCollabTrails()}updateCollabTrails(){if(!(!this.container||this.app.state.collaborators.size===0)){for(const[t,n]of this.app.state.collaborators.entries()){let i;this.collabTrails.has(t)?i=this.collabTrails.get(t):(i=new p6(this.animationFrameHandler,this.app,{...this.getTrailOptions(),fill:()=>{var s;return((s=n.pointer)==null?void 0:s.laserColor)||sy(t,n)}}),i.start(this.container),this.collabTrails.set(t,i)),n.pointer&&n.pointer.tool==="laser"&&(n.button==="down"&&!i.hasCurrentTrail&&i.startPath(n.pointer.x,n.pointer.y),n.button==="down"&&i.hasCurrentTrail&&!i.hasLastPoint(n.pointer.x,n.pointer.y)&&i.addPointToPath(n.pointer.x,n.pointer.y),n.button==="up"&&i.hasCurrentTrail&&(i.addPointToPath(n.pointer.x,n.pointer.y),i.endPath()))}for(const t of this.collabTrails.keys())this.app.state.collaborators.has(t)||(this.collabTrails.get(t).stop(),this.collabTrails.delete(t))}}}const on=e=>t=>{Ln.unstable_batchedUpdates(e,t)},$E=e=>dg(t=>{Ln.unstable_batchedUpdates(e,t)}),k_=(()=>{let e;try{const n=L.version.split(".");e=Number(n[0])>17}catch{e=!1}let t=!1;return()=>window.EXCALIDRAW_THROTTLE_RENDER===!0?e?!0:(t||(t=!0,console.warn("Excalidraw: render throttling is disabled on React versions < 18.")),!1):!1})(),i7e=(e,t,n,i,s,r)=>{const{zoom:o}=i,a=180*n/Math.PI;let l=e*(o.value-1)/2,c=t*(o.value-1)/2;return e>s&&o.value!==1&&(l=s*(o.value-1)/2),t>r&&o.value!==1&&(c=r*(o.value-1)/2),`translate(${l}px, ${c}px) scale(${o.value}) rotate(${a}deg)`},s7e=({id:e,onChange:t,onSubmit:n,getViewportCoords:i,element:s,canvas:r,excalidrawContainer:o,app:a,autoSelect:l=!0})=>{const c=(G,H)=>{if(!H.style.fontFamily||!H.style.fontSize)return!1;const V=H.style.fontFamily.replace(/"/g,"");return Zm({fontFamily:G.fontFamily})!==V||`${G.fontSize}px`!==H.style.fontSize},u=()=>{const G=a.state,H=a.scene.getElement(e);if(!H)return;const{textAlign:V,verticalAlign:X}=H,j=a.scene.getNonDeletedElementsMap();if(H&&ue(H)){let q=H.x,fe=H.y;const ie=$n(H,a.scene.getNonDeletedElementsMap());let Ue=H.width,Ve=H.height,$e=H.width,nt=H.height;if(ie&&H.containerId){if(xe(ie)){const Is=le.getBoundTextElementPosition(ie,H,j);q=Is.x,fe=Is.y}const Ar=c(H,d);let Mr;if(Ar?Mr=Mb(ie.id,ie.height):(Mr=Mh[ie.id],Mr||(Mr=Mb(ie.id,ie.height))),$e=Zo(ie,H),nt=sp(ie,H),!xe(ie)&&Ve>nt){const Is=fd(Ve,ie.type);a.scene.mutateElement(ie,{height:Is});return}else if(!xe(ie)&&ie.height>Mr.height&&Ve<nt){const Is=fd(Ve,ie.type);a.scene.mutateElement(ie,{height:Is})}else{const{y:Is}=U5(ie,H,j);fe=Is}}const[zt,Mt]=i(q,fe),qt=d.selectionStart,Ce=d.selectionEnd,Ge=d.value.length;if(qt===Ce&&Ce!==Ge){const Ar=Ge-Ce;d.selectionStart=d.value.length-Ar,d.selectionEnd=d.value.length-Ar}ie?Ue+=.5:($e=(G.width-8-zt)/G.zoom.value,Ue=Math.min(Ue,$e)),Ve*=1.05;const Qt=gt(H),as=(G.height-Mt)/G.zoom.value;Object.assign(d.style,{font:Qt,lineHeight:H.lineHeight,width:`${Ue}px`,height:`${Ve}px`,left:`${zt}px`,top:`${Mt}px`,transform:i7e(Ue,Ve,Loe(H,ie),G,$e,as),textAlign:V,verticalAlign:X,color:H.strokeColor,opacity:H.opacity/100,filter:"var(--theme-filter)",maxHeight:`${as}px`}),d.scrollTop=0,a.scene.mutateElement(H,{x:q,y:fe})}},d=document.createElement("textarea");d.dir="auto",d.tabIndex=0,d.dataset.type="wysiwyg",d.wrap="off",d.classList.add("excalidraw-wysiwyg");let f="pre",h="normal";(Xt(s)||!s.autoResize)&&(f="pre-wrap",h="break-word"),Object.assign(d.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",zIndex:"var(--zIndex-wysiwyg)",wordBreak:h,whiteSpace:f,overflowWrap:"break-word",boxSizing:"content-box"}),d.value=s.originalText,u(),t&&(d.onpaste=async G=>{const H=await fG(G,!0);if(!H.text)return;const V=Rh(H.text);if(!V)return;const X=$n(s,a.scene.getNonDeletedElementsMap()),j=gt({fontSize:a.state.currentItemFontSize,fontFamily:a.state.currentItemFontFamily});if(X){const q=Oe(X,a.scene.getNonDeletedElementsMap()),fe=qc(`${d.value}${V}`,j,Zo(X,q)),ie=nw(fe,j);d.style.width=`${ie}px`}},d.oninput=()=>{const G=Rh(d.value);if(d.value!==G){const H=d.selectionStart;d.value=G,d.selectionStart=H,d.selectionEnd=H}t(d.value)}),d.onkeydown=G=>{if(!G.shiftKey&&SM.keyTest(G))G.preventDefault(),a.actionManager.executeAction(SM),u();else if(!G.shiftKey&&IM.keyTest(G))G.preventDefault(),a.actionManager.executeAction(IM),u();else if(!G.shiftKey&&xM.keyTest(G))G.preventDefault(),a.actionManager.executeAction(xM),u();else if(vM.keyTest(G))a.actionManager.executeAction(vM);else if(wM.keyTest(G))a.actionManager.executeAction(wM);else if(G.key===z.ESCAPE)G.preventDefault(),I=!0,M();else if(c6.keyTest(G))G.preventDefault(),M(),a.actionManager.executeAction(c6);else if(G.key===z.ENTER&&G[z.CTRL_OR_CMD]){if(G.preventDefault(),G.isComposing||G.keyCode===229)return;I=!0,M()}else if(G.key===z.TAB||G[z.CTRL_OR_CMD]&&(G.code===et.BRACKET_LEFT||G.code===et.BRACKET_RIGHT)){if(G.preventDefault(),G.isComposing)return;G.shiftKey||G.code===et.BRACKET_LEFT?E():y(),d.dispatchEvent(new Event("input"))}};const m=4,p=" ".repeat(m),U=new RegExp(`^ {1,${m}}`),y=()=>{const{selectionStart:G,selectionEnd:H}=d,V=v();let X=d.value;V.forEach(j=>{const q=X.slice(0,j),fe=X.slice(j);X=`${q}${p}${fe}`}),d.value=X,d.selectionStart=G+m,d.selectionEnd=H+m*V.length},E=()=>{const{selectionStart:G,selectionEnd:H}=d,V=v(),X=[];let j=d.value;V.forEach(q=>{const fe=j.slice(q,q+m).match(U);if(fe){const ie=j.slice(0,q),Ue=j.slice(q+fe[0].length);j=`${ie}${Ue}`,X.push(q)}}),d.value=j,X.length&&(G>X[X.length-1]?d.selectionStart=Math.max(G-m,X[X.length-1]):d.selectionStart=G,d.selectionEnd=Math.max(d.selectionStart,H-m*X.length))},v=()=>{let{selectionStart:G,selectionEnd:H,value:V}=d;const X=V.slice(0,G).match(/[^\n]*$/)[0].length;return G=G-X,V.slice(G,H).split(`
`).reduce((q,fe,ie,Ue)=>q.concat(ie?q[ie-1]+Ue[ie-1].length+1:G),[]).reverse()},w=G=>{G.target instanceof HTMLCanvasElement&&(G.preventDefault(),G.stopPropagation())};let I=!1;const M=()=>{var V;if(D)return;D=!0,T();const G=a.scene.getElement(s.id);if(!G)return;const H=$n(G,a.scene.getNonDeletedElementsMap());if(H){if(d.value.trim()){const X=Ko(H);!X||X!==s.id?a.scene.mutateElement(H,{boundElements:(H.boundElements||[]).concat({type:"text",id:s.id})}):xe(H)&&Ma(H)}else a.scene.mutateElement(H,{boundElements:(V=H.boundElements)==null?void 0:V.filter(X=>!ue(X))});$i(G,H,a.scene)}n({viaKeyboard:I,nextOriginalText:d.value})},T=()=>{d.onblur=null,d.oninput=null,d.onkeydown=null,$&&$.disconnect(),window.removeEventListener("resize",u),window.removeEventListener("wheel",w,!0),window.removeEventListener("pointerdown",C),window.removeEventListener("pointerup",_),window.removeEventListener("blur",M),window.removeEventListener("beforeunload",M),R(),N(),d.remove()},_=G=>{window.removeEventListener("pointerup",_);const H=G==null?void 0:G.target,V=H instanceof HTMLElement&&H.classList.contains("properties-trigger");setTimeout(()=>{d.onblur=M,V||d.focus()})},x=()=>{d.onblur=null,window.addEventListener("pointerup",_),window.addEventListener("blur",M)},C=G=>{const H=G==null?void 0:G.target;if(G.button===Rl.WHEEL){H instanceof HTMLTextAreaElement&&(G.preventDefault(),a.handleCanvasPanUsingWheelOrSpaceDrag(G)),x();return}const V=H instanceof HTMLElement&&H.classList.contains("properties-trigger");(G.target instanceof HTMLElement||G.target instanceof SVGElement)&&G.target.closest(`.${Mc.SHAPE_ACTIONS_MENU}, .${Mc.ZOOM_ACTIONS}`)&&!Eu(G.target)||V?x():G.target instanceof HTMLCanvasElement&&requestAnimationFrame(()=>{M()})},R=a.scene.onUpdate(()=>{var H;u(),!!((H=document.activeElement)!=null&&H.closest(".properties-content"))||d.focus()}),N=a.onScrollChangeEmitter.on(()=>{u()});let D=!1;l&&d.select(),_();let $=null;return r&&"ResizeObserver"in window?($=new window.ResizeObserver(()=>{u()}),$.observe(r)):window.addEventListener("resize",u),d.onpointerdown=G=>G.stopPropagation(),requestAnimationFrame(()=>{window.addEventListener("pointerdown",C,{capture:!0})}),window.addEventListener("beforeunload",M),o==null||o.querySelector(".excalidraw-textEditorContainer").appendChild(d),M},r7e=e=>{const t=["flowchart","graph","sequenceDiagram","classDiagram","stateDiagram","stateDiagram-v2","erDiagram","journey","gantt","pie","quadrantChart","requirementDiagram","gitGraph","C4Context","mindmap","timeline","zenuml","sankey","xychart","block"];return new RegExp(`^(?:%%{.*?}%%[\\s\\n]*)?\\b(?:${t.map(i=>`\\s*${i}(-beta)?`).join("|")})\\b`).test(e.trim())};function GE(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function o7e(e,t,n){const i=GE(t,n);if(i===0)return GE(e,t);let s=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i;return s=Math.max(0,Math.min(1,s)),GE(e,a7e(t,n,s))}function a7e(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function l7e(e,t){return H4(e,0,e.length,t)}function H4(e,t,n,i,s){const r=s||[],o=e[t],a=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=o7e(e[u],o,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>i?(H4(e,t,c+1,i,r),H4(e,c,n,i,r)):(r.length||r.push(o),r.push(a)),r}const c7e=e=>{const{lassoPath:t,elements:n,elementsSegments:i,intersectedElements:s,enclosedElements:r,simplifyDistance:o}=e;let a=t;o&&(a=l7e(t,o)),r.clear();for(const c of n)!s.has(c.id)&&!r.has(c.id)&&(u7e(a,c,i)?r.add(c.id):d7e(a,c,i)&&s.add(c.id));return{selectedElementIds:[...s,...r]}},u7e=(e,t,n)=>{const i=X0(e),s=n.get(t.id);return s?s.some(r=>r.some(o=>cse(o,i))):!1},d7e=(e,t,n)=>{const i=n.get(t.id);return i?e.reduce((r,o,a)=>(a===0||r.push(we(e[a-1],o)),r),[]).some(r=>i.some(o=>ud(r,o,1)!==null)):!1};class f7e extends p6{constructor(n,i){super(n,i,{animateTrail:!0,streamline:.4,sizeMapping:s=>{const a=Math.max(0,1-(performance.now()-s.pressure)/(1/0)),l=(5e3-Math.min(5e3,s.totalLength-s.currentIndex))/5e3;return Math.min(Ja(l),Ja(a))},fill:()=>"rgba(105,101,219,0.05)",stroke:()=>"rgba(105,101,219)"});F(this,"intersectedElements",new Set);F(this,"enclosedElements",new Set);F(this,"elementsSegments",null);F(this,"canvasTranslate",null);F(this,"keepPreviousSelection",!1);F(this,"selectElementsFromIds",n=>{this.app.setState(i=>{const s=n.reduce((l,c)=>(l[c]=!0,l),{});if(this.keepPreviousSelection)for(const l of Object.keys(i.selectedElementIds))s[l]=!0;for(const[l]of Object.entries(s)){const c=this.app.scene.getNonDeletedElement(l);if(c&&ue(c)){const u=$n(c,this.app.scene.getNonDeletedElementsMap());u&&(s[u.id]=!0,delete s[c.id])}}for(const[l]of Object.entries(s)){const c=this.app.scene.getNonDeletedElement(l);if(c&&Te(c)){const u=xr(this.app.scene.getNonDeletedElementsMap(),c.id);for(const d of u)delete s[d.id]}}const r=Li({editingGroupId:i.editingGroupId,selectedElementIds:s},this.app.scene.getNonDeletedElements(),i,this.app),o=[...Object.keys(r.selectedElementIds)],a=[...Object.keys(r.selectedGroupIds)];return{selectedElementIds:r.selectedElementIds,selectedGroupIds:r.selectedGroupIds,selectedLinearElement:o.length===1&&!a.length&&Ae(this.app.scene.getNonDeletedElement(o[0]))?new le(this.app.scene.getNonDeletedElement(o[0]),this.app.scene.getNonDeletedElementsMap()):null}})});F(this,"addPointToPath",(n,i,s=!1)=>{super.addPointToPath(n,i),this.keepPreviousSelection=s,this.updateSelection()});F(this,"updateSelection",()=>{var s,r;const n=(r=(s=super.getCurrentTrail())==null?void 0:s.originalPoints)==null?void 0:r.map(o=>S(o[0],o[1])),i={scrollX:this.app.state.scrollX,scrollY:this.app.state.scrollY,zoom:this.app.state.zoom.value};if(!this.elementsSegments||!Ji(i,this.canvasTranslate??{})){this.canvasTranslate=i,this.elementsSegments=new Map;const o=_e(this.app.visibleElements);for(const a of this.app.visibleElements){const l=Bb(a,o);this.elementsSegments.set(a.id,l)}}if(n){const{selectedElementIds:o}=c7e({lassoPath:n,elements:this.app.visibleElements,elementsSegments:this.elementsSegments,intersectedElements:this.intersectedElements,enclosedElements:this.enclosedElements,simplifyDistance:5/this.app.state.zoom.value});this.selectElementsFromIds(o)}})}startPath(n,i,s=!1){this.endPath(),super.startPath(n,i),this.intersectedElements.clear(),this.enclosedElements.clear(),this.keepPreviousSelection=s,this.keepPreviousSelection||this.app.setState({selectedElementIds:{},selectedGroupIds:{},selectedLinearElement:null})}endPath(){super.endPath(),super.clearTrails(),this.intersectedElements.clear(),this.enclosedElements.clear(),this.elementsSegments=null}}const h7e=2;class g7e extends p6{constructor(n,i){super(n,i,{streamline:.2,size:5,keepHead:!0,sizeMapping:s=>{const a=Math.max(0,1-(performance.now()-s.pressure)/200),l=(10-Math.min(10,s.totalLength-s.currentIndex))/10;return Math.min(Ja(l),Ja(a))},fill:()=>i.state.theme===Me.LIGHT?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.2)"});F(this,"elementsToErase",new Set);F(this,"groupsToErase",new Set);F(this,"segmentsCache",new Map);F(this,"geometricShapesCache",new Map)}startPath(n,i){this.endPath(),super.startPath(n,i),this.elementsToErase.clear()}addPointToPath(n,i,s=!1){return super.addPointToPath(n,i),this.updateElementsToBeErased(s)}updateElementsToBeErased(n){var a,l;let i=((l=(a=super.getCurrentTrail())==null?void 0:a.originalPoints)==null?void 0:l.map(c=>S(c[0],c[1])))||[];i=i==null?void 0:i.slice(i.length-h7e);const s=this.app.visibleElements.filter(c=>!c.locked),r=_e(s),o=i.reduce((c,u,d)=>(d===0||c.push(we(i[d-1],u)),c),[]);if(o.length===0)return[];for(const c of s)if(n&&this.elementsToErase.has(c.id)){if(bk(o,c,this.segmentsCache,this.geometricShapesCache,r,this.app)){const d=c.groupIds.at(-1);if(this.groupsToErase.has(d)){const f=$t(this.app.scene.getNonDeletedElementsMap(),d);for(const h of f)this.elementsToErase.delete(h.id);this.groupsToErase.delete(d)}if(Xt(c)&&this.elementsToErase.delete(c.containerId),ns(c)){const f=Ko(c);f&&this.elementsToErase.delete(f)}this.elementsToErase.delete(c.id)}}else if(!n&&!this.elementsToErase.has(c.id)&&bk(o,c,this.segmentsCache,this.geometricShapesCache,r,this.app)){const d=c.groupIds.at(-1);if(!this.groupsToErase.has(d)){const f=$t(this.app.scene.getNonDeletedElementsMap(),d);for(const h of f)this.elementsToErase.add(h.id);this.groupsToErase.add(d)}if(ns(c)){const f=Ko(c);f&&this.elementsToErase.add(f)}Xt(c)&&this.elementsToErase.add(c.containerId),this.elementsToErase.add(c.id)}return Array.from(this.elementsToErase)}endPath(){super.endPath(),super.clearTrails(),this.elementsToErase.clear(),this.groupsToErase.clear(),this.segmentsCache.clear()}}const bk=(e,t,n,i,s,r)=>{let o=i.get(t.id);o||(o=Gr(t,s),i.set(t.id,o));const a=e[e.length-1][1];if(Ab(t)&&q0(a,o))return!0;let l=n.get(t.id);return l||(l=Bb(t,s),n.set(t.id,l)),e.some(c=>l==null?void 0:l.some(u=>ud(c,u,r.getElementHitThreshold())!==null))},m7e=()=>P("div",{"data-testid":"brave-measure-text-error",children:[g("p",{children:g(Us,{i18nKey:"errors.brave_measure_text_error.line1",bold:e=>g("span",{style:{fontWeight:600},children:e})})}),g("p",{children:g(Us,{i18nKey:"errors.brave_measure_text_error.line2",bold:e=>g("span",{style:{fontWeight:600},children:e})})}),g("p",{children:g(Us,{i18nKey:"errors.brave_measure_text_error.line3",link:e=>g("a",{href:"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",children:e})})}),g("p",{children:g(Us,{i18nKey:"errors.brave_measure_text_error.line4",issueLink:e=>g("a",{href:"https://github.com/excalidraw/excalidraw/issues/new",children:e}),discordLink:e=>P("a",{href:"https://discord.gg/UexuTaE",children:[e,"."]})})})]}),p7e=({children:e,left:t,top:n,onCloseRequest:i,fitInViewport:s=!1,offsetLeft:r=0,offsetTop:o=0,viewportWidth:a=window.innerWidth,viewportHeight:l=window.innerHeight})=>{const c=L.useRef(null);L.useEffect(()=>{const d=c.current;if(!d)return;d.contains(document.activeElement)||d.focus();const f=h=>{var m,p,U;if(h.key===z.TAB){const y=M3(d),{activeElement:E}=document,v=y.findIndex(w=>w===E);E===d?(h.shiftKey?(m=y[y.length-1])==null||m.focus():y[0].focus(),h.preventDefault(),h.stopImmediatePropagation()):v===0&&h.shiftKey?((p=y[y.length-1])==null||p.focus(),h.preventDefault(),h.stopImmediatePropagation()):v===y.length-1&&!h.shiftKey&&((U=y[0])==null||U.focus(),h.preventDefault(),h.stopImmediatePropagation())}};return d.addEventListener("keydown",f),()=>d.removeEventListener("keydown",f)},[]);const u=L.useRef(null);return L.useLayoutEffect(()=>{var d,f;if(s&&c.current&&n!=null&&t!=null){const h=c.current,{width:m,height:p}=h.getBoundingClientRect();if(((d=u.current)==null?void 0:d.top)===n&&((f=u.current)==null?void 0:f.left)===t)return;u.current={top:n,left:t},m>=a?(h.style.width=`${a}px`,h.style.left="0px",h.style.overflowX="scroll"):t+m-r>a?h.style.left=`${a-m-10}px`:h.style.left=`${t}px`,p>=l?(h.style.height=`${l-20}px`,h.style.top="10px",h.style.overflowY="scroll"):n+p-o>l?h.style.top=`${l-p}px`:h.style.top=`${n}px`}},[n,t,s,a,l,r,o]),L.useEffect(()=>{if(i){const d=f=>{var h;(h=c.current)!=null&&h.contains(f.target)||Ln.unstable_batchedUpdates(()=>i(f))};return document.addEventListener("pointerdown",d,!1),()=>document.removeEventListener("pointerdown",d,!1)}},[i]),g("div",{className:"popover",ref:c,tabIndex:-1,children:e})},Kn="separator",U7e=ae.memo(({actionManager:e,items:t,top:n,left:i,onClose:s})=>{const r=pp(),o=fy(),a=t.reduce((l,c)=>(c&&(c===Kn||!c.predicate||c.predicate(o,r,e.app.props,e.app))&&l.push(c),l),[]);return g(p7e,{onCloseRequest:()=>{s()},top:n,left:i,fitInViewport:!0,offsetLeft:r.offsetLeft,offsetTop:r.offsetTop,viewportWidth:r.width,viewportHeight:r.height,children:g("ul",{className:"context-menu",onContextMenu:l=>l.preventDefault(),children:a.map((l,c)=>{var f;if(l===Kn)return!a[c-1]||a[c-1]===Kn?null:g("hr",{className:"context-menu-item-separator"},c);const u=l.name;let d="";return l.label&&(typeof l.label=="function"?d=k(l.label(o,r,e.app)):d=k(l.label)),g("li",{"data-testid":u,onClick:()=>{s(()=>{e.executeAction(l,"contextMenu")})},children:P("button",{type:"button",className:pe("context-menu-item",{dangerous:u==="deleteSelectedElements",checkmark:(f=l.checked)==null?void 0:f.call(l,r)}),children:[g("div",{className:"context-menu-item__label",children:d}),g("kbd",{className:"context-menu-item__shortcut",children:u?Vi(u):""})]})},c)})})})}),b7e=({height:e,width:t,userToFollow:n,onDisconnect:i})=>g("div",{className:"follow-mode",style:{width:t,height:e},children:P("div",{className:"follow-mode__badge",children:[P("div",{className:"follow-mode__badge__label",children:["Following"," ",g("span",{className:"follow-mode__badge__username",title:n.username,children:n.username})]}),g("button",{type:"button",onClick:i,className:"follow-mode__disconnect-btn",children:Fd})]})}),dX=({delay:e,theme:t})=>{const[n,i]=L.useState(!!e);return L.useEffect(()=>{if(!e)return;const s=setTimeout(()=>{i(!1)},e);return()=>clearTimeout(s)},[e]),n?null:P("div",{className:pe("LoadingMessage",{"LoadingMessage--dark":t===Me.DARK}),children:[g("div",{children:g(sl,{})}),g("div",{className:"LoadingMessage-text",children:k("labels.loadingScene")})]})},y7e="medium",yk={CHECKED:Nw,UNCHECKED:x5},fX=e=>P("label",{className:pe("ToolIcon ToolIcon__lock",`ToolIcon_size_${y7e}`,{"is-mobile":e.isMobile}),title:`${e.title} — Q`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-lock"}),g("div",{className:"ToolIcon__icon",children:e.checked?yk.CHECKED:yk.UNCHECKED})]}),hX=({children:e,side:t,className:n})=>g("div",{className:pe("FixedSideContainer",`FixedSideContainer_side_${t}`,n),children:e}),gX=e=>g(Ye,{className:pe("Shape",{fillable:!1}),type:"radio",icon:wH,name:"editor-current-shape",checked:e.checked,title:`${e.title} — H`,keyBindingLabel:e.isMobile?void 0:z.H.toLocaleUpperCase(),"aria-label":`${e.title} — H`,"aria-keyshortcuts":z.H,"data-testid":"toolbar-hand",onChange:()=>{var t;return(t=e.onChange)==null?void 0:t.call(e)}}),E7e=({appState:e,isMobile:t,device:n,app:i})=>{var u,d;const{activeTool:s,isResizing:r,isRotating:o,lastPointerDownWith:a}=e,l=e.multiElement!==null;if(((u=e.openSidebar)==null?void 0:u.name)===yr.name&&e.openSidebar.tab===Gu&&((d=e.searchMatches)!=null&&d.matches.length))return k("hints.dismissSearch");if(e.openSidebar&&!n.editor.canFitSidebar)return null;if(So(e))return k("hints.eraserRevert");if(s.type==="arrow"||s.type==="line")return l?k("hints.linearElementMulti"):s.type==="arrow"?k("hints.arrowTool",{arrowShortcut:Q("A")}):k("hints.linearElement");if(s.type==="freedraw")return k("hints.freeDraw");if(s.type==="text")return k("hints.text");if(s.type==="embeddable")return k("hints.embeddable");if(e.activeTool.type==="image"&&e.pendingImageElementId)return k("hints.placeImage");const c=i.scene.getSelectedElements(e);if(r&&a==="mouse"&&c.length===1){const f=c[0];return Ae(f)&&f.points.length===2?k("hints.lockAngle"):ft(f)?k("hints.resizeImage"):k("hints.resize")}if(o&&a==="mouse")return k("hints.rotate");if(c.length===1&&ue(c[0]))return k("hints.text_selected");if(e.editingTextElement)return k("hints.text_editing");if(e.croppingElementId)return k("hints.leaveCropEditor");if(c.length===1&&ft(c[0]))return k("hints.enterCropEditor");if(s.type==="selection"){if(e.selectionElement&&!c.length&&!e.editingTextElement&&!e.editingLinearElement)return[k("hints.deepBoxSelect")];if(bm(i)&&e.selectedElementsAreBeingDragged)return k("hints.disableSnapping");if(!c.length&&!t)return[k("hints.canvasPanning")];if(c.length===1){if(Ae(c[0]))return e.editingLinearElement?e.editingLinearElement.selectedPointsIndices?k("hints.lineEditor_pointSelected"):k("hints.lineEditor_nothingSelected"):k("hints.lineEditor_info");if(!e.newElement&&!e.selectedElementsAreBeingDragged&&ju(c[0]))return m5(c[0])?Qle(c[0],i.scene.getNonDeletedElementsMap())?[k("hints.bindTextToElement"),k("hints.createFlowchart")]:[k("hints.bindTextToElement"),k("hints.createFlowchart")]:k("hints.bindTextToElement")}}return null},mX=({appState:e,isMobile:t,device:n,app:i})=>{const s=E7e({appState:e,isMobile:t,device:n,app:i});if(!s)return null;const r=Array.isArray(s)?s.map(o=>Q(o).replace(/\. ?$/,"")).join(". "):Q(s);return g("div",{className:"HintViewer",children:g("span",{children:r})})},v7e="medium",pX=e=>e.penDetected?P("label",{className:pe("ToolIcon ToolIcon__penMode",`ToolIcon_size_${v7e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),g("div",{className:"ToolIcon__icon",children:lue})]}):null,Em=({heading:e,children:t,...n})=>{const{id:i}=oa(),s=g("h2",{className:"visually-hidden",id:`${i}-${e}-title`,children:k(`headings.${e}`)});return g("section",{...n,"aria-labelledby":`${i}-${e}-title`,children:typeof t=="function"?t(s):P(ge,{children:[s,t]})})},w7e=({appState:e,elements:t,actionManager:n,setAppState:i,onLockToggle:s,onHandToolToggle:r,onPenModeToggle:o,renderTopRightUI:a,renderCustomStats:l,renderSidebars:c,device:u,renderWelcomeScreen:d,UIOptions:f,app:h})=>{var v,w;const{WelcomeScreenCenterTunnel:m,MainMenuTunnel:p,DefaultSidebarTriggerTunnel:U}=os(),y=()=>P(hX,{side:"top",className:"App-top-bar",children:[d&&g(m.Out,{}),g(Em,{heading:"shapes",children:I=>{var M;return g(mr.Col,{gap:4,align:"center",children:P(mr.Row,{gap:1,className:"App-toolbar-container",children:[P(eo,{padding:1,className:"App-toolbar App-toolbar--mobile",children:[I,g(mr.Row,{gap:1,children:g(JG,{appState:e,activeTool:e.activeTool,UIOptions:f,app:h})})]}),a&&a(!0,e),P("div",{className:"mobile-misc-tools-container",children:[!e.viewModeEnabled&&((M=e.openDialog)==null?void 0:M.name)!=="elementLinkSelector"&&g(U.Out,{}),g(pX,{checked:e.penMode,onChange:()=>o(null),title:k("toolBar.penMode"),isMobile:!0,penDetected:e.penDetected}),g(fX,{checked:e.activeTool.locked,onChange:s,title:k("toolBar.lock"),isMobile:!0}),g(gX,{checked:Hh(e),onChange:()=>r(),title:k("toolBar.hand"),isMobile:!0})]})]})})}}),g(mX,{appState:e,isMobile:!0,device:u,app:h})]}),E=()=>{var I;return e.viewModeEnabled||((I=e.openDialog)==null?void 0:I.name)==="elementLinkSelector"?g("div",{className:"App-toolbar-content",children:g(p.Out,{})}):P("div",{className:"App-toolbar-content",children:[g(p.Out,{}),n.renderAction("toggleEditMenu"),n.renderAction(e.multiElement?"finalize":"duplicateSelection"),n.renderAction("deleteSelectedElements"),P("div",{children:[n.renderAction("undo"),n.renderAction("redo")]})]})};return P(ge,{children:[c(),!e.viewModeEnabled&&((v=e.openDialog)==null?void 0:v.name)!=="elementLinkSelector"&&y(),g("div",{className:"App-bottom-bar",style:{marginBottom:nr+Io*2,marginLeft:nr+Io*2,marginRight:nr+Io*2},children:P(eo,{padding:0,children:[e.openMenu==="shape"&&!e.viewModeEnabled&&((w=e.openDialog)==null?void 0:w.name)!=="elementLinkSelector"&&Aw(e,t)?g(Em,{className:"App-mobile-menu",heading:"selectedShapeActions",children:g(QG,{appState:e,elementsMap:h.scene.getNonDeletedElementsMap(),renderAction:n.renderAction,app:h})}):null,P("footer",{className:"App-toolbar",children:[E(),e.scrolledOutside&&!e.openMenu&&!e.openSidebar&&g("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{i(I=>({...em(t,I)}))},children:k("buttons.scrollBackToContent")})]})]})})]})},Ek=e=>{const t=L.useRef(null),[n,i]=L.useState(null);return L.useLayoutEffect(()=>{if(!e.spreadsheet)return;const s=l5e(e.chartType,e.spreadsheet,0,0);i(s);let r;const o=t.current;return(async()=>{var a;r=await y_(s,{exportBackground:!1,viewBackgroundColor:hi.white},null,{skipInliningFonts:!0}),(a=r.querySelector(".style-fonts"))==null||a.remove(),o.replaceChildren(),o.appendChild(r),e.selected&&o.parentNode.focus()})(),()=>{o.replaceChildren()}},[e.spreadsheet,e.chartType,e.selected]),g("button",{type:"button",className:"ChartPreview",onClick:()=>{n&&e.onClick(e.chartType,n)},children:g("div",{ref:t})})},_7e=({setAppState:e,appState:t,onClose:n})=>{const{onInsertElements:i}=mo(),s=ae.useCallback(()=>{n&&n()},[n]),r=(o,a)=>{i(a),at("paste","chart",o),e({currentChartType:o,pasteDialog:{shown:!1,data:null}})};return g(Ws,{size:"small",onCloseRequest:s,title:k("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1,children:P("div",{className:"container",children:[g(Ek,{chartType:"bar",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="bar",onClick:r}),g(Ek,{chartType:"line",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="line",onClick:r})]})})},T7e=4,S7e=8,I7e=({shouldWrap:e,children:t,username:n})=>e?g(ll,{label:n||"Unknown user",children:t}):g(ge,{children:t}),XE=({actionManager:e,collaborator:t,socketId:n,withName:i=!1,shouldWrapWithTooltip:s=!1,isBeingFollowed:r})=>{const o={socketId:n,collaborator:t,withName:i,isBeingFollowed:r},a=e.renderAction("goToCollaborator",o);return g(I7e,{username:t.username,shouldWrap:s,children:a},n)},x7e=["avatarUrl","id","socketId","username","isInCall","isSpeaking","isMuted"],UX=ae.memo(({className:e,mobile:t,collaborators:n,userToFollow:i})=>{const s=Ss(),r=new Map;n.forEach((p,U)=>{const y=p.id||U;r.set(y,{...p,socketId:U})});const o=Array.from(r.values()).filter(p=>{var U;return(U=p.username)==null?void 0:U.trim()}),[a,l]=ae.useState(""),c=o.filter(p=>{var U;return(U=p.username)==null?void 0:U.toLowerCase().includes(a)}),u=ae.useRef(null);L.useLayoutEffect(()=>{if(u.current){const p=y=>{const E=Math.max(1,Math.min(8,Math.floor(y/38)));f(E)};if(p(u.current.clientWidth),!w3)return;const U=new ResizeObserver(y=>{for(const E of y){const{width:v}=E.contentRect;p(v)}});return U.observe(u.current),()=>{U.disconnect()}}},[]);const[d,f]=ae.useState(T7e),m=o.slice(0,d-1).map(p=>XE({actionManager:s,collaborator:p,socketId:p.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:p.socketId===i}));return t?g("div",{className:pe("UserList UserList_mobile",e),children:o.map(p=>XE({actionManager:s,collaborator:p,socketId:p.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:p.socketId===i}))}):g("div",{className:"UserList__wrapper",ref:u,children:P("div",{className:pe("UserList",e),style:{"--max-avatars":d},children:[m,o.length>d-1&&P(P5,{children:[P(F5,{className:"UserList__more",children:["+",o.length-d+1]}),g(n_,{style:{zIndex:2,width:"15rem",textAlign:"left"},align:"end",sideOffset:10,children:P(eo,{padding:2,children:[o.length>=S7e&&g(PV,{placeholder:k("quickSearch.placeholder"),onChange:l}),g(FV,{className:"dropdown-menu UserList__collaborators",placeholder:k("userList.empty"),children:c.length>0?[g("div",{className:"hint",children:k("userList.hint.text")}),c.map(p=>XE({actionManager:s,collaborator:p,socketId:p.socketId,withName:!0,isBeingFollowed:p.socketId===i}))]:[]}),g(RV,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})]})]})})},(e,t)=>{if(e.collaborators.size!==t.collaborators.size||e.mobile!==t.mobile||e.className!==t.className||e.userToFollow!==t.userToFollow)return!1;const n=t.collaborators.keys();for(const[i,s]of e.collaborators){const r=t.collaborators.get(i);if(!r||i!==n.next().value||!Ji(s,r,x7e))return!1}return!0}),C7e=e=>g("button",{className:"help-icon",onClick:e.onClick,type:"button",title:`${k("helpDialog.title")} — ?`,"aria-label":k("helpDialog.title"),children:Pw}),bX=({appState:e,actionManager:t,showExitZenModeBtn:n,renderWelcomeScreen:i})=>{const{FooterCenterTunnel:s,WelcomeScreenHelpHintTunnel:r}=os(),o=si(),a=!e.viewModeEnabled&&e.multiElement&&o.isTouchScreen;return P("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer App-menu App-menu_bottom",children:[g("div",{className:pe("layer-ui__wrapper__footer-left zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled}),children:g(mr.Col,{gap:2,children:P(Em,{heading:"canvasActions",children:[g(Q8e,{renderAction:t.renderAction,zoom:e.zoom}),!e.viewModeEnabled&&g(J8e,{renderAction:t.renderAction,className:pe("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":e.zenModeEnabled})}),a&&g(tEe,{renderAction:t.renderAction,className:pe("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled})})]})})}),g(s.Out,{}),g("div",{className:pe("layer-ui__wrapper__footer-right zen-mode-transition",{"transition-right":e.zenModeEnabled}),children:P("div",{style:{position:"relative"},children:[i&&g(r.Out,{}),g(C7e,{onClick:()=>t.executeAction(I_)})]})}),g(eEe,{actionManager:t,showExitZenModeBtn:n})]})};bX.displayName="Footer";const yX=ae.createContext({}),EX=({children:e,className:t})=>{const n=si(),i=L.useContext(yX),s=!!(n.editor.canFitSidebar&&i.shouldRenderDockButton);return P("div",{className:pe("sidebar__header",t),"data-testid":"sidebar-header",children:[e,P("div",{className:"sidebar__header__buttons",children:[s&&g(ll,{label:k("labels.sidebarLock"),children:g(Td,{onSelect:()=>{var r;return(r=i.onDock)==null?void 0:r.call(i,!i.docked)},selected:!!i.docked,className:"sidebar__dock","data-testid":"sidebar-dock","aria-label":k("labels.sidebarLock"),children:nue})}),g(Td,{"data-testid":"sidebar-close",className:"sidebar__close",onSelect:i.onCloseRequest,"aria-label":k("buttons.close"),children:Fd})]})]})};EX.displayName="SidebarHeader";function A7e(e){const t=e+"CollectionProvider",[n,i]=cp(t),[s,r]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:m,children:p}=h,U=ae.useRef(null),y=ae.useRef(new Map).current;return g(s,{scope:m,itemMap:y,collectionRef:U,children:p})};o.displayName=t;const a=e+"CollectionSlot",l=ae.forwardRef((h,m)=>{const{scope:p,children:U}=h,y=r(a,p),E=co(m,y.collectionRef);return g(tm,{ref:E,children:U})});l.displayName=a;const c=e+"CollectionItemSlot",u="data-radix-collection-item",d=ae.forwardRef((h,m)=>{const{scope:p,children:U,...y}=h,E=ae.useRef(null),v=co(m,E),w=r(c,p);return ae.useEffect(()=>(w.itemMap.set(E,{ref:E,...y}),()=>void w.itemMap.delete(E))),g(tm,{[u]:"",ref:v,children:U})});d.displayName=c;function f(h){const m=r(e+"CollectionConsumer",h);return ae.useCallback(()=>{const U=m.collectionRef.current;if(!U)return[];const y=Array.from(U.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((w,I)=>y.indexOf(w.ref.current)-y.indexOf(I.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,i]}var M7e=L.createContext(void 0);function vX(e){const t=L.useContext(M7e);return e||t||"ltr"}var jE="rovingFocusGroup.onEntryFocus",R7e={bubbles:!1,cancelable:!0},dy="RovingFocusGroup",[V4,wX,k7e]=A7e(dy),[D7e,_X]=cp(dy,[k7e]),[L7e,N7e]=D7e(dy),TX=L.forwardRef((e,t)=>g(V4.Provider,{scope:e.__scopeRovingFocusGroup,children:g(V4.Slot,{scope:e.__scopeRovingFocusGroup,children:g(O7e,{...e,ref:t})})}));TX.displayName=dy;var O7e=L.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:s=!1,dir:r,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,f=L.useRef(null),h=co(t,f),m=vX(r),[p=null,U]=Jw({prop:o,defaultProp:a,onChange:l}),[y,E]=L.useState(!1),v=rl(c),w=wX(n),I=L.useRef(!1),[M,T]=L.useState(0);return L.useEffect(()=>{const _=f.current;if(_)return _.addEventListener(jE,v),()=>_.removeEventListener(jE,v)},[v]),g(L7e,{scope:n,orientation:i,dir:m,loop:s,currentTabStopId:p,onItemFocus:L.useCallback(_=>U(_),[U]),onItemShiftTab:L.useCallback(()=>E(!0),[]),onFocusableItemAdd:L.useCallback(()=>T(_=>_+1),[]),onFocusableItemRemove:L.useCallback(()=>T(_=>_-1),[]),children:g(rs.div,{tabIndex:y||M===0?-1:0,"data-orientation":i,...d,ref:h,style:{outline:"none",...e.style},onMouseDown:Ii(e.onMouseDown,()=>{I.current=!0}),onFocus:Ii(e.onFocus,_=>{const x=!I.current;if(_.target===_.currentTarget&&x&&!y){const C=new CustomEvent(jE,R7e);if(_.currentTarget.dispatchEvent(C),!C.defaultPrevented){const R=w().filter(H=>H.focusable),N=R.find(H=>H.active),D=R.find(H=>H.id===p),G=[N,D,...R].filter(Boolean).map(H=>H.ref.current);xX(G,u)}}I.current=!1}),onBlur:Ii(e.onBlur,()=>E(!1))})})}),SX="RovingFocusGroupItem",IX=L.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:s=!1,tabStopId:r,...o}=e,a=$w(),l=r||a,c=N7e(SX,n),u=c.currentTabStopId===l,d=wX(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return L.useEffect(()=>{if(i)return f(),()=>h()},[i,f,h]),g(V4.ItemSlot,{scope:n,id:l,focusable:i,active:s,children:g(rs.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:t,onMouseDown:Ii(e.onMouseDown,m=>{i?c.onItemFocus(l):m.preventDefault()}),onFocus:Ii(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:Ii(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const p=B7e(m,c.orientation,c.dir);if(p!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let y=d().filter(E=>E.focusable).map(E=>E.ref.current);if(p==="last")y.reverse();else if(p==="prev"||p==="next"){p==="prev"&&y.reverse();const E=y.indexOf(m.currentTarget);y=c.loop?z7e(y,E+1):y.slice(E+1)}setTimeout(()=>xX(y))}})})})});IX.displayName=SX;var P7e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function F7e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function B7e(e,t,n){const i=F7e(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return P7e[i]}function xX(e,t=!1){const n=document.activeElement;for(const i of e)if(i===n||(i.focus({preventScroll:t}),document.activeElement!==n))return}function z7e(e,t){return e.map((n,i)=>e[(t+i)%e.length])}var H7e=TX,V7e=IX,D_="Tabs",[$7e,Dxe]=cp(D_,[_X]),CX=_X(),[G7e,L_]=$7e(D_),AX=L.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,onValueChange:s,defaultValue:r,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=vX(a),[d,f]=Jw({prop:i,onChange:s,defaultProp:r});return g(G7e,{scope:n,baseId:$w(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:g(rs.div,{dir:u,"data-orientation":o,...c,ref:t})})});AX.displayName=D_;var MX="TabsList",RX=L.forwardRef((e,t)=>{const{__scopeTabs:n,loop:i=!0,...s}=e,r=L_(MX,n),o=CX(n);return g(H7e,{asChild:!0,...o,orientation:r.orientation,dir:r.dir,loop:i,children:g(rs.div,{role:"tablist","aria-orientation":r.orientation,...s,ref:t})})});RX.displayName=MX;var kX="TabsTrigger",DX=L.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,disabled:s=!1,...r}=e,o=L_(kX,n),a=CX(n),l=OX(o.baseId,i),c=PX(o.baseId,i),u=i===o.value;return g(V7e,{asChild:!0,...a,focusable:!s,active:u,children:g(rs.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...r,ref:t,onMouseDown:Ii(e.onMouseDown,d=>{!s&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:Ii(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:Ii(e.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!s&&d&&o.onValueChange(i)})})})});DX.displayName=kX;var LX="TabsContent",NX=L.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,forceMount:s,children:r,...o}=e,a=L_(LX,n),l=OX(a.baseId,i),c=PX(a.baseId,i),u=i===a.value,d=L.useRef(u);return L.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),g(N5,{present:s||u,children:({present:f})=>g(rs.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&r})})});NX.displayName=LX;function OX(e,t){return`${e}-trigger-${t}`}function PX(e,t){return`${e}-content-${t}`}var FX=AX,BX=RX,zX=DX,HX=NX;const VX=({children:e,tab:t,onSelect:n,...i})=>g(zX,{value:t,asChild:!0,onSelect:n,children:g("button",{type:"button",className:"excalidraw-button sidebar-tab-trigger",...i,children:e})});VX.displayName="SidebarTabTrigger";const $X=({children:e,...t})=>g(BX,{className:"sidebar-triggers",...t,children:e});$X.displayName="SidebarTabTriggers";const GX=({name:e,tab:t,icon:n,title:i,children:s,onToggle:r,className:o,style:a})=>{var u;const l=Yn(),c=Ui();return P("label",{title:i,className:"sidebar-trigger__label-element",children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",onChange:d=>{var h;(h=document.querySelector(".layer-ui__wrapper"))==null||h.classList.remove("animate");const f=d.target.checked;l({openSidebar:f?{name:e,tab:t}:null}),r==null||r(f)},checked:((u=c.openSidebar)==null?void 0:u.name)===e,"aria-label":i,"aria-keyshortcuts":"0"}),P("div",{className:pe("sidebar-trigger",o),style:a,children:[n&&g("div",{children:n}),s&&g("div",{className:"sidebar-trigger__label",children:s})]})]})};GX.displayName="SidebarTrigger";const XX=({children:e,...t})=>{const n=Ui(),i=Yn();if(!n.openSidebar)return null;const{name:s}=n.openSidebar;return g(FX,{className:"sidebar-tabs-root",value:n.openSidebar.tab,onValueChange:r=>i(o=>({...o,openSidebar:{...o.openSidebar,name:s,tab:r}})),...t,children:e})};XX.displayName="SidebarTabs";const jX=({tab:e,children:t,...n})=>g(HX,{...n,value:e,"data-testid":e,children:t});jX.displayName="SidebarTab";const N_=Zt(!1),YX=L.forwardRef(({name:e,children:t,onDock:n,docked:i,className:s,...r},o)=>{n&&i==null&&console.warn("Sidebar: `docked` must be set when `onDock` is supplied for the sidebar to be user-dockable. To hide this message, either pass `docked` or remove `onDock`");const a=Yn(),l=I5(N_);L.useLayoutEffect(()=>(l(!!i),()=>{l(!1)}),[l,i]);const c=L.useRef({});c.current.onCloseRequest=()=>{a({openSidebar:null})},c.current.onDock=h=>n==null?void 0:n(h),c.current=i2(c.current,{docked:i,shouldRenderDockButton:!!n&&i!=null});const u=L.useRef(null);L.useImperativeHandle(o,()=>u.current);const d=si(),f=L.useCallback(()=>{document.querySelector(".Dialog")||a({openSidebar:null})},[a]);return i_(u,L.useCallback(h=>{h.target.closest(".sidebar-trigger")||(!i||!d.editor.canFitSidebar)&&f()},[f,i,d.editor.canFitSidebar])),L.useEffect(()=>{const h=m=>{m.key===z.ESCAPE&&(!i||!d.editor.canFitSidebar)&&f()};return document.addEventListener(ee.KEYDOWN,h),()=>{document.removeEventListener(ee.KEYDOWN,h)}},[f,i,d.editor.canFitSidebar]),g(eo,{...r,className:pe("sidebar",{"sidebar--docked":i},s),ref:u,children:g(yX.Provider,{value:c.current,children:t})})});YX.displayName="SidebarInner";const To=Object.assign(L.forwardRef((e,t)=>{var l;const n=Ui(),{onStateChange:i}=e,s=L.useRef(n.openSidebar);L.useEffect(()=>{var c,u,d,f,h;(!n.openSidebar&&((c=s==null?void 0:s.current)==null?void 0:c.name)===e.name||((u=n.openSidebar)==null?void 0:u.name)===e.name&&((d=s==null?void 0:s.current)==null?void 0:d.name)!==e.name||((f=s.current)==null?void 0:f.name)===e.name)&&n.openSidebar!==s.current&&(i==null||i(((h=n.openSidebar)==null?void 0:h.name)!==e.name?null:n.openSidebar)),s.current=n.openSidebar},[n.openSidebar,i,e.name]);const[r,o]=L.useState(!1);return L.useLayoutEffect(()=>(o(!0),()=>o(!1)),[]),r&&((l=n.openSidebar)==null?void 0:l.name)===e.name?L.createElement(YX,{...e,ref:t,key:e.name}):null}),{Header:EX,TabTriggers:$X,TabTrigger:VX,Tabs:XX,Tab:jX,Trigger:GX});To.displayName="Sidebar";const gp=(e,t)=>{const n=Zt(0),i=s=>{const{tunnelsJotai:{useAtom:r}}=os(),[,o]=r(n),a=L.useRef({preferHost:!1,counter:0});return L.useLayoutEffect(()=>{const l=a.current;return o(c=>{const u=c+1;return l.counter=u,u}),()=>{o(c=>{const u=c-1;return l.counter=u,u||(l.preferHost=!1),u})}},[o]),s.__fallback||(a.current.preferHost=!0),!a.current.counter&&s.__fallback&&a.current.preferHost||a.current.counter>1&&s.__fallback?null:g(t,{...s})};return i.displayName=e,i},WX=Zt({active:!1});async function $4({title:e,description:t,actionLabel:n,color:i}){return new Promise(s=>{Ns.set(WX,{active:!0,onConfirm:()=>s(!0),onClose:()=>s(!1),onReject:()=>s(!1),title:e,description:t,actionLabel:n,color:i})})}const KX=function({onChange:e,value:t,choices:n,name:i}){return g("div",{className:"RadioGroup",children:n.map(s=>P("div",{className:pe("RadioGroup__choice",{active:s.value===t}),title:s.ariaLabel,children:[g("input",{name:i,type:"radio",checked:s.value===t,onChange:()=>e(s.value),"aria-label":s.ariaLabel}),s.label]},String(s.value)))})},ZX=({value:e,shortcut:t,onChange:n,choices:i,children:s,name:r})=>{const o=si();return P(ge,{children:[P("div",{className:"dropdown-menu-item-base dropdown-menu-item-bare",children:[g("label",{className:"dropdown-menu-item__text",htmlFor:r,children:s}),g(KX,{name:r,value:e,onChange:n,choices:i})]}),t&&!o.editor.isMobile&&g("div",{className:"dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned",children:t})]})};ZX.displayName="DropdownMenuItemContentRadio";const qX=()=>{const{t:e}=Un(),t=Ss(),n=fy();return t.isActionEnabled(R4)?g(Ts,{icon:Bw,onSelect:async()=>{(!n.length||await $4({title:e("overwriteConfirm.modal.loadFromFile.title"),actionLabel:e("overwriteConfirm.modal.loadFromFile.button"),color:"warning",description:g(Us,{i18nKey:"overwriteConfirm.modal.loadFromFile.description",bold:s=>g("strong",{children:s}),br:()=>g("br",{})})}))&&t.executeAction(R4)},"data-testid":"load-button",shortcut:Vi("loadScene"),"aria-label":e("buttons.load"),children:e("buttons.load")}):null};qX.displayName="LoadScene";const QX=()=>{const{t:e}=Un(),t=Ss();return t.isActionEnabled(c6)?g(Ts,{shortcut:Vi("saveScene"),"data-testid":"save-button",onSelect:()=>t.executeAction(c6),icon:mue,"aria-label":`${e("buttons.save")}`,children:`${e("buttons.save")}`}):null};QX.displayName="SaveToActiveFile";const JX=()=>{const e=Yn(),{t}=Un();return g(Ts,{icon:pH,"data-testid":"image-export-button",onSelect:()=>e({openDialog:{name:"imageExport"}}),shortcut:Vi("imageExport"),"aria-label":t("buttons.exportImage"),children:t("buttons.exportImage")})};JX.displayName="SaveAsImage";const ej=e=>{const t=Yn(),{t:n}=Un();return g(Ts,{icon:g4,"data-testid":"command-palette-button",onSelect:()=>{at("command_palette","open","menu"),t({openDialog:{name:"commandPalette"}})},shortcut:Vi("commandPalette"),"aria-label":n("commandPalette.title"),className:e==null?void 0:e.className,children:n("commandPalette.title")})};ej.displayName="CommandPalette";const tj=e=>{const{t}=Un(),n=Ss();return g(Ts,{icon:md,"data-testid":"search-menu-button",onSelect:()=>{n.executeAction(tX)},shortcut:Vi("searchMenu"),"aria-label":t("search.title"),className:e==null?void 0:e.className,children:t("search.title")})};tj.displayName="SearchMenu";const nj=()=>{const{t:e}=Un(),t=Ss();return g(Ts,{"data-testid":"help-menu-item",icon:Pw,onSelect:()=>t.executeAction(I_),shortcut:"?","aria-label":e("helpDialog.title"),children:e("helpDialog.title")})};nj.displayName="Help";const ij=()=>{const{t:e}=Un(),t=I5(cy);return Ss().isActionEnabled(f0)?g(Ts,{icon:Oc,onSelect:()=>t("clearCanvas"),"data-testid":"clear-canvas-button","aria-label":e("buttons.clearReset"),children:e("buttons.clearReset")}):null};ij.displayName="ClearCanvas";const sj=e=>{const{t}=Un(),n=Ui(),i=Ss(),s=Vi("toggleTheme");return i.isActionEnabled(t6)?e!=null&&e.allowSystemTheme?g(ZX,{name:"theme",value:e.theme,onChange:r=>e.onSelect(r),choices:[{value:Me.LIGHT,label:u4,ariaLabel:`${t("buttons.lightMode")} - ${s}`},{value:Me.DARK,label:c4,ariaLabel:`${t("buttons.darkMode")} - ${s}`},{value:"system",label:Lde,ariaLabel:t("buttons.systemMode")}],children:t("labels.theme")}):g(Ts,{onSelect:r=>{if(r.preventDefault(),e!=null&&e.onSelect)e.onSelect(n.theme===Me.DARK?Me.LIGHT:Me.DARK);else return i.executeAction(t6)},icon:n.theme===Me.DARK?u4:c4,"data-testid":"toggle-dark-mode",shortcut:s,"aria-label":n.theme===Me.DARK?t("buttons.lightMode"):t("buttons.darkMode"),children:n.theme===Me.DARK?t("buttons.lightMode"):t("buttons.darkMode")}):null};sj.displayName="ToggleTheme";const rj=()=>{const{t:e}=Un(),t=Ui(),n=Ss(),i=mp();return t.viewModeEnabled||!i.UIOptions.canvasActions.changeViewBackgroundColor?null:P("div",{style:{marginTop:"0.5rem"},children:[g("div",{"data-testid":"canvas-background-label",style:{fontSize:".75rem",marginBottom:".5rem"},children:e("labels.canvasBackground")}),g("div",{style:{padding:"0 0.625rem"},children:n.renderAction("changeViewBackgroundColor")})]})};rj.displayName="ChangeCanvasBackground";const oj=()=>{const{t:e}=Un(),t=Yn();return g(Ts,{icon:A5,onSelect:()=>{t({openDialog:{name:"jsonExport"}})},"data-testid":"json-export-button","aria-label":e("buttons.export"),children:e("buttons.export")})};oj.displayName="Export";const aj=()=>{const{t:e}=Un();return P(ge,{children:[g(f6,{icon:Fw,href:"https://github.com/excalidraw/excalidraw","aria-label":"GitHub",children:"GitHub"}),g(f6,{icon:mH,href:"https://discord.gg/UexuTaE","aria-label":"Discord",children:e("labels.discordChat")})]})};aj.displayName="Socials";const lj=({onSelect:e,isCollaborating:t})=>{const{t:n}=Un();return g(Ts,{"data-testid":"collab-button",icon:Hw,className:pe({"active-collab":t}),onSelect:e,children:n("labels.liveCollaboration")})};lj.displayName="LiveCollaborationTrigger";const X7e=Object.freeze(Object.defineProperty({__proto__:null,ChangeCanvasBackground:rj,ClearCanvas:ij,CommandPalette:ej,Export:oj,Help:nj,LiveCollaborationTrigger:lj,LoadScene:qX,SaveAsImage:JX,SaveToActiveFile:QX,SearchMenu:tj,Socials:aj,ToggleTheme:sj},Symbol.toStringTag,{value:"Module"})),Tt=Object.assign(gp("MainMenu",({children:e,onSelect:t})=>{var a;const{MainMenuTunnel:n}=os(),i=si(),s=Ui(),r=Yn(),o=i.editor.isMobile?void 0:()=>r({openMenu:null});return g(n.In,{children:P(Qe,{open:s.openMenu==="canvas",children:[g(Qe.Trigger,{onToggle:()=>{r({openMenu:s.openMenu==="canvas"?null:"canvas"})},"data-testid":"main-menu-trigger",className:"main-menu-trigger",children:gH}),P(Qe.Content,{onClickOutside:o,onSelect:h5(t,()=>{r({openMenu:null})}),children:[e,i.editor.isMobile&&s.collaborators.size>0&&P("fieldset",{className:"UserList-Wrapper",children:[g("legend",{children:k("labels.collaborators")}),g(UX,{mobile:!0,collaborators:s.collaborators,userToFollow:((a=s.userToFollow)==null?void 0:a.socketId)||null})]})]})]})})}),{Trigger:Qe.Trigger,Item:Qe.Item,ItemLink:Qe.ItemLink,ItemCustom:Qe.ItemCustom,Group:Qe.Group,Separator:Qe.Separator,DefaultItems:X7e}),no=L.forwardRef(({children:e,icon:t,onClick:n,label:i,variant:s="filled",color:r="primary",size:o="medium",fullWidth:a,className:l,status:c},u)=>{const[d,f]=L.useState(!1),h=async p=>{const U=n==null?void 0:n(p);if(Qm(U)){const y=window.setTimeout(()=>{f(!0)},50);try{await U}catch(E){if(E instanceof Fh)console.warn(E);else throw E}finally{clearTimeout(y),f(!1)}}},m=d?"loading":c;return r=m==="success"?"success":r,g("button",{className:pe("ExcButton",`ExcButton--color-${r}`,`ExcButton--variant-${s}`,`ExcButton--size-${o}`,`ExcButton--status-${m}`,{"ExcButton--fullWidth":a},l),onClick:h,type:"button","aria-label":i,ref:u,disabled:m==="loading"||m==="success",children:P("div",{className:"ExcButton__contents",children:[m==="loading"?g(sl,{className:"ExcButton__statusIcon"}):m==="success"&&g("div",{className:"ExcButton__statusIcon",children:mde}),t&&g("div",{className:"ExcButton__icon","aria-hidden":!0,children:t}),s!=="icon"&&(e??i)]})})}),O_=({title:e,children:t,actionLabel:n,onClick:i})=>P("div",{className:"OverwriteConfirm__Actions__Action",children:[g("h4",{children:e}),g("div",{className:"OverwriteConfirm__Actions__Action__content",children:t}),g(no,{variant:"outlined",color:"muted",label:n,size:"large",fullWidth:!0,onClick:i})]}),j7e=()=>{const{t:e}=Un(),t=Ss(),n=Yn();return g(O_,{title:e("overwriteConfirm.action.exportToImage.title"),actionLabel:e("overwriteConfirm.action.exportToImage.button"),onClick:()=>{t.executeAction(hG,"ui",!0),n({openDialog:{name:"imageExport"}})},children:e("overwriteConfirm.action.exportToImage.description")})},Y7e=()=>{const{t:e}=Un(),t=Ss();return g(O_,{title:e("overwriteConfirm.action.saveToDisk.title"),actionLabel:e("overwriteConfirm.action.saveToDisk.button"),onClick:()=>{t.executeAction(gG,"ui")},children:e("overwriteConfirm.action.saveToDisk.description")})},vk=Object.assign(({children:e})=>g("div",{className:"OverwriteConfirm__Actions",children:e}),{ExportToImage:j7e,SaveToDisk:Y7e}),Nu=Object.assign(gp("OverwriteConfirmDialog",({children:e})=>{const{OverwriteConfirmDialogTunnel:t}=os(),[n,i]=pn(WX);if(!n.active)return null;const s=()=>{n.onClose(),i(o=>({...o,active:!1}))},r=()=>{n.onConfirm(),i(o=>({...o,active:!1}))};return g(t.In,{children:g(Ws,{onCloseRequest:s,title:!1,size:916,children:P("div",{className:"OverwriteConfirm",children:[g("h3",{children:n.title}),P("div",{className:`OverwriteConfirm__Description OverwriteConfirm__Description--color-${n.color}`,children:[g("div",{className:"OverwriteConfirm__Description__icon",children:pde}),g("div",{children:n.description}),g("div",{className:"OverwriteConfirm__Description__spacer"}),g(no,{color:n.color,size:"large",label:n.actionLabel,onClick:r})]}),g(vk,{children:e})]})})})}),{Actions:vk,Action:O_});var W7e="Expected a function",wk=NaN,K7e="[object Symbol]",Z7e=/^\s+|\s+$/g,q7e=/^[-+]0x[0-9a-f]+$/i,Q7e=/^0b[01]+$/i,J7e=/^0o[0-7]+$/i,e3e=parseInt,t3e=typeof Ra=="object"&&Ra&&Ra.Object===Object&&Ra,n3e=typeof self=="object"&&self&&self.Object===Object&&self,i3e=t3e||n3e||Function("return this")(),s3e=Object.prototype,r3e=s3e.toString,o3e=Math.max,a3e=Math.min,YE=function(){return i3e.Date.now()};function l3e(e,t,n){var i,s,r,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(W7e);t=_k(t)||0,G4(n)&&(u=!!n.leading,d="maxWait"in n,r=d?o3e(_k(n.maxWait)||0,t):r,f="trailing"in n?!!n.trailing:f);function h(M){var T=i,_=s;return i=s=void 0,c=M,o=e.apply(_,T),o}function m(M){return c=M,a=setTimeout(y,t),u?h(M):o}function p(M){var T=M-l,_=M-c,x=t-T;return d?a3e(x,r-_):x}function U(M){var T=M-l,_=M-c;return l===void 0||T>=t||T<0||d&&_>=r}function y(){var M=YE();if(U(M))return E(M);a=setTimeout(y,p(M))}function E(M){return a=void 0,f&&i?h(M):(i=s=void 0,o)}function v(){a!==void 0&&clearTimeout(a),c=0,i=l=s=a=void 0}function w(){return a===void 0?o:E(YE())}function I(){var M=YE(),T=U(M);if(i=arguments,s=this,l=M,T){if(a===void 0)return m(l);if(d)return a=setTimeout(y,t),h(l)}return a===void 0&&(a=setTimeout(y,t)),o}return I.cancel=v,I.flush=w,I}function G4(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function c3e(e){return!!e&&typeof e=="object"}function u3e(e){return typeof e=="symbol"||c3e(e)&&r3e.call(e)==K7e}function _k(e){if(typeof e=="number")return e;if(u3e(e))return wk;if(G4(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=G4(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Z7e,"");var n=Q7e.test(e);return n||J7e.test(e)?e3e(e.slice(2),n?2:8):q7e.test(e)?wk:+e}var d3e=l3e;const f3e=hl(d3e),h3e=Zt(""),cj=Zt(null),g3e=350,m3e=()=>{const e=mo(),t=Yn(),n=L.useRef(null),[i,s]=pn(h3e),r=i.trim(),[o,a]=L.useState(!1),[l,c]=L.useState({nonce:null,items:[]}),u=L.useRef(null),d=L.useRef(void 0),[f,h]=pn(cj),m=e.scene.getNonDeletedElementsMap();L.useEffect(()=>{o||(r!==u.current||e.scene.getSceneNonce()!==d.current)&&(u.current=null,Ik(r,e,(v,w)=>{c({nonce:Wo(),items:v}),u.current=r,d.current=e.scene.getSceneNonce(),t({searchMatches:v.length?{focusedId:null,matches:v.map(I=>({id:I.element.id,focus:!1,matchedLines:I.matchedLines}))}:null})}))},[o,r,m,e,t,h,d]);const p=()=>{l.items.length>0&&h(v=>v===null?0:(v+1)%l.items.length)},U=()=>{l.items.length>0&&h(v=>v===null?0:v-1<0?l.items.length-1:v-1)};L.useEffect(()=>{t(v=>{var I,M;return v.searchMatches?{searchMatches:{focusedId:f!==null&&((M=(I=v.searchMatches)==null?void 0:I.matches[f])==null?void 0:M.id)||null,matches:v.searchMatches.matches.map((T,_)=>_===f?{...T,focus:!0}:{...T,focus:!1})}}:null})},[f,t]),L.useEffect(()=>{var v,w,I,M;if(l.items.length>0&&f!==null){const T=l.items[f];if(T){const _=e.state.zoom.value,x=js({text:T.searchQuery,x:T.element.x+(((v=T.matchedLines[0])==null?void 0:v.offsetX)??0),y:T.element.y+(((w=T.matchedLines[0])==null?void 0:w.offsetY)??0),width:(I=T.matchedLines[0])==null?void 0:I.width,height:(M=T.matchedLines[0])==null?void 0:M.height,fontSize:Te(T.element)?Pt.nameFontSize:T.element.fontSize,fontFamily:Te(T.element)?lt.Assistant:T.element.fontFamily}),C=14,R=x.fontSize,N=R*_<C;if(!d2([x],e.canvas.width/window.devicePixelRatio,e.canvas.height/window.devicePixelRatio,{offsetLeft:e.state.offsetLeft,offsetTop:e.state.offsetTop,scrollX:e.state.scrollX,scrollY:e.state.scrollY,zoom:e.state.zoom},e.scene.getNonDeletedElementsMap(),e.getEditorUIOffsets())||N){let D;N?R>=C?D={fitToContent:!0}:D={fitToViewport:!0,maxZoom:$a(C/R,1)}:D={fitToContent:!0},e.scrollToContent(x,{animate:!0,duration:300,...D,canvasOffsets:e.getEditorUIOffsets()})}}}},[f,l,e]),L.useEffect(()=>()=>{h(null),u.current=null,d.current=void 0,t({searchMatches:null}),a(!1)},[t,h]);const y=B5({goToNextItem:p,goToPreviousItem:U,searchMatches:l});L.useEffect(()=>{const v=w=>{var I,M,T;if(w.key===z.ESCAPE&&!e.state.openDialog&&!e.state.openPopup){w.preventDefault(),w.stopPropagation(),t({openSidebar:null});return}w[z.CTRL_OR_CMD]&&w.key===z.F&&(w.preventDefault(),w.stopPropagation(),(I=n.current)!=null&&I.matches(":focus")||(e.state.openDialog&&t({openDialog:null}),(M=n.current)==null||M.focus(),(T=n.current)==null||T.select())),w.target instanceof HTMLElement&&w.target.closest(".layer-ui__search")&&y.searchMatches.items.length&&(w.key===z.ENTER&&(w.stopPropagation(),y.goToNextItem()),w.key===z.ARROW_UP?(w.stopPropagation(),y.goToPreviousItem()):w.key===z.ARROW_DOWN&&(w.stopPropagation(),y.goToNextItem()))};return rn(window,ee.KEYDOWN,v,{capture:!0,passive:!1})},[t,y,e]);const E=`${l.items.length} ${l.items.length===1?k("search.singleResult"):k("search.multipleResults")}`;return P("div",{className:"layer-ui__search",children:[g("div",{className:"layer-ui__search-header",children:g(Gh,{className:Mc.SEARCH_MENU_INPUT_WRAPPER,value:i,ref:n,placeholder:k("search.placeholder"),icon:md,onChange:v=>{s(v),a(!0);const w=v.trim();Ik(w,e,(I,M)=>{c({nonce:Wo(),items:I}),h(M),u.current=w,d.current=e.scene.getSceneNonce(),t({searchMatches:I.length?{focusedId:null,matches:I.map(T=>({id:T.element.id,focus:!1,matchedLines:T.matchedLines}))}:null}),a(!1)})},selectOnRender:!0})}),P("div",{className:"layer-ui__search-count",children:[l.items.length>0&&P(ge,{children:[f!==null&&f>-1?P("div",{children:[f+1," / ",E]}):g("div",{children:E}),P("div",{className:"result-nav",children:[g(Td,{onSelect:()=>{p()},className:"result-nav-btn",children:MH}),g(Td,{onSelect:()=>{U()},className:"result-nav-btn",children:Bde})]})]}),l.items.length===0&&r&&u.current&&g("div",{style:{margin:"1rem auto"},children:k("search.noMatch")})]}),g(b3e,{matches:l,onItemClick:h,focusIndex:f,searchQuery:r})]})},Tk=e=>{const t=[e.preview.moreBefore?"...":"",e.preview.previewText.slice(0,e.preview.indexInSearchQuery),e.preview.previewText.slice(e.preview.indexInSearchQuery,e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.previewText.slice(e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.moreAfter?"...":""];return g("div",{tabIndex:-1,className:pe("layer-ui__result-item",{active:e.highlighted}),onClick:e.onClick,ref:n=>{e.highlighted&&(n==null||n.scrollIntoView({behavior:"auto",block:"nearest"}))},children:g("div",{className:"preview-text",children:t.flatMap((n,i)=>g(L.Fragment,{children:i===2?g("b",{children:n}):n},i))})})},p3e=e=>{const t=L.useMemo(()=>e.matches.items.filter(i=>Te(i.element)),[e.matches]),n=L.useMemo(()=>e.matches.items.filter(i=>ue(i.element)),[e.matches]);return P("div",{children:[t.length>0&&P("div",{className:"layer-ui__search-result-container",children:[P("div",{className:"layer-ui__search-result-title",children:[g("div",{className:"title-icon",children:Kb}),g("div",{children:k("search.frames")})]}),t.map((i,s)=>g(Tk,{searchQuery:e.searchQuery,preview:i.preview,highlighted:s===e.focusIndex,onClick:()=>e.onItemClick(s)},i.element.id+i.index)),n.length>0&&g("div",{className:"layer-ui__divider"})]}),n.length>0&&P("div",{className:"layer-ui__search-result-container",children:[P("div",{className:"layer-ui__search-result-title",children:[g("div",{className:"title-icon",children:Ow}),g("div",{children:k("search.texts")})]}),n.map((i,s)=>g(Tk,{searchQuery:e.searchQuery,preview:i.preview,highlighted:s+t.length===e.focusIndex,onClick:()=>e.onItemClick(s+t.length)},i.element.id+i.index))]})]})},U3e=(e,t)=>e.matches.nonce===t.matches.nonce&&e.focusIndex===t.focusIndex,b3e=L.memo(p3e,U3e),Sk=(e,t,n)=>{const r=e.slice(0,t),o=r.split(/\s+/),a=r.endsWith(" "),l=o.length-2-1-(a?0:1);let c=o.slice(l<=0?0:l).join(" ")+(a?" ":"");c=c.length>20?c.slice(-20):c;const d=e.slice(t+n.length),f=d.split(/\s+/),h=!d.startsWith(" "),m=h?6:5,p=(h?"":" ")+f.slice(0,m).join(" ");return{indexInSearchQuery:c.length,previewText:c+n+p,moreBefore:l>0,moreAfter:f.length>m}},y3e=(e,t)=>{const n=e.split(`
`),i=[];let s=0;for(let r=0;r<n.length;r++){let o=n[r];const a=n[r+1];if(a){const l=t.indexOf(a,s);if(l>o.length+s){let c=l-(o.length+s);for(;c>0;)o+=" ",c--}}i.push(o),s=s+o.length}return i.join(`
`)},E3e=(e,t,n)=>{const s=y3e(e.text,e.originalText).split(`
`),r=[];let o=0,a=0;for(const d of s){const f=o,h=f+d.length-1;r.push({line:d,startIndex:f,endIndex:h,lineNumber:a}),o=h+1,a++}let l=n,c=e.originalText.slice(n,n+t.length);const u=[];for(const d of r){if(c==="")break;if(l>=d.startIndex&&l<=d.endIndex){const f=d.endIndex+1-l,h=d.line.slice(0,l-d.startIndex),m=c.slice(0,f);c=c.slice(f);const p=Vn(h,gt(e),e.lineHeight);if(h===""&&(p.width=0),e.textAlign!=="left"&&d.line.length>0){const w=Vn(d.line,gt(e),e.lineHeight),I=e.textAlign==="center"?(e.width-w.width)/2:e.width-w.width;p.width+=I}const{width:U,height:y}=Vn(m,gt(e),e.lineHeight),E=p.width,v=d.lineNumber*p.height;u.push({offsetX:E,offsetY:v,width:U,height:y,showOnCanvas:!0}),l+=f}}return u},v3e=(e,t,n,i)=>{const s=e.name??uw(e),r=s.slice(n,n+t.length),o=s.slice(0,n),a=gt({fontSize:Pt.nameFontSize,fontFamily:lt.Assistant}),l=Rc(lt.Assistant),c=Vn(o,a,l);o===""&&(c.width=0);const u=Vn(r,a,l),d=c.width,f=-c.height-Pt.strokeWidth,h=u.width;return[{offsetX:d,offsetY:f,width:h,height:u.height,showOnCanvas:d+h<=e.width*i}]},w3e=e=>e.replace(/[.*+?^${}()|[\]\\-]/g,"\\$&"),Ik=f3e((e,t,n)=>{if(!e||e===""){n([],null);return}const i=t.scene.getNonDeletedElements(),s=i.filter(f=>ue(f)),r=i.filter(f=>Te(f));s.sort((f,h)=>f.y-h.y),r.sort((f,h)=>f.y-h.y);const o=[],a=new RegExp(w3e(e),"gi");for(const f of s){let h=null;const m=f.originalText;for(;(h=a.exec(m))!==null;){const p=Sk(m,h.index,e),U=E3e(f,e,h.index);U.length>0&&o.push({element:f,searchQuery:e,preview:p,index:h.index,matchedLines:U})}}const l=[];for(const f of r){let h=null;const m=f.name??uw(f);for(;(h=a.exec(m))!==null;){const p=Sk(m,h.index,e),U=v3e(f,e,h.index,t.state.zoom.value);U.length>0&&l.push({element:f,searchQuery:e,preview:p,index:h.index,matchedLines:U})}}const c=new Set(t.visibleElements.map(f=>f.id)),u=[...l,...o],d=u.findIndex(f=>c.has(f.element.id))??null;n(u,d)},g3e),uj=gp("DefaultSidebarTrigger",e=>{const{DefaultSidebarTriggerTunnel:t}=os();return g(t.In,{children:g(To.Trigger,{...e,className:"default-sidebar-trigger",name:yr.name})})});uj.displayName="DefaultSidebarTrigger";const dj=({children:e})=>{const{DefaultSidebarTabTriggersTunnel:t}=os();return g(t.In,{children:e})};dj.displayName="DefaultTabTriggers";const xk=Object.assign(gp("DefaultSidebar",({children:e,className:t,onDock:n,docked:i,...s})=>{var c;const r=Ui(),o=Yn(),{DefaultSidebarTabTriggersTunnel:a}=os(),l=((c=r.openSidebar)==null?void 0:c.tab)===Gu;return L.createElement(To,{...s,name:"default",key:"default",className:pe("default-sidebar",t),docked:l||(i??r.defaultSidebarDockedPreference),onDock:l||n===!1||!n&&i!=null?void 0:h5(n,u=>{o({defaultSidebarDockedPreference:u})})},P(To.Tabs,{children:[g(To.Header,{children:P(To.TabTriggers,{children:[g(To.TabTrigger,{tab:Gu,children:md}),g(To.TabTrigger,{tab:pb,children:Lw}),g(a.Out,{})]})}),g(To.Tab,{tab:pb,children:g(y8e,{})}),g(To.Tab,{tab:Gu,children:g(m3e,{})}),e]}))}),{Trigger:uj,TabTriggers:dj}),fj=({input:e,placeholder:t,onChange:n,onKeyboardSubmit:i})=>{const s=L.useRef(null),r=L.useRef(i);return r.current=i,L.useEffect(()=>{if(!r.current)return;const o=s.current;if(o){const a=l=>{var c;l[z.CTRL_OR_CMD]&&l.key===z.ENTER&&(l.preventDefault(),(c=r.current)==null||c.call(r))};return o.focus(),o.addEventListener(ee.KEYDOWN,a),()=>{o.removeEventListener(ee.KEYDOWN,a)}}},[]),g("textarea",{className:"ttd-dialog-input",onChange:n,value:e,placeholder:t,ref:s})},_3e=({error:e})=>P("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",g("p",{children:e})]}),hj=({error:e,canvasRef:t,loaded:n})=>P("div",{className:"ttd-dialog-output-wrapper",children:[e&&g(_3e,{error:e.message}),n?g("div",{ref:t,style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container"}):g(sl,{size:"2rem"})]}),U6=({label:e,children:t,panelAction:n,panelActionDisabled:i=!1,onTextSubmitInProgess:s,renderTopRight:r,renderSubmitShortcut:o,renderBottomRight:a})=>P("div",{className:"ttd-dialog-panel",children:[P("div",{className:"ttd-dialog-panel__header",children:[g("label",{children:e}),r==null?void 0:r()]}),t,P("div",{className:pe("ttd-dialog-panel-button-container",{invisible:!n}),style:{display:"flex",alignItems:"center"},children:[P(Td,{className:"ttd-dialog-panel-button",onSelect:n?n.action:()=>{},disabled:i||s,children:[P("div",{className:pe({invisible:s}),children:[n==null?void 0:n.label,(n==null?void 0:n.icon)&&g("span",{children:n.icon})]}),s&&g(sl,{})]}),!i&&!s&&(o==null?void 0:o()),a==null?void 0:a()]})]}),gj=({children:e})=>g("div",{className:"ttd-dialog-panels",children:e}),mj=()=>P("div",{className:"ttd-dialog-submit-shortcut",children:[g("div",{className:"ttd-dialog-submit-shortcut__key",children:Q("CtrlOrCmd")}),g("div",{className:"ttd-dialog-submit-shortcut__key",children:Q("Enter")})]}),T3e=({canvasRef:e,setError:t})=>{const n=e.current;if(!n)return;const i=n.parentElement;i&&(i.style.background="",t(null),n.replaceChildren())},pj=async({canvasRef:e,mermaidToExcalidrawLib:t,mermaidDefinition:n,setError:i,data:s})=>{const r=e.current,o=r==null?void 0:r.parentElement;if(!(!r||!o)){if(!n){T3e({canvasRef:e,setError:i});return}try{const a=await t.api;let l;try{l=await a.parseMermaidToExcalidraw(n)}catch{l=await a.parseMermaidToExcalidraw(n.replace(/"/g,"'"))}const{elements:c,files:u}=l;i(null),s.current={elements:z4(c,{regenerateIds:!0}),files:u};const d=await ay({elements:s.current.elements,files:s.current.files,exportPadding:ug,maxWidthOrHeight:Math.max(o.offsetWidth,o.offsetHeight)*window.devicePixelRatio});try{await hm(d)}catch(f){throw f.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(k("canvasError.canvasTooBig")):f}o.style.background="var(--default-bg-color)",r.replaceChildren(d)}catch(a){throw o.style.background="var(--default-bg-color)",n&&i(a),a}}},P_=e=>{Ku.set(n0.MERMAID_TO_EXCALIDRAW,e)},Uj=({app:e,data:t,text:n,shouldSaveMermaidDataToStorage:i})=>{const{elements:s,files:r}=t.current;s.length&&(e.addElementsFromPasteOrLibrary({elements:s,files:r,position:"center",fitToContent:!0}),e.setOpenDialog(null),i&&n&&P_(n))},S3e=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,Ck=Qa(P_,300),I3e=({mermaidToExcalidrawLib:e})=>{const[t,n]=L.useState(()=>Ku.get(n0.MERMAID_TO_EXCALIDRAW)||S3e),i=L.useDeferredValue(t.trim()),[s,r]=L.useState(null),o=L.useRef(null),a=L.useRef({elements:[],files:null}),l=mo();L.useEffect(()=>{pj({canvasRef:o,data:a,mermaidToExcalidrawLib:e,setError:r,mermaidDefinition:i}).catch(u=>{console.error("Failed to parse mermaid definition",u)}),Ck(i)},[i,e]),L.useEffect(()=>()=>{Ck.flush()},[]);const c=()=>{Uj({app:l,data:a,text:t,shouldSaveMermaidDataToStorage:!0})};return P(ge,{children:[g("div",{className:"ttd-dialog-desc",children:g(Us,{i18nKey:"mermaid.description",flowchartLink:u=>g("a",{href:"https://mermaid.js.org/syntax/flowchart.html",children:u}),sequenceLink:u=>g("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",children:u}),classLink:u=>g("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",children:u})})}),P(gj,{children:[g(U6,{label:k("mermaid.syntax"),children:g(fj,{input:t,placeholder:"Write Mermaid diagram defintion here...",onChange:u=>n(u.target.value),onKeyboardSubmit:()=>{c()}})}),g(U6,{label:k("mermaid.preview"),panelAction:{action:()=>{c()},label:k("mermaid.button"),icon:g2},renderSubmitShortcut:()=>g(mj,{}),children:g(hj,{canvasRef:o,loaded:e.loaded,error:s})})]})]})},bj=e=>{const t=Yn(),n=L.useRef(null),i=L.useRef(0);return g(FX,{ref:n,className:"ttd-dialog-tabs-root",value:e.tab,onValueChange:s=>{var o;if(!s)return;const r=(o=n.current)==null?void 0:o.closest(".Modal__content");if(r){const a=r.offsetHeight||0;a>i.current&&(i.current=a,r.style.minHeight=`min(${i.current}px, 100%)`)}e.dialog==="ttd"&&yF(["text-to-diagram","mermaid"],s)&&t({openDialog:{name:e.dialog,tab:s}})},children:e.children})};bj.displayName="TTDDialogTabs";const yj=({children:e,...t})=>g(BX,{className:"ttd-dialog-triggers",...t,children:e});yj.displayName="TTDDialogTabTriggers";const X4=({children:e,tab:t,onSelect:n,...i})=>g(zX,{value:t,asChild:!0,onSelect:n,children:g("button",{type:"button",className:"ttd-dialog-tab-trigger",...i,children:e})});X4.displayName="TTDDialogTabTrigger";const j4=({tab:e,children:t,...n})=>g(HX,{...n,value:e,children:t});j4.displayName="TTDDialogTab";const WE=3,lf=1e3,x3e=Zt(null),C3e=Zt(null),Ej=e=>{var n;const t=Ui();return((n=t.openDialog)==null?void 0:n.name)!=="ttd"?null:g(A3e,{...e,tab:t.openDialog.tab})},A3e=gp("TTDDialogBase",({tab:e,...t})=>{const n=mo(),i=Yn(),s=L.useRef(null),[r,o]=pn(C3e),[a,l]=L.useState((r==null?void 0:r.prompt)??""),c=a.trim(),u=M=>{l(M.target.value),o(T=>({generatedResponse:(T==null?void 0:T.generatedResponse)??null,prompt:M.target.value}))},[d,f]=L.useState(!1),[h,m]=pn(x3e),p=async()=>{if(c.length>lf||c.length<WE||d||(h==null?void 0:h.rateLimitRemaining)===0||"__fallback"in t){c.length<WE&&I(new Error(`Prompt is too short (min ${WE} characters)`)),c.length>lf&&I(new Error(`Prompt is too long (max ${lf} characters)`));return}try{f(!0),at("ai","generate","ttd");const{generatedResponse:M,error:T,rateLimit:_,rateLimitRemaining:x}=await t.onTextSubmit(c);if(typeof M=="string"&&o(C=>({generatedResponse:M,prompt:(C==null?void 0:C.prompt)??null})),s0(_)&&s0(x)&&m({rateLimit:_,rateLimitRemaining:x}),T){I(T);return}if(!M){I(new Error("Generation failed"));return}try{await pj({canvasRef:s,data:v,mermaidToExcalidrawLib:y,setError:I,mermaidDefinition:M}),at("ai","mermaid parse success","ttd")}catch(C){console.info(`%cTTD mermaid render errror: ${C.message}`,"color: red"),console.info(`>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TTD mermaid definition render errror: ${C.message}`,"color: yellow"),at("ai","mermaid parse failed","ttd"),I(new Error("Generated an invalid diagram :(. You may also try a different prompt."))}}catch(M){let T=M.message;(!T||T==="Failed to fetch")&&(T="Request failed"),I(new Error(T))}finally{f(!1)}},U=L.useRef(p);U.current=p;const[y,E]=L.useState({loaded:!1,api:be(()=>import("./index-DT5BMFqO.js").then(M=>M.b6),__vite__mapDeps([]))});L.useEffect(()=>{(async()=>{await y.api,E(T=>({...T,loaded:!0}))})()},[y.api]);const v=L.useRef({elements:[],files:null}),[w,I]=L.useState(null);return g(Ws,{className:"ttd-dialog",onCloseRequest:()=>{n.setOpenDialog(null)},size:1200,title:!1,...t,autofocus:!1,children:P(bj,{dialog:"ttd",tab:e,children:["__fallback"in t&&t.__fallback?g("p",{className:"dialog-mermaid-title",children:k("mermaid.title")}):P(yj,{children:[g(X4,{tab:"text-to-diagram",children:P("div",{style:{display:"flex",alignItems:"center"},children:[k("labels.textToDiagram"),g("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"1px 6px",marginLeft:"10px",fontSize:10,borderRadius:"12px",background:"var(--color-promo)",color:"var(--color-surface-lowest)"},children:"AI Beta"})]})}),g(X4,{tab:"mermaid",children:"Mermaid"})]}),g(j4,{className:"ttd-dialog-content",tab:"mermaid",children:g(I3e,{mermaidToExcalidrawLib:y})}),!("__fallback"in t)&&P(j4,{className:"ttd-dialog-content",tab:"text-to-diagram",children:[g("div",{className:"ttd-dialog-desc",children:"Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar."}),P(gj,{children:[g(U6,{label:k("labels.prompt"),panelAction:{action:p,label:"Generate",icon:g2},onTextSubmitInProgess:d,panelActionDisabled:c.length>lf||(h==null?void 0:h.rateLimitRemaining)===0,renderTopRight:()=>h?P("div",{className:"ttd-dialog-rate-limit",style:{fontSize:12,marginLeft:"auto",color:h.rateLimitRemaining===0?"var(--color-danger)":void 0},children:[h.rateLimitRemaining," requests left today"]}):null,renderSubmitShortcut:()=>g(mj,{}),renderBottomRight:()=>{if(typeof(r==null?void 0:r.generatedResponse)=="string")return P("div",{className:"excalidraw-link",style:{marginLeft:"auto",fontSize:14},onClick:()=>{typeof(r==null?void 0:r.generatedResponse)=="string"&&(P_(r.generatedResponse),i({openDialog:{name:"ttd",tab:"mermaid"}}))},children:["View as Mermaid",g(V5,{icon:g2})]});const M=c.length/lf;return M>.8?P("div",{style:{marginLeft:"auto",fontSize:12,fontFamily:"monospace",color:M>1?"var(--color-danger)":void 0},children:["Length: ",c.length,"/",lf]}):null},children:g(fj,{onChange:u,input:a,placeholder:"Describe what you want to see...",onKeyboardSubmit:()=>{U.current()}})}),g(U6,{label:"Preview",panelAction:{action:()=>{console.info("Panel action clicked"),Uj({app:n,data:v})},label:"Insert",icon:g2},children:g(hj,{canvasRef:s,error:w,loaded:y.loaded})})]})]})]})})}),M3e=.01,Y4=10,cl=(e,t)=>!(t==="height"&&ue(e)||t==="width"&&ue(e)||t==="angle"&&Te(e)),Fi=(e,t)=>{const n=e+t/2;return n-n%t},b6=(e,t,n)=>Object.keys(e).map(i=>({original:(n??t).get(i),latest:t.get(i)})).filter(i=>i.original!==void 0&&i.latest!==void 0),vm=(e,t,n,i,s,r=!0)=>{const o=i.getNonDeletedElementsMap(),a=o.get(n.id);if(!a)return;const[l,c]=[n.x+n.width/2,n.y+n.height/2],[u,d]=Z(S(n.x,n.y),S(l,c),n.angle),f=e-u,h=t-d,[m,p]=Z(S(e,t),S(l+f,c+h),-n.angle);i.mutateElement(a,{x:m,y:p},{informMutation:r,isDragging:!1}),W0(a,i);const U=Oe(n,s);if(U){const y=o.get(U.id);y&&i.mutateElement(y,{x:U.x+f,y:U.y+h},{informMutation:r,isDragging:!1})}if(Te(n)){const y=xr(s,n.id);y.forEach(E=>{const v=o.get(E.id);if(!v)return;const[w,I]=[E.x+E.width/2,E.y+E.height/2],[M,T]=Z(S(E.x,E.y),S(w,I),E.angle),_=Math.round(M+f),x=Math.round(T+h),[C,R]=Z(S(_,x),S(w+f,I+h),-E.angle);i.mutateElement(v,{x:C,y:R},{informMutation:r,isDragging:!1}),W0(v,i,{simultaneouslyUpdated:y})})}},F_=(e,t)=>{const i=Yu(t).map(s=>$t(e,s).reduce((r,o)=>(r[o.id]=!0,r),{}));return e.filter(s=>!kh(s)).forEach(s=>{i.push({[s.id]:!0})}),i},Ul=({label:e,icon:t,dragInputCallback:n,value:i,elements:s,editable:r=!0,shouldKeepAspectRatio:o,property:a,scene:l,appState:c,sensitivity:u=1})=>{const d=mo(),f=L.useRef(null),h=L.useRef(null),[m,p]=L.useState(i.toString()),U=L.useRef(null);U.current||(U.current={originalAppState:Ga(c),originalElements:s,lastUpdatedValue:m,updatePending:!1}),L.useEffect(()=>{const v=i.toString();p(v),U.current.lastUpdatedValue=v},[i]);const y=(v,w,I)=>{if(!U.current.updatePending)return!1;U.current.updatePending=!1;const M=Number(v);if(isNaN(M)){p(i.toString());return}const T=Number(M.toFixed(2)),_=Number(i);(isNaN(_)||Math.abs(T-_)>=M3e)&&(U.current.lastUpdatedValue=v,n({accumulatedChange:0,instantChange:0,originalElements:w,originalElementsMap:d.scene.getNonDeletedElementsMap(),shouldKeepAspectRatio:o,shouldChangeByStepSize:!1,scene:l,nextValue:T,property:a,originalAppState:I,setInputValue:x=>p(String(x))}),d.syncActionResult({captureUpdate:K.IMMEDIATELY}))},E=L.useRef({});return E.current.handleInputValue=y,L.useEffect(()=>{const v=f.current,w=E.current;return()=>{var M;const I=v==null?void 0:v.value;I&&((M=w.handleInputValue)==null||M.call(w,I,U.current.originalElements,U.current.originalAppState)),window.removeEventListener(ee.POINTER_MOVE,w.onPointerMove,!1),window.removeEventListener(ee.POINTER_UP,w.onPointerUp,!1)}},[r]),r?P("div",{className:pe("drag-input-container",!r&&"disabled"),"data-testid":e,children:[g("div",{className:"drag-input-label",ref:h,onPointerDown:v=>{if(f.current&&r){document.body.classList.add("excalidraw-cursor-resize"),Number(f.current.value);let w=null,I=d.scene.getNonDeletedElements().reduce((N,D)=>(N.set(D.id,Nc(D)),N),new Map),M=s.map(N=>I.get(N.id));const T=Ga(c);let _=0,x=0;const C=N=>{if(w&&I!==null&&M!==null){const D=N.clientX-w.x;D!==0&&(x+=D,Math.abs(x)>=u&&(x=Math.sign(x)*Math.floor(Math.abs(x)/u),_+=x,n({accumulatedChange:_,instantChange:x,originalElements:M,originalElementsMap:I,shouldKeepAspectRatio:o,shouldChangeByStepSize:N.shiftKey,property:a,scene:l,originalAppState:T,setInputValue:$=>p(String($))}),x=0))}w={x:N.clientX,y:N.clientY}},R=()=>{window.removeEventListener(ee.POINTER_MOVE,C,!1),d.syncActionResult({captureUpdate:K.IMMEDIATELY}),w=null,_=0,x=0,M=null,I=null,document.body.classList.remove("excalidraw-cursor-resize"),window.removeEventListener(ee.POINTER_UP,R,!1)};E.current.onPointerMove=C,E.current.onPointerUp=R,window.addEventListener(ee.POINTER_MOVE,C,!1),window.addEventListener(ee.POINTER_UP,R,!1)}},onPointerEnter:()=>{h.current&&(h.current.style.cursor="ew-resize")},children:t?g(V5,{icon:t}):e}),g("input",{className:"drag-input",autoComplete:"off",spellCheck:"false",onKeyDown:v=>{if(r){const w=v.target;w instanceof HTMLInputElement&&v.key===z.ENTER&&(y(w.value,s,c),d.focusContainer())}},ref:f,value:m,onChange:v=>{U.current.updatePending=!0,p(v.target.value)},onFocus:v=>{v.target.select(),U.current.originalElements=s,U.current.originalAppState=Ga(c)},onBlur:v=>{m?r&&y(v.target.value,U.current.originalElements,U.current.originalAppState):p(i.toString())},disabled:!r})]}):null},R3e=15,k3e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:s})=>{const r=s.getNonDeletedElementsMap(),o=t[0];if(o&&!he(o)){const a=r.get(o.id);if(!a)return;if(i!==void 0){const h=Xu(i);s.mutateElement(a,{angle:h}),W0(a,s);const m=Oe(a,r);m&&!xe(a)&&s.mutateElement(m,{angle:h});return}const l=Math.round(d5(o.angle)*100)/100,c=Math.round(e);let u=(l+c)%360;n&&(u=Fi(u,R3e)),u=u<0?u+360:u;const d=Xu(u);s.mutateElement(a,{angle:d}),W0(a,s);const f=Oe(a,r);f&&!xe(a)&&s.mutateElement(f,{angle:d})}},D3e=({element:e,scene:t,appState:n,property:i})=>g(Ul,{label:"A",icon:vH,value:Math.round(d5(e.angle)%360*100)/100,elements:[e],dragInputCallback:k3e,editable:cl(e,"angle"),scene:t,appState:n,property:i}),Ak=5,L3e=({property:e,scene:t,appState:n,setAppState:i})=>g(Ul,{label:"Grid step",sensitivity:8,elements:[],dragInputCallback:({nextValue:s,instantChange:r,shouldChangeByStepSize:o,setInputValue:a})=>{i(l=>{let c;return s?c=s:r&&(c=o?Fi(l.gridStep+Ak*Math.sign(r),Ak):l.gridStep+r),c?(c=lH(c),a(c),{gridStep:c}):(a(l.gridStep),null)})},scene:t,value:n.gridStep,property:e,appState:n}),Mk=10,N3e=e=>e.type==="image",O3e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldKeepAspectRatio:i,shouldChangeByStepSize:s,nextValue:r,property:o,originalAppState:a,instantChange:l,scene:c})=>{const u=c.getNonDeletedElementsMap(),d=t[0],f=u.get(d.id);if(d&&f){const h=i||N3e(d),m=d.width/d.height;if(a.croppingElementId===d.id){const v=u.get(d.id);if(!v||!ft(v)||!v.crop)return;const w=v.crop;let I={...w};const M=v.scale[0]===-1,T=v.scale[1]===-1,{width:_,height:x}=tl(v),C=w.naturalWidth/_,R=w.naturalHeight/x,N=M?w.width+w.x:w.naturalWidth-w.x,D=T?w.height+w.y:w.naturalHeight-w.y,$=ri*C,G=ri*R;if(r!==void 0){if(o==="width"){const q=r*C,fe=Xe(q,$,N);I={...I,width:fe,x:M?w.x+w.width-fe:w.x}}else if(o==="height"){const q=r*R,fe=Xe(q,G,D);I={...I,height:fe,y:T?w.y+w.height-fe:w.y}}c.mutateElement(v,{crop:I,width:I.width/(w.naturalWidth/_),height:I.height/(w.naturalHeight/x)});return}const H=o==="width"?l:0,V=o==="height"?l:0,X=Xe(w.width+H,$,N),j=Xe(w.height+V,$,D);I={...w,x:M?w.x+w.width-X:w.x,y:T?w.y+w.height-j:w.y,width:X,height:j},c.mutateElement(v,{crop:I,width:I.width/(w.naturalWidth/_),height:I.height/(w.naturalHeight/x)});return}if(r!==void 0){const v=Math.max(o==="width"?r:h?r*m:d.width,tr),w=Math.max(o==="height"?r:h?r/m:d.height,tr);Z0(v,w,f,d,n,c,o==="width"?"e":"s",{shouldMaintainAspectRatio:h});return}const p=o==="width"?e:0,U=o==="height"?e:0;let y=Math.max(0,d.width+p);o==="width"&&(s?y=Fi(y,Mk):y=Math.round(y));let E=Math.max(0,d.height+U);o==="height"&&(s?E=Fi(E,Mk):E=Math.round(E)),h&&(o==="width"?E=Math.round(y/m*100)/100:y=Math.round(E*m*100)/100),E=Math.max(tr,E),y=Math.max(tr,y),Z0(y,E,f,d,n,c,o==="width"?"e":"s",{shouldMaintainAspectRatio:h})}},Rk=({property:e,element:t,scene:n,appState:i})=>{let s=$a(e==="width"?t.width:t.height,2);if(i.croppingElementId&&i.croppingElementId===t.id&&ft(t)&&t.crop){const{width:r,height:o}=tl(t);if(e==="width"){const a=r/t.crop.naturalWidth;s=$a(t.crop.width*a,2)}if(e==="height"){const a=o/t.crop.naturalHeight;s=$a(t.crop.height*a,2)}}return g(Ul,{label:e==="width"?"W":"H",elements:[t],dragInputCallback:O3e,value:s,editable:cl(t,e),scene:n,appState:i,property:e})},kk=4,P3e=4,F3e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:s})=>{const r=s.getNonDeletedElementsMap(),o=t[0];if(o){const a=r.get(o.id);if(!a||!ue(a))return;let l;if(i!==void 0)l=Math.max(Math.round(i),kk);else if(o.type==="text"){const c=Math.round(o.fontSize),u=Math.round(e);l=Math.max(c+u,kk),n&&(l=Fi(l,P3e))}l&&(s.mutateElement(a,{fontSize:l}),$i(a,s.getContainerElement(a),s))}},B3e=({element:e,scene:t,appState:n,property:i})=>{const s=ue(e)?e:ns(e)?Oe(e,t.getNonDeletedElementsMap()):null;return s?g(Ul,{label:"F",value:Math.round(s.fontSize*10)/10,elements:[s],dragInputCallback:F3e,icon:M5,appState:n,scene:t,property:i}):null},z3e=15,H3e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,property:s,scene:r})=>{const o=r.getNonDeletedElementsMap(),a=t.map(c=>o.get(c.id)).filter(c=>c&&!kh(c)&&cl(c,s)),l=t.filter(c=>!kh(c)&&cl(c,s));if(i!==void 0){const c=Xu(i);for(const u of a){if(!u)continue;r.mutateElement(u,{angle:c});const d=Oe(u,o);d&&!xe(u)&&r.mutateElement(d,{angle:c})}r.triggerUpdate();return}for(let c=0;c<a.length;c++){const u=a[c];if(!u)continue;const d=l[c],f=Math.round(d5(d.angle)*100)/100,h=Math.round(e);let m=(f+h)%360;n&&(m=Fi(m,z3e)),m=m<0?m+360:m;const p=Xu(m);r.mutateElement(u,{angle:p});const U=Oe(u,o);U&&!xe(u)&&r.mutateElement(U,{angle:p})}r.triggerUpdate()},V3e=({elements:e,scene:t,appState:n,property:i})=>{const s=e.filter(l=>!kh(l)&&cl(l,"angle")),r=s.map(l=>Math.round(d5(l.angle)%360*100)/100),o=new Set(r).size===1?r[0]:"Mixed",a=s.some(l=>cl(l,"angle"));return g(Ul,{label:"A",icon:vH,value:o,elements:e,dragInputCallback:H3e,editable:a,appState:n,scene:t,property:i})},cf=10,$3e=(e,t,n,i)=>{const s=i.x-e,r=i.y-t,o=i.width*n,a=i.height*n,l=e+s*n,c=t+r*n;return{width:o,height:a,x:l,y:c,...Sw(i,o,a,!1),...ue(i)?{fontSize:i.fontSize*n}:{}}},G3e=(e,t,n,i,s,r,o,a)=>{const l=a.getNonDeletedElementsMap(),c=$3e(e,t,i,r);a.mutateElement(s,c);const u=Oe(r,o);if(u){const d=u.fontSize*i;ys(s,a,{newSize:{width:c.width,height:c.height}});const f=l.get(u.id);f&&ue(f)&&(a.mutateElement(f,{fontSize:d}),ip(s,a,n==="width"?"e":"s",!0))}},Dk=(e,t,n,i,s,r,o,a,l,c)=>{r==="width"?t=Math.round(e/i*100)/100:e=Math.round(t*i*100)/100;const u=t/n;for(let d=0;d<a.length;d++){const f=a[d],h=o[d];G3e(s[0],s[1],r,u,h,f,l,c)}},X3e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,originalAppState:i,shouldChangeByStepSize:s,nextValue:r,scene:o,property:a})=>{const l=o.getNonDeletedElementsMap(),c=F_(t,i);if(r!==void 0){for(const f of c){const h=b6(f,l,n);if(h.length>1){const m=h.map(x=>x.latest),p=h.map(x=>x.original),[U,y,E,v]=xt(p),w=E-U,I=v-y,M=w/I,T=Math.max(tr,a==="width"?Math.max(0,r):w),_=Math.max(tr,a==="height"?Math.max(0,r):I);Dk(T,_,I,M,S(U,y),a,m,p,n,o)}else{const[m]=h,p=m==null?void 0:m.latest,U=m==null?void 0:m.original;if(p&&U&&cl(p,a)){let y=a==="width"?Math.max(0,r):p.width;a==="width"&&(s?y=Fi(y,cf):y=Math.round(y));let E=a==="height"?Math.max(0,r):p.height;a==="height"&&(s?E=Fi(E,cf):E=Math.round(E)),y=Math.max(tr,y),E=Math.max(tr,E),Z0(y,E,p,U,n,o,a==="width"?"e":"s",{shouldInformMutation:!1})}}}o.triggerUpdate();return}const u=a==="width"?e:0,d=a==="height"?e:0;for(const f of c){const h=b6(f,l,n);if(h.length>1){const m=h.map(x=>x.latest),p=h.map(x=>x.original),[U,y,E,v]=xt(p),w=E-U,I=v-y,M=w/I;let T=Math.max(0,w+u);a==="width"&&(s?T=Fi(T,cf):T=Math.round(T));let _=Math.max(0,I+d);a==="height"&&(s?_=Fi(_,cf):_=Math.round(_)),T=Math.max(tr,T),_=Math.max(tr,_),Dk(T,_,I,M,S(U,y),a,m,p,n,o)}else{const[m]=h,p=m==null?void 0:m.latest,U=m==null?void 0:m.original;if(p&&U&&cl(p,a)){let y=Math.max(0,U.width+u);a==="width"&&(s?y=Fi(y,cf):y=Math.round(y));let E=Math.max(0,U.height+d);a==="height"&&(s?E=Fi(E,cf):E=Math.round(E)),y=Math.max(tr,y),E=Math.max(tr,E),Z0(y,E,p,U,n,o,a==="width"?"e":"s",{shouldInformMutation:!1})}}}o.triggerUpdate()},Lk=({property:e,elements:t,elementsMap:n,atomicUnits:i,scene:s,appState:r})=>{const o=L.useMemo(()=>i.map(c=>{const u=b6(c,n);if(u.length>1){const[f,h,m,p]=xt(u.map(U=>U.latest));return Math.round((e==="width"?m-f:p-h)*100)/100}const[d]=u;return Math.round((e==="width"?d.latest.width:d.latest.height)*100)/100}),[n,i,e]),a=new Set(o).size===1?Math.round(o[0]*100)/100:"Mixed",l=o.length>0;return g(Ul,{label:e==="width"?"W":"H",elements:t,dragInputCallback:X3e,value:a,editable:l,appState:r,property:e,scene:s})},Nk=4,j3e=4,Y3e=(e,t)=>e.reduce((n,i)=>{if(!i||kh(i))return n;if(ue(i))return n.push(i),n;if(ns(i)){const s=Oe(i,t);if(s)return n.push(s),n}return n},[]),W3e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:s})=>{const r=s.getNonDeletedElementsMap(),o=t.map(l=>r.get(l.id));let a;if(i){a=Math.max(Math.round(i),Nk);for(const l of o)s.mutateElement(l,{fontSize:a}),$i(l,s.getContainerElement(l),s);s.triggerUpdate()}else{const l=t;for(let c=0;c<o.length;c++){const u=o[c],d=l[c],f=Math.round(d.fontSize),h=Math.round(e);let m=Math.max(f+h,Nk);n&&(m=Fi(m,j3e)),s.mutateElement(u,{fontSize:m}),$i(u,s.getContainerElement(u),s)}s.triggerUpdate()}},K3e=({elements:e,scene:t,appState:n,property:i,elementsMap:s})=>{const r=Y3e(e,s);if(!r.length)return null;const o=r.map(c=>Math.round(c.fontSize*10)/10),a=new Set(o).size===1?o[0]:"Mixed",l=o.length>0;return g(Ul,{label:"F",icon:M5,elements:r,dragInputCallback:W3e,value:a,editable:l,scene:t,property:i,appState:n})},Z3e=(e,t,n,i,s,r)=>{for(let o=0;o<i.length;o++){const a=i[o],[l,c]=[a.x+a.width/2,a.y+a.height/2],[u,d]=Z(S(a.x,a.y),S(l,c),a.angle),f=e==="x"?Math.round(u+t):u,h=e==="y"?Math.round(d+n):d;vm(f,h,a,r,s,!1)}},q3e=(e,t,n,i,s)=>{const r=s.getNonDeletedElementsMap(),[o,a,,]=xt(n),l=e-o,c=t-a;for(let u=0;u<n.length;u++){const d=n[u],f=r.get(d.id);if(f&&(!ue(f)||!f.containerId)){const[h,m]=[f.x+f.width/2,f.y+f.height/2],[p,U]=Z(S(f.x,f.y),S(h,m),f.angle);vm(p+l,U+c,d,s,i,!1)}}},Q3e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldChangeByStepSize:i,nextValue:s,property:r,scene:o,originalAppState:a})=>{var f,h;const l=o.getNonDeletedElementsMap();if(s!==void 0){for(const m of F_(t,a)){const p=b6(m,l,n);if(p.length>1){const[U,y,,]=xt(p.map(w=>w.latest));q3e(r==="x"?s:U,r==="y"?s:y,p.map(w=>w.original),n,o)}else{const U=(f=p[0])==null?void 0:f.original,y=(h=p[0])==null?void 0:h.latest;if(U&&y&&cl(y,r)){const[E,v]=[U.x+U.width/2,U.y+U.height/2],[w,I]=Z(S(U.x,U.y),S(E,v),U.angle);vm(r==="x"?s:w,r==="y"?s:I,U,o,n,!1)}}}o.triggerUpdate();return}const c=i?Fi(e,Y4):e;Z3e(r,r==="x"?c:0,r==="y"?c:0,t,n,o),o.triggerUpdate()},Ok=({property:e,elements:t,elementsMap:n,atomicUnits:i,scene:s,appState:r})=>{const o=L.useMemo(()=>i.map(l=>{const c=Object.keys(l).map(p=>n.get(p)).filter(p=>p!==void 0);if(c.length>1){const[p,U]=xt(c);return Math.round((e==="x"?p:U)*100)/100}const[u]=c,[d,f]=[u.x+u.width/2,u.y+u.height/2],[h,m]=Z(S(u.x,u.y),S(d,f),u.angle);return Math.round((e==="x"?h:m)*100)/100}),[i,n,e]),a=new Set(o).size===1?o[0]:"Mixed";return g(Ul,{label:e==="x"?"X":"Y",elements:t,dragInputCallback:Q3e,value:a,property:e,scene:s,appState:r})},J3e=({accumulatedChange:e,instantChange:t,originalElements:n,originalElementsMap:i,shouldChangeByStepSize:s,nextValue:r,property:o,scene:a,originalAppState:l})=>{const c=a.getNonDeletedElementsMap(),u=n[0],[d,f]=[u.x+u.width/2,u.y+u.height/2],[h,m]=Z(S(u.x,u.y),S(d,f),u.angle);if(l.croppingElementId===u.id){const v=c.get(u.id);if(!v||!ft(v)||!v.crop)return;const w=v.crop;let I=w;const M=v.scale[0]===-1,T=v.scale[1]===-1,{width:_,height:x}=tl(v);if(r!==void 0){if(o==="x"){const N=r*(w.naturalWidth/_);M?I={...w,x:Xe(w.naturalWidth-N-w.width,0,w.naturalWidth-w.width)}:I={...w,x:Xe(r*(w.naturalWidth/_),0,w.naturalWidth-w.width)}}o==="y"&&(I={...w,y:Xe(r*(w.naturalHeight/x),0,w.naturalHeight-w.height)}),a.mutateElement(v,{crop:I});return}const C=(o==="x"?t:0)*(M?-1:1),R=(o==="y"?t:0)*(T?-1:1);I={...w,x:Xe(w.x+C,0,w.naturalWidth-w.width),y:Xe(w.y+R,0,w.naturalHeight-w.height)},a.mutateElement(v,{crop:I});return}if(r!==void 0){vm(o==="x"?r:h,o==="y"?r:m,u,a,i);return}const p=o==="x"?e:0,U=o==="y"?e:0,y=o==="x"?Math.round(s?Fi(u.x+p,Y4):h+p):h,E=o==="y"?Math.round(s?Fi(u.y+U,Y4):m+U):m;vm(y,E,u,a,i)},Pk=({property:e,element:t,elementsMap:n,scene:i,appState:s})=>{const[r,o]=Z(S(t.x,t.y),S(t.x+t.width/2,t.y+t.height/2),t.angle);let a=$a(e==="x"?r:o,2);if(s.croppingElementId===t.id&&ft(t)&&t.crop){const l=moe(t);l&&(a=$a(e==="x"?l.x:l.y,2))}return g(Ul,{label:e==="x"?"X":"Y",elements:[t],dragInputCallback:J3e,scene:i,value:a,property:e,appState:s})},e4e=50,_a=e=>{const t=pp(),n=e.app.scene.getSceneNonce()||1,i=e.app.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}),s=bm(e.app);return g(t4e,{...e,appState:t,sceneNonce:n,selectedElements:i,gridModeEnabled:s})},Yt=({children:e,columns:t=1,heading:n,style:i,...s})=>g("div",{className:pe("exc-stats__row",{"exc-stats__row--heading":n}),style:{gridTemplateColumns:`repeat(${t}, 1fr)`,...i},...s,children:e});Yt.displayName="StatsRow";const y6=({children:e,order:t,style:n,...i})=>g("div",{className:"exc-stats__rows",style:{order:t,...n},...i,children:e});y6.displayName="StatsRows";_a.StatsRow=Yt;_a.StatsRows=y6;const t4e=L.memo(({app:e,onClose:t,renderCustomStats:n,selectedElements:i,appState:s,sceneNonce:r,gridModeEnabled:o})=>{const a=e.scene,l=a.getNonDeletedElements(),c=a.getNonDeletedElementsMap(),u=Yn(),d=i.length===1?i[0]:null,f=i.length>1?i:null,h=s.croppingElementId&&ft(d),m=h?tl(d):null,[p,U]=L.useState({width:0,height:0}),y=L.useMemo(()=>No(w=>{const I=xt(w);U({width:Math.round(I[2])-Math.round(I[0]),height:Math.round(I[3])-Math.round(I[1])})},e4e),[]);L.useEffect(()=>{y(l)},[r,l,y]),L.useEffect(()=>()=>y.cancel(),[y]);const E=L.useMemo(()=>F_(i,s),[i,s]),v=L.useMemo(()=>lB(i),[i]);return g("div",{className:"exc-stats",children:P(eo,{padding:3,children:[P("div",{className:"title",children:[g("h2",{children:k("stats.title")}),g("div",{className:"close",onClick:t,children:Fd})]}),P(T4,{label:g("h3",{children:k("stats.generalStats")}),open:!!(s.stats.panels&Of.generalStats),openTrigger:()=>u(w=>({stats:{open:!0,panels:w.stats.panels^Of.generalStats}})),children:[P(y6,{children:[g(Yt,{heading:!0,children:k("stats.scene")}),P(Yt,{columns:2,children:[g("div",{children:k("stats.shapes")}),g("div",{children:l.length})]}),P(Yt,{columns:2,children:[g("div",{children:k("stats.width")}),g("div",{children:p.width})]}),P(Yt,{columns:2,children:[g("div",{children:k("stats.height")}),g("div",{children:p.height})]}),o&&P(ge,{children:[g(Yt,{heading:!0,children:"Canvas"}),g(Yt,{children:g(L3e,{property:"gridStep",scene:a,appState:s,setAppState:u})})]})]}),n==null?void 0:n(l,s)]}),!v&&i.length>0&&g("div",{id:"elementStats",style:{marginTop:12},children:g(T4,{label:g("h3",{children:k("stats.elementProperties")}),open:!!(s.stats.panels&Of.elementProperties),openTrigger:()=>u(w=>({stats:{open:!0,panels:w.stats.panels^Of.elementProperties}})),children:P(y6,{children:[d&&P(ge,{children:[h&&g(Yt,{heading:!0,children:k("labels.unCroppedDimension")}),s.croppingElementId&&ft(d)&&m&&P(Yt,{columns:2,children:[g("div",{children:k("stats.width")}),g("div",{children:$a(m.width,2)})]}),s.croppingElementId&&ft(d)&&m&&P(Yt,{columns:2,children:[g("div",{children:k("stats.height")}),g("div",{children:$a(m.height,2)})]}),g(Yt,{heading:!0,"data-testid":"stats-element-type",style:{margin:"0.3125rem 0"},children:s.croppingElementId?k("labels.imageCropping"):k(`element.${d.type}`)}),g(Yt,{children:g(Pk,{element:d,property:"x",elementsMap:c,scene:a,appState:s})}),g(Yt,{children:g(Pk,{element:d,property:"y",elementsMap:c,scene:a,appState:s})}),g(Yt,{children:g(Rk,{property:"width",element:d,scene:a,appState:s})}),g(Yt,{children:g(Rk,{property:"height",element:d,scene:a,appState:s})}),!he(d)&&g(Yt,{children:g(D3e,{property:"angle",element:d,scene:a,appState:s})}),g(Yt,{children:g(B3e,{property:"fontSize",element:d,scene:a,appState:s})})]}),f&&P(ge,{children:[eB(f)&&g(Yt,{heading:!0,children:k("element.group")}),P(Yt,{columns:2,style:{margin:"0.3125rem 0"},children:[g("div",{children:k("stats.shapes")}),g("div",{children:i.length})]}),g(Yt,{children:g(Ok,{property:"x",elements:f,elementsMap:c,atomicUnits:E,scene:a,appState:s})}),g(Yt,{children:g(Ok,{property:"y",elements:f,elementsMap:c,atomicUnits:E,scene:a,appState:s})}),g(Yt,{children:g(Lk,{property:"width",elements:f,elementsMap:c,atomicUnits:E,scene:a,appState:s})}),g(Yt,{children:g(Lk,{property:"height",elements:f,elementsMap:c,atomicUnits:E,scene:a,appState:s})}),g(Yt,{children:g(V3e,{property:"angle",elements:f,scene:a,appState:s})}),g(Yt,{children:g(K3e,{property:"fontSize",elements:f,scene:a,appState:s,elementsMap:c})})]})]})})})]})})},(e,t)=>e.sceneNonce===t.sceneNonce&&e.selectedElements===t.selectedElements&&e.appState.stats.panels===t.appState.stats.panels&&e.gridModeEnabled===t.gridModeEnabled&&e.appState.gridStep===t.appState.gridStep&&e.appState.croppingElementId===t.appState.croppingElementId),n4e=({sourceElementId:e,onClose:t,appState:n,scene:i,generateLinkForSelection:s=zB})=>{var f;const r=i.getNonDeletedElementsMap(),o=((f=r.get(e))==null?void 0:f.link)??null,[a,l]=L.useState(o),[c,u]=L.useState(!1);L.useEffect(()=>{const h=He(r,n);let m=o;if(h.length>0&&s){const p=HB(h,n);p&&(m=$s(s(p.id,p.type)))}l(m)},[r,n,n.selectedElementIds,o,s]);const d=L.useCallback(()=>{var h;if(a&&a!==((h=r.get(e))==null?void 0:h.link)){const m=r.get(e);m&&i.mutateElement(m,{link:a})}if(!a&&c&&e){const m=r.get(e);m&&i.mutateElement(m,{link:null})}t==null||t()},[e,a,r,c,i,t]);return L.useEffect(()=>{const h=m=>{var p,U;((p=n.openDialog)==null?void 0:p.name)==="elementLinkSelector"&&m.key===z.ENTER&&d(),((U=n.openDialog)==null?void 0:U.name)==="elementLinkSelector"&&m.key===z.ESCAPE&&(t==null||t())};return window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}},[n,t,d]),P("div",{className:"ElementLinkDialog",children:[P("div",{className:"ElementLinkDialog__header",children:[g("h2",{children:k("elementLink.title")}),g("p",{children:k("elementLink.desc")})]}),P("div",{className:"ElementLinkDialog__input",children:[g(Gh,{value:a??"",onChange:h=>{c||u(!0),l(h)},onKeyDown:h=>{h.key===z.ENTER&&d()},className:"ElementLinkDialog__input-field",selectOnRender:!0}),o&&a&&g(Ye,{type:"button",title:k("buttons.remove"),"aria-label":k("buttons.remove"),label:k("buttons.remove"),onClick:()=>{l(null),u(!0)},className:"ElementLinkDialog__remove",icon:Oc})]}),P("div",{className:"ElementLinkDialog__actions",children:[g($h,{label:k("buttons.cancel"),onClick:()=>{t==null||t()},style:{marginRight:10}}),g($h,{label:k("buttons.confirm"),onClick:d,actionType:"primary"})]})]})},B_=({children:e,onClose:t})=>{const[n,i]=L.useState(!!e),{container:s}=oa(),r=ae.useCallback(()=>{i(!1),t&&t(),s==null||s.focus()},[t,s]);return g(ge,{children:n&&g(Ws,{size:"small",onCloseRequest:r,title:k("errorDialog.title"),children:g("div",{style:{whiteSpace:"pre-wrap"},children:e})})})},i4e=()=>P("div",{className:"HelpDialog__header",children:[P("a",{className:"HelpDialog__btn",href:"https://docs.excalidraw.com",target:"_blank",rel:"noopener",children:[g("div",{className:"HelpDialog__link-icon",children:kA}),k("helpDialog.documentation")]}),P("a",{className:"HelpDialog__btn",href:"https://plus.excalidraw.com/blog",target:"_blank",rel:"noopener",children:[g("div",{className:"HelpDialog__link-icon",children:kA}),k("helpDialog.blog")]}),P("a",{className:"HelpDialog__btn",href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:Fw}),k("helpDialog.github")]}),P("a",{className:"HelpDialog__btn",href:"https://youtube.com/@excalidraw",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:IH}),"YouTube"]})]}),s4e=e=>P(ge,{children:[g("h3",{children:e.title}),g("div",{className:"HelpDialog__islands-container",children:e.children})]}),KE=e=>P("div",{className:`HelpDialog__island ${e.className}`,children:[g("h4",{className:"HelpDialog__island-title",children:e.caption}),g("div",{className:"HelpDialog__island-content",children:e.children})]});function*r4e(e,t){let n=!0;for(const i of e)n||(yield t),n=!1,yield i}const o4e=e=>e.replace(/\b[a-z]\b/,t=>t.toUpperCase()),me=({label:e,shortcuts:t,isOr:n=!0})=>{const i=t.map(s=>(s.endsWith("++")?[...s.slice(0,-2).split("+"),"+"]:s.split("+")).map(o=>g(a4e,{children:o4e(o)},o)));return P("div",{className:"HelpDialog__shortcut",children:[g("div",{children:e}),g("div",{className:"HelpDialog__key-container",children:[...r4e(i,n?k("helpDialog.or"):null)]})]})},a4e=e=>g("kbd",{className:"HelpDialog__key",...e}),l4e=({onClose:e})=>{const t=ae.useCallback(()=>{e&&e()},[e]);return g(ge,{children:P(Ws,{onCloseRequest:t,title:k("helpDialog.title"),className:"HelpDialog",children:[g(i4e,{}),P(s4e,{title:k("helpDialog.shortcuts"),children:[P(KE,{className:"HelpDialog__island--tools",caption:k("helpDialog.tools"),children:[g(me,{label:k("toolBar.hand"),shortcuts:[z.H]}),g(me,{label:k("toolBar.selection"),shortcuts:[z.V,z[1]]}),g(me,{label:k("toolBar.rectangle"),shortcuts:[z.R,z[2]]}),g(me,{label:k("toolBar.diamond"),shortcuts:[z.D,z[3]]}),g(me,{label:k("toolBar.ellipse"),shortcuts:[z.O,z[4]]}),g(me,{label:k("toolBar.arrow"),shortcuts:[z.A,z[5]]}),g(me,{label:k("toolBar.line"),shortcuts:[z.L,z[6]]}),g(me,{label:k("toolBar.freedraw"),shortcuts:[z.P,z[7]]}),g(me,{label:k("toolBar.text"),shortcuts:[z.T,z[8]]}),g(me,{label:k("toolBar.image"),shortcuts:[z[9]]}),g(me,{label:k("toolBar.eraser"),shortcuts:[z.E,z[0]]}),g(me,{label:k("toolBar.frame"),shortcuts:[z.F]}),g(me,{label:k("toolBar.laser"),shortcuts:[z.K]}),g(me,{label:k("labels.eyeDropper"),shortcuts:[z.I,"Shift+S","Shift+G"]}),g(me,{label:k("helpDialog.editLineArrowPoints"),shortcuts:[Q("CtrlOrCmd+Enter")]}),g(me,{label:k("helpDialog.editText"),shortcuts:[Q("Enter")]}),g(me,{label:k("helpDialog.textNewLine"),shortcuts:[Q("Enter"),Q("Shift+Enter")]}),g(me,{label:k("helpDialog.textFinish"),shortcuts:[Q("Esc"),Q("CtrlOrCmd+Enter")]}),g(me,{label:k("helpDialog.curvedArrow"),shortcuts:["A",k("helpDialog.click"),k("helpDialog.click"),k("helpDialog.click")],isOr:!1}),g(me,{label:k("helpDialog.curvedLine"),shortcuts:["L",k("helpDialog.click"),k("helpDialog.click"),k("helpDialog.click")],isOr:!1}),g(me,{label:k("helpDialog.cropStart"),shortcuts:[k("helpDialog.doubleClick"),Q("Enter")],isOr:!0}),g(me,{label:k("helpDialog.cropFinish"),shortcuts:[Q("Enter"),Q("Escape")],isOr:!0}),g(me,{label:k("toolBar.lock"),shortcuts:[z.Q]}),g(me,{label:k("helpDialog.preventBinding"),shortcuts:[Q("CtrlOrCmd")]}),g(me,{label:k("toolBar.link"),shortcuts:[Q("CtrlOrCmd+K")]}),g(me,{label:k("toolBar.convertElementType"),shortcuts:["Tab","Shift+Tab"],isOr:!0})]}),P(KE,{className:"HelpDialog__island--view",caption:k("helpDialog.view"),children:[g(me,{label:k("buttons.zoomIn"),shortcuts:[Q("CtrlOrCmd++")]}),g(me,{label:k("buttons.zoomOut"),shortcuts:[Q("CtrlOrCmd+-")]}),g(me,{label:k("buttons.resetZoom"),shortcuts:[Q("CtrlOrCmd+0")]}),g(me,{label:k("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),g(me,{label:k("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),g(me,{label:k("helpDialog.movePageUpDown"),shortcuts:["PgUp/PgDn"]}),g(me,{label:k("helpDialog.movePageLeftRight"),shortcuts:["Shift+PgUp/PgDn"]}),g(me,{label:k("buttons.zenMode"),shortcuts:[Q("Alt+Z")]}),g(me,{label:k("buttons.objectsSnapMode"),shortcuts:[Q("Alt+S")]}),g(me,{label:k("labels.toggleGrid"),shortcuts:[Q("CtrlOrCmd+'")]}),g(me,{label:k("labels.viewMode"),shortcuts:[Q("Alt+R")]}),g(me,{label:k("labels.toggleTheme"),shortcuts:[Q("Alt+Shift+D")]}),g(me,{label:k("stats.fullTitle"),shortcuts:[Q("Alt+/")]}),g(me,{label:k("search.title"),shortcuts:[Vi("searchMenu")]}),g(me,{label:k("commandPalette.title"),shortcuts:H0?[Vi("commandPalette")]:[Vi("commandPalette"),Vi("commandPalette",1)]})]}),P(KE,{className:"HelpDialog__island--editor",caption:k("helpDialog.editor"),children:[g(me,{label:k("helpDialog.createFlowchart"),shortcuts:[Q("CtrlOrCmd+Arrow Key")],isOr:!0}),g(me,{label:k("helpDialog.navigateFlowchart"),shortcuts:[Q("Alt+Arrow Key")],isOr:!0}),g(me,{label:k("labels.moveCanvas"),shortcuts:[Q(`Space+${k("helpDialog.drag")}`),Q(`Wheel+${k("helpDialog.drag")}`)],isOr:!0}),g(me,{label:k("buttons.clearReset"),shortcuts:[Q("CtrlOrCmd+Delete")]}),g(me,{label:k("labels.delete"),shortcuts:[Q("Delete")]}),g(me,{label:k("labels.cut"),shortcuts:[Q("CtrlOrCmd+X")]}),g(me,{label:k("labels.copy"),shortcuts:[Q("CtrlOrCmd+C")]}),g(me,{label:k("labels.paste"),shortcuts:[Q("CtrlOrCmd+V")]}),g(me,{label:k("labels.pasteAsPlaintext"),shortcuts:[Q("CtrlOrCmd+Shift+V")]}),g(me,{label:k("labels.selectAll"),shortcuts:[Q("CtrlOrCmd+A")]}),g(me,{label:k("labels.multiSelect"),shortcuts:[Q(`Shift+${k("helpDialog.click")}`)]}),g(me,{label:k("helpDialog.deepSelect"),shortcuts:[Q(`CtrlOrCmd+${k("helpDialog.click")}`)]}),g(me,{label:k("helpDialog.deepBoxSelect"),shortcuts:[Q(`CtrlOrCmd+${k("helpDialog.drag")}`)]}),(S_||H0)&&g(me,{label:k("labels.copyAsPng"),shortcuts:[Q("Shift+Alt+C")]}),g(me,{label:k("labels.copyStyles"),shortcuts:[Q("CtrlOrCmd+Alt+C")]}),g(me,{label:k("labels.pasteStyles"),shortcuts:[Q("CtrlOrCmd+Alt+V")]}),g(me,{label:k("labels.sendToBack"),shortcuts:[Q(Xo?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")]}),g(me,{label:k("labels.bringToFront"),shortcuts:[Q(Xo?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")]}),g(me,{label:k("labels.sendBackward"),shortcuts:[Q("CtrlOrCmd+[")]}),g(me,{label:k("labels.bringForward"),shortcuts:[Q("CtrlOrCmd+]")]}),g(me,{label:k("labels.alignTop"),shortcuts:[Q("CtrlOrCmd+Shift+Up")]}),g(me,{label:k("labels.alignBottom"),shortcuts:[Q("CtrlOrCmd+Shift+Down")]}),g(me,{label:k("labels.alignLeft"),shortcuts:[Q("CtrlOrCmd+Shift+Left")]}),g(me,{label:k("labels.alignRight"),shortcuts:[Q("CtrlOrCmd+Shift+Right")]}),g(me,{label:k("labels.duplicateSelection"),shortcuts:[Q("CtrlOrCmd+D"),Q(`Alt+${k("helpDialog.drag")}`)]}),g(me,{label:k("helpDialog.toggleElementLock"),shortcuts:[Q("CtrlOrCmd+Shift+L")]}),g(me,{label:k("buttons.undo"),shortcuts:[Q("CtrlOrCmd+Z")]}),g(me,{label:k("buttons.redo"),shortcuts:KP?[Q("CtrlOrCmd+Y"),Q("CtrlOrCmd+Shift+Z")]:[Q("CtrlOrCmd+Shift+Z")]}),g(me,{label:k("labels.group"),shortcuts:[Q("CtrlOrCmd+G")]}),g(me,{label:k("labels.ungroup"),shortcuts:[Q("CtrlOrCmd+Shift+G")]}),g(me,{label:k("labels.flipHorizontal"),shortcuts:[Q("Shift+H")]}),g(me,{label:k("labels.flipVertical"),shortcuts:[Q("Shift+V")]}),g(me,{label:k("labels.showStroke"),shortcuts:[Q("S")]}),g(me,{label:k("labels.showBackground"),shortcuts:[Q("G")]}),g(me,{label:k("labels.showFonts"),shortcuts:[Q("Shift+F")]}),g(me,{label:k("labels.decreaseFontSize"),shortcuts:[Q("CtrlOrCmd+Shift+<")]}),g(me,{label:k("labels.increaseFontSize"),shortcuts:[Q("CtrlOrCmd+Shift+>")]})]})]})]})})},c4e=2e3,z_=()=>{const[e,t]=L.useState(null),n=L.useRef(0),i=()=>{clearTimeout(n.current),t("success"),n.current=window.setTimeout(()=>{t(null)},c4e)},s=L.useCallback(()=>{t(null)},[]);return{copyStatus:e,resetCopyStatus:s,onCopy:i}},kU=({title:e,name:t,checked:n,onChange:i,disabled:s=!1})=>g("div",{className:pe("Switch",{toggled:n,disabled:s}),children:g("input",{name:t,id:t,title:e,type:"checkbox",checked:n,disabled:s,onChange:()=>i(!n),onKeyDown:r=>{r.key===" "&&i(!n)}})}),u4e="filter"in document.createElement("canvas").getContext("2d"),d4e=()=>P("div",{children:[g("h3",{children:k("canvasError.cannotShowPreview")}),g("p",{children:g("span",{children:k("canvasError.canvasTooBig")})}),P("em",{children:["(",k("canvasError.canvasTooBigTip"),")"]})]}),f4e=({appStateSnapshot:e,elementsSnapshot:t,files:n,actionManager:i,onExportImage:s,name:r})=>{const o=Gn(t,e),[a,l]=L.useState(r),[c,u]=L.useState(o),[d,f]=L.useState(e.exportBackground),[h,m]=L.useState(e.exportWithDarkMode),[p,U]=L.useState(e.exportEmbedScene),[y,E]=L.useState(e.exportScale),v=L.useRef(null),[w,I]=L.useState(null),{onCopy:M,copyStatus:T,resetCopyStatus:_}=z_();L.useEffect(()=>{_()},[a,d,h,y,p,_]);const{exportedElements:x,exportingFrame:C}=ny(t,e,c);return L.useEffect(()=>{const R=v.current;if(!R)return;const N=R.offsetWidth,D=R.offsetHeight;N&&ay({elements:x,appState:{...e,name:a,exportBackground:d,exportWithDarkMode:h,exportScale:y,exportEmbedScene:p},files:n,exportPadding:ug,maxWidthOrHeight:Math.max(N,D),exportingFrame:C}).then($=>(I(null),hm($).then(()=>{R.replaceChildren($)}).catch(G=>{throw G.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(k("canvasError.canvasTooBig")):G}))).catch($=>{console.error($),I($)})},[e,n,x,C,a,d,h,y,p]),P("div",{className:"ImageExportModal",children:[g("h3",{children:k("imageExportDialog.header")}),P("div",{className:"ImageExportModal__preview",children:[g("div",{className:"ImageExportModal__preview__canvas",ref:v,children:w&&g(d4e,{})}),g("div",{className:"ImageExportModal__preview__filename",children:!zd&&g("input",{type:"text",className:"TextInput",value:a,style:{width:"30ch"},onChange:R=>{l(R.target.value),i.executeAction(E5e,"ui",R.target.value)}})})]}),P("div",{className:"ImageExportModal__settings",children:[g("h3",{children:k("imageExportDialog.header")}),o&&g(o1,{label:k("imageExportDialog.label.onlySelected"),name:"exportOnlySelected",children:g(kU,{name:"exportOnlySelected",checked:c,onChange:R=>{u(R)}})}),g(o1,{label:k("imageExportDialog.label.withBackground"),name:"exportBackgroundSwitch",children:g(kU,{name:"exportBackgroundSwitch",checked:d,onChange:R=>{f(R),i.executeAction(w5e,"ui",R)}})}),u4e&&g(o1,{label:k("imageExportDialog.label.darkMode"),name:"exportDarkModeSwitch",children:g(kU,{name:"exportDarkModeSwitch",checked:h,onChange:R=>{m(R),i.executeAction(_5e,"ui",R)}})}),g(o1,{label:k("imageExportDialog.label.embedScene"),tooltip:k("imageExportDialog.tooltip.embedScene"),name:"exportEmbedSwitch",children:g(kU,{name:"exportEmbedSwitch",checked:p,onChange:R=>{U(R),i.executeAction(hG,"ui",R)}})}),g(o1,{label:k("imageExportDialog.label.scale"),name:"exportScale",children:g(KX,{name:"exportScale",value:y,onChange:R=>{E(R),i.executeAction(v5e,"ui",R)},choices:B9.map(R=>({value:R,label:`${R}×`}))})}),P("div",{className:"ImageExportModal__settings__buttons",children:[g(no,{className:"ImageExportModal__settings__buttons__button",label:k("imageExportDialog.title.exportToPng"),onClick:()=>s(O8.png,x,{exportingFrame:C}),icon:YA,children:k("imageExportDialog.button.exportToPng")}),g(no,{className:"ImageExportModal__settings__buttons__button",label:k("imageExportDialog.title.exportToSvg"),onClick:()=>s(O8.svg,x,{exportingFrame:C}),icon:YA,children:k("imageExportDialog.button.exportToSvg")}),(S_||H0)&&g(no,{className:"ImageExportModal__settings__buttons__button",label:k("imageExportDialog.title.copyPngToClipboard"),status:T,onClick:async()=>{await s(O8.clipboard,x,{exportingFrame:C}),M()},icon:lp,children:k("imageExportDialog.button.copyPngToClipboard")})]})]})]})},o1=({label:e,children:t,tooltip:n,name:i})=>P("div",{className:"ImageExportModal__settings__setting",title:e,children:[P("label",{htmlFor:i,className:"ImageExportModal__settings__setting__label",children:[e,n&&g(ll,{label:n,long:!0,children:fde})]}),g("div",{className:"ImageExportModal__settings__setting__content",children:t})]}),h4e=({elements:e,appState:t,files:n,actionManager:i,onExportImage:s,onCloseRequest:r,name:o})=>{const[{appStateSnapshot:a,elementsSnapshot:l}]=L.useState(()=>({appStateSnapshot:Ga(t),elementsSnapshot:Ga(e)}));return g(Ws,{onCloseRequest:r,size:"wide",title:!1,children:g(f4e,{elementsSnapshot:l,appStateSnapshot:a,files:n,actionManager:i,onExportImage:s,name:o})})},W4=({children:e,color:t})=>g("div",{className:"Card",style:{"--card-color":t==="primary"?"var(--color-primary)":hi[t][7],"--card-color-darker":t==="primary"?"var(--color-primary-darker)":hi[t][8],"--card-color-darkest":t==="primary"?"var(--color-primary-darkest)":hi[t][9]},children:e}),g4e=({elements:e,appState:t,setAppState:n,files:i,actionManager:s,exportOpts:r,canvas:o,onCloseRequest:a})=>{const{onExportToBackend:l}=r;return g("div",{className:"ExportDialog ExportDialog--json",children:P("div",{className:"ExportDialog-cards",children:[r.saveFileToDisk&&P(W4,{color:"lime",children:[g("div",{className:"Card-icon",children:yue}),g("h2",{children:k("exportDialog.disk_title")}),P("div",{className:"Card-details",children:[k("exportDialog.disk_details"),!zd&&s.renderAction("changeProjectName")]}),g(Ye,{className:"Card-button",type:"button",title:k("exportDialog.disk_button"),"aria-label":k("exportDialog.disk_button"),showAriaLabel:!0,onClick:()=>{s.executeAction(gG,"ui")}})]}),l&&P(W4,{color:"pink",children:[g("div",{className:"Card-icon",children:Wb}),g("h2",{children:k("exportDialog.link_title")}),g("div",{className:"Card-details",children:k("exportDialog.link_details")}),g(Ye,{className:"Card-button",type:"button",title:k("exportDialog.link_button"),"aria-label":k("exportDialog.link_button"),showAriaLabel:!0,onClick:async()=>{try{at("export","link",`ui (${qm()})`),await l(e,t,i),a()}catch(c){n({errorMessage:c.message})}}})]}),r.renderCustomUI&&r.renderCustomUI(e,t,i,o)]})})},m4e=({elements:e,appState:t,files:n,actionManager:i,exportOpts:s,canvas:r,setAppState:o})=>{var l;const a=ae.useCallback(()=>{o({openDialog:null})},[o]);return g(ge,{children:((l=t.openDialog)==null?void 0:l.name)==="jsonExport"&&g(Ws,{onCloseRequest:a,title:k("buttons.export"),children:g(g4e,{elements:e,appState:t,setAppState:o,files:n,actionManager:i,onCloseRequest:a,exportOpts:s,canvas:r})})})},p4e="small",U4e=e=>P("label",{className:pe("ToolIcon ToolIcon__LaserPointer",`ToolIcon_size_${p4e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-LaserPointer"}),g("div",{className:"ToolIcon__icon",children:h4})]}),b4e=({UIOptions:e})=>P(Tt,{__fallback:!0,children:[g(Tt.DefaultItems.LoadScene,{}),g(Tt.DefaultItems.SaveToActiveFile,{}),e.canvasActions.export&&g(Tt.DefaultItems.Export,{}),e.canvasActions.saveAsImage&&g(Tt.DefaultItems.SaveAsImage,{}),g(Tt.DefaultItems.SearchMenu,{}),g(Tt.DefaultItems.Help,{}),g(Tt.DefaultItems.ClearCanvas,{}),g(Tt.Separator,{}),g(Tt.Group,{title:"Excalidraw links",children:g(Tt.DefaultItems.Socials,{})}),g(Tt.Separator,{}),g(Tt.DefaultItems.ToggleTheme,{}),g(Tt.DefaultItems.ChangeCanvasBackground,{})]}),y4e=()=>P(Nu,{__fallback:!0,children:[g(Nu.Actions.SaveToDisk,{}),g(Nu.Actions.ExportToImage,{})]}),E4e=({actionManager:e,appState:t,files:n,setAppState:i,elements:s,canvas:r,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,showExitZenModeBtn:c,renderTopRightUI:u,renderCustomStats:d,UIOptions:f,onExportImage:h,renderWelcomeScreen:m,children:p,app:U,isCollaborating:y,generateLinkForSelection:E})=>{var H,V,X;const v=si(),w=q8e(),I=w.tunnelsJotai.Provider,[M,T]=pn(z5),_=()=>f.canvasActions.export?g(m4e,{elements:s,appState:t,files:n,actionManager:e,exportOpts:f.canvasActions.export,canvas:r,setAppState:i}):null,x=()=>{var j;return!f.canvasActions.saveAsImage||((j=t.openDialog)==null?void 0:j.name)!=="imageExport"?null:g(h4e,{elements:s,appState:t,files:n,actionManager:e,onExportImage:h,onCloseRequest:()=>i({openDialog:null}),name:U.getName()})},C=()=>P("div",{style:{position:"relative"},children:[g(w.MainMenuTunnel.Out,{}),m&&g(w.WelcomeScreenMenuHintTunnel.Out,{})]}),R=()=>g(Em,{heading:"selectedShapeActions",className:pe("selected-shape-actions zen-mode-transition",{"transition-left":t.zenModeEnabled}),children:g(eo,{className:Mc.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:`${t.height-166}px`},children:g(QG,{appState:t,elementsMap:U.scene.getNonDeletedElementsMap(),renderAction:e.renderAction,app:U})})}),N=()=>{var fe,ie,Ue,Ve,$e;const j=Aw(t,s),q=t.stats.open&&!t.zenModeEnabled&&!t.viewModeEnabled&&((fe=t.openDialog)==null?void 0:fe.name)!=="elementLinkSelector";return g(hX,{side:"top",children:P("div",{className:"App-menu App-menu_top",children:[P(mr.Col,{gap:6,className:pe("App-menu_top__left"),children:[C(),j&&R()]}),!t.viewModeEnabled&&((ie=t.openDialog)==null?void 0:ie.name)!=="elementLinkSelector"&&g(Em,{heading:"shapes",className:"shapes-section",children:nt=>P("div",{style:{position:"relative"},children:[m&&g(w.WelcomeScreenToolbarHintTunnel.Out,{}),g(mr.Col,{gap:4,align:"start",children:P(mr.Row,{gap:1,className:pe("App-toolbar-container",{"zen-mode":t.zenModeEnabled}),children:[P(eo,{padding:1,className:pe("App-toolbar",{"zen-mode":t.zenModeEnabled}),children:[g(mX,{appState:t,isMobile:v.editor.isMobile,device:v,app:U}),nt,P(mr.Row,{gap:1,children:[g(pX,{zenModeEnabled:t.zenModeEnabled,checked:t.penMode,onChange:()=>l(null),title:k("toolBar.penMode"),penDetected:t.penDetected}),g(fX,{checked:t.activeTool.locked,onChange:o,title:k("toolBar.lock")}),g("div",{className:"App-toolbar__divider"}),g(gX,{checked:Hh(t),onChange:()=>a(),title:k("toolBar.hand"),isMobile:!0}),g(JG,{appState:t,activeTool:t.activeTool,UIOptions:f,app:U})]})]}),y&&g(eo,{style:{marginLeft:8,alignSelf:"center",height:"fit-content"},children:g(U4e,{title:k("toolBar.laser"),checked:t.activeTool.type===Zn.laser,onChange:()=>U.setActiveTool({type:Zn.laser}),isMobile:!0})})]})})]})}),P("div",{className:pe("layer-ui__wrapper__top-right zen-mode-transition",{"transition-right":t.zenModeEnabled}),children:[t.collaborators.size>0&&g(UX,{collaborators:t.collaborators,userToFollow:((Ue=t.userToFollow)==null?void 0:Ue.socketId)||null}),u==null?void 0:u(v.editor.isMobile,t),!t.viewModeEnabled&&((Ve=t.openDialog)==null?void 0:Ve.name)!=="elementLinkSelector"&&(!$||(($e=t.openSidebar)==null?void 0:$e.name)!==yr.name)&&g(w.DefaultSidebarTriggerTunnel.Out,{}),q&&g(_a,{app:U,onClose:()=>{e.executeAction(D4)},renderCustomStats:d})]})]})})},D=()=>g(xk,{__fallback:!0,onDock:j=>{at("sidebar",`toggleDock (${j?"dock":"undock"})`,`(${v.editor.isMobile?"mobile":"desktop"})`)}}),$=Ez(N_),G=P(ge,{children:[p,g(b4e,{UIOptions:f}),g(xk.Trigger,{__fallback:!0,icon:Lw,title:r0(k("toolBar.library")),onToggle:j=>{j&&at("sidebar",`${yr.name} (open)`,`button (${v.editor.isMobile?"mobile":"desktop"})`)},tab:yr.defaultTab,children:k("toolBar.library")}),g(y4e,{}),((H=t.openDialog)==null?void 0:H.name)==="ttd"&&g(Ej,{__fallback:!0}),t.isLoading&&g(dX,{delay:250}),t.errorMessage&&g(B_,{onClose:()=>i({errorMessage:null}),children:t.errorMessage}),M&&!v.editor.isMobile&&g(Mge,{colorPickerType:M.colorPickerType,onCancel:()=>{T(null)},onChange:(j,q,fe,{altKey:ie})=>{if(!(j!=="elementBackground"&&j!=="elementStroke"))if(fe.length){for(const Ue of fe)pi(Ue,_e(s),{[ie&&M.swapPreviewOnAlt?j==="elementBackground"?"strokeColor":"backgroundColor":j==="elementBackground"?"backgroundColor":"strokeColor"]:q}),Gt.delete(Ue);U.scene.triggerUpdate()}else i(j==="elementBackground"?{currentItemBackgroundColor:q}:{currentItemStrokeColor:q})},onSelect:(j,q)=>{var fe;T(ie=>ie!=null&&ie.keepOpenOnAlt&&q.altKey?ie:null),(fe=M==null?void 0:M.onSelect)==null||fe.call(M,j,q)}}),((V=t.openDialog)==null?void 0:V.name)==="help"&&g(l4e,{onClose:()=>{i({openDialog:null})}}),g(nEe,{}),((X=t.openDialog)==null?void 0:X.name)==="elementLinkSelector"&&g(n4e,{sourceElementId:t.openDialog.sourceElementId,onClose:()=>{i({openDialog:null})},scene:U.scene,appState:t,generateLinkForSelection:E}),g(w.OverwriteConfirmDialogTunnel.Out,{}),x(),_(),t.pasteDialog.shown&&g(_7e,{setAppState:i,appState:t,onClose:()=>i({pasteDialog:{shown:!1,data:null}})}),v.editor.isMobile&&g(w7e,{app:U,appState:t,elements:s,actionManager:e,renderJSONExportDialog:_,renderImageExportDialog:x,setAppState:i,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,renderTopRightUI:u,renderCustomStats:d,renderSidebars:D,device:v,renderWelcomeScreen:m,UIOptions:f}),!v.editor.isMobile&&P(ge,{children:[P("div",{className:"layer-ui__wrapper",style:t.openSidebar&&$&&v.editor.canFitSidebar?{width:"calc(100% - var(--right-sidebar-width))"}:{},children:[m&&g(w.WelcomeScreenCenterTunnel.Out,{}),N(),g(bX,{appState:t,actionManager:e,showExitZenModeBtn:c,renderWelcomeScreen:m}),t.scrolledOutside&&g("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{i(j=>({...em(s,j)}))},children:k("buttons.scrollBackToContent")})]}),D()]})]});return g(DV.Provider,{value:t,children:g(I,{children:g(KG.Provider,{value:w,children:G})})})},Fk=e=>{const{suggestedBindings:t,startBoundElement:n,cursorButton:i,scrollX:s,scrollY:r,...o}=e;return o},v4e=(e,t)=>{if(e.children!==t.children)return!1;const{canvas:n,appState:i,...s}=e,{canvas:r,appState:o,...a}=t;return Ji(Fk(i),Fk(o),{selectedElementIds:Ji,selectedGroupIds:Ji})&&Ji(s,a)},w4e=ae.memo(E4e,v4e),_4e="small",ZE=e=>P("label",{className:pe("ToolIcon ToolIcon__MagicButton",`ToolIcon_size_${_4e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),g("div",{className:"ToolIcon__icon",children:e.icon})]}),T4e=({trails:e})=>{const t=L.useRef(null);return L.useEffect(()=>{if(t.current)for(const n of e)n.start(t.current);return()=>{for(const n of e)n.stop()}},e),g("div",{className:"SVGLayer",children:g("svg",{ref:t})})},S4e=e=>{const t=L.useRef(!1);return L.useEffect(()=>{var l;if(!t.current){t.current=!0;return}const n=new Map,i=new Map,s=new Map,r=new Map,o=new Map;e.appState.collaborators.forEach((c,u)=>{if(c.selectedElementIds)for(const d of Object.keys(c.selectedElementIds))s.has(d)||s.set(d,[]),s.get(d).push(u);!c.pointer||c.pointer.renderCursor===!1||(c.username&&r.set(u,c.username),c.userState&&o.set(u,c.userState),i.set(u,hr({sceneX:c.pointer.x,sceneY:c.pointer.y},e.appState)),n.set(u,c.button))});const a=((l=e.containerRef)==null?void 0:l.current)&&getComputedStyle(e.containerRef.current).getPropertyValue("--color-selection")||"#6965db";YEe({canvas:e.canvas,elementsMap:e.elementsMap,visibleElements:e.visibleElements,selectedElements:e.selectedElements,allElementsMap:e.allElementsMap,scale:window.devicePixelRatio,appState:e.appState,renderConfig:{remotePointerViewportCoords:i,remotePointerButton:n,remoteSelectedElementIds:s,remotePointerUsernames:r,remotePointerUserStates:o,selectionColor:a,renderScrollbars:e.renderScrollbars},device:e.device,callback:e.renderInteractiveSceneCallback},k_())}),g("canvas",{className:"excalidraw__canvas interactive",style:{width:e.appState.width,height:e.appState.height,cursor:e.appState.viewModeEnabled?wt.GRAB:wt.AUTO},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:e.handleCanvasRef,onContextMenu:e.onContextMenu,onPointerMove:e.onPointerMove,onPointerUp:e.onPointerUp,onPointerCancel:e.onPointerCancel,onTouchMove:e.onTouchMove,onPointerDown:e.onPointerDown,onDoubleClick:e.appState.viewModeEnabled?void 0:e.onDoubleClick,children:k("labels.drawingCanvas")})},Bk=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,editingGroupId:e.editingGroupId,editingLinearElement:e.editingLinearElement,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,selectionElement:e.selectionElement,selectedGroupIds:e.selectedGroupIds,selectedLinearElement:e.selectedLinearElement,multiElement:e.multiElement,isBindingEnabled:e.isBindingEnabled,suggestedBindings:e.suggestedBindings,isRotating:e.isRotating,elementsToHighlight:e.elementsToHighlight,collaborators:e.collaborators,activeEmbeddable:e.activeEmbeddable,snapLines:e.snapLines,zenModeEnabled:e.zenModeEnabled,editingTextElement:e.editingTextElement,isCropping:e.isCropping,croppingElementId:e.croppingElementId,searchMatches:e.searchMatches}),I4e=(e,t)=>e.selectionNonce!==t.selectionNonce||e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements||e.selectedElements!==t.selectedElements||e.renderScrollbars!==t.renderScrollbars?!1:Ji(Bk(e.appState),Bk(t.appState)),x4e=ae.memo(S4e,I4e),C4e=e=>{const t=L.useRef(null),n=L.useRef(!1);return L.useEffect(()=>{const i=t.current;if(!i)return;const s=e.canvas;n.current||(n.current=!0,i.replaceChildren(s),s.classList.add("excalidraw__canvas","static"));const r=`${e.appState.width}px`,o=`${e.appState.height}px`;s.style.width!==r&&(s.style.width=r),s.style.height!==o&&(s.style.height=o);const a=e.appState.width*e.scale,l=e.appState.height*e.scale;s.width!==a&&(s.width=a),s.height!==l&&(s.height=l),Q$({canvas:s,rc:e.rc,scale:e.scale,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,visibleElements:e.visibleElements,appState:e.appState,renderConfig:e.renderConfig},k_())}),g("div",{className:"excalidraw__canvas-wrapper",ref:t})},zk=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,hoveredElementIds:e.hoveredElementIds,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,pendingImageElementId:e.pendingImageElementId,shouldCacheIgnoreZoom:e.shouldCacheIgnoreZoom,viewBackgroundColor:e.viewBackgroundColor,exportScale:e.exportScale,selectedElementsAreBeingDragged:e.selectedElementsAreBeingDragged,gridSize:e.gridSize,gridStep:e.gridStep,frameRendering:e.frameRendering,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,editingGroupId:e.editingGroupId,currentHoveredFontFamily:e.currentHoveredFontFamily,croppingElementId:e.croppingElementId}),A4e=(e,t)=>e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements?!1:Ji(zk(e.appState),zk(t.appState))&&Ji(e.renderConfig,t.renderConfig),M4e=ae.memo(C4e,A4e),vj=({canvas:e,rc:t,newElement:n,elementsMap:i,allElementsMap:s,scale:r,appState:o,renderConfig:a})=>{if(e){const[l,c]=Q5(e,r),u=J5({canvas:e,scale:r,normalizedWidth:l,normalizedHeight:c});u.save(),u.scale(o.zoom.value,o.zoom.value),n&&n.type!=="selection"?pu(n,i,s,t,u,a,o):u.clearRect(0,0,l,c)}},R4e=dg(e=>{vj(e)},{trailing:!0}),k4e=(e,t)=>{if(t){R4e(e);return}vj(e)},D4e=e=>{const t=L.useRef(null);return L.useEffect(()=>{t.current&&k4e({canvas:t.current,scale:e.scale,newElement:e.appState.newElement,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,rc:e.rc,renderConfig:e.renderConfig,appState:e.appState},k_())}),g("canvas",{className:"excalidraw__canvas",style:{width:e.appState.width,height:e.appState.height},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:t})},L4e=5e3,N4e=({message:e,onClose:t,closable:n=!1,duration:i=L4e,style:s})=>{const r=L.useRef(0),o=i!==1/0,a=L.useCallback(()=>{o&&(r.current=window.setTimeout(()=>t(),i))},[t,i,o]);return L.useEffect(()=>{if(o)return a(),()=>clearTimeout(r.current)},[a,e,i,o]),P("div",{className:"Toast",onMouseEnter:o?()=>clearTimeout(r==null?void 0:r.current):void 0,onMouseLeave:o?a:void 0,style:s,children:[g("p",{className:"Toast__message",children:e}),n&&g(Ye,{icon:Fd,"aria-label":"close",type:"icon",onClick:t,className:"close"})]})},wj=ae.createContext(null),_j=ae.createContext(null),Tj={viewport:{isMobile:!1,isLandscape:!1},editor:{isMobile:!1,canFitSidebar:!1},isTouchScreen:!1},H_=ae.createContext(Tj);H_.displayName="DeviceContext";const V_=ae.createContext({container:null,id:null});V_.displayName="ExcalidrawContainerContext";const $_=ae.createContext([]);$_.displayName="ExcalidrawElementsContext";const G_=ae.createContext({...Jo(),width:0,height:0,offsetLeft:0,offsetTop:0});G_.displayName="ExcalidrawAppStateContext";const X_=ae.createContext(()=>{console.warn("Uninitialized ExcalidrawSetAppStateContext context!")});X_.displayName="ExcalidrawSetAppStateContext";const j_=ae.createContext(null);j_.displayName="ExcalidrawActionManagerContext";const mo=()=>L.useContext(wj),mp=()=>L.useContext(_j),si=()=>L.useContext(H_),oa=()=>L.useContext(V_),fy=()=>L.useContext($_),pp=()=>L.useContext(G_),Yn=()=>L.useContext(X_),Ss=()=>L.useContext(j_);let a1=!1,qE=0,cu=!1,l1=!1,QE=!1,c1={horizontal:null,vertical:null},Al=0,u1=!1;const JE=new Map;let DU=!1,Hk=0,Vk=!1,uu=null;const mt={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null};class Y_ extends ae.Component{constructor(n){super(n);F(this,"canvas");F(this,"interactiveCanvas",null);F(this,"rc");F(this,"unmounted",!1);F(this,"actionManager");F(this,"device",Tj);F(this,"excalidrawContainerRef",ae.createRef());F(this,"scene");F(this,"fonts");F(this,"renderer");F(this,"visibleElements");F(this,"resizeObserver");F(this,"nearestScrollableContainer");F(this,"library");F(this,"libraryItemsFromStorage");F(this,"id");F(this,"store");F(this,"history");F(this,"excalidrawContainerValue");F(this,"files",{});F(this,"imageCache",new Map);F(this,"iFrameRefs",new Map);F(this,"embedsValidationStatus",new Map);F(this,"initializedEmbeds",new Set);F(this,"elementsPendingErasure",new Set);F(this,"flowChartCreator",new qle);F(this,"flowChartNavigator",new Zle);F(this,"hitLinkElement");F(this,"lastPointerDownEvent",null);F(this,"lastPointerUpEvent",null);F(this,"lastPointerMoveEvent",null);F(this,"lastPointerMoveCoords",null);F(this,"lastViewportPosition",{x:0,y:0});F(this,"animationFrameHandler",new UEe);F(this,"laserTrails",new n7e(this.animationFrameHandler,this));F(this,"eraserTrail",new g7e(this.animationFrameHandler,this));F(this,"lassoTrail",new f7e(this.animationFrameHandler,this));F(this,"onChangeEmitter",new zr);F(this,"onPointerDownEmitter",new zr);F(this,"onPointerUpEmitter",new zr);F(this,"onUserFollowEmitter",new zr);F(this,"onScrollChangeEmitter",new zr);F(this,"missingPointerEventCleanupEmitter",new zr);F(this,"onRemoveEventListenersEmitter",new zr);F(this,"updateEditorAtom",(n,...i)=>{const s=Ns.set(n,...i);return this.triggerRender(),s});F(this,"getEffectiveGridSize",()=>bm(this)?this.state.gridSize:null);F(this,"updateEmbedValidationStatus",(n,i)=>{this.embedsValidationStatus.set(n.id,i),Gt.delete(n)});F(this,"updateEmbeddables",()=>{const n=new Set;let i=!1;this.scene.getNonDeletedElements().filter(s=>{if(fs(s)){if(n.add(s.id),!this.embedsValidationStatus.has(s.id)){i=!0;const r=f2(s.link,this.props.validateEmbeddable);this.updateEmbedValidationStatus(s,r)}}else Bl(s)&&n.add(s.id);return!1}),i&&this.scene.triggerUpdate(),this.iFrameRefs.forEach((s,r)=>{n.has(r)||this.iFrameRefs.delete(r)})});F(this,"getFrameNameDOMId",n=>`${this.id}-frame-name-${n.id}`);F(this,"frameNameBoundsCache",{get:n=>{let i=this.frameNameBoundsCache._cache.get(n.id);if(!i||i.zoom!==this.state.zoom.value||i.versionNonce!==n.versionNonce){const s=document.getElementById(this.getFrameNameDOMId(n));if(s){const r=s.getBoundingClientRect(),o=kt({clientX:r.x,clientY:r.y},this.state),a=kt({clientX:r.right,clientY:r.bottom},this.state);return i={x:o.x,y:o.y,width:a.x-o.x,height:a.y-o.y,angle:0,zoom:this.state.zoom.value,versionNonce:n.versionNonce},this.frameNameBoundsCache._cache.set(n.id,i),i}return null}return i},_cache:new Map});F(this,"resetEditingFrame",n=>{var i;n&&this.scene.mutateElement(n,{name:((i=n.name)==null?void 0:i.trim())||null}),this.setState({editingFrame:null})});F(this,"renderFrameNames",()=>{var r;if(!this.state.frameRendering.enabled||!this.state.frameRendering.name)return this.state.editingFrame&&this.resetEditingFrame(null),null;const n=this.state.theme===Me.DARK,i=this.scene.getNonDeletedFramesLikes(),s=i.length>0&&(r=this.state.searchMatches)!=null&&r.focusedId&&Te(this.scene.getElement(this.state.searchMatches.focusedId))?this.state.searchMatches.matches.find(o=>o.focus):null;return i.map(o=>{if(!Hb(o,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap()))return this.state.editingFrame===o.id&&this.resetEditingFrame(o),null;const{x:a,y:l}=hr({sceneX:o.x,sceneY:o.y},this.state),c=6;let u;const d=aB(o);if(o.id===this.state.editingFrame){const f=d;u=g("input",{autoFocus:!0,value:f,onChange:h=>{this.scene.mutateElement(o,{name:h.target.value})},onFocus:h=>h.target.select(),onBlur:()=>this.resetEditingFrame(o),onKeyDown:h=>{(h.key===z.ESCAPE||h.key===z.ENTER)&&this.resetEditingFrame(o)},style:{background:this.state.viewBackgroundColor,filter:n?F9:"none",zIndex:2,border:"none",display:"block",padding:`${c}px`,borderRadius:4,boxShadow:"inset 0 0 0 1px var(--color-primary)",fontFamily:"Assistant",fontSize:`${Pt.nameFontSize}px`,transform:`translate(-${c}px, ${c}px)`,color:"var(--color-gray-80)",overflow:"hidden",maxWidth:`${document.body.clientWidth-a-c}px`},size:f.length+1||1,dir:"auto",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})}else u=d;return g("div",{id:this.getFrameNameDOMId(o),style:{position:"absolute",bottom:`${this.state.height+Pt.nameOffsetY-l+this.state.offsetTop}px`,left:`${a-this.state.offsetLeft}px`,zIndex:2,fontSize:Pt.nameFontSize,color:n?Pt.nameColorDarkTheme:Pt.nameColorLightTheme,lineHeight:Pt.nameLineHeight,width:"max-content",maxWidth:(s==null?void 0:s.id)===o.id&&(s!=null&&s.focus)?"none":`${o.width*this.state.zoom.value}px`,overflow:o.id===this.state.editingFrame?"visible":"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:wt.MOVE,pointerEvents:this.state.viewModeEnabled?gu.disabled:gu.enabled},onPointerDown:f=>this.handleCanvasPointerDown(f),onWheel:f=>this.handleWheel(f),onContextMenu:this.handleCanvasContextMenu,onDoubleClick:()=>{this.setState({editingFrame:o.id})},children:u},o.id)})});F(this,"focusContainer",()=>{var n;(n=this.excalidrawContainerRef.current)==null||n.focus()});F(this,"getSceneElementsIncludingDeleted",()=>this.scene.getElementsIncludingDeleted());F(this,"getSceneElementsMapIncludingDeleted",()=>this.scene.getElementsMapIncludingDeleted());F(this,"getSceneElements",()=>this.scene.getNonDeletedElements());F(this,"onInsertElements",n=>{this.addElementsFromPasteOrLibrary({elements:n,position:"center",files:null})});F(this,"onExportImage",async(n,i,s)=>{at("export",n,"ui");const r=await iy(n,i,this.state,this.files,{exportBackground:this.state.exportBackground,name:this.getName(),viewBackgroundColor:this.state.viewBackgroundColor,exportingFrame:s.exportingFrame}).catch(mF).catch(o=>{console.error(o),this.setState({errorMessage:o.message})});this.state.exportEmbedScene&&r&&v_(r)&&this.setState({fileHandle:r})});F(this,"magicGenerations",new Map);F(this,"updateMagicGeneration",({frameElement:n,data:i})=>{i.status==="pending"?this.scene.mutateElement(n,{customData:{generationData:void 0}},{informMutation:!1,isDragging:!1}):this.scene.mutateElement(n,{customData:{generationData:i}},{informMutation:!1,isDragging:!1}),this.magicGenerations.set(n.id,i),this.triggerRender()});F(this,"plugins",{});F(this,"onMagicframeToolSelect",()=>{const n=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds});if(n.length===0)this.setActiveTool({type:Zn.magicframe}),at("ai","tool-select (empty-selection)","d2c");else{const i=n.length===1&&a2(n[0])&&n[0];if(!i&&n.some(r=>Te(r)||r.frameId)){this.setActiveTool({type:Zn.magicframe});return}at("ai","tool-select (existing selection)","d2c");let s;if(i)s=i;else{const[r,o,a,l]=xt(n),c=50;s=W3({...Pt,x:r-c,y:o-c,width:a-r+c*2,height:l-o+c*2,opacity:100,locked:!1}),this.scene.insertElement(s);for(const u of n)this.scene.mutateElement(u,{frameId:s.id});this.setState({selectedElementIds:{[s.id]:!0}})}this.onMagicFrameGenerate(s,"upstream")}});F(this,"openEyeDropper",({type:n})=>{this.updateEditorAtom(z5,{swapPreviewOnAlt:!0,colorPickerType:n==="stroke"?"elementStroke":"elementBackground",onSelect:(i,s)=>{const r=n==="background"&&s.altKey||n==="stroke"&&!s.altKey;!this.scene.getSelectedElements(this.state).length||this.state.activeTool.type!=="selection"?r?this.syncActionResult({appState:{...this.state,currentItemStrokeColor:i},captureUpdate:K.IMMEDIATELY}):this.syncActionResult({appState:{...this.state,currentItemBackgroundColor:i},captureUpdate:K.IMMEDIATELY}):this.updateScene({elements:this.scene.getElementsIncludingDeleted().map(a=>this.state.selectedElementIds[a.id]?Ie(a,{[r?"strokeColor":"backgroundColor"]:i}):a),captureUpdate:K.IMMEDIATELY})},keepOpenOnAlt:!1})});F(this,"dismissLinearEditor",()=>{setTimeout(()=>{this.setState({editingLinearElement:null})})});F(this,"syncActionResult",on(n=>{var r,o,a,l,c,u;if(this.unmounted||n===!1)return;this.store.scheduleAction(n.captureUpdate);let i=!1,s=null;if(n.elements&&(this.scene.replaceAllElements(n.elements),i=!0),n.files&&(this.addMissingFiles(n.files,n.replaceFiles),this.addNewImagesToImageCache()),n.appState||s||this.state.contextMenu){let d=((r=n==null?void 0:n.appState)==null?void 0:r.viewModeEnabled)||!1,f=((o=n==null?void 0:n.appState)==null?void 0:o.zenModeEnabled)||!1;const h=((a=n==null?void 0:n.appState)==null?void 0:a.theme)||this.props.theme||Me.LIGHT,m=((l=n==null?void 0:n.appState)==null?void 0:l.name)??this.state.name,p=((c=n==null?void 0:n.appState)==null?void 0:c.errorMessage)??this.state.errorMessage;typeof this.props.viewModeEnabled<"u"&&(d=this.props.viewModeEnabled),typeof this.props.zenModeEnabled<"u"&&(f=this.props.zenModeEnabled),s=((u=n.appState)==null?void 0:u.editingTextElement)||null,n.elements&&s&&n.elements.forEach(U=>{(s==null?void 0:s.id)===U.id&&s!==U&&t4(U)&&ue(U)&&(s=U)}),s!=null&&s.isDeleted&&(s=null),this.setState(U=>{const y=n.appState||{};return{...U,...y,contextMenu:null,editingTextElement:s,viewModeEnabled:d,zenModeEnabled:f,theme:h,name:m,errorMessage:p}}),i=!0}i||this.scene.triggerUpdate()}));F(this,"onBlur",on(()=>{cu=!1,this.setState({isBindingEnabled:!0})}));F(this,"onUnload",()=>{this.onBlur()});F(this,"disableEvent",n=>{n.preventDefault()});F(this,"resetHistory",()=>{this.history.clear()});F(this,"resetStore",()=>{this.store.clear()});F(this,"resetScene",on(n=>{this.scene.replaceAllElements([]),this.setState(i=>({...Jo(),isLoading:n!=null&&n.resetLoadingState?!1:i.isLoading,theme:this.state.theme})),this.resetStore(),this.resetHistory()}));F(this,"initializeScene",async()=>{var s;"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(async r=>{if(!r.files.length)return;const o=r.files[0],a=await o.getFile();this.loadFileToCanvas(new File([a],a.name||"",{type:a.type}),o)}),this.props.theme&&this.setState({theme:this.props.theme}),this.state.isLoading||this.setState({isLoading:!0});let n=null;try{typeof this.props.initialData=="function"?n=await this.props.initialData()||null:n=await this.props.initialData||null,n!=null&&n.libraryItems&&this.library.updateLibrary({libraryItems:n.libraryItems,merge:!0}).catch(r=>{console.error(r)})}catch(r){console.error(r),n={appState:{errorMessage:r.message||"Encountered an error during importing or restoring scene data"}}}const i=_d(n,null,null,{repairBindings:!0});i.appState={...i.appState,theme:this.props.theme||i.appState.theme,openSidebar:((s=i.appState)==null?void 0:s.openSidebar)||this.state.openSidebar,activeTool:i.appState.activeTool.type==="image"?{...i.appState.activeTool,type:"selection"}:i.appState.activeTool,isLoading:!1,toast:this.state.toast},n!=null&&n.scrollToContent&&(i.appState={...i.appState,...em(i.elements,{...i.appState,width:this.state.width,height:this.state.height,offsetTop:this.state.offsetTop,offsetLeft:this.state.offsetLeft})}),this.resetStore(),this.resetHistory(),this.syncActionResult({...i,captureUpdate:K.NEVER}),this.clearImageShapeCache(),this.fonts.loadSceneFonts().then(r=>{this.fonts.onLoaded(r)}),ih(window.location.href)&&this.scrollToContent(window.location.href,{animate:!1})});F(this,"isMobileBreakpoint",(n,i)=>n<Fie||i<zie&&n<Bie);F(this,"refreshViewportBreakpoints",()=>{if(!this.excalidrawContainerRef.current)return;const{clientWidth:i,clientHeight:s}=document.body,r=this.device.viewport,o=i2(r,{isLandscape:i>s,isMobile:this.isMobileBreakpoint(i,s)});return r!==o?(this.device={...this.device,viewport:o},!0):!1});F(this,"refreshEditorBreakpoints",()=>{const n=this.excalidrawContainerRef.current;if(!n)return;const{width:i,height:s}=n.getBoundingClientRect(),r=this.props.UIOptions.dockedSidebarBreakpoint!=null?this.props.UIOptions.dockedSidebarBreakpoint:Hie,o=this.device.editor,a=i2(o,{isMobile:this.isMobileBreakpoint(i,s),canFitSidebar:i>r});return o!==a?(this.device={...this.device,editor:a},!0):!1});F(this,"onResize",on(()=>{this.scene.getElementsIncludingDeleted().forEach(n=>Gt.delete(n)),this.refreshViewportBreakpoints(),this.updateDOMRect(),w3||this.refreshEditorBreakpoints(),this.setState({})}));F(this,"onFullscreenChange",()=>{var n;!document.fullscreenElement&&((n=this.state.activeEmbeddable)==null?void 0:n.state)==="active"&&this.setState({activeEmbeddable:null})});F(this,"renderInteractiveSceneCallback",({atLeastOneVisibleElement:n,scrollBars:i,elementsMap:s})=>{i&&(c1=i);const r=this.state.editingTextElement?!1:!n&&s.size>0;this.state.scrolledOutside!==r&&this.setState({scrolledOutside:r}),this.scheduleImageRefresh()});F(this,"onScroll",Qa(()=>{const{offsetTop:n,offsetLeft:i}=this.getCanvasOffsets();this.setState(s=>s.offsetLeft===i&&s.offsetTop===n?null:{offsetTop:n,offsetLeft:i})},Oie));F(this,"onCut",on(n=>{var s;!((s=this.excalidrawContainerRef.current)!=null&&s.contains(document.activeElement))||Eu(n.target)||(this.actionManager.executeAction(MR,"keyboard",n),n.preventDefault(),n.stopPropagation())}));F(this,"onCopy",on(n=>{var s;!((s=this.excalidrawContainerRef.current)!=null&&s.contains(document.activeElement))||Eu(n.target)||(this.actionManager.executeAction(I2,"keyboard",n),n.preventDefault(),n.stopPropagation())}));F(this,"onTouchStart",n=>{if(ZP&&n.preventDefault(),!a1){a1=!0,clearTimeout(qE),qE=window.setTimeout(Y_.resetTapTwice,kie);return}if(a1&&n.touches.length===1){const i=n.touches[0];this.handleCanvasDoubleClick({clientX:i.clientX,clientY:i.clientY}),a1=!1,clearTimeout(qE)}n.touches.length===2&&this.setState({selectedElementIds:it({},this.state),activeEmbeddable:null})});F(this,"onTouchEnd",n=>{this.resetContextMenuTimer(),n.touches.length>0?this.setState({previousSelectedElementIds:{},selectedElementIds:it(this.state.previousSelectedElementIds,this.state)}):mt.pointers.clear()});F(this,"pasteFromClipboard",on(async n=>{var d,f;const i=!!DU,s=document.activeElement,r=(d=this.excalidrawContainerRef.current)==null?void 0:d.contains(s);if(n&&!r)return;const o=document.elementFromPoint(this.lastViewportPosition.x,this.lastViewportPosition.y);if(n&&(!(o instanceof HTMLCanvasElement)||Eu(s)))return;const{x:a,y:l}=kt({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state);let c=(f=n==null?void 0:n.clipboardData)==null?void 0:f.files[0];const u=await fG(n,i);if(!c&&!i){if(u.mixedContent)return this.addElementsFromMixedContentPaste(u.mixedContent,{isPlainPaste:i,sceneX:a,sceneY:l});if(u.text){const h=u.text.trim();h.startsWith("<svg")&&h.endsWith("</svg>")&&(c=TR(h))}}if(Wu(c)&&!u.spreadsheet){if(!this.isToolSupported("image")){this.setState({errorMessage:k("errors.imageToolNotSupported")});return}const h=this.createImageElement({sceneX:a,sceneY:l});this.insertImageElement(h,c),this.initializeImageDimensions(h),this.setState({selectedElementIds:it({[h.id]:!0},this.state)});return}if(this.props.onPaste)try{if(await this.props.onPaste(u,n)===!1)return}catch(h){console.error(h)}if(u.errorMessage)this.setState({errorMessage:u.errorMessage});else if(u.spreadsheet&&!i)this.setState({pasteDialog:{data:u.spreadsheet,shown:!0}});else if(u.elements){const h=u.programmaticAPI?z4(u.elements):u.elements;this.addElementsFromPasteOrLibrary({elements:h,files:u.files||null,position:"cursor",retainSeed:i})}else if(u.text){if(u.text&&r7e(u.text)){const p=await be(()=>import("./index-DT5BMFqO.js").then(U=>U.b6),__vite__mapDeps([]));try{const{elements:U,files:y}=await p.parseMermaidToExcalidraw(u.text),E=z4(U,{regenerateIds:!0});this.addElementsFromPasteOrLibrary({elements:E,files:y,position:"cursor"});return}catch(U){console.warn(`parsing pasted text as mermaid definition failed: ${U.message}`)}}const h=EF(u.text).split(/\n+/).map(p=>p.trim()).filter(Boolean),m=h.map(p=>jle(p)).filter(p=>{var U;return f2(p,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(p)||((U=zf(p))==null?void 0:U.type)==="video")});if(!DU&&m.length>0&&m.length===h.length){const p=[];for(const U of m){const y=p[p.length-1],E=this.insertEmbeddableElement({sceneX:y?y.x+y.width+20:a,sceneY:l,link:$s(U)});E&&p.push(E)}p.length&&this.setState({selectedElementIds:Object.fromEntries(p.map(U=>[U.id,!0]))});return}this.addTextFromPaste(u.text,i)}this.setActiveTool({type:"selection"}),n==null||n.preventDefault()}));F(this,"addElementsFromPasteOrLibrary",n=>{var _,x;const i=wd(n.elements,null,void 0),[s,r,o,a]=xt(i),l=Pi(s,o)/2,c=Pi(r,a)/2,u=typeof n.position=="object"?n.position.clientX:n.position==="cursor"?this.lastViewportPosition.x:this.state.width/2+this.state.offsetLeft,d=typeof n.position=="object"?n.position.clientY:n.position==="cursor"?this.lastViewportPosition.y:this.state.height/2+this.state.offsetTop,{x:f,y:h}=kt({clientX:u,clientY:d},this.state),m=f-l,p=h-c,[U,y]=Mn(m,p,this.getEffectiveGridSize()),{duplicatedElements:E}=Vb({type:"everything",elements:i.map(C=>Ie(C,{x:C.x+U-s,y:C.y+y-r})),randomizeSeed:!n.retainSeed}),v=this.scene.getElementsIncludingDeleted();let w=[...v,...E];w=((x=(_=this.props).onDuplicate)==null?void 0:x.call(_,w,v))||w,oo(w,_e(E));const M=this.getTopLayerFrameAtSceneCoords({x:f,y:h});if(M){const C=sae(E,M);o0(w,C,M,this.state)}this.scene.replaceAllElements(w),E.forEach(C=>{if(ue(C)&&Xt(C)){const R=$n(C,this.scene.getElementsMapIncludingDeleted());$i(C,R,this.scene)}}),yie&&ja.loadElementsFonts(E).then(C=>{this.fonts.onLoaded(C)}),n.files&&this.addMissingFiles(n.files),this.store.scheduleCapture();const T=sw(E);this.setState({...this.state,openSidebar:this.state.openSidebar&&this.device.editor.canFitSidebar&&Ns.get(N_)?this.state.openSidebar:null,...Li({editingGroupId:null,selectedElementIds:T.reduce((C,R)=>(Xt(R)||(C[R.id]=!0),C),{})},this.scene.getNonDeletedElements(),this.state,this)},()=>{n.files&&this.addNewImagesToImageCache()}),this.setActiveTool({type:"selection"}),n.fitToContent&&this.scrollToContent(E,{fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()})});F(this,"setAppState",(n,i)=>{this.setState(n,i)});F(this,"removePointer",n=>{Al&&this.resetContextMenuTimer(),mt.pointers.delete(n.pointerId)});F(this,"toggleLock",(n="ui")=>{this.state.activeTool.locked||at("toolbar","toggleLock",`${n} (${this.device.editor.isMobile?"mobile":"desktop"})`),this.setState(i=>({activeTool:{...i.activeTool,...en(this.state,i.activeTool.locked?{type:"selection"}:i.activeTool),locked:!i.activeTool.locked}}))});F(this,"updateFrameRendering",n=>{this.setState(i=>{const s=typeof n=="function"?n(i.frameRendering):n;return{frameRendering:{enabled:(s==null?void 0:s.enabled)??i.frameRendering.enabled,clip:(s==null?void 0:s.clip)??i.frameRendering.clip,name:(s==null?void 0:s.name)??i.frameRendering.name,outline:(s==null?void 0:s.outline)??i.frameRendering.outline}}})});F(this,"togglePenMode",n=>{this.setState(i=>({penMode:n??!i.penMode,penDetected:!0}))});F(this,"onHandToolToggle",()=>{this.actionManager.executeAction(PUe)});F(this,"zoomCanvas",n=>{this.setState({...Ru({viewportX:this.state.width/2+this.state.offsetLeft,viewportY:this.state.height/2+this.state.offsetTop,nextZoom:Fa(n)},this.state)})});F(this,"cancelInProgressAnimation",null);F(this,"scrollToContent",(n=this.scene.getNonDeletedElements(),i)=>{var l;if(typeof n=="string"){let c;if(ih(n)?c=kle(n):c=n,c){const u=this.scene.getElementsFromId(c);u!=null&&u.length?this.scrollToContent(u,{fitToContent:(i==null?void 0:i.fitToContent)??!0,animate:(i==null?void 0:i.animate)??!0}):ih(n)&&this.setState({toast:{message:k("elementLink.notFound"),duration:3e3,closable:!0}})}return}(l=this.cancelInProgressAnimation)==null||l.call(this);const s=Array.isArray(n)?n:[n];let r=this.state.zoom,o=this.state.scrollX,a=this.state.scrollY;if(i!=null&&i.fitToContent||i!=null&&i.fitToViewport){const{appState:c}=$5({canvasOffsets:i.canvasOffsets,targetElements:s,appState:this.state,fitToViewport:!!(i!=null&&i.fitToViewport),viewportZoomFactor:i==null?void 0:i.viewportZoomFactor,minZoom:i==null?void 0:i.minZoom,maxZoom:i==null?void 0:i.maxZoom});r=c.zoom,o=c.scrollX,a=c.scrollY}else{const c=em(s,this.state);o=c.scrollX,a=c.scrollY}if(i!=null&&i.animate){const c=this.state.scrollX,u=this.state.scrollY,d=this.state.zoom.value,f=Use({fromValues:{scrollX:c,scrollY:u,zoom:d},toValues:{scrollX:o,scrollY:a,zoom:r.value},interpolateValue:(h,m,p,U)=>{if(U==="zoom")return h*Math.pow(m/h,Ja(p))},onStep:({scrollX:h,scrollY:m,zoom:p})=>{this.setState({scrollX:h,scrollY:m,zoom:{value:p}})},onStart:()=>{this.setState({shouldCacheIgnoreZoom:!0})},onEnd:()=>{this.setState({shouldCacheIgnoreZoom:!1})},onCancel:()=>{this.setState({shouldCacheIgnoreZoom:!1})},duration:(i==null?void 0:i.duration)??500});this.cancelInProgressAnimation=()=>{f(),this.cancelInProgressAnimation=null}}else this.setState({scrollX:o,scrollY:a,zoom:r})});F(this,"maybeUnfollowRemoteUser",()=>{this.state.userToFollow&&this.setState({userToFollow:null})});F(this,"translateCanvas",n=>{var i;(i=this.cancelInProgressAnimation)==null||i.call(this),this.maybeUnfollowRemoteUser(),this.setState(n)});F(this,"setToast",n=>{this.setState({toast:n})});F(this,"restoreFileFromShare",async()=>{try{const n=await caches.open("web-share-target"),i=await n.match("shared-file");if(i){const s=await i.blob(),r=new File([s],s.name||"",{type:s.type});this.loadFileToCanvas(r,null),await n.delete("shared-file"),window.history.replaceState(null,Va,window.location.pathname)}}catch(n){this.setState({errorMessage:n.message})}});F(this,"addFiles",on(n=>{const{addedFiles:i}=this.addMissingFiles(n);this.clearImageShapeCache(i),this.scene.triggerUpdate(),this.addNewImagesToImageCache()}));F(this,"addMissingFiles",(n,i=!1)=>{const s=i?{}:{...this.files},r={},o=Array.isArray(n)?n:Object.values(n);for(const a of o)if(!s[a.id]&&(r[a.id]=a,s[a.id]=a,a.mimeType===ye.svg))try{const l=K6e(mA(q6e(a.dataURL)),ye.svg);a.dataURL!==l&&(a.version=(a.version??1)+1,a.dataURL=l)}catch(l){console.error(l)}return this.files=s,{addedFiles:r}});F(this,"updateScene",on(n=>{const{elements:i,appState:s,collaborators:r,captureUpdate:o}=n,a=i?qo(i):void 0;if(o){const l=i?_e(a??[]):void 0,c=s?Object.assign({},this.store.snapshot.appState,s):void 0;this.store.scheduleMicroAction({action:o,elements:l,appState:c})}s&&this.setState(s),a&&this.scene.replaceAllElements(a),r&&this.setState({collaborators:r})}));F(this,"mutateElement",(n,i,s=!0)=>this.scene.mutateElement(n,i,{informMutation:s,isDragging:!1}));F(this,"triggerRender",n=>{n===!0?this.scene.triggerUpdate():this.setState({})});F(this,"toggleSidebar",({name:n,tab:i,force:s})=>{var a,l;let r;s===void 0?r=((a=this.state.openSidebar)==null?void 0:a.name)===n&&((l=this.state.openSidebar)==null?void 0:l.tab)===i?null:n:r=s?n:null;const o=r?{name:r}:null;return o&&i&&(o.tab=i),this.setState({openSidebar:o}),!!r});F(this,"updateCurrentCursorPosition",on(n=>{this.lastViewportPosition.x=n.clientX,this.lastViewportPosition.y=n.clientY}));F(this,"getEditorUIOffsets",()=>{var o,a,l,c,u,d,f,h,m,p;const n=((c=(l=(a=(o=this.excalidrawContainerRef)==null?void 0:o.current)==null?void 0:a.querySelector(".App-toolbar"))==null?void 0:l.getBoundingClientRect())==null?void 0:c.bottom)??0,i=(f=(d=(u=this.excalidrawContainerRef)==null?void 0:u.current)==null?void 0:d.querySelector(".sidebar"))==null?void 0:f.getBoundingClientRect(),s=(p=(m=(h=this.excalidrawContainerRef)==null?void 0:h.current)==null?void 0:m.querySelector(".App-menu__left"))==null?void 0:p.getBoundingClientRect(),r=16;return J0().rtl?{top:n+r,right:Math.max(this.state.width-((s==null?void 0:s.left)??this.state.width),0)+r,bottom:r,left:Math.max((i==null?void 0:i.right)??0,0)+r}:{top:n+r,right:Math.max(this.state.width-((i==null?void 0:i.left)??this.state.width)+r,0),bottom:r,left:Math.max((s==null?void 0:s.right)??0,0)+r}});F(this,"onKeyDown",on(n=>{var o,a,l,c,u;if("Proxy"in window&&(!n.shiftKey&&/^[A-Z]$/.test(n.key)||n.shiftKey&&/^[a-z]$/.test(n.key))&&(n=new Proxy(n,{get(d,f){const h=d[f];return typeof h=="function"?h.bind(d):f==="key"?n.shiftKey?d.key.toUpperCase():d.key.toLowerCase():h}})),!C3(n.target)){if((n.key===z.ESCAPE||n.key===z.ENTER)&&this.state.croppingElementId){this.finishImageCropping();return}const d=He(this.scene.getNonDeletedElementsMap(),this.state);if(d.length===1&&ft(d[0])&&n.key===z.ENTER){this.startImageCropping(d[0]);return}if(n.key===z.ESCAPE)this.updateEditorAtom(wa,null);else if(n.key===z.TAB&&(document.activeElement===((o=this.excalidrawContainerRef)==null?void 0:o.current)||(a=document.activeElement)!=null&&a.classList.contains(Mc.CONVERT_ELEMENT_TYPE_POPUP))){n.preventDefault();const h=ry(d);((l=Ns.get(wa))==null?void 0:l.type)==="panel"&&TG(this,{conversionType:h,direction:n.shiftKey?"left":"right"})&&this.store.scheduleCapture(),h&&this.updateEditorAtom(wa,{type:"panel"})}if(n.key===z.ESCAPE&&this.flowChartCreator.isCreatingChart){this.flowChartCreator.clear(),this.triggerRender(!0);return}const f=w1(n.key);if(n[z.CTRL_OR_CMD]&&f&&!n.shiftKey){n.preventDefault();const h=He(this.scene.getNonDeletedElementsMap(),this.state);h.length===1&&m5(h[0])&&this.flowChartCreator.createNodes(h[0],this.state,gA(n.key),this.scene),(c=this.flowChartCreator.pendingNodes)!=null&&c.length&&!d2(this.flowChartCreator.pendingNodes,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(this.flowChartCreator.pendingNodes,{animate:!0,duration:300,fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()});return}if(n.altKey){const h=He(this.scene.getNonDeletedElementsMap(),this.state);if(h.length===1&&f){n.preventDefault();const m=this.flowChartNavigator.exploreByDirection(h[0],this.scene.getNonDeletedElementsMap(),gA(n.key));if(m){this.setState(U=>({selectedElementIds:it({[m]:!0},U)}));const p=this.scene.getNonDeletedElementsMap().get(m);p&&!d2([p],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(p,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})}return}}}if(n[z.CTRL_OR_CMD]&&n.key===z.P&&!n.shiftKey&&!n.altKey){this.setToast({message:k("commandPalette.shortcutHint",{shortcut:Vi("commandPalette")})}),n.preventDefault();return}if(n[z.CTRL_OR_CMD]&&n.key.toLowerCase()===z.V&&(DU=n.shiftKey,clearTimeout(Hk),Hk=window.setTimeout(()=>{DU=!1},100)),n[z.CTRL_OR_CMD]&&Eu(n.target)&&(n.code===et.MINUS||n.code===et.EQUAL)){n.preventDefault();return}if(Eu(n.target)&&n.key!==z.ESCAPE||w1(n.key)&&C3(n.target))return;if(n.key===z.QUESTION_MARK){this.setState({openDialog:{name:"help"}});return}else if(n.key.toLowerCase()===z.E&&n.shiftKey&&n[z.CTRL_OR_CMD]){n.preventDefault(),this.setState({openDialog:{name:"imageExport"}});return}if(n.key===z.PAGE_UP||n.key===z.PAGE_DOWN){let d=(n.shiftKey?this.state.width:this.state.height)/this.state.zoom.value;n.key===z.PAGE_DOWN&&(d=-d),n.shiftKey?this.translateCanvas(f=>({scrollX:f.scrollX+d})):this.translateCanvas(f=>({scrollY:f.scrollY+d}))}if(((u=this.state.openDialog)==null?void 0:u.name)==="elementLinkSelector"||this.actionManager.handleKeyDown(n)||this.state.viewModeEnabled)return;if(n[z.CTRL_OR_CMD]&&this.state.isBindingEnabled&&this.setState({isBindingEnabled:!1}),w1(n.key)){let d=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});const f=d.find(he),h=new Set;d.filter(he).filter(y=>{const E=y.startBinding&&!d.some(w=>{var I;return w.id===((I=y.startBinding)==null?void 0:I.elementId)}),v=y.endBinding&&!d.some(w=>{var I;return w.id===((I=y.endBinding)==null?void 0:I.elementId)});return E||v}).forEach(y=>h.add(y.id)),d=d.filter(y=>!h.has(y.id));const m=this.getEffectiveGridSize()&&(n.shiftKey?Qx:this.getEffectiveGridSize())||(n.shiftKey?wie:Qx);let p=0,U=0;n.key===z.ARROW_LEFT?p=-m:n.key===z.ARROW_RIGHT?p=m:n.key===z.ARROW_UP?U=-m:n.key===z.ARROW_DOWN&&(U=m),d.forEach(y=>{this.scene.mutateElement(y,{x:y.x+p,y:y.y+U},{informMutation:!1,isDragging:!1}),ys(y,this.scene,{simultaneouslyUpdated:d})}),this.setState({suggestedBindings:Q8(d.filter(y=>y.id!==(f==null?void 0:f.id)||m!==0),this.scene.getNonDeletedElementsMap(),this.state.zoom)}),this.scene.triggerUpdate(),n.preventDefault()}else if(n.key===z.ENTER){const d=this.scene.getSelectedElements(this.state);if(d.length===1){const f=d[0];if(n[z.CTRL_OR_CMD])Ae(f)&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==d[0].id)&&(this.store.scheduleCapture(),he(f)||this.setState({editingLinearElement:new le(f,this.scene.getNonDeletedElementsMap())}));else if(ue(f)||Foe(f)){let h;ue(f)||(h=f);const m=W8(f,this.state,this.scene.getNonDeletedElementsMap()),p=m.x,U=m.y;this.startTextEditing({sceneX:p,sceneY:U,container:h}),n.preventDefault();return}else Te(f)&&this.setState({editingFrame:f.id})}}else if(!n.ctrlKey&&!n.altKey&&!n.metaKey&&!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged){const d=w8e(n.key);d?(this.state.activeTool.type!==d&&at("toolbar",d,`keyboard (${this.device.editor.isMobile?"mobile":"desktop"})`),d==="arrow"&&this.state.activeTool.type==="arrow"&&this.setState(f=>({currentItemArrowType:f.currentItemArrowType===ai.sharp?ai.round:f.currentItemArrowType===ai.round?ai.elbow:ai.sharp})),this.setActiveTool({type:d}),n.stopPropagation()):n.key===z.Q&&(this.toggleLock("keyboard"),n.stopPropagation())}if(n.key===z.SPACE&&mt.pointers.size===0&&(cu=!0,Ct(this.interactiveCanvas,wt.GRAB),n.preventDefault()),(n.key===z.G||n.key===z.S)&&!n.altKey&&!n[z.CTRL_OR_CMD]){const d=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!d.length)return;n.key===z.G&&(Nh(this.state.activeTool.type)||d.some(f=>Nh(f.type)))&&(this.setState({openPopup:"elementBackground"}),n.stopPropagation()),n.key===z.S&&(this.setState({openPopup:"elementStroke"}),n.stopPropagation())}if(!n[z.CTRL_OR_CMD]&&n.shiftKey&&n.key.toLowerCase()===z.F){const d=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!d.length)return;(this.state.activeTool.type==="text"||d.find(f=>ue(f)||Oe(f,this.scene.getNonDeletedElementsMap())))&&(n.preventDefault(),this.setState({openPopup:"fontFamily"}))}if(n.key===z.K&&!n.altKey&&!n[z.CTRL_OR_CMD]){this.state.activeTool.type==="laser"?this.setActiveTool({type:"selection"}):this.setActiveTool({type:"laser"});return}n[z.CTRL_OR_CMD]&&(n.key===z.BACKSPACE||n.key===z.DELETE)&&this.updateEditorAtom(cy,"clearCanvas");const i=n.key.toLocaleLowerCase(),s=i===z.S&&n.shiftKey,r=n.key===z.I||i===z.G&&n.shiftKey;(s||r)&&this.openEyeDropper({type:s?"stroke":"background"})}));F(this,"onKeyUp",on(n=>{var i,s,r,o;if(n.key===z.SPACE&&(this.state.viewModeEnabled||((i=this.state.openDialog)==null?void 0:i.name)==="elementLinkSelector"?Ct(this.interactiveCanvas,wt.GRAB):this.state.activeTool.type==="selection"||this.state.activeTool.type==="lasso"?Or(this.interactiveCanvas):(vo(this.interactiveCanvas,this.state),this.setState({selectedElementIds:it({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})),cu=!1),!n[z.CTRL_OR_CMD]&&!this.state.isBindingEnabled&&this.setState({isBindingEnabled:!0}),w1(n.key)&&(Db(this.scene.getSelectedElements(this.state).filter(Ae),Cu(this.state),((s=this.state.selectedLinearElement)==null?void 0:s.selectedPointsIndices)??[],this.scene,this.state.zoom),this.setState({suggestedBindings:[]})),n.altKey||this.flowChartNavigator.isExploring&&(this.flowChartNavigator.clear(),this.syncActionResult({captureUpdate:K.IMMEDIATELY})),!n[z.CTRL_OR_CMD]&&this.flowChartCreator.isCreatingChart){(r=this.flowChartCreator.pendingNodes)!=null&&r.length&&this.scene.insertElements(this.flowChartCreator.pendingNodes);const a=(o=this.flowChartCreator.pendingNodes)==null?void 0:o[0];a&&(this.setState(l=>({selectedElementIds:it({[a.id]:!0},l)})),d2([a],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())||this.scrollToContent(a,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})),this.flowChartCreator.clear(),this.syncActionResult({captureUpdate:K.IMMEDIATELY})}}));F(this,"isToolSupported",n=>{var i;return((i=this.props.UIOptions.tools)==null?void 0:i[n])!==!1});F(this,"setActiveTool",(n,i=!1)=>{if(!this.isToolSupported(n.type)){console.warn(`"${n.type}" tool is disabled via "UIOptions.canvasActions.tools.${n.type}"`);return}const s=en(this.state,n);s.type==="hand"?Ct(this.interactiveCanvas,wt.GRAB):cu||vo(this.interactiveCanvas,{...this.state,activeTool:s}),mse(document.activeElement)&&this.focusContainer(),K9(s.type)||this.setState({suggestedBindings:[]}),s.type==="image"&&this.onImageAction({insertOnCanvasDirectly:(n.type==="image"&&n.insertOnCanvasDirectly)??!1}),this.setState(r=>{const o={snapLines:r.snapLines.length?[]:r.snapLines,originSnapOffset:null,activeEmbeddable:null};return s.type==="freedraw"&&this.store.scheduleCapture(),s.type==="lasso"?{...r,activeTool:s,...i?{}:{selectedElementIds:it({},r),selectedGroupIds:it({},r),editingGroupId:null,multiElement:null},...o}:s.type!=="selection"?{...r,activeTool:s,selectedElementIds:it({},r),selectedGroupIds:it({},r),editingGroupId:null,multiElement:null,...o}:{...r,activeTool:s,...o}})});F(this,"setOpenDialog",n=>{this.setState({openDialog:n})});F(this,"setCursor",n=>{Ct(this.interactiveCanvas,n)});F(this,"resetCursor",()=>{Or(this.interactiveCanvas)});F(this,"isTouchScreenMultiTouchGesture",()=>mt.pointers.size>=2);F(this,"getName",()=>this.state.name||this.props.name||`${k("labels.untitled")}-${uC()}`);F(this,"onGestureStart",on(n=>{n.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({selectedElementIds:it({},this.state),activeEmbeddable:null}),mt.initialScale=this.state.zoom.value}));F(this,"onGestureChange",on(n=>{if(n.preventDefault(),this.isTouchScreenMultiTouchGesture())return;const i=mt.initialScale;i&&this.setState(s=>({...Ru({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:Fa(i*n.scale)},s)}))}));F(this,"onGestureEnd",on(n=>{n.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({previousSelectedElementIds:{},selectedElementIds:it(this.state.previousSelectedElementIds,this.state)}),mt.initialScale=null}));F(this,"startTextEditing",({sceneX:n,sceneY:i,insertAtParentCenter:s=!0,container:r,autoEdit:o=!0})=>{let a=!1,l=s&&this.getTextWysiwygSnappedToCenterPosition(n,i,this.state,r);r&&l&&(Oe(r,this.scene.getNonDeletedElementsMap())||(a=!0));let c=null;const u=this.scene.getSelectedElements(this.state);u.length===1?ue(u[0])?c=u[0]:r?c=Oe(u[0],this.scene.getNonDeletedElementsMap()):c=this.getTextElementAtPosition(n,i):c=this.getTextElementAtPosition(n,i);const d=(c==null?void 0:c.fontFamily)||this.state.currentItemFontFamily,f=(c==null?void 0:c.lineHeight)||Rc(d),h=this.state.currentItemFontSize;if(!c&&a&&r&&!xe(r)){const y=YF(gt({fontSize:h,fontFamily:d}),f),E=WF(h,f),v=Math.max(r.height,E),w=Math.max(r.width,y);this.scene.mutateElement(r,{height:v,width:w}),n=r.x+w/2,i=r.y+v/2,l&&(l=this.getTextWysiwygSnappedToCenterPosition(n,i,this.state,r))}const m=this.getTopLayerFrameAtSceneCoords({x:n,y:i}),p=c||js({x:l?l.elementCenterX:n,y:l?l.elementCenterY:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:"",fontSize:h,fontFamily:d,textAlign:l?"center":this.state.currentItemTextAlign,verticalAlign:l?Fs.MIDDLE:hb,containerId:a?r==null?void 0:r.id:void 0,groupIds:(r==null?void 0:r.groupIds)??[],lineHeight:f,angle:r?xe(r)?0:r.angle:0,frameId:m?m.id:null});if(!c&&a&&r&&this.scene.mutateElement(r,{boundElements:(r.boundElements||[]).concat({type:"text",id:p.id})}),this.setState({editingTextElement:p}),!c)if(r&&a){const U=this.scene.getElementIndex(r.id);this.scene.insertElementAtIndex(p,U+1)}else this.scene.insertElement(p);o||c||r?this.handleTextWysiwyg(p,{isExistingElement:!!c}):this.setState({newElement:p,multiElement:null})});F(this,"startImageCropping",n=>{this.store.scheduleCapture(),this.setState({croppingElementId:n.id})});F(this,"finishImageCropping",()=>{this.state.croppingElementId&&(this.store.scheduleCapture(),this.setState({croppingElementId:null}))});F(this,"handleCanvasDoubleClick",n=>{if(this.state.multiElement||this.state.activeTool.type!=="selection")return;const i=this.scene.getSelectedElements(this.state);let{x:s,y:r}=kt(n,this.state);if(i.length===1&&Ae(i[0])){if(n[z.CTRL_OR_CMD]&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==i[0].id)&&!he(i[0])){this.store.scheduleCapture(),this.setState({editingLinearElement:new le(i[0],this.scene.getNonDeletedElementsMap())});return}else if(this.state.selectedLinearElement&&he(i[0])){const a=le.getSegmentMidpointHitCoords(this.state.selectedLinearElement,{x:s,y:r},this.state,this.scene.getNonDeletedElementsMap()),l=a?le.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,a,this.scene.getNonDeletedElementsMap()):-1;if(l&&l>-1){this.store.scheduleCapture(),le.deleteFixedSegment(i[0],this.scene,l);const c=le.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:s,y:r},this.state,this.scene.getNonDeletedElementsMap()),u=c?le.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,c,this.scene.getNonDeletedElementsMap()):null;this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:{...this.state.selectedLinearElement.pointerDownState,segmentMidpoint:{index:u,value:a,added:!1}},segmentMidPointHoveredCoords:c}});return}}}if(i.length===1&&ft(i[0])){this.startImageCropping(i[0]);return}if(Or(this.interactiveCanvas),Yu(this.state).length>0){const a=this.getElementAtPosition(s,r),l=a&&Woe(a,this.state.selectedGroupIds);if(l){this.store.scheduleCapture(),this.setState(c=>({...c,...Li({editingGroupId:l,selectedElementIds:{[a.id]:!0}},this.scene.getNonDeletedElements(),c,this)}));return}}if(Or(this.interactiveCanvas),!n[z.CTRL_OR_CMD]&&!this.state.viewModeEnabled){const a=this.getElementAtPosition(s,r);if(lr(a)){this.setState({activeEmbeddable:{element:a,state:"active"}});return}const l=this.getTextBindableContainerAtPosition(s,r);if(l&&(ns(l)||!Kr(l.backgroundColor)||pf({x:s,y:r,element:l,shape:Gr(l,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()}))){const c=W8(l,this.state,this.scene.getNonDeletedElementsMap());s=c.x,r=c.y}this.startTextEditing({sceneX:s,sceneY:r,insertAtParentCenter:!n.altKey,container:l})}});F(this,"getElementLinkAtPosition",(n,i)=>{const s=this.scene.getNonDeletedElements();let r=-1;for(let o=s.length-1;o>=0;o--){const a=s[o];if(i&&a.id===i.id&&(r=o),a.link&&o>=r&&DE(a,this.scene.getNonDeletedElementsMap(),this.state,S(n.x,n.y),this.device.editor.isMobile))return a}});F(this,"redirectToLink",(n,i)=>{const s=Je(S(this.lastPointerDownEvent.clientX,this.lastPointerDownEvent.clientY),S(this.lastPointerUpEvent.clientX,this.lastPointerUpEvent.clientY));if(!this.hitLinkElement||s>hu)return;const r=kt(this.lastPointerDownEvent,this.state),o=this.scene.getNonDeletedElementsMap(),a=DE(this.hitLinkElement,o,this.state,S(r.x,r.y),this.device.editor.isMobile),l=kt(this.lastPointerUpEvent,this.state),c=DE(this.hitLinkElement,o,this.state,S(l.x,l.y),this.device.editor.isMobile);if(a&&c){OR();let u=this.hitLinkElement.link;if(u){u=$s(u);let d;if(this.props.onLinkOpen&&(d=bF(ee.EXCALIDRAW_LINK,n.nativeEvent),this.props.onLinkOpen({...this.hitLinkElement,link:u},d)),!(d!=null&&d.defaultPrevented)){const f=TF(u)?"_self":"_blank",h=window.open(void 0,f);h&&(h.opener=null,h.location=u)}}}});F(this,"getTopLayerFrameAtSceneCoords",n=>{const i=this.scene.getNonDeletedElementsMap(),s=this.scene.getNonDeletedFramesLikes().filter(r=>kC(n,r,i));return s.length?s[s.length-1]:null});F(this,"handleCanvasPointerMove",n=>{var h,m,p,U,y,E;this.savePointer(n.clientX,n.clientY,this.state.cursorButton),this.lastPointerMoveEvent=n.nativeEvent,mt.pointers.has(n.pointerId)&&mt.pointers.set(n.pointerId,{x:n.clientX,y:n.clientY});const i=mt.initialScale;if(mt.pointers.size===2&&mt.lastCenter&&i&&mt.initialDistance){const v=tk(mt.pointers),w=v.x-mt.lastCenter.x,I=v.y-mt.lastCenter.y;mt.lastCenter=v;const M=nk(Array.from(mt.pointers.values())),T=this.state.activeTool.type==="freedraw"&&this.state.penMode?1:M/mt.initialDistance,_=T?Fa(i*T):this.state.zoom.value;this.setState(x=>{const C=Ru({viewportX:v.x,viewportY:v.y,nextZoom:_},x);this.translateCanvas({zoom:C.zoom,scrollX:C.scrollX+2*(w/_),scrollY:C.scrollY+2*(I/_),shouldCacheIgnoreZoom:!0})}),this.resetShouldCacheIgnoreZoomDebounced()}else mt.lastCenter=mt.initialDistance=mt.initialScale=null;if(cu||l1||QE||Hh(this.state))return;const r=dk(c1,n.clientX-this.state.offsetLeft,n.clientY-this.state.offsetTop).isOverEither;!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.multiElement&&(r?Or(this.interactiveCanvas):vo(this.interactiveCanvas,this.state));const o=kt(n,this.state),{x:a,y:l}=o;if(!this.state.newElement&&xEe(this.state.activeTool.type)){const{originOffset:v,snapLines:w}=IEe(this.scene.getNonDeletedElements(),this,{x:a,y:l},n,this.scene.getNonDeletedElementsMap());this.setState(I=>{const M=Wg(I.snapLines,w),T=I.originSnapOffset?Wg(I.originSnapOffset,v):v;return I.snapLines===M&&I.originSnapOffset===T?null:{snapLines:M,originSnapOffset:T}})}else!this.state.newElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.selectionElement&&this.setState(v=>v.snapLines.length?{snapLines:[]}:null);if(this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging){const v=le.handlePointerMove(n,a,l,this);v&&v!==this.state.editingLinearElement&&Ln.flushSync(()=>{this.setState({editingLinearElement:v})}),(v==null?void 0:v.lastUncommittedPoint)!=null?this.maybeSuggestBindingAtCursor(o,v.elbowed):Ln.flushSync(()=>{this.setState({suggestedBindings:[]})})}if(PF(this.state.activeTool.type)){const{newElement:v}=this.state;Ca(v,!1)?this.maybeSuggestBindingsForLinearElementAtCoords(v,[o],this.state.startBoundElement):this.maybeSuggestBindingAtCursor(o,!1)}if(this.state.multiElement){const{multiElement:v}=this.state,{x:w,y:I}=v,{points:M,lastCommittedPoint:T}=v,_=M[M.length-1];if(vo(this.interactiveCanvas,this.state),_===T)Je(S(a-w,l-I),_)>=n2?this.scene.mutateElement(v,{points:[...M,S(a-w,l-I)]},{informMutation:!1,isDragging:!1}):Ct(this.interactiveCanvas,wt.POINTER);else if(M.length>2&&T&&Je(S(a-w,l-I),T)<n2)Ct(this.interactiveCanvas,wt.POINTER),this.scene.mutateElement(v,{points:M.slice(0,-1)},{informMutation:!1,isDragging:!1});else{const[x,C]=Mn(a,l,n[z.CTRL_OR_CMD]||he(v)?null:this.getEffectiveGridSize()),[R,N]=(v==null?void 0:v.lastCommittedPoint)??[0,0];let D=x-w-R,$=C-I-N;i0(n)&&({width:D,height:$}=G3(R+w,N+I,x,C)),nl(M,this.state.zoom.value)&&Ct(this.interactiveCanvas,wt.POINTER),this.scene.mutateElement(v,{points:[...M.slice(0,-1),S(R+D,N+$)]},{isDragging:!0,informMutation:!1}),this.triggerRender(!1)}return}if(!!n.buttons||this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="text"&&this.state.activeTool.type!=="eraser")return;const u=this.scene.getNonDeletedElements(),d=this.scene.getSelectedElements(this.state);if(d.length===1&&!r&&!this.state.editingLinearElement){if(this.state.selectedLinearElement&&this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,a,l),(!this.state.selectedLinearElement||this.state.selectedLinearElement.hoverPointIndex===-1)&&((h=this.state.openDialog)==null?void 0:h.name)!=="elementLinkSelector"&&!(d.length===1&&he(d[0]))){const v=bA(u,this.state,a,l,this.state.zoom,n.pointerType,this.scene.getNonDeletedElementsMap(),this.device);if(v&&v.transformHandleType){Ct(this.interactiveCanvas,EA(v));return}}}else if(d.length>1&&!r&&((m=this.state.openDialog)==null?void 0:m.name)!=="elementLinkSelector"){const v=yA(xt(d),a,l,this.state.zoom,n.pointerType,this.device);if(v){Ct(this.interactiveCanvas,EA({transformHandleType:v}));return}}const f=this.getElementAtPosition(o.x,o.y);this.hitLinkElement=this.getElementLinkAtPosition(o,f),!So(this.state)&&(this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?(Ct(this.interactiveCanvas,wt.POINTER),X5e(this.hitLinkElement,this.state,this.scene.getNonDeletedElementsMap())):(OR(),f&&(f.link||fs(f))&&this.state.selectedElementIds[f.id]&&!this.state.contextMenu&&!this.state.showHyperlinkPopup?this.setState({showHyperlinkPopup:"info"}):this.state.activeTool.type==="text"?Ct(this.interactiveCanvas,ue(f)?wt.TEXT:wt.CROSSHAIR):this.state.viewModeEnabled?Ct(this.interactiveCanvas,wt.GRAB):((p=this.state.openDialog)==null?void 0:p.name)==="elementLinkSelector"?Ct(this.interactiveCanvas,wt.AUTO):r?Ct(this.interactiveCanvas,wt.AUTO):this.state.selectedLinearElement?this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,a,l):n[z.CTRL_OR_CMD]?Ct(this.interactiveCanvas,wt.AUTO):(f||this.isHittingCommonBoundingBoxOfSelectedElements(o,d))&&!(f!=null&&f.locked)&&(f&&lr(f)&&this.isIframeLikeElementCenter(f,n,a,l)?(Ct(this.interactiveCanvas,wt.POINTER),this.setState({activeEmbeddable:{element:f,state:"hover"}})):(!f||!he(f)||!(f.startBinding||f.endBinding))&&(Ct(this.interactiveCanvas,wt.MOVE),((U=this.state.activeEmbeddable)==null?void 0:U.state)==="hover"&&this.setState({activeEmbeddable:null})))),((y=this.state.openDialog)==null?void 0:y.name)==="elementLinkSelector"&&f?this.setState(v=>({hoveredElementIds:Wg(v.hoveredElementIds,Li({editingGroupId:v.editingGroupId,selectedElementIds:{[f.id]:!0}},this.scene.getNonDeletedElements(),v,this).selectedElementIds)})):((E=this.state.openDialog)==null?void 0:E.name)==="elementLinkSelector"&&!f&&this.setState(v=>({hoveredElementIds:Wg(v.hoveredElementIds,{})})))});F(this,"handleEraser",(n,i)=>{const s=this.eraserTrail.addPointToPath(i.x,i.y,n.altKey);this.elementsPendingErasure=new Set(s),this.triggerRender()});F(this,"handleTouchMove",n=>{u1=!0});F(this,"handleCanvasPointerDown",n=>{var d,f,h;const i=n.target;if(i.setPointerCapture&&i.setPointerCapture(n.pointerId),this.maybeCleanupAfterMissingPointerUp(n.nativeEvent),this.maybeUnfollowRemoteUser(),this.state.searchMatches&&(this.setState(m=>({searchMatches:m.searchMatches&&{focusedId:null,matches:m.searchMatches.matches.map(p=>({...p,focus:!1}))}})),this.updateEditorAtom(cj,null)),Ns.get(wa)&&this.updateEditorAtom(wa,null),this.state.contextMenu&&this.setState({contextMenu:null}),this.state.snapLines&&this.setAppState({snapLines:[]}),this.updateGestureOnPointerDown(n),n.pointerType==="touch"&&this.state.newElement&&this.state.newElement.type==="freedraw"){const m=this.state.newElement;this.updateScene({...m.points.length<10?{elements:this.scene.getElementsIncludingDeleted().filter(p=>p.id!==m.id)}:{},appState:{newElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:it(Object.keys(this.state.selectedElementIds).filter(p=>p!==m.id).reduce((p,U)=>(p[U]=this.state.selectedElementIds[U],p),{}),this.state)},captureUpdate:((d=this.state.openDialog)==null?void 0:d.name)==="elementLinkSelector"?K.EVENTUALLY:K.NEVER});return}const s=document.getSelection();if(s!=null&&s.anchorNode&&s.removeAllRanges(),this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(n),!this.state.penDetected&&n.pointerType==="pen"&&this.setState(m=>({penMode:!0,penDetected:!0})),!this.device.isTouchScreen&&["pen","touch"].includes(n.pointerType)&&(this.device=i2(this.device,{isTouchScreen:!0})),l1||(this.lastPointerDownEvent=n,this.handleCanvasPanUsingWheelOrSpaceDrag(n)))return;if(this.setState({lastPointerDownWith:n.pointerType,cursorButton:"down"}),this.savePointer(n.clientX,n.clientY,"down"),n.button===Rl.ERASER&&this.state.activeTool.type!==Zn.eraser){this.setState({activeTool:en(this.state,{type:Zn.eraser,lastActiveToolBeforeEraser:this.state.activeTool})},()=>{this.handleCanvasPointerDown(n);const m=()=>{p(),U==null||U(),So(this.state)&&this.setState({activeTool:en(this.state,{...this.state.activeTool.lastActiveTool||{type:Zn.selection},lastActiveToolBeforeEraser:null})})},p=rn(window,ee.POINTER_UP,m,{once:!0});let U;requestAnimationFrame(()=>{U=this.missingPointerEventCleanupEmitter.once(m)})});return}if(n.button!==Rl.MAIN&&n.button!==Rl.TOUCH&&n.button!==Rl.ERASER||mt.pointers.size>1)return;const r=this.initialPointerDownState(n);if(this.setState({selectedElementsAreBeingDragged:!1}),this.handleDraggingScrollBar(n,r)||(this.clearSelectionIfNotUsingSelection(),this.updateBindingEnabledOnPointerMove(n),this.handleSelectionOnPointerDown(n,r))||!(!this.state.penMode||n.pointerType!=="touch"||this.state.activeTool.type==="selection"||this.state.activeTool.type==="lasso"||this.state.activeTool.type==="text"||this.state.activeTool.type==="image"))return;if(this.state.activeTool.type==="lasso")this.lassoTrail.startPath(r.origin.x,r.origin.y,n.shiftKey);else if(this.state.activeTool.type==="text")this.handleTextOnPointerDown(n,r);else if(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")this.handleLinearElementOnPointerDown(n,this.state.activeTool.type,r);else if(this.state.activeTool.type==="image"){Ct(this.interactiveCanvas,wt.CROSSHAIR);const m=this.state.pendingImageElementId&&this.scene.getElement(this.state.pendingImageElementId);if(!m)return;this.setState({newElement:m,pendingImageElementId:null,multiElement:null});const{x:p,y:U}=kt(n,this.state),y=this.getTopLayerFrameAtSceneCoords({x:p,y:U});this.scene.mutateElement(m,{x:p,y:U,frameId:y?y.id:null})}else this.state.activeTool.type==="freedraw"?this.handleFreeDrawElementOnPointerDown(n,this.state.activeTool.type,r):this.state.activeTool.type==="custom"?vo(this.interactiveCanvas,this.state):this.state.activeTool.type===Zn.frame||this.state.activeTool.type===Zn.magicframe?this.createFrameElementOnPointerDown(r,this.state.activeTool.type):this.state.activeTool.type==="laser"?this.laserTrails.startPath(r.lastCoords.x,r.lastCoords.y):this.state.activeTool.type!=="eraser"&&this.state.activeTool.type!=="hand"&&this.createGenericElementOnPointerDown(this.state.activeTool.type,r);(h=(f=this.props)==null?void 0:f.onPointerDown)==null||h.call(f,this.state.activeTool,r),this.onPointerDownEmitter.trigger(this.state.activeTool,r,n),this.state.activeTool.type==="eraser"&&this.eraserTrail.startPath(r.lastCoords.x,r.lastCoords.y);const a=this.onPointerMoveFromPointerDownHandler(r),l=this.onPointerUpFromPointerDownHandler(r),c=this.onKeyDownFromPointerDownHandler(r),u=this.onKeyUpFromPointerDownHandler(r);this.missingPointerEventCleanupEmitter.once(m=>l(m||n.nativeEvent)),(!this.state.viewModeEnabled||this.state.activeTool.type==="laser")&&(window.addEventListener(ee.POINTER_MOVE,a),window.addEventListener(ee.POINTER_UP,l),window.addEventListener(ee.KEYDOWN,c),window.addEventListener(ee.KEYUP,u),r.eventListeners.onMove=a,r.eventListeners.onUp=l,r.eventListeners.onKeyUp=u,r.eventListeners.onKeyDown=c)});F(this,"handleCanvasPointerUp",n=>{var r;this.removePointer(n),this.lastPointerUpEvent=n;const i=kt({clientX:n.clientX,clientY:n.clientY},this.state),s=n.timeStamp-(((r=this.lastPointerDownEvent)==null?void 0:r.timeStamp)??0);if(this.device.editor.isMobile&&s<300){const o=this.getElementAtPosition(i.x,i.y);if(lr(o)&&this.isIframeLikeElementCenter(o,n,i.x,i.y)){this.handleEmbeddableCenterClick(o);return}}if(this.device.isTouchScreen){const o=this.getElementAtPosition(i.x,i.y);this.hitLinkElement=this.getElementLinkAtPosition(i,o)}this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?s<300&&lr(this.hitLinkElement)&&!K$(this.hitLinkElement,this.scene.getNonDeletedElementsMap(),this.state,S(i.x,i.y))?this.handleEmbeddableCenterClick(this.hitLinkElement):this.redirectToLink(n,this.device.isTouchScreen):this.state.viewModeEnabled&&this.setState({activeEmbeddable:null,selectedElementIds:{}})});F(this,"maybeOpenContextMenuAfterPointerDownOnTouchDevices",n=>{n.pointerType==="touch"&&(u1=!1,Al?u1=!0:Al=window.setTimeout(()=>{Al=0,u1||this.handleCanvasContextMenu(n)},Die))});F(this,"resetContextMenuTimer",()=>{clearTimeout(Al),Al=0,u1=!1});F(this,"maybeCleanupAfterMissingPointerUp",n=>{uu==null||uu(),this.missingPointerEventCleanupEmitter.trigger(n).clear()});F(this,"handleCanvasPanUsingWheelOrSpaceDrag",n=>{if(!(mt.pointers.size<=1&&(n.button===Rl.WHEEL||n.button===Rl.MAIN&&cu||Hh(this.state)||this.state.viewModeEnabled)))return!1;l1=!0,this.focusContainer(),this.state.editingTextElement||n.preventDefault();let i=!1;const s=typeof window===void 0?!1:/Linux/.test(window.navigator.platform);Ct(this.interactiveCanvas,wt.GRABBING);let{clientX:r,clientY:o}=n;const a=$E(c=>{const u=r-c.clientX,d=o-c.clientY;if(r=c.clientX,o=c.clientY,s&&!i&&(Math.abs(u)>1||Math.abs(d)>1)){i=!0;const f=m=>{document.body.removeEventListener(ee.PASTE,f),m.stopPropagation()},h=()=>{setTimeout(()=>{document.body.removeEventListener(ee.PASTE,f),window.removeEventListener(ee.POINTER_UP,h)},100)};document.body.addEventListener(ee.PASTE,f),window.addEventListener(ee.POINTER_UP,h)}this.translateCanvas({scrollX:this.state.scrollX-u/this.state.zoom.value,scrollY:this.state.scrollY-d/this.state.zoom.value})}),l=on(uu=()=>{uu=null,l1=!1,cu||(this.state.viewModeEnabled?Ct(this.interactiveCanvas,wt.GRAB):vo(this.interactiveCanvas,this.state)),this.setState({cursorButton:"up"}),this.savePointer(n.clientX,n.clientY,"up"),window.removeEventListener(ee.POINTER_MOVE,a),window.removeEventListener(ee.POINTER_UP,l),window.removeEventListener(ee.BLUR,l),a.flush()});return window.addEventListener(ee.BLUR,l),window.addEventListener(ee.POINTER_MOVE,a,{passive:!0}),window.addEventListener(ee.POINTER_UP,l),!0});F(this,"clearSelectionIfNotUsingSelection",()=>{this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="lasso"&&this.setState({selectedElementIds:it({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})});F(this,"handleSelectionOnPointerDown",(n,i)=>{var s;if(this.state.activeTool.type==="selection"){const r=this.scene.getNonDeletedElements(),o=this.scene.getNonDeletedElementsMap(),a=this.scene.getSelectedElements(this.state);if(a.length===1&&!this.state.editingLinearElement&&!he(a[0])&&!(this.state.selectedLinearElement&&this.state.selectedLinearElement.hoverPointIndex!==-1)){const l=bA(r,this.state,i.origin.x,i.origin.y,this.state.zoom,n.pointerType,this.scene.getNonDeletedElementsMap(),this.device);l!=null&&(l.transformHandleType==="rotation"?(this.setState({resizingElement:l.element}),i.resize.handleType=l.transformHandleType):(this.state.croppingElementId||this.setState({resizingElement:l.element}),i.resize.handleType=l.transformHandleType))}else a.length>1&&(i.resize.handleType=yA(xt(a),i.origin.x,i.origin.y,this.state.zoom,n.pointerType,this.device));if(i.resize.handleType)i.resize.isResizing=!0,i.resize.offset=Wr(sce(i.resize.handleType,a,o,i.origin.x,i.origin.y)),a.length===1&&Ae(a[0])&&a[0].points.length===2&&(i.resize.arrowDirection=rce(i.resize.handleType,a[0]));else{if(this.state.selectedLinearElement){const u=this.state.editingLinearElement||this.state.selectedLinearElement,d=le.handlePointerDown(n,this,this.store,i.origin,u,this.scene);if(d.hitElement&&(i.hit.element=d.hitElement),d.linearElementEditor&&(this.setState({selectedLinearElement:d.linearElementEditor}),this.state.editingLinearElement&&this.setState({editingLinearElement:d.linearElementEditor})),d.didAddPoint)return!0}if(i.hit.element=i.hit.element??this.getElementAtPosition(i.origin.x,i.origin.y),this.hitLinkElement=this.getElementLinkAtPosition(i.origin,i.hit.element),this.hitLinkElement)return!0;if(this.state.croppingElementId&&((s=i.hit.element)==null?void 0:s.id)!==this.state.croppingElementId&&this.finishImageCropping(),i.hit.element&&this.getElementLinkAtPosition({x:i.origin.x,y:i.origin.y},i.hit.element))return!1;i.hit.allHitElements=this.getElementsAtPosition(i.origin.x,i.origin.y);const l=i.hit.element,c=i.hit.allHitElements.some(u=>this.isASelectedElement(u));if((l===null||!c)&&!n.shiftKey&&!i.hit.hasHitCommonBoundingBoxOfSelectedElements&&this.clearSelection(l),this.state.editingLinearElement)this.setState({selectedElementIds:it({[this.state.editingLinearElement.elementId]:!0},this.state)});else if(l!=null){if(n[z.CTRL_OR_CMD])return n.altKey||(this.state.selectedElementIds[l.id]||(i.hit.wasAddedToSelection=!0),this.setState(u=>({...Yoe(u,l),previousSelectedElementIds:this.state.selectedElementIds}))),!1;this.state.selectedElementIds[l.id]||(this.state.editingGroupId&&!Y0(l,this.state.editingGroupId)&&this.setState({selectedElementIds:it({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),!c&&!i.hit.hasHitCommonBoundingBoxOfSelectedElements&&(this.setState(u=>{var h;let d={...u.selectedElementIds,[l.id]:!0};const f=[];if(Object.keys(u.selectedElementIds).forEach(m=>{const p=this.scene.getElement(m);p&&f.push(p)}),Te(l))xr(f,l.id).forEach(m=>{delete d[m.id]});else if(l.frameId)d[l.frameId]&&delete d[l.id];else{const m=l.groupIds,p=new Set(m.flatMap(U=>$t(this.scene.getNonDeletedElements(),U)).filter(U=>Te(U)).map(U=>U.id));p.size>0&&f.forEach(U=>{U.frameId&&p.has(U.frameId)&&(delete d[U.id],U.groupIds.flatMap(y=>$t(this.scene.getNonDeletedElements(),y)).forEach(y=>{delete d[y.id]}))})}return((h=u.openDialog)==null?void 0:h.name)==="elementLinkSelector"&&(l.groupIds.some(m=>u.selectedGroupIds[m])||(d={[l.id]:!0})),{...Li({editingGroupId:u.editingGroupId,selectedElementIds:d},this.scene.getNonDeletedElements(),u,this),showHyperlinkPopup:l.link||fs(l)?"info":!1}}),i.hit.wasAddedToSelection=!0))}this.setState({previousSelectedElementIds:this.state.selectedElementIds})}}return!1});F(this,"handleTextOnPointerDown",(n,i)=>{if(this.state.editingTextElement)return;let s=i.origin.x,r=i.origin.y;const o=this.getElementAtPosition(s,r,{includeBoundTextElement:!0});let a=this.getTextBindableContainerAtPosition(s,r);ns(o)&&(a=o,s=o.x+o.width/2,r=o.y+o.height/2),this.startTextEditing({sceneX:s,sceneY:r,insertAtParentCenter:!n.altKey,container:a,autoEdit:!1}),Or(this.interactiveCanvas),this.state.activeTool.locked||this.setState({activeTool:en(this.state,{type:"selection"})})});F(this,"handleFreeDrawElementOnPointerDown",(n,i,s)=>{const[r,o]=Mn(s.origin.x,s.origin.y,null),a=this.getTopLayerFrameAtSceneCoords({x:r,y:o}),l=n.pressure===.5,c=Ole({type:i,x:r,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:null,simulatePressure:l,locked:!1,frameId:a?a.id:null,points:[S(0,0)],pressures:l?[]:[n.pressure]});this.scene.insertElement(c),this.setState(d=>{const f={...d.selectedElementIds};return delete f[c.id],{selectedElementIds:it(f,d)}});const u=Zr(s.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom);this.setState({newElement:c,startBoundElement:u,suggestedBindings:[]})});F(this,"insertIframeElement",({sceneX:n,sceneY:i,width:s,height:r})=>{var c;const[o,a]=Mn(n,i,(c=this.lastPointerDownEvent)!=null&&c[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),l=Dle({type:"iframe",x:o,y:a,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("iframe"),opacity:this.state.currentItemOpacity,locked:!1,width:s,height:r});return this.scene.insertElement(l),l});F(this,"insertEmbeddableElement",({sceneX:n,sceneY:i,link:s})=>{var c;const[r,o]=Mn(n,i,(c=this.lastPointerDownEvent)!=null&&c[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=zf(s);if(!a)return;a.error instanceof URIError&&this.setToast({message:k("toast.unrecognizedLinkFormat"),closable:!0});const l=lA({type:"embeddable",x:r,y:o,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("embeddable"),opacity:this.state.currentItemOpacity,locked:!1,width:a.intrinsicSize.w,height:a.intrinsicSize.h,link:s});return this.scene.insertElement(l),l});F(this,"createImageElement",({sceneX:n,sceneY:i,addToFrameUnderCursor:s=!0})=>{var c;const[r,o]=Mn(n,i,(c=this.lastPointerDownEvent)!=null&&c[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=s?this.getTopLayerFrameAtSceneCoords({x:r,y:o}):null;return GB({type:"image",x:r,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:null,opacity:this.state.currentItemOpacity,locked:!1,frameId:a?a.id:null})});F(this,"handleLinearElementOnPointerDown",(n,i,s)=>{if(this.state.multiElement){const{multiElement:r}=this.state;if(r.type==="line"&&nl(r.points,this.state.zoom.value)){this.scene.mutateElement(r,{lastCommittedPoint:r.points[r.points.length-1]}),this.actionManager.executeAction(Lr);return}if(he(r)&&r.points.length>1){this.scene.mutateElement(r,{lastCommittedPoint:r.points[r.points.length-1]}),this.actionManager.executeAction(Lr);return}const{x:o,y:a,lastCommittedPoint:l}=r;if(r.points.length>1&&l&&Je(S(s.origin.x-o,s.origin.y-a),l)<n2){this.actionManager.executeAction(Lr);return}this.setState(c=>({selectedElementIds:it({...c.selectedElementIds,[r.id]:!0},c)})),this.scene.mutateElement(r,{lastCommittedPoint:r.points[r.points.length-1]}),Ct(this.interactiveCanvas,wt.POINTER)}else{const[r,o]=Mn(s.origin.x,s.origin.y,n[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=this.getTopLayerFrameAtSceneCoords({x:r,y:o}),{currentItemStartArrowhead:l,currentItemEndArrowhead:c}=this.state,[u,d]=i==="arrow"?[l,c]:[null,null],f=i==="arrow"?sh({type:i,x:r,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemArrowType===ai.round?{type:mn.PROPORTIONAL_RADIUS}:null,startArrowhead:u,endArrowhead:d,locked:!1,frameId:a?a.id:null,elbowed:this.state.currentItemArrowType===ai.elbow,fixedSegments:this.state.currentItemArrowType===ai.elbow?[]:null}):hc({type:i,x:r,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemRoundness==="round"?{type:mn.PROPORTIONAL_RADIUS}:null,locked:!1,frameId:a?a.id:null});this.setState(m=>{const p={...m.selectedElementIds};return delete p[f.id],{selectedElementIds:it(p,m)}}),this.scene.mutateElement(f,{points:[...f.points,S(0,0)]});const h=Zr(s.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,he(f),he(f));this.scene.insertElement(f),this.setState({newElement:f,startBoundElement:h,suggestedBindings:[]})}});F(this,"createGenericElementOnPointerDown",(n,i)=>{var c;const[s,r]=Mn(i.origin.x,i.origin.y,(c=this.lastPointerDownEvent)!=null&&c[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),o=this.getTopLayerFrameAtSceneCoords({x:s,y:r}),a={x:s,y:r,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.getCurrentItemRoundness(n),locked:!1,frameId:o?o.id:null};let l;n==="embeddable"?l=lA({type:"embeddable",...a}):l=lo({type:n,...a}),l.type==="selection"?this.setState({selectionElement:l}):(this.scene.insertElement(l),this.setState({multiElement:null,newElement:l}))});F(this,"createFrameElementOnPointerDown",(n,i)=>{var l;const[s,r]=Mn(n.origin.x,n.origin.y,(l=this.lastPointerDownEvent)!=null&&l[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),o={x:s,y:r,opacity:this.state.currentItemOpacity,locked:!1,...Pt},a=i===Zn.magicframe?W3(o):Tw(o);this.scene.insertElement(a),this.setState({multiElement:null,newElement:a})});F(this,"restoreReadyToEraseElements",()=>{this.elementsPendingErasure=new Set,this.triggerRender()});F(this,"eraseElements",()=>{let n=!1;const i=this.scene.getElementsIncludingDeleted().map(s=>this.elementsPendingErasure.has(s.id)||s.frameId&&this.elementsPendingErasure.has(s.frameId)||Xt(s)&&this.elementsPendingErasure.has(s.containerId)?(n=!0,Ie(s,{isDeleted:!0})):s);this.elementsPendingErasure=new Set,n&&(this.store.scheduleCapture(),this.scene.replaceAllElements(i))});F(this,"initializeImage",async({imageFile:n,imageElement:i,showCursorImagePreview:s=!1})=>{var u,d,f,h;if(!Wu(n))throw new Error(k("errors.unsupportedFileType"));const r=n.type;if(Ct(this.interactiveCanvas,"wait"),r===ye.svg)try{n=TR(mA(await n.text()),n.name)}catch(m){throw console.warn(m),new Error(k("errors.svgImageInsertError"))}const o=await(((d=(u=this.props).generateIdForFile)==null?void 0:d.call(u,n))||W6e(n));if(!o)throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),new Error(k("errors.imageInsertError"));const a=this.files[o];if(!(a!=null&&a.dataURL)){try{n=await M4(n,{maxWidthOrHeight:Vie})}catch(m){console.error("Error trying to resizing image file on insertion",m)}if(n.size>nC)throw new Error(k("errors.fileTooBig",{maxSize:`${Math.trunc(nC/1024/1024)}MB`}))}if(s){const m=(f=this.files[o])==null?void 0:f.dataURL,p=m&&Z6e(m);this.setImagePreviewCursor(p||n)}const l=((h=this.files[o])==null?void 0:h.dataURL)||await A4(n),c=this.scene.mutateElement(i,{fileId:o},{informMutation:!1,isDragging:!1});return new Promise(async(m,p)=>{var U;try{this.addMissingFiles([{mimeType:r,id:o,dataURL:l,created:Date.now(),lastRetrieved:Date.now()}]);const y=this.imageCache.get(o);y||(this.addNewImagesToImageCache(),await this.updateImageCache([c])),(y==null?void 0:y.image)instanceof Promise&&await y.image,this.state.pendingImageElementId!==c.id&&((U=this.state.newElement)==null?void 0:U.id)!==c.id&&this.initializeImageDimensions(c,!0),m(c)}catch(y){console.error(y),p(new Error(k("errors.imageInsertError")))}finally{s||Or(this.interactiveCanvas)}})});F(this,"insertImageElement",async(n,i,s)=>{if(!this.isToolSupported("image")){this.setState({errorMessage:k("errors.imageToolNotSupported")});return}this.scene.insertElement(n);try{return await this.initializeImage({imageFile:i,imageElement:n,showCursorImagePreview:s})}catch(r){return this.scene.mutateElement(n,{isDeleted:!0}),this.actionManager.executeAction(Lr),this.setState({errorMessage:r.message||k("errors.imageInsertError")}),null}});F(this,"setImagePreviewCursor",async n=>{let s;try{s=await M4(n,{maxWidthOrHeight:96})}catch(o){throw o.cause==="UNSUPPORTED"?new Error(k("errors.unsupportedFileType")):o}let r=await A4(s);if(n.type===ye.svg){const o=await WB(r);let a=Math.min(o.height,96),l=a*(o.width/o.height);l>96&&(l=96,a=l*(o.height/o.width));const c=document.createElement("canvas");c.height=a,c.width=l,c.getContext("2d").drawImage(o,0,0,l,a),r=c.toDataURL(ye.svg)}this.state.pendingImageElementId&&Ct(this.interactiveCanvas,`url(${r}) 4 4, auto`)});F(this,"onImageAction",async({insertOnCanvasDirectly:n})=>{try{const i=this.state.width/2+this.state.offsetLeft,s=this.state.height/2+this.state.offsetTop,{x:r,y:o}=kt({clientX:i,clientY:s},this.state),a=await U_({description:"Image",extensions:Object.keys(Ih)}),l=this.createImageElement({sceneX:r,sceneY:o,addToFrameUnderCursor:!1});n?(this.insertImageElement(l,a),this.initializeImageDimensions(l),this.setState({selectedElementIds:it({[l.id]:!0},this.state)},()=>{this.actionManager.executeAction(Lr)})):this.setState({pendingImageElementId:l.id},()=>{this.insertImageElement(l,a,!0)})}catch(i){i.name!=="AbortError"?console.error(i):console.warn(i),this.setState({pendingImageElementId:null,newElement:null,activeTool:en(this.state,{type:"selection"})},()=>{this.actionManager.executeAction(Lr)})}});F(this,"initializeImageDimensions",(n,i=!1)=>{var r;const s=In(n)&&((r=this.imageCache.get(n.fileId))==null?void 0:r.image);if(!s||s instanceof Promise){if(n.width<hu/this.state.zoom.value&&n.height<hu/this.state.zoom.value){const o=100/this.state.zoom.value;this.scene.mutateElement(n,{x:n.x-o/2,y:n.y-o/2,width:o,height:o})}return}if(i||n.width<hu/this.state.zoom.value&&n.height<hu/this.state.zoom.value){const o=Math.max(this.state.height-120,160),a=Math.min(o,Math.floor(this.state.height*.5)/this.state.zoom.value),l=Math.min(s.naturalHeight,a),c=l*(s.naturalWidth/s.naturalHeight),u=n.x+n.width/2-c/2,d=n.y+n.height/2-l/2;this.scene.mutateElement(n,{x:u,y:d,width:c,height:l,crop:null})}});F(this,"updateImageCache",async(n,i=this.files)=>{const{updatedFiles:s,erroredFiles:r}=await KB({imageCache:this.imageCache,fileIds:n.map(o=>o.fileId),files:i});if(s.size||r.size)for(const o of n)s.has(o.fileId)&&Gt.delete(o);return r.size&&this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().map(o=>In(o)&&r.has(o.fileId)?Ie(o,{status:"error"}):o)),{updatedFiles:s,erroredFiles:r}});F(this,"addNewImagesToImageCache",async(n=ZB(this.scene.getNonDeletedElements()),i=this.files)=>{const s=n.filter(r=>!r.isDeleted&&!this.imageCache.has(r.fileId));if(s.length){const{updatedFiles:r}=await this.updateImageCache(s,i);r.size&&this.scene.triggerUpdate()}});F(this,"scheduleImageRefresh",No(()=>{this.addNewImagesToImageCache()},Rie));F(this,"updateBindingEnabledOnPointerMove",n=>{const i=Sae(n);this.state.isBindingEnabled!==i&&this.setState({isBindingEnabled:i})});F(this,"maybeSuggestBindingAtCursor",(n,i)=>{const s=Zr(n,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,!1,i);this.setState({suggestedBindings:s!=null?[s]:[]})});F(this,"maybeSuggestBindingsForLinearElementAtCoords",(n,i,s)=>{if(!i.length)return;const r=i.reduce((o,a)=>{const l=Zr(a,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,he(n),he(n));return l!=null&&!_B(n,s==null?void 0:s.id,l)&&o.push(l),o},[]);this.setState({suggestedBindings:r})});F(this,"handleInteractiveCanvasRef",n=>{var i,s;n!==null?(this.interactiveCanvas=n,this.interactiveCanvas.addEventListener(ee.TOUCH_START,this.onTouchStart,{passive:!1}),this.interactiveCanvas.addEventListener(ee.TOUCH_END,this.onTouchEnd)):((i=this.interactiveCanvas)==null||i.removeEventListener(ee.TOUCH_START,this.onTouchStart),(s=this.interactiveCanvas)==null||s.removeEventListener(ee.TOUCH_END,this.onTouchEnd))});F(this,"handleAppOnDrop",async n=>{var l,c,u,d;const{file:i,fileHandle:s}=await J6e(n),{x:r,y:o}=kt(n,this.state);try{if(Wu(i)&&this.isToolSupported("image")){if((i==null?void 0:i.type)===ye.png||(i==null?void 0:i.type)===ye.svg)try{const h=await w_(i,this.state,this.scene.getElementsIncludingDeleted(),s);this.syncActionResult({...h,appState:{...h.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:K.IMMEDIATELY});return}catch(h){if(h.name!=="EncodingError")throw new Error(k("alerts.couldNotLoadInvalidFile"))}const f=this.createImageElement({sceneX:r,sceneY:o});this.insertImageElement(f,i),this.initializeImageDimensions(f),this.setState({selectedElementIds:it({[f.id]:!0},this.state)});return}}catch(f){return this.setState({isLoading:!1,errorMessage:f.message})}const a=n.dataTransfer.getData(ye.excalidrawlib);if(a&&typeof a=="string"){try{const f=aG(a);this.addElementsFromPasteOrLibrary({elements:FG(f),position:n,files:null})}catch(f){this.setState({errorMessage:f.message})}return}if(i&&await this.loadFileToCanvas(i,s),(c=(l=n.dataTransfer)==null?void 0:l.types)!=null&&c.includes("text/plain")){const f=(u=n.dataTransfer)==null?void 0:u.getData("text");if(f&&f2(f,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(f)||((d=zf(f))==null?void 0:d.type)==="video")){const h=this.insertEmbeddableElement({sceneX:r,sceneY:o,link:$s(f)});h&&this.setState({selectedElementIds:{[h.id]:!0}})}}});F(this,"loadFileToCanvas",async(n,i)=>{n=await __(n);try{const s=this.scene.getElementsIncludingDeleted();let r;try{r=await oG(n,this.state,s,i)}catch(o){const a=o instanceof Mu;if(a&&o.code==="IMAGE_NOT_CONTAINS_SCENE_DATA"&&!this.isToolSupported("image")){this.setState({isLoading:!1,errorMessage:k("errors.imageToolNotSupported")});return}const l=k(a?"alerts.cannotRestoreFromImage":"alerts.couldNotLoadInvalidFile");this.setState({isLoading:!1,errorMessage:l})}if(!r)return;r.type===ye.excalidraw?(qo(s.concat(r.data.elements)),this.store.scheduleMicroAction({action:K.NEVER,elements:_e(s),appState:void 0}),this.setState({isLoading:!0}),this.syncActionResult({...r.data,appState:{...r.data.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:K.IMMEDIATELY})):r.type===ye.excalidrawlib&&await this.library.updateLibrary({libraryItems:n,merge:!0,openLibraryMenu:!0}).catch(o=>{console.error(o),this.setState({errorMessage:k("errors.importLibraryError")})})}catch(s){this.setState({isLoading:!1,errorMessage:s.message})}});F(this,"handleCanvasContextMenu",n=>{if(n.preventDefault(),("pointerType"in n.nativeEvent&&n.nativeEvent.pointerType==="touch"||"pointerType"in n.nativeEvent&&n.nativeEvent.pointerType==="pen"&&n.button!==Rl.SECONDARY)&&this.state.activeTool.type!=="selection")return;const{x:i,y:s}=kt(n,this.state),r=this.getElementAtPosition(i,s,{preferSelected:!0,includeLockedElements:!0}),o=this.scene.getSelectedElements(this.state),a=this.isHittingCommonBoundingBoxOfSelectedElements({x:i,y:s},o),l=r||a?"element":"canvas",c=this.excalidrawContainerRef.current,{top:u,left:d}=c.getBoundingClientRect(),f=n.clientX-d,h=n.clientY-u;at("contextMenu","openContextMenu",l),this.setState({...r&&!this.state.selectedElementIds[r.id]?{...this.state,...Li({editingGroupId:this.state.editingGroupId,selectedElementIds:{[r.id]:!0}},this.scene.getNonDeletedElements(),this.state,this),selectedLinearElement:Ae(r)?new le(r,this.scene.getNonDeletedElementsMap()):null}:this.state,showHyperlinkPopup:!1},()=>{this.setState({contextMenu:{top:h,left:f,items:this.getContextMenuItems(l)}})})});F(this,"maybeDragNewGenericElement",(n,i,s=!0)=>{var m,p,U;const r=this.state.selectionElement,o=n.lastCoords;if(r&&this.state.activeTool.type!=="eraser"){aA({newElement:r,elementType:this.state.activeTool.type,originX:n.origin.x,originY:n.origin.y,x:o.x,y:o.y,width:Pi(n.origin.x,o.x),height:Pi(n.origin.y,o.y),shouldMaintainAspectRatio:Yg(i),shouldResizeFromCenter:!1,scene:this.scene,zoom:this.state.zoom.value,informMutation:!1});return}const a=this.state.newElement;if(!a)return;let[l,c]=Mn(o.x,o.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize());const u=In(a)&&((m=this.imageCache.get(a.fileId))==null?void 0:m.image),d=u&&!(u instanceof Promise)?u.width/u.height:null;this.maybeCacheReferenceSnapPoints(i,[a]);const{snapOffset:f,snapLines:h}=SEe(a,this,i,{x:n.originInGrid.x+(((p=this.state.originSnapOffset)==null?void 0:p.x)??0),y:n.originInGrid.y+(((U=this.state.originSnapOffset)==null?void 0:U.y)??0)},{x:l-n.originInGrid.x,y:c-n.originInGrid.y},this.scene.getNonDeletedElementsMap());l+=f.x,c+=f.y,this.setState({snapLines:h}),aA({newElement:a,elementType:this.state.activeTool.type,originX:n.originInGrid.x,originY:n.originInGrid.y,x:l,y:c,width:Pi(n.originInGrid.x,l),height:Pi(n.originInGrid.y,c),shouldMaintainAspectRatio:ft(a)?!Yg(i):Yg(i),shouldResizeFromCenter:iC(i),zoom:this.state.zoom.value,scene:this.scene,widthAspectRatio:d,originOffset:this.state.originSnapOffset,informMutation:s}),this.setState({newElement:a}),(this.state.activeTool.type===Zn.frame||this.state.activeTool.type===Zn.magicframe)&&this.setState({elementsToHighlight:l2(this.scene.getNonDeletedElements(),a,this.state,this.scene.getNonDeletedElementsMap())})});F(this,"maybeHandleCrop",(n,i)=>{var c;if(!this.state.croppingElementId)return!1;const s=n.resize.handleType,r=n.lastCoords,[o,a]=Mn(r.x-n.resize.offset.x,r.y-n.resize.offset.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),l=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(s&&l&&ft(l)){const u=n.originalElements.get(l.id),d=In(l)&&((c=this.imageCache.get(l.fileId))==null?void 0:c.image);if(u&&ft(u)&&d&&!(d instanceof Promise)){const[f,h]=Mn(r.x,r.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),m={x:f-n.originInGrid.x,y:h-n.originInGrid.y};this.maybeCacheReferenceSnapPoints(i,[l]);const{snapOffset:p,snapLines:U}=ak([l],[u],this,i,m,s);this.scene.mutateElement(l,doe(l,s,d.naturalWidth,d.naturalHeight,o+p.x,a+p.y,i.shiftKey?u.width/u.height:void 0)),ys(l,this.scene,{newSize:{width:l.width,height:l.height}}),this.setState({isCropping:s&&s!=="rotation",snapLines:U})}return!0}return!1});F(this,"maybeHandleResize",(n,i)=>{const s=this.scene.getSelectedElements(this.state),r=s.filter(d=>Te(d)),o=n.resize.handleType;if(r.length>0&&o==="rotation"||s.length===1&&he(s[0])||this.state.croppingElementId)return!1;this.setState({isResizing:o&&o!=="rotation",isRotating:o==="rotation",activeEmbeddable:null});const a=n.lastCoords;let[l,c]=Mn(a.x-n.resize.offset.x,a.y-n.resize.offset.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize());const u=new Map;if(r.forEach(d=>{xr(this.scene.getNonDeletedElements(),d.id).forEach(h=>{u.set(d.id+h.id,{x:h.x-d.x,y:h.y-d.y})})}),!this.state.selectedElementsAreBeingDragged){const[d,f]=Mn(a.x,a.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),h={x:d-n.originInGrid.x,y:f-n.originInGrid.y},m=[...n.originalElements.values()];this.maybeCacheReferenceSnapPoints(i,s);const{snapOffset:p,snapLines:U}=ak(s,He(m,this.state),this,i,h,o);l+=p.x,c+=p.y,this.setState({snapLines:U})}if(ece(n.originalElements,o,s,this.scene,i0(i),iC(i),s.some(d=>ft(d))?!Yg(i):Yg(i),l,c,n.resize.center.x,n.resize.center.y)){const d=Q8(s,this.scene.getNonDeletedElementsMap(),this.state.zoom),f=new Set;return r.forEach(h=>{l2(this.scene.getNonDeletedElements(),h,this.state,this.scene.getNonDeletedElementsMap()).forEach(m=>f.add(m))}),this.setState({elementsToHighlight:[...f],suggestedBindings:d}),!0}return!1});F(this,"getContextMenuItems",n=>{const i=[];return i.push(kR,RR),n==="canvas"?this.state.viewModeEnabled?[...i,LR,k4,ek,D4]:[AR,Kn,kR,RR,DR,Kn,jde,K5e,Kn,LR,O5e,k4,ek,D4]:(i.push(DR),this.state.viewModeEnabled?[I2,...i]:[Kn,MR,I2,AR,Kn,uEe,dEe,fEe,Kn,cEe,Kn,...i,Kn,T5e,S5e,Kn,x5e,mEe,P5e,F5e,H5e,C5e,Kn,k5e,Kn,Vde,$de,Gde,Xde,Kn,D5e,L5e,Kn,lEe,Kn,wG,xG,Kn,Yde,W5e,Kn,LH])});F(this,"handleWheel",on(n=>{if(!(n.target instanceof HTMLCanvasElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLIFrameElement)){n[z.CTRL_OR_CMD]&&n.preventDefault();return}if(n.preventDefault(),l1)return;const{deltaX:i,deltaY:s}=n;if(n.metaKey||n.ctrlKey){const r=Math.sign(s),o=c5*100,a=Math.abs(s);let l=s;a>o&&(l=o*r);let c=this.state.zoom.value-l/100;c+=Math.log10(Math.max(1,this.state.zoom.value))*-r*Math.min(1,a/20),this.translateCanvas(u=>({...Ru({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:Fa(c)},u),shouldCacheIgnoreZoom:!0})),this.resetShouldCacheIgnoreZoomDebounced();return}if(n.shiftKey){this.translateCanvas(({zoom:r,scrollX:o})=>({scrollX:o-(s||i)/r.value}));return}this.translateCanvas(({zoom:r,scrollX:o,scrollY:a})=>({scrollX:o-i/r.value,scrollY:a-s/r.value}))}));F(this,"savePointer",(n,i,s)=>{var l,c;if(!n||!i)return;const{x:r,y:o}=kt({clientX:n,clientY:i},this.state),a={x:r,y:o,tool:this.state.activeTool.type==="laser"?"laser":"pointer"};(c=(l=this.props).onPointerUpdate)==null||c.call(l,{pointer:a,button:s,pointersMap:mt.pointers})});F(this,"resetShouldCacheIgnoreZoomDebounced",Qa(()=>{this.unmounted||this.setState({shouldCacheIgnoreZoom:!1})},300));F(this,"updateDOMRect",n=>{var i;if((i=this.excalidrawContainerRef)!=null&&i.current){const s=this.excalidrawContainerRef.current,{width:r,height:o,left:a,top:l}=s.getBoundingClientRect(),{width:c,height:u,offsetTop:d,offsetLeft:f}=this.state;if(r===c&&o===u&&a===f&&l===d){n&&n();return}this.setState({width:r,height:o,offsetLeft:a,offsetTop:l},()=>{n&&n()})}});F(this,"refresh",()=>{this.setState({...this.getCanvasOffsets()})});const i=Jo(),{excalidrawAPI:s,viewModeEnabled:r=!1,zenModeEnabled:o=!1,gridModeEnabled:a=!1,objectsSnapModeEnabled:l=!1,theme:c=i.theme,name:u=`${k("labels.untitled")}-${uC()}`}=n;if(this.state={...i,theme:c,isLoading:!0,...this.getCanvasOffsets(),viewModeEnabled:r,zenModeEnabled:o,objectsSnapModeEnabled:l,gridModeEnabled:a??i.gridModeEnabled,name:u,width:window.innerWidth,height:window.innerHeight},this.id=NF(),this.library=new $ye(this),this.actionManager=new pEe(this.syncActionResult,()=>this.state,()=>this.scene.getElementsIncludingDeleted(),this),this.scene=new Gb,this.canvas=document.createElement("canvas"),this.rc=Zc.canvas(this.canvas),this.renderer=new hk(this.scene),this.visibleElements=[],this.store=new ble(this),this.history=new Lu(this.store),s){const d={updateScene:this.updateScene,mutateElement:this.mutateElement,updateLibrary:this.library.updateLibrary,addFiles:this.addFiles,resetScene:this.resetScene,getSceneElementsIncludingDeleted:this.getSceneElementsIncludingDeleted,history:{clear:this.resetHistory},scrollToContent:this.scrollToContent,getSceneElements:this.getSceneElements,getAppState:()=>this.state,getFiles:()=>this.files,getName:this.getName,registerAction:f=>{this.actionManager.registerAction(f)},refresh:this.refresh,setToast:this.setToast,id:this.id,setActiveTool:this.setActiveTool,setCursor:this.setCursor,resetCursor:this.resetCursor,updateFrameRendering:this.updateFrameRendering,toggleSidebar:this.toggleSidebar,onChange:f=>this.onChangeEmitter.on(f),onIncrement:f=>this.store.onStoreIncrementEmitter.on(f),onPointerDown:f=>this.onPointerDownEmitter.on(f),onPointerUp:f=>this.onPointerUpEmitter.on(f),onScrollChange:f=>this.onScrollChangeEmitter.on(f),onUserFollow:f=>this.onUserFollowEmitter.on(f)};typeof s=="function"?s(d):console.error("excalidrawAPI should be a function!")}this.excalidrawContainerValue={container:this.excalidrawContainerRef.current,id:this.id},this.fonts=new ja(this.scene),this.history=new Lu(this.store),this.actionManager.registerAll(m4),this.actionManager.registerAction(hEe(this.history)),this.actionManager.registerAction(gEe(this.history))}onWindowMessage(n){if(n.origin!=="https://player.vimeo.com"&&n.origin!=="https://www.youtube.com")return;let i=null;try{i=JSON.parse(n.data)}catch{}if(i)switch(n.origin){case"https://player.vimeo.com":if(i.method==="paused"){let s=null;const r=document.body.querySelectorAll("iframe.excalidraw__embeddable");if(!r)break;for(const o of r)o.contentWindow===n.source&&(s=o.contentWindow);s==null||s.postMessage(JSON.stringify({method:i.value?"play":"pause",value:!0}),"*")}break;case"https://www.youtube.com":if(i.event==="infoDelivery"&&i.info&&i.id&&typeof i.info.playerState=="number"){const s=i.id,r=i.info.playerState;Object.values(oU).includes(r)&&JE.set(s,r)}break}}cacheEmbeddableRef(n,i){i&&this.iFrameRefs.set(n.id,i)}getHTMLIFrameElement(n){return this.iFrameRefs.get(n.id)}handleEmbeddableCenterClick(n){var s,r,o,a;if(((s=this.state.activeEmbeddable)==null?void 0:s.element)===n&&((r=this.state.activeEmbeddable)==null?void 0:r.state)==="active"||(setTimeout(()=>{this.setState({activeEmbeddable:{element:n,state:"active"},selectedElementIds:{[n.id]:!0},newElement:null,selectionElement:null})},100),Bl(n)))return;const i=this.getHTMLIFrameElement(n);if(i!=null&&i.contentWindow){if(i.src.includes("youtube")){const l=JE.get(n.id);switch(l||(JE.set(n.id,oU.UNSTARTED),i.contentWindow.postMessage(JSON.stringify({event:"listening",id:n.id}),"*")),l){case oU.PLAYING:case oU.BUFFERING:(o=i.contentWindow)==null||o.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*");break;default:(a=i.contentWindow)==null||a.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*")}}i.src.includes("player.vimeo.com")&&i.contentWindow.postMessage(JSON.stringify({method:"paused"}),"*")}}isIframeLikeElementCenter(n,i,s,r){var o,a;return n&&!i.altKey&&!i.shiftKey&&!i.metaKey&&!i.ctrlKey&&(((o=this.state.activeEmbeddable)==null?void 0:o.element)!==n||((a=this.state.activeEmbeddable)==null?void 0:a.state)==="hover"||!this.state.activeEmbeddable)&&s>=n.x+n.width/3&&s<=n.x+2*n.width/3&&r>=n.y+n.height/3&&r<=n.y+2*n.height/3}renderEmbeddables(){const n=this.state.zoom.value,i=this.state.width,s=this.state.height,r=this.scene.getNonDeletedElements().filter(o=>fs(o)&&this.embedsValidationStatus.get(o.id)===!0||Bl(o));return g(ge,{children:r.map(o=>{var p,U,y,E,v,w,I,M,T;const{x:a,y:l}=hr({sceneX:o.x,sceneY:o.y},this.state),c=Hb(o,i,s,this.state,this.scene.getNonDeletedElementsMap()),u=this.initializedEmbeds.has(o.id);if(c&&!u&&this.initializedEmbeds.add(o.id),!(c||u))return null;let f;if(Bl(o)){f=null;const _=(((p=o.customData)==null?void 0:p.generationData)??this.magicGenerations.get(o.id))||{status:"error",message:"No generation data",code:"ERR_NO_GENERATION_DATA"};if(_.status==="done"){const x=_.html;f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>x}}else if(_.status==="pending")f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>l0(`
                    <style>
                      html, body {
                        width: 100%;
                        height: 100%;
                        color: ${this.state.theme===Me.DARK?"white":"black"};
                      }
                      body {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        gap: 1rem;
                      }

                      .Spinner {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-left: auto;
                        margin-right: auto;
                      }

                      .Spinner svg {
                        animation: rotate 1.6s linear infinite;
                        transform-origin: center center;
                        width: 40px;
                        height: 40px;
                      }

                      .Spinner circle {
                        stroke: currentColor;
                        animation: dash 1.6s linear 0s infinite;
                        stroke-linecap: round;
                      }

                      @keyframes rotate {
                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes dash {
                        0% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: 0;
                        }
                        50% {
                          stroke-dasharray: 150, 300;
                          stroke-dashoffset: -200;
                        }
                        100% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: -280;
                        }
                      }
                    </style>
                    <div class="Spinner">
                      <svg
                        viewBox="0 0 100 100"
                      >
                        <circle
                          cx="50"
                          cy="50"
                          r="46"
                          stroke-width="8"
                          fill="none"
                          stroke-miter-limit="10"
                        />
                      </svg>
                    </div>
                    <div>Generating...</div>
                  `)};else{let x;_.code==="ERR_GENERATION_INTERRUPTED"?x="Generation was interrupted...":x=_.message||"Generation failed",f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>l0(`
                    <style>
                    html, body {
                      height: 100%;
                    }
                      body {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: ${ze.red[3]};
                      }
                      h1, h3 {
                        margin-top: 0;
                        margin-bottom: 0.5rem;
                      }
                    </style>
                    <h1>Error!</h1>
                    <h3>${x}</h3>
                  `)}}}else f=zf(j9(o.link||""));const h=((U=this.state.activeEmbeddable)==null?void 0:U.element)===o&&((y=this.state.activeEmbeddable)==null?void 0:y.state)==="active",m=((E=this.state.activeEmbeddable)==null?void 0:E.element)===o&&((v=this.state.activeEmbeddable)==null?void 0:v.state)==="hover";return g("div",{className:pe("excalidraw__embeddable-container",{"is-hovered":m}),style:{transform:c?`translate(${a-this.state.offsetLeft}px, ${l-this.state.offsetTop}px) scale(${n})`:"none",display:c?"block":"none",opacity:fB(o,bs(o,this.scene.getNonDeletedElementsMap()),this.elementsPendingErasure,null,((w=this.state.openDialog)==null?void 0:w.name)==="elementLinkSelector"?sF:1),"--embeddable-radius":`${es(Math.min(o.width,o.height),o)}px`},children:P("div",{className:"excalidraw__embeddable-container__inner",style:{width:c?`${o.width}px`:0,height:c?`${o.height}px`:0,transform:c?`rotate(${o.angle}rad)`:"none",pointerEvents:h?gu.enabled:gu.disabled},children:[m&&g("div",{className:"excalidraw__embeddable-hint",children:k("buttons.embeddableInteractionButton")}),g("div",{className:"excalidraw__embeddable__outer",style:{padding:`${o.strokeWidth}px`},children:(fs(o)?(M=(I=this.props).renderEmbeddable)==null?void 0:M.call(I,o,this.state):null)??g("iframe",{ref:_=>this.cacheEmbeddableRef(o,_),className:"excalidraw__embeddable",srcDoc:(f==null?void 0:f.type)==="document"?f.srcdoc(this.state.theme):void 0,src:(f==null?void 0:f.type)!=="document"?(f==null?void 0:f.link)??"":void 0,scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",title:"Excalidraw Embedded Content",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:`${(T=f==null?void 0:f.sandbox)!=null&&T.allowSameOrigin?"allow-same-origin":""} allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads`})})]})},o.id)})})}toggleOverscrollBehavior(n){document.documentElement.style.overscrollBehaviorX=n.type==="pointerenter"?"none":"auto"}render(){var f,h,m,p,U,y,E,v,w;const n=this.scene.getSelectedElements(this.state),{renderTopRightUI:i,renderCustomStats:s}=this.props,r=this.scene.getSceneNonce(),{elementsMap:o,visibleElements:a}=this.renderer.getRenderableElements({sceneNonce:r,zoom:this.state.zoom,offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,height:this.state.height,width:this.state.width,editingTextElement:this.state.editingTextElement,newElementId:(f=this.state.newElement)==null?void 0:f.id,pendingImageElementId:this.state.pendingImageElementId});this.visibleElements=a;const l=this.scene.getNonDeletedElementsMap(),c="setPointerCapture"in HTMLElement.prototype?!1:this.state.selectionElement||this.state.newElement||this.state.selectedElementsAreBeingDragged||this.state.resizingElement||this.state.activeTool.type==="laser"&&this.state.cursorButton==="down",u=n[0],d=((h=Ns.get(wa))==null?void 0:h.type)==="panel";return g("div",{className:pe("excalidraw excalidraw-container",{"excalidraw--view-mode":this.state.viewModeEnabled||((m=this.state.openDialog)==null?void 0:m.name)==="elementLinkSelector","excalidraw--mobile":this.device.editor.isMobile}),style:{"--ui-pointerEvents":c?gu.disabled:gu.enabled,"--right-sidebar-width":"302px"},ref:this.excalidrawContainerRef,onDrop:this.handleAppOnDrop,tabIndex:0,onKeyDown:this.props.handleKeyboardGlobally?void 0:this.onKeyDown,onPointerEnter:this.toggleOverscrollBehavior,onPointerLeave:this.toggleOverscrollBehavior,children:g(wj.Provider,{value:this,children:g(_j.Provider,{value:this.props,children:g(V_.Provider,{value:this.excalidrawContainerValue,children:g(H_.Provider,{value:this.device,children:g(X_.Provider,{value:this.setAppState,children:g(G_.Provider,{value:this.state,children:P($_.Provider,{value:this.scene.getNonDeletedElements(),children:[P(j_.Provider,{value:this.actionManager,children:[g(w4e,{canvas:this.canvas,appState:this.state,files:this.files,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getNonDeletedElements(),onLockToggle:this.toggleLock,onPenModeToggle:this.togglePenMode,onHandToolToggle:this.onHandToolToggle,langCode:J0().code,renderTopRightUI:i,renderCustomStats:s,showExitZenModeBtn:typeof((p=this.props)==null?void 0:p.zenModeEnabled)>"u"&&this.state.zenModeEnabled,UIOptions:this.props.UIOptions,onExportImage:this.onExportImage,renderWelcomeScreen:!this.state.isLoading&&this.state.showWelcomeScreen&&this.state.activeTool.type==="selection"&&!this.state.zenModeEnabled&&!this.scene.getElementsIncludingDeleted().length,app:this,isCollaborating:this.props.isCollaborating,generateLinkForSelection:this.props.generateLinkForSelection,children:this.props.children}),g("div",{className:"excalidraw-textEditorContainer"}),g("div",{className:"excalidraw-contextMenuContainer"}),g("div",{className:"excalidraw-eye-dropper-container"}),g(T4e,{trails:[this.laserTrails,this.lassoTrail,this.eraserTrail]}),n.length===1&&((U=this.state.openDialog)==null?void 0:U.name)!=="elementLinkSelector"&&this.state.showHyperlinkPopup&&g(G5e,{element:u,scene:this.scene,setAppState:this.setAppState,onLinkOpen:this.props.onLinkOpen,setToast:this.setToast,updateEmbedValidationStatus:this.updateEmbedValidationStatus},u.id),this.props.aiEnabled!==!1&&n.length===1&&a2(u)&&g(gk,{element:u,elementsMap:o,children:g(ZE,{title:k("labels.convertToCode"),icon:TH,checked:!1,onChange:()=>this.onMagicFrameGenerate(u,"button")})}),n.length===1&&Bl(u)&&((E=(y=u.customData)==null?void 0:y.generationData)==null?void 0:E.status)==="done"&&P(gk,{element:u,elementsMap:o,children:[g(ZE,{title:k("labels.copySource"),icon:lp,checked:!1,onChange:()=>this.onIframeSrcCopy(u)}),g(ZE,{title:"Enter fullscreen",icon:yde,checked:!1,onChange:()=>{const I=this.getHTMLIFrameElement(u);if(I)try{I.requestFullscreen(),this.setState({activeEmbeddable:{element:u,state:"active"},selectedElementIds:{[u.id]:!0},newElement:null,selectionElement:null})}catch(M){console.warn(M),this.setState({errorMessage:"Couldn't enter fullscreen"})}}})]}),this.state.toast!==null&&g(N4e,{message:this.state.toast.message,onClose:()=>this.setToast(null),duration:this.state.toast.duration,closable:this.state.toast.closable}),this.state.contextMenu&&g(U7e,{items:this.state.contextMenu.items,top:this.state.contextMenu.top,left:this.state.contextMenu.left,actionManager:this.actionManager,onClose:I=>{this.setState({contextMenu:null},()=>{this.focusContainer(),I==null||I()})}}),g(M4e,{canvas:this.canvas,rc:this.rc,elementsMap:o,allElementsMap:l,visibleElements:a,sceneNonce:r,selectionNonce:(v=this.state.selectionElement)==null?void 0:v.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:bm(this),canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:this.flowChartCreator.pendingNodes}}),this.state.newElement&&g(D4e,{appState:this.state,scale:window.devicePixelRatio,rc:this.rc,elementsMap:o,allElementsMap:l,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:!1,canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:null}}),g(x4e,{containerRef:this.excalidrawContainerRef,canvas:this.interactiveCanvas,elementsMap:o,visibleElements:a,allElementsMap:l,selectedElements:n,sceneNonce:r,selectionNonce:(w=this.state.selectionElement)==null?void 0:w.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderScrollbars:this.props.renderScrollbars===!0,device:this.device,renderInteractiveSceneCallback:this.renderInteractiveSceneCallback,handleCanvasRef:this.handleInteractiveCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick}),this.state.userToFollow&&g(b7e,{width:this.state.width,height:this.state.height,userToFollow:this.state.userToFollow,onDisconnect:this.maybeUnfollowRemoteUser}),this.renderFrameNames(),d&&g(nye,{app:this})]}),this.renderEmbeddables()]})})})})})})})})}setPlugins(n){Object.assign(this.plugins,n)}async onMagicFrameGenerate(n,i){var a;const s=(a=this.plugins.diagramToCode)==null?void 0:a.generate;if(!s){this.setState({errorMessage:"No diagram to code plugin found"});return}const r=dw(this.scene.getNonDeletedElements(),n).filter(l=>!a2(l));if(!r.length){i==="button"?(this.setState({errorMessage:"Cannot generate from an empty frame"}),at("ai","generate (no-children)","d2c")):this.setActiveTool({type:"magicframe"});return}const o=this.insertIframeElement({sceneX:n.x+n.width+30,sceneY:n.y,width:n.width,height:n.height});if(o){this.updateMagicGeneration({frameElement:o,data:{status:"pending"}}),this.setState({selectedElementIds:{[o.id]:!0}}),at("ai","generate (start)","d2c");try{const{html:l}=await s({frame:n,children:r});if(at("ai","generate (success)","d2c"),!l.trim()){this.updateMagicGeneration({frameElement:o,data:{status:"error",code:"ERR_OAI",message:"Nothing genereated :("}});return}const c=l.includes("<!DOCTYPE html>")&&l.includes("</html>")?l.slice(l.indexOf("<!DOCTYPE html>"),l.indexOf("</html>")+7):l;this.updateMagicGeneration({frameElement:o,data:{status:"done",html:c}})}catch(l){at("ai","generate (failed)","d2c"),this.updateMagicGeneration({frameElement:o,data:{status:"error",code:"ERR_OAI",message:l.message||"Unknown error during generation"}})}}}onIframeSrcCopy(n){var i,s;((s=(i=n.customData)==null?void 0:i.generationData)==null?void 0:s.status)==="done"&&(eu(n.customData.generationData.html),this.setToast({message:"copied to clipboard",closable:!1,duration:1500}))}clearImageShapeCache(n){const i=n??this.files;this.scene.getNonDeletedElements().forEach(s=>{In(s)&&i[s.fileId]&&(this.imageCache.delete(s.fileId),Gt.delete(s))})}async componentDidMount(){var s;this.unmounted=!1,this.excalidrawContainerValue.container=this.excalidrawContainerRef.current,this.setState.bind(this),Object.defineProperties(window.h,{state:{configurable:!0,get:()=>this.state},setState:{configurable:!0,value:(...r)=>this.setState(...r)},app:{configurable:!0,value:this},history:{configurable:!0,value:this.history},store:{configurable:!0,value:this.store},fonts:{configurable:!0,value:this.fonts}}),this.store.onDurableIncrementEmitter.on(r=>{this.history.record(r.delta)});const{onIncrement:n}=this.props;n&&this.store.onStoreIncrementEmitter.on(r=>{n(r)}),this.scene.onUpdate(this.triggerRender),this.addEventListeners(),this.props.autoFocus&&this.excalidrawContainerRef.current&&this.focusContainer(),this.refreshViewportBreakpoints(),this.refreshEditorBreakpoints(),w3&&this.excalidrawContainerRef.current&&(this.resizeObserver=new ResizeObserver(()=>{this.refreshEditorBreakpoints(),this.updateDOMRect()}),(s=this.resizeObserver)==null||s.observe(this.excalidrawContainerRef.current)),new URLSearchParams(window.location.search.slice(1)).has("web-share-target")?this.restoreFileFromShare():this.updateDOMRect(this.initializeScene),Eie()&&!Uoe()&&this.setState({errorMessage:g(m7e,{})})}componentWillUnmount(){var n,i;(n=window.launchQueue)==null||n.setConsumer(()=>{}),this.renderer.destroy(),this.scene.destroy(),this.scene=new Gb,this.fonts=new ja(this.scene),this.renderer=new hk(this.scene),this.files={},this.imageCache.clear(),(i=this.resizeObserver)==null||i.disconnect(),this.unmounted=!0,this.removeEventListeners(),this.library.destroy(),this.laserTrails.stop(),this.eraserTrail.stop(),this.onChangeEmitter.clear(),this.store.onStoreIncrementEmitter.clear(),this.store.onDurableIncrementEmitter.clear(),Gt.destroy(),Hr.destroy(),clearTimeout(Al),Gn.clearCache(),Li.clearCache(),Al=0,document.documentElement.style.overscrollBehaviorX=""}removeEventListeners(){this.onRemoveEventListenersEmitter.trigger()}addEventListeners(){this.removeEventListeners(),this.props.handleKeyboardGlobally&&this.onRemoveEventListenersEmitter.once(rn(document,ee.KEYDOWN,this.onKeyDown,!1)),this.onRemoveEventListenersEmitter.once(rn(this.excalidrawContainerRef.current,ee.WHEEL,this.handleWheel,{passive:!1}),rn(window,ee.MESSAGE,this.onWindowMessage,!1),rn(document,ee.POINTER_UP,this.removePointer,{passive:!1}),rn(document,ee.COPY,this.onCopy,{passive:!1}),rn(document,ee.KEYUP,this.onKeyUp,{passive:!0}),rn(document,ee.POINTER_MOVE,this.updateCurrentCursorPosition,{passive:!1}),rn(document.fonts,"loadingdone",n=>{const i=n.fontfaces;this.fonts.onLoaded(i)},{passive:!1}),rn(document,ee.GESTURE_START,this.onGestureStart,!1),rn(document,ee.GESTURE_CHANGE,this.onGestureChange,!1),rn(document,ee.GESTURE_END,this.onGestureEnd,!1),rn(window,ee.FOCUS,()=>{this.maybeCleanupAfterMissingPointerUp(null),this.triggerRender(!0)},{passive:!1})),!this.state.viewModeEnabled&&(this.onRemoveEventListenersEmitter.once(rn(document,ee.FULLSCREENCHANGE,this.onFullscreenChange,{passive:!1}),rn(document,ee.PASTE,this.pasteFromClipboard,{passive:!1}),rn(document,ee.CUT,this.onCut,{passive:!1}),rn(window,ee.RESIZE,this.onResize,!1),rn(window,ee.UNLOAD,this.onUnload,!1),rn(window,ee.BLUR,this.onBlur,!1),rn(this.excalidrawContainerRef.current,ee.WHEEL,this.handleWheel,{passive:!1}),rn(this.excalidrawContainerRef.current,ee.DRAG_OVER,this.disableEvent,!1),rn(this.excalidrawContainerRef.current,ee.DROP,this.disableEvent,!1)),this.props.detectScroll&&this.onRemoveEventListenersEmitter.once(rn(_se(this.excalidrawContainerRef.current),ee.SCROLL,this.onScroll,{passive:!1})))}componentDidUpdate(n,i){var c,u,d,f,h,m,p,U,y,E;this.updateEmbeddables();const s=this.scene.getElementsIncludingDeleted(),r=this.scene.getElementsMapIncludingDeleted(),o=this.scene.getNonDeletedElementsMap();!this.state.showWelcomeScreen&&!s.length&&this.setState({showWelcomeScreen:!0}),n.UIOptions.dockedSidebarBreakpoint!==this.props.UIOptions.dockedSidebarBreakpoint&&this.refreshEditorBreakpoints(),i.userToFollow&&!this.state.collaborators.has(i.userToFollow.socketId)&&this.maybeUnfollowRemoteUser(),(i.zoom.value!==this.state.zoom.value||i.scrollX!==this.state.scrollX||i.scrollY!==this.state.scrollY)&&((u=(c=this.props)==null?void 0:c.onScrollChange)==null||u.call(c,this.state.scrollX,this.state.scrollY,this.state.zoom),this.onScrollChangeEmitter.trigger(this.state.scrollX,this.state.scrollY,this.state.zoom)),i.userToFollow!==this.state.userToFollow&&(i.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:i.userToFollow,action:"UNFOLLOW"}),this.state.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:this.state.userToFollow,action:"FOLLOW"})),Object.keys(this.state.selectedElementIds).length&&So(this.state)&&this.setState({activeTool:en(this.state,{type:"selection"})}),this.state.activeTool.type==="eraser"&&i.theme!==this.state.theme&&ZV(this.interactiveCanvas,this.state.theme),i.activeTool.type==="selection"&&this.state.activeTool.type!=="selection"&&this.state.showHyperlinkPopup&&this.setState({showHyperlinkPopup:!1}),n.langCode!==this.props.langCode&&this.updateLanguage(),So(i)&&!So(this.state)&&this.eraserTrail.endPath(),n.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled}),i.viewModeEnabled!==this.state.viewModeEnabled&&(this.addEventListeners(),this.deselectElements()),(((d=i.openDialog)==null?void 0:d.name)==="elementLinkSelector"||((f=this.state.openDialog)==null?void 0:f.name)==="elementLinkSelector")&&((h=i.openDialog)==null?void 0:h.name)!==((m=this.state.openDialog)==null?void 0:m.name)&&(this.deselectElements(),this.setState({hoveredElementIds:{}})),n.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),n.theme!==this.props.theme&&this.props.theme&&this.setState({theme:this.props.theme}),(p=this.excalidrawContainerRef.current)==null||p.classList.toggle("theme--dark",this.state.theme===Me.DARK),this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout(()=>{this.state.editingLinearElement&&this.actionManager.executeAction(Lr)}),(U=this.state.editingTextElement)!=null&&U.isDeleted&&this.setState({editingTextElement:null}),this.state.selectedLinearElement&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&this.setState({selectedLinearElement:null});const{multiElement:l}=i;i.activeTool!==this.state.activeTool&&l!=null&&Cu(this.state)&&Ca(l,!1)&&B3(l,this.state,Wr(le.getPointAtIndexGlobalCoordinates(l,-1,o)),this.scene),this.store.commit(r,this.state),this.state.isLoading||((E=(y=this.props).onChange)==null||E.call(y,s,this.state,this.files),this.onChangeEmitter.trigger(s,this.state,this.files))}static resetTapTwice(){a1=!1}async addElementsFromMixedContentPaste(n,{isPlainPaste:i,sceneX:s,sceneY:r}){if(!i&&n.some(o=>o.type==="imageUrl")&&this.isToolSupported("image")){const o=n.filter(f=>f.type==="imageUrl").map(f=>f.value),a=await Promise.all(o.map(async f=>{try{return{file:await Q6e(f)}}catch(h){let m=h.message;return h.cause==="FETCH_ERROR"?m=k("errors.failedToFetchImage"):h.cause==="UNSUPPORTED"&&(m=k("errors.unsupportedFileType")),{errorMessage:m}}}));let l=r,c=!1;const u={};for(const f of a)if(f.file){const h=this.createImageElement({sceneX:s,sceneY:l}),m=await this.insertImageElement(h,f.file);m&&(c||(c=!0,l-=m.height/2),this.scene.mutateElement(m,{y:l},{informMutation:!1,isDragging:!1}),l=h.y+h.height+25,u[h.id]=!0)}this.setState({selectedElementIds:it(u,this.state)});const d=a.find(f=>!!f.errorMessage);d&&d.errorMessage&&this.setState({errorMessage:d.errorMessage})}else{const o=n.filter(a=>a.type==="text");o.length&&this.addTextFromPaste(o.map(a=>a.value).join(`

`),i)}}addTextFromPaste(n,i=!1){const{x:s,y:r}=kt({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),o={x:s,y:r,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roundness:null,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:n,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:Km,verticalAlign:hb,locked:!1},a=gt({fontSize:o.fontSize,fontFamily:o.fontFamily}),l=Rc(o.fontFamily),[c,,u]=kB(this.state),d=Math.max(Math.min((u-c)*.5,800),200),f=10;let h=r;const m=i?[n]:n.split(`
`),p=m.reduce((U,y,E)=>{var w;const v=Rh(y).trim();if(v.length){const I=this.getTopLayerFrameAtSceneCoords({x:s,y:h});let M=Vn(v,a,l);const T=M.width>d,_=T?qc(v,a,d):v;M=T?Vn(_,a,l):M;const x=s-M.width/2,C=h-M.height/2,R=js({...o,x,y:C,text:_,originalText:v,lineHeight:l,autoResize:!T,frameId:I?I.id:null});U.push(R),h+=R.height+f}else((w=m[E-1])==null?void 0:w.trim())&&(h+=tp(o.fontSize,l)+f);return U},[]);p.length!==0&&(this.scene.insertElements(p),this.setState({selectedElementIds:it(Object.fromEntries(p.map(U=>[U.id,!0])),this.state)}),!i&&p.length>1&&Vk===!1&&!this.device.editor.isMobile&&(this.setToast({message:k("toast.pasteAsSingleElement",{shortcut:Q("CtrlOrCmd+Shift+V")}),duration:5e3}),Vk=!0),this.store.scheduleCapture())}handleTextWysiwyg(n,{isExistingElement:i=!1}){const s=this.scene.getElementsMapIncludingDeleted(),r=(o,a)=>{this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map(l=>l.id===n.id&&ue(l)?Ie(l,{originalText:o,isDeleted:a??l.isDeleted,...$B(l,$n(l,s),s,o)}):l)])};s7e({id:n.id,canvas:this.canvas,getViewportCoords:(o,a)=>{const{x:l,y:c}=hr({sceneX:o,sceneY:a},this.state);return[l-this.state.offsetLeft,c-this.state.offsetTop]},onChange:on(o=>{r(o,!1),t4(n)&&ys(n,this.scene)}),onSubmit:on(({viaKeyboard:o,nextOriginalText:a})=>{const l=!a.trim();if(r(a,l),!l&&o){const c=n.containerId?n.containerId:n.id;Ln.flushSync(()=>{this.setState(u=>({selectedElementIds:it({...u.selectedElementIds,[c]:!0},u)}))})}l&&IB(this.scene.getNonDeletedElements(),[n]),(!l||i)&&this.store.scheduleCapture(),Ln.flushSync(()=>{this.setState({newElement:null,editingTextElement:null})}),this.state.activeTool.locked&&vo(this.interactiveCanvas,this.state),this.focusContainer()}),element:n,excalidrawContainer:this.excalidrawContainerRef.current,app:this,autoSelect:!this.device.isTouchScreen}),this.deselectElements(),r(n.originalText,!1)}deselectElements(){this.setState({selectedElementIds:it({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}getTextElementAtPosition(n,i){const s=this.getElementAtPosition(n,i,{includeBoundTextElement:!0});return s&&ue(s)&&!s.isDeleted?s:null}getElementAtPosition(n,i,s){const r=this.getElementsAtPosition(n,i,s==null?void 0:s.includeBoundTextElement,s==null?void 0:s.includeLockedElements);if(r.length>1){if(s!=null&&s.preferSelected){for(let a=r.length-1;a>-1;a--)if(this.state.selectedElementIds[r[a].id])return r[a]}const o=r[r.length-1];return pf({x:n,y:i,element:o,shape:Gr(o,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()/2,frameNameBound:Te(o)?this.frameNameBoundsCache.get(o):null})?o:r[r.length-2]}return r.length===1?r[0]:null}getElementsAtPosition(n,i,s=!1,r=!1){const o=[],a=this.scene.getNonDeletedElementsMap();return(s&&r?this.scene.getNonDeletedElements():this.scene.getNonDeletedElements().filter(c=>(r||!c.locked)&&(s||!(ue(c)&&c.containerId)))).filter(c=>this.hitElement(n,i,c)).filter(c=>{const u=bs(c,a);return u&&this.state.frameRendering.enabled&&this.state.frameRendering.clip?kC({x:n,y:i},u,a):!0}).filter(c=>Bl(c)?(o.push(c),!1):!0).concat(o)}getElementHitThreshold(){return xie/this.state.zoom.value}hitElement(n,i,s,r=!0){if(r&&this.state.selectedElementIds[s.id]&&ez([s],this.state)){const a=wce(s,this.scene.getNonDeletedElementsMap(),ft(s)?0:this.getElementHitThreshold());if(q0(S(n,i),a))return!0}return VF(n,i,xB(s,this.scene.getNonDeletedElementsMap()))?!0:pf({x:n,y:i,element:s,shape:Gr(s,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:Te(s)?this.frameNameBoundsCache.get(s):null})}getTextBindableContainerAtPosition(n,i){const s=this.scene.getNonDeletedElements(),r=this.scene.getSelectedElements(this.state);if(r.length===1)return ju(r[0],!1)?r[0]:null;let o=null;for(let a=s.length-1;a>=0;--a){if(s[a].isDeleted)continue;const[l,c,u,d]=Ne(s[a],this.scene.getNonDeletedElementsMap());if(xe(s[a])&&pf({x:n,y:i,element:s[a],shape:Gr(s[a],this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold()})){o=s[a];break}else if(l<n&&n<u&&c<i&&i<d){o=s[a];break}}return ju(o,!1)?o:null}handleHoverSelectedLinearElement(n,i,s){const r=this.scene.getNonDeletedElementsMap(),o=le.getElement(n.elementId,r);if(o)if(this.state.selectedLinearElement){let a=-1,l=null;pf({x:i,y:s,element:o,shape:Gr(o,this.scene.getNonDeletedElementsMap())})?(a=le.getPointIndexUnderCursor(o,r,this.state.zoom,i,s),l=le.getSegmentMidpointHitCoords(n,{x:i,y:s},this.state,this.scene.getNonDeletedElementsMap()),(he(o)?a===0||a===o.points.length-1:a>=0)||l?Ct(this.interactiveCanvas,wt.POINTER):this.hitElement(i,s,o)&&(!he(o)||!(o.startBinding||o.endBinding))&&Ct(this.interactiveCanvas,wt.MOVE)):this.hitElement(i,s,o)&&(!he(o)||!(o.startBinding||o.endBinding))&&Ct(this.interactiveCanvas,wt.MOVE),this.state.selectedLinearElement.hoverPointIndex!==a&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,hoverPointIndex:a}}),le.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords,l)||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:l}})}else Ct(this.interactiveCanvas,wt.AUTO)}updateGestureOnPointerDown(n){mt.pointers.set(n.pointerId,{x:n.clientX,y:n.clientY}),mt.pointers.size===2&&(mt.lastCenter=tk(mt.pointers),mt.initialScale=this.state.zoom.value,mt.initialDistance=nk(Array.from(mt.pointers.values())))}initialPointerDownState(n){const i=kt(n,this.state),s=this.scene.getSelectedElements(this.state),[r,o,a,l]=xt(s),c=s.findIndex(he)===0;return{origin:i,withCmdOrCtrl:n[z.CTRL_OR_CMD],originInGrid:Wr(Mn(i.x,i.y,n[z.CTRL_OR_CMD]||c?null:this.getEffectiveGridSize())),scrollbars:dk(c1,n.clientX-this.state.offsetLeft,n.clientY-this.state.offsetTop),lastCoords:{...i},originalElements:this.scene.getNonDeletedElements().reduce((u,d)=>(u.set(d.id,Nc(d)),u),new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(a+r)/2,y:(l+o)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(i,s)},drag:{hasOccurred:!1,offset:null,origin:{...i}},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null},boxSelection:{hasOccurred:!1}}}handleDraggingScrollBar(n,i){if(!(i.scrollbars.isOverEither&&!this.state.multiElement))return!1;QE=!0,i.lastCoords.x=n.clientX,i.lastCoords.y=n.clientY;const s=$E(o=>{o.target instanceof HTMLElement&&this.handlePointerMoveOverScrollbars(o,i)}),r=on(()=>{uu=null,QE=!1,vo(this.interactiveCanvas,this.state),this.setState({cursorButton:"up"}),this.savePointer(n.clientX,n.clientY,"up"),window.removeEventListener(ee.POINTER_MOVE,s),window.removeEventListener(ee.POINTER_UP,r),s.flush()});return uu=r,window.addEventListener(ee.POINTER_MOVE,s),window.addEventListener(ee.POINTER_UP,r),!0}isASelectedElement(n){return n!=null&&this.state.selectedElementIds[n.id]}isHittingCommonBoundingBoxOfSelectedElements(n,i){if(i.length<2)return!1;const s=this.getElementHitThreshold(),[r,o,a,l]=xt(i);return n.x>r-s&&n.x<a+s&&n.y>o-s&&n.y<l+s}getCurrentItemRoundness(n){return this.state.currentItemRoundness==="round"?{type:Od(n)?mn.ADAPTIVE_RADIUS:mn.PROPORTIONAL_RADIUS}:null}maybeCacheReferenceSnapPoints(n,i,s=!1){zc({event:n,app:this,selectedElements:i})&&(s||!Hr.getReferenceSnapPoints())&&Hr.setReferenceSnapPoints(vEe(this.scene.getNonDeletedElements(),i,this.state,this.scene.getNonDeletedElementsMap()))}maybeCacheVisibleGaps(n,i,s=!1){zc({event:n,app:this,selectedElements:i})&&(s||!Hr.getVisibleGaps())&&Hr.setVisibleGaps(EEe(this.scene.getNonDeletedElements(),i,this.state,this.scene.getNonDeletedElementsMap()))}onKeyDownFromPointerDownHandler(n){return on(i=>{this.maybeHandleResize(n,i)||this.maybeDragNewGenericElement(n,i)})}onKeyUpFromPointerDownHandler(n){return on(i=>{i.key===z.ALT&&i.preventDefault(),!this.maybeHandleResize(n,i)&&this.maybeDragNewGenericElement(n,i)})}onPointerMoveFromPointerDownHandler(n){return $E(i=>{var f,h,m,p,U,y;if(((f=this.state.openDialog)==null?void 0:f.name)==="elementLinkSelector")return;const s=kt(i,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.elbowed&&this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index){const[E,v]=Mn(s.x,s.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize());let w=this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index;if(w<0){const M=le.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:E,y:v},this.state,this.scene.getNonDeletedElementsMap());w=M?le.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,M,this.scene.getNonDeletedElementsMap()):-1}const I=le.moveFixedSegment(this.state.selectedLinearElement,w,E,v,this.scene);Ln.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:I.segmentMidPointHoveredCoords,pointerDownState:I.pointerDownState}})});return}const r=this.lastPointerMoveCoords??n.origin;if(this.lastPointerMoveCoords=s,n.drag.offset===null&&(n.drag.offset=Wr(Rle(this.scene.getSelectedElements(this.state),n.origin.x,n.origin.y))),!(i.target instanceof HTMLElement)||this.handlePointerMoveOverScrollbars(i,n))return;if(So(this.state)){this.handleEraser(i,s);return}this.state.activeTool.type==="laser"&&this.laserTrails.addPointToPath(s.x,s.y);const[a,l]=Mn(s.x,s.y,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize());if(!n.drag.hasOccurred&&(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")&&Je(S(s.x,s.y),S(n.origin.x,n.origin.y))<hu)return;if(n.resize.isResizing&&(n.lastCoords.x=s.x,n.lastCoords.y=s.y,this.maybeHandleCrop(n,i)||this.maybeHandleResize(n,i)))return!0;const c=this.scene.getNonDeletedElementsMap();if(this.state.selectedLinearElement){const E=this.state.editingLinearElement||this.state.selectedLinearElement;if(le.shouldAddMidpoint(this.state.selectedLinearElement,s,this.state,c)){const w=le.addMidpoint(this.state.selectedLinearElement,s,this,!i[z.CTRL_OR_CMD],this.scene);if(!w)return;Ln.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:w.pointerDownState,selectedPointsIndices:w.selectedPointsIndices,segmentMidPointHoveredCoords:null}}),this.state.editingLinearElement&&this.setState({editingLinearElement:{...this.state.editingLinearElement,pointerDownState:w.pointerDownState,selectedPointsIndices:w.selectedPointsIndices,segmentMidPointHoveredCoords:null}})});return}else if(E.pointerDownState.segmentMidpoint.value!==null&&!E.pointerDownState.segmentMidpoint.added)return;const v=le.handlePointDragging(i,this,s.x,s.y,(w,I)=>{this.maybeSuggestBindingsForLinearElementAtCoords(w,I)},E,this.scene);if(v){n.lastCoords.x=s.x,n.lastCoords.y=s.y,n.drag.hasOccurred=!0,this.setState({editingLinearElement:this.state.editingLinearElement?v:null,selectedLinearElement:v});return}}const u=n.hit.allHitElements.some(E=>this.isASelectedElement(E)),d=this.state.editingLinearElement&&i.shiftKey&&this.state.editingLinearElement.elementId===((h=n.hit.element)==null?void 0:h.id);if((u||n.hit.hasHitCommonBoundingBoxOfSelectedElements)&&!d&&this.state.activeTool.type!=="lasso"){const E=this.scene.getSelectedElements(this.state);if(E.every(M=>M.locked))return;const v=E.find(M=>Te(M)),w=this.getTopLayerFrameAtSceneCoords(s),I=w&&!v?w:null;if(this.state.frameToHighlight!==I&&Ln.flushSync(()=>{this.setState({frameToHighlight:I})}),n.drag.hasOccurred=!0,E.length>0&&!n.withCmdOrCtrl&&!this.state.editingTextElement&&((m=this.state.activeEmbeddable)==null?void 0:m.state)!=="active"){const M={x:s.x-n.drag.origin.x,y:s.y-n.drag.origin.y},T=[...n.originalElements.values()],_=i.shiftKey;if(_){const R=Math.abs(M.x),N=Math.abs(M.y),D=_&&R<N,$=_&&R>N;D&&(M.x=0),$&&(M.y=0)}if(this.state.croppingElementId){const R=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(R&&ft(R)&&R.crop!==null&&n.hit.element===R){const N=R.crop,D=In(R)&&((p=this.imageCache.get(R.fileId))==null?void 0:p.image);if(D&&!(D instanceof Promise)){const $=At(On(s.x-r.x,s.y-r.y),Math.max(this.state.zoom.value,2)),[G,H,V,X,j,q]=Ne(R,c),fe=re(Z(S(G,H),S(j,q),R.angle)),ie=re(Z(S(V,H),S(j,q),R.angle)),Ue=re(Z(S(G,X),S(j,q),R.angle)),Ve=Bn(yb(ie,fe)),$e=Bn(yb(Ue,fe)),nt=On(rC($,Ve),rC($,$e)),zt={...N,x:Xe(N.x-nt[0]*Math.sign(R.scale[0]),0,D.naturalWidth-N.width),y:Xe(N.y-nt[1]*Math.sign(R.scale[1]),0,D.naturalHeight-N.height)};this.scene.mutateElement(R,{crop:zt});return}}}this.maybeCacheVisibleGaps(i,E),this.maybeCacheReferenceSnapPoints(i,E);const{snapOffset:x,snapLines:C}=wEe(T,M,this,i,this.scene.getNonDeletedElementsMap());if(this.setState({snapLines:C}),this.state.editingFrame||Ale(n,E,M,this.scene,x,i[z.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),this.setState({selectedElementsAreBeingDragged:!0,selectionElement:null}),(E.length!==1||!he(E[0]))&&this.setState({suggestedBindings:Q8(E,this.scene.getNonDeletedElementsMap(),this.state.zoom)}),i.altKey&&!n.hit.hasBeenDuplicated){n.hit.hasBeenDuplicated=!0;const R=this.scene.getElementsIncludingDeleted(),N=n.hit.element,D=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});N&&n.hit.wasAddedToSelection&&!D.find(ie=>ie.id===N.id)&&D.push(N);const $=new Map(D.map(ie=>[ie.id,ie])),{duplicatedElements:G,duplicateElementsMap:H,elementsWithDuplicates:V,origIdToDuplicateId:X}=Vb({type:"in-place",elements:R,appState:this.state,randomizeSeed:!0,idsOfElementsToDuplicate:$,overrides:({duplicateElement:ie,origElement:Ue})=>({frameId:ie.frameId??Ue.frameId,seed:Wo()})});G.forEach(ie=>{n.originalElements.set(ie.id,Nc(ie))});const j=V.map(ie=>{if($.has(ie.id)){const Ue=n.originalElements.get(ie.id);if(Ue)return Ie(ie,{x:Ue.x,y:Ue.y})}return ie}),q=(y=(U=this.props).onDuplicate)==null?void 0:y.call(U,j,R),fe=oo(q||j,_e(G));Ln.flushSync(()=>{if(n.hit.element){const ie=X.get(n.hit.element.id),Ue=ie&&H.get(ie);n.hit.element=Ue||null}n.hit.allHitElements=n.hit.allHitElements.reduce((ie,Ue)=>{const Ve=X.get(Ue.id),$e=Ve&&H.get(Ve);return $e&&ie.push($e),ie},[]),n.drag.origin=kt(i,this.state),this.setState(ie=>({...iB(G,this.scene.getNonDeletedElements(),ie)})),this.scene.replaceAllElements(fe),this.maybeCacheVisibleGaps(i,D,!0),this.maybeCacheReferenceSnapPoints(i,D,!0)})}return}}if(this.state.selectionElement)n.lastCoords.x=s.x,n.lastCoords.y=s.y,i.altKey?Ln.flushSync(()=>{this.setActiveTool({type:"lasso",fromSelection:!0},i.shiftKey),this.lassoTrail.startPath(n.origin.x,n.origin.y,i.shiftKey),this.setAppState({selectionElement:null})}):this.maybeDragNewGenericElement(n,i);else if(this.state.activeTool.type==="lasso")!i.altKey&&this.state.activeTool.fromSelection?(this.setActiveTool({type:"selection"}),this.createGenericElementOnPointerDown("selection",n),n.lastCoords.x=s.x,n.lastCoords.y=s.y,this.maybeDragNewGenericElement(n,i),this.lassoTrail.endPath()):this.lassoTrail.addPointToPath(s.x,s.y,i.shiftKey);else{const E=this.state.newElement;if(!E)return;if(E.type==="freedraw"){const v=E.points,w=s.x-E.x,I=s.y-E.y,M=v.length>0&&v[v.length-1];if(!(M&&M[0]===w&&M[1]===I)){const _=E.simulatePressure?E.pressures:[...E.pressures,i.pressure];this.scene.mutateElement(E,{points:[...v,S(w,I)],pressures:_},{informMutation:!1,isDragging:!1}),this.setState({newElement:E})}}else if(Ae(E)){n.drag.hasOccurred=!0;const v=E.points;let w=a-E.x,I=l-E.y;i0(i)&&v.length===2&&({width:w,height:I}=G3(E.x,E.y,s.x,s.y)),v.length===1?this.scene.mutateElement(E,{points:[...v,S(w,I)]},{informMutation:!1,isDragging:!1}):(v.length===2||v.length>1&&he(E))&&this.scene.mutateElement(E,{points:[...v.slice(0,-1),S(w,I)]},{isDragging:!0,informMutation:!1}),this.setState({newElement:E}),Ca(E,!1)&&this.maybeSuggestBindingsForLinearElementAtCoords(E,[s],this.state.startBoundElement)}else n.lastCoords.x=s.x,n.lastCoords.y=s.y,this.maybeDragNewGenericElement(n,i,!1)}if(this.state.activeTool.type==="selection"){n.boxSelection.hasOccurred=!0;const E=this.scene.getNonDeletedElements();if(this.state.editingLinearElement)le.handleBoxSelection(i,this.state,this.setState.bind(this),this.scene.getNonDeletedElementsMap());else{let v=!0;!i.shiftKey&&Gn(E,this.state)&&(n.withCmdOrCtrl&&n.hit.element?this.setState(I=>Li({...I,selectedElementIds:{[n.hit.element.id]:!0}},this.scene.getNonDeletedElements(),I,this)):v=!1);const w=this.state.selectionElement?rw(E,this.state.selectionElement,this.scene.getNonDeletedElementsMap(),!1):[];this.setState(I=>{const M={...v&&I.selectedElementIds,...w.reduce((T,_)=>(T[_.id]=!0,T),{})};return n.hit.element&&(w.length?delete M[n.hit.element.id]:M[n.hit.element.id]=!0),I=v?I:{...I,selectedGroupIds:{},editingGroupId:null},{...Li({editingGroupId:I.editingGroupId,selectedElementIds:M},this.scene.getNonDeletedElements(),I,this),selectedLinearElement:w.length===1&&Ae(w[0])?new le(w[0],this.scene.getNonDeletedElementsMap()):null,showHyperlinkPopup:w.length===1&&(w[0].link||fs(w[0]))?"info":!1}})}}})}handlePointerMoveOverScrollbars(n,i){var s,r;if(i.scrollbars.isOverHorizontal){const o=n.clientX,a=o-i.lastCoords.x;return this.translateCanvas({scrollX:this.state.scrollX-a*(((s=c1.horizontal)==null?void 0:s.deltaMultiplier)||1)/this.state.zoom.value}),i.lastCoords.x=o,!0}if(i.scrollbars.isOverVertical){const o=n.clientY,a=o-i.lastCoords.y;return this.translateCanvas({scrollY:this.state.scrollY-a*(((r=c1.vertical)==null?void 0:r.deltaMultiplier)||1)/this.state.zoom.value}),i.lastCoords.y=o,!0}return!1}onPointerUpFromPointerDownHandler(n){return on(i=>{var U,y,E,v,w,I,M,T,_,x,C,R;this.removePointer(i),n.eventListeners.onMove&&n.eventListeners.onMove.flush();const{newElement:s,resizingElement:r,croppingElementId:o,multiElement:a,activeTool:l,isResizing:c,isRotating:u,isCropping:d}=this.state;this.setState(N=>({isResizing:!1,isRotating:!1,isCropping:!1,resizingElement:null,selectionElement:null,frameToHighlight:null,elementsToHighlight:null,cursorButton:"up",snapLines:Wg(N.snapLines,[]),originSnapOffset:null})),this.lassoTrail.endPath(),this.lastPointerMoveCoords=null,Hr.setReferenceSnapPoints(null),Hr.setVisibleGaps(null),this.savePointer(i.clientX,i.clientY,"up"),this.setState({selectedElementsAreBeingDragged:!1});const f=this.scene.getNonDeletedElementsMap();if(n.drag.hasOccurred&&((y=(U=n.hit)==null?void 0:U.element)!=null&&y.id)){const N=f.get(n.hit.element.id);so(N)&&((E=N.boundElements)==null||E.filter(D=>D.type==="arrow").map(D=>f.get(D.id)).filter(D=>he(D)).forEach(D=>{D&&this.scene.mutateElement(D,{})}))}if(this.state.editingLinearElement)if(!n.boxSelection.hasOccurred&&((w=(v=n.hit)==null?void 0:v.element)==null?void 0:w.id)!==this.state.editingLinearElement.elementId)this.actionManager.executeAction(Lr);else{const N=le.handlePointerUp(i,this.state.editingLinearElement,this.state,this.scene);N!==this.state.editingLinearElement&&this.setState({editingLinearElement:N,suggestedBindings:[]})}else if(this.state.selectedLinearElement){if(this.state.selectedLinearElement.elbowed){const N=le.getElement(this.state.selectedLinearElement.elementId,this.scene.getNonDeletedElementsMap());N&&this.scene.mutateElement(N,{})}if(((M=(I=n.hit)==null?void 0:I.element)==null?void 0:M.id)!==this.state.selectedLinearElement.elementId)this.scene.getSelectedElements(this.state).length>1&&this.setState({selectedLinearElement:null});else{const N=le.handlePointerUp(i,this.state.selectedLinearElement,this.state,this.scene),{startBindingElement:D,endBindingElement:$}=N,G=this.scene.getElement(N.elementId);Ca(G)&&w5(G,D,$,this.scene),N!==this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...N,selectedPointsIndices:null},suggestedBindings:[]})}}if(this.missingPointerEventCleanupEmitter.clear(),window.removeEventListener(ee.POINTER_MOVE,n.eventListeners.onMove),window.removeEventListener(ee.POINTER_UP,n.eventListeners.onUp),window.removeEventListener(ee.KEYDOWN,n.eventListeners.onKeyDown),window.removeEventListener(ee.KEYUP,n.eventListeners.onKeyUp),this.state.pendingImageElementId&&this.setState({pendingImageElementId:null}),(_=(T=this.props)==null?void 0:T.onPointerUp)==null||_.call(T,l,n),this.onPointerUpEmitter.trigger(this.state.activeTool,n,i),(s==null?void 0:s.type)==="freedraw"){const N=kt(i,this.state),D=s.points;let $=N.x-s.x,G=N.y-s.y;$===D[0][0]&&G===D[0][1]&&(G+=1e-4,$+=1e-4);const H=s.simulatePressure?[]:[...s.pressures,i.pressure];this.scene.mutateElement(s,{points:[...D,S($,G)],pressures:H,lastCommittedPoint:S($,G)}),this.actionManager.executeAction(Lr);return}if(ft(s)){const N=s;try{this.initializeImageDimensions(N),this.setState({selectedElementIds:it({[N.id]:!0},this.state)},()=>{this.actionManager.executeAction(Lr)})}catch(D){console.error(D),this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter($=>$.id!==N.id)),this.actionManager.executeAction(Lr)}return}if(Ae(s)){s.points.length>1&&this.store.scheduleCapture();const N=kt(i,this.state);!n.drag.hasOccurred&&s&&!a?(this.scene.mutateElement(s,{points:[...s.points,S(N.x-s.x,N.y-s.y)]},{informMutation:!1,isDragging:!1}),this.setState({multiElement:s,newElement:s})):n.drag.hasOccurred&&!a&&(Cu(this.state)&&Ca(s,!1)&&B3(s,this.state,N,this.scene),this.setState({suggestedBindings:[],startBoundElement:null}),l.locked?this.setState(D=>({newElement:null})):(Or(this.interactiveCanvas),this.setState(D=>({newElement:null,activeTool:en(this.state,{type:"selection"}),selectedElementIds:it({...D.selectedElementIds,[s.id]:!0},D),selectedLinearElement:new le(s,this.scene.getNonDeletedElementsMap())}))),this.scene.triggerUpdate());return}if(ue(s)){const N=ew(gt({fontSize:s.fontSize,fontFamily:s.fontFamily}),s.lineHeight);s.width<N&&this.scene.mutateElement(s,{autoResize:!0}),this.resetCursor(),this.handleTextWysiwyg(s,{isExistingElement:!0})}if(l.type!=="selection"&&s&&gd(s)){this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(N=>N.id!==s.id),appState:{newElement:null},captureUpdate:K.NEVER});return}if(Te(s)){const N=nae(this.scene.getElementsIncludingDeleted(),s,this.scene.getNonDeletedElementsMap());this.scene.replaceAllElements(o0(this.scene.getElementsMapIncludingDeleted(),N,s,this.state))}if(s&&(this.scene.mutateElement(s,DB(s),{informMutation:!1,isDragging:!1}),this.scene.triggerUpdate()),n.drag.hasOccurred){const N=kt(i,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.isDragging){const D=this.scene.getElement(this.state.selectedLinearElement.elementId);if(D!=null&&D.frameId){const $=bs(D,f);$&&D&&(Lc(D,$,this.scene.getNonDeletedElementsMap())||(this.scene.mutateElement(D,{groupIds:[]}),y5([D],this.scene.getNonDeletedElementsMap()),this.scene.triggerUpdate()))}}else{const D=this.getTopLayerFrameAtSceneCoords(N),$=this.scene.getSelectedElements(this.state);let G=this.scene.getElementsMapIncludingDeleted();const H=V=>{if(V.length>0){for(const X of V){const j=X.groupIds.indexOf(this.state.editingGroupId);this.scene.mutateElement(X,{groupIds:X.groupIds.slice(0,j)},{informMutation:!1,isDragging:!1})}G.forEach(X=>{X.groupIds.length&&$t(G,X.groupIds[X.groupIds.length-1]).length<2&&this.scene.mutateElement(X,{groupIds:[]},{informMutation:!1,isDragging:!1})}),this.setState({editingGroupId:null})}};if(D&&!this.state.selectedElementIds[D.id]){const V=$.filter(X=>X.frameId!==D.id&&Rb(X,G,this.state));this.state.editingGroupId&&H(V),G=o0(G,V,D,this.state)}else if(!D&&this.state.editingGroupId){const V=$.filter(X=>X.frameId&&!Rb(X,G,this.state));H(V)}G=Dh(G,this.state,this),this.scene.replaceAllElements(G)}}if(r&&this.store.scheduleCapture(),r&&gd(r)&&this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter(N=>N.id!==r.id),captureUpdate:K.NEVER}),n.resize.isResizing){let N=Dh(this.scene.getElementsIncludingDeleted(),this.state,this);const D=this.scene.getSelectedElements(this.state).filter($=>Te($));for(const $ of D)N=oB(N,l2(this.scene.getElementsIncludingDeleted(),$,this.state,f),$,this);this.scene.replaceAllElements(N)}const h=n.hit.element;((x=this.state.selectedLinearElement)==null?void 0:x.elementId)!==(h==null?void 0:h.id)&&Ae(h)&&this.scene.getSelectedElements(this.state).length===1&&this.setState({selectedLinearElement:new le(h,this.scene.getNonDeletedElementsMap())}),(!o||o&&(!h&&!d||h&&h.id!==o))&&this.finishImageCropping();const m=this.lastPointerDownEvent,p=this.lastPointerUpEvent||this.lastPointerMoveEvent;if(So(this.state)&&m&&p){if(this.eraserTrail.endPath(),Je(S(m.clientX,m.clientY),S(p.clientX,p.clientY))===0){const D=kt({clientX:p.clientX,clientY:p.clientY},this.state);this.getElementsAtPosition(D.x,D.y).forEach(G=>this.elementsPendingErasure.add(G.id))}this.eraseElements();return}else this.elementsPendingErasure.size&&this.restoreReadyToEraseElements();if(h&&!n.drag.hasOccurred&&!n.hit.wasAddedToSelection&&(!this.state.editingLinearElement||!n.boxSelection.hasOccurred)&&this.state.activeTool.type!=="lasso"&&(i.shiftKey&&!this.state.editingLinearElement?this.state.selectedElementIds[h.id]?qF(this.state,h)?this.setState(N=>{const D={...N.selectedElementIds};for(const $ of h.groupIds.flatMap(G=>$t(this.scene.getNonDeletedElements(),G)))delete D[$.id];return{selectedGroupIds:{...N.selectedElementIds,...h.groupIds.map($=>({[$]:!1})).reduce(($,G)=>({...$,...G}),{})},selectedElementIds:it(D,N)}}):(C=this.state.selectedLinearElement)!=null&&C.isDragging||this.setState(N=>{const D={...N.selectedElementIds};delete D[h.id];const $=He(this.scene.getNonDeletedElements(),{selectedElementIds:D});return{...Li({editingGroupId:N.editingGroupId,selectedElementIds:D},this.scene.getNonDeletedElements(),N,this),selectedLinearElement:$.length===1&&Ae($[0])?new le($[0],this.scene.getNonDeletedElementsMap()):N.selectedLinearElement}}):h.frameId&&this.state.selectedElementIds[h.frameId]?this.setState(N=>{var $;const D={...N.selectedElementIds,[h.id]:!0};return delete D[h.frameId],((($=this.scene.getElement(h.frameId))==null?void 0:$.groupIds)??[]).flatMap(G=>$t(this.scene.getNonDeletedElements(),G)).forEach(G=>{delete D[G.id]}),{...Li({editingGroupId:N.editingGroupId,selectedElementIds:D},this.scene.getNonDeletedElements(),N,this),showHyperlinkPopup:h.link||fs(h)?"info":!1}}):this.setState(N=>({selectedElementIds:it({...N.selectedElementIds,[h.id]:!0},N)})):this.setState(N=>{var D;return{...Li({editingGroupId:N.editingGroupId,selectedElementIds:{[h.id]:!0}},this.scene.getNonDeletedElements(),N,this),selectedLinearElement:Ae(h)&&((D=N.selectedLinearElement)==null?void 0:D.elementId)!==h.id?new le(h,this.scene.getNonDeletedElementsMap()):N.selectedLinearElement}})),this.state.activeTool.type!=="lasso"&&!(h&&he(h))&&!n.drag.hasOccurred&&!this.state.isResizing&&(h&&Yre({x:n.origin.x,y:n.origin.y,element:h,shape:Gr(h,this.scene.getNonDeletedElementsMap()),threshold:this.getElementHitThreshold(),frameNameBound:Te(h)?this.frameNameBoundsCache.get(h):null},f)||!h&&n.hit.hasHitCommonBoundingBoxOfSelectedElements)){this.state.editingLinearElement?this.setState({editingLinearElement:null}):this.setState({selectedElementIds:it({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),Ct(this.interactiveCanvas,wt.AUTO);return}if(!l.locked&&l.type!=="freedraw"&&s&&this.setState(N=>({selectedElementIds:it({...N.selectedElementIds,[s.id]:!0},N),showHyperlinkPopup:fs(s)&&!s.link?"editor":N.showHyperlinkPopup})),(l.type!=="selection"||Gn(this.scene.getNonDeletedElements(),this.state)||!Ji(this.state.previousSelectedElementIds,this.state.selectedElementIds))&&this.store.scheduleCapture(),n.drag.hasOccurred||c||u||d){const N=this.scene.getSelectedElements(this.state).filter(Ae);Db(N,Cu(this.state),((R=this.state.selectedLinearElement)==null?void 0:R.selectedPointsIndices)??[],this.scene,this.state.zoom)}if(l.type==="laser"){this.laserTrails.endPath();return}!l.locked&&l.type!=="freedraw"&&(l.type!=="lasso"||l.type==="lasso"&&l.fromSelection)?(Or(this.interactiveCanvas),this.setState({newElement:null,suggestedBindings:[],activeTool:en(this.state,{type:"selection"})})):this.setState({newElement:null,suggestedBindings:[]}),h&&this.lastPointerUpEvent&&this.lastPointerDownEvent&&this.lastPointerUpEvent.timeStamp-this.lastPointerDownEvent.timeStamp<300&&mt.pointers.size<=1&&lr(h)&&this.isIframeLikeElementCenter(h,this.lastPointerUpEvent,n.origin.x,n.origin.y)&&this.handleEmbeddableCenterClick(h)})}clearSelection(n){this.setState(i=>({selectedElementIds:it({},i),activeEmbeddable:null,selectedGroupIds:{},editingGroupId:i.editingGroupId&&n!=null&&Y0(n,i.editingGroupId)?i.editingGroupId:null})),this.setState({selectedElementIds:it({},this.state),activeEmbeddable:null,previousSelectedElementIds:this.state.selectedElementIds})}getTextWysiwygSnappedToCenterPosition(n,i,s,r){if(r){let o=r.x+r.width/2,a=r.y+r.height/2;const l=W8(r,s,this.scene.getNonDeletedElementsMap());if(l&&(o=l.x,a=l.y),Math.hypot(n-o,i-a)<_ie){const{x:d,y:f}=hr({sceneX:o,sceneY:a},s);return{viewportX:d,viewportY:f,elementCenterX:o,elementCenterY:a}}}}getCanvasOffsets(){var n;if((n=this.excalidrawContainerRef)!=null&&n.current){const i=this.excalidrawContainerRef.current,{left:s,top:r}=i.getBoundingClientRect();return{offsetLeft:s,offsetTop:r}}return{offsetLeft:0,offsetTop:0}}async updateLanguage(){const n=ap.find(i=>i.code===this.props.langCode)||Pd;await rH(n),this.setAppState({})}}const O4e=()=>{window.h=window.h||{},Object.defineProperties(window.h,{elements:{configurable:!0,get(){var e;return(e=this.app)==null?void 0:e.scene.getElementsIncludingDeleted()},set(e){var t;return(t=this.app)==null?void 0:t.scene.replaceAllElements(qo(e))}},scene:{configurable:!0,get(){var e;return(e=this.app)==null?void 0:e.scene}}})};O4e();const P4e=e=>{const[t,n]=L.useState(!0);return L.useEffect(()=>{const i=async()=>{await rH(s),n(!1)},s=ap.find(r=>r.code===e.langCode)||Pd;i()},[e.langCode]),t?g(dX,{theme:e.theme}):e.children},Sj=({children:e})=>{const{FooterCenterTunnel:t}=os(),n=Ui();return g(t.In,{children:g("div",{className:pe("footer-center zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":n.zenModeEnabled}),children:e})})};Sj.displayName="FooterCenter";const Ij=({isCollaborating:e,onSelect:t,...n})=>{const i=Ui(),s=i.width<830;return P(Td,{...n,className:pe("collab-button",{active:e}),type:"button",onSelect:t,style:{position:"relative",width:s?void 0:"auto"},title:k("labels.liveCollaboration"),children:[s?zw:k("labels.share"),i.collaborators.size>0&&g("div",{className:"CollabButton-collaborators",children:i.collaborators.size})]})};Ij.displayName="LiveCollaborationTrigger";const F4e=()=>g("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ExcalidrawLogo-icon",children:g("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),B4e=()=>P("svg",{viewBox:"0 0 450 55",xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"ExcalidrawLogo-text",children:[g("path",{d:"M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z",fill:"currentColor",transform:"translate(-144.023 -51.76)"})]}),xj=({style:e,size:t="small",withText:n})=>P("div",{className:`ExcalidrawLogo is-${t}`,style:e,children:[g(F4e,{}),n&&g(B4e,{})]}),Cj=({icon:e,shortcut:t,children:n})=>{const i=si();return P(ge,{children:[g("div",{className:"welcome-screen-menu-item__icon",children:e}),g("div",{className:"welcome-screen-menu-item__text",children:n}),t&&!i.editor.isMobile&&g("div",{className:"welcome-screen-menu-item__shortcut",children:t})]})},hy=({onSelect:e,children:t,icon:n,shortcut:i,className:s="",...r})=>g("button",{...r,type:"button",className:`welcome-screen-menu-item ${s}`,onClick:e,children:g(Cj,{icon:n,shortcut:i,children:t})}),Aj=({children:e,href:t,icon:n,shortcut:i,className:s="",...r})=>g("a",{...r,className:`welcome-screen-menu-item ${s}`,href:t,target:"_blank",rel:"noopener",children:g(Cj,{icon:n,shortcut:i,children:e})});Aj.displayName="WelcomeScreenMenuItemLink";const po=({children:e})=>{const{WelcomeScreenCenterTunnel:t}=os();return g(t.In,{children:g("div",{className:"welcome-screen-center",children:e||P(ge,{children:[g(W_,{}),g(K_,{children:k("welcomeScreen.defaults.center_heading")}),P(Z_,{children:[g(Q_,{}),g(q_,{})]})]})})})};po.displayName="Center";const W_=({children:e})=>g("div",{className:"welcome-screen-center__logo excalifont welcome-screen-decor",children:e||g(xj,{withText:!0})});W_.displayName="Logo";const K_=({children:e})=>g("div",{className:"welcome-screen-center__heading welcome-screen-decor excalifont",children:e});K_.displayName="Heading";const Z_=({children:e})=>g("div",{className:"welcome-screen-menu",children:e});Z_.displayName="Menu";const q_=()=>{const e=Ss();return g(hy,{onSelect:()=>e.executeAction(I_),shortcut:"?",icon:Pw,children:k("helpDialog.title")})};q_.displayName="MenuItemHelp";const Q_=()=>{const e=Ui(),t=Ss();return e.viewModeEnabled?null:g(hy,{onSelect:()=>t.executeAction(R4),shortcut:Vi("loadScene"),icon:Bw,children:k("buttons.load")})};Q_.displayName="MenuItemLoadScene";const Mj=({onSelect:e})=>{const{t}=Un();return g(hy,{shortcut:null,onSelect:e,icon:Hw,children:t("labels.liveCollaboration")})};Mj.displayName="MenuItemLiveCollaborationTrigger";po.Logo=W_;po.Heading=K_;po.Menu=Z_;po.MenuItem=hy;po.MenuItemLink=Aj;po.MenuItemHelp=q_;po.MenuItemLoadScene=Q_;po.MenuItemLiveCollaborationTrigger=Mj;const J_=({children:e})=>{const{WelcomeScreenMenuHintTunnel:t}=os();return g(t.In,{children:P("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",children:[iue,g("div",{className:"welcome-screen-decor-hint__label",children:e||k("welcomeScreen.defaults.menuHint")})]})})};J_.displayName="MenuHint";const eT=({children:e})=>{const{WelcomeScreenToolbarHintTunnel:t}=os();return g(t.In,{children:P("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",children:[g("div",{className:"welcome-screen-decor-hint__label",children:e||k("welcomeScreen.defaults.toolbarHint")}),rue]})})};eT.displayName="ToolbarHint";const tT=({children:e})=>{const{WelcomeScreenHelpHintTunnel:t}=os();return g(t.In,{children:P("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",children:[g("div",{children:e||k("welcomeScreen.defaults.helpHint")}),sue]})})};tT.displayName="HelpHint";const cs=e=>g(ge,{children:e.children||P(ge,{children:[g(po,{}),g(J_,{}),g(eT,{}),g(tT,{})]})});cs.displayName="WelcomeScreen";cs.Center=po;cs.Hints={MenuHint:J_,ToolbarHint:eT,HelpHint:tT};const Rj=()=>{Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(e){if(e=Math.trunc(e)||0,e<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0}),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=function(...e){this.innerHTML="",this.append(...e)})},z4e=(e,t,n)=>{var i,s,r;return!!(t&&(t.id===((i=e.editingTextElement)==null?void 0:i.id)||t.id===((s=e.resizingElement)==null?void 0:s.id)||t.id===((r=e.newElement)==null?void 0:r.id)||t.version>n.version||t.version===n.version&&t.versionNonce<n.versionNonce))},H4e=No((e,t,n)=>{{const i=qo(e.map(s=>({...s})));ww(i,{shouldThrow:G9(),includeBoundTextValidation:!0,reconciliationContext:{localElements:t,remoteElements:n}})}},1e3*60,{leading:!0,trailing:!1}),nT=(e,t,n)=>{const i=_e(e),s=[],r=new Set;for(const a of t)if(!r.has(a.id)){const l=i.get(a.id),c=z4e(n,l,a);l&&c?(s.push(l),r.add(l.id)):(s.push(a),r.add(a.id))}for(const a of e)r.has(a.id)||(s.push(a),r.add(a.id));const o=_w(s);return H4e(o,e,t),qo(o),o},kj=({children:e,icon:t})=>{const{TTDDialogTriggerTunnel:n}=os(),i=Yn();return g(n.In,{children:P(Qe.Item,{onSelect:()=>{at("ai","dialog open","ttd"),i({openDialog:{name:"ttd",tab:"text-to-diagram"}})},icon:t??vde,children:[e??k("labels.textToDiagram"),g(Qe.Item.Badge,{children:"AI"})]})})};kj.displayName="TTDDialogTrigger";const V4e=e=>{const t=mo();return L.useLayoutEffect(()=>{t.setPlugins({diagramToCode:{generate:e.generate}})},[t,e.generate]),null};Rj();const $4e=e=>{var q,fe,ie,Ue;const{onChange:t,onIncrement:n,initialData:i,excalidrawAPI:s,isCollaborating:r=!1,onPointerUpdate:o,renderTopRightUI:a,langCode:l=Pd.code,viewModeEnabled:c,zenModeEnabled:u,gridModeEnabled:d,libraryReturnUrl:f,theme:h,name:m,renderCustomStats:p,onPaste:U,detectScroll:y=!0,handleKeyboardGlobally:E=!1,onLibraryChange:v,autoFocus:w=!1,generateIdForFile:I,onLinkOpen:M,generateLinkForSelection:T,onPointerDown:_,onPointerUp:x,onScrollChange:C,onDuplicate:R,children:N,validateEmbeddable:D,renderEmbeddable:$,aiEnabled:G,showDeprecatedFonts:H,renderScrollbars:V}=e,X=(q=e.UIOptions)==null?void 0:q.canvasActions,j={...e.UIOptions,canvasActions:{...tC.canvasActions,...X},tools:{image:((ie=(fe=e.UIOptions)==null?void 0:fe.tools)==null?void 0:ie.image)??!0}};return X!=null&&X.export&&(j.canvasActions.export.saveFileToDisk=((Ue=X.export)==null?void 0:Ue.saveFileToDisk)??tC.canvasActions.export.saveFileToDisk),j.canvasActions.toggleTheme===null&&typeof h>"u"&&(j.canvasActions.toggleTheme=!0),L.useEffect(()=>{(async()=>{await be(()=>import("./roundRect-0PYZxl1G.js"),__vite__mapDeps([]))})();const $e=nt=>{typeof nt.scale=="number"&&nt.scale!==1&&nt.preventDefault()};return document.addEventListener("touchmove",$e,{passive:!1}),()=>{document.removeEventListener("touchmove",$e)}},[]),g(Wce,{store:Ns,children:g(P4e,{langCode:l,theme:h,children:g(Y_,{onChange:t,onIncrement:n,initialData:i,excalidrawAPI:s,isCollaborating:r,onPointerUpdate:o,renderTopRightUI:a,langCode:l,viewModeEnabled:c,zenModeEnabled:u,gridModeEnabled:d,libraryReturnUrl:f,theme:h,name:m,renderCustomStats:p,UIOptions:j,onPaste:U,detectScroll:y,handleKeyboardGlobally:E,onLibraryChange:v,autoFocus:w,generateIdForFile:I,onLinkOpen:M,generateLinkForSelection:T,onPointerDown:_,onPointerUp:x,onScrollChange:C,onDuplicate:R,validateEmbeddable:D,renderEmbeddable:$,aiEnabled:G!==!1,showDeprecatedFonts:H,renderScrollbars:V,children:N})})})},G4e=(e,t)=>{if(e.children!==t.children)return!1;const{initialData:n,UIOptions:i={},...s}=e,{initialData:r,UIOptions:o={},...a}=t,l=Object.keys(i),c=Object.keys(o);return l.length!==c.length?!1:l.every(d=>d==="canvasActions"?Object.keys(i.canvasActions).every(h=>{var m,p,U,y;return h==="export"&&((m=i==null?void 0:i.canvasActions)!=null&&m.export)&&((p=o==null?void 0:o.canvasActions)!=null&&p.export)?i.canvasActions.export.saveFileToDisk===o.canvasActions.export.saveFileToDisk:((U=i==null?void 0:i.canvasActions)==null?void 0:U[h])===((y=o==null?void 0:o.canvasActions)==null?void 0:y[h])}):i[d]===o[d])&&Ji(s,a)},Dj=ae.memo($4e,G4e);Dj.displayName="Excalidraw";const X4e=({link:e,onCloseRequest:t,setErrorMessage:n})=>{const{t:i}=Un(),[,s]=L.useState(!1),r=L.useRef(0),o=L.useRef(null),a=async()=>{var u;try{await eu(e)}catch{n(i("errors.copyToSystemClipboardFailed"))}s(!0),r.current&&window.clearTimeout(r.current),r.current=window.setTimeout(()=>{s(!1)},3e3),(u=o.current)==null||u.select()},{onCopy:l,copyStatus:c}=z_();return g(Ws,{onCloseRequest:t,title:!1,size:"small",children:P("div",{className:"ShareableLinkDialog",children:[g("h3",{children:"Shareable link"}),P("div",{className:"ShareableLinkDialog__linkRow",children:[g(Gh,{ref:o,label:"Link",readonly:!0,fullWidth:!0,value:e,selectOnRender:!0}),g(no,{size:"large",label:i("buttons.copyLink"),icon:lp,status:c,onClick:()=>{l(),a()}})]}),P("div",{className:"ShareableLinkDialog__description",children:["🔒 ",i("alerts.uploadedSecurly")]})]})})},j4e=300,Y4e=5e3,W4e=300,K4e=500,$k=2e4,Z4e=50,q4e=33,Q4e=24*60*60*1e3,iT=3*1024*1024,J4e=31536e3,C2={SERVER_VOLATILE:"server-volatile-broadcast",SERVER:"server-broadcast",USER_FOLLOW_CHANGE:"user-follow",USER_FOLLOW_ROOM_CHANGE:"user-follow-room-change"};var Ki=(e=>(e.INVALID_RESPONSE="INVALID_RESPONSE",e.INIT="SCENE_INIT",e.UPDATE="SCENE_UPDATE",e.MOUSE_LOCATION="MOUSE_LOCATION",e.IDLE_STATUS="IDLE_STATUS",e.USER_VISIBLE_SCENE_BOUNDS="USER_VISIBLE_SCENE_BOUNDS",e))(Ki||{});const Lj={shareLinkFiles:"/files/shareLinks",collabFiles:"/files/rooms"},eve=10,un={LOCAL_STORAGE_ELEMENTS:"excalidraw",LOCAL_STORAGE_APP_STATE:"excalidraw-state",LOCAL_STORAGE_COLLAB:"excalidraw-collab",LOCAL_STORAGE_THEME:"excalidraw-theme",LOCAL_STORAGE_DEBUG:"excalidraw-debug",VERSION_DATA_STATE:"version-dataState",VERSION_FILES:"version-files",IDB_LIBRARY:"excalidraw-library",__LEGACY_LOCAL_STORAGE_LIBRARY:"excalidraw-library"},tve={AUTH_STATE_COOKIE:"excplus-auth"},wm=document.cookie.includes(tve.AUTH_STATE_COOKIE),nve=e=>{try{localStorage.setItem(un.LOCAL_STORAGE_COLLAB,JSON.stringify({username:e}))}catch(t){console.error(t)}},Nj=()=>{try{const e=localStorage.getItem(un.LOCAL_STORAGE_COLLAB);if(e)return JSON.parse(e).username}catch(e){console.error(e)}return null},Oj=()=>{let e=null,t=null;try{e=localStorage.getItem(un.LOCAL_STORAGE_ELEMENTS),t=localStorage.getItem(un.LOCAL_STORAGE_APP_STATE)}catch(s){console.error(s)}let n=[];if(e)try{n=cz(JSON.parse(e))}catch(s){console.error(s)}let i=null;if(t)try{i={...Jo(),...XV(JSON.parse(t))}}catch(s){console.error(s)}return{elements:n,appState:i}},Pj=()=>{try{const e=localStorage.getItem(un.LOCAL_STORAGE_ELEMENTS);return(e==null?void 0:e.length)||0}catch(e){return console.error(e),0}},ive=()=>{try{const e=localStorage.getItem(un.LOCAL_STORAGE_APP_STATE),t=localStorage.getItem(un.LOCAL_STORAGE_COLLAB),n=(e==null?void 0:e.length)||0,i=(t==null?void 0:t.length)||0;return n+i+Pj()}catch(e){return console.error(e),0}},sve=500,Gk=Qa(e=>{e({scene:Pj(),total:ive()})},sve),rve=e=>{const[t,n]=L.useState({scene:0,total:0});L.useEffect(()=>{Gk(o=>{n(o)})},[e.elements,e.appState]),L.useEffect(()=>()=>Gk.cancel(),[]);const i=A3();let s,r;return i!==QP?(r=i.slice(0,16).replace("T"," "),s=i.slice(21)):r=k("stats.versionNotAvailable"),P(_a.StatsRows,{order:-1,children:[g(_a.StatsRow,{heading:!0,children:k("stats.version")}),P(_a.StatsRow,{style:{textAlign:"center",cursor:"pointer"},onClick:async()=>{try{await eu(A3()),e.setToast(k("toast.copyToClipboard"))}catch{}},title:k("stats.versionCopy"),children:[r,g("br",{}),s]}),g(_a.StatsRow,{heading:!0,children:k("stats.storage")}),P(_a.StatsRow,{columns:2,children:[g("div",{children:k("stats.scene")}),g("div",{children:fC(t.scene,1)})]}),P(_a.StatsRow,{columns:2,children:[g("div",{children:k("stats.total")}),g("div",{children:fC(t.total,1)})]})]})},Ll=op(),ove=(e,t)=>{const[n,i]=Ph(e);return L.useLayoutEffect(()=>{i(typeof t=="function"?t():t)},[]),[n,i]};class Fj{constructor({getFiles:t,saveFiles:n}){F(this,"fetchingFiles",new Map);F(this,"erroredFiles_fetch",new Map);F(this,"savingFiles",new Map);F(this,"savedFiles",new Map);F(this,"erroredFiles_save",new Map);F(this,"_getFiles");F(this,"_saveFiles");F(this,"isFileTracked",t=>this.savedFiles.has(t)||this.savingFiles.has(t)||this.fetchingFiles.has(t)||this.erroredFiles_fetch.has(t)||this.erroredFiles_save.has(t));F(this,"isFileSavedOrBeingSaved",t=>{const n=this.getFileVersion(t);return this.savedFiles.get(t.id)===n||this.savingFiles.get(t.id)===n});F(this,"getFileVersion",t=>t.version??1);F(this,"saveFiles",async({elements:t,files:n})=>{const i=new Map;for(const s of t){const r=In(s)&&n[s.fileId];r&&!this.isFileSavedOrBeingSaved(r)&&(i.set(s.fileId,n[s.fileId]),this.savingFiles.set(s.fileId,this.getFileVersion(r)))}try{const{savedFiles:s,erroredFiles:r}=await this._saveFiles({addedFiles:i});for(const[o,a]of s)this.savedFiles.set(o,this.getFileVersion(a));for(const[o,a]of r)this.erroredFiles_save.set(o,this.getFileVersion(a));return{savedFiles:s,erroredFiles:r}}finally{for(const[s]of i)this.savingFiles.delete(s)}});F(this,"getFiles",async t=>{if(!t.length)return{loadedFiles:[],erroredFiles:new Map};for(const n of t)this.fetchingFiles.set(n,!0);try{const{loadedFiles:n,erroredFiles:i}=await this._getFiles(t);for(const s of n)this.savedFiles.set(s.id,this.getFileVersion(s));for(const[s]of i)this.erroredFiles_fetch.set(s,!0);return{loadedFiles:n,erroredFiles:i}}finally{for(const n of t)this.fetchingFiles.delete(n)}});F(this,"shouldPreventUnload",t=>t.some(n=>In(n)&&!n.isDeleted&&this.savingFiles.has(n.fileId)));F(this,"shouldUpdateImageElementStatus",t=>In(t)&&this.savedFiles.has(t.fileId)&&t.status==="pending");this._getFiles=t,this._saveFiles=n}reset(){this.fetchingFiles.clear(),this.savingFiles.clear(),this.savedFiles.clear(),this.erroredFiles_fetch.clear(),this.erroredFiles_save.clear()}}const sT=async({files:e,maxBytes:t,encryptionKey:n})=>{const i=[];for(const[s,r]of e){const o=new TextEncoder().encode(r.dataURL),a=await V$(o,{encryptionKey:n,metadata:{id:s,mimeType:r.mimeType,created:Date.now(),lastRetrieved:Date.now()}});if(o.byteLength>t)throw new Error(k("errors.fileTooBig",{maxSize:`${Math.trunc(t/1024/1024)}MB`}));i.push({id:s,buffer:a})}return i},N1=e=>{e.erroredFiles.size&&e.excalidrawAPI.updateScene({elements:e.excalidrawAPI.getSceneElementsIncludingDeleted().map(t=>In(t)&&e.erroredFiles.has(t.fileId)?Ie(t,{status:"error"}):t),captureUpdate:K.NEVER})};var Xk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},ave=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=e[n++],o=e[n++],a=e[n++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{const r=e[n++],o=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return t.join("")},zj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const r=e[s],o=s+1<e.length,a=o?e[s+1]:0,l=s+2<e.length,c=l?e[s+2]:0,u=r>>2,d=(r&3)<<4|a>>4;let f=(a&15)<<2|c>>6,h=c&63;l||(h=64,o||(f=64)),i.push(n[u],n[d],n[f],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Bj(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):ave(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const r=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const c=s<e.length?n[e.charAt(s)]:64;++s;const d=s<e.length?n[e.charAt(s)]:64;if(++s,r==null||a==null||c==null||d==null)throw new lve;const f=r<<2|a>>4;if(i.push(f),c!==64){const h=a<<4&240|c>>2;if(i.push(h),d!==64){const m=c<<6&192|d;i.push(m)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class lve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cve=function(e){const t=Bj(e);return zj.encodeByteArray(t,!0)},E6=function(e){return cve(e).replace(/\./g,"")},uve=function(e){try{return zj.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dve(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fve=()=>dve().__FIREBASE_DEFAULTS__,hve=()=>{if(typeof process>"u"||typeof Xk>"u")return;const e=Xk.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},gve=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&uve(e[1]);return t&&JSON.parse(t)},rT=()=>{try{return fve()||hve()||gve()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},mve=e=>{var t,n;return(n=(t=rT())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Hj=e=>{const t=mve(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},Vj=()=>{var e;return(e=rT())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[E6(JSON.stringify(n)),E6(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bve(){var e;const t=(e=rT())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yve(){return!bve()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Eve(){try{return typeof indexedDB=="object"}catch{return!1}}function vve(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;t(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wve="FirebaseError";class Hd extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=wve,Object.setPrototypeOf(this,Hd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gj.prototype.create)}}class Gj{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,r=this.errors[t],o=r?_ve(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Hd(s,a,i)}}function _ve(e,t){return e.replace(Tve,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const Tve=/\{\$([^}]+)}/g;function K4(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const r=e[s],o=t[s];if(jk(r)&&jk(o)){if(!K4(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function jk(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(e){return e&&e._delegate?e._delegate:e}class Yh{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sve{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new pve;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(xve(t))try{this.getOrInitializeService({instanceIdentifier:Uu})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=Uu){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Uu){return this.instances.has(t)}getOptions(t=Uu){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(t,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(t),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&t(o,s),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Ive(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Uu){return this.component?this.component.multipleInstances?t:Uu:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ive(e){return e===Uu?void 0:e}function xve(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cve{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Sve(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ut||(ut={}));const Ave={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},Mve=ut.INFO,Rve={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},kve=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=Rve[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Xj{constructor(t){this.name=t,this._logLevel=Mve,this._logHandler=kve,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ut))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Ave[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...t),this._logHandler(this,ut.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...t),this._logHandler(this,ut.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...t),this._logHandler(this,ut.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...t),this._logHandler(this,ut.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...t),this._logHandler(this,ut.ERROR,...t)}}const Dve=(e,t)=>t.some(n=>e instanceof n);let Yk,Wk;function Lve(){return Yk||(Yk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nve(){return Wk||(Wk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jj=new WeakMap,Z4=new WeakMap,Yj=new WeakMap,e7=new WeakMap,oT=new WeakMap;function Ove(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(bc(e.result)),s()},o=()=>{i(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&jj.set(n,e)}).catch(()=>{}),oT.set(t,e),t}function Pve(e){if(Z4.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});Z4.set(e,t)}let q4={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Z4.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Yj.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bc(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Fve(e){q4=e(q4)}function Bve(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(t7(this),t,...n);return Yj.set(i,t.sort?t.sort():[t]),bc(i)}:Nve().includes(e)?function(...t){return e.apply(t7(this),t),bc(jj.get(this))}:function(...t){return bc(e.apply(t7(this),t))}}function zve(e){return typeof e=="function"?Bve(e):(e instanceof IDBTransaction&&Pve(e),Dve(e,Lve())?new Proxy(e,q4):e)}function bc(e){if(e instanceof IDBRequest)return Ove(e);if(e7.has(e))return e7.get(e);const t=zve(e);return t!==e&&(e7.set(e,t),oT.set(t,e)),t}const t7=e=>oT.get(e);function Hve(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(e,t),a=bc(o);return i&&o.addEventListener("upgradeneeded",l=>{i(bc(o.result),l.oldVersion,l.newVersion,bc(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Vve=["get","getKey","getAll","getAllKeys","count"],$ve=["put","add","delete","clear"],n7=new Map;function Kk(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(n7.get(t))return n7.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=$ve.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||Vve.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return n7.set(t,r),r}Fve(e=>({...e,get:(t,n,i)=>Kk(t,n)||e.get(t,n,i),has:(t,n)=>!!Kk(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gve{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Xve(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Xve(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Q4="@firebase/app",Zk="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=new Xj("@firebase/app"),jve="@firebase/app-compat",Yve="@firebase/analytics-compat",Wve="@firebase/analytics",Kve="@firebase/app-check-compat",Zve="@firebase/app-check",qve="@firebase/auth",Qve="@firebase/auth-compat",Jve="@firebase/database",e9e="@firebase/data-connect",t9e="@firebase/database-compat",n9e="@firebase/functions",i9e="@firebase/functions-compat",s9e="@firebase/installations",r9e="@firebase/installations-compat",o9e="@firebase/messaging",a9e="@firebase/messaging-compat",l9e="@firebase/performance",c9e="@firebase/performance-compat",u9e="@firebase/remote-config",d9e="@firebase/remote-config-compat",f9e="@firebase/storage",h9e="@firebase/storage-compat",g9e="@firebase/firestore",m9e="@firebase/vertexai",p9e="@firebase/firestore-compat",U9e="firebase",b9e="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4="[DEFAULT]",y9e={[Q4]:"fire-core",[jve]:"fire-core-compat",[Wve]:"fire-analytics",[Yve]:"fire-analytics-compat",[Zve]:"fire-app-check",[Kve]:"fire-app-check-compat",[qve]:"fire-auth",[Qve]:"fire-auth-compat",[Jve]:"fire-rtdb",[e9e]:"fire-data-connect",[t9e]:"fire-rtdb-compat",[n9e]:"fire-fn",[i9e]:"fire-fn-compat",[s9e]:"fire-iid",[r9e]:"fire-iid-compat",[o9e]:"fire-fcm",[a9e]:"fire-fcm-compat",[l9e]:"fire-perf",[c9e]:"fire-perf-compat",[u9e]:"fire-rc",[d9e]:"fire-rc-compat",[f9e]:"fire-gcs",[h9e]:"fire-gcs-compat",[g9e]:"fire-fst",[p9e]:"fire-fst-compat",[m9e]:"fire-vertex","fire-js":"fire-js",[U9e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6=new Map,E9e=new Map,ev=new Map;function qk(e,t){try{e.container.addComponent(t)}catch(n){ul.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function _m(e){const t=e.name;if(ev.has(t))return ul.debug(`There were multiple attempts to register component ${t}.`),!1;ev.set(t,e);for(const n of v6.values())qk(n,e);for(const n of E9e.values())qk(n,e);return!0}function Wj(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Kj(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yc=new Gj("app","Firebase",v9e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9e{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Yh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw yc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=b9e;function qj(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:J4,automaticDataCollectionEnabled:!1},t),s=i.name;if(typeof s!="string"||!s)throw yc.create("bad-app-name",{appName:String(s)});if(n||(n=Vj()),!n)throw yc.create("no-options");const r=v6.get(s);if(r){if(K4(n,r.options)&&K4(i,r.config))return r;throw yc.create("duplicate-app",{appName:s})}const o=new Cve(s);for(const l of ev.values())o.addComponent(l);const a=new w9e(n,i,o);return v6.set(s,a),a}function Qj(e=J4){const t=v6.get(e);if(!t&&e===J4&&Vj())return qj();if(!t)throw yc.create("no-app",{appName:e});return t}function Ec(e,t,n){var i;let s=(i=y9e[e])!==null&&i!==void 0?i:e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const a=[`Unable to register library "${s}" with version "${t}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ul.warn(a.join(" "));return}_m(new Yh(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9e="firebase-heartbeat-database",T9e=1,Tm="firebase-heartbeat-store";let i7=null;function Jj(){return i7||(i7=Hve(_9e,T9e,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Tm)}catch(n){console.warn(n)}}}}).catch(e=>{throw yc.create("idb-open",{originalErrorMessage:e.message})})),i7}async function S9e(e){try{const n=(await Jj()).transaction(Tm),i=await n.objectStore(Tm).get(eY(e));return await n.done,i}catch(t){if(t instanceof Hd)ul.warn(t.message);else{const n=yc.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ul.warn(n.message)}}}async function Qk(e,t){try{const i=(await Jj()).transaction(Tm,"readwrite");await i.objectStore(Tm).put(t,eY(e)),await i.done}catch(n){if(n instanceof Hd)ul.warn(n.message);else{const i=yc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ul.warn(i.message)}}}function eY(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9e=1024,x9e=30;class C9e{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M9e(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Jk();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>x9e){const o=R9e(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ul.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Jk(),{heartbeatsToSend:i,unsentEntries:s}=A9e(this._heartbeatsCache.heartbeats),r=E6(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return ul.warn(n),""}}}function Jk(){return new Date().toISOString().substring(0,10)}function A9e(e,t=I9e){const n=[];let i=e.slice();for(const s of e){const r=n.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),eD(n)>t){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),eD(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class M9e{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Eve()?vve().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await S9e(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Qk(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Qk(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function eD(e){return E6(JSON.stringify({version:2,heartbeats:e})).length}function R9e(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9e(e){_m(new Yh("platform-logger",t=>new Gve(t),"PRIVATE")),_m(new Yh("heartbeat",t=>new C9e(t),"PRIVATE")),Ec(Q4,Zk,e),Ec(Q4,Zk,"esm2017"),Ec("fire-js","")}k9e("");var D9e="firebase",L9e="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ec(D9e,L9e,"app");var tD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vc,tY;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,_){function x(){}x.prototype=_.prototype,T.D=_.prototype,T.prototype=new x,T.prototype.constructor=T,T.C=function(C,R,N){for(var D=Array(arguments.length-2),$=2;$<arguments.length;$++)D[$-2]=arguments[$];return _.prototype[R].apply(C,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,_,x){x||(x=0);var C=Array(16);if(typeof _=="string")for(var R=0;16>R;++R)C[R]=_.charCodeAt(x++)|_.charCodeAt(x++)<<8|_.charCodeAt(x++)<<16|_.charCodeAt(x++)<<24;else for(R=0;16>R;++R)C[R]=_[x++]|_[x++]<<8|_[x++]<<16|_[x++]<<24;_=T.g[0],x=T.g[1],R=T.g[2];var N=T.g[3],D=_+(N^x&(R^N))+C[0]+3614090360&4294967295;_=x+(D<<7&4294967295|D>>>25),D=N+(R^_&(x^R))+C[1]+3905402710&4294967295,N=_+(D<<12&4294967295|D>>>20),D=R+(x^N&(_^x))+C[2]+606105819&4294967295,R=N+(D<<17&4294967295|D>>>15),D=x+(_^R&(N^_))+C[3]+3250441966&4294967295,x=R+(D<<22&4294967295|D>>>10),D=_+(N^x&(R^N))+C[4]+4118548399&4294967295,_=x+(D<<7&4294967295|D>>>25),D=N+(R^_&(x^R))+C[5]+1200080426&4294967295,N=_+(D<<12&4294967295|D>>>20),D=R+(x^N&(_^x))+C[6]+2821735955&4294967295,R=N+(D<<17&4294967295|D>>>15),D=x+(_^R&(N^_))+C[7]+4249261313&4294967295,x=R+(D<<22&4294967295|D>>>10),D=_+(N^x&(R^N))+C[8]+1770035416&4294967295,_=x+(D<<7&4294967295|D>>>25),D=N+(R^_&(x^R))+C[9]+2336552879&4294967295,N=_+(D<<12&4294967295|D>>>20),D=R+(x^N&(_^x))+C[10]+4294925233&4294967295,R=N+(D<<17&4294967295|D>>>15),D=x+(_^R&(N^_))+C[11]+2304563134&4294967295,x=R+(D<<22&4294967295|D>>>10),D=_+(N^x&(R^N))+C[12]+1804603682&4294967295,_=x+(D<<7&4294967295|D>>>25),D=N+(R^_&(x^R))+C[13]+4254626195&4294967295,N=_+(D<<12&4294967295|D>>>20),D=R+(x^N&(_^x))+C[14]+2792965006&4294967295,R=N+(D<<17&4294967295|D>>>15),D=x+(_^R&(N^_))+C[15]+1236535329&4294967295,x=R+(D<<22&4294967295|D>>>10),D=_+(R^N&(x^R))+C[1]+4129170786&4294967295,_=x+(D<<5&4294967295|D>>>27),D=N+(x^R&(_^x))+C[6]+3225465664&4294967295,N=_+(D<<9&4294967295|D>>>23),D=R+(_^x&(N^_))+C[11]+643717713&4294967295,R=N+(D<<14&4294967295|D>>>18),D=x+(N^_&(R^N))+C[0]+3921069994&4294967295,x=R+(D<<20&4294967295|D>>>12),D=_+(R^N&(x^R))+C[5]+3593408605&4294967295,_=x+(D<<5&4294967295|D>>>27),D=N+(x^R&(_^x))+C[10]+38016083&4294967295,N=_+(D<<9&4294967295|D>>>23),D=R+(_^x&(N^_))+C[15]+3634488961&4294967295,R=N+(D<<14&4294967295|D>>>18),D=x+(N^_&(R^N))+C[4]+3889429448&4294967295,x=R+(D<<20&4294967295|D>>>12),D=_+(R^N&(x^R))+C[9]+568446438&4294967295,_=x+(D<<5&4294967295|D>>>27),D=N+(x^R&(_^x))+C[14]+3275163606&4294967295,N=_+(D<<9&4294967295|D>>>23),D=R+(_^x&(N^_))+C[3]+4107603335&4294967295,R=N+(D<<14&4294967295|D>>>18),D=x+(N^_&(R^N))+C[8]+1163531501&4294967295,x=R+(D<<20&4294967295|D>>>12),D=_+(R^N&(x^R))+C[13]+2850285829&4294967295,_=x+(D<<5&4294967295|D>>>27),D=N+(x^R&(_^x))+C[2]+4243563512&4294967295,N=_+(D<<9&4294967295|D>>>23),D=R+(_^x&(N^_))+C[7]+1735328473&4294967295,R=N+(D<<14&4294967295|D>>>18),D=x+(N^_&(R^N))+C[12]+2368359562&4294967295,x=R+(D<<20&4294967295|D>>>12),D=_+(x^R^N)+C[5]+4294588738&4294967295,_=x+(D<<4&4294967295|D>>>28),D=N+(_^x^R)+C[8]+2272392833&4294967295,N=_+(D<<11&4294967295|D>>>21),D=R+(N^_^x)+C[11]+1839030562&4294967295,R=N+(D<<16&4294967295|D>>>16),D=x+(R^N^_)+C[14]+4259657740&4294967295,x=R+(D<<23&4294967295|D>>>9),D=_+(x^R^N)+C[1]+2763975236&4294967295,_=x+(D<<4&4294967295|D>>>28),D=N+(_^x^R)+C[4]+1272893353&4294967295,N=_+(D<<11&4294967295|D>>>21),D=R+(N^_^x)+C[7]+4139469664&4294967295,R=N+(D<<16&4294967295|D>>>16),D=x+(R^N^_)+C[10]+3200236656&4294967295,x=R+(D<<23&4294967295|D>>>9),D=_+(x^R^N)+C[13]+681279174&4294967295,_=x+(D<<4&4294967295|D>>>28),D=N+(_^x^R)+C[0]+3936430074&4294967295,N=_+(D<<11&4294967295|D>>>21),D=R+(N^_^x)+C[3]+3572445317&4294967295,R=N+(D<<16&4294967295|D>>>16),D=x+(R^N^_)+C[6]+76029189&4294967295,x=R+(D<<23&4294967295|D>>>9),D=_+(x^R^N)+C[9]+3654602809&4294967295,_=x+(D<<4&4294967295|D>>>28),D=N+(_^x^R)+C[12]+3873151461&4294967295,N=_+(D<<11&4294967295|D>>>21),D=R+(N^_^x)+C[15]+530742520&4294967295,R=N+(D<<16&4294967295|D>>>16),D=x+(R^N^_)+C[2]+3299628645&4294967295,x=R+(D<<23&4294967295|D>>>9),D=_+(R^(x|~N))+C[0]+4096336452&4294967295,_=x+(D<<6&4294967295|D>>>26),D=N+(x^(_|~R))+C[7]+1126891415&4294967295,N=_+(D<<10&4294967295|D>>>22),D=R+(_^(N|~x))+C[14]+2878612391&4294967295,R=N+(D<<15&4294967295|D>>>17),D=x+(N^(R|~_))+C[5]+4237533241&4294967295,x=R+(D<<21&4294967295|D>>>11),D=_+(R^(x|~N))+C[12]+1700485571&4294967295,_=x+(D<<6&4294967295|D>>>26),D=N+(x^(_|~R))+C[3]+2399980690&4294967295,N=_+(D<<10&4294967295|D>>>22),D=R+(_^(N|~x))+C[10]+4293915773&4294967295,R=N+(D<<15&4294967295|D>>>17),D=x+(N^(R|~_))+C[1]+2240044497&4294967295,x=R+(D<<21&4294967295|D>>>11),D=_+(R^(x|~N))+C[8]+1873313359&4294967295,_=x+(D<<6&4294967295|D>>>26),D=N+(x^(_|~R))+C[15]+4264355552&4294967295,N=_+(D<<10&4294967295|D>>>22),D=R+(_^(N|~x))+C[6]+2734768916&4294967295,R=N+(D<<15&4294967295|D>>>17),D=x+(N^(R|~_))+C[13]+1309151649&4294967295,x=R+(D<<21&4294967295|D>>>11),D=_+(R^(x|~N))+C[4]+4149444226&4294967295,_=x+(D<<6&4294967295|D>>>26),D=N+(x^(_|~R))+C[11]+3174756917&4294967295,N=_+(D<<10&4294967295|D>>>22),D=R+(_^(N|~x))+C[2]+718787259&4294967295,R=N+(D<<15&4294967295|D>>>17),D=x+(N^(R|~_))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(R+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+N&4294967295}i.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var x=_-this.blockSize,C=this.B,R=this.h,N=0;N<_;){if(R==0)for(;N<=x;)s(this,T,N),N+=this.blockSize;if(typeof T=="string"){for(;N<_;)if(C[R++]=T.charCodeAt(N++),R==this.blockSize){s(this,C),R=0;break}}else for(;N<_;)if(C[R++]=T[N++],R==this.blockSize){s(this,C),R=0;break}}this.h=R,this.o+=_},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var x=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=x&255,x/=256;for(this.u(T),T=Array(16),_=x=0;4>_;++_)for(var C=0;32>C;C+=8)T[x++]=this.g[_]>>>C&255;return T};function r(T,_){var x=a;return Object.prototype.hasOwnProperty.call(x,T)?x[T]:x[T]=_(T)}function o(T,_){this.h=_;for(var x=[],C=!0,R=T.length-1;0<=R;R--){var N=T[R]|0;C&&N==_||(x[R]=N,C=!1)}this.g=x}var a={};function l(T){return-128<=T&&128>T?r(T,function(_){return new o([_|0],0>_?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return d;if(0>T)return U(c(-T));for(var _=[],x=1,C=0;T>=x;C++)_[C]=T/x|0,x*=4294967296;return new o(_,0)}function u(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return U(u(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=c(Math.pow(_,8)),C=d,R=0;R<T.length;R+=8){var N=Math.min(8,T.length-R),D=parseInt(T.substring(R,R+N),_);8>N?(N=c(Math.pow(_,N)),C=C.j(N).add(c(D))):(C=C.j(x),C=C.add(c(D)))}return C}var d=l(0),f=l(1),h=l(16777216);e=o.prototype,e.m=function(){if(p(this))return-U(this).m();for(var T=0,_=1,x=0;x<this.g.length;x++){var C=this.i(x);T+=(0<=C?C:4294967296+C)*_,_*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(m(this))return"0";if(p(this))return"-"+U(this).toString(T);for(var _=c(Math.pow(T,6)),x=this,C="";;){var R=w(x,_).g;x=y(x,R.j(_));var N=((0<x.g.length?x.g[0]:x.h)>>>0).toString(T);if(x=R,m(x))return N+C;for(;6>N.length;)N="0"+N;C=N+C}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function m(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function p(T){return T.h==-1}e.l=function(T){return T=y(this,T),p(T)?-1:m(T)?0:1};function U(T){for(var _=T.g.length,x=[],C=0;C<_;C++)x[C]=~T.g[C];return new o(x,~T.h).add(f)}e.abs=function(){return p(this)?U(this):this},e.add=function(T){for(var _=Math.max(this.g.length,T.g.length),x=[],C=0,R=0;R<=_;R++){var N=C+(this.i(R)&65535)+(T.i(R)&65535),D=(N>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);C=D>>>16,N&=65535,D&=65535,x[R]=D<<16|N}return new o(x,x[x.length-1]&-2147483648?-1:0)};function y(T,_){return T.add(U(_))}e.j=function(T){if(m(this)||m(T))return d;if(p(this))return p(T)?U(this).j(U(T)):U(U(this).j(T));if(p(T))return U(this.j(U(T)));if(0>this.l(h)&&0>T.l(h))return c(this.m()*T.m());for(var _=this.g.length+T.g.length,x=[],C=0;C<2*_;C++)x[C]=0;for(C=0;C<this.g.length;C++)for(var R=0;R<T.g.length;R++){var N=this.i(C)>>>16,D=this.i(C)&65535,$=T.i(R)>>>16,G=T.i(R)&65535;x[2*C+2*R]+=D*G,E(x,2*C+2*R),x[2*C+2*R+1]+=N*G,E(x,2*C+2*R+1),x[2*C+2*R+1]+=D*$,E(x,2*C+2*R+1),x[2*C+2*R+2]+=N*$,E(x,2*C+2*R+2)}for(C=0;C<_;C++)x[C]=x[2*C+1]<<16|x[2*C];for(C=_;C<2*_;C++)x[C]=0;return new o(x,0)};function E(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function v(T,_){this.g=T,this.h=_}function w(T,_){if(m(_))throw Error("division by zero");if(m(T))return new v(d,d);if(p(T))return _=w(U(T),_),new v(U(_.g),U(_.h));if(p(_))return _=w(T,U(_)),new v(U(_.g),_.h);if(30<T.g.length){if(p(T)||p(_))throw Error("slowDivide_ only works with positive integers.");for(var x=f,C=_;0>=C.l(T);)x=I(x),C=I(C);var R=M(x,1),N=M(C,1);for(C=M(C,2),x=M(x,2);!m(C);){var D=N.add(C);0>=D.l(T)&&(R=R.add(x),N=D),C=M(C,1),x=M(x,1)}return _=y(T,R.j(_)),new v(R,_)}for(R=d;0<=T.l(_);){for(x=Math.max(1,Math.floor(T.m()/_.m())),C=Math.ceil(Math.log(x)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),N=c(x),D=N.j(_);p(D)||0<D.l(T);)x-=C,N=c(x),D=N.j(_);m(N)&&(N=f),R=R.add(N),T=y(T,D)}return new v(R,T)}e.A=function(T){return w(this,T).h},e.and=function(T){for(var _=Math.max(this.g.length,T.g.length),x=[],C=0;C<_;C++)x[C]=this.i(C)&T.i(C);return new o(x,this.h&T.h)},e.or=function(T){for(var _=Math.max(this.g.length,T.g.length),x=[],C=0;C<_;C++)x[C]=this.i(C)|T.i(C);return new o(x,this.h|T.h)},e.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),x=[],C=0;C<_;C++)x[C]=this.i(C)^T.i(C);return new o(x,this.h^T.h)};function I(T){for(var _=T.g.length+1,x=[],C=0;C<_;C++)x[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(x,T.h)}function M(T,_){var x=_>>5;_%=32;for(var C=T.g.length-x,R=[],N=0;N<C;N++)R[N]=0<_?T.i(N+x)>>>_|T.i(N+x+1)<<32-_:T.i(N+x);return new o(R,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,tY=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,vc=o}).apply(typeof tD<"u"?tD:typeof self<"u"?self:typeof window<"u"?window:{});var LU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nY,O1,iY,A2,tv,sY,rY,oY;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(b,A,O){return b==Array.prototype||b==Object.prototype||(b[A]=O.value),b};function n(b){b=[typeof globalThis=="object"&&globalThis,b,typeof window=="object"&&window,typeof self=="object"&&self,typeof LU=="object"&&LU];for(var A=0;A<b.length;++A){var O=b[A];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var i=n(this);function s(b,A){if(A)e:{var O=i;b=b.split(".");for(var B=0;B<b.length-1;B++){var W=b[B];if(!(W in O))break e;O=O[W]}b=b[b.length-1],B=O[b],A=A(B),A!=B&&A!=null&&t(O,b,{configurable:!0,writable:!0,value:A})}}function r(b,A){b instanceof String&&(b+="");var O=0,B=!1,W={next:function(){if(!B&&O<b.length){var J=O++;return{value:A(J,b[J]),done:!1}}return B=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}s("Array.prototype.values",function(b){return b||function(){return r(this,function(A,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(b){var A=typeof b;return A=A!="object"?A:b?Array.isArray(b)?"array":A:"null",A=="array"||A=="object"&&typeof b.length=="number"}function c(b){var A=typeof b;return A=="object"&&b!=null||A=="function"}function u(b,A,O){return b.call.apply(b.bind,arguments)}function d(b,A,O){if(!b)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,B),b.apply(A,W)}}return function(){return b.apply(A,arguments)}}function f(b,A,O){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function h(b,A){var O=Array.prototype.slice.call(arguments,1);return function(){var B=O.slice();return B.push.apply(B,arguments),b.apply(this,B)}}function m(b,A){function O(){}O.prototype=A.prototype,b.aa=A.prototype,b.prototype=new O,b.prototype.constructor=b,b.Qb=function(B,W,J){for(var de=Array(arguments.length-2),Ht=2;Ht<arguments.length;Ht++)de[Ht-2]=arguments[Ht];return A.prototype[W].apply(B,de)}}function p(b){const A=b.length;if(0<A){const O=Array(A);for(let B=0;B<A;B++)O[B]=b[B];return O}return[]}function U(b,A){for(let O=1;O<arguments.length;O++){const B=arguments[O];if(l(B)){const W=b.length||0,J=B.length||0;b.length=W+J;for(let de=0;de<J;de++)b[W+de]=B[de]}else b.push(B)}}class y{constructor(A,O){this.i=A,this.j=O,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function E(b){return/^[\s\xa0]*$/.test(b)}function v(){var b=a.navigator;return b&&(b=b.userAgent)?b:""}function w(b){return w[" "](b),b}w[" "]=function(){};var I=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function M(b,A,O){for(const B in b)A.call(O,b[B],B,b)}function T(b,A){for(const O in b)A.call(void 0,b[O],O,b)}function _(b){const A={};for(const O in b)A[O]=b[O];return A}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(b,A){let O,B;for(let W=1;W<arguments.length;W++){B=arguments[W];for(O in B)b[O]=B[O];for(let J=0;J<x.length;J++)O=x[J],Object.prototype.hasOwnProperty.call(B,O)&&(b[O]=B[O])}}function R(b){var A=1;b=b.split(":");const O=[];for(;0<A&&b.length;)O.push(b.shift()),A--;return b.length&&O.push(b.join(":")),O}function N(b){a.setTimeout(()=>{throw b},0)}function D(){var b=j;let A=null;return b.g&&(A=b.g,b.g=b.g.next,b.g||(b.h=null),A.next=null),A}class ${constructor(){this.h=this.g=null}add(A,O){const B=G.get();B.set(A,O),this.h?this.h.next=B:this.g=B,this.h=B}}var G=new y(()=>new H,b=>b.reset());class H{constructor(){this.next=this.g=this.h=null}set(A,O){this.h=A,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let V,X=!1,j=new $,q=()=>{const b=a.Promise.resolve(void 0);V=()=>{b.then(fe)}};var fe=()=>{for(var b;b=D();){try{b.h.call(b.g)}catch(O){N(O)}var A=G;A.j(b),100>A.h&&(A.h++,b.next=A.g,A.g=b)}X=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ue(b,A){this.type=b,this.g=this.target=A,this.defaultPrevented=!1}Ue.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var b=!1,A=Object.defineProperty({},"passive",{get:function(){b=!0}});try{const O=()=>{};a.addEventListener("test",O,A),a.removeEventListener("test",O,A)}catch{}return b}();function $e(b,A){if(Ue.call(this,b?b.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,b){var O=this.type=b.type,B=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:null;if(this.target=b.target||b.srcElement,this.g=A,A=b.relatedTarget){if(I){e:{try{w(A.nodeName);var W=!0;break e}catch{}W=!1}W||(A=null)}}else O=="mouseover"?A=b.fromElement:O=="mouseout"&&(A=b.toElement);this.relatedTarget=A,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0),this.button=b.button,this.key=b.key||"",this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.shiftKey=b.shiftKey,this.metaKey=b.metaKey,this.pointerId=b.pointerId||0,this.pointerType=typeof b.pointerType=="string"?b.pointerType:nt[b.pointerType]||"",this.state=b.state,this.i=b,b.defaultPrevented&&$e.aa.h.call(this)}}m($e,Ue);var nt={2:"touch",3:"pen",4:"mouse"};$e.prototype.h=function(){$e.aa.h.call(this);var b=this.i;b.preventDefault?b.preventDefault():b.returnValue=!1};var zt="closure_listenable_"+(1e6*Math.random()|0),Mt=0;function qt(b,A,O,B,W){this.listener=b,this.proxy=null,this.src=A,this.type=O,this.capture=!!B,this.ha=W,this.key=++Mt,this.da=this.fa=!1}function Ce(b){b.da=!0,b.listener=null,b.proxy=null,b.src=null,b.ha=null}function Ge(b){this.src=b,this.g={},this.h=0}Ge.prototype.add=function(b,A,O,B,W){var J=b.toString();b=this.g[J],b||(b=this.g[J]=[],this.h++);var de=as(b,A,B,W);return-1<de?(A=b[de],O||(A.fa=!1)):(A=new qt(A,this.src,J,!!B,W),A.fa=O,b.push(A)),A};function Qt(b,A){var O=A.type;if(O in b.g){var B=b.g[O],W=Array.prototype.indexOf.call(B,A,void 0),J;(J=0<=W)&&Array.prototype.splice.call(B,W,1),J&&(Ce(A),b.g[O].length==0&&(delete b.g[O],b.h--))}}function as(b,A,O,B){for(var W=0;W<b.length;++W){var J=b[W];if(!J.da&&J.listener==A&&J.capture==!!O&&J.ha==B)return W}return-1}var Ar="closure_lm_"+(1e6*Math.random()|0),Mr={};function Is(b,A,O,B,W){if(Array.isArray(A)){for(var J=0;J<A.length;J++)Is(b,A[J],O,B,W);return null}return O=WT(O),b&&b[zt]?b.K(A,O,c(B)?!!B.capture:!1,W):Cy(b,A,O,!1,B,W)}function Cy(b,A,O,B,W,J){if(!A)throw Error("Invalid event type");var de=c(W)?!!W.capture:!!W,Ht=Ry(b);if(Ht||(b[Ar]=Ht=new Ge(b)),O=Ht.add(A,O,B,de,J),O.proxy)return O;if(B=Ay(),O.proxy=B,B.src=b,B.listener=O,b.addEventListener)Ve||(W=de),W===void 0&&(W=!1),b.addEventListener(A.toString(),B,W);else if(b.attachEvent)b.attachEvent(YT(A.toString()),B);else if(b.addListener&&b.removeListener)b.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return O}function Ay(){function b(O){return A.call(b.src,b.listener,O)}const A=QW;return b}function tu(b,A,O,B,W){if(Array.isArray(A))for(var J=0;J<A.length;J++)tu(b,A[J],O,B,W);else B=c(B)?!!B.capture:!!B,O=WT(O),b&&b[zt]?(b=b.i,A=String(A).toString(),A in b.g&&(J=b.g[A],O=as(J,O,B,W),-1<O&&(Ce(J[O]),Array.prototype.splice.call(J,O,1),J.length==0&&(delete b.g[A],b.h--)))):b&&(b=Ry(b))&&(A=b.g[A.toString()],b=-1,A&&(b=as(A,O,B,W)),(O=-1<b?A[b]:null)&&My(O))}function My(b){if(typeof b!="number"&&b&&!b.da){var A=b.src;if(A&&A[zt])Qt(A.i,b);else{var O=b.type,B=b.proxy;A.removeEventListener?A.removeEventListener(O,B,b.capture):A.detachEvent?A.detachEvent(YT(O),B):A.addListener&&A.removeListener&&A.removeListener(B),(O=Ry(A))?(Qt(O,b),O.h==0&&(O.src=null,A[Ar]=null)):Ce(b)}}}function YT(b){return b in Mr?Mr[b]:Mr[b]="on"+b}function QW(b,A){if(b.da)b=!0;else{A=new $e(A,this);var O=b.listener,B=b.ha||b.src;b.fa&&My(b),b=O.call(B,A)}return b}function Ry(b){return b=b[Ar],b instanceof Ge?b:null}var ky="__closure_events_fn_"+(1e9*Math.random()>>>0);function WT(b){return typeof b=="function"?b:(b[ky]||(b[ky]=function(A){return b.handleEvent(A)}),b[ky])}function Ci(){ie.call(this),this.i=new Ge(this),this.M=this,this.F=null}m(Ci,ie),Ci.prototype[zt]=!0,Ci.prototype.removeEventListener=function(b,A,O,B){tu(this,b,A,O,B)};function Xi(b,A){var O,B=b.F;if(B)for(O=[];B;B=B.F)O.push(B);if(b=b.M,B=A.type||A,typeof A=="string")A=new Ue(A,b);else if(A instanceof Ue)A.target=A.target||b;else{var W=A;A=new Ue(B,b),C(A,W)}if(W=!0,O)for(var J=O.length-1;0<=J;J--){var de=A.g=O[J];W=wp(de,B,!0,A)&&W}if(de=A.g=b,W=wp(de,B,!0,A)&&W,W=wp(de,B,!1,A)&&W,O)for(J=0;J<O.length;J++)de=A.g=O[J],W=wp(de,B,!1,A)&&W}Ci.prototype.N=function(){if(Ci.aa.N.call(this),this.i){var b=this.i,A;for(A in b.g){for(var O=b.g[A],B=0;B<O.length;B++)Ce(O[B]);delete b.g[A],b.h--}}this.F=null},Ci.prototype.K=function(b,A,O,B){return this.i.add(String(b),A,!1,O,B)},Ci.prototype.L=function(b,A,O,B){return this.i.add(String(b),A,!0,O,B)};function wp(b,A,O,B){if(A=b.i.g[String(A)],!A)return!0;A=A.concat();for(var W=!0,J=0;J<A.length;++J){var de=A[J];if(de&&!de.da&&de.capture==O){var Ht=de.listener,bi=de.ha||de.src;de.fa&&Qt(b.i,de),W=Ht.call(bi,B)!==!1&&W}}return W&&!B.defaultPrevented}function KT(b,A,O){if(typeof b=="function")O&&(b=f(b,O));else if(b&&typeof b.handleEvent=="function")b=f(b.handleEvent,b);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:a.setTimeout(b,A||0)}function ZT(b){b.g=KT(()=>{b.g=null,b.i&&(b.i=!1,ZT(b))},b.l);const A=b.h;b.h=null,b.m.apply(null,A)}class JW extends ie{constructor(A,O){super(),this.m=A,this.l=O,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:ZT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sg(b){ie.call(this),this.h=b,this.g={}}m(Sg,ie);var qT=[];function QT(b){M(b.g,function(A,O){this.g.hasOwnProperty(O)&&My(A)},b),b.g={}}Sg.prototype.N=function(){Sg.aa.N.call(this),QT(this)},Sg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dy=a.JSON.stringify,eK=a.JSON.parse,tK=class{stringify(b){return a.JSON.stringify(b,void 0)}parse(b){return a.JSON.parse(b,void 0)}};function Ly(){}Ly.prototype.h=null;function JT(b){return b.h||(b.h=b.i())}function eS(){}var Ig={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ny(){Ue.call(this,"d")}m(Ny,Ue);function Oy(){Ue.call(this,"c")}m(Oy,Ue);var nu={},tS=null;function _p(){return tS=tS||new Ci}nu.La="serverreachability";function nS(b){Ue.call(this,nu.La,b)}m(nS,Ue);function xg(b){const A=_p();Xi(A,new nS(A))}nu.STAT_EVENT="statevent";function iS(b,A){Ue.call(this,nu.STAT_EVENT,b),this.stat=A}m(iS,Ue);function ji(b){const A=_p();Xi(A,new iS(A,b))}nu.Ma="timingevent";function sS(b,A){Ue.call(this,nu.Ma,b),this.size=A}m(sS,Ue);function Cg(b,A){if(typeof b!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){b()},A)}function Ag(){this.g=!0}Ag.prototype.xa=function(){this.g=!1};function nK(b,A,O,B,W,J){b.info(function(){if(b.g)if(J)for(var de="",Ht=J.split("&"),bi=0;bi<Ht.length;bi++){var Et=Ht[bi].split("=");if(1<Et.length){var Ai=Et[0];Et=Et[1];var Mi=Ai.split("_");de=2<=Mi.length&&Mi[1]=="type"?de+(Ai+"="+Et+"&"):de+(Ai+"=redacted&")}}else de=null;else de=J;return"XMLHTTP REQ ("+B+") [attempt "+W+"]: "+A+`
`+O+`
`+de})}function iK(b,A,O,B,W,J,de){b.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+W+"]: "+A+`
`+O+`
`+J+" "+de})}function jd(b,A,O,B){b.info(function(){return"XMLHTTP TEXT ("+A+"): "+rK(b,O)+(B?" "+B:"")})}function sK(b,A){b.info(function(){return"TIMEOUT: "+A})}Ag.prototype.info=function(){};function rK(b,A){if(!b.g)return A;if(!A)return null;try{var O=JSON.parse(A);if(O){for(b=0;b<O.length;b++)if(Array.isArray(O[b])){var B=O[b];if(!(2>B.length)){var W=B[1];if(Array.isArray(W)&&!(1>W.length)){var J=W[0];if(J!="noop"&&J!="stop"&&J!="close")for(var de=1;de<W.length;de++)W[de]=""}}}}return Dy(O)}catch{return A}}var Tp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rS={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Py;function Sp(){}m(Sp,Ly),Sp.prototype.g=function(){return new XMLHttpRequest},Sp.prototype.i=function(){return{}},Py=new Sp;function bl(b,A,O,B){this.j=b,this.i=A,this.l=O,this.R=B||1,this.U=new Sg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new oS}function oS(){this.i=null,this.g="",this.h=!1}var aS={},Fy={};function By(b,A,O){b.L=1,b.v=Ap(aa(A)),b.m=O,b.P=!0,lS(b,null)}function lS(b,A){b.F=Date.now(),Ip(b),b.A=aa(b.v);var O=b.A,B=b.R;Array.isArray(B)||(B=[String(B)]),wS(O.i,"t",B),b.C=0,O=b.j.J,b.h=new oS,b.g=zS(b.j,O?A:null,!b.m),0<b.O&&(b.M=new JW(f(b.Y,b,b.g),b.O)),A=b.U,O=b.g,B=b.ca;var W="readystatechange";Array.isArray(W)||(W&&(qT[0]=W.toString()),W=qT);for(var J=0;J<W.length;J++){var de=Is(O,W[J],B||A.handleEvent,!1,A.h||A);if(!de)break;A.g[de.key]=de}A=b.H?_(b.H):{},b.m?(b.u||(b.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",b.g.ea(b.A,b.u,b.m,A)):(b.u="GET",b.g.ea(b.A,b.u,null,A)),xg(),nK(b.i,b.u,b.A,b.l,b.R,b.m)}bl.prototype.ca=function(b){b=b.target;const A=this.M;A&&la(b)==3?A.j():this.Y(b)},bl.prototype.Y=function(b){try{if(b==this.g)e:{const Mi=la(this.g);var A=this.g.Ba();const Kd=this.g.Z();if(!(3>Mi)&&(Mi!=3||this.g&&(this.h.h||this.g.oa()||AS(this.g)))){this.J||Mi!=4||A==7||(A==8||0>=Kd?xg(3):xg(2)),zy(this);var O=this.g.Z();this.X=O;t:if(cS(this)){var B=AS(this.g);b="";var W=B.length,J=la(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){iu(this),Mg(this);var de="";break t}this.h.i=new a.TextDecoder}for(A=0;A<W;A++)this.h.h=!0,b+=this.h.i.decode(B[A],{stream:!(J&&A==W-1)});B.length=0,this.h.g+=b,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=O==200,iK(this.i,this.u,this.A,this.l,this.R,Mi,O),this.o){if(this.T&&!this.K){t:{if(this.g){var Ht,bi=this.g;if((Ht=bi.g?bi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ht)){var Et=Ht;break t}}Et=null}if(O=Et)jd(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hy(this,O);else{this.o=!1,this.s=3,ji(12),iu(this),Mg(this);break e}}if(this.P){O=!0;let Rr;for(;!this.J&&this.C<de.length;)if(Rr=oK(this,de),Rr==Fy){Mi==4&&(this.s=4,ji(14),O=!1),jd(this.i,this.l,null,"[Incomplete Response]");break}else if(Rr==aS){this.s=4,ji(15),jd(this.i,this.l,de,"[Invalid Chunk]"),O=!1;break}else jd(this.i,this.l,Rr,null),Hy(this,Rr);if(cS(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mi!=4||de.length!=0||this.h.h||(this.s=1,ji(16),O=!1),this.o=this.o&&O,!O)jd(this.i,this.l,de,"[Invalid Chunked Response]"),iu(this),Mg(this);else if(0<de.length&&!this.W){this.W=!0;var Ai=this.j;Ai.g==this&&Ai.ba&&!Ai.M&&(Ai.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Yy(Ai),Ai.M=!0,ji(11))}}else jd(this.i,this.l,de,null),Hy(this,de);Mi==4&&iu(this),this.o&&!this.J&&(Mi==4?OS(this.j,this):(this.o=!1,Ip(this)))}else _K(this.g),O==400&&0<de.indexOf("Unknown SID")?(this.s=3,ji(12)):(this.s=0,ji(13)),iu(this),Mg(this)}}}catch{}finally{}};function cS(b){return b.g?b.u=="GET"&&b.L!=2&&b.j.Ca:!1}function oK(b,A){var O=b.C,B=A.indexOf(`
`,O);return B==-1?Fy:(O=Number(A.substring(O,B)),isNaN(O)?aS:(B+=1,B+O>A.length?Fy:(A=A.slice(B,B+O),b.C=B+O,A)))}bl.prototype.cancel=function(){this.J=!0,iu(this)};function Ip(b){b.S=Date.now()+b.I,uS(b,b.I)}function uS(b,A){if(b.B!=null)throw Error("WatchDog timer not null");b.B=Cg(f(b.ba,b),A)}function zy(b){b.B&&(a.clearTimeout(b.B),b.B=null)}bl.prototype.ba=function(){this.B=null;const b=Date.now();0<=b-this.S?(sK(this.i,this.A),this.L!=2&&(xg(),ji(17)),iu(this),this.s=2,Mg(this)):uS(this,this.S-b)};function Mg(b){b.j.G==0||b.J||OS(b.j,b)}function iu(b){zy(b);var A=b.M;A&&typeof A.ma=="function"&&A.ma(),b.M=null,QT(b.U),b.g&&(A=b.g,b.g=null,A.abort(),A.ma())}function Hy(b,A){try{var O=b.j;if(O.G!=0&&(O.g==b||Vy(O.h,b))){if(!b.K&&Vy(O.h,b)&&O.G==3){try{var B=O.Da.g.parse(A)}catch{B=null}if(Array.isArray(B)&&B.length==3){var W=B;if(W[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<b.F)Np(O),Dp(O);else break e;jy(O),ji(18)}}else O.za=W[1],0<O.za-O.T&&37500>W[2]&&O.F&&O.v==0&&!O.C&&(O.C=Cg(f(O.Za,O),6e3));if(1>=hS(O.h)&&O.ca){try{O.ca()}catch{}O.ca=void 0}}else ru(O,11)}else if((b.K||O.g==b)&&Np(O),!E(A))for(W=O.Da.g.parse(A),A=0;A<W.length;A++){let Et=W[A];if(O.T=Et[0],Et=Et[1],O.G==2)if(Et[0]=="c"){O.K=Et[1],O.ia=Et[2];const Ai=Et[3];Ai!=null&&(O.la=Ai,O.j.info("VER="+O.la));const Mi=Et[4];Mi!=null&&(O.Aa=Mi,O.j.info("SVER="+O.Aa));const Kd=Et[5];Kd!=null&&typeof Kd=="number"&&0<Kd&&(B=1.5*Kd,O.L=B,O.j.info("backChannelRequestTimeoutMs_="+B)),B=O;const Rr=b.g;if(Rr){const Pp=Rr.g?Rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pp){var J=B.h;J.g||Pp.indexOf("spdy")==-1&&Pp.indexOf("quic")==-1&&Pp.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&($y(J,J.h),J.h=null))}if(B.D){const Wy=Rr.g?Rr.g.getResponseHeader("X-HTTP-Session-Id"):null;Wy&&(B.ya=Wy,Jt(B.I,B.D,Wy))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-b.F,O.j.info("Handshake RTT: "+O.R+"ms")),B=O;var de=b;if(B.qa=BS(B,B.J?B.ia:null,B.W),de.K){gS(B.h,de);var Ht=de,bi=B.L;bi&&(Ht.I=bi),Ht.B&&(zy(Ht),Ip(Ht)),B.g=de}else LS(B);0<O.i.length&&Lp(O)}else Et[0]!="stop"&&Et[0]!="close"||ru(O,7);else O.G==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?ru(O,7):Xy(O):Et[0]!="noop"&&O.l&&O.l.ta(Et),O.v=0)}}xg(4)}catch{}}var aK=class{constructor(b,A){this.g=b,this.map=A}};function dS(b){this.l=b||10,a.PerformanceNavigationTiming?(b=a.performance.getEntriesByType("navigation"),b=0<b.length&&(b[0].nextHopProtocol=="hq"||b[0].nextHopProtocol=="h2")):b=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=b?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fS(b){return b.h?!0:b.g?b.g.size>=b.j:!1}function hS(b){return b.h?1:b.g?b.g.size:0}function Vy(b,A){return b.h?b.h==A:b.g?b.g.has(A):!1}function $y(b,A){b.g?b.g.add(A):b.h=A}function gS(b,A){b.h&&b.h==A?b.h=null:b.g&&b.g.has(A)&&b.g.delete(A)}dS.prototype.cancel=function(){if(this.i=mS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const b of this.g.values())b.cancel();this.g.clear()}};function mS(b){if(b.h!=null)return b.i.concat(b.h.D);if(b.g!=null&&b.g.size!==0){let A=b.i;for(const O of b.g.values())A=A.concat(O.D);return A}return p(b.i)}function lK(b){if(b.V&&typeof b.V=="function")return b.V();if(typeof Map<"u"&&b instanceof Map||typeof Set<"u"&&b instanceof Set)return Array.from(b.values());if(typeof b=="string")return b.split("");if(l(b)){for(var A=[],O=b.length,B=0;B<O;B++)A.push(b[B]);return A}A=[],O=0;for(B in b)A[O++]=b[B];return A}function cK(b){if(b.na&&typeof b.na=="function")return b.na();if(!b.V||typeof b.V!="function"){if(typeof Map<"u"&&b instanceof Map)return Array.from(b.keys());if(!(typeof Set<"u"&&b instanceof Set)){if(l(b)||typeof b=="string"){var A=[];b=b.length;for(var O=0;O<b;O++)A.push(O);return A}A=[],O=0;for(const B in b)A[O++]=B;return A}}}function pS(b,A){if(b.forEach&&typeof b.forEach=="function")b.forEach(A,void 0);else if(l(b)||typeof b=="string")Array.prototype.forEach.call(b,A,void 0);else for(var O=cK(b),B=lK(b),W=B.length,J=0;J<W;J++)A.call(void 0,B[J],O&&O[J],b)}var US=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uK(b,A){if(b){b=b.split("&");for(var O=0;O<b.length;O++){var B=b[O].indexOf("="),W=null;if(0<=B){var J=b[O].substring(0,B);W=b[O].substring(B+1)}else J=b[O];A(J,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function su(b){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,b instanceof su){this.h=b.h,xp(this,b.j),this.o=b.o,this.g=b.g,Cp(this,b.s),this.l=b.l;var A=b.i,O=new Dg;O.i=A.i,A.g&&(O.g=new Map(A.g),O.h=A.h),bS(this,O),this.m=b.m}else b&&(A=String(b).match(US))?(this.h=!1,xp(this,A[1]||"",!0),this.o=Rg(A[2]||""),this.g=Rg(A[3]||"",!0),Cp(this,A[4]),this.l=Rg(A[5]||"",!0),bS(this,A[6]||"",!0),this.m=Rg(A[7]||"")):(this.h=!1,this.i=new Dg(null,this.h))}su.prototype.toString=function(){var b=[],A=this.j;A&&b.push(kg(A,yS,!0),":");var O=this.g;return(O||A=="file")&&(b.push("//"),(A=this.o)&&b.push(kg(A,yS,!0),"@"),b.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&b.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&b.push("/"),b.push(kg(O,O.charAt(0)=="/"?hK:fK,!0))),(O=this.i.toString())&&b.push("?",O),(O=this.m)&&b.push("#",kg(O,mK)),b.join("")};function aa(b){return new su(b)}function xp(b,A,O){b.j=O?Rg(A,!0):A,b.j&&(b.j=b.j.replace(/:$/,""))}function Cp(b,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);b.s=A}else b.s=null}function bS(b,A,O){A instanceof Dg?(b.i=A,pK(b.i,b.h)):(O||(A=kg(A,gK)),b.i=new Dg(A,b.h))}function Jt(b,A,O){b.i.set(A,O)}function Ap(b){return Jt(b,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),b}function Rg(b,A){return b?A?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function kg(b,A,O){return typeof b=="string"?(b=encodeURI(b).replace(A,dK),O&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function dK(b){return b=b.charCodeAt(0),"%"+(b>>4&15).toString(16)+(b&15).toString(16)}var yS=/[#\/\?@]/g,fK=/[#\?:]/g,hK=/[#\?]/g,gK=/[#\?@]/g,mK=/#/g;function Dg(b,A){this.h=this.g=null,this.i=b||null,this.j=!!A}function yl(b){b.g||(b.g=new Map,b.h=0,b.i&&uK(b.i,function(A,O){b.add(decodeURIComponent(A.replace(/\+/g," ")),O)}))}e=Dg.prototype,e.add=function(b,A){yl(this),this.i=null,b=Yd(this,b);var O=this.g.get(b);return O||this.g.set(b,O=[]),O.push(A),this.h+=1,this};function ES(b,A){yl(b),A=Yd(b,A),b.g.has(A)&&(b.i=null,b.h-=b.g.get(A).length,b.g.delete(A))}function vS(b,A){return yl(b),A=Yd(b,A),b.g.has(A)}e.forEach=function(b,A){yl(this),this.g.forEach(function(O,B){O.forEach(function(W){b.call(A,W,B,this)},this)},this)},e.na=function(){yl(this);const b=Array.from(this.g.values()),A=Array.from(this.g.keys()),O=[];for(let B=0;B<A.length;B++){const W=b[B];for(let J=0;J<W.length;J++)O.push(A[B])}return O},e.V=function(b){yl(this);let A=[];if(typeof b=="string")vS(this,b)&&(A=A.concat(this.g.get(Yd(this,b))));else{b=Array.from(this.g.values());for(let O=0;O<b.length;O++)A=A.concat(b[O])}return A},e.set=function(b,A){return yl(this),this.i=null,b=Yd(this,b),vS(this,b)&&(this.h-=this.g.get(b).length),this.g.set(b,[A]),this.h+=1,this},e.get=function(b,A){return b?(b=this.V(b),0<b.length?String(b[0]):A):A};function wS(b,A,O){ES(b,A),0<O.length&&(b.i=null,b.g.set(Yd(b,A),p(O)),b.h+=O.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const b=[],A=Array.from(this.g.keys());for(var O=0;O<A.length;O++){var B=A[O];const J=encodeURIComponent(String(B)),de=this.V(B);for(B=0;B<de.length;B++){var W=J;de[B]!==""&&(W+="="+encodeURIComponent(String(de[B]))),b.push(W)}}return this.i=b.join("&")};function Yd(b,A){return A=String(A),b.j&&(A=A.toLowerCase()),A}function pK(b,A){A&&!b.j&&(yl(b),b.i=null,b.g.forEach(function(O,B){var W=B.toLowerCase();B!=W&&(ES(this,B),wS(this,W,O))},b)),b.j=A}function UK(b,A){const O=new Ag;if(a.Image){const B=new Image;B.onload=h(El,O,"TestLoadImage: loaded",!0,A,B),B.onerror=h(El,O,"TestLoadImage: error",!1,A,B),B.onabort=h(El,O,"TestLoadImage: abort",!1,A,B),B.ontimeout=h(El,O,"TestLoadImage: timeout",!1,A,B),a.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=b}else A(!1)}function bK(b,A){const O=new Ag,B=new AbortController,W=setTimeout(()=>{B.abort(),El(O,"TestPingServer: timeout",!1,A)},1e4);fetch(b,{signal:B.signal}).then(J=>{clearTimeout(W),J.ok?El(O,"TestPingServer: ok",!0,A):El(O,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(W),El(O,"TestPingServer: error",!1,A)})}function El(b,A,O,B,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),B(O)}catch{}}function yK(){this.g=new tK}function EK(b,A,O){const B=O||"";try{pS(b,function(W,J){let de=W;c(W)&&(de=Dy(W)),A.push(B+J+"="+encodeURIComponent(de))})}catch(W){throw A.push(B+"type="+encodeURIComponent("_badmap")),W}}function Mp(b){this.l=b.Ub||null,this.j=b.eb||!1}m(Mp,Ly),Mp.prototype.g=function(){return new Rp(this.l,this.j)},Mp.prototype.i=function(b){return function(){return b}}({});function Rp(b,A){Ci.call(this),this.D=b,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Rp,Ci),e=Rp.prototype,e.open=function(b,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=b,this.A=A,this.readyState=1,Ng(this)},e.send=function(b){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};b&&(A.body=b),(this.D||a).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Lg(this)),this.readyState=0},e.Sa=function(b){if(this.g&&(this.l=b,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=b.headers,this.readyState=2,Ng(this)),this.g&&(this.readyState=3,Ng(this),this.g)))if(this.responseType==="arraybuffer")b.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in b){if(this.j=b.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_S(this)}else b.text().then(this.Ra.bind(this),this.ga.bind(this))};function _S(b){b.j.read().then(b.Pa.bind(b)).catch(b.ga.bind(b))}e.Pa=function(b){if(this.g){if(this.o&&b.value)this.response.push(b.value);else if(!this.o){var A=b.value?b.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!b.done}))&&(this.response=this.responseText+=A)}b.done?Lg(this):Ng(this),this.readyState==3&&_S(this)}},e.Ra=function(b){this.g&&(this.response=this.responseText=b,Lg(this))},e.Qa=function(b){this.g&&(this.response=b,Lg(this))},e.ga=function(){this.g&&Lg(this)};function Lg(b){b.readyState=4,b.l=null,b.j=null,b.v=null,Ng(b)}e.setRequestHeader=function(b,A){this.u.append(b,A)},e.getResponseHeader=function(b){return this.h&&this.h.get(b.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const b=[],A=this.h.entries();for(var O=A.next();!O.done;)O=O.value,b.push(O[0]+": "+O[1]),O=A.next();return b.join(`\r
`)};function Ng(b){b.onreadystatechange&&b.onreadystatechange.call(b)}Object.defineProperty(Rp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(b){this.m=b?"include":"same-origin"}});function TS(b){let A="";return M(b,function(O,B){A+=B,A+=":",A+=O,A+=`\r
`}),A}function Gy(b,A,O){e:{for(B in O){var B=!1;break e}B=!0}B||(O=TS(O),typeof b=="string"?O!=null&&encodeURIComponent(String(O)):Jt(b,A,O))}function bn(b){Ci.call(this),this.headers=new Map,this.o=b||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(bn,Ci);var vK=/^https?$/i,wK=["POST","PUT"];e=bn.prototype,e.Ha=function(b){this.J=b},e.ea=function(b,A,O,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+b);A=A?A.toUpperCase():"GET",this.D=b,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Py.g(),this.v=this.o?JT(this.o):JT(Py),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(A,String(b),!0),this.B=!1}catch(J){SS(this,J);return}if(b=O||"",O=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var W in B)O.set(W,B[W]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const J of B.keys())O.set(J,B.get(J));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(O.keys()).find(J=>J.toLowerCase()=="content-type"),W=a.FormData&&b instanceof a.FormData,!(0<=Array.prototype.indexOf.call(wK,A,void 0))||B||W||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,de]of O)this.g.setRequestHeader(J,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{CS(this),this.u=!0,this.g.send(b),this.u=!1}catch(J){SS(this,J)}};function SS(b,A){b.h=!1,b.g&&(b.j=!0,b.g.abort(),b.j=!1),b.l=A,b.m=5,IS(b),kp(b)}function IS(b){b.A||(b.A=!0,Xi(b,"complete"),Xi(b,"error"))}e.abort=function(b){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=b||7,Xi(this,"complete"),Xi(this,"abort"),kp(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kp(this,!0)),bn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?xS(this):this.bb())},e.bb=function(){xS(this)};function xS(b){if(b.h&&typeof o<"u"&&(!b.v[1]||la(b)!=4||b.Z()!=2)){if(b.u&&la(b)==4)KT(b.Ea,0,b);else if(Xi(b,"readystatechange"),la(b)==4){b.h=!1;try{const de=b.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var O;if(!(O=A)){var B;if(B=de===0){var W=String(b.D).match(US)[1]||null;!W&&a.self&&a.self.location&&(W=a.self.location.protocol.slice(0,-1)),B=!vK.test(W?W.toLowerCase():"")}O=B}if(O)Xi(b,"complete"),Xi(b,"success");else{b.m=6;try{var J=2<la(b)?b.g.statusText:""}catch{J=""}b.l=J+" ["+b.Z()+"]",IS(b)}}finally{kp(b)}}}}function kp(b,A){if(b.g){CS(b);const O=b.g,B=b.v[0]?()=>{}:null;b.g=null,b.v=null,A||Xi(b,"ready");try{O.onreadystatechange=B}catch{}}}function CS(b){b.I&&(a.clearTimeout(b.I),b.I=null)}e.isActive=function(){return!!this.g};function la(b){return b.g?b.g.readyState:0}e.Z=function(){try{return 2<la(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(b){if(this.g){var A=this.g.responseText;return b&&A.indexOf(b)==0&&(A=A.substring(b.length)),eK(A)}};function AS(b){try{if(!b.g)return null;if("response"in b.g)return b.g.response;switch(b.H){case"":case"text":return b.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in b.g)return b.g.mozResponseArrayBuffer}return null}catch{return null}}function _K(b){const A={};b=(b.g&&2<=la(b)&&b.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<b.length;B++){if(E(b[B]))continue;var O=R(b[B]);const W=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const J=A[W]||[];A[W]=J,J.push(O)}T(A,function(B){return B.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Og(b,A,O){return O&&O.internalChannelParams&&O.internalChannelParams[b]||A}function MS(b){this.Aa=0,this.i=[],this.j=new Ag,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Og("failFast",!1,b),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Og("baseRetryDelayMs",5e3,b),this.cb=Og("retryDelaySeedMs",1e4,b),this.Wa=Og("forwardChannelMaxRetries",2,b),this.wa=Og("forwardChannelRequestTimeoutMs",2e4,b),this.pa=b&&b.xmlHttpFactory||void 0,this.Xa=b&&b.Tb||void 0,this.Ca=b&&b.useFetchStreams||!1,this.L=void 0,this.J=b&&b.supportsCrossDomainXhr||!1,this.K="",this.h=new dS(b&&b.concurrentRequestLimit),this.Da=new yK,this.P=b&&b.fastHandshake||!1,this.O=b&&b.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=b&&b.Rb||!1,b&&b.xa&&this.j.xa(),b&&b.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&b&&b.detectBufferingProxy||!1,this.ja=void 0,b&&b.longPollingTimeout&&0<b.longPollingTimeout&&(this.ja=b.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=MS.prototype,e.la=8,e.G=1,e.connect=function(b,A,O,B){ji(0),this.W=b,this.H=A||{},O&&B!==void 0&&(this.H.OSID=O,this.H.OAID=B),this.F=this.X,this.I=BS(this,null,this.W),Lp(this)};function Xy(b){if(RS(b),b.G==3){var A=b.U++,O=aa(b.I);if(Jt(O,"SID",b.K),Jt(O,"RID",A),Jt(O,"TYPE","terminate"),Pg(b,O),A=new bl(b,b.j,A),A.L=2,A.v=Ap(aa(O)),O=!1,a.navigator&&a.navigator.sendBeacon)try{O=a.navigator.sendBeacon(A.v.toString(),"")}catch{}!O&&a.Image&&(new Image().src=A.v,O=!0),O||(A.g=zS(A.j,null),A.g.ea(A.v)),A.F=Date.now(),Ip(A)}FS(b)}function Dp(b){b.g&&(Yy(b),b.g.cancel(),b.g=null)}function RS(b){Dp(b),b.u&&(a.clearTimeout(b.u),b.u=null),Np(b),b.h.cancel(),b.s&&(typeof b.s=="number"&&a.clearTimeout(b.s),b.s=null)}function Lp(b){if(!fS(b.h)&&!b.s){b.s=!0;var A=b.Ga;V||q(),X||(V(),X=!0),j.add(A,b),b.B=0}}function TK(b,A){return hS(b.h)>=b.h.j-(b.s?1:0)?!1:b.s?(b.i=A.D.concat(b.i),!0):b.G==1||b.G==2||b.B>=(b.Va?0:b.Wa)?!1:(b.s=Cg(f(b.Ga,b,A),PS(b,b.B)),b.B++,!0)}e.Ga=function(b){if(this.s)if(this.s=null,this.G==1){if(!b){this.U=Math.floor(1e5*Math.random()),b=this.U++;const W=new bl(this,this.j,b);let J=this.o;if(this.S&&(J?(J=_(J),C(J,this.S)):J=this.S),this.m!==null||this.O||(W.H=J,J=null),this.P)e:{for(var A=0,O=0;O<this.i.length;O++){t:{var B=this.i[O];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(A+=B,4096<A){A=O;break e}if(A===4096||O===this.i.length-1){A=O+1;break e}}A=1e3}else A=1e3;A=DS(this,W,A),O=aa(this.I),Jt(O,"RID",b),Jt(O,"CVER",22),this.D&&Jt(O,"X-HTTP-Session-Id",this.D),Pg(this,O),J&&(this.O?A="headers="+encodeURIComponent(String(TS(J)))+"&"+A:this.m&&Gy(O,this.m,J)),$y(this.h,W),this.Ua&&Jt(O,"TYPE","init"),this.P?(Jt(O,"$req",A),Jt(O,"SID","null"),W.T=!0,By(W,O,null)):By(W,O,A),this.G=2}}else this.G==3&&(b?kS(this,b):this.i.length==0||fS(this.h)||kS(this))};function kS(b,A){var O;A?O=A.l:O=b.U++;const B=aa(b.I);Jt(B,"SID",b.K),Jt(B,"RID",O),Jt(B,"AID",b.T),Pg(b,B),b.m&&b.o&&Gy(B,b.m,b.o),O=new bl(b,b.j,O,b.B+1),b.m===null&&(O.H=b.o),A&&(b.i=A.D.concat(b.i)),A=DS(b,O,1e3),O.I=Math.round(.5*b.wa)+Math.round(.5*b.wa*Math.random()),$y(b.h,O),By(O,B,A)}function Pg(b,A){b.H&&M(b.H,function(O,B){Jt(A,B,O)}),b.l&&pS({},function(O,B){Jt(A,B,O)})}function DS(b,A,O){O=Math.min(b.i.length,O);var B=b.l?f(b.l.Na,b.l,b):null;e:{var W=b.i;let J=-1;for(;;){const de=["count="+O];J==-1?0<O?(J=W[0].g,de.push("ofs="+J)):J=0:de.push("ofs="+J);let Ht=!0;for(let bi=0;bi<O;bi++){let Et=W[bi].g;const Ai=W[bi].map;if(Et-=J,0>Et)J=Math.max(0,W[bi].g-100),Ht=!1;else try{EK(Ai,de,"req"+Et+"_")}catch{B&&B(Ai)}}if(Ht){B=de.join("&");break e}}}return b=b.i.splice(0,O),A.D=b,B}function LS(b){if(!b.g&&!b.u){b.Y=1;var A=b.Fa;V||q(),X||(V(),X=!0),j.add(A,b),b.v=0}}function jy(b){return b.g||b.u||3<=b.v?!1:(b.Y++,b.u=Cg(f(b.Fa,b),PS(b,b.v)),b.v++,!0)}e.Fa=function(){if(this.u=null,NS(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var b=2*this.R;this.j.info("BP detection timer enabled: "+b),this.A=Cg(f(this.ab,this),b)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ji(10),Dp(this),NS(this))};function Yy(b){b.A!=null&&(a.clearTimeout(b.A),b.A=null)}function NS(b){b.g=new bl(b,b.j,"rpc",b.Y),b.m===null&&(b.g.H=b.o),b.g.O=0;var A=aa(b.qa);Jt(A,"RID","rpc"),Jt(A,"SID",b.K),Jt(A,"AID",b.T),Jt(A,"CI",b.F?"0":"1"),!b.F&&b.ja&&Jt(A,"TO",b.ja),Jt(A,"TYPE","xmlhttp"),Pg(b,A),b.m&&b.o&&Gy(A,b.m,b.o),b.L&&(b.g.I=b.L);var O=b.g;b=b.ia,O.L=1,O.v=Ap(aa(A)),O.m=null,O.P=!0,lS(O,b)}e.Za=function(){this.C!=null&&(this.C=null,Dp(this),jy(this),ji(19))};function Np(b){b.C!=null&&(a.clearTimeout(b.C),b.C=null)}function OS(b,A){var O=null;if(b.g==A){Np(b),Yy(b),b.g=null;var B=2}else if(Vy(b.h,A))O=A.D,gS(b.h,A),B=1;else return;if(b.G!=0){if(A.o)if(B==1){O=A.m?A.m.length:0,A=Date.now()-A.F;var W=b.B;B=_p(),Xi(B,new sS(B,O)),Lp(b)}else LS(b);else if(W=A.s,W==3||W==0&&0<A.X||!(B==1&&TK(b,A)||B==2&&jy(b)))switch(O&&0<O.length&&(A=b.h,A.i=A.i.concat(O)),W){case 1:ru(b,5);break;case 4:ru(b,10);break;case 3:ru(b,6);break;default:ru(b,2)}}}function PS(b,A){let O=b.Ta+Math.floor(Math.random()*b.cb);return b.isActive()||(O*=2),O*A}function ru(b,A){if(b.j.info("Error code "+A),A==2){var O=f(b.fb,b),B=b.Xa;const W=!B;B=new su(B||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||xp(B,"https"),Ap(B),W?UK(B.toString(),O):bK(B.toString(),O)}else ji(2);b.G=0,b.l&&b.l.sa(A),FS(b),RS(b)}e.fb=function(b){b?(this.j.info("Successfully pinged google.com"),ji(2)):(this.j.info("Failed to ping google.com"),ji(1))};function FS(b){if(b.G=0,b.ka=[],b.l){const A=mS(b.h);(A.length!=0||b.i.length!=0)&&(U(b.ka,A),U(b.ka,b.i),b.h.i.length=0,p(b.i),b.i.length=0),b.l.ra()}}function BS(b,A,O){var B=O instanceof su?aa(O):new su(O);if(B.g!="")A&&(B.g=A+"."+B.g),Cp(B,B.s);else{var W=a.location;B=W.protocol,A=A?A+"."+W.hostname:W.hostname,W=+W.port;var J=new su(null);B&&xp(J,B),A&&(J.g=A),W&&Cp(J,W),O&&(J.l=O),B=J}return O=b.D,A=b.ya,O&&A&&Jt(B,O,A),Jt(B,"VER",b.la),Pg(b,B),B}function zS(b,A,O){if(A&&!b.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=b.Ca&&!b.pa?new bn(new Mp({eb:O})):new bn(b.pa),A.Ha(b.J),A}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function HS(){}e=HS.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Op(){}Op.prototype.g=function(b,A){return new xs(b,A)};function xs(b,A){Ci.call(this),this.g=new MS(A),this.l=b,this.h=A&&A.messageUrlParams||null,b=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(b?b["X-Client-Protocol"]="webchannel":b={"X-Client-Protocol":"webchannel"}),this.g.o=b,b=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(b?b["X-WebChannel-Content-Type"]=A.messageContentType:b={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(b?b["X-WebChannel-Client-Profile"]=A.va:b={"X-WebChannel-Client-Profile":A.va}),this.g.S=b,(b=A&&A.Sb)&&!E(b)&&(this.g.m=b),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!E(A)&&(this.g.D=A,b=this.h,b!==null&&A in b&&(b=this.h,A in b&&delete b[A])),this.j=new Wd(this)}m(xs,Ci),xs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xs.prototype.close=function(){Xy(this.g)},xs.prototype.o=function(b){var A=this.g;if(typeof b=="string"){var O={};O.__data__=b,b=O}else this.u&&(O={},O.__data__=Dy(b),b=O);A.i.push(new aK(A.Ya++,b)),A.G==3&&Lp(A)},xs.prototype.N=function(){this.g.l=null,delete this.j,Xy(this.g),delete this.g,xs.aa.N.call(this)};function VS(b){Ny.call(this),b.__headers__&&(this.headers=b.__headers__,this.statusCode=b.__status__,delete b.__headers__,delete b.__status__);var A=b.__sm__;if(A){e:{for(const O in A){b=O;break e}b=void 0}(this.i=b)&&(b=this.i,A=A!==null&&b in A?A[b]:void 0),this.data=A}else this.data=b}m(VS,Ny);function $S(){Oy.call(this),this.status=1}m($S,Oy);function Wd(b){this.g=b}m(Wd,HS),Wd.prototype.ua=function(){Xi(this.g,"a")},Wd.prototype.ta=function(b){Xi(this.g,new VS(b))},Wd.prototype.sa=function(b){Xi(this.g,new $S)},Wd.prototype.ra=function(){Xi(this.g,"b")},Op.prototype.createWebChannel=Op.prototype.g,xs.prototype.send=xs.prototype.o,xs.prototype.open=xs.prototype.m,xs.prototype.close=xs.prototype.close,oY=function(){return new Op},rY=function(){return _p()},sY=nu,tv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Tp.NO_ERROR=0,Tp.TIMEOUT=8,Tp.HTTP_ERROR=6,A2=Tp,rS.COMPLETE="complete",iY=rS,eS.EventType=Ig,Ig.OPEN="a",Ig.CLOSE="b",Ig.ERROR="c",Ig.MESSAGE="d",Ci.prototype.listen=Ci.prototype.K,O1=eS,bn.prototype.listenOnce=bn.prototype.L,bn.prototype.getLastError=bn.prototype.Ka,bn.prototype.getLastErrorCode=bn.prototype.Ba,bn.prototype.getStatus=bn.prototype.Z,bn.prototype.getResponseJson=bn.prototype.Oa,bn.prototype.getResponseText=bn.prototype.oa,bn.prototype.send=bn.prototype.ea,bn.prototype.setWithCredentials=bn.prototype.Ha,nY=bn}).apply(typeof LU<"u"?LU:typeof self<"u"?self:typeof window<"u"?window:{});const nD="@firebase/firestore",iD="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Oi.UNAUTHENTICATED=new Oi(null),Oi.GOOGLE_CREDENTIALS=new Oi("google-credentials-uid"),Oi.FIRST_PARTY=new Oi("first-party-uid"),Oi.MOCK_USER=new Oi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vg="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd=new Xj("@firebase/firestore");function bf(){return Sd.logLevel}function ve(e,...t){if(Sd.logLevel<=ut.DEBUG){const n=t.map(aT);Sd.debug(`Firestore (${vg}): ${e}`,...n)}}function dl(e,...t){if(Sd.logLevel<=ut.ERROR){const n=t.map(aT);Sd.error(`Firestore (${vg}): ${e}`,...n)}}function Wh(e,...t){if(Sd.logLevel<=ut.WARN){const n=t.map(aT);Sd.warn(`Firestore (${vg}): ${e}`,...n)}}function aT(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(e="Unexpected state"){const t=`FIRESTORE (${vg}) INTERNAL ASSERTION FAILED: `+e;throw dl(t),new Error(t)}function jt(e,t){e||ke()}function tt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Hd{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aY{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class N9e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Oi.UNAUTHENTICATED))}shutdown(){}}class O9e{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class P9e{constructor(t){this.t=t,this.currentUser=Oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){jt(this.o===void 0);let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let r=new wc;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new wc,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=r;t.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new wc)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(jt(typeof i.accessToken=="string"),new aY(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return jt(t===null||typeof t=="string"),new Oi(t)}}class F9e{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=Oi.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class B9e{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new F9e(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Oi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sD{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z9e{constructor(t,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Kj(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,n){jt(this.o===void 0);const i=r=>{r.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.R;return this.R=r.token,ve("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const s=r=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?s(r):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new sD(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(jt(typeof n.token=="string"),this.R=n.token,new sD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9e(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lY{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=H9e(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%62))}return i}}function dt(e,t){return e<t?-1:e>t?1:0}function Kh(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=-62135596800,oD=1e6;class mi{static now(){return mi.fromMillis(Date.now())}static fromDate(t){return mi.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*oD);return new mi(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Se(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<rD)throw new Se(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Se(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oD}_compareTo(t){return this.seconds===t.seconds?dt(this.nanoseconds,t.nanoseconds):dt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-rD;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(t){return new Pe(t)}static min(){return new Pe(new mi(0,0))}static max(){return new Pe(new mi(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD="__name__";class xo{constructor(t,n,i){n===void 0?n=0:n>t.length&&ke(),i===void 0?i=t.length-n:i>t.length-n&&ke(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return xo.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof xo?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const r=xo.compareSegments(t.get(s),n.get(s));if(r!==0)return r}return Math.sign(t.length-n.length)}static compareSegments(t,n){const i=xo.isNumericId(t),s=xo.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?xo.extractNumericId(t).compare(xo.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return vc.fromString(t.substring(4,t.length-2))}}class ln extends xo{construct(t,n,i){return new ln(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new Se(se.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new ln(n)}static emptyPath(){return new ln([])}}const V9e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bi extends xo{construct(t,n,i){return new Bi(t,n,i)}static isValidIdentifier(t){return V9e.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===aD}static keyField(){return new Bi([aD])}static fromServerFormat(t){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new Se(se.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;s<t.length;){const a=t[s];if(a==="\\"){if(s+1===t.length)throw new Se(se.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Se(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new Se(se.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Bi(n)}static emptyPath(){return new Bi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(t){this.path=t}static fromPath(t){return new De(ln.fromString(t))}static fromName(t){return new De(ln.fromString(t).popFirst(5))}static empty(){return new De(ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ln.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ln.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new De(new ln(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=-1;function $9e(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=Pe.fromTimestamp(i===1e9?new mi(n+1,0):new mi(n,i));return new Hc(s,De.empty(),t)}function G9e(e){return new Hc(e.readTime,e.key,Sm)}class Hc{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Hc(Pe.min(),De.empty(),Sm)}static max(){return new Hc(Pe.max(),De.empty(),Sm)}}function X9e(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=De.comparator(e.documentKey,t.documentKey),n!==0?n:dt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9e="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Y9e{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gy(e){if(e.code!==se.FAILED_PRECONDITION||e.message!==j9e)throw e;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new ne((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):ne.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):ne.reject(n)}static resolve(t){return new ne((n,i)=>{n(t)})}static reject(t){return new ne((n,i)=>{i(t)})}static waitFor(t){return new ne((n,i)=>{let s=0,r=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&n()},l=>i(l))}),o=!0,r===s&&n()})}static or(t){let n=ne.resolve(!1);for(const i of t)n=n.next(s=>s?ne.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new ne((i,s)=>{const r=t.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===r&&i(o)},u=>s(u))}})}static doWhile(t,n){return new ne((i,s)=>{const r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}}function W9e(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wg(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.oe(i),this._e=i=>n.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}my.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9e=-1;function Up(e){return e==null}function w6(e){return e===0&&1/e==-1/0}function Z9e(e){return typeof e=="number"&&Number.isInteger(e)&&!w6(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cY="";function q9e(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=lD(t)),t=Q9e(e.get(n),t);return lD(t)}function Q9e(e,t){let n=t;const i=e.length;for(let s=0;s<i;s++){const r=e.charAt(s);switch(r){case"\0":n+="";break;case cY:n+="";break;default:n+=r}}return n}function lD(e){return e+cY+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Vd(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function uY(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t,n){this.comparator=t,this.root=n||wi.EMPTY}insert(t,n){return new Cn(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,wi.BLACK,null,null))}remove(t){return new Cn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,wi.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new NU(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new NU(this.root,t,this.comparator,!1)}getReverseIterator(){return new NU(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new NU(this.root,t,this.comparator,!0)}}class NU{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class wi{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??wi.RED,this.left=s??wi.EMPTY,this.right=r??wi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new wi(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return wi.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,wi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,wi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ke();const t=this.left.check();if(t!==this.right.check())throw ke();return t+(this.isRed()?0:1)}}wi.EMPTY=null,wi.RED=!0,wi.BLACK=!1;wi.EMPTY=new class{constructor(){this.size=0}get key(){throw ke()}get value(){throw ke()}get color(){throw ke()}get left(){throw ke()}get right(){throw ke()}copy(t,n,i,s,r){return this}insert(t,n,i){return new wi(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(t){this.comparator=t,this.data=new Cn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new uD(this.data.getIterator())}getIteratorFrom(t){return new uD(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof ni)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ni(this.comparator);return n.data=t,n}}class uD{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(t){this.fields=t,t.sort(Bi.comparator)}static empty(){return new pr([])}unionWith(t){let n=new ni(Bi.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new pr(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Kh(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new dY("Invalid base64 string: "+r):r}}(t);return new xi(n)}static fromUint8Array(t){const n=function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r}(t);return new xi(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return dt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}xi.EMPTY_BYTE_STRING=new xi("");const J9e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vc(e){if(jt(!!e),typeof e=="string"){let t=0;const n=J9e.exec(e);if(jt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Sn(e.seconds),nanos:Sn(e.nanos)}}function Sn(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function $c(e){return typeof e=="string"?xi.fromBase64String(e):xi.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fY="server_timestamp",hY="__type__",gY="__previous_value__",mY="__local_write_time__";function lT(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[hY])===null||n===void 0?void 0:n.stringValue)===fY}function py(e){const t=e.mapValue.fields[gY];return lT(t)?py(t):t}function Im(e){const t=Vc(e.mapValue.fields[mY].timestampValue);return new mi(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ewe{constructor(t,n,i,s,r,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const _6="(default)";class xm{constructor(t,n){this.projectId=t,this.database=n||_6}static empty(){return new xm("","")}get isDefaultDatabase(){return this.database===_6}isEqual(t){return t instanceof xm&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pY="__type__",twe="__max__",OU={mapValue:{}},UY="__vector__",T6="value";function Gc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?lT(e)?4:iwe(e)?9007199254740991:nwe(e)?10:11:ke()}function ea(e,t){if(e===t)return!0;const n=Gc(e);if(n!==Gc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Im(e).isEqual(Im(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const o=Vc(s.timestampValue),a=Vc(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return $c(s.bytesValue).isEqual($c(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return Sn(s.geoPointValue.latitude)===Sn(r.geoPointValue.latitude)&&Sn(s.geoPointValue.longitude)===Sn(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Sn(s.integerValue)===Sn(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const o=Sn(s.doubleValue),a=Sn(r.doubleValue);return o===a?w6(o)===w6(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Kh(e.arrayValue.values||[],t.arrayValue.values||[],ea);case 10:case 11:return function(s,r){const o=s.mapValue.fields||{},a=r.mapValue.fields||{};if(cD(o)!==cD(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ea(o[l],a[l])))return!1;return!0}(e,t);default:return ke()}}function Cm(e,t){return(e.values||[]).find(n=>ea(n,t))!==void 0}function Zh(e,t){if(e===t)return 0;const n=Gc(e),i=Gc(t);if(n!==i)return dt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return dt(e.booleanValue,t.booleanValue);case 2:return function(r,o){const a=Sn(r.integerValue||r.doubleValue),l=Sn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return dD(e.timestampValue,t.timestampValue);case 4:return dD(Im(e),Im(t));case 5:return dt(e.stringValue,t.stringValue);case 6:return function(r,o){const a=$c(r),l=$c(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(r,o){const a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=dt(a[c],l[c]);if(u!==0)return u}return dt(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,o){const a=dt(Sn(r.latitude),Sn(o.latitude));return a!==0?a:dt(Sn(r.longitude),Sn(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return fD(e.arrayValue,t.arrayValue);case 10:return function(r,o){var a,l,c,u;const d=r.fields||{},f=o.fields||{},h=(a=d[T6])===null||a===void 0?void 0:a.arrayValue,m=(l=f[T6])===null||l===void 0?void 0:l.arrayValue,p=dt(((c=h==null?void 0:h.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return p!==0?p:fD(h,m)}(e.mapValue,t.mapValue);case 11:return function(r,o){if(r===OU.mapValue&&o===OU.mapValue)return 0;if(r===OU.mapValue)return 1;if(o===OU.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=dt(l[d],u[d]);if(f!==0)return f;const h=Zh(a[l[d]],c[u[d]]);if(h!==0)return h}return dt(l.length,u.length)}(e.mapValue,t.mapValue);default:throw ke()}}function dD(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return dt(e,t);const n=Vc(e),i=Vc(t),s=dt(n.seconds,i.seconds);return s!==0?s:dt(n.nanos,i.nanos)}function fD(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=Zh(n[s],i[s]);if(r)return r}return dt(n.length,i.length)}function qh(e){return nv(e)}function nv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Vc(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return $c(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return De.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=nv(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const o of i)r?r=!1:s+=",",s+=`${o}:${nv(n.fields[o])}`;return s+"}"}(e.mapValue):ke()}function M2(e){switch(Gc(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=py(e);return t?16+M2(t):16;case 5:return 2*e.stringValue.length;case 6:return $c(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+M2(r),0)}(e.arrayValue);case 10:case 11:return function(i){let s=0;return Vd(i.fields,(r,o)=>{s+=r.length+M2(o)}),s}(e.mapValue);default:throw ke()}}function iv(e){return!!e&&"integerValue"in e}function cT(e){return!!e&&"arrayValue"in e}function hD(e){return!!e&&"nullValue"in e}function gD(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function s7(e){return!!e&&"mapValue"in e}function nwe(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[pY])===null||n===void 0?void 0:n.stringValue)===UY}function b0(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Vd(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=b0(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=b0(e.arrayValue.values[n]);return t}return Object.assign({},e)}function iwe(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===twe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(t){this.value=t}static empty(){return new gs({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!s7(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=b0(n)}setAll(t){let n=Bi.emptyPath(),i={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,s),i={},s=[],n=a.popLast()}o?i[a.lastSegment()]=b0(o):s.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){const n=this.field(t.popLast());s7(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ea(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];s7(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){Vd(n,(s,r)=>t[s]=r);for(const s of i)delete t[s]}clone(){return new gs(b0(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t,n,i,s,r,o,a){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new di(t,0,Pe.min(),Pe.min(),Pe.min(),gs.empty(),0)}static newFoundDocument(t,n,i,s){return new di(t,1,n,Pe.min(),i,s,0)}static newNoDocument(t,n){return new di(t,2,n,Pe.min(),Pe.min(),gs.empty(),0)}static newUnknownDocument(t,n){return new di(t,3,n,Pe.min(),Pe.min(),gs.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=gs.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof di&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new di(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(t,n){this.position=t,this.inclusive=n}}function mD(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],o=e.position[s];if(r.field.isKeyField()?i=De.comparator(De.fromName(o.referenceValue),n.key):i=Zh(o,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function pD(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ea(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(t,n="asc"){this.field=t,this.dir=n}}function swe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bY{}class ei extends bY{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new owe(t,n,i):n==="array-contains"?new cwe(t,i):n==="in"?new uwe(t,i):n==="not-in"?new dwe(t,i):n==="array-contains-any"?new fwe(t,i):new ei(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new awe(t,i):new lwe(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Zh(n,this.value)):n!==null&&Gc(this.value)===Gc(n)&&this.matchesComparison(Zh(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ta extends bY{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new ta(t,n)}matches(t){return yY(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function yY(e){return e.op==="and"}function EY(e){return rwe(e)&&yY(e)}function rwe(e){for(const t of e.filters)if(t instanceof ta)return!1;return!0}function sv(e){if(e instanceof ei)return e.field.canonicalString()+e.op.toString()+qh(e.value);if(EY(e))return e.filters.map(t=>sv(t)).join(",");{const t=e.filters.map(n=>sv(n)).join(",");return`${e.op}(${t})`}}function vY(e,t){return e instanceof ei?function(i,s){return s instanceof ei&&i.op===s.op&&i.field.isEqual(s.field)&&ea(i.value,s.value)}(e,t):e instanceof ta?function(i,s){return s instanceof ta&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,o,a)=>r&&vY(o,s.filters[a]),!0):!1}(e,t):void ke()}function wY(e){return e instanceof ei?function(n){return`${n.field.canonicalString()} ${n.op} ${qh(n.value)}`}(e):e instanceof ta?function(n){return n.op.toString()+" {"+n.getFilters().map(wY).join(" ,")+"}"}(e):"Filter"}class owe extends ei{constructor(t,n,i){super(t,n,i),this.key=De.fromName(i.referenceValue)}matches(t){const n=De.comparator(t.key,this.key);return this.matchesComparison(n)}}class awe extends ei{constructor(t,n){super(t,"in",n),this.keys=_Y("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class lwe extends ei{constructor(t,n){super(t,"not-in",n),this.keys=_Y("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function _Y(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>De.fromName(i.referenceValue))}class cwe extends ei{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return cT(n)&&Cm(n.arrayValue,this.value)}}class uwe extends ei{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Cm(this.value.arrayValue,n)}}class dwe extends ei{constructor(t,n){super(t,"not-in",n)}matches(t){if(Cm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Cm(this.value.arrayValue,n)}}class fwe extends ei{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!cT(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Cm(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hwe{constructor(t,n=null,i=[],s=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.le=null}}function UD(e,t=null,n=[],i=[],s=null,r=null,o=null){return new hwe(e,t,n,i,s,r,o)}function uT(e){const t=tt(e);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>sv(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Up(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>qh(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>qh(i)).join(",")),t.le=n}return t.le}function dT(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!swe(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!vY(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!pD(e.startAt,t.startAt)&&pD(e.endAt,t.endAt)}function rv(e){return De.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(t,n=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function gwe(e,t,n,i,s,r,o,a){return new Uy(e,t,n,i,s,r,o,a)}function fT(e){return new Uy(e)}function bD(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function mwe(e){return e.collectionGroup!==null}function y0(e){const t=tt(e);if(t.he===null){t.he=[];const n=new Set;for(const r of t.explicitOrderBy)t.he.push(r),n.add(r.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ni(Bi.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.he.push(new I6(r,i))}),n.has(Bi.keyField().canonicalString())||t.he.push(new I6(Bi.keyField(),i))}return t.he}function Vo(e){const t=tt(e);return t.Pe||(t.Pe=pwe(t,y0(e))),t.Pe}function pwe(e,t){if(e.limitType==="F")return UD(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new I6(s.field,r)});const n=e.endAt?new S6(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new S6(e.startAt.position,e.startAt.inclusive):null;return UD(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function ov(e,t,n){return new Uy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function by(e,t){return dT(Vo(e),Vo(t))&&e.limitType===t.limitType}function TY(e){return`${uT(Vo(e))}|lt:${e.limitType}`}function yf(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>wY(s)).join(", ")}]`),Up(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>qh(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>qh(s)).join(",")),`Target(${i})`}(Vo(e))}; limitType=${e.limitType})`}function yy(e,t){return t.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):De.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(const r of y0(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(o,a,l){const c=mD(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,y0(i),s)||i.endAt&&!function(o,a,l){const c=mD(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,y0(i),s))}(e,t)}function Uwe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function SY(e){return(t,n)=>{let i=!1;for(const s of y0(e)){const r=bwe(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function bwe(e,t,n){const i=e.field.isKeyField()?De.comparator(t.key,n.key):function(r,o,a){const l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?Zh(l,c):ke()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return ke()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Vd(this.inner,(n,i)=>{for(const[s,r]of i)t(s,r)})}isEmpty(){return uY(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ywe=new Cn(De.comparator);function Xc(){return ywe}const IY=new Cn(De.comparator);function P1(...e){let t=IY;for(const n of e)t=t.insert(n.key,n);return t}function Ewe(e){let t=IY;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Ou(){return E0()}function xY(){return E0()}function E0(){return new $d(e=>e.toString(),(e,t)=>e.isEqual(t))}const vwe=new ni(De.comparator);function yt(...e){let t=vwe;for(const n of e)t=t.add(n);return t}const wwe=new ni(dt);function _we(){return wwe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:w6(t)?"-0":t}}function CY(e){return{integerValue:""+e}}function Twe(e,t){return Z9e(t)?CY(t):hT(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(){this._=void 0}}function Swe(e,t,n){return e instanceof x6?function(s,r){const o={fields:{[hY]:{stringValue:fY},[mY]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&lT(r)&&(r=py(r)),r&&(o.fields[gY]=r),{mapValue:o}}(n,t):e instanceof Am?AY(e,t):e instanceof Mm?MY(e,t):function(s,r){const o=xwe(s,r),a=yD(o)+yD(s.Ie);return iv(o)&&iv(s.Ie)?CY(a):hT(s.serializer,a)}(e,t)}function Iwe(e,t,n){return e instanceof Am?AY(e,t):e instanceof Mm?MY(e,t):n}function xwe(e,t){return e instanceof C6?function(i){return iv(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}class x6 extends Ey{}class Am extends Ey{constructor(t){super(),this.elements=t}}function AY(e,t){const n=RY(t);for(const i of e.elements)n.some(s=>ea(s,i))||n.push(i);return{arrayValue:{values:n}}}class Mm extends Ey{constructor(t){super(),this.elements=t}}function MY(e,t){let n=RY(t);for(const i of e.elements)n=n.filter(s=>!ea(s,i));return{arrayValue:{values:n}}}class C6 extends Ey{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function yD(e){return Sn(e.integerValue||e.doubleValue)}function RY(e){return cT(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function Cwe(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof Am&&s instanceof Am||i instanceof Mm&&s instanceof Mm?Kh(i.elements,s.elements,ea):i instanceof C6&&s instanceof C6?ea(i.Ie,s.Ie):i instanceof x6&&s instanceof x6}(e.transform,t.transform)}class ur{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ur}static exists(t){return new ur(void 0,t)}static updateTime(t){return new ur(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function R2(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class vy{}function kY(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new gT(e.key,ur.none()):new bp(e.key,e.data,ur.none());{const n=e.data,i=gs.empty();let s=new ni(Bi.comparator);for(let r of t.fields)if(!s.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new Gd(e.key,i,new pr(s.toArray()),ur.none())}}function Awe(e,t,n){e instanceof bp?function(s,r,o){const a=s.value.clone(),l=vD(s.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Gd?function(s,r,o){if(!R2(s.precondition,r))return void r.convertToUnknownDocument(o.version);const a=vD(s.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(DY(s)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function v0(e,t,n,i){return e instanceof bp?function(r,o,a,l){if(!R2(r.precondition,o))return a;const c=r.value.clone(),u=wD(r.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,i):e instanceof Gd?function(r,o,a,l){if(!R2(r.precondition,o))return a;const c=wD(r.fieldTransforms,l,o),u=o.data;return u.setAll(DY(r)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(d=>d.field))}(e,t,n,i):function(r,o,a){return R2(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function ED(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Kh(i,s,(r,o)=>Cwe(r,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class bp extends vy{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Gd extends vy{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function DY(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function vD(e,t,n){const i=new Map;jt(e.length===n.length);for(let s=0;s<n.length;s++){const r=e[s],o=r.transform,a=t.data.field(r.field);i.set(r.field,Iwe(o,a,n[s]))}return i}function wD(e,t,n){const i=new Map;for(const s of e){const r=s.transform,o=n.data.field(s.field);i.set(s.field,Swe(r,o,t))}return i}class gT extends vy{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LY extends vy{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mwe{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&Awe(r,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=v0(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=v0(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=xY();return this.mutations.forEach(s=>{const r=t.get(s.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(s.key)?null:a;const l=kY(o,a);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Pe.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),yt())}isEqual(t){return this.batchId===t.batchId&&Kh(this.mutations,t.mutations,(n,i)=>ED(n,i))&&Kh(this.baseMutations,t.baseMutations,(n,i)=>ED(n,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rwe{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kwe{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn,ct;function Dwe(e){switch(e){case se.OK:return ke();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return ke()}}function NY(e){if(e===void 0)return dl("GRPC error has no .code"),se.UNKNOWN;switch(e){case Rn.OK:return se.OK;case Rn.CANCELLED:return se.CANCELLED;case Rn.UNKNOWN:return se.UNKNOWN;case Rn.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Rn.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Rn.INTERNAL:return se.INTERNAL;case Rn.UNAVAILABLE:return se.UNAVAILABLE;case Rn.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Rn.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Rn.NOT_FOUND:return se.NOT_FOUND;case Rn.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Rn.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Rn.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Rn.ABORTED:return se.ABORTED;case Rn.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Rn.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Rn.DATA_LOSS:return se.DATA_LOSS;default:return ke()}}(ct=Rn||(Rn={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lwe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nwe=new vc([4294967295,4294967295],0);function _D(e){const t=Lwe().encode(e),n=new tY;return n.update(t),new Uint8Array(n.digest())}function TD(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new vc([n,i],0),new vc([s,r],0)]}class mT{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new F1(`Invalid padding: ${n}`);if(i<0)throw new F1(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new F1(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new F1(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*t.length-n,this.de=vc.fromNumber(this.Ee)}Ae(t,n,i){let s=t.add(n.multiply(vc.fromNumber(i)));return s.compare(Nwe)===1&&(s=new vc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const n=_D(t),[i,s]=TD(n);for(let r=0;r<this.hashCount;r++){const o=this.Ae(i,s,r);if(!this.Re(o))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new mT(r,s,n);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.Ee===0)return;const n=_D(t),[i,s]=TD(n);for(let r=0;r<this.hashCount;r++){const o=this.Ae(i,s,r);this.Ve(o)}}Ve(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class F1 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,yp.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new wy(Pe.min(),s,new Cn(dt),Xc(),yt())}}class yp{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new yp(i,n,yt(),yt(),yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(t,n,i,s){this.me=t,this.removedTargetIds=n,this.key=i,this.fe=s}}class OY{constructor(t,n){this.targetId=t,this.ge=n}}class PY{constructor(t,n,i=xi.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class SD{constructor(){this.pe=0,this.ye=ID(),this.we=xi.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=yt(),n=yt(),i=yt();return this.ye.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:ke()}}),new yp(this.we,this.Se,t,n,i)}Me(){this.be=!1,this.ye=ID()}xe(t,n){this.be=!0,this.ye=this.ye.insert(t,n)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,jt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class Owe{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Xc(),this.$e=PU(),this.Ke=PU(),this.Ue=new Cn(dt)}We(t){for(const n of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(n,t.fe):this.ze(n,t.key,t.fe);for(const n of t.removedTargetIds)this.ze(n,t.key,t.fe)}je(t){this.forEachTarget(t,n=>{const i=this.He(n);switch(t.state){case 0:this.Je(n)&&i.Ce(t.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(t.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(n);break;case 3:this.Je(n)&&(i.Le(),i.Ce(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),i.Ce(t.resumeToken));break;default:ke()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.qe.forEach((i,s)=>{this.Je(s)&&n(s)})}Ze(t){const n=t.targetId,i=t.ge.count,s=this.Xe(n);if(s){const r=s.target;if(rv(r))if(i===0){const o=new De(r.path);this.ze(n,o,di.newNoDocument(o,Pe.min()))}else jt(i===1);else{const o=this.et(n);if(o!==i){const a=this.tt(t),l=a?this.nt(a,t,o):1;if(l!==0){this.Ye(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,c)}}}}}tt(t){const n=t.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let o,a;try{o=$c(i).toUint8Array()}catch(l){if(l instanceof dY)return Wh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new mT(o,s,r)}catch(l){return Wh(l instanceof F1?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(t,n,i){return n.ge.count===i-this.st(t,n.targetId)?0:2}st(t,n){const i=this.ke.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.ze(n,r,null),s++)}),s}ot(t){const n=new Map;this.qe.forEach((r,o)=>{const a=this.Xe(o);if(a){if(r.current&&rv(a.target)){const l=new De(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,di.newNoDocument(l,t))}r.ve&&(n.set(o,r.Fe()),r.Me())}});let i=yt();this.Ke.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(r))}),this.Qe.forEach((r,o)=>o.setReadTime(t));const s=new wy(t,n,this.Ue,this.Qe,i);return this.Qe=Xc(),this.$e=PU(),this.Ke=PU(),this.Ue=new Cn(dt),s}Ge(t,n){if(!this.Je(t))return;const i=this.ut(t,n.key)?2:0;this.He(t).xe(n.key,i),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(t))}ze(t,n,i){if(!this.Je(t))return;const s=this.He(t);this.ut(t,n)?s.xe(n,1):s.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(t)),this.Ke=this.Ke.insert(n,this.ct(n).add(t)),i&&(this.Qe=this.Qe.insert(n,i))}removeTarget(t){this.qe.delete(t)}et(t){const n=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let n=this.qe.get(t);return n||(n=new SD,this.qe.set(t,n)),n}ct(t){let n=this.Ke.get(t);return n||(n=new ni(dt),this.Ke=this.Ke.insert(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new ni(dt),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.qe.get(t);return n&&n.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new SD),this.ke.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ut(t,n){return this.ke.getRemoteKeysForTarget(t).has(n)}}function PU(){return new Cn(De.comparator)}function ID(){return new Cn(De.comparator)}const Pwe={asc:"ASCENDING",desc:"DESCENDING"},Fwe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bwe={and:"AND",or:"OR"};class zwe{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function av(e,t){return e.useProto3Json||Up(t)?t:{value:t}}function A6(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function FY(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Hwe(e,t){return A6(e,t.toTimestamp())}function Ya(e){return jt(!!e),Pe.fromTimestamp(function(n){const i=Vc(n);return new mi(i.seconds,i.nanos)}(e))}function pT(e,t){return lv(e,t).canonicalString()}function lv(e,t){const n=function(s){return new ln(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function BY(e){const t=ln.fromString(e);return jt(GY(t)),t}function M6(e,t){return pT(e.databaseId,t.path)}function w0(e,t){const n=BY(t);if(n.get(1)!==e.databaseId.projectId)throw new Se(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Se(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new De(HY(n))}function zY(e,t){return pT(e.databaseId,t)}function Vwe(e){const t=BY(e);return t.length===4?ln.emptyPath():HY(t)}function xD(e){return new ln(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function HY(e){return jt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function CD(e,t,n){return{name:M6(e,t),fields:n.value.mapValue.fields}}function $we(e,t){return"found"in t?function(i,s){jt(!!s.found),s.found.name,s.found.updateTime;const r=w0(i,s.found.name),o=Ya(s.found.updateTime),a=s.found.createTime?Ya(s.found.createTime):Pe.min(),l=new gs({mapValue:{fields:s.found.fields}});return di.newFoundDocument(r,o,a,l)}(e,t):"missing"in t?function(i,s){jt(!!s.missing),jt(!!s.readTime);const r=w0(i,s.missing),o=Ya(s.readTime);return di.newNoDocument(r,o)}(e,t):ke()}function Gwe(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ke()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(c,u){return c.useProto3Json?(jt(u===void 0||typeof u=="string"),xi.fromBase64String(u||"")):(jt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),xi.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?se.UNKNOWN:NY(c.code);return new Se(u,c.message||"")}(o);n=new PY(i,s,r,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=w0(e,i.document.name),r=Ya(i.document.updateTime),o=i.document.createTime?Ya(i.document.createTime):Pe.min(),a=new gs({mapValue:{fields:i.document.fields}}),l=di.newFoundDocument(s,r,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new k2(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=w0(e,i.document),r=i.readTime?Ya(i.readTime):Pe.min(),o=di.newNoDocument(s,r),a=i.removedTargetIds||[];n=new k2([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=w0(e,i.document),r=i.removedTargetIds||[];n=new k2([],r,s,null)}else{if(!("filter"in t))return ke();{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,o=new kwe(s,r),a=i.targetId;n=new OY(a,o)}}return n}function Xwe(e,t){let n;if(t instanceof bp)n={update:CD(e,t.key,t.value)};else if(t instanceof gT)n={delete:M6(e,t.key)};else if(t instanceof Gd)n={update:CD(e,t.key,t.data),updateMask:Jwe(t.fieldMask)};else{if(!(t instanceof LY))return ke();n={verify:M6(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,o){const a=o.transform;if(a instanceof x6)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Am)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Mm)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof C6)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw ke()}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:Hwe(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:ke()}(e,t.precondition)),n}function jwe(e,t){return{documents:[zY(e,t.path)]}}function Ywe(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=zY(e,s);const r=function(c){if(c.length!==0)return $Y(ta.create(c,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:Ef(f.field),direction:Zwe(f.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=av(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{ht:n,parent:s}}function Wwe(e){let t=Vwe(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){jt(i===1);const u=n.from[0];u.allDescendants?s=u.collectionId:t=t.child(u.collectionId)}let r=[];n.where&&(r=function(d){const f=VY(d);return f instanceof ta&&EY(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(m){return new I6(vf(m.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Up(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,h=d.values||[];return new S6(h,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,h=d.values||[];return new S6(h,f)}(n.endAt)),gwe(t,s,o,r,a,"F",l,c)}function Kwe(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function VY(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=vf(n.unaryFilter.field);return ei.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=vf(n.unaryFilter.field);return ei.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=vf(n.unaryFilter.field);return ei.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=vf(n.unaryFilter.field);return ei.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ke()}}(e):e.fieldFilter!==void 0?function(n){return ei.create(vf(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ke()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return ta.create(n.compositeFilter.filters.map(i=>VY(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ke()}}(n.compositeFilter.op))}(e):ke()}function Zwe(e){return Pwe[e]}function qwe(e){return Fwe[e]}function Qwe(e){return Bwe[e]}function Ef(e){return{fieldPath:e.canonicalString()}}function vf(e){return Bi.fromServerFormat(e.fieldPath)}function $Y(e){return e instanceof ei?function(n){if(n.op==="=="){if(gD(n.value))return{unaryFilter:{field:Ef(n.field),op:"IS_NAN"}};if(hD(n.value))return{unaryFilter:{field:Ef(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gD(n.value))return{unaryFilter:{field:Ef(n.field),op:"IS_NOT_NAN"}};if(hD(n.value))return{unaryFilter:{field:Ef(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ef(n.field),op:qwe(n.op),value:n.value}}}(e):e instanceof ta?function(n){const i=n.getFilters().map(s=>$Y(s));return i.length===1?i[0]:{compositeFilter:{op:Qwe(n.op),filters:i}}}(e):ke()}function Jwe(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function GY(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(t,n,i,s,r=Pe.min(),o=Pe.min(),a=xi.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new nc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_e{constructor(t){this.Tt=t}}function t_e(e){const t=Wwe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?ov(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_e{constructor(){this.Tn=new i_e}addToCollectionParentIndex(t,n){return this.Tn.add(n),ne.resolve()}getCollectionParents(t,n){return ne.resolve(this.Tn.getEntries(n))}addFieldIndex(t,n){return ne.resolve()}deleteFieldIndex(t,n){return ne.resolve()}deleteAllFieldIndexes(t){return ne.resolve()}createTargetIndexes(t,n){return ne.resolve()}getDocumentsMatchingTarget(t,n){return ne.resolve(null)}getIndexType(t,n){return ne.resolve(0)}getFieldIndexes(t,n){return ne.resolve([])}getNextCollectionGroupToUpdate(t){return ne.resolve(null)}getMinOffset(t,n){return ne.resolve(Hc.min())}getMinOffsetFromCollectionGroup(t,n){return ne.resolve(Hc.min())}updateCollectionGroup(t,n,i){return ne.resolve()}updateIndexEntries(t,n){return ne.resolve()}}class i_e{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new ni(ln.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new ni(ln.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XY=41943040;class hs{static withCacheSize(t){return new hs(t,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hs.DEFAULT_COLLECTION_PERCENTILE=10,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hs.DEFAULT=new hs(XY,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hs.DISABLED=new hs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new Qh(0)}static Un(){return new Qh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="LruGarbageCollector",s_e=1048576;function RD([e,t],[n,i]){const s=dt(e,n);return s===0?dt(t,i):s}class r_e{constructor(t){this.Hn=t,this.buffer=new ni(RD),this.Jn=0}Yn(){return++this.Jn}Zn(t){const n=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();RD(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class o_e{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){ve(MD,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){wg(n)?ve(MD,"Ignoring IndexedDB error during garbage collection: ",n):await gy(n)}await this.er(3e5)})}}class a_e{constructor(t,n){this.tr=t,this.params=n}calculateTargetCount(t,n){return this.tr.nr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return ne.resolve(my.ae);const i=new r_e(n);return this.tr.forEachTarget(t,s=>i.Zn(s.sequenceNumber)).next(()=>this.tr.rr(t,s=>i.Zn(s))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.tr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.tr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(AD)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AD):this.ir(t,n))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,n){let i,s,r,o,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(t,s))).next(d=>(i=d,a=Date.now(),this.removeTargets(t,i,n))).next(d=>(r=d,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(d=>(c=Date.now(),bf()<=ut.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:d})))}}function l_e(e,t){return new a_e(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_e{constructor(){this.changes=new $d(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,di.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ne.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_e{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_e{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&v0(i.mutation,s,pr.empty(),mi.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,yt()).next(()=>i))}getLocalViewOfDocuments(t,n,i=yt()){const s=Ou();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let o=P1();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const i=Ou();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,yt()))}populateOverlays(t,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,i,s){let r=Xc();const o=E0(),a=function(){return E0()}();return n.forEach((l,c)=>{const u=i.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Gd)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),v0(u.mutation,c,u.mutation.getFieldMask(),mi.now())):o.set(c.key,pr.empty())}),this.recalculateAndSaveOverlays(t,r).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new u_e(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){const i=E0();let s=new Cn((o,a)=>o-a),r=yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=i.get(l)||pr.empty();u=a.applyToLocalView(c,u),i.set(l,u);const d=(s.get(a.batchId)||yt()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=xY();u.forEach(f=>{if(!r.has(f)){const h=kY(n.get(f),i.get(f));h!==null&&d.set(f,h),r=r.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,d))}return ne.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(o){return De.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):mwe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):ne.resolve(Ou());let a=Sm,l=r;return o.next(c=>ne.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),r.get(u)?ne.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,r)).next(()=>this.computeViews(t,l,c,yt())).next(u=>({batchId:a,changes:Ewe(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new De(n)).next(i=>{let s=P1();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const r=n.collectionGroup;let o=P1();return this.indexManager.getCollectionParents(t,r).next(a=>ne.forEach(a,l=>{const c=function(d,f){return new Uy(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,c,i,s).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(o=>{r.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,di.newInvalidDocument(u)))});let a=P1();return o.forEach((l,c)=>{const u=r.get(l);u!==void 0&&v0(u.mutation,c,pr.empty(),mi.now()),yy(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_e{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,n){return ne.resolve(this.dr.get(n))}saveBundleMetadata(t,n){return this.dr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ya(s.createTime)}}(n)),ne.resolve()}getNamedQuery(t,n){return ne.resolve(this.Ar.get(n))}saveNamedQuery(t,n){return this.Ar.set(n.name,function(s){return{name:s.name,query:t_e(s.bundledQuery),readTime:Ya(s.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_e{constructor(){this.overlays=new Cn(De.comparator),this.Rr=new Map}getOverlay(t,n){return ne.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Ou();return ne.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.Et(t,n,r)}),ne.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.Rr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.Rr.delete(i)),ne.resolve()}getOverlaysForCollection(t,n,i){const s=Ou(),r=n.length+1,o=new De(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return ne.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new Cn((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=r.get(c.largestBatchId);u===null&&(u=Ou(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Ou(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return ne.resolve(a)}Et(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.Rr.get(s.largestBatchId).delete(i.key);this.Rr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Rwe(n,i));let r=this.Rr.get(n);r===void 0&&(r=yt(),this.Rr.set(n,r)),this.Rr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_e{constructor(){this.sessionToken=xi.EMPTY_BYTE_STRING}getSessionToken(t){return ne.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this.Vr=new ni(li.mr),this.gr=new ni(li.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,n){const i=new li(t,n);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.wr(new li(t,n))}Sr(t,n){t.forEach(i=>this.removeReference(i,n))}br(t){const n=new De(new ln([])),i=new li(n,t),s=new li(n,t+1),r=[];return this.gr.forEachInRange([i,s],o=>{this.wr(o),r.push(o.key)}),r}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const n=new De(new ln([])),i=new li(n,t),s=new li(n,t+1);let r=yt();return this.gr.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(t){const n=new li(t,0),i=this.Vr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class li{constructor(t,n){this.key=t,this.Cr=n}static mr(t,n){return De.comparator(t.key,n.key)||dt(t.Cr,n.Cr)}static pr(t,n){return dt(t.Cr,n.Cr)||De.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_e{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new ni(li.mr)}checkEmpty(t){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const r=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Mwe(r,n,i,s);this.mutationQueue.push(o);for(const a of s)this.Mr=this.Mr.add(new li(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return ne.resolve(o)}lookupMutationBatch(t,n){return ne.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.Nr(i),r=s<0?0:s;return ne.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?K9e:this.Fr-1)}getAllMutationBatches(t){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new li(n,0),s=new li(n,Number.POSITIVE_INFINITY),r=[];return this.Mr.forEachInRange([i,s],o=>{const a=this.Or(o.Cr);r.push(a)}),ne.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new ni(dt);return n.forEach(s=>{const r=new li(s,0),o=new li(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([r,o],a=>{i=i.add(a.Cr)})}),ne.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let r=i;De.isDocumentKey(r)||(r=r.child(""));const o=new li(new De(r),0);let a=new ni(dt);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Cr)),!0)},o),ne.resolve(this.Br(a))}Br(t){const n=[];return t.forEach(i=>{const s=this.Or(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){jt(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return ne.forEach(n.mutations,s=>{const r=new li(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Mr=i})}qn(t){}containsKey(t,n){const i=new li(n,0),s=this.Mr.firstAfterOrEqual(i);return ne.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,ne.resolve()}Lr(t,n){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const n=this.Nr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_e{constructor(t){this.kr=t,this.docs=function(){return new Cn(De.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,o=this.kr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return ne.resolve(i?i.document.mutableCopy():di.newInvalidDocument(n))}getEntries(t,n){let i=Xc();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():di.newInvalidDocument(s))}),ne.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=Xc();const o=n.path,a=new De(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||X9e(G9e(u),i)<=0||(s.has(u.key)||yy(n,u))&&(r=r.insert(u.key,u.mutableCopy()))}return ne.resolve(r)}getAllFromCollectionGroup(t,n,i,s){ke()}qr(t,n){return ne.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new U_e(this)}getSize(t){return ne.resolve(this.size)}}class U_e extends c_e{constructor(t){super(),this.Ir=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Ir.addEntry(t,s)):this.Ir.removeEntry(i)}),ne.waitFor(n)}getFromCache(t,n){return this.Ir.getEntry(t,n)}getAllFromCache(t,n){return this.Ir.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_e{constructor(t){this.persistence=t,this.Qr=new $d(n=>uT(n),dT),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.$r=0,this.Kr=new UT,this.targetCount=0,this.Ur=Qh.Kn()}forEachTarget(t,n){return this.Qr.forEach((i,s)=>n(s)),ne.resolve()}getLastRemoteSnapshotVersion(t){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ne.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.$r&&(this.$r=n),ne.resolve()}zn(t){this.Qr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Ur=new Qh(n),this.highestTargetId=n),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,n){return this.zn(n),this.targetCount+=1,ne.resolve()}updateTargetData(t,n){return this.zn(n),ne.resolve()}removeTargetData(t,n){return this.Qr.delete(n.target),this.Kr.br(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(t,n,i){let s=0;const r=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Qr.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),ne.waitFor(r).next(()=>s)}getTargetCount(t){return ne.resolve(this.targetCount)}getTargetData(t,n){const i=this.Qr.get(n)||null;return ne.resolve(i)}addMatchingKeys(t,n,i){return this.Kr.yr(n,i),ne.resolve()}removeMatchingKeys(t,n,i){this.Kr.Sr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(o=>{r.push(s.markPotentiallyOrphaned(t,o))}),ne.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this.Kr.br(n),ne.resolve()}getMatchingKeysForTargetId(t,n){const i=this.Kr.vr(n);return ne.resolve(i)}containsKey(t,n){return ne.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jY{constructor(t,n){this.Wr={},this.overlays={},this.Gr=new my(0),this.zr=!1,this.zr=!0,this.jr=new g_e,this.referenceDelegate=t(this),this.Hr=new b_e(this),this.indexManager=new n_e,this.remoteDocumentCache=function(s){return new p_e(s)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new e_e(n),this.Yr=new f_e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new h_e,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.Wr[t.toKey()];return i||(i=new m_e(n,this.referenceDelegate),this.Wr[t.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,n,i){ve("MemoryPersistence","Starting transaction:",t);const s=new y_e(this.Gr.next());return this.referenceDelegate.Zr(),i(s).next(r=>this.referenceDelegate.Xr(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}ei(t,n){return ne.or(Object.values(this.Wr).map(i=>()=>i.containsKey(t,n)))}}class y_e extends Y9e{constructor(t){super(),this.currentSequenceNumber=t}}class bT{constructor(t){this.persistence=t,this.ti=new UT,this.ni=null}static ri(t){return new bT(t)}get ii(){if(this.ni)return this.ni;throw ke()}addReference(t,n,i){return this.ti.addReference(i,n),this.ii.delete(i.toString()),ne.resolve()}removeReference(t,n,i){return this.ti.removeReference(i,n),this.ii.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(t,n){return this.ii.add(n.toString()),ne.resolve()}removeTarget(t,n){this.ti.br(n.targetId).forEach(s=>this.ii.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.ii.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}Zr(){this.ni=new Set}Xr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ii,i=>{const s=De.fromPath(i);return this.si(t,s).next(r=>{r||n.removeEntry(s,Pe.min())})}).next(()=>(this.ni=null,n.apply(t)))}updateLimboDocument(t,n){return this.si(t,n).next(i=>{i?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(t){return 0}si(t,n){return ne.or([()=>ne.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.ei(t,n)])}}class R6{constructor(t,n){this.persistence=t,this.oi=new $d(i=>q9e(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=l_e(this,n)}static ri(t,n){return new R6(t,n)}Zr(){}Xr(t){return ne.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}nr(t){const n=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(s=>i+s))}sr(t){let n=0;return this.rr(t,i=>{n++}).next(()=>n)}rr(t,n){return ne.forEach(this.oi,(i,s)=>this.ar(t,i,s).next(r=>r?ne.resolve():n(s)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.qr(t,o=>this.ar(t,o,n).next(a=>{a||(i++,r.removeEntry(o,Pe.min()))})).next(()=>r.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.oi.set(n,t.currentSequenceNumber),ne.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),ne.resolve()}removeReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),ne.resolve()}updateLimboDocument(t,n){return this.oi.set(n,t.currentSequenceNumber),ne.resolve()}Jr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=M2(t.data.value)),n}ar(t,n,i){return ne.or([()=>this.persistence.ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.oi.get(n);return ne.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.Hi=i,this.Ji=s}static Yi(t,n){let i=yt(),s=yt();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new yT(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_e{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return yve()?8:W9e(Uve())>0?6:4}()}initialize(t,n){this.ns=t,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(t,n,i,s){const r={result:null};return this.rs(t,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.ss(t,n,s,i).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new E_e;return this._s(t,n,o).next(a=>{if(r.result=a,this.Xi)return this.us(t,n,o,a.size)})}).next(()=>r.result)}us(t,n,i,s){return i.documentReadCount<this.es?(bf()<=ut.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",yf(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ne.resolve()):(bf()<=ut.DEBUG&&ve("QueryEngine","Query:",yf(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ts*s?(bf()<=ut.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",yf(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Vo(n))):ne.resolve())}rs(t,n){if(bD(n))return ne.resolve(null);let i=Vo(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ov(n,null,"F"),i=Vo(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const o=yt(...r);return this.ns.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const c=this.cs(n,a);return this.ls(n,c,o,l.readTime)?this.rs(t,ov(n,null,"F")):this.hs(t,c,n,l)}))})))}ss(t,n,i,s){return bD(n)||s.isEqual(Pe.min())?ne.resolve(null):this.ns.getDocuments(t,i).next(r=>{const o=this.cs(n,r);return this.ls(n,o,i,s)?ne.resolve(null):(bf()<=ut.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yf(n)),this.hs(t,o,n,$9e(s,Sm)).next(a=>a))})}cs(t,n){let i=new ni(SY(t));return n.forEach((s,r)=>{yy(t,r)&&(i=i.add(r))}),i}ls(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}_s(t,n,i){return bf()<=ut.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",yf(n)),this.ns.getDocumentsMatchingQuery(t,n,Hc.min(),i)}hs(t,n,i,s){return this.ns.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="LocalStore",w_e=3e8;class __e{constructor(t,n,i,s){this.persistence=t,this.Ps=n,this.serializer=s,this.Ts=new Cn(dt),this.Is=new $d(r=>uT(r),dT),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(i)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new d_e(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ts))}}function T_e(e,t,n,i){return new __e(e,t,n,i)}async function YY(e,t){const n=tt(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.As(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],a=[];let l=yt();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of r){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function WY(e){const t=tt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Hr.getLastRemoteSnapshotVersion(n))}function S_e(e,t){const n=tt(e),i=t.snapshotVersion;let s=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});s=n.Ts;const a=[];t.targetChanges.forEach((u,d)=>{const f=s.get(d);if(!f)return;a.push(n.Hr.removeMatchingKeys(r,u.removedDocuments,d).next(()=>n.Hr.addMatchingKeys(r,u.addedDocuments,d)));let h=f.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(d)!==null?h=h.withResumeToken(xi.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):u.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(u.resumeToken,i)),s=s.insert(d,h),function(p,U,y){return p.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=w_e?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,h,u)&&a.push(n.Hr.updateTargetData(r,h))});let l=Xc(),c=yt();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(I_e(r,o,t.documentUpdates).next(u=>{l=u.Vs,c=u.fs})),!i.isEqual(Pe.min())){const u=n.Hr.getLastRemoteSnapshotVersion(r).next(d=>n.Hr.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(u)}return ne.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(n.Ts=s,r))}function I_e(e,t,n){let i=yt(),s=yt();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let o=Xc();return n.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Pe.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):ve(ET,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Vs:o,fs:s}})}function x_e(e,t){const n=tt(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Hr.getTargetData(i,t).next(r=>r?(s=r,ne.resolve(s)):n.Hr.allocateTargetId(i).next(o=>(s=new nc(t,o,"TargetPurposeListen",i.currentSequenceNumber),n.Hr.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ts.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(i.targetId,i),n.Is.set(t,i.targetId)),i})}async function cv(e,t,n){const i=tt(e),s=i.Ts.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!wg(o))throw o;ve(ET,`Failed to update sequence numbers for target ${t}: ${o}`)}i.Ts=i.Ts.remove(t),i.Is.delete(s.target)}function kD(e,t,n){const i=tt(e);let s=Pe.min(),r=yt();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=tt(l),f=d.Is.get(u);return f!==void 0?ne.resolve(d.Ts.get(f)):d.Hr.getTargetData(c,u)}(i,o,Vo(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>i.Ps.getDocumentsMatchingQuery(o,t,n?s:Pe.min(),n?r:yt())).next(a=>(C_e(i,Uwe(t),a),{documents:a,gs:r})))}function C_e(e,t,n){let i=e.Es.get(t)||Pe.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e.Es.set(t,i)}class DD{constructor(){this.activeTargetIds=_we()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class A_e{constructor(){this.ho=new DD,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,n,i){this.Po[t]=n}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new DD,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_e{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="ConnectivityMonitor";class ND{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ve(LD,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){ve(LD,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FU=null;function uv(){return FU===null?FU=function(){return 268435456+Math.round(2147483648*Math.random())}():FU++,"0x"+FU.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7="RestConnection",R_e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class k_e{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database===_6?`project_id=${i}`:`project_id=${i}&database_id=${s}`}So(t,n,i,s,r){const o=uv(),a=this.bo(t,n.toUriEncodedString());ve(r7,`Sending RPC '${t}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,s,r),this.vo(t,a,l,i).then(c=>(ve(r7,`Received RPC '${t}' ${o}: `,c),c),c=>{throw Wh(r7,`RPC '${t}' ${o} failed with error: `,c,"url: ",a,"request:",i),c})}Co(t,n,i,s,r,o){return this.So(t,n,i,s,r)}Do(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vg}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>t[r]=s),i&&i.headers.forEach((s,r)=>t[r]=s)}bo(t,n){const i=R_e[t];return`${this.po}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_e{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki="WebChannelConnection";class L_e extends k_e{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,i,s){const r=uv();return new Promise((o,a)=>{const l=new nY;l.setWithCredentials(!0),l.listenOnce(iY.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case A2.NO_ERROR:const u=l.getResponseJson();ve(ki,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(u)),o(u);break;case A2.TIMEOUT:ve(ki,`RPC '${t}' ${r} timed out`),a(new Se(se.DEADLINE_EXCEEDED,"Request time out"));break;case A2.HTTP_ERROR:const d=l.getStatus();if(ve(ki,`RPC '${t}' ${r} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const m=function(U){const y=U.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(y)>=0?y:se.UNKNOWN}(h.status);a(new Se(m,h.message))}else a(new Se(se.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Se(se.UNAVAILABLE,"Connection failed."));break;default:ke()}}finally{ve(ki,`RPC '${t}' ${r} completed.`)}});const c=JSON.stringify(s);ve(ki,`RPC '${t}' ${r} sending request:`,s),l.send(n,"POST",c,i,15)})}Wo(t,n,i){const s=uv(),r=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=oY(),a=rY(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const u=r.join("");ve(ki,`Creating RPC '${t}' stream ${s}: ${u}`,l);const d=o.createWebChannel(u,l);let f=!1,h=!1;const m=new D_e({Fo:U=>{h?ve(ki,`Not sending because RPC '${t}' stream ${s} is closed:`,U):(f||(ve(ki,`Opening RPC '${t}' stream ${s} transport.`),d.open(),f=!0),ve(ki,`RPC '${t}' stream ${s} sending:`,U),d.send(U))},Mo:()=>d.close()}),p=(U,y,E)=>{U.listen(y,v=>{try{E(v)}catch(w){setTimeout(()=>{throw w},0)}})};return p(d,O1.EventType.OPEN,()=>{h||(ve(ki,`RPC '${t}' stream ${s} transport opened.`),m.Qo())}),p(d,O1.EventType.CLOSE,()=>{h||(h=!0,ve(ki,`RPC '${t}' stream ${s} transport closed`),m.Ko())}),p(d,O1.EventType.ERROR,U=>{h||(h=!0,Wh(ki,`RPC '${t}' stream ${s} transport errored:`,U),m.Ko(new Se(se.UNAVAILABLE,"The operation could not be completed")))}),p(d,O1.EventType.MESSAGE,U=>{var y;if(!h){const E=U.data[0];jt(!!E);const v=E,w=(v==null?void 0:v.error)||((y=v[0])===null||y===void 0?void 0:y.error);if(w){ve(ki,`RPC '${t}' stream ${s} received error:`,w);const I=w.status;let M=function(x){const C=Rn[x];if(C!==void 0)return NY(C)}(I),T=w.message;M===void 0&&(M=se.INTERNAL,T="Unknown error status: "+I+" with message "+w.message),h=!0,m.Ko(new Se(M,T)),d.close()}else ve(ki,`RPC '${t}' stream ${s} received:`,E),m.Uo(E)}}),p(a,sY.STAT_EVENT,U=>{U.stat===tv.PROXY?ve(ki,`RPC '${t}' stream ${s} detected buffering proxy`):U.stat===tv.NOPROXY&&ve(ki,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{m.$o()},0),m}}function o7(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(e){return new zwe(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(t,n,i=1e3,s=1.5,r=6e4){this.Ti=t,this.timerId=n,this.Go=i,this.zo=s,this.jo=r,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const n=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),s=Math.max(0,n-i);s>0&&ve("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD="PersistentStream";class N_e{constructor(t,n,i,s,r,o,a,l){this.Ti=t,this.n_=i,this.r_=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new vT(t,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(dl(n.toString()),dl("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.i_===n&&this.V_(i,s)},i=>{t(()=>{const s=new Se(se.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(s)})})}V_(t,n){const i=this.R_(this.i_);this.stream=this.f_(t,n),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{i(()=>this.m_(s))}),this.stream.onMessage(s=>{i(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return ve(OD,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return n=>{this.Ti.enqueueAndForget(()=>this.i_===t?n():(ve(OD,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class O_e extends N_e{constructor(t,n,i,s,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}f_(t,n){return this.connection.Wo("Listen",t,n)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const n=Gwe(this.serializer,t),i=function(r){if(!("targetChange"in r))return Pe.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?Pe.min():o.readTime?Ya(o.readTime):Pe.min()}(t);return this.listener.p_(n,i)}y_(t){const n={};n.database=xD(this.serializer),n.addTarget=function(r,o){let a;const l=o.target;if(a=rv(l)?{documents:jwe(r,l)}:{query:Ywe(r,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=FY(r,o.resumeToken);const c=av(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Pe.min())>0){a.readTime=A6(r,o.snapshotVersion.toTimestamp());const c=av(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const i=Kwe(this.serializer,t);i&&(n.labels=i),this.I_(n)}w_(t){const n={};n.database=xD(this.serializer),n.removeTarget=t,this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_e{}class F_e extends P_e{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new Se(se.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.So(t,lv(n,i),s,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Se(se.UNKNOWN,r.toString())})}Co(t,n,i,s,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(t,lv(n,i),s,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(se.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class B_e{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(dl(n),this.N_=!1):ve("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="RemoteStore";class z_e{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=r,this.z_.To(o=>{i.enqueueAndForget(async()=>{vp(this)&&(ve(Jh,"Restarting streams for network reachability change."),await async function(l){const c=tt(l);c.W_.add(4),await Ep(c),c.j_.set("Unknown"),c.W_.delete(4),await Ty(c)}(this))})}),this.j_=new B_e(i,s)}}async function Ty(e){if(vp(e))for(const t of e.G_)await t(!0)}async function Ep(e){for(const t of e.G_)await t(!1)}function KY(e,t){const n=tt(e);n.U_.has(t.targetId)||(n.U_.set(t.targetId,t),ST(n)?TT(n):_g(n).c_()&&_T(n,t))}function wT(e,t){const n=tt(e),i=_g(n);n.U_.delete(t),i.c_()&&ZY(n,t),n.U_.size===0&&(i.c_()?i.P_():vp(n)&&n.j_.set("Unknown"))}function _T(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Pe.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}_g(e).y_(t)}function ZY(e,t){e.H_.Ne(t),_g(e).w_(t)}function TT(e){e.H_=new Owe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.U_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),_g(e).start(),e.j_.B_()}function ST(e){return vp(e)&&!_g(e).u_()&&e.U_.size>0}function vp(e){return tt(e).W_.size===0}function qY(e){e.H_=void 0}async function H_e(e){e.j_.set("Online")}async function V_e(e){e.U_.forEach((t,n)=>{_T(e,t)})}async function $_e(e,t){qY(e),ST(e)?(e.j_.q_(t),TT(e)):e.j_.set("Unknown")}async function G_e(e,t,n){if(e.j_.set("Online"),t instanceof PY&&t.state===2&&t.cause)try{await async function(s,r){const o=r.cause;for(const a of r.targetIds)s.U_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.U_.delete(a),s.H_.removeTarget(a))}(e,t)}catch(i){ve(Jh,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await PD(e,i)}else if(t instanceof k2?e.H_.We(t):t instanceof OY?e.H_.Ze(t):e.H_.je(t),!n.isEqual(Pe.min()))try{const i=await WY(e.localStore);n.compareTo(i)>=0&&await function(r,o){const a=r.H_.ot(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=r.U_.get(c);u&&r.U_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=r.U_.get(l);if(!u)return;r.U_.set(l,u.withResumeToken(xi.EMPTY_BYTE_STRING,u.snapshotVersion)),ZY(r,l);const d=new nc(u.target,l,c,u.sequenceNumber);_T(r,d)}),r.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(i){ve(Jh,"Failed to raise snapshot:",i),await PD(e,i)}}async function PD(e,t,n){if(!wg(t))throw t;e.W_.add(1),await Ep(e),e.j_.set("Offline"),n||(n=()=>WY(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ve(Jh,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await Ty(e)})}async function FD(e,t){const n=tt(e);n.asyncQueue.verifyOperationInProgress(),ve(Jh,"RemoteStore received new credentials");const i=vp(n);n.W_.add(3),await Ep(n),i&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await Ty(n)}async function X_e(e,t){const n=tt(e);t?(n.W_.delete(2),await Ty(n)):t||(n.W_.add(2),await Ep(n),n.j_.set("Unknown"))}function _g(e){return e.J_||(e.J_=function(n,i,s){const r=tt(n);return r.M_(),new O_e(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{xo:H_e.bind(null,e),No:V_e.bind(null,e),Lo:$_e.bind(null,e),p_:G_e.bind(null,e)}),e.G_.push(async t=>{t?(e.J_.h_(),ST(e)?TT(e):e.j_.set("Unknown")):(await e.J_.stop(),qY(e))})),e.J_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new wc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){const o=Date.now()+i,a=new IT(t,n,o,s,r);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(se.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function QY(e,t){if(dl("AsyncQueue",`${t}: ${e}`),wg(e))return new Se(se.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{static emptySet(t){return new fh(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||De.comparator(n.key,i.key):(n,i)=>De.comparator(n.key,i.key),this.keyedMap=P1(),this.sortedSet=new Cn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof fh)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new fh;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(){this.Z_=new Cn(De.comparator)}track(t){const n=t.doc.key,i=this.Z_.get(n);i?t.type!==0&&i.type===3?this.Z_=this.Z_.insert(n,t):t.type===3&&i.type!==1?this.Z_=this.Z_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.Z_=this.Z_.remove(n):t.type===1&&i.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):ke():this.Z_=this.Z_.insert(n,t)}X_(){const t=[];return this.Z_.inorderTraversal((n,i)=>{t.push(i)}),t}}class eg{constructor(t,n,i,s,r,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,i,s,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new eg(t,n,fh.emptySet(n),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&by(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_e{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class Y_e{constructor(){this.queries=zD(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,i){const s=tt(n),r=s.queries;s.queries=zD(),r.forEach((o,a)=>{for(const l of a.ta)l.onError(i)})})(this,new Se(se.ABORTED,"Firestore shutting down"))}}function zD(){return new $d(e=>TY(e),by)}async function W_e(e,t){const n=tt(e);let i=3;const s=t.query;let r=n.queries.get(s);r?!r.na()&&t.ra()&&(i=2):(r=new j_e,i=t.ra()?0:1);try{switch(i){case 0:r.ea=await n.onListen(s,!0);break;case 1:r.ea=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=QY(o,`Initialization of query '${yf(t.query)}' failed`);return void t.onError(a)}n.queries.set(s,r),r.ta.push(t),t.sa(n.onlineState),r.ea&&t.oa(r.ea)&&xT(n)}async function K_e(e,t){const n=tt(e),i=t.query;let s=3;const r=n.queries.get(i);if(r){const o=r.ta.indexOf(t);o>=0&&(r.ta.splice(o,1),r.ta.length===0?s=t.ra()?0:1:!r.na()&&t.ra()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Z_e(e,t){const n=tt(e);let i=!1;for(const s of t){const r=s.query,o=n.queries.get(r);if(o){for(const a of o.ta)a.oa(s)&&(i=!0);o.ea=s}}i&&xT(n)}function q_e(e,t,n){const i=tt(e),s=i.queries.get(t);if(s)for(const r of s.ta)r.onError(n);i.queries.delete(t)}function xT(e){e.ia.forEach(t=>{t.next()})}var dv,HD;(HD=dv||(dv={}))._a="default",HD.Cache="cache";class Q_e{constructor(t,n,i){this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new eg(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ua?this.la(t)&&(this.aa.next(t),n=!0):this.ha(t,this.onlineState)&&(this.Pa(t),n=!0),this.ca=t,n}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),n=!0),n}ha(t,n){if(!t.fromCache||!this.ra())return!0;const i=n!=="Offline";return(!this.options.Ta||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}la(t){if(t.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(t){t=eg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==dv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JY{constructor(t){this.key=t}}class eW{constructor(t){this.key=t}}class J_e{constructor(t,n){this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=yt(),this.mutatedKeys=yt(),this.ya=SY(t),this.wa=new fh(this.ya)}get Sa(){return this.fa}ba(t,n){const i=n?n.Da:new BD,s=n?n.wa:this.wa;let r=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((u,d)=>{const f=s.get(u),h=yy(this.query,d)?d:null,m=!!f&&this.mutatedKeys.has(f.key),p=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let U=!1;f&&h?f.data.isEqual(h.data)?m!==p&&(i.track({type:3,doc:h}),U=!0):this.va(f,h)||(i.track({type:2,doc:h}),U=!0,(l&&this.ya(h,l)>0||c&&this.ya(h,c)<0)&&(a=!0)):!f&&h?(i.track({type:0,doc:h}),U=!0):f&&!h&&(i.track({type:1,doc:f}),U=!0,(l||c)&&(a=!0)),U&&(h?(o=o.add(h),r=p?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),i.track({type:1,doc:u})}return{wa:o,Da:i,ls:a,mutatedKeys:r}}va(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const r=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const o=t.Da.X_();o.sort((u,d)=>function(h,m){const p=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke()}};return p(h)-p(m)}(u.type,d.type)||this.ya(u.doc,d.doc)),this.Ca(i),s=s!=null&&s;const a=n&&!s?this.Fa():[],l=this.pa.size===0&&this.current&&!s?1:0,c=l!==this.ga;return this.ga=l,o.length!==0||c?{snapshot:new eg(this.query,t.wa,r,o,t.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new BD,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=yt(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const n=[];return t.forEach(i=>{this.pa.has(i)||n.push(new eW(i))}),this.pa.forEach(i=>{t.has(i)||n.push(new JY(i))}),n}Oa(t){this.fa=t.gs,this.pa=yt();const n=this.ba(t.documents);return this.applyChanges(n,!0)}Na(){return eg.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const CT="SyncEngine";class eTe{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class tTe{constructor(t){this.key=t,this.Ba=!1}}class nTe{constructor(t,n,i,s,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new $d(a=>TY(a),by),this.qa=new Map,this.Qa=new Set,this.$a=new Cn(De.comparator),this.Ka=new Map,this.Ua=new UT,this.Wa={},this.Ga=new Map,this.za=Qh.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function iTe(e,t,n=!0){const i=rW(e);let s;const r=i.ka.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.Na()):s=await tW(i,t,n,!0),s}async function sTe(e,t){const n=rW(e);await tW(n,t,!0,!1)}async function tW(e,t,n,i){const s=await x_e(e.localStore,Vo(t)),r=s.targetId,o=e.sharedClientState.addLocalQueryTarget(r,n);let a;return i&&(a=await rTe(e,t,r,o==="current",s.resumeToken)),e.isPrimaryClient&&n&&KY(e.remoteStore,s),a}async function rTe(e,t,n,i,s){e.Ha=(d,f,h)=>async function(p,U,y,E){let v=U.view.ba(y);v.ls&&(v=await kD(p.localStore,U.query,!1).then(({documents:T})=>U.view.ba(T,v)));const w=E&&E.targetChanges.get(U.targetId),I=E&&E.targetMismatches.get(U.targetId)!=null,M=U.view.applyChanges(v,p.isPrimaryClient,w,I);return $D(p,U.targetId,M.Ma),M.snapshot}(e,d,f,h);const r=await kD(e.localStore,t,!0),o=new J_e(t,r.gs),a=o.ba(r.documents),l=yp.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),c=o.applyChanges(a,e.isPrimaryClient,l);$D(e,n,c.Ma);const u=new eTe(t,n,o);return e.ka.set(t,u),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),c.snapshot}async function oTe(e,t,n){const i=tt(e),s=i.ka.get(t),r=i.qa.get(s.targetId);if(r.length>1)return i.qa.set(s.targetId,r.filter(o=>!by(o,t))),void i.ka.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await cv(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&wT(i.remoteStore,s.targetId),fv(i,s.targetId)}).catch(gy)):(fv(i,s.targetId),await cv(i.localStore,s.targetId,!0))}async function aTe(e,t){const n=tt(e),i=n.ka.get(t),s=n.qa.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),wT(n.remoteStore,i.targetId))}async function nW(e,t){const n=tt(e);try{const i=await S_e(n.localStore,t);t.targetChanges.forEach((s,r)=>{const o=n.Ka.get(r);o&&(jt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ba=!0:s.modifiedDocuments.size>0?jt(o.Ba):s.removedDocuments.size>0&&(jt(o.Ba),o.Ba=!1))}),await sW(n,i,t)}catch(i){await gy(i)}}function VD(e,t,n){const i=tt(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.ka.forEach((r,o)=>{const a=o.view.sa(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=tt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.ta)f.sa(a)&&(c=!0)}),c&&xT(l)}(i.eventManager,t),s.length&&i.La.p_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function lTe(e,t,n){const i=tt(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Ka.get(t),r=s&&s.key;if(r){let o=new Cn(De.comparator);o=o.insert(r,di.newNoDocument(r,Pe.min()));const a=yt().add(r),l=new wy(Pe.min(),new Map,new Cn(dt),o,a);await nW(i,l),i.$a=i.$a.remove(r),i.Ka.delete(t),AT(i)}else await cv(i.localStore,t,!1).then(()=>fv(i,t,n)).catch(gy)}function fv(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.qa.get(t))e.ka.delete(i),n&&e.La.Ja(i,n);e.qa.delete(t),e.isPrimaryClient&&e.Ua.br(t).forEach(i=>{e.Ua.containsKey(i)||iW(e,i)})}function iW(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);n!==null&&(wT(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ka.delete(n),AT(e))}function $D(e,t,n){for(const i of n)i instanceof JY?(e.Ua.addReference(i.key,t),cTe(e,i)):i instanceof eW?(ve(CT,"Document no longer in limbo: "+i.key),e.Ua.removeReference(i.key,t),e.Ua.containsKey(i.key)||iW(e,i.key)):ke()}function cTe(e,t){const n=t.key,i=n.path.canonicalString();e.$a.get(n)||e.Qa.has(i)||(ve(CT,"New document in limbo: "+n),e.Qa.add(i),AT(e))}function AT(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new De(ln.fromString(t)),i=e.za.next();e.Ka.set(i,new tTe(n)),e.$a=e.$a.insert(n,i),KY(e.remoteStore,new nc(Vo(fT(n.path)),i,"TargetPurposeLimboResolution",my.ae))}}async function sW(e,t,n){const i=tt(e),s=[],r=[],o=[];i.ka.isEmpty()||(i.ka.forEach((a,l)=>{o.push(i.Ha(l,t,n).then(c=>{var u;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=yT.Yi(l.targetId,c);r.push(d)}}))}),await Promise.all(o),i.La.p_(s),await async function(l,c){const u=tt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ne.forEach(c,f=>ne.forEach(f.Hi,h=>u.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>ne.forEach(f.Ji,h=>u.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!wg(d))throw d;ve(ET,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const h=u.Ts.get(f),m=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(m);u.Ts=u.Ts.insert(f,p)}}}(i.localStore,r))}async function uTe(e,t){const n=tt(e);if(!n.currentUser.isEqual(t)){ve(CT,"User change. New user:",t.toKey());const i=await YY(n.localStore,t);n.currentUser=t,function(r,o){r.Ga.forEach(a=>{a.forEach(l=>{l.reject(new Se(se.CANCELLED,o))})}),r.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await sW(n,i.Rs)}}function dTe(e,t){const n=tt(e),i=n.Ka.get(t);if(i&&i.Ba)return yt().add(i.key);{let s=yt();const r=n.qa.get(t);if(!r)return s;for(const o of r){const a=n.ka.get(o);s=s.unionWith(a.view.Sa)}return s}}function rW(e){const t=tt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=nW.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=dTe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=lTe.bind(null,t),t.La.p_=Z_e.bind(null,t.eventManager),t.La.Ja=q_e.bind(null,t.eventManager),t}class k6{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=_y(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,n){return null}nu(t,n){return null}eu(t){return T_e(this.persistence,new v_e,t.initialUser,this.serializer)}Xa(t){return new jY(bT.ri,this.serializer)}Za(t){return new A_e}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}k6.provider={build:()=>new k6};class fTe extends k6{constructor(t){super(),this.cacheSizeBytes=t}tu(t,n){jt(this.persistence.referenceDelegate instanceof R6);const i=this.persistence.referenceDelegate.garbageCollector;return new o_e(i,t.asyncQueue,n)}Xa(t){const n=this.cacheSizeBytes!==void 0?hs.withCacheSize(this.cacheSizeBytes):hs.DEFAULT;return new jY(i=>R6.ri(i,n),this.serializer)}}class hv{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>VD(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=uTe.bind(null,this.syncEngine),await X_e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Y_e}()}createDatastore(t){const n=_y(t.databaseInfo.databaseId),i=function(r){return new L_e(r)}(t.databaseInfo);return function(r,o,a,l){return new F_e(r,o,a,l)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,o,a){return new z_e(i,s,r,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>VD(this.syncEngine,n,0),function(){return ND.D()?new ND:new M_e}())}createSyncEngine(t,n){return function(s,r,o,a,l,c,u){const d=new nTe(s,r,o,a,l,c);return u&&(d.ja=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const r=tt(s);ve(Jh,"RemoteStore shutting down."),r.W_.add(5),await Ep(r),r.z_.shutdown(),r.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}hv.provider={build:()=>new hv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hTe{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):dl("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gTe{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Se(se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,r){const o=tt(s),a={documents:r.map(d=>M6(o.serializer,d))},l=await o.Co("BatchGetDocuments",o.serializer.databaseId,ln.emptyPath(),a,r.length),c=new Map;l.forEach(d=>{const f=$we(o.serializer,d);c.set(f.key.toString(),f)});const u=[];return r.forEach(d=>{const f=c.get(d.toString());jt(!!f),u.push(f)}),u}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new gT(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const s=De.fromPath(i);this.mutations.push(new LY(s,this.precondition(s)))}),await async function(i,s){const r=tt(i),o={writes:s.map(a=>Xwe(r.serializer,a))};await r.So("Commit",r.serializer.databaseId,ln.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw ke();n=Pe.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new Se(se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(Pe.min())?ur.exists(!1):ur.updateTime(n):ur.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Pe.min()))throw new Se(se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ur.updateTime(n)}return ur.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mTe{constructor(t,n,i,s,r){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=r,this.Tu=i.maxAttempts,this.a_=new vT(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new gTe(this.datastore),n=this.du(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(s=>{this.Au(s)}))}).catch(i=>{this.Au(i)})})}du(t){try{const n=this.updateFunction(t);return!Up(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Dwe(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc="FirestoreClient";class pTe{constructor(t,n,i,s,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Oi.UNAUTHENTICATED,this.clientId=lY.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async o=>{ve(jc,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(ve(jc,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new wc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=QY(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function a7(e,t){e.asyncQueue.verifyOperationInProgress(),ve(jc,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await YY(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function GD(e,t){e.asyncQueue.verifyOperationInProgress();const n=await UTe(e);ve(jc,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>FD(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>FD(t.remoteStore,s)),e._onlineComponents=t}async function UTe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ve(jc,"Using user provided OfflineComponentProvider");try{await a7(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===se.FAILED_PRECONDITION||s.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Wh("Error using user provided cache. Falling back to memory cache: "+n),await a7(e,new k6)}}else ve(jc,"Using default OfflineComponentProvider"),await a7(e,new fTe(void 0));return e._offlineComponents}async function oW(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ve(jc,"Using user provided OnlineComponentProvider"),await GD(e,e._uninitializedComponentsProvider._online)):(ve(jc,"Using default OnlineComponentProvider"),await GD(e,new hv))),e._onlineComponents}function bTe(e){return oW(e).then(t=>t.datastore)}async function yTe(e){const t=await oW(e),n=t.eventManager;return n.onListen=iTe.bind(null,t.syncEngine),n.onUnlisten=oTe.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=sTe.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=aTe.bind(null,t.syncEngine),n}function ETe(e,t,n={}){const i=new wc;return e.asyncQueue.enqueueAndForget(async()=>function(r,o,a,l,c){const u=new hTe({next:f=>{u.su(),o.enqueueAndForget(()=>K_e(r,d));const h=f.docs.has(a);!h&&f.fromCache?c.reject(new Se(se.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?c.reject(new Se(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Q_e(fT(a.path),u,{includeMetadataChanges:!0,Ta:!0});return W_e(r,d)}(await yTe(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aW(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vTe(e,t,n){if(!n)throw new Se(se.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function wTe(e,t,n,i){if(t===!0&&i===!0)throw new Se(se.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function jD(e){if(!De.isDocumentKey(e))throw new Se(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function MT(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":ke()}function D6(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Se(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=MT(e);throw new Se(se.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lW="firestore.googleapis.com",YD=!0;class WD{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Se(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lW,this.ssl=YD}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:YD;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=XY;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<s_e)throw new Se(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}wTe("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aW((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Se(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Se(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Se(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class RT{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WD({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Se(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WD(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new N9e;switch(i.type){case"firstParty":return new B9e(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Se(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=XD.get(n);i&&(ve("ComponentProvider","Removing Datastore"),XD.delete(n),i.terminate())}(this),Promise.resolve()}}function _Te(e,t,n,i={}){var s;const r=(e=D6(e,RT))._getSettings(),o=`${t}:${n}`;if(r.host!==lW&&r.host!==o&&Wh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Oi.MOCK_USER;else{a=$j(i.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Se(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Oi(c)}e._authCredentials=new O9e(new aY(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new kT(this.firestore,t,this._query)}}class _r{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rm(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new _r(this.firestore,t,this._key)}}class Rm extends kT{constructor(t,n,i){super(t,n,fT(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new _r(this.firestore,null,new De(t))}withConverter(t){return new Rm(this.firestore,t,this._path)}}function cW(e,t,...n){if(e=ho(e),arguments.length===1&&(t=lY.newId()),vTe("doc","path",t),e instanceof RT){const i=ln.fromString(t,...n);return jD(i),new _r(e,null,new De(i))}{if(!(e instanceof _r||e instanceof Rm))throw new Se(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(ln.fromString(t,...n));return jD(i),new _r(e.firestore,e instanceof Rm?e.converter:null,new De(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD="AsyncQueue";class ZD{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new vT(this,"async_queue_retry"),this.Su=()=>{const i=o7();i&&ve(KD,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=t;const n=o7();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const n=o7();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const n=new wc;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!wg(t))throw t;ve(KD,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const n=this.bu.then(()=>(this.pu=!0,t().catch(i=>{this.gu=i,this.pu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw dl("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.pu=!1,i))));return this.bu=n,n}enqueueAfterDelay(t,n,i){this.Du(),this.wu.indexOf(t)>-1&&(n=0);const s=IT.createAndSchedule(this,t,n,i,r=>this.Fu(r));return this.fu.push(s),s}Du(){this.gu&&ke()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const n of this.fu)if(n.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const n=this.fu.indexOf(t);this.fu.splice(n,1)}}class DT extends RT{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new ZD,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new ZD(t),this._firestoreClient=void 0,await t}}}function TTe(e,t){const n=typeof e=="object"?e:Qj(),i=typeof e=="string"?e:_6,s=Wj(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=Hj("firestore");r&&_Te(s,...r)}return s}function uW(e){if(e._terminated)throw new Se(se.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||STe(e),e._firestoreClient}function STe(e){var t,n,i;const s=e._freezeSettings(),r=function(a,l,c,u){return new ewe(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,aW(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new pTe(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new fl(xi.fromBase64String(t))}catch(n){throw new Se(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new fl(xi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Se(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Se(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Se(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return dt(this._lat,t._lat)||dt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ITe=/^__.*__$/;class xTe{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Gd(t,this.data,this.fieldMask,n,this.fieldTransforms):new bp(t,this.data,n,this.fieldTransforms)}}class dW{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Gd(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function fW(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke()}}class PT{constructor(t,n,i,s,r,o){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Bu(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new PT(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.ku({path:i,Qu:!1});return s.$u(t),s}Ku(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.ku({path:i,Qu:!1});return s.Bu(),s}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return L6(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(fW(this.Lu)&&ITe.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class CTe{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||_y(t)}ju(t,n,i,s=!1){return new PT({Lu:t,methodName:n,zu:i,path:Bi.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ATe(e){const t=e._freezeSettings(),n=_y(e._databaseId);return new CTe(e._databaseId,!!t.ignoreUndefinedProperties,n)}function MTe(e,t,n,i,s,r={}){const o=e.ju(r.merge||r.mergeFields?2:0,t,n,s);FT("Data must be an object, but it was:",o,i);const a=hW(i,o);let l,c;if(r.merge)l=new pr(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const d of r.mergeFields){const f=gv(t,d,n);if(!o.contains(f))throw new Se(se.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);mW(u,f)||u.push(f)}l=new pr(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new xTe(new gs(a),l,c)}class Iy extends LT{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Iy}}function RTe(e,t,n,i){const s=e.ju(1,t,n);FT("Data must be an object, but it was:",s,i);const r=[],o=gs.empty();Vd(i,(l,c)=>{const u=BT(t,l,n);c=ho(c);const d=s.Ku(u);if(c instanceof Iy)r.push(u);else{const f=xy(c,d);f!=null&&(r.push(u),o.set(u,f))}});const a=new pr(r);return new dW(o,a,s.fieldTransforms)}function kTe(e,t,n,i,s,r){const o=e.ju(1,t,n),a=[gv(t,i,n)],l=[s];if(r.length%2!=0)throw new Se(se.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<r.length;f+=2)a.push(gv(t,r[f])),l.push(r[f+1]);const c=[],u=gs.empty();for(let f=a.length-1;f>=0;--f)if(!mW(c,a[f])){const h=a[f];let m=l[f];m=ho(m);const p=o.Ku(h);if(m instanceof Iy)c.push(h);else{const U=xy(m,p);U!=null&&(c.push(h),u.set(h,U))}}const d=new pr(c);return new dW(u,d,o.fieldTransforms)}function xy(e,t){if(gW(e=ho(e)))return FT("Unsupported field value:",t,e),hW(e,t);if(e instanceof LT)return function(i,s){if(!fW(s.Lu))throw s.Wu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(i,s){const r=[];let o=0;for(const a of i){let l=xy(a,s.Uu(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=ho(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Twe(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=mi.fromDate(i);return{timestampValue:A6(s.serializer,r)}}if(i instanceof mi){const r=new mi(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:A6(s.serializer,r)}}if(i instanceof NT)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof fl)return{bytesValue:FY(s.serializer,i._byteString)};if(i instanceof _r){const r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:pT(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof OT)return function(o,a){return{mapValue:{fields:{[pY]:{stringValue:UY},[T6]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return hT(a.serializer,c)})}}}}}}(i,s);throw s.Wu(`Unsupported field value: ${MT(i)}`)}(e,t)}function hW(e,t){const n={};return uY(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vd(e,(i,s)=>{const r=xy(s,t.qu(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function gW(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof mi||e instanceof NT||e instanceof fl||e instanceof _r||e instanceof LT||e instanceof OT)}function FT(e,t,n){if(!gW(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=MT(n);throw i==="an object"?t.Wu(e+" a custom object"):t.Wu(e+" "+i)}}function gv(e,t,n){if((t=ho(t))instanceof Sy)return t._internalPath;if(typeof t=="string")return BT(e,t);throw L6("Field path arguments must be of type string or ",e,!1,void 0,n)}const DTe=new RegExp("[~\\*/\\[\\]]");function BT(e,t,n){if(t.search(DTe)>=0)throw L6(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Sy(...t.split("."))._internalPath}catch{throw L6(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function L6(e,t,n,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new Se(se.INVALID_ARGUMENT,a+e+l)}function mW(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new _r(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new LTe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(pW("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LTe extends N6{data(){return super.data()}}function pW(e,t){return typeof t=="string"?BT(e,t):t instanceof Sy?t._internalPath:t._delegate._internalPath}class UW{convertValue(t,n="none"){switch(Gc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Sn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes($c(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw ke()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Vd(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(t){var n,i,s;const r=(s=(i=(n=t.fields)===null||n===void 0?void 0:n[T6].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(o=>Sn(o.doubleValue));return new OT(r)}convertGeoPoint(t){return new NT(Sn(t.latitude),Sn(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=py(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Im(t));default:return null}}convertTimestamp(t){const n=Vc(t);return new mi(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=ln.fromString(t);jt(GY(i));const s=new xm(i.get(1),i.get(3)),r=new De(i.popFirst(5));return s.isEqual(n)||dl(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NTe(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class OTe extends UW{constructor(t){super(),this.firestore=t}convertBytes(t){return new fl(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new _r(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bW{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class zT extends N6{constructor(t,n,i,s,r,o){super(t,n,i,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new PTe(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(pW("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class PTe extends zT{data(t={}){return super.data(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FTe(e){e=D6(e,_r);const t=D6(e.firestore,DT);return ETe(uW(t),e._key).then(n=>BTe(t,e,n))}class yW extends UW{constructor(t){super(),this.firestore=t}convertBytes(t){return new fl(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new _r(this.firestore,null,n)}}function BTe(e,t,n){const i=n.docs.get(t._key),s=new yW(e);return new zT(e,s,t._key,i,new bW(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zTe={maxAttempts:5};function B1(e,t){if((e=ho(e)).firestore!==t)throw new Se(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HTe{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=ATe(t)}get(t){const n=B1(t,this._firestore),i=new OTe(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return ke();const r=s[0];if(r.isFoundDocument())return new N6(this._firestore,i,r.key,r,n.converter);if(r.isNoDocument())return new N6(this._firestore,i,n._key,null,n.converter);throw ke()})}set(t,n,i){const s=B1(t,this._firestore),r=NTe(s.converter,n,i),o=MTe(this._dataReader,"Transaction.set",s._key,r,s.converter!==null,i);return this._transaction.set(s._key,o),this}update(t,n,i,...s){const r=B1(t,this._firestore);let o;return o=typeof(n=ho(n))=="string"||n instanceof Sy?kTe(this._dataReader,"Transaction.update",r._key,n,i,s):RTe(this._dataReader,"Transaction.update",r._key,n),this._transaction.update(r._key,o),this}delete(t){const n=B1(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VTe extends HTe{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=B1(t,this._firestore),i=new yW(this._firestore);return super.get(t).then(s=>new zT(this._firestore,i,n._key,s._document,new bW(!1,!1),n.converter))}}function $Te(e,t,n){e=D6(e,DT);const i=Object.assign(Object.assign({},zTe),n);return function(r){if(r.maxAttempts<1)throw new Se(se.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,o,a){const l=new wc;return r.asyncQueue.enqueueAndForget(async()=>{const c=await bTe(r);new mTe(r.asyncQueue,c,a,o,l).Iu()}),l.promise}(uW(e),s=>t(new VTe(e,s)),i)}(function(t,n=!0){(function(s){vg=s})(Zj),_m(new Yh("firestore",(i,{instanceIdentifier:s,options:r})=>{const o=i.getProvider("app").getImmediate(),a=new DT(new P9e(i.getProvider("auth-internal")),new z9e(o,i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Se(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xm(c.options.projectId,u)}(o,s),o);return r=Object.assign({useFetchStreams:n},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),Ec(nD,iD,t),Ec(nD,iD,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EW="firebasestorage.googleapis.com",vW="storageBucket",GTe=2*60*1e3,XTe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends Hd{constructor(t,n,i=0){super(l7(t),`Firebase Storage: ${n} (${l7(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wn.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return l7(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var jn;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(jn||(jn={}));function l7(e){return"storage/"+e}function HT(){const e="An unknown error occurred, please check the error payload for server response.";return new Wn(jn.UNKNOWN,e)}function jTe(e){return new Wn(jn.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function YTe(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Wn(jn.UNAUTHENTICATED,e)}function WTe(){return new Wn(jn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function KTe(e){return new Wn(jn.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function ZTe(){return new Wn(jn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qTe(){return new Wn(jn.CANCELED,"User canceled the upload/download.")}function QTe(e){return new Wn(jn.INVALID_URL,"Invalid URL '"+e+"'.")}function JTe(e){return new Wn(jn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function eSe(){return new Wn(jn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vW+"' property when initializing the app?")}function tSe(){return new Wn(jn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function nSe(e){return new Wn(jn.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function mv(e){return new Wn(jn.INVALID_ARGUMENT,e)}function wW(){return new Wn(jn.APP_DELETED,"The Firebase app was deleted.")}function iSe(e){return new Wn(jn.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _0(e,t){return new Wn(jn.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function d1(e){throw new Wn(jn.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=Bs.makeFromUrl(t,n)}catch{return new Bs(t,"")}if(i.path==="")return i;throw JTe(t)}static makeFromUrl(t,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function r(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(w){w.path_=decodeURIComponent(w.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${u}/b/${s}/o${f}`,"i"),m={bucket:1,path:3},p=n===EW?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",y=new RegExp(`^https?://${p}/${s}/${U}`,"i"),v=[{regex:a,indices:l,postModify:r},{regex:h,indices:m,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let w=0;w<v.length;w++){const I=v[w],M=I.regex.exec(t);if(M){const T=M[I.indices.bucket];let _=M[I.indices.path];_||(_=""),i=new Bs(T,_),I.postModify(i);break}}if(i==null)throw QTe(t);return i}}class sSe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rSe(e,t,n){let i=1,s=null,r=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...U){c||(c=!0,t.apply(null,U))}function d(U){s=setTimeout(()=>{s=null,e(h,l())},U)}function f(){r&&clearTimeout(r)}function h(U,...y){if(c){f();return}if(U){f(),u.call(null,U,...y);return}if(l()||o){f(),u.call(null,U,...y);return}i<64&&(i*=2);let v;a===1?(a=2,v=0):v=(i+Math.random())*1e3,d(v)}let m=!1;function p(U){m||(m=!0,f(),!c&&(s!==null?(U||(a=2),clearTimeout(s),d(0)):U||(a=1)))}return d(0),r=setTimeout(()=>{o=!0,p(!0)},n),p}function oSe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aSe(e){return e!==void 0}function lSe(e){return typeof e=="object"&&!Array.isArray(e)}function _W(e){return typeof e=="string"||e instanceof String}function qD(e){return VT()&&e instanceof Blob}function VT(){return typeof Blob<"u"}function QD(e,t,n,i){if(i<t)throw mv(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw mv(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cSe(e,t,n){let i=t;return n==null&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function uSe(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const s=t(i)+"="+t(e[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var Zu;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Zu||(Zu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dSe(e,t){const n=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,r=t.indexOf(e)!==-1;return n||s||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fSe{constructor(t,n,i,s,r,o,a,l,c,u,d,f=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,m)=>{this.resolve_=h,this.reject_=m,this.start_()})}start_(){const t=(i,s)=>{if(s){i(!1,new BU(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const a=r.getErrorCode()===Zu.NO_ERROR,l=r.getStatus();if(!a||dSe(l,this.additionalRetryCodes_)&&this.retry){const u=r.getErrorCode()===Zu.ABORT;i(!1,new BU(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new BU(c,r))})},n=(i,s)=>{const r=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());aSe(l)?r(l):r()}catch(l){o(l)}else if(a!==null){const l=HT();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?wW():qTe();o(l)}else{const l=ZTe();o(l)}};this.canceled_?n(!1,new BU(!1,null,!0)):this.backoffId_=rSe(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&oSe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class BU{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function hSe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function gSe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function mSe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function pSe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function USe(e,t,n,i,s,r,o=!0){const a=uSe(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return mSe(c,t),hSe(c,n),gSe(c,r),pSe(c,i),new fSe(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bSe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ySe(...e){const t=bSe();if(t!==void 0){const n=new t;for(let i=0;i<e.length;i++)n.append(e[i]);return n.getBlob()}else{if(VT())return new Blob(e);throw new Wn(jn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ESe(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vSe(e){if(typeof atob>"u")throw nSe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class c7{constructor(t,n){this.data=t,this.contentType=n||null}}function wSe(e,t){switch(e){case Po.RAW:return new c7(TW(t));case Po.BASE64:case Po.BASE64URL:return new c7(SW(e,t));case Po.DATA_URL:return new c7(TSe(t),SSe(t))}throw HT()}function TW(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const r=i,o=e.charCodeAt(++n);i=65536|(r&1023)<<10|o&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function _Se(e){let t;try{t=decodeURIComponent(e)}catch{throw _0(Po.DATA_URL,"Malformed data URL.")}return TW(t)}function SW(e,t){switch(e){case Po.BASE64:{const s=t.indexOf("-")!==-1,r=t.indexOf("_")!==-1;if(s||r)throw _0(e,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Po.BASE64URL:{const s=t.indexOf("+")!==-1,r=t.indexOf("/")!==-1;if(s||r)throw _0(e,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=vSe(t)}catch(s){throw s.message.includes("polyfill")?s:_0(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}class IW{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw _0(Po.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=ISe(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function TSe(e){const t=new IW(e);return t.base64?SW(Po.BASE64,t.rest):_Se(t.rest)}function SSe(e){return new IW(e).contentType}function ISe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(t,n){let i=0,s="";qD(t)?(this.data_=t,i=t.size,s=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(t,n){if(qD(this.data_)){const i=this.data_,s=ESe(i,t,n);return s===null?null:new Wl(s)}else{const i=new Uint8Array(this.data_.buffer,t,n-t);return new Wl(i,!0)}}static getBlob(...t){if(VT()){const n=t.map(i=>i instanceof Wl?i.data_:i);return new Wl(ySe.apply(null,n))}else{const n=t.map(o=>_W(o)?wSe(Po.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const s=new Uint8Array(i);let r=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[r++]=o[a]}),new Wl(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xSe(e){let t;try{t=JSON.parse(e)}catch{return null}return lSe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CSe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function ASe(e,t){const n=t.split("/").filter(i=>i.length>0).join("/");return e.length===0?n:e+"/"+n}function xW(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MSe(e,t){return t}class Yi{constructor(t,n,i,s){this.server=t,this.local=n||t,this.writable=!!i,this.xform=s||MSe}}let zU=null;function RSe(e){return!_W(e)||e.length<2?e:xW(e)}function kSe(){if(zU)return zU;const e=[];e.push(new Yi("bucket")),e.push(new Yi("generation")),e.push(new Yi("metageneration")),e.push(new Yi("name","fullPath",!0));function t(r,o){return RSe(o)}const n=new Yi("name");n.xform=t,e.push(n);function i(r,o){return o!==void 0?Number(o):o}const s=new Yi("size");return s.xform=i,e.push(s),e.push(new Yi("timeCreated")),e.push(new Yi("updated")),e.push(new Yi("md5Hash",null,!0)),e.push(new Yi("cacheControl",null,!0)),e.push(new Yi("contentDisposition",null,!0)),e.push(new Yi("contentEncoding",null,!0)),e.push(new Yi("contentLanguage",null,!0)),e.push(new Yi("contentType",null,!0)),e.push(new Yi("metadata","customMetadata",!0)),zU=e,zU}function DSe(e,t){function n(){const i=e.bucket,s=e.fullPath,r=new Bs(i,s);return t._makeStorageReference(r)}Object.defineProperty(e,"ref",{get:n})}function LSe(e,t,n){const i={};i.type="file";const s=n.length;for(let r=0;r<s;r++){const o=n[r];i[o.local]=o.xform(i,t[o.server])}return DSe(i,e),i}function NSe(e,t,n){const i=xSe(t);return i===null?null:LSe(e,i,n)}function OSe(e,t){const n={},i=t.length;for(let s=0;s<i;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class PSe{constructor(t,n,i,s){this.url=t,this.method=n,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FSe(e){if(!e)throw HT()}function BSe(e,t){function n(i,s){const r=NSe(e,s,t);return FSe(r!==null),r}return n}function zSe(e){function t(n,i){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=WTe():s=YTe():n.getStatus()===402?s=jTe(e.bucket):n.getStatus()===403?s=KTe(e.path):s=i,s.status=n.getStatus(),s.serverResponse=i.serverResponse,s}return t}function HSe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function VSe(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=HSe(null,t)),i}function $Se(e,t,n,i,s){const r=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let v="";for(let w=0;w<2;w++)v=v+Math.random().toString().slice(2);return v}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=VSe(t,i,s),u=OSe(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=Wl.getBlob(d,i,f);if(h===null)throw tSe();const m={name:c.fullPath},p=cSe(r,e.host,e._protocol),U="POST",y=e.maxUploadRetryTime,E=new PSe(p,U,BSe(e,n),y);return E.urlParams=m,E.headers=o,E.body=h.uploadData(),E.errorHandler=zSe(t),E}class GSe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zu.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Zu.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Zu.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,i,s){if(this.sent_)throw d1("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),s!==void 0)for(const r in s)s.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,s[r].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw d1("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw d1("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw d1("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw d1("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class XSe extends GSe{initXhr(){this.xhr_.responseType="text"}}function jSe(){return new XSe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(t,n){this._service=t,n instanceof Bs?this._location=n:this._location=Bs.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Id(t,n)}get root(){const t=new Bs(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xW(this._location.path)}get storage(){return this._service}get parent(){const t=CSe(this._location.path);if(t===null)return null;const n=new Bs(this._location.bucket,t);return new Id(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw iSe(t)}}function YSe(e,t,n){e._throwIfRoot("uploadBytes");const i=$Se(e.storage,e._location,kSe(),new Wl(t,!0),n);return e.storage.makeRequestWithTokens(i,jSe).then(s=>({metadata:s,ref:e}))}function WSe(e,t){const n=ASe(e._location.path,t),i=new Bs(e._location.bucket,n);return new Id(e.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KSe(e){return/^[A-Za-z]+:\/\//.test(e)}function ZSe(e,t){return new Id(e,t)}function CW(e,t){if(e instanceof $T){const n=e;if(n._bucket==null)throw eSe();const i=new Id(n,n._bucket);return t!=null?CW(i,t):i}else return t!==void 0?WSe(e,t):e}function qSe(e,t){if(t&&KSe(t)){if(e instanceof $T)return ZSe(e,t);throw mv("To use ref(service, url), the first argument must be a Storage instance.")}else return CW(e,t)}function JD(e,t){const n=t==null?void 0:t[vW];return n==null?null:Bs.makeFromBucketSpec(n,e)}function QSe(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:s}=i;s&&(e._overrideAuthToken=typeof s=="string"?s:$j(s,e.app.options.projectId))}class $T{constructor(t,n,i,s,r){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=r,this._bucket=null,this._host=EW,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=GTe,this._maxUploadRetryTime=XTe,this._requests=new Set,s!=null?this._bucket=Bs.makeFromBucketSpec(s,this._host):this._bucket=JD(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Bs.makeFromBucketSpec(this._url,t):this._bucket=JD(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){QD("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){QD("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Kj(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Id(this,t)}_makeRequest(t,n,i,s,r=!0){if(this._deleted)return new sSe(wW());{const o=USe(t,this._appId,i,s,n,this._firebaseVersion,r);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,s).getPromise()}}const eL="@firebase/storage",tL="0.13.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AW="storage";function MW(e,t,n){return e=ho(e),YSe(e,t,n)}function RW(e,t){return e=ho(e),qSe(e,t)}function JSe(e=Qj(),t){e=ho(e);const i=Wj(e,AW).getImmediate({identifier:t}),s=Hj("storage");return s&&eIe(i,...s),i}function eIe(e,t,n,i={}){QSe(e,t,n,i)}function tIe(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new $T(n,i,s,t,Zj)}function nIe(){_m(new Yh(AW,tIe,"PUBLIC").setMultipleInstances(!0)),Ec(eL,tL,""),Ec(eL,tL,"esm2017")}nIe();let O6;try{O6=JSON.parse('{"apiKey":"AIzaSyCMkxA60XIW8KbqMYL7edC4qT5l4qHX2h8","authDomain":"excalidraw-oss-dev.firebaseapp.com","projectId":"excalidraw-oss-dev","storageBucket":"excalidraw-oss-dev.appspot.com","messagingSenderId":"664559512677","appId":"1:664559512677:web:a385181f2928d328a7aa8c"}')}catch{console.warn('Error JSON parsing firebase config. Supplied value: {"apiKey":"AIzaSyCMkxA60XIW8KbqMYL7edC4qT5l4qHX2h8","authDomain":"excalidraw-oss-dev.firebaseapp.com","projectId":"excalidraw-oss-dev","storageBucket":"excalidraw-oss-dev.appspot.com","messagingSenderId":"664559512677","appId":"1:664559512677:web:a385181f2928d328a7aa8c"}'),O6={}}let u7=null,d7=null,f7=null;const kW=()=>(u7||(u7=qj(O6)),u7),DW=()=>(d7||(d7=TTe(kW())),d7),iIe=()=>(f7||(f7=JSe(kW())),f7),LW=async()=>iIe(),sIe=async(e,t)=>{const n=JSON.stringify(t),i=new TextEncoder().encode(n),{encryptedBuffer:s,iv:r}=await Z5(e,i);return{ciphertext:s,iv:r}},pv=async(e,t)=>{const n=e.ciphertext.toUint8Array(),i=e.iv.toUint8Array(),s=await fm(i,n,t),r=new TextDecoder("utf-8").decode(new Uint8Array(s));return JSON.parse(r)},_u=class _u{};F(_u,"cache",new WeakMap),F(_u,"get",t=>_u.cache.get(t)),F(_u,"set",(t,n)=>{_u.cache.set(t,jl(n))});let km=_u;const NW=(e,t)=>{if(e.socket&&e.roomId&&e.roomKey){const n=jl(t);return km.get(e.socket)===n}return!0},GT=async({prefix:e,files:t})=>{const n=await LW(),i=[],s=[];return await Promise.all(t.map(async({id:r,buffer:o})=>{try{const a=RW(n,`${e}/${r}`);await MW(a,o,{cacheControl:`public, max-age=${J4e}`}),s.push(r)}catch{i.push(r)}})),{savedFiles:s,erroredFiles:i}},nL=async(e,t)=>{const n=jl(e),{ciphertext:i,iv:s}=await sIe(t,e);return{sceneVersion:n,ciphertext:fl.fromUint8Array(new Uint8Array(i)),iv:fl.fromUint8Array(s)}},rIe=async(e,t,n)=>{const{roomId:i,roomKey:s,socket:r}=e;if(!i||!s||!r||NW(e,t))return null;const o=DW(),a=cW(o,"scenes",i),l=await $Te(o,async u=>{const d=await u.get(a);if(!d.exists()){const U=await nL(t,s);return u.set(a,U),U}const f=d.data(),h=ic(wd(await pv(f,s),null)),m=ic(nT(t,h,n)),p=await nL(m,s);return u.update(a,p),p}),c=ic(wd(await pv(l,s),null));return km.set(r,c),c},oIe=async(e,t,n)=>{const i=DW(),s=cW(i,"scenes",e),r=await FTe(s);if(!r.exists())return null;const o=r.data(),a=ic(wd(await pv(o,t),null));return n&&km.set(n,a),a},OW=async(e,t,n)=>{const i=[],s=new Map;return await Promise.all([...new Set(n)].map(async r=>{try{const o=`https://firebasestorage.googleapis.com/v0/b/${O6.storageBucket}/o/${encodeURIComponent(e.replace(/^\//,""))}%2F${r}`,a=await fetch(`${o}?alt=media`);if(a.status<400){const l=await a.arrayBuffer(),{data:c,metadata:u}=await $$(new Uint8Array(l),{decryptionKey:t}),d=new TextDecoder().decode(c);i.push({mimeType:u.mimeType||ye.binary,id:r,dataURL:d,created:(u==null?void 0:u.created)||Date.now(),lastRetrieved:(u==null?void 0:u.created)||Date.now()})}else s.set(r,!0)}catch(o){s.set(r,!0),console.error(o)}})),{loadedFiles:i,erroredFiles:s}},PW=e=>e.isDeleted?e.updated>Date.now()-Q4e:!gd(e),ic=e=>e.filter(t=>PW(t)),aIe="https://json-dev.excalidraw.com/api/v2/",lIe="https://json-dev.excalidraw.com/api/v2/post/",cIe=async()=>{const e=new Uint8Array(eve);return window.crypto.getRandomValues(e),UF(e)},FW=/^#room=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/,iL=e=>{const t=new URL(e).hash;return FW.test(t)},uIe=e=>{const n=new URL(e).hash.match(FW);return n&&n[2].length!==22?(window.alert(k("alerts.invalidEncryptionKey")),null):n?{roomId:n[1],roomKey:n[2]}:null},dIe=async()=>{const e=await cIe(),t=await p_();if(!t)throw new Error("Couldn't generate room key");return{roomId:e,roomKey:t}},fIe=e=>`${window.location.origin}${window.location.pathname}#room=${e.roomId},${e.roomKey}`,hIe=async({buffer:e,decryptionKey:t})=>{let n;try{const r=e.slice(0,_2),o=e.slice(_2,e.byteLength);n=await fm(new Uint8Array(r),o,t)}catch{const o=new Uint8Array(_2);n=await fm(o,e,t)}const i=new window.TextDecoder("utf-8").decode(new Uint8Array(n)),s=JSON.parse(i);return{elements:s.elements||null,appState:s.appState||null}},gIe=async(e,t)=>{try{const n=await fetch(`${aIe}${e}`);if(!n.ok)return window.alert(k("alerts.importBackendFailed")),{};const i=await n.arrayBuffer();try{const{data:s}=await $$(new Uint8Array(i),{decryptionKey:t}),r=JSON.parse(new TextDecoder().decode(s));return{elements:r.elements||null,appState:r.appState||null}}catch(s){return console.warn("error when decoding shareLink data using the new format:",s),hIe({buffer:i,decryptionKey:t})}}catch(n){return window.alert(k("alerts.importBackendFailed")),console.error(n),{}}},sL=async(e,t,n)=>{let i;return e!=null&&t!=null?i=_d(await gIe(e,t),n==null?void 0:n.appState,n==null?void 0:n.elements,{repairBindings:!0,refreshDimensions:!1}):i=_d(n||null,null,null,{repairBindings:!0}),{elements:i.elements,appState:i.appState,files:i.files}},mIe=async(e,t,n)=>{const i=await p_("string"),s=await V$(new TextEncoder().encode(yg(e,t,n,"database")),{encryptionKey:i});try{const r=new Map;for(const c of e)In(c)&&n[c.fileId]&&r.set(c.fileId,n[c.fileId]);const o=await sT({files:r,encryptionKey:i,maxBytes:iT}),l=await(await fetch(lIe,{method:"POST",body:s.buffer})).json();if(l.id){const c=new URL(window.location.href);c.hash=`json=${l.id},${i}`;const u=c.toString();return await GT({prefix:`/files/shareLinks/${l.id}`,files:o}),{url:u,errorMessage:null}}else if(l.error_class==="RequestTooLargeError")return{url:null,errorMessage:k("alerts.couldNotCreateShareableLinkTooBig")};return{url:null,errorMessage:k("alerts.couldNotCreateShareableLink")}}catch(r){return console.error(r),{url:null,errorMessage:k("alerts.couldNotCreateShareableLink")}}};function pIe(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var i=function(){return indexedDB.databases().finally(n)};t=setInterval(i,100),i()}).finally(function(){return clearInterval(t)})}function Xd(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function XT(e,t){const n=pIe().then(()=>{const i=indexedDB.open(e);return i.onupgradeneeded=()=>i.result.createObjectStore(t),Xd(i)});return(i,s)=>n.then(r=>s(r.transaction(t,i).objectStore(t)))}let h7;function Tg(){return h7||(h7=XT("keyval-store","keyval")),h7}function UIe(e,t=Tg()){return t("readonly",n=>Xd(n.get(e)))}function BW(e,t,n=Tg()){return n("readwrite",i=>(i.put(t,e),Xd(i.transaction)))}function bIe(e,t=Tg()){return t("readwrite",n=>(e.forEach(i=>n.put(i[1],i[0])),Xd(n.transaction)))}function yIe(e,t=Tg()){return t("readonly",n=>Promise.all(e.map(i=>Xd(n.get(i)))))}function EIe(e,t=Tg()){return t("readwrite",n=>(n.delete(e),Xd(n.transaction)))}function vIe(e,t){return e("readonly",n=>(n.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},Xd(n.transaction)))}function wIe(e=Tg()){const t=[];return vIe(e,n=>t.push([n.key,n.value])).then(()=>t)}class _Ie{constructor(){F(this,"locks",new Map);F(this,"lock",t=>{this.locks.set(t,!0)});F(this,"unlock",t=>(this.locks.delete(t),!this.isLocked()))}isLocked(t){return t?this.locks.has(t):!!this.locks.size}}const P6={[un.VERSION_DATA_STATE]:-1,[un.VERSION_FILES]:-1},rL=e=>JSON.parse(localStorage.getItem(e)||"-1")>P6[e],zW=e=>{const t=Date.now();try{localStorage.setItem(e,JSON.stringify(t)),P6[e]=t}catch(n){console.error("error while updating browser state verison",n)}},TIe=()=>{try{for(const e of Object.keys(P6))localStorage.setItem(e,JSON.stringify(-1)),P6[e]=-1}catch(e){console.error("error while resetting browser state verison",e)}},T0=XT("files-db","files-store");class SIe extends Fj{constructor(){super(...arguments);F(this,"clearObsoleteFiles",async n=>{await wIe(T0).then(i=>{for(const[s,r]of i)(!r.lastRetrieved||Date.now()-r.lastRetrieved>24*3600*1e3)&&!n.currentFileIds.includes(s)&&EIe(s,T0)})})}}const IIe=(e,t)=>{var n;try{const i=XV(t);((n=i.openSidebar)==null?void 0:n.name)===yr.name&&i.openSidebar.tab===Gu&&(i.openSidebar=null),localStorage.setItem(un.LOCAL_STORAGE_ELEMENTS,JSON.stringify(cz(e))),localStorage.setItem(un.LOCAL_STORAGE_APP_STATE,JSON.stringify(i)),zW(un.VERSION_DATA_STATE)}catch(i){console.error(i)}},yi=class yi{};F(yi,"_save",Qa(async(t,n,i,s)=>{IIe(t,n),await yi.fileStorage.saveFiles({elements:t,files:i}),s()},j4e)),F(yi,"save",(t,n,i,s)=>{yi.isSavePaused()||yi._save(t,n,i,s)}),F(yi,"flushSave",()=>{yi._save.flush()}),F(yi,"locker",new _Ie),F(yi,"pauseSave",t=>{yi.locker.lock(t)}),F(yi,"resumeSave",t=>{yi.locker.unlock(t)}),F(yi,"isSavePaused",()=>document.hidden||yi.locker.isLocked()),F(yi,"fileStorage",new SIe({getFiles(t){return yIe(t,T0).then(async n=>{const i=[],s=new Map,r=[];n.forEach((o,a)=>{const l=t[a];if(o){const c={...o,lastRetrieved:Date.now()};r.push([l,c]),i.push(c)}else s.set(l,!0)});try{bIe(r,T0)}catch(o){console.warn(o)}return{loadedFiles:i,erroredFiles:s}})},async saveFiles({addedFiles:t}){const n=new Map,i=new Map;return zW(un.VERSION_FILES),await Promise.all([...t].map(async([s,r])=>{try{await BW(s,r,T0),n.set(s,r)}catch(o){console.error(o),i.set(s,r)}})),{savedFiles:n,erroredFiles:i}}}));let vi=yi;const Pr=class Pr{static async load(){return await UIe(Pr.key,Pr.store)||null}static save(t){return BW(Pr.key,t,Pr.store)}};F(Pr,"idb_name",un.IDB_LIBRARY),F(Pr,"key","libraryData"),F(Pr,"store",XT(`${Pr.idb_name}-db`,`${Pr.idb_name}-store`));let F6=Pr;class xIe{static load(){const t=localStorage.getItem(un.__LEGACY_LOCAL_STORAGE_LIBRARY);if(t!=null){const n=JSON.parse(t);if(n)return{libraryItems:n}}return null}static clear(){localStorage.removeItem(un.__LEGACY_LOCAL_STORAGE_LIBRARY)}}const Uv=Zt({message:null,nonce:0}),HW=({collabError:e})=>{const[t,n]=L.useState(!1),i=L.useRef(0);return L.useEffect(()=>(n(!0),i.current=window.setTimeout(()=>{n(!1)},1e3),()=>{window.clearTimeout(i.current)}),[e.message,e.nonce]),e.message?g(ll,{label:e.message,long:!0,children:g("div",{className:pe("collab-errors-button",{"collab-errors-button-shake":t}),children:wue})}):null};HW.displayName="CollabError";class CIe{constructor(t){F(this,"collab");F(this,"socket",null);F(this,"socketInitialized",!1);F(this,"roomId",null);F(this,"roomKey",null);F(this,"broadcastedElementVersions",new Map);F(this,"queueFileUpload",No(async()=>{try{await this.collab.fileManager.saveFiles({elements:this.collab.excalidrawAPI.getSceneElementsIncludingDeleted(),files:this.collab.excalidrawAPI.getFiles()})}catch(i){i.name!=="AbortError"&&this.collab.excalidrawAPI.updateScene({appState:{errorMessage:i.message}})}let t=!1;const n=this.collab.excalidrawAPI.getSceneElementsIncludingDeleted().map(i=>this.collab.fileManager.shouldUpdateImageElementStatus(i)?(t=!0,Ie(i,{status:"saved"})):i);t&&this.collab.excalidrawAPI.updateScene({elements:n,captureUpdate:K.NEVER})},W4e));F(this,"broadcastScene",async(t,n,i)=>{if(t===Ki.INIT&&!i)throw new Error("syncAll must be true when sending SCENE.INIT");const s=n.reduce((o,a)=>((i||!this.broadcastedElementVersions.has(a.id)||a.version>this.broadcastedElementVersions.get(a.id))&&PW(a)&&o.push(a),o),[]),r={type:t,payload:{elements:s}};for(const o of s)this.broadcastedElementVersions.set(o.id,o.version);this.queueFileUpload(),await this._broadcastSocketData(r)});F(this,"broadcastIdleChange",t=>{var n;if((n=this.socket)!=null&&n.id){const i={type:Ki.IDLE_STATUS,payload:{socketId:this.socket.id,userState:t,username:this.collab.state.username}};return this._broadcastSocketData(i,!0)}});F(this,"broadcastMouseLocation",t=>{var n;if((n=this.socket)!=null&&n.id){const i={type:Ki.MOUSE_LOCATION,payload:{socketId:this.socket.id,pointer:t.pointer,button:t.button||"up",selectedElementIds:this.collab.excalidrawAPI.getAppState().selectedElementIds,username:this.collab.state.username}};return this._broadcastSocketData(i,!0)}});F(this,"broadcastVisibleSceneBounds",(t,n)=>{var i;if((i=this.socket)!=null&&i.id){const s={type:Ki.USER_VISIBLE_SCENE_BOUNDS,payload:{socketId:this.socket.id,username:this.collab.state.username,sceneBounds:t.sceneBounds}};return this._broadcastSocketData(s,!0,n)}});F(this,"broadcastUserFollowed",t=>{var n;(n=this.socket)!=null&&n.id&&this.socket.emit(C2.USER_FOLLOW_CHANGE,t)});this.collab=t}open(t,n,i){return this.socket=t,this.roomId=n,this.roomKey=i,this.socket.on("init-room",()=>{this.socket&&(this.socket.emit("join-room",this.roomId),at("share","room joined"))}),this.socket.on("new-user",async s=>{this.broadcastScene(Ki.INIT,this.collab.getSceneElementsIncludingDeleted(),!0)}),this.socket.on("room-user-change",s=>{this.collab.setCollaborators(s)}),t}close(){this.socket&&(this.queueFileUpload.flush(),this.socket.close(),this.socket=null,this.roomId=null,this.roomKey=null,this.socketInitialized=!1,this.broadcastedElementVersions=new Map)}isOpen(){return!!(this.socketInitialized&&this.socket&&this.roomId&&this.roomKey)}async _broadcastSocketData(t,n=!1,i){var s;if(this.isOpen()){const r=JSON.stringify(t),o=new TextEncoder().encode(r),{encryptedBuffer:a,iv:l}=await Z5(this.roomKey,o);(s=this.socket)==null||s.emit(n?C2.SERVER_VOLATILE:C2.SERVER,i??this.roomId,a,l)}}}const VW=Zt(null),bv=Zt(!1),$W=Zt(!1),GW=Zt(null);class AIe extends L.PureComponent{constructor(n){super(n);F(this,"portal");F(this,"fileManager");F(this,"excalidrawAPI");F(this,"activeIntervalId");F(this,"idleTimeoutId");F(this,"socketInitializationTimer");F(this,"lastBroadcastedOrReceivedSceneVersion",-1);F(this,"collaborators",new Map);F(this,"onUmmount",null);F(this,"onOfflineStatusToggle",()=>{Ll.set($W,!window.navigator.onLine)});F(this,"isCollaborating",()=>Ll.get(bv));F(this,"setIsCollaborating",n=>{Ll.set(bv,n)});F(this,"onUnload",()=>{this.destroySocketClient({isUnload:!0})});F(this,"beforeUnload",on(n=>{const i=ic(this.getSceneElementsIncludingDeleted());this.isCollaborating()&&(this.fileManager.shouldPreventUnload(i)||!NW(this.portal,i))&&(this.saveCollabRoomToFirebase(i),$9(n))}));F(this,"saveCollabRoomToFirebase",async n=>{try{const i=await rIe(this.portal,n,this.excalidrawAPI.getAppState());this.resetErrorIndicator(),this.isCollaborating()&&i&&this.handleRemoteSceneUpdate(this._reconcileElements(i))}catch(i){const s=/is longer than.*?bytes/.test(i.message)?k("errors.collabSaveFailed_sizeExceeded"):k("errors.collabSaveFailed");(!this.state.dialogNotifiedErrors[s]||!this.isCollaborating())&&(this.setErrorDialog(s),this.setState({dialogNotifiedErrors:{...this.state.dialogNotifiedErrors,[s]:!0}})),this.isCollaborating()&&this.setErrorIndicator(s),console.error(i)}});F(this,"stopCollaboration",(n=!0)=>{if(this.queueBroadcastAllElements.cancel(),this.queueSaveToFirebase.cancel(),this.loadImageFiles.cancel(),this.resetErrorIndicator(!0),this.saveCollabRoomToFirebase(ic(this.excalidrawAPI.getSceneElementsIncludingDeleted())),this.portal.socket&&this.fallbackInitializationHandler&&this.portal.socket.off("connect_error",this.fallbackInitializationHandler),!n)vi.fileStorage.reset(),this.destroySocketClient();else if(window.confirm(k("alerts.collabStopOverridePrompt"))){TIe(),window.history.pushState({},Va,window.location.origin),this.destroySocketClient(),vi.fileStorage.reset();const i=this.excalidrawAPI.getSceneElementsIncludingDeleted().map(s=>ft(s)&&s.status==="saved"?Ie(s,{status:"pending"}):s);this.excalidrawAPI.updateScene({elements:i,captureUpdate:K.NEVER})}});F(this,"destroySocketClient",n=>{this.lastBroadcastedOrReceivedSceneVersion=-1,this.portal.close(),this.fileManager.reset(),n!=null&&n.isUnload||(this.setIsCollaborating(!1),this.setActiveRoomLink(null),this.collaborators=new Map,this.excalidrawAPI.updateScene({collaborators:this.collaborators}),vi.resumeSave("collaboration"))});F(this,"fetchImageFilesFromFirebase",async n=>{const i=n.elements.filter(s=>In(s)&&!this.fileManager.isFileTracked(s.fileId)&&!s.isDeleted&&(n.forceFetchFiles?s.status!=="pending"||Date.now()-s.updated>1e4:s.status==="saved")).map(s=>s.fileId);return await this.fileManager.getFiles(i)});F(this,"decryptPayload",async(n,i,s)=>{try{const r=await fm(n,i,s),o=new TextDecoder("utf-8").decode(new Uint8Array(r));return JSON.parse(o)}catch(r){return window.alert(k("alerts.decryptFailed")),console.error(r),{type:Ki.INVALID_RESPONSE}}});F(this,"fallbackInitializationHandler",null);F(this,"startCollaboration",async n=>{if(this.state.username||be(()=>import("./random-username.esm-__vdrxyo.js"),__vite__mapDeps([])).then(({getRandomUsername:l})=>{const c=l();this.setUsername(c)}),this.portal.socket)return null;let i,s;n?{roomId:i,roomKey:s}=n:({roomId:i,roomKey:s}=await dIe(),window.history.pushState({},Va,fIe({roomId:i,roomKey:s})));const r=f5();this.setIsCollaborating(!0),vi.pauseSave("collaboration");const{default:o}=await be(()=>import("./index-ChGp7972.js"),__vite__mapDeps([])),a=()=>{this.initializeRoom({roomLinkData:n,fetchScene:!0}).then(l=>{r.resolve(l)})};this.fallbackInitializationHandler=a;try{this.portal.socket=this.portal.open(o("http://localhost:3002",{transports:["websocket","polling"]}),i,s),this.portal.socket.once("connect_error",a)}catch(l){return console.error(l),this.setErrorDialog(l.message),null}if(!n){const l=this.excalidrawAPI.getSceneElements().map(c=>ft(c)&&c.status==="saved"?Ie(c,{status:"pending"}):c);this.excalidrawAPI.updateScene({elements:l,captureUpdate:K.NEVER}),this.saveCollabRoomToFirebase(ic(l))}return this.socketInitializationTimer=window.setTimeout(a,Y4e),this.portal.socket.on("client-broadcast",async(l,c)=>{var d;if(!this.portal.roomKey)return;const u=await this.decryptPayload(c,l,this.portal.roomKey);switch(u.type){case Ki.INVALID_RESPONSE:return;case Ki.INIT:{if(!this.portal.socketInitialized){this.initializeRoom({fetchScene:!1});const f=u.payload.elements,h=this._reconcileElements(f);this.handleRemoteSceneUpdate(h),r.resolve({elements:h,scrollToContent:!0})}break}case Ki.UPDATE:this.handleRemoteSceneUpdate(this._reconcileElements(u.payload.elements));break;case Ki.MOUSE_LOCATION:{const{pointer:f,button:h,username:m,selectedElementIds:p}=u.payload,U=u.payload.socketId||u.payload.socketID;this.updateCollaborator(U,{pointer:f,button:h,selectedElementIds:p,username:m});break}case Ki.USER_VISIBLE_SCENE_BOUNDS:{const{sceneBounds:f,socketId:h}=u.payload,m=this.excalidrawAPI.getAppState();if(((d=m.userToFollow)==null?void 0:d.socketId)!==h){console.warn(`receiving remote client's (from ${h}) viewport bounds even though we're not subscribed to it!`);return}if(m.userToFollow&&m.followedBy.has(m.userToFollow.socketId))return;this.excalidrawAPI.updateScene({appState:qV({appState:m,bounds:f,fitToViewport:!0,viewportZoomFactor:1}).appState});break}case Ki.IDLE_STATUS:{const{userState:f,socketId:h,username:m}=u.payload;this.updateCollaborator(h,{userState:f,username:m});break}default:jo(u,null)}}),this.portal.socket.on("first-in-room",async()=>{this.portal.socket&&this.portal.socket.off("first-in-room");const l=await this.initializeRoom({fetchScene:!0,roomLinkData:n});r.resolve(l)}),this.portal.socket.on(C2.USER_FOLLOW_ROOM_CHANGE,l=>{this.excalidrawAPI.updateScene({appState:{followedBy:new Set(l)}}),this.relayVisibleSceneBounds({force:!0})}),this.initializeIdleDetector(),this.setActiveRoomLink(window.location.href),r});F(this,"initializeRoom",async({fetchScene:n,roomLinkData:i})=>{if(clearTimeout(this.socketInitializationTimer),this.portal.socket&&this.fallbackInitializationHandler&&this.portal.socket.off("connect_error",this.fallbackInitializationHandler),n&&i&&this.portal.socket){this.excalidrawAPI.resetScene();try{const s=await oIe(i.roomId,i.roomKey,this.portal.socket);if(s)return this.setLastBroadcastedOrReceivedSceneVersion(jl(s)),{elements:s,scrollToContent:!0}}catch(s){console.error(s)}finally{this.portal.socketInitialized=!0}}else this.portal.socketInitialized=!0;return null});F(this,"_reconcileElements",n=>{const i=this.getSceneElementsIncludingDeleted(),s=this.excalidrawAPI.getAppState(),r=wd(n,null),o=nT(i,r,s);return this.setLastBroadcastedOrReceivedSceneVersion(jl(o)),o});F(this,"loadImageFiles",No(async()=>{const{loadedFiles:n,erroredFiles:i}=await this.fetchImageFilesFromFirebase({elements:this.excalidrawAPI.getSceneElementsIncludingDeleted()});this.excalidrawAPI.addFiles(n),N1({excalidrawAPI:this.excalidrawAPI,erroredFiles:i,elements:this.excalidrawAPI.getSceneElementsIncludingDeleted()})},K4e));F(this,"handleRemoteSceneUpdate",n=>{this.excalidrawAPI.updateScene({elements:n,captureUpdate:K.NEVER}),this.loadImageFiles()});F(this,"onPointerMove",()=>{this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),this.idleTimeoutId=window.setTimeout(this.reportIdle,Jx),this.activeIntervalId||(this.activeIntervalId=window.setInterval(this.reportActive,eC))});F(this,"onVisibilityChange",()=>{document.hidden?(this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null),this.onIdleStateChange(Iu.AWAY)):(this.idleTimeoutId=window.setTimeout(this.reportIdle,Jx),this.activeIntervalId=window.setInterval(this.reportActive,eC),this.onIdleStateChange(Iu.ACTIVE))});F(this,"reportIdle",()=>{this.onIdleStateChange(Iu.IDLE),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null)});F(this,"reportActive",()=>{this.onIdleStateChange(Iu.ACTIVE)});F(this,"initializeIdleDetector",()=>{document.addEventListener(ee.POINTER_MOVE,this.onPointerMove),document.addEventListener(ee.VISIBILITY_CHANGE,this.onVisibilityChange)});F(this,"updateCollaborator",(n,i)=>{var o;const s=new Map(this.collaborators),r=Object.assign({},s.get(n),i,{isCurrentUser:n===((o=this.portal.socket)==null?void 0:o.id)});s.set(n,r),this.collaborators=s,this.excalidrawAPI.updateScene({collaborators:s})});F(this,"setLastBroadcastedOrReceivedSceneVersion",n=>{this.lastBroadcastedOrReceivedSceneVersion=n});F(this,"getLastBroadcastedOrReceivedSceneVersion",()=>this.lastBroadcastedOrReceivedSceneVersion);F(this,"getSceneElementsIncludingDeleted",()=>this.excalidrawAPI.getSceneElementsIncludingDeleted());F(this,"onPointerUpdate",No(n=>{n.pointersMap.size<2&&this.portal.socket&&this.portal.broadcastMouseLocation(n)},q4e));F(this,"relayVisibleSceneBounds",n=>{const i=this.excalidrawAPI.getAppState();this.portal.socket&&(i.followedBy.size>0||n!=null&&n.force)&&this.portal.broadcastVisibleSceneBounds({sceneBounds:kB(i)},`follow@${this.portal.socket.id}`)});F(this,"onIdleStateChange",n=>{this.portal.broadcastIdleChange(n)});F(this,"broadcastElements",n=>{jl(n)>this.getLastBroadcastedOrReceivedSceneVersion()&&(this.portal.broadcastScene(Ki.UPDATE,n,!1),this.lastBroadcastedOrReceivedSceneVersion=jl(n),this.queueBroadcastAllElements())});F(this,"syncElements",n=>{this.broadcastElements(n),this.queueSaveToFirebase()});F(this,"queueBroadcastAllElements",No(()=>{this.portal.broadcastScene(Ki.UPDATE,this.excalidrawAPI.getSceneElementsIncludingDeleted(),!0);const n=this.getLastBroadcastedOrReceivedSceneVersion(),i=Math.max(n,jl(this.getSceneElementsIncludingDeleted()));this.setLastBroadcastedOrReceivedSceneVersion(i)},$k));F(this,"queueSaveToFirebase",No(()=>{this.portal.socketInitialized&&this.saveCollabRoomToFirebase(ic(this.excalidrawAPI.getSceneElementsIncludingDeleted()))},$k,{leading:!1}));F(this,"setUsername",n=>{this.setState({username:n}),nve(n)});F(this,"getUsername",()=>this.state.username);F(this,"setActiveRoomLink",n=>{this.setState({activeRoomLink:n}),Ll.set(GW,n)});F(this,"getActiveRoomLink",()=>this.state.activeRoomLink);F(this,"setErrorIndicator",n=>{Ll.set(Uv,{message:n,nonce:Date.now()})});F(this,"resetErrorIndicator",(n=!1)=>{Ll.set(Uv,{message:null,nonce:0}),n&&this.setState({dialogNotifiedErrors:{}})});F(this,"setErrorDialog",n=>{this.setState({errorMessage:n})});this.state={errorMessage:null,dialogNotifiedErrors:{},username:Nj()||"",activeRoomLink:null},this.portal=new CIe(this),this.fileManager=new Fj({getFiles:async i=>{const{roomId:s,roomKey:r}=this.portal;if(!s||!r)throw new Fh;return OW(`files/rooms/${s}`,r,i)},saveFiles:async({addedFiles:i})=>{const{roomId:s,roomKey:r}=this.portal;if(!s||!r)throw new Fh;const{savedFiles:o,erroredFiles:a}=await GT({prefix:`${Lj.collabFiles}/${s}`,files:await sT({files:i,encryptionKey:r,maxBytes:iT})});return{savedFiles:o.reduce((l,c)=>{const u=i.get(c);return u&&l.set(c,u),l},new Map),erroredFiles:a.reduce((l,c)=>{const u=i.get(c);return u&&l.set(c,u),l},new Map)}}}),this.excalidrawAPI=n.excalidrawAPI,this.activeIntervalId=null,this.idleTimeoutId=null}componentDidMount(){window.addEventListener(ee.BEFORE_UNLOAD,this.beforeUnload),window.addEventListener("online",this.onOfflineStatusToggle),window.addEventListener("offline",this.onOfflineStatusToggle),window.addEventListener(ee.UNLOAD,this.onUnload);const n=this.excalidrawAPI.onUserFollow(o=>{this.portal.socket&&this.portal.broadcastUserFollowed(o)}),i=dg(this.relayVisibleSceneBounds),s=this.excalidrawAPI.onScrollChange(()=>i());this.onUmmount=()=>{n(),s()},this.onOfflineStatusToggle();const r={isCollaborating:this.isCollaborating,onPointerUpdate:this.onPointerUpdate,startCollaboration:this.startCollaboration,syncElements:this.syncElements,fetchImageFilesFromFirebase:this.fetchImageFilesFromFirebase,stopCollaboration:this.stopCollaboration,setUsername:this.setUsername,getUsername:this.getUsername,getActiveRoomLink:this.getActiveRoomLink,setCollabError:this.setErrorDialog};Ll.set(VW,r),window.collab=window.collab||{},Object.defineProperties(window,{collab:{configurable:!0,value:this}})}componentWillUnmount(){var n;window.removeEventListener("online",this.onOfflineStatusToggle),window.removeEventListener("offline",this.onOfflineStatusToggle),window.removeEventListener(ee.BEFORE_UNLOAD,this.beforeUnload),window.removeEventListener(ee.UNLOAD,this.onUnload),window.removeEventListener(ee.POINTER_MOVE,this.onPointerMove),window.removeEventListener(ee.VISIBILITY_CHANGE,this.onVisibilityChange),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null),this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),(n=this.onUmmount)==null||n.call(this)}setCollaborators(n){var s;const i=new Map;for(const r of n)i.set(r,Object.assign({},this.collaborators.get(r),{isCurrentUser:r===((s=this.portal.socket)==null?void 0:s.id)}));this.collaborators=i,this.excalidrawAPI.updateScene({collaborators:i})}render(){const{errorMessage:n}=this.state;return g(ge,{children:n!=null&&g(B_,{onClose:()=>this.setErrorDialog(null),children:n})})}}window.collab=window.collab||{};const MIe=(e,t,n,i)=>{e.save(),e.strokeStyle=i,e.beginPath(),e.moveTo(n[0][0]*t,n[0][1]*t),e.lineTo(n[1][0]*t,n[1][1]*t),e.stroke(),e.restore()},RIe=(e,t,[n,i,s,r],o)=>{e.save(),e.strokeStyle=o,e.beginPath(),e.moveTo(n[0]*t,n[1]*t),e.bezierCurveTo(i[0]*t,i[1]*t,s[0]*t,s[1]*t,r[0]*t,r[1]*t),e.stroke(),e.restore()},kIe=(e,t)=>{e.strokeStyle="#888",e.save(),e.beginPath(),e.moveTo(-10*t,-10*t),e.lineTo(10*t,10*t),e.moveTo(10*t,-10*t),e.lineTo(-10*t,10*t),e.stroke(),e.save()},oL=(e,t,n)=>{e.forEach(i=>{switch(!0){case nse(i.data):MIe(t,n.zoom.value,i.data,i.color);break;case ose(i.data):RIe(t,n.zoom.value,i.data,i.color);break;default:throw new Error(`Unknown element type ${JSON.stringify(i)}`)}})},DIe=(e,t,n,i)=>{var a,l,c,u;const[s,r]=Q5(e,n);(t.height!==e.height||t.width!==e.width)&&i();const o=J5({canvas:e,scale:n,normalizedWidth:s,normalizedHeight:r,viewBackgroundColor:"transparent"});if(o.save(),o.translate(t.scrollX*t.zoom.value,t.scrollY*t.zoom.value),kIe(o,t.zoom.value),(a=window.visualDebug)!=null&&a.currentFrame&&((l=window.visualDebug)!=null&&l.data)&&window.visualDebug.data.length>0){const[d]=LIe();oL(window.visualDebug.data[d],o,t)}else(c=window.visualDebug)==null||c.data.forEach(d=>{oL(d,o,t)});window.visualDebug&&(window.visualDebug.data=((u=window.visualDebug)==null?void 0:u.data.map(d=>d.filter(f=>f.permanent)))??[])},LIe=()=>{var n,i,s;const e=((n=window.visualDebug)==null?void 0:n.currentFrame)??0,t=((i=window.visualDebug)==null?void 0:i.data.length)??0;return t>0?[e%t,((s=window.visualDebug)==null?void 0:s.currentFrame)??0]:[0,0]},aL=e=>{try{localStorage.setItem(un.LOCAL_STORAGE_DEBUG,JSON.stringify(e))}catch(t){console.error(t)}},NIe=dg((e,t,n,i)=>{DIe(e,t,n,i)},{trailing:!0}),OIe=()=>{let e;try{const t=localStorage.getItem(un.LOCAL_STORAGE_DEBUG);t&&(e=JSON.parse(t))}catch(t){console.error(t)}return e??{enabled:!1}},XW=()=>{var e;return Array.isArray((e=window.visualDebug)==null?void 0:e.data)},PIe=({onChange:e})=>{const t=L.useCallback(()=>{var r,o;(!((r=window.visualDebug)!=null&&r.currentFrame)||isNaN(((o=window.visualDebug)==null?void 0:o.currentFrame)??-1))&&(window.visualDebug.currentFrame=0),window.visualDebug.currentFrame+=1,e()},[e]),n=L.useCallback(()=>{var r,o,a;(!((r=window.visualDebug)!=null&&r.currentFrame)||isNaN(((o=window.visualDebug)==null?void 0:o.currentFrame)??-1)||((a=window.visualDebug)==null?void 0:a.currentFrame)<1)&&(window.visualDebug.currentFrame=1),window.visualDebug.currentFrame-=1,e()},[e]),i=L.useCallback(()=>{window.visualDebug.currentFrame=void 0,e()},[e]),s=L.useCallback(()=>{window.visualDebug&&(window.visualDebug.currentFrame=void 0,window.visualDebug.data=[]),e()},[e]);return P(ge,{children:[g("button",{className:"ToolIcon_type_button","data-testid":"debug-forward","aria-label":"Move forward",type:"button",onClick:s,children:g("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:Oc})}),g("button",{className:"ToolIcon_type_button","data-testid":"debug-forward","aria-label":"Move forward",type:"button",onClick:n,children:g("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:g(d4,{flip:!0})})}),g("button",{className:"ToolIcon_type_button","data-testid":"debug-forward","aria-label":"Move forward",type:"button",onClick:i,children:g("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:Fd})}),g("button",{className:"ToolIcon_type_button","data-testid":"debug-backward","aria-label":"Move backward",type:"button",onClick:t,children:g("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:g(d4,{})})})]})},FIe=({appState:e,scale:t,ref:n})=>{const{width:i,height:s}=e,r=L.useRef(null);return L.useImperativeHandle(n,()=>r.current,[r]),g("canvas",{style:{width:i,height:s,position:"absolute",zIndex:2,pointerEvents:"none"},width:i*t,height:s*t,ref:r,children:"Debug Canvas"})},BIe=()=>{const{t:e}=Un();return g("a",{className:"encrypted-icon tooltip",href:"https://plus.excalidraw.com/blog/end-to-end-encryption",target:"_blank",rel:"noopener","aria-label":e("encrypted.link"),children:g(ll,{label:e("encrypted.tooltip"),long:!0,children:Cue})})},zIe=()=>wm?g("a",{href:"http://localhost:3000?utm_source=excalidraw&utm_medium=app&utm_content=signedInUserRedirectButton#excalidraw-redirect",target:"_blank",rel:"noopener",className:"plus-button",children:"Go to Excalidraw+"}):null,HIe=ae.memo(({onChange:e})=>g(Sj,{children:P("div",{style:{display:"flex",gap:".5rem",alignItems:"center"},children:[XW()&&g(PIe,{onChange:e}),wm?g(zIe,{}):g(BIe,{})]})}));function VIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dm(e){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dm(e)}function $Ie(e,t){if(Dm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Dm(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function GIe(e){var t=$Ie(e,"string");return Dm(t)=="symbol"?t:t+""}function XIe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,GIe(i.key),i)}}function jIe(e,t,n){return t&&XIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var jW=[],YIe=jW.forEach,WIe=jW.slice;function KIe(e){return YIe.call(WIe.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e}var lL=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,ZIe=function(t,n,i){var s=i||{};s.path=s.path||"/";var r=encodeURIComponent(n),o=t+"="+r;if(s.maxAge>0){var a=s.maxAge-0;if(isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(a)}if(s.domain){if(!lL.test(s.domain))throw new TypeError("option domain is invalid");o+="; Domain="+s.domain}if(s.path){if(!lL.test(s.path))throw new TypeError("option path is invalid");o+="; Path="+s.path}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(o+="; HttpOnly"),s.secure&&(o+="; Secure"),s.sameSite){var l=typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},cL={create:function(t,n,i,s){var r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};i&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+i*60*1e3)),s&&(r.domain=s),document.cookie=ZIe(t,encodeURIComponent(n),r)},read:function(t){for(var n=t+"=",i=document.cookie.split(";"),s=0;s<i.length;s++){for(var r=i[s];r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(n)===0)return r.substring(n.length,r.length)}return null},remove:function(t){this.create(t,"",-1)}},qIe={name:"cookie",lookup:function(t){var n;if(t.lookupCookie&&typeof document<"u"){var i=cL.read(t.lookupCookie);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupCookie&&typeof document<"u"&&cL.create(n.lookupCookie,t,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},QIe={name:"querystring",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));for(var s=i.substring(1),r=s.split("&"),o=0;o<r.length;o++){var a=r[o].indexOf("=");if(a>0){var l=r[o].substring(0,a);l===t.lookupQuerystring&&(n=r[o].substring(a+1))}}}return n}},f1=null,uL=function(){if(f1!==null)return f1;try{f1=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{f1=!1}return f1},JIe={name:"localStorage",lookup:function(t){var n;if(t.lookupLocalStorage&&uL()){var i=window.localStorage.getItem(t.lookupLocalStorage);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupLocalStorage&&uL()&&window.localStorage.setItem(n.lookupLocalStorage,t)}},h1=null,dL=function(){if(h1!==null)return h1;try{h1=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{h1=!1}return h1},exe={name:"sessionStorage",lookup:function(t){var n;if(t.lookupSessionStorage&&dL()){var i=window.sessionStorage.getItem(t.lookupSessionStorage);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupSessionStorage&&dL()&&window.sessionStorage.setItem(n.lookupSessionStorage,t)}},txe={name:"navigator",lookup:function(t){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var i=0;i<navigator.languages.length;i++)n.push(navigator.languages[i]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},nxe={name:"htmlTag",lookup:function(t){var n,i=t.htmlTag||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(n=i.getAttribute("lang")),n}},ixe={name:"path",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(i instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof i[t.lookupFromPathIndex]!="string")return;n=i[t.lookupFromPathIndex].replace("/","")}else n=i[0].replace("/","")}return n}},sxe={name:"subdomain",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);i instanceof Array&&(typeof t.lookupFromSubdomainIndex=="number"?n=i[t.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n=i[0].replace("http://","").replace("https://","").replace(".",""))}return n}};function rxe(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var YW=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};VIe(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return jIe(e,[{key:"init",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=KIe(i,this.options||{},rxe()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(qIe),this.addDetector(QIe),this.addDetector(JIe),this.addDetector(exe),this.addDetector(txe),this.addDetector(nxe),this.addDetector(ixe),this.addDetector(sxe)}},{key:"addDetector",value:function(n){this.detectors[n.name]=n}},{key:"detect",value:function(n){var i=this;n||(n=this.options.order);var s=[];return n.forEach(function(r){if(i.detectors[r]){var o=i.detectors[r].lookup(i.options);o&&typeof o=="string"&&(o=[o]),o&&(s=s.concat(o))}}),this.services.languageUtils.getBestMatchFromCodes?s:s.length>0?s[0]:null}},{key:"cacheUserLanguage",value:function(n,i){var s=this;i||(i=this.options.caches),i&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||i.forEach(function(r){s.detectors[r]&&s.detectors[r].cacheUserLanguage(n,s.options)}))}}]),e}();YW.type="languageDetector";const jT=new YW;jT.init({languageUtils:{}});const WW=()=>{var i;const e=jT.detect(),t=Array.isArray(e)?e[0]:e;return(t?(i=ap.find(s=>s.code.startsWith(t)))==null?void 0:i.code:null)||Pd.code},KW=Zt(WW()),oxe=()=>{const[e,t]=Ph(KW);return L.useEffect(()=>{jT.cacheUserLanguage(e)},[e]),[e,t]},axe=({style:e})=>{const{t,langCode:n}=Un(),i=kw(KW);return g("select",{className:"dropdown-select dropdown-select__language",onChange:({target:s})=>i(s.value),value:n,"aria-label":t("buttons.selectLanguage"),style:e,children:ap.map(s=>g("option",{value:s.code,children:s.label},s.code))})},lxe=ae.memo(e=>P(Tt,{children:[g(Tt.DefaultItems.LoadScene,{}),g(Tt.DefaultItems.SaveToActiveFile,{}),g(Tt.DefaultItems.Export,{}),g(Tt.DefaultItems.SaveAsImage,{}),e.isCollabEnabled&&g(Tt.DefaultItems.LiveCollaborationTrigger,{isCollaborating:e.isCollaborating,onSelect:()=>e.onCollabDialogOpen()}),g(Tt.DefaultItems.CommandPalette,{className:"highlighted"}),g(Tt.DefaultItems.SearchMenu,{}),g(Tt.DefaultItems.Help,{}),g(Tt.DefaultItems.ClearCanvas,{}),g(Tt.Separator,{}),g(Tt.DefaultItems.Socials,{}),g(Tt.ItemLink,{icon:Nde,href:`http://localhost:3000${wm?"":"/sign-up"}?utm_source=signin&utm_medium=app&utm_content=hamburger`,className:"highlighted",children:wm?"Sign in":"Sign up"}),g(Tt.Item,{icon:R5,onClick:()=>{window.visualDebug?(delete window.visualDebug,aL({enabled:!1})):(window.visualDebug={data:[]},aL({enabled:!0})),e==null||e.refresh()},children:"Visual Debug"}),g(Tt.Separator,{}),g(Tt.DefaultItems.ToggleTheme,{allowSystemTheme:!0,theme:e.theme,onSelect:e.setTheme}),g(Tt.ItemCustom,{children:g(axe,{style:{width:"100%"}})}),g(Tt.DefaultItems.ChangeCanvasBackground,{})]})),cxe=ae.memo(e=>{const{t}=Un();let n;return wm?n=t("welcomeScreen.app.center_heading_plus").split(/(Excalidraw\+)/).map((i,s)=>i==="Excalidraw+"?g("a",{style:{pointerEvents:gu.inheritFromUI},href:"http://localhost:3000?utm_source=excalidraw&utm_medium=app&utm_content=welcomeScreenSignedInUser",children:"Excalidraw+"},s):i):n=t("welcomeScreen.app.center_heading"),P(cs,{children:[g(cs.Hints.MenuHint,{children:t("welcomeScreen.app.menuHint")}),g(cs.Hints.ToolbarHint,{}),g(cs.Hints.HelpHint,{}),P(cs.Center,{children:[g(cs.Center.Logo,{}),g(cs.Center.Heading,{children:n}),P(cs.Center.Menu,{children:[g(cs.Center.MenuItemLoadScene,{}),g(cs.Center.MenuItemHelp,{}),e.isCollabEnabled&&g(cs.Center.MenuItemLiveCollaborationTrigger,{onSelect:()=>e.onCollabDialogOpen()})]})]})]})}),yv=async(e,t,n,i)=>{const s=await LW(),r=`${fF(12)}`,o=await p_(),a=await Z5(o,yg(e,t,n,"database")),l=new Blob([a.iv,new Uint8Array(a.encryptedBuffer)],{type:ye.binary}),c=RW(s,`/migrations/scenes/${r}`);await MW(c,l,{customMetadata:{data:JSON.stringify({version:2,name:i}),created:Date.now().toString()}});const u=new Map;for(const d of e)In(d)&&n[d.fileId]&&u.set(d.fileId,n[d.fileId]);if(u.size){const d=await sT({files:u,encryptionKey:o,maxBytes:iT});await GT({prefix:`/migrations/files/scenes/${r}`,files:d})}window.open(`http://localhost:3000/import?excalidraw=${r},${o}`)},uxe=({elements:e,appState:t,files:n,name:i,onError:s,onSuccess:r})=>{const{t:o}=Un();return P(W4,{color:"primary",children:[g("div",{className:"Card-icon",children:g(xj,{style:{"--color-logo-icon":"#fff",width:"2.8rem",height:"2.8rem"}})}),g("h2",{children:"Excalidraw+"}),g("div",{className:"Card-details",children:o("exportDialog.excalidrawplus_description")}),g(Ye,{className:"Card-button",type:"button",title:o("exportDialog.excalidrawplus_button"),"aria-label":o("exportDialog.excalidrawplus_button"),showAriaLabel:!0,onClick:async()=>{try{at("export","eplus",`ui (${qm()})`),await yv(e,t,n,i),r()}catch(a){console.error(a),a.name!=="AbortError"&&s(new Error(o("exportDialog.excalidrawplus_exportError")))}}})]})};class dxe extends ae.Component{constructor(){super(...arguments);F(this,"state",{hasError:!1,sentryEventId:"",localStorage:""})}render(){return this.state.hasError?this.errorSplash():this.props.children}componentDidCatch(n,i){const s={};for(const[r,o]of Object.entries({...localStorage}))try{s[r]=JSON.parse(o)}catch{s[r]=o}I9(r=>{r.setExtras(i);const o=M9(n);this.setState(a=>({hasError:!0,sentryEventId:o,localStorage:JSON.stringify(s)}))})}selectTextArea(n){n.target!==document.activeElement&&(n.preventDefault(),n.target.select())}async createGithubIssue(){let n="";try{const i=(await be(()=>import("./bug-issue-template-BID_ABWq.js"),__vite__mapDeps([]))).default;n=encodeURIComponent(i(this.state.sentryEventId))}catch(i){console.error(i)}window.open(`https://github.com/excalidraw/excalidraw/issues/new?body=${n}`,"_blank","noopener noreferrer")}errorSplash(){return g("div",{className:"ErrorSplash excalidraw",children:P("div",{className:"ErrorSplash-messageContainer",children:[g("div",{className:"ErrorSplash-paragraph bigger align-center",children:g(Us,{i18nKey:"errorSplash.headingMain",button:n=>g("button",{onClick:()=>window.location.reload(),children:n})})}),P("div",{className:"ErrorSplash-paragraph align-center",children:[g(Us,{i18nKey:"errorSplash.clearCanvasMessage",button:n=>g("button",{onClick:()=>{try{localStorage.clear(),window.location.reload()}catch(i){console.error(i)}},children:n})}),g("br",{}),P("div",{className:"smaller",children:[g("span",{role:"img","aria-label":"warning",children:"⚠️"}),k("errorSplash.clearCanvasCaveat"),g("span",{role:"img","aria-hidden":"true",children:"⚠️"})]})]}),P("div",{children:[g("div",{className:"ErrorSplash-paragraph",children:k("errorSplash.trackedToSentry",{eventId:this.state.sentryEventId})}),g("div",{className:"ErrorSplash-paragraph",children:g(Us,{i18nKey:"errorSplash.openIssueMessage",button:n=>g("button",{onClick:()=>this.createGithubIssue(),children:n})})}),g("div",{className:"ErrorSplash-paragraph",children:P("div",{className:"ErrorSplash-details",children:[g("label",{children:k("errorSplash.sceneContent")}),g("textarea",{rows:5,onPointerDown:this.selectTextArea,readOnly:!0,value:this.state.localStorage})]})})]})]})})}}const ZW=Zt({isOpen:!1}),fxe=()=>{const e=window.navigator,t=/Apple/.test(e.vendor),n=e.appVersion.indexOf("Win")!==-1;return t?_ue:n?Sue:zw},hxe=({collabAPI:e,activeRoomLink:t,handleClose:n})=>{const{t:i}=Un(),[,s]=L.useState(!1),r=L.useRef(0),o=L.useRef(null),a="share"in navigator,{onCopy:l,copyStatus:c}=z_(),u=async()=>{var f;try{await eu(t)}catch{e.setCollabError(i("errors.copyToSystemClipboardFailed"))}s(!0),r.current&&window.clearTimeout(r.current),r.current=window.setTimeout(()=>{s(!1)},3e3),(f=o.current)==null||f.select()},d=async()=>{try{await navigator.share({title:i("roomDialog.shareTitle"),text:i("roomDialog.shareTitle"),url:t})}catch{}};return P(ge,{children:[g("h3",{className:"ShareDialog__active__header",children:i("labels.liveCollaboration").replace(/\./g,"")}),g(Gh,{defaultValue:e.getUsername(),placeholder:"Your name",label:"Your name",onChange:e.setUsername,onKeyDown:f=>f.key===z.ENTER&&n()}),P("div",{className:"ShareDialog__active__linkRow",children:[g(Gh,{ref:o,label:"Link",readonly:!0,fullWidth:!0,value:t}),a&&g(no,{size:"large",variant:"icon",label:"Share",icon:fxe(),className:"ShareDialog__active__share",onClick:d}),g(no,{size:"large",label:i("buttons.copyLink"),icon:lp,status:c,onClick:()=>{u(),l()}})]}),P("div",{className:"ShareDialog__active__description",children:[P("p",{children:[P("span",{role:"img","aria-hidden":"true",className:"ShareDialog__active__description__emoji",children:["🔒"," "]}),i("roomDialog.desc_privacy")]}),g("p",{children:i("roomDialog.desc_exitSession")})]}),g("div",{className:"ShareDialog__active__actions",children:g(no,{size:"large",variant:"outlined",color:"danger",label:i("roomDialog.button_stopSession"),icon:gde,onClick:()=>{at("share","room closed"),e.stopCollaboration(),e.isCollaborating()||n()}})})]})},gxe=e=>{const{t}=Un(),{collabAPI:n}=e,i=n?P(ge,{children:[g("div",{className:"ShareDialog__picker__header",children:t("labels.liveCollaboration").replace(/\./g,"")}),P("div",{className:"ShareDialog__picker__description",children:[g("div",{style:{marginBottom:"1em"},children:t("roomDialog.desc_intro")}),t("roomDialog.desc_privacy")]}),g("div",{className:"ShareDialog__picker__button",children:g(no,{size:"large",label:t("roomDialog.button_startSession"),icon:hde,onClick:()=>{at("share","room creation",`ui (${qm()})`),n.startCollaboration(null)}})}),e.type==="share"&&g("div",{className:"ShareDialog__separator",children:g("span",{children:t("shareDialog.or")})})]}):null;return P(ge,{children:[i,e.type==="share"&&P(ge,{children:[g("div",{className:"ShareDialog__picker__header",children:t("exportDialog.link_title")}),g("div",{className:"ShareDialog__picker__description",children:t("exportDialog.link_details")}),g("div",{className:"ShareDialog__picker__button",children:g(no,{size:"large",label:t("exportDialog.link_button"),icon:Wb,onClick:async()=>{await e.onExportToBackend(),e.handleClose()}})})]})]})},mxe=e=>{const t=Q0(GW);return g(Ws,{size:"small",onCloseRequest:e.handleClose,title:!1,children:g("div",{className:"ShareDialog",children:e.collabAPI&&t?g(hxe,{collabAPI:e.collabAPI,activeRoomLink:t,handleClose:e.handleClose}):g(gxe,{...e})})})},pxe=e=>{const[t,n]=Ph(ZW),{openDialog:i}=Ui();return L.useEffect(()=>{i&&n({isOpen:!1})},[i,n]),t.isOpen?g(mxe,{handleClose:()=>n({isOpen:!1}),collabAPI:e.collabAPI,onExportToBackend:e.onExportToBackend,type:t.type}):null},fL=()=>{var e;return(e=window.matchMedia)==null?void 0:e.call(window,"(prefers-color-scheme: dark)")},Uxe=()=>{const[e,t]=L.useState(()=>localStorage.getItem(un.LOCAL_STORAGE_THEME)||Me.LIGHT),[n,i]=L.useState(Me.LIGHT);return L.useEffect(()=>{const s=fL(),r=a=>{i(a.matches?Me.DARK:Me.LIGHT)};e==="system"&&(s==null||s.addEventListener("change",r));const o=a=>{!a[z.CTRL_OR_CMD]&&a.altKey&&a.shiftKey&&a.code===et.D&&(a.preventDefault(),a.stopImmediatePropagation(),t(n===Me.DARK?Me.LIGHT:Me.DARK))};return document.addEventListener(ee.KEYDOWN,o,{capture:!0}),()=>{s==null||s.removeEventListener("change",r),document.removeEventListener(ee.KEYDOWN,o,{capture:!0})}},[e,n,t]),L.useLayoutEffect(()=>{var s;localStorage.setItem(un.LOCAL_STORAGE_THEME,e),i(e==="system"?(s=fL())!=null&&s.matches?Me.DARK:Me.LIGHT:e)},[e]),{editorTheme:n,appTheme:e,setAppTheme:t}},bxe=({excalidrawAPI:e})=>P(ge,{children:[g(V4e,{generate:async({frame:t,children:n})=>{const i=e.getAppState(),s=await Fye({elements:n,appState:{...i,exportBackground:!0,viewBackgroundColor:i.viewBackgroundColor},exportingFrame:t,files:e.getFiles(),mimeType:ye.jpg}),r=await A4(s),o=KF(n),a=await fetch("http://localhost:3015/v1/ai/diagram-to-code/generate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({texts:o,image:r,theme:i.theme})});if(!a.ok){const l=await a.text(),c=Dse(l);if(!c)throw new Error(l);if(c.statusCode===429)return{html:`<html>
                <body style="margin: 0; text-align: center">
                <div style="display: flex; align-items: center; justify-content: center; flex-direction: column; height: 100vh; padding: 0 60px">
                  <div style="color:red">Too many requests today,</br>please try again tomorrow!</div>
                  </br>
                  </br>
                  <div>You can also try <a href="/plus?utm_source=excalidraw&utm_medium=app&utm_content=d2c" target="_blank" rel="noopener">Excalidraw+</a> to get more requests.</div>
                </div>
                </body>
                </html>`};throw new Error(c.message||l)}try{const{html:l}=await a.json();if(!l)throw new Error("Generation failed (invalid response)");return{html:l}}catch{throw new Error("Generation failed (invalid response)")}}}),g(Ej,{onTextSubmit:async t=>{try{const n=await fetch("http://localhost:3015/v1/ai/text-to-diagram/generate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({prompt:t})}),i=n.headers.has("X-Ratelimit-Limit")?parseInt(n.headers.get("X-Ratelimit-Limit")||"0",10):void 0,s=n.headers.has("X-Ratelimit-Remaining")?parseInt(n.headers.get("X-Ratelimit-Remaining")||"0",10):void 0,r=await n.json();if(!n.ok){if(n.status===429)return{rateLimit:i,rateLimitRemaining:s,error:new Error("Too many requests today, please try again tomorrow!")};throw new Error(r.message||"Generation failed...")}const o=r.generatedResponse;if(!o)throw new Error("Generation failed...");return{generatedResponse:o,rateLimit:i,rateLimitRemaining:s}}catch{throw new Error("Request failed")}}})]}),yxe="REQUEST_SCENE",HU="http://localhost:3000",Exe=async({rawElementsString:e,rawAppStateString:t})=>{if(!e||!t)throw new qr("Elements or appstate is missing.");try{const n=JSON.parse(e);if(!n.length)throw new qr("Scene is empty, nothing to export.");const i=JSON.parse(t),s=n.reduce((o,a)=>("fileId"in a&&a.fileId&&o.push(a.fileId),o),[]),r=await vi.fileStorage.getFiles(s);return{type:"SCENE_DATA",elements:n,appState:i,files:r}}catch(n){throw n instanceof qr?n:new qr("Failed to parse scene data.")}},vxe=async({token:e,publicKey:t})=>{try{const[n,i,s]=e.split(".");if(!n||!i||!s)throw new qr("Invalid JWT format");const r=mR(i),o=mR(s),a=`${n}.${i}`,l=Uint8Array.from(o,p=>p.charCodeAt(0)),c=t.replace(/-----\w+ PUBLIC KEY-----/g,""),u=Uint8Array.from(atob(c),p=>p.charCodeAt(0)),d=await crypto.subtle.importKey("spki",u,{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"},!0,["verify"]);if(!await crypto.subtle.verify("RSASSA-PKCS1-v1_5",d,l,new TextEncoder().encode(a)))throw new Error("Invalid JWT");const h=JSON.parse(r),m=Math.floor(Date.now()/1e3);if(h.exp&&h.exp<m)throw new Error("JWT has expired")}catch(n){throw console.error("Failed to verify JWT:",n),new Error(n instanceof Error?n.message:"Invalid JWT")}},wxe=()=>{const e=L.useRef(!1);return L.useLayoutEffect(()=>{const t=async n=>{if(n.origin!==HU)throw new qr("Invalid origin");if(n.data.type===yxe){if(!n.data.jwt)throw new qr("JWT is missing");try{try{await vxe({token:n.data.jwt,publicKey:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAm2g5T+Rub6Kbf1Mf57t0
7r2zeHuVg4dla3r5ryXMswtzz6x767octl6oLThn33mQsPSy3GKglFZoCTXJR4ij
ba8SxB04sL/N8eRrKja7TFWjCVtRwTTfyy771NYYNFVJclkxHyE5qw4m27crHF1y
UNWEjuqNMi/lwAErS9fFa2oJlWyT8U7zzv/5kQREkxZI6y9v0AF3qcbsy2731FnD
s9ChJvOUW9toIab2gsIdrKW8ZNpu084ZFVKb6LNjvIXI1Se4oMTHeszXzNptzlot
kdxxjOoaQMAyfljFSot1F1FlU6MQlag7UnFGvFjRHN1JI5q4K+n3a67DX+TMyRqS
HQIDAQAB`})}catch(s){throw console.error(`Failed to verify JWT: ${s.message}`),new qr("Failed to verify JWT")}const i=await Exe({rawAppStateString:localStorage.getItem(un.LOCAL_STORAGE_APP_STATE),rawElementsString:localStorage.getItem(un.LOCAL_STORAGE_ELEMENTS)});n.source.postMessage(i,{targetOrigin:HU})}catch(i){const s={type:"ERROR",message:i instanceof qr?i.message:"Failed to export scene data"};n.source.postMessage(s,{targetOrigin:HU})}}};if(window.addEventListener("message",t),!e.current){e.current=!0;const n={type:"READY"};window.parent.postMessage(n,HU)}return()=>{window.removeEventListener("message",t)}},[]),null};Rj();window.EXCALIDRAW_THROTTLE_RENDER=!0;let wf=null;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),wf=e});let qW=!1;if(window.self!==window.top)try{const e=new URL(document.referrer),t=new URL(window.location.href);e.origin===t.origin&&(qW=!0)}catch{}const hL={title:k("overwriteConfirm.modal.shareableLink.title"),description:g(Us,{i18nKey:"overwriteConfirm.modal.shareableLink.description",bold:e=>g("strong",{children:e}),br:()=>g("br",{})}),actionLabel:k("overwriteConfirm.modal.shareableLink.button"),color:"danger"},Ev=async e=>{var c,u;const n=new URLSearchParams(window.location.search).get("id"),i=window.location.hash.match(/^#json=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/),s=window.location.hash.match(/^#url=(.*)$/),r=Oj();let o=await sL(null,null,r),a=uIe(window.location.href);const l=!!(n||i||a);if(l)if(!o.elements.length||a||await $4(hL))i&&(o=await sL(i[1],i[2],r)),o.scrollToContent=!0,a||window.history.replaceState({},Va,window.location.origin);else{if(document.hidden)return new Promise((d,f)=>{window.addEventListener("focus",()=>Ev(e).then(d).catch(f),{once:!0})});a=null,window.history.replaceState({},Va,window.location.origin)}else if(s){window.history.replaceState({},Va,window.location.origin);const d=s[1];try{const f=await fetch(window.decodeURIComponent(d)),h=await w_(await f.blob(),null,null);if(!o.elements.length||await $4(hL))return{scene:h,isExternalScene:l}}catch{return{scene:{appState:{errorMessage:k("alerts.invalidSceneUrl")}},isExternalScene:l}}}if(a&&e.collabAPI){const{excalidrawAPI:d}=e,f=await e.collabAPI.startCollaboration(a);return{scene:{...f,appState:{...nG({...f==null?void 0:f.appState,theme:((c=r==null?void 0:r.appState)==null?void 0:c.theme)||((u=f==null?void 0:f.appState)==null?void 0:u.theme)},d.getAppState()),isLoading:!1},elements:nT((f==null?void 0:f.elements)||[],d.getSceneElementsIncludingDeleted(),d.getAppState())},isExternalScene:!0,id:a.roomId,key:a.roomKey}}else if(o)return l&&i?{scene:o,isExternalScene:l,id:i[1],key:i[2]}:{scene:o,isExternalScene:!1};return{scene:null,isExternalScene:!1}},_xe=()=>{const[e,t]=L.useState(""),n=Ase(),{editorTheme:i,appTheme:s,setAppTheme:r}=Uxe(),[o,a]=oxe(),l=L.useRef({promise:null});l.current.promise||(l.current.promise=f5());const c=L.useRef(null);L.useEffect(()=>{at("load","frame",qm()),setTimeout(()=>{at("load","version",A3())},Nie)},[]);const[u,d]=CG(),[,f]=Ph(ZW),[h]=Ph(VW),[m]=ove(bv,()=>iL(window.location.href)),p=Q0(Uv);Xye({excalidrawAPI:u,adapter:F6,migrationAdapter:xIe});const[,U]=L.useState(!1);L.useEffect(()=>{OIe().enabled&&!window.visualDebug?window.visualDebug={data:[]}:delete window.visualDebug,U(x=>!x)},[u]),L.useEffect(()=>{if(!u||!n&&!h)return;const _=($,G=!1)=>{var H;if($.scene)if(h!=null&&h.isCollaborating())$.scene.elements&&h.fetchImageFilesFromFirebase({elements:$.scene.elements,forceFetchFiles:!0}).then(({loadedFiles:V,erroredFiles:X})=>{u.addFiles(V),N1({excalidrawAPI:u,erroredFiles:X,elements:u.getSceneElementsIncludingDeleted()})});else{const V=((H=$.scene.elements)==null?void 0:H.reduce((X,j)=>In(j)?X.concat(j.fileId):X,[]))||[];$.isExternalScene?OW(`${Lj.shareLinkFiles}/${$.id}`,$.key,V).then(({loadedFiles:X,erroredFiles:j})=>{u.addFiles(X),N1({excalidrawAPI:u,erroredFiles:j,elements:u.getSceneElementsIncludingDeleted()})}):G&&(V.length&&vi.fileStorage.getFiles(V).then(({loadedFiles:X,erroredFiles:j})=>{X.length&&u.addFiles(X),N1({excalidrawAPI:u,erroredFiles:j,elements:u.getSceneElementsIncludingDeleted()})}),vi.fileStorage.clearObsoleteFiles({currentFileIds:V}))}};Ev({collabAPI:h,excalidrawAPI:u}).then(async $=>{_($,!0),l.current.promise.resolve($.scene)});const x=async $=>{$.preventDefault(),F4()||(h!=null&&h.isCollaborating()&&!iL(window.location.href)&&h.stopCollaboration(!1),u.updateScene({appState:{isLoading:!0}}),Ev({collabAPI:h,excalidrawAPI:u}).then(H=>{_(H),H.scene&&u.updateScene({...H.scene,..._d(H.scene,null,null,{repairBindings:!0}),captureUpdate:K.IMMEDIATELY})}))},C=setTimeout(()=>document.title=Va,Lie),R=Qa(()=>{if(!document.hidden&&(h&&!h.isCollaborating()||n)){if(rL(un.VERSION_DATA_STATE)){const $=Oj(),G=Nj();a(WW()),u.updateScene({...$,captureUpdate:K.NEVER}),F6.load().then(H=>{H&&u.updateLibrary({libraryItems:H.libraryItems})}),h==null||h.setUsername(G||"")}if(rL(un.VERSION_FILES)){const $=u.getSceneElementsIncludingDeleted(),G=u.getFiles(),H=($==null?void 0:$.reduce((V,X)=>In(X)&&!G[X.fileId]?V.concat(X.fileId):V,[]))||[];H.length&&vi.fileStorage.getFiles(H).then(({loadedFiles:V,erroredFiles:X})=>{V.length&&u.addFiles(V),N1({excalidrawAPI:u,erroredFiles:X,elements:u.getSceneElementsIncludingDeleted()})})}}},Z4e),N=()=>{vi.flushSave()},D=$=>{($.type===ee.BLUR||document.hidden)&&vi.flushSave(),($.type===ee.VISIBILITY_CHANGE||$.type===ee.FOCUS)&&R()};return window.addEventListener(ee.HASHCHANGE,x,!1),window.addEventListener(ee.UNLOAD,N,!1),window.addEventListener(ee.BLUR,D,!1),document.addEventListener(ee.VISIBILITY_CHANGE,D,!1),window.addEventListener(ee.FOCUS,D,!1),()=>{window.removeEventListener(ee.HASHCHANGE,x,!1),window.removeEventListener(ee.UNLOAD,N,!1),window.removeEventListener(ee.BLUR,D,!1),window.removeEventListener(ee.FOCUS,D,!1),document.removeEventListener(ee.VISIBILITY_CHANGE,D,!1),clearTimeout(C)}},[n,h,u,a]),L.useEffect(()=>{const _=x=>{vi.flushSave(),u&&vi.fileStorage.shouldPreventUnload(u.getSceneElements())&&$9(x)};return window.addEventListener(ee.BEFORE_UNLOAD,_),()=>{window.removeEventListener(ee.BEFORE_UNLOAD,_)}},[u]);const y=(_,x,C)=>{h!=null&&h.isCollaborating()&&h.syncElements(_),vi.isSavePaused()||vi.save(_,x,C,()=>{if(u){let R=!1;const N=u.getSceneElementsIncludingDeleted().map(D=>{if(vi.fileStorage.shouldUpdateImageElementStatus(D)){const $=Ie(D,{status:"saved"});return $!==D&&(R=!0),$}return D});R&&u.updateScene({elements:N,captureUpdate:K.NEVER})}}),c.current&&u&&NIe(c.current,x,window.devicePixelRatio,()=>U(R=>!R))},[E,v]=L.useState(null),w=async(_,x,C)=>{if(_.length===0)throw new Error(k("alerts.cannotExportEmptyCanvas"));try{const{url:R,errorMessage:N}=await mIe(_,{...x,viewBackgroundColor:x.exportBackground?x.viewBackgroundColor:Jo().viewBackgroundColor},C);if(N)throw new Error(N);R&&v(R)}catch(R){if(R.name!=="AbortError"){const{width:N,height:D}=x;throw console.error(R,{width:N,height:D,devicePixelRatio:window.devicePixelRatio}),new Error(R.message)}}},I=(_,x)=>g(rve,{setToast:C=>u.setToast({message:C}),appState:x,elements:_}),M=Q0($W),T=L.useCallback(()=>f({isOpen:!0,type:"collaborationOnly"}),[f]);return qW?g("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",height:"100%"},children:g("h1",{children:"I'm not a pretzel!"})}):g("div",{style:{height:"100%"},className:pe("excalidraw-app",{"is-collaborating":m}),children:P(Dj,{excalidrawAPI:d,onChange:y,initialData:l.current.promise,isCollaborating:m,onPointerUpdate:h==null?void 0:h.onPointerUpdate,UIOptions:{canvasActions:{toggleTheme:!0,export:{onExportToBackend:w,renderCustomUI:u?(_,x,C)=>g(uxe,{elements:_,appState:x,files:C,name:u.getName(),onError:R=>{u==null||u.updateScene({appState:{errorMessage:R.message}})},onSuccess:()=>{u.updateScene({appState:{openDialog:null}})}}):void 0}}},langCode:o,renderCustomStats:I,detectScroll:!1,handleKeyboardGlobally:!0,autoFocus:!0,theme:i,renderTopRightUI:_=>_||!h||n?null:P("div",{className:"top-right-ui",children:[p.message&&g(HW,{collabError:p}),g(Ij,{isCollaborating:m,onSelect:()=>f({isOpen:!0,type:"share"})})]}),onLinkOpen:(_,x)=>{_.link&&ih(_.link)&&(x.preventDefault(),u==null||u.scrollToContent(_.link,{animate:!0}))},children:[g(lxe,{onCollabDialogOpen:T,isCollaborating:m,isCollabEnabled:!n,theme:s,setTheme:_=>r(_),refresh:()=>U(_=>!_)}),g(cxe,{onCollabDialogOpen:T,isCollabEnabled:!n}),P(Nu,{children:[g(Nu.Actions.ExportToImage,{}),g(Nu.Actions.SaveToDisk,{}),u&&g(Nu.Action,{title:k("overwriteConfirm.action.excalidrawPlus.title"),actionLabel:k("overwriteConfirm.action.excalidrawPlus.button"),onClick:()=>{yv(u.getSceneElements(),u.getAppState(),u.getFiles(),u.getName())},children:k("overwriteConfirm.action.excalidrawPlus.description")})]}),g(HIe,{onChange:()=>u==null?void 0:u.refresh()}),u&&g(bxe,{excalidrawAPI:u}),g(kj,{}),m&&M&&g("div",{className:"collab-offline-warning",children:k("alerts.collabOfflineWarning")}),E&&g(X4e,{link:E,onCloseRequest:()=>v(null),setErrorMessage:t}),u&&!n&&g(AIe,{excalidrawAPI:u}),g(pxe,{collabAPI:h,onExportToBackend:async()=>{if(u)try{await w(u.getSceneElements(),u.getAppState(),u.getFiles())}catch(_){t(_.message)}}}),e&&g(B_,{onClose:()=>t(""),children:e}),g(QR,{customCommandPaletteItems:[{label:k("labels.liveCollaboration"),category:St.app,keywords:["team","multiplayer","share","public","session","invite"],icon:Hw,perform:()=>{f({isOpen:!0,type:"collaborationOnly"})}},{label:k("roomDialog.button_stopSession"),category:St.app,predicate:()=>!!(h!=null&&h.isCollaborating()),keywords:["stop","session","end","leave","close","exit","collaboration"],perform:()=>{h&&(h.stopCollaboration(),h.isCollaborating()||f({isOpen:!1}))}},{label:k("labels.share"),category:St.app,predicate:!0,icon:zw,keywords:["link","shareable","readonly","export","publish","snapshot","url","collaborate","invite"],perform:async()=>{f({isOpen:!0,type:"share"})}},{label:"GitHub",icon:Fw,category:St.links,predicate:!0,keywords:["issues","bugs","requests","report","features","social","community"],perform:()=>{window.open("https://github.com/excalidraw/excalidraw","_blank","noopener noreferrer")}},{label:k("labels.followUs"),icon:hue,category:St.links,predicate:!0,keywords:["twitter","contact","social","community"],perform:()=>{window.open("https://x.com/excalidraw","_blank","noopener noreferrer")}},{label:k("labels.discordChat"),category:St.links,predicate:!0,icon:mH,keywords:["chat","talk","contact","bugs","requests","report","feedback","suggestions","social","community"],perform:()=>{window.open("https://discord.gg/UexuTaE","_blank","noopener noreferrer")}},{label:"YouTube",icon:IH,category:St.links,predicate:!0,keywords:["features","tutorials","howto","help","community"],perform:()=>{window.open("https://youtube.com/@excalidraw","_blank","noopener noreferrer")}},{label:k("overwriteConfirm.action.excalidrawPlus.button"),category:St.export,icon:Tue,predicate:!0,keywords:["plus","export","save","backup"],perform:()=>{u&&yv(u.getSceneElements(),u.getAppState(),u.getFiles(),u.getName())}},{...QR.defaultItems.toggleTheme,perform:()=>{r(i===Me.DARK?Me.LIGHT:Me.DARK)}},{label:k("labels.installPWA"),category:St.app,predicate:()=>!!wf,perform:()=>{wf&&(wf.prompt(),wf.userChoice.then(()=>{wf=null}))}}]}),XW()&&u&&g(FIe,{appState:u.getAppState(),scale:window.devicePixelRatio,ref:c})]})})},Txe=()=>window.location.pathname==="/excalidraw-plus-export"?g(wxe,{}):g(dxe,{children:g(Gce,{store:Ll,children:g(_xe,{})})});var Sxe={};window.__EXCALIDRAW_SHA__=Sxe.VITE_APP_GIT_SHA;const Ixe=document.getElementById("root"),xxe=SQ.createRoot(Ixe);CQ();xxe.render(g(L.StrictMode,{children:g(Txe,{})}));export{be as _,Ra as c,hl as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/subset-worker.chunk-CVR6pt27.js","assets/subset-shared.chunk-D3ioWSie.js","assets/pica-DARfqxbt.js","assets/_commonjs-dynamic-modules-TDtrdbi3.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index-BuLZrB9_.js.map
